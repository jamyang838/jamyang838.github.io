import{$ as zs,$a as _h,A as hr,Aa as _r,Ab as Ga,B as Ai,Ba as a_,Bb as Ha,Ca as c_,Cb as S_,D as ch,Da as l_,Db as bh,E as dr,Ea as u_,Eb as wh,F as Jy,Fa as h_,Fb as Ks,Ga as d_,Gb as A_,H as js,Ha as f_,Hb as Ka,I as Qn,Ia as xi,Ib as br,J as lh,Jb as C_,K as Zy,Ka as p_,Kb as x_,L as e_,La as Gs,Lb as $t,Ma as q,Mb as Ya,Na as de,Nb as R_,O as t_,P as jt,Pb as Qa,Q as n_,Qa as g_,Qb as Xa,R as Ye,Ra as vr,S as we,T as Xn,Ta as Sn,U as ce,Ua as m_,Ub as D_,V as fr,Va as zt,Vb as Ys,W as i_,Wb as P_,X as je,Xa as y_,Y as uh,Ya as __,Yb as Ih,Z as ye,Za as v_,Zb as k_,_ as te,_a as ut,a as G,aa as pr,ab as J,b as be,ba as Xt,bb as vh,ca as gr,d as Hn,da as ze,db as L,e as b,ea as hh,eb as F,f as Gy,fa as r_,fb as qe,g as Hy,ga as qs,gb as Hs,ha as Ci,hb as $e,i as rh,ia as $s,ib as Tt,j as sh,ja as De,k as Si,ka as Pe,l as Mt,la as dh,m as Kn,ma as fh,mb as b_,n as Wa,na as Tn,nb as $,o as dt,ob as St,p as X,pa as ph,pb as qt,q as Bs,qa as gh,qb as ft,r as Ky,ra as mr,rb as pt,s as Yy,sa as Jt,sb as gt,t as oe,ta as s_,tb as Jn,u as oh,ua as mh,ub as Zt,v as Ot,va as o_,vb as w_,w as Qy,wa as Ws,x as ah,xb as I_,y as Xy,ya as yh,yb as E_,z as Yn,za as yr,zb as T_}from"./chunk-PUOJ2KNZ.js";var Th=class{};var wr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Sh=class{encodeKey(e){return M_(e)}encodeValue(e){return M_(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function MS(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var OS=/%(\d[a-f0-9])/gi,NS={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function M_(n){return encodeURIComponent(n).replace(OS,(e,t)=>NS[t]??e)}function Ja(n){return`${n}`}var Zn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Sh,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=MS(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Ja):[Ja(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Ja(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Ja(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var Ah=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function VS(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function O_(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function N_(n){return typeof Blob<"u"&&n instanceof Blob}function V_(n){return typeof FormData<"u"&&n instanceof FormData}function LS(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Qs=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(VS(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new wr,this.context??=new Ah,!this.params)this.params=new Zn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||O_(this.body)||N_(this.body)||V_(this.body)||LS(this.body)?this.body:this.body instanceof Zn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||V_(this.body)?null:N_(this.body)?this.body.type||null:O_(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Zn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,u=e.headers||this.headers,h=e.params||this.params,f=e.context??this.context;return e.setHeaders!==void 0&&(u=Object.keys(e.setHeaders).reduce((g,m)=>g.set(m,e.setHeaders[m]),u)),e.setParams&&(h=Object.keys(e.setParams).reduce((g,m)=>g.set(m,e.setParams[m]),h)),new n(t,i,o,{params:h,headers:u,context:f,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},L_=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(L_||{}),Ch=class{constructor(e,t=F_.Ok,i="OK"){this.headers=e.headers||new wr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var xh=class n extends Ch{constructor(e={}){super(e),this.type=L_.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var F_=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(F_||{});function Eh(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var QL=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Qs)o=i;else{let u;s.headers instanceof wr?u=s.headers:u=new wr(s.headers);let h;s.params&&(s.params instanceof Zn?h=s.params:h=new Zn({fromObject:s.params})),o=new Qs(i,r,s.body!==void 0?s.body:null,{headers:u,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=X(o).pipe(Ai(u=>this.handler.handle(u)));if(i instanceof Qs||s.observe==="events")return a;let c=a.pipe(Yn(u=>u instanceof xh));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return u.body}));case"blob":return c.pipe(oe(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new Error("Response is not a Blob.");return u.body}));case"text":return c.pipe(oe(u=>{if(u.body!==null&&typeof u.body!="string")throw new Error("Response is not a string.");return u.body}));case"json":default:return c.pipe(oe(u=>u.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Zn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,Eh(s,r))}post(i,r,s={}){return this.request("POST",i,Eh(s,r))}put(i,r,s={}){return this.request("PUT",i,Eh(s,r))}};e.\u0275fac=function(r){return new(r||e)(ye(Th))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})();var Ph=class extends x_{constructor(){super(...arguments),this.supportsDOMEvents=!0}},kh=class n extends Ph{static makeCurrent(){C_(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=BS();return t==null?null:jS(t)}resetBaseElement(){Xs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return R_(document.cookie,e)}},Xs=null;function BS(){return Xs=Xs||document.querySelector("base"),Xs?Xs.getAttribute("href"):null}function jS(n){return new URL(n,document.baseURI).pathname}var zS=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})(),Mh=new je(""),q_=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new we(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(ye(Mh),ye(Sn))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})(),Za=class{constructor(e){this._doc=e}},Rh="ng-app-id",$_=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Ih(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Rh}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Rh),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Rh,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(ye($t),ye(mh),ye(yh,8),ye(Ws))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})(),Dh={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Nh=/%COMP%/g,W_="%COMP%",qS=`_nghost-${W_}`,$S=`_ngcontent-${W_}`,WS=!0,GS=new je("",{providedIn:"root",factory:()=>WS});function HS(n){return $S.replace(Nh,n)}function KS(n){return qS.replace(Nh,n)}function G_(n,e){return e.map(t=>t.replace(Nh,n))}var U_=(()=>{let e=class e{constructor(i,r,s,o,a,c,u,h=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=u,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=Ih(c),this.defaultRenderer=new Js(i,a,u,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===zs.ShadowDom&&(r=be(G({},r),{encapsulation:zs.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof ec?s.applyToHost(i):s instanceof Zs&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,u=this.eventManager,h=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,g=this.platformIsServer;switch(r.encapsulation){case zs.Emulated:o=new ec(u,h,r,this.appId,f,a,c,g);break;case zs.ShadowDom:return new Oh(u,h,i,r,a,c,this.nonce,g);default:o=new Zs(u,h,r,f,a,c,g);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(ye(q_),ye($_),ye(mh),ye(GS),ye($t),ye(Ws),ye(Sn),ye(yh))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})(),Js=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Dh[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(B_(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(B_(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new we(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Dh[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Dh[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Gs.DashCase|Gs.Important)?e.style.setProperty(t,i,r&Gs.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Gs.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=br().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function B_(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Oh=class extends Js{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let u=G_(r.id,r.styles);for(let h of u){let f=document.createElement("style");a&&f.setAttribute("nonce",a),f.textContent=h,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Zs=class extends Js{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?G_(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},ec=class extends Zs{constructor(e,t,i,r,s,o,a,c){let u=r+"-"+i.id;super(e,t,i,s,o,a,c,u),this.contentAttr=HS(u),this.hostAttr=KS(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},YS=(()=>{let e=class e extends Za{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(ye($t))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})(),j_=["alt","control","meta","shift"],QS={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},XS={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},JS=(()=>{let e=class e extends Za{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>br().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),j_.forEach(h=>{let f=r.indexOf(h);f>-1&&(r.splice(f,1),a+=h+".")}),a+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=s,u.fullKey=a,u}static matchEventFullKeyCode(i,r){let s=QS[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),j_.forEach(a=>{if(a!==s){let c=XS[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(ye($t))},e.\u0275prov=ce({token:e,factory:e.\u0275fac});let n=e;return n})();function vF(n,e){return A_(G({rootComponent:n},ZS(e)))}function ZS(n){return{appProviders:[...rA,...n?.providers??[]],platformProviders:iA}}function eA(){kh.makeCurrent()}function tA(){return new gh}function nA(){return s_(document),document}var iA=[{provide:Ws,useValue:P_},{provide:o_,useValue:eA,multi:!0},{provide:$t,useFactory:nA,deps:[]}];var rA=[{provide:r_,useValue:"root"},{provide:gh,useFactory:tA,deps:[]},{provide:Mh,useClass:YS,multi:!0,deps:[$t,Sn,Ws]},{provide:Mh,useClass:JS,multi:!0,deps:[$t]},U_,$_,q_,{provide:g_,useExisting:U_},{provide:k_,useClass:zS,deps:[]},[]];var H_=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(ye($t))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var sA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=ye(oA),s},providedIn:"root"});let n=e;return n})(),oA=(()=>{let e=class e extends sA{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case xi.NONE:return r;case xi.HTML:return _r(r,"HTML")?yr(r):f_(this._doc,String(r)).toString();case xi.STYLE:return _r(r,"Style")?yr(r):r;case xi.SCRIPT:if(_r(r,"Script"))return yr(r);throw new we(5200,!1);case xi.URL:return _r(r,"URL")?yr(r):d_(String(r));case xi.RESOURCE_URL:if(_r(r,"ResourceURL"))return yr(r);throw new we(5201,!1);default:throw new we(5202,!1)}}bypassSecurityTrustHtml(i){return a_(i)}bypassSecurityTrustStyle(i){return c_(i)}bypassSecurityTrustScript(i){return l_(i)}bypassSecurityTrustUrl(i){return u_(i)}bypassSecurityTrustResourceUrl(i){return h_(i)}};e.\u0275fac=function(r){return new(r||e)(ye($t))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ee="primary",go=Symbol("RouteTitle"),Bh=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function Ar(n){return new Bh(n)}function cA(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function lA(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!en(n[t],e[t]))return!1;return!0}function en(n,e){let t=n?jh(n):void 0,i=e?jh(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Z_(n[r],e[r]))return!1;return!0}function jh(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Z_(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function ev(n){return n.length>0?n[n.length-1]:null}function ni(n){return Ky(n)?n:Ha(n)?dt(Promise.resolve(n)):X(n)}var uA={exact:nv,subset:iv},tv={exact:hA,subset:dA,ignored:()=>!0};function K_(n,e,t){return uA[t.paths](n.root,e.root,t.matrixParams)&&tv[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function hA(n,e){return en(n,e)}function nv(n,e,t){if(!Di(n.segments,e.segments)||!ic(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!nv(n.children[i],e.children[i],t))return!1;return!0}function dA(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Z_(n[t],e[t]))}function iv(n,e,t){return rv(n,e,e.segments,t)}function rv(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!Di(r,t)||e.hasChildren()||!ic(r,t,i))}else if(n.segments.length===t.length){if(!Di(n.segments,t)||!ic(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!iv(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!Di(n.segments,r)||!ic(n.segments,r,i)||!n.children[ee]?!1:rv(n.children[ee],e,s,i)}}function ic(n,e,t){return e.every((i,r)=>tv[t](n[r].parameters,i.parameters))}var ei=class{constructor(e=new ue([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Ar(this.queryParams),this._queryParamMap}toString(){return gA.serialize(this)}},ue=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rc(this)}},Ri=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=Ar(this.parameters),this._parameterMap}toString(){return ov(this)}};function fA(n,e){return Di(n,e)&&n.every((t,i)=>en(t.parameters,e[i].parameters))}function Di(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function pA(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===ee&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==ee&&(t=t.concat(e(r,i)))}),t}var fd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:()=>new oc,providedIn:"root"});let n=e;return n})(),oc=class{parse(e){let t=new qh(e);return new ei(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${eo(e.root,!0)}`,i=_A(e.queryParams),r=typeof e.fragment=="string"?`#${mA(e.fragment)}`:"";return`${t}${i}${r}`}},gA=new oc;function rc(n){return n.segments.map(e=>ov(e)).join("/")}function eo(n,e){if(!n.hasChildren())return rc(n);if(e){let t=n.children[ee]?eo(n.children[ee],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==ee&&i.push(`${r}:${eo(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=pA(n,(i,r)=>r===ee?[eo(n.children[ee],!1)]:[`${r}:${eo(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[ee]!=null?`${rc(n)}/${t[0]}`:`${rc(n)}/(${t.join("//")})`}}function sv(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function tc(n){return sv(n).replace(/%3B/gi,";")}function mA(n){return encodeURI(n)}function zh(n){return sv(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function sc(n){return decodeURIComponent(n)}function Y_(n){return sc(n.replace(/\+/g,"%20"))}function ov(n){return`${zh(n.path)}${yA(n.parameters)}`}function yA(n){return Object.entries(n).map(([e,t])=>`;${zh(e)}=${zh(t)}`).join("")}function _A(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${tc(t)}=${tc(r)}`).join("&"):`${tc(t)}=${tc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var vA=/^[^\/()?;#]+/;function Vh(n){let e=n.match(vA);return e?e[0]:""}var bA=/^[^\/()?;=#]+/;function wA(n){let e=n.match(bA);return e?e[0]:""}var IA=/^[^=?&#]+/;function EA(n){let e=n.match(IA);return e?e[0]:""}var TA=/^[^&#]+/;function SA(n){let e=n.match(TA);return e?e[0]:""}var qh=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ue([],{}):new ue([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[ee]=new ue(e,t)),i}parseSegment(){let e=Vh(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new we(4009,!1);return this.capture(e),new Ri(sc(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=wA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Vh(this.remaining);r&&(i=r,this.capture(i))}e[sc(t)]=sc(i)}parseQueryParam(e){let t=EA(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=SA(this.remaining);o&&(i=o,this.capture(i))}let r=Y_(t),s=Y_(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Vh(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new we(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=ee);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[ee]:new ue([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new we(4011,!1)}};function av(n){return n.segments.length>0?new ue([],{[ee]:n}):n}function cv(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=cv(r);if(i===ee&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new ue(n.segments,e);return AA(t)}function AA(n){if(n.numberOfChildren===1&&n.children[ee]){let e=n.children[ee];return new ue(n.segments.concat(e.segments),e.children)}return n}function Cr(n){return n instanceof ei}function CA(n,e,t=null,i=null){let r=lv(n);return uv(r,e,t,i)}function lv(n){let e;function t(s){let o={};for(let c of s.children){let u=t(c);o[c.outlet]=u}let a=new ue(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=av(i);return e??r}function uv(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Lh(r,r,r,t,i);let s=xA(e);if(s.toRoot())return Lh(r,r,new ue([],{}),t,i);let o=RA(s,r,n),a=o.processChildren?io(o.segmentGroup,o.index,s.commands):dv(o.segmentGroup,o.index,s.commands);return Lh(r,o.segmentGroup,a,t,i)}function ac(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function oo(n){return typeof n=="object"&&n!=null&&n.outlets}function Lh(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([c,u])=>{s[c]=Array.isArray(u)?u.map(h=>`${h}`):`${u}`});let o;n===e?o=t:o=hv(n,e,t);let a=av(cv(o));return new ei(a,s,r)}function hv(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=hv(s,e,t)}),new ue(n.segments,i)}var cc=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&ac(i[0]))throw new we(4003,!1);let r=i.find(oo);if(r&&r!==ev(i))throw new we(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function xA(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new cc(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,u])=>{a[c]=typeof u=="string"?u.split("/"):u}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new cc(t,e,i)}var Tr=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function RA(n,e,t){if(n.isAbsolute)return new Tr(e,!0,0);if(!t)return new Tr(e,!1,NaN);if(t.parent===null)return new Tr(t,!0,0);let i=ac(n.commands[0])?0:1,r=t.segments.length-1+i;return DA(t,r,n.numberOfDoubleDots)}function DA(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new we(4005,!1);r=i.segments.length}return new Tr(i,!1,r-s)}function PA(n){return oo(n[0])?n[0].outlets:{[ee]:n}}function dv(n,e,t){if(n??=new ue([],{}),n.segments.length===0&&n.hasChildren())return io(n,e,t);let i=kA(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new ue(n.segments.slice(0,i.pathIndex),{});return s.children[ee]=new ue(n.segments.slice(i.pathIndex),n.children),io(s,0,r)}else return i.match&&r.length===0?new ue(n.segments,{}):i.match&&!n.hasChildren()?$h(n,e,t):i.match?io(n,0,r):$h(n,e,t)}function io(n,e,t){if(t.length===0)return new ue(n.segments,{});{let i=PA(t),r={};if(Object.keys(i).some(s=>s!==ee)&&n.children[ee]&&n.numberOfChildren===1&&n.children[ee].segments.length===0){let s=io(n.children[ee],e,t);return new ue(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=dv(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new ue(n.segments,r)}}function kA(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(oo(a))break;let c=`${a}`,u=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&u&&typeof u=="object"&&u.outlets===void 0){if(!X_(c,u,o))return s;i+=2}else{if(!X_(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function $h(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(oo(s)){let c=MA(s.outlets);return new ue(i,c)}if(r===0&&ac(t[0])){let c=n.segments[e];i.push(new Ri(c.path,Q_(t[0]))),r++;continue}let o=oo(s)?s.outlets[ee]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&ac(a)?(i.push(new Ri(o,Q_(a))),r+=2):(i.push(new Ri(o,{})),r++)}return new ue(i,{})}function MA(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=$h(new ue([],{}),0,i))}),e}function Q_(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function X_(n,e,t){return n==t.path&&en(e,t.parameters)}var ro="imperative",Qe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Qe||{}),Nt=class{constructor(e,t){this.id=e,this.url=t}},ao=class extends Nt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Qe.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Pi=class extends Nt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Qe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Ct=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Ct||{}),Wh=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Wh||{}),ti=class extends Nt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Qe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ki=class extends Nt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Qe.NavigationSkipped}},co=class extends Nt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Qe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},lc=class extends Nt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Qe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Gh=class extends Nt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Qe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hh=class extends Nt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Qe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Kh=class extends Nt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Qe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Yh=class extends Nt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Qe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Qh=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Xh=class{constructor(e){this.route=e,this.type=Qe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Jh=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zh=class{constructor(e){this.snapshot=e,this.type=Qe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ed=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},td=class{constructor(e){this.snapshot=e,this.type=Qe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var lo=class{},uo=class{constructor(e){this.url=e}};var nd=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new gc,this.attachRef=null}},gc=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new nd,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),uc=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=id(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=id(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=rd(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return rd(e,this._root).map(t=>t.value)}};function id(n,e){if(n===e.value)return e;for(let t of e.children){let i=id(n,t);if(i)return i}return null}function rd(n,e){if(n===e.value)return[e];for(let t of e.children){let i=rd(n,t);if(i.length)return i.unshift(e),i}return[]}var At=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function Er(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var hc=class extends uc{constructor(e,t){super(e),this.snapshot=t,gd(this,e)}toString(){return this.snapshot.toString()}};function fv(n){let e=OA(n),t=new Mt([new Ri("",{})]),i=new Mt({}),r=new Mt({}),s=new Mt({}),o=new Mt(""),a=new xr(t,i,s,o,r,ee,n,e.root);return a.snapshot=e.root,new hc(new At(a,[]),e)}function OA(n){let e={},t={},i={},r="",s=new ho([],e,i,r,t,ee,n,null,{});return new dc("",new At(s,[]))}var xr=class{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(oe(u=>u[go]))??X(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(oe(e=>Ar(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(oe(e=>Ar(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function pd(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:G(G({},e.params),n.params),data:G(G({},e.data),n.data),resolve:G(G(G(G({},n.data),e.data),r?.data),n._resolvedData)}:i={params:G({},n.params),data:G({},n.data),resolve:G(G({},n.data),n._resolvedData??{})},r&&gv(r)&&(i.resolve[go]=r.title),i}var ho=class{get title(){return this.data?.[go]}constructor(e,t,i,r,s,o,a,c,u){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=u}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ar(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ar(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},dc=class extends uc{constructor(e,t){super(t),this.url=e,gd(this,t)}toString(){return pv(this._root)}};function gd(n,e){e.value._routerState=n,e.children.forEach(t=>gd(n,t))}function pv(n){let e=n.children.length>0?` { ${n.children.map(pv).join(", ")} } `:"";return`${n.value}${e}`}function Fh(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,en(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),en(e.params,t.params)||n.paramsSubject.next(t.params),lA(e.url,t.url)||n.urlSubject.next(t.url),en(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function sd(n,e){let t=en(n.params,e.params)&&fA(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||sd(n.parent,e.parent))}function gv(n){return typeof n.title=="string"||n.title===null}var NA=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=ee,this.activateEvents=new Jt,this.deactivateEvents=new Jt,this.attachEvents=new Jt,this.detachEvents=new Jt,this.parentContexts=te(gc),this.location=te(m_),this.changeDetector=te(Ks),this.environmentInjector=te(qs),this.inputBinder=te(md,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new we(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new we(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new we(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new we(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new od(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:u,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ze({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[$s]});let n=e;return n})(),od=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===xr?this.route:e===gc?this.childContexts:this.parent.get(e,t)}},md=new je("");function VA(n,e,t){let i=fo(n,e._root,t?t._root:void 0);return new hc(i,e)}function fo(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=LA(n,e,t);return new At(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>fo(n,a)),o}}let i=FA(e.value),r=e.children.map(s=>fo(n,s));return new At(i,r)}}function LA(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return fo(n,i,r);return fo(n,i)})}function FA(n){return new xr(new Mt(n.url),new Mt(n.params),new Mt(n.queryParams),new Mt(n.fragment),new Mt(n.data),n.outlet,n.component,n)}var mv="ngNavigationCancelingError";function yv(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=Cr(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=_v(!1,Ct.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function _v(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[mv]=!0,t.cancellationCode=e,t}function UA(n){return vv(n)&&Cr(n.url)}function vv(n){return!!n&&n[mv]}var BA=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Xt({type:e,selectors:[["ng-component"]],standalone:!0,features:[Zt],decls:1,vars:0,template:function(r,s){r&1&&qe(0,"router-outlet")},dependencies:[NA],encapsulation:2});let n=e;return n})();function jA(n,e){return n.providers&&!n._injector&&(n._injector=__(n.providers,e,`Route: ${n.path}`)),n._injector??e}function yd(n){let e=n.children&&n.children.map(yd),t=e?be(G({},n),{children:e}):G({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==ee&&(t.component=BA),t}function tn(n){return n.outlet||ee}function zA(n,e){let t=n.filter(i=>tn(i)===e);return t.push(...n.filter(i=>tn(i)!==e)),t}function mo(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var qA=(n,e,t,i)=>oe(r=>(new ad(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),ad=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Fh(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=Er(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Er(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=Er(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=Er(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new td(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Zh(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Fh(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Fh(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=mo(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},fc=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Sr=class{constructor(e,t){this.component=e,this.route=t}};function $A(n,e,t){let i=n._root,r=e?e._root:null;return to(i,r,t,[i.value])}function WA(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Dr(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!i_(n)?n:e.get(n):i}function to(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Er(e);return n.children.forEach(o=>{GA(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>so(a,t.getContext(o),r)),r}function GA(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=HA(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new fc(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?to(n,e,a?a.children:null,i,r):to(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Sr(a.outlet.component,o))}else o&&so(e,a,r),r.canActivateChecks.push(new fc(i)),s.component?to(n,null,a?a.children:null,i,r):to(n,null,t,i,r);return r}function HA(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Di(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Di(n.url,e.url)||!en(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!sd(n,e)||!en(n.queryParams,e.queryParams);case"paramsChange":default:return!sd(n,e)}}function so(n,e,t){let i=Er(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?so(o,e.children.getContext(s),t):so(o,null,t):so(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Sr(e.outlet.component,r)):t.canDeactivateChecks.push(new Sr(null,r)):t.canDeactivateChecks.push(new Sr(null,r))}function yo(n){return typeof n=="function"}function KA(n){return typeof n=="boolean"}function YA(n){return n&&yo(n.canLoad)}function QA(n){return n&&yo(n.canActivate)}function XA(n){return n&&yo(n.canActivateChild)}function JA(n){return n&&yo(n.canDeactivate)}function ZA(n){return n&&yo(n.canMatch)}function bv(n){return n instanceof Yy||n?.name==="EmptyError"}var nc=Symbol("INITIAL_VALUE");function Rr(){return jt(n=>oh(n.map(e=>e.pipe(dr(1),t_(nc)))).pipe(oe(e=>{for(let t of e)if(t!==!0){if(t===nc)return nc;if(t===!1||t instanceof ei)return t}return!0}),Yn(e=>e!==nc),dr(1)))}function eC(n,e){return Ot(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?X(be(G({},t),{guardsResult:!0})):tC(o,i,r,n).pipe(Ot(a=>a&&KA(a)?nC(i,s,n,e):X(a)),oe(a=>be(G({},t),{guardsResult:a})))})}function tC(n,e,t,i){return dt(n).pipe(Ot(r=>aC(r.component,r.route,t,e,i)),Qn(r=>r!==!0,!0))}function nC(n,e,t,i){return dt(e).pipe(Ai(r=>Qy(rC(r.route.parent,i),iC(r.route,i),oC(n,r.path,t),sC(n,r.route,t))),Qn(r=>r!==!0,!0))}function iC(n,e){return n!==null&&e&&e(new ed(n)),X(!0)}function rC(n,e){return n!==null&&e&&e(new Jh(n)),X(!0)}function sC(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return X(!0);let r=i.map(s=>ah(()=>{let o=mo(e)??t,a=Dr(s,o),c=QA(a)?a.canActivate(e,n):Ci(o,()=>a(e,n));return ni(c).pipe(Qn())}));return X(r).pipe(Rr())}function oC(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>WA(o)).filter(o=>o!==null).map(o=>ah(()=>{let a=o.guards.map(c=>{let u=mo(o.node)??t,h=Dr(c,u),f=XA(h)?h.canActivateChild(i,n):Ci(u,()=>h(i,n));return ni(f).pipe(Qn())});return X(a).pipe(Rr())}));return X(s).pipe(Rr())}function aC(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return X(!0);let o=s.map(a=>{let c=mo(e)??r,u=Dr(a,c),h=JA(u)?u.canDeactivate(n,e,t,i):Ci(c,()=>u(n,e,t,i));return ni(h).pipe(Qn())});return X(o).pipe(Rr())}function cC(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return X(!0);let s=r.map(o=>{let a=Dr(o,n),c=YA(a)?a.canLoad(e,t):Ci(n,()=>a(e,t));return ni(c)});return X(s).pipe(Rr(),wv(i))}function wv(n){return Hy(Ye(e=>{if(Cr(e))throw yv(n,e)}),oe(e=>e===!0))}function lC(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return X(!0);let s=r.map(o=>{let a=Dr(o,n),c=ZA(a)?a.canMatch(e,t):Ci(n,()=>a(e,t));return ni(c)});return X(s).pipe(Rr(),wv(i))}var po=class{constructor(e){this.segmentGroup=e||null}},pc=class extends Error{constructor(e){super(),this.urlTree=e}};function Ir(n){return Bs(new po(n))}function uC(n){return Bs(new we(4e3,!1))}function hC(n){return Bs(_v(!1,Ct.GuardRejected))}var cd=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return X(i);if(r.numberOfChildren>1||!r.children[ee])return uC(e.redirectTo);r=r.children[ee]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new pc(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new ei(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new ue(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new we(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},ld={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function dC(n,e,t,i,r){let s=_d(n,e,t);return s.matched?(i=jA(e,i),lC(i,e,t,r).pipe(oe(o=>o===!0?s:G({},ld)))):X(s)}function _d(n,e,t){if(e.path==="**")return fC(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?G({},ld):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||cA)(t,n,e);if(!r)return G({},ld);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?G(G({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function fC(n){return{matched:!0,parameters:n.length>0?ev(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function J_(n,e,t,i){return t.length>0&&mC(n,t,i)?{segmentGroup:new ue(e,gC(i,new ue(t,n.children))),slicedSegments:[]}:t.length===0&&yC(n,t,i)?{segmentGroup:new ue(n.segments,pC(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new ue(n.segments,n.children),slicedSegments:t}}function pC(n,e,t,i){let r={};for(let s of t)if(mc(n,e,s)&&!i[tn(s)]){let o=new ue([],{});r[tn(s)]=o}return G(G({},i),r)}function gC(n,e){let t={};t[ee]=e;for(let i of n)if(i.path===""&&tn(i)!==ee){let r=new ue([],{});t[tn(i)]=r}return t}function mC(n,e,t){return t.some(i=>mc(n,e,i)&&tn(i)!==ee)}function yC(n,e,t){return t.some(i=>mc(n,e,i))}function mc(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function _C(n,e,t,i){return tn(n)!==i&&(i===ee||!mc(e,t,n))?!1:_d(e,n,t).matched}function vC(n,e,t){return e.length===0&&!n.children[t]}var ud=class{};function bC(n,e,t,i,r,s,o="emptyOnly"){return new hd(n,e,t,i,r,o,s).recognize()}var wC=31,hd=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new cd(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new we(4002,`'${e.segmentGroup}'`)}recognize(){let e=J_(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(oe(t=>{let i=new ho([],Object.freeze({}),Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,{},ee,this.rootComponentType,null,{}),r=new At(i,t),s=new dc("",r),o=CA(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,ee).pipe(hr(i=>{if(i instanceof pc)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof po?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=pd(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(oe(s=>s instanceof At?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return dt(r).pipe(Ai(s=>{let o=i.children[s],a=zA(t,s);return this.processSegmentGroup(e,a,o,s)}),e_((s,o)=>(s.push(...o),s)),ch(null),Zy(),Ot(s=>{if(s===null)return Ir(i);let o=Iv(s);return IC(o),X(o)}))}processSegment(e,t,i,r,s,o){return dt(t).pipe(Ai(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(hr(c=>{if(c instanceof po)return X(null);throw c}))),Qn(a=>!!a),hr(a=>{if(bv(a))return vC(i,r,s)?X(new ud):Ir(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return _C(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Ir(r):Ir(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:u,remainingSegments:h}=_d(t,r,s);if(!a)return Ir(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>wC&&(this.allowRedirects=!1));let f=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,u);return this.applyRedirects.lineralizeSegments(r,f).pipe(Ot(g=>this.processSegment(e,i,t,g.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o=dC(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),o.pipe(jt(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(jt(({routes:c})=>{let u=i._loadedInjector??e,{consumedSegments:h,remainingSegments:f,parameters:g}=a,m=new ho(h,g,Object.freeze(G({},this.urlTree.queryParams)),this.urlTree.fragment,TC(i),tn(i),i.component??i._loadedComponent??null,i,SC(i)),{segmentGroup:T,slicedSegments:A}=J_(t,h,f,c);if(A.length===0&&T.hasChildren())return this.processChildren(u,c,T).pipe(oe(D=>D===null?null:new At(m,D)));if(c.length===0&&A.length===0)return X(new At(m,[]));let w=tn(i)===s;return this.processSegment(u,c,T,A,w?ee:s,!0).pipe(oe(D=>new At(m,D instanceof At?[D]:[])))}))):Ir(t)))}getChildConfig(e,t,i){return t.children?X({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?X({routes:t._loadedRoutes,injector:t._loadedInjector}):cC(e,t,i,this.urlSerializer).pipe(Ot(r=>r?this.configLoader.loadChildren(e,t).pipe(Ye(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):hC(t))):X({routes:[],injector:e})}};function IC(n){n.sort((e,t)=>e.value.outlet===ee?-1:t.value.outlet===ee?1:e.value.outlet.localeCompare(t.value.outlet))}function EC(n){let e=n.value.routeConfig;return e&&e.path===""}function Iv(n){let e=[],t=new Set;for(let i of n){if(!EC(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Iv(i.children);e.push(new At(i.value,r))}return e.filter(i=>!t.has(i))}function TC(n){return n.data||{}}function SC(n){return n.resolve||{}}function AC(n,e,t,i,r,s){return Ot(o=>bC(n,e,t,i,o.extractedUrl,r,s).pipe(oe(({state:a,tree:c})=>be(G({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function CC(n,e){return Ot(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return X(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let u of Ev(c))o.add(u);let a=0;return dt(o).pipe(Ai(c=>s.has(c)?xC(c,i,n,e):(c.data=pd(c,c.parent,n).resolve,X(void 0))),Ye(()=>a++),lh(1),Ot(c=>a===o.size?X(t):Kn))})}function Ev(n){let e=n.children.map(t=>Ev(t)).flat();return[n,...e]}function xC(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!gv(r)&&(s[go]=r.title),RC(s,n,e,i).pipe(oe(o=>(n._resolvedData=o,n.data=pd(n,n.parent,t).resolve,null)))}function RC(n,e,t,i){let r=jh(n);if(r.length===0)return X({});let s={};return dt(r).pipe(Ot(o=>DC(n[o],e,t,i).pipe(Qn(),Ye(a=>{s[o]=a}))),lh(1),Jy(s),hr(o=>bv(o)?Kn:Bs(o)))}function DC(n,e,t,i){let r=mo(e)??i,s=Dr(n,r),o=s.resolve?s.resolve(e,t):Ci(r,()=>s(e,t));return ni(o)}function Uh(n){return jt(e=>{let t=n(e);return t?dt(t).pipe(oe(()=>e)):X(e)})}var Tv=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===ee);return r}getResolvedTitleForRoute(i){return i.data[go]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:()=>te(PC),providedIn:"root"});let n=e;return n})(),PC=(()=>{let e=class e extends Tv{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(ye(H_))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),vd=new je("",{providedIn:"root",factory:()=>({})}),bd=new je(""),kC=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=te(wh)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return X(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=ni(i.loadComponent()).pipe(oe(Sv),Ye(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),js(()=>{this.componentLoaders.delete(i)})),s=new sh(r,()=>new Si).pipe(rh());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return X({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=MC(r,this.compiler,i,this.onLoadEndListener).pipe(js(()=>{this.childrenLoaders.delete(r)})),a=new sh(o,()=>new Si).pipe(rh());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function MC(n,e,t,i){return ni(n.loadChildren()).pipe(oe(Sv),Ot(r=>r instanceof y_||Array.isArray(r)?X(r):dt(e.compileModuleAsync(r))),oe(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(bd,[],{optional:!0,self:!0}).flat()),{routes:o.map(yd),injector:s}}))}function OC(n){return n&&typeof n=="object"&&"default"in n}function Sv(n){return OC(n)?n.default:n}var wd=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:()=>te(NC),providedIn:"root"});let n=e;return n})(),NC=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),VC=new je("");var LC=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Si,this.transitionAbortSubject=new Si,this.configLoader=te(kC),this.environmentInjector=te(qs),this.urlSerializer=te(fd),this.rootContexts=te(gc),this.location=te(Ya),this.inputBindingEnabled=te(md,{optional:!0})!==null,this.titleStrategy=te(Tv),this.options=te(vd,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=te(wd),this.createViewTransition=te(VC,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>X(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Qh(s)),r=s=>this.events.next(new Xh(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(be(G(G({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Mt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:ro,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(Yn(o=>o.id!==0),oe(o=>be(G({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),jt(o=>{let a=!1,c=!1;return X(o).pipe(jt(u=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Ct.SupersededByNewNavigation),Kn;this.currentTransition=o,this.currentNavigation={id:u.id,initialUrl:u.rawUrl,extractedUrl:u.extractedUrl,trigger:u.source,extras:u.extras,previousNavigation:this.lastSuccessfulNavigation?be(G({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),f=u.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!h&&f!=="reload"){let g="";return this.events.next(new ki(u.id,this.urlSerializer.serialize(u.rawUrl),g,Wh.IgnoredSameUrlNavigation)),u.resolve(null),Kn}if(this.urlHandlingStrategy.shouldProcessUrl(u.rawUrl))return X(u).pipe(jt(g=>{let m=this.transitions?.getValue();return this.events.next(new ao(g.id,this.urlSerializer.serialize(g.extractedUrl),g.source,g.restoredState)),m!==this.transitions?.getValue()?Kn:Promise.resolve(g)}),AC(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Ye(g=>{o.targetSnapshot=g.targetSnapshot,o.urlAfterRedirects=g.urlAfterRedirects,this.currentNavigation=be(G({},this.currentNavigation),{finalUrl:g.urlAfterRedirects});let m=new lc(g.id,this.urlSerializer.serialize(g.extractedUrl),this.urlSerializer.serialize(g.urlAfterRedirects),g.targetSnapshot);this.events.next(m)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(u.currentRawUrl)){let{id:g,extractedUrl:m,source:T,restoredState:A,extras:w}=u,D=new ao(g,this.urlSerializer.serialize(m),T,A);this.events.next(D);let k=fv(this.rootComponentType).snapshot;return this.currentTransition=o=be(G({},u),{targetSnapshot:k,urlAfterRedirects:m,extras:be(G({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=m,X(o)}else{let g="";return this.events.next(new ki(u.id,this.urlSerializer.serialize(u.extractedUrl),g,Wh.IgnoredByUrlHandlingStrategy)),u.resolve(null),Kn}}),Ye(u=>{let h=new Gh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot);this.events.next(h)}),oe(u=>(this.currentTransition=o=be(G({},u),{guards:$A(u.targetSnapshot,u.currentSnapshot,this.rootContexts)}),o)),eC(this.environmentInjector,u=>this.events.next(u)),Ye(u=>{if(o.guardsResult=u.guardsResult,Cr(u.guardsResult))throw yv(this.urlSerializer,u.guardsResult);let h=new Hh(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects),u.targetSnapshot,!!u.guardsResult);this.events.next(h)}),Yn(u=>u.guardsResult?!0:(this.cancelNavigationTransition(u,"",Ct.GuardRejected),!1)),Uh(u=>{if(u.guards.canActivateChecks.length)return X(u).pipe(Ye(h=>{let f=new Kh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}),jt(h=>{let f=!1;return X(h).pipe(CC(this.paramsInheritanceStrategy,this.environmentInjector),Ye({next:()=>f=!0,complete:()=>{f||this.cancelNavigationTransition(h,"",Ct.NoDataFromResolver)}}))}),Ye(h=>{let f=new Yh(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}))}),Uh(u=>{let h=f=>{let g=[];f.routeConfig?.loadComponent&&!f.routeConfig._loadedComponent&&g.push(this.configLoader.loadComponent(f.routeConfig).pipe(Ye(m=>{f.component=m}),oe(()=>{})));for(let m of f.children)g.push(...h(m));return g};return oh(h(u.targetSnapshot.root)).pipe(ch(null),dr(1))}),Uh(()=>this.afterPreactivation()),jt(()=>{let{currentSnapshot:u,targetSnapshot:h}=o,f=this.createViewTransition?.(this.environmentInjector,u.root,h.root);return f?dt(f).pipe(oe(()=>o)):X(o)}),oe(u=>{let h=VA(i.routeReuseStrategy,u.targetSnapshot,u.currentRouterState);return this.currentTransition=o=be(G({},u),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),Ye(()=>{this.events.next(new lo)}),qA(this.rootContexts,i.routeReuseStrategy,u=>this.events.next(u),this.inputBindingEnabled),dr(1),Ye({next:u=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Pi(u.id,this.urlSerializer.serialize(u.extractedUrl),this.urlSerializer.serialize(u.urlAfterRedirects))),this.titleStrategy?.updateTitle(u.targetRouterState.snapshot),u.resolve(!0)},complete:()=>{a=!0}}),n_(this.transitionAbortSubject.pipe(Ye(u=>{throw u}))),js(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Ct.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),hr(u=>{if(c=!0,vv(u))this.events.next(new ti(o.id,this.urlSerializer.serialize(o.extractedUrl),u.message,u.cancellationCode)),UA(u)?this.events.next(new uo(u.url)):o.resolve(!1);else{this.events.next(new co(o.id,this.urlSerializer.serialize(o.extractedUrl),u,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(u))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return Kn}))}))}cancelNavigationTransition(i,r,s){let o=new ti(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function FC(n){return n!==ro}var UC=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:()=>te(BC),providedIn:"root"});let n=e;return n})(),dd=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},BC=(()=>{let e=class e extends dd{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Av=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:()=>te(jC),providedIn:"root"});let n=e;return n})(),jC=(()=>{let e=class e extends Av{constructor(){super(...arguments),this.location=te(Ya),this.urlSerializer=te(fd),this.options=te(vd,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=te(wd),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ei,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=fv(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof ao)this.stateMemento=this.createStateMemento();else if(i instanceof ki)this.rawUrlTree=r.initialUrl;else if(i instanceof lc){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof lo?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof ti&&(i.code===Ct.GuardRejected||i.code===Ct.NoDataFromResolver)?this.restoreHistory(r):i instanceof co?this.restoreHistory(r,!0):i instanceof Pi&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=G(G({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=G(G({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),no=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(no||{});function zC(n,e){n.events.pipe(Yn(t=>t instanceof Pi||t instanceof ti||t instanceof co||t instanceof ki),oe(t=>t instanceof Pi||t instanceof ki?no.COMPLETE:(t instanceof ti?t.code===Ct.Redirect||t.code===Ct.SupersededByNewNavigation:!1)?no.REDIRECTING:no.FAILED),Yn(t=>t!==no.REDIRECTING),dr(1)).subscribe(()=>{e()})}function qC(n){throw n}var $C={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},WC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Cv=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=te(Ga),this.stateManager=te(Av),this.options=te(vd,{optional:!0})||{},this.pendingTasks=te(v_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=te(LC),this.urlSerializer=te(fd),this.location=te(Ya),this.urlHandlingStrategy=te(wd),this._events=new Si,this.errorHandler=this.options.errorHandler||qC,this.navigated=!1,this.routeReuseStrategy=te(UC),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=te(bd,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!te(md,{optional:!0}),this.eventsSubscription=new Gy,this.isNgZoneEnabled=te(Sn)instanceof Sn&&Sn.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof ti&&r.code!==Ct.Redirect&&r.code!==Ct.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Pi)this.navigated=!0;else if(r instanceof uo){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||FC(s.source)};this.scheduleNavigation(a,ro,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}HC(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),ro,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let u=G({},s);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(yd),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:u}=r,h=u?this.currentUrlTree.fragment:a,f=null;switch(c){case"merge":f=G(G({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let g;try{let m=s?s.snapshot:this.routerState.snapshot.root;g=lv(m)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),g=this.currentUrlTree.root}return uv(g,i,f,h??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=Cr(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,ro,null,r)}navigate(i,r={skipLocationChange:!1}){return GC(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=G({},$C):r===!1?s=G({},WC):s=r,Cr(i))return K_(this.currentUrlTree,i,s);let o=this.parseUrl(i);return K_(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,u,h;a?(c=a.resolve,u=a.reject,h=a.promise):h=new Promise((g,m)=>{c=g,u=m});let f=this.pendingTasks.add();return zC(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:u,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(g=>Promise.reject(g))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function GC(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new we(4008,!1)}function HC(n){return!(n instanceof lo)&&!(n instanceof uo)}var KC=new je("");function t2(n,...e){return hh([{provide:bd,multi:!0,useValue:n},[],{provide:xr,useFactory:YC,deps:[Cv]},{provide:S_,multi:!0,useFactory:QC},e.map(t=>t.\u0275providers)])}function YC(n){return n.routerState.root}function QC(){let n=te(ph);return e=>{let t=n.get(bh);if(e!==t.components[0])return;let i=n.get(Cv),r=n.get(XC);n.get(JC)===1&&i.initialNavigation(),n.get(ZC,null,uh.Optional)?.setUpPreloading(),n.get(KC,null,uh.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var XC=new je("",{factory:()=>new Si}),JC=new je("",{providedIn:"root",factory:()=>1});var ZC=new je("");var Lv=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(de(vr),de(mr))},e.\u0275dir=ze({type:e});let n=e;return n})(),Ec=(()=>{let e=class e extends Lv{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275dir=ze({type:e,features:[zt]});let n=e;return n})(),Io=new je("");var ex={provide:Io,useExisting:Xn(()=>Mr),multi:!0};function tx(){let n=br()?br().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var nx=new je(""),Mr=(()=>{let e=class e extends Lv{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!tx())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(de(vr),de(mr),de(nx,8))},e.\u0275dir=ze({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&$e("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Jn([ex]),zt]});let n=e;return n})();function ix(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var Ed=new je(""),Fv=new je("");function rx(n){return ix(n.value)?{required:!0}:null}function xv(n){return null}function Uv(n){return n!=null}function Bv(n){return Ha(n)?dt(n):n}function jv(n){let e={};return n.forEach(t=>{e=t!=null?G(G({},e),t):e}),Object.keys(e).length===0?null:e}function zv(n,e){return e.map(t=>t(n))}function sx(n){return!n.validate}function qv(n){return n.map(e=>sx(e)?e:t=>e.validate(t))}function ox(n){if(!n)return null;let e=n.filter(Uv);return e.length==0?null:function(t){return jv(zv(t,e))}}function Td(n){return n!=null?ox(qv(n)):null}function ax(n){if(!n)return null;let e=n.filter(Uv);return e.length==0?null:function(t){let i=zv(t,e).map(Bv);return Xy(i).pipe(oe(jv))}}function Sd(n){return n!=null?ax(qv(n)):null}function Rv(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function cx(n){return n._rawValidators}function lx(n){return n._rawAsyncValidators}function Id(n){return n?Array.isArray(n)?n:[n]:[]}function _c(n,e){return Array.isArray(n)?n.includes(e):n===e}function Dv(n,e){let t=Id(e);return Id(n).forEach(r=>{_c(t,r)||t.push(r)}),t}function Pv(n,e){return Id(e).filter(t=>!_c(n,t))}var vc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Td(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Sd(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},kr=class extends vc{get formDirective(){return null}get path(){return null}},wo=class extends vc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},bc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},ux={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},v2=be(G({},ux),{"[class.ng-submitted]":"isSubmitted"}),Tc=(()=>{let e=class e extends bc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(de(wo,2))},e.\u0275dir=ze({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&vh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[zt]});let n=e;return n})(),Sc=(()=>{let e=class e extends bc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(de(kr,10))},e.\u0275dir=ze({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&vh("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[zt]});let n=e;return n})();var _o="VALID",yc="INVALID",Pr="PENDING",vo="DISABLED";function $v(n){return(Ac(n)?n.validators:n)||null}function hx(n){return Array.isArray(n)?Td(n):n||null}function Wv(n,e){return(Ac(e)?e.asyncValidators:n)||null}function dx(n){return Array.isArray(n)?Sd(n):n||null}function Ac(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function fx(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new we(1e3,"");if(!i[t])throw new we(1001,"")}function px(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new we(1002,"")})}var wc=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===_o}get invalid(){return this.status===yc}get pending(){return this.status==Pr}get disabled(){return this.status===vo}get enabled(){return this.status!==vo}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Dv(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Dv(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Pv(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Pv(e,this._rawAsyncValidators))}hasValidator(e){return _c(this._rawValidators,e)}hasAsyncValidator(e){return _c(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Pr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=vo,this.errors=null,this._forEachChild(i=>{i.disable(be(G({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(be(G({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=_o,this._forEachChild(i=>{i.enable(be(G({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(be(G({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_o||this.status===Pr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vo:_o}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Pr,this._hasOwnPendingAsyncValidator=!0;let t=Bv(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Jt,this.statusChanges=new Jt}_calculateStatus(){return this._allControlsDisabled()?vo:this.errors?yc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Pr)?Pr:this._anyControlsHaveStatus(yc)?yc:_o}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Ac(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=hx(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dx(this._rawAsyncValidators)}},Ic=class extends wc{constructor(e,t,i){super($v(t),Wv(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){px(this,!0,e),Object.keys(e).forEach(i=>{fx(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var Ad=new je("CallSetDisabledState",{providedIn:"root",factory:()=>Cd}),Cd="always";function gx(n,e){return[...e.path,n]}function Gv(n,e,t=Cd){Hv(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),yx(n,e),vx(n,e),_x(n,e),mx(n,e)}function kv(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function mx(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function Hv(n,e){let t=cx(n);e.validator!==null?n.setValidators(Rv(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=lx(n);e.asyncValidator!==null?n.setAsyncValidators(Rv(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();kv(e._rawValidators,r),kv(e._rawAsyncValidators,r)}function yx(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Kv(n,e)})}function _x(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Kv(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Kv(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vx(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function bx(n,e){n==null,Hv(n,e)}function wx(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Ix(n){return Object.getPrototypeOf(n.constructor)===Ec}function Ex(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function Tx(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Mr?t=s:Ix(s)?i=s:r=s}),r||i||t||null}var Sx={provide:kr,useExisting:Xn(()=>Eo)},bo=Promise.resolve(),Eo=(()=>{let e=class e extends kr{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new Jt,this.form=new Ic({},Td(i),Sd(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){bo.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Gv(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){bo.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){bo.then(()=>{let r=this._findContainer(i.path),s=new Ic({});bx(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){bo.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){bo.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,Ex(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(de(Ed,10),de(Fv,10),de(Ad,8))},e.\u0275dir=ze({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&$e("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[pr.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Jn([Sx]),zt]});let n=e;return n})();function Mv(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Ov(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var Ax=class extends wc{constructor(e=null,t,i){super($v(t),Wv(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Ac(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Ov(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Mv(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Mv(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Ov(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var Cx={provide:wo,useExisting:Xn(()=>To)},Nv=Promise.resolve(),To=(()=>{let e=class e extends wo{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new Ax,this._registered=!1,this.name="",this.update=new Jt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=Tx(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),wx(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Gv(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Nv.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Ka(r);Nv.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?gx(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(de(kr,9),de(Ed,10),de(Fv,10),de(Io,10),de(Ks,8),de(Ad,8))},e.\u0275dir=ze({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[pr.None,"disabled","isDisabled"],model:[pr.None,"ngModel","model"],options:[pr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Jn([Cx]),zt,$s]});let n=e;return n})(),Cc=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ze({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),xx={provide:Io,useExisting:Xn(()=>xd),multi:!0},xd=(()=>{let e=class e extends Ec{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275dir=ze({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&$e("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Jn([xx]),zt]});let n=e;return n})();var Rx={provide:Io,useExisting:Xn(()=>xc),multi:!0};function Yv(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function Dx(n){return n.split(":")[0]}var xc=(()=>{let e=class e extends Ec{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=Yv(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=Dx(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275dir=ze({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&$e("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Jn([Rx]),zt]});let n=e;return n})(),Qv=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(Yv(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(de(mr),de(vr),de(xc,9))},e.\u0275dir=ze({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),Px={provide:Io,useExisting:Xn(()=>Xv),multi:!0};function Vv(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function kx(n){return n.split(":")[0]}var Xv=(()=>{let e=class e extends Ec{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let u=a[c],h=this._getOptionValue(u.value);s.push(h)}}else{let a=r.options;for(let c=0;c<a.length;c++){let u=a[c];if(u.selected){let h=this._getOptionValue(u.value);s.push(h)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=kx(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275dir=ze({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&$e("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Jn([Px]),zt]});let n=e;return n})(),Jv=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Vv(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Vv(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(de(mr),de(vr),de(Xv,9))},e.\u0275dir=ze({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var Mx=(()=>{let e=class e{constructor(){this._validator=xv}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):xv,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ze({type:e,features:[$s]});let n=e;return n})();var Ox={provide:Ed,useExisting:Xn(()=>Rd),multi:!0};var Rd=(()=>{let e=class e extends Mx{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ka,this.createValidator=i=>rx}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Tn(e)))(s||e)}})(),e.\u0275dir=ze({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&_h("required",s._enabled?"":null)},inputs:{required:"required"},features:[Jn([Ox]),zt]});let n=e;return n})();var Nx=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=gr({type:e}),e.\u0275inj=fr({});let n=e;return n})();var Rc=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:Ad,useValue:i.callSetDisabledState??Cd}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=gr({type:e}),e.\u0275inj=fr({imports:[Nx]});let n=e;return n})();var tb=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Vx=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,u=c?n[r+2]:0,h=s>>2,f=(s&3)<<4|a>>4,g=(a&15)<<2|u>>6,m=u&63;c||(m=64,o||(g=64)),i.push(t[h],t[f],t[g],t[m])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(tb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Vx(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let u=r<n.length?t[n.charAt(r)]:64;++r;let f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||u==null||f==null)throw new Pd;let g=s<<2|a>>4;if(i.push(g),u!==64){let m=a<<4&240|u>>2;if(i.push(m),f!==64){let T=u<<6&192|f;i.push(T)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Pd=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},Lx=function(n){let e=tb(n);return nb.encodeByteArray(e,!0)},So=function(n){return Lx(n).replace(/\./g,"")},Md=function(n){try{return nb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function Fx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var Ux=()=>Fx().__FIREBASE_DEFAULTS__,Bx=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jx=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Md(n[1]);return e&&JSON.parse(e)},Pc=()=>{try{return Ux()||Bx()||jx()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Od=n=>{var e,t;return(t=(e=Pc())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},ib=n=>{let e=Od(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Nd=()=>{var n;return(n=Pc())===null||n===void 0?void 0:n.config},Vd=n=>{var e;return(e=Pc())===null||e===void 0?void 0:e[`_${n}`]};var Dc=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function rb(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[So(JSON.stringify(t)),So(JSON.stringify(o)),""].join(".")}function Le(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function sb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function zx(){var n;let e=(n=Pc())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kc(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function ob(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function ab(){let n=Le();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function cb(){return!zx()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ao(){try{return typeof indexedDB=="object"}catch{return!1}}function Mc(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function lb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var qx="FirebaseError",Xe=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=qx,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,xt.prototype.create)}},xt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?$x(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Xe(r,a,i)}};function $x(n,e){return n.replace(Wx,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var Wx=/\{\$([^}]+)}/g;function ub(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Cn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(eb(s)&&eb(o)){if(!Cn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function eb(n){return n!==null&&typeof n=="object"}function Or(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function hb(n,e){let t=new kd(n,e);return t.subscribe.bind(t)}var kd=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Gx(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Dd),r.error===void 0&&(r.error=Dd),r.complete===void 0&&(r.complete=Dd);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function Gx(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Dd(){}var Hx=1e3,Kx=2,Yx=4*60*60*1e3,Qx=.5;function Ld(n,e=Hx,t=Kx){let i=e*Math.pow(t,n),r=Math.round(Qx*i*(Math.random()-.5)*2);return Math.min(Yx,i+r)}function We(n){return n&&n._delegate?n._delegate:n}var Ge=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Mi="[DEFAULT]";var Fd=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Dc;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Jx(e))try{this.getOrInitializeService({instanceIdentifier:Mi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=Mi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Mi){return this.instances.has(e)}getOptions(e=Mi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Xx(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=Mi){return this.component?this.component.multipleInstances?e:Mi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function Xx(n){return n===Mi?void 0:n}function Jx(n){return n.instantiationMode==="EAGER"}var Oc=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Fd(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Zx=[],ne=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ne||{}),eR={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},tR=ne.INFO,nR={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},iR=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=nR[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},nn=class{constructor(e){this.name=e,this._logLevel=tR,this._logHandler=iR,this._userLogHandler=null,Zx.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}};var rR=(n,e)=>e.some(t=>n instanceof t),db,fb;function sR(){return db||(db=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oR(){return fb||(fb=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var pb=new WeakMap,Bd=new WeakMap,gb=new WeakMap,Ud=new WeakMap,zd=new WeakMap;function aR(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(rn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&pb.set(t,n)}).catch(()=>{}),zd.set(e,n),e}function cR(n){if(Bd.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Bd.set(n,e)}var jd={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Bd.get(n);if(e==="objectStoreNames")return n.objectStoreNames||gb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return rn(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function mb(n){jd=n(jd)}function lR(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Nc(this),e,...t);return gb.set(i,e.sort?e.sort():[e]),rn(i)}:oR().includes(n)?function(...e){return n.apply(Nc(this),e),rn(pb.get(this))}:function(...e){return rn(n.apply(Nc(this),e))}}function uR(n){return typeof n=="function"?lR(n):(n instanceof IDBTransaction&&cR(n),rR(n,sR())?new Proxy(n,jd):n)}function rn(n){if(n instanceof IDBRequest)return aR(n);if(Ud.has(n))return Ud.get(n);let e=uR(n);return e!==n&&(Ud.set(n,e),zd.set(e,n)),e}var Nc=n=>zd.get(n);function Vc(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=rn(o);return i&&o.addEventListener("upgradeneeded",c=>{i(rn(o.result),c.oldVersion,c.newVersion,rn(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}var hR=["get","getKey","getAll","getAllKeys","count"],dR=["put","add","delete","clear"],qd=new Map;function yb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(qd.get(e))return qd.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=dR.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||hR.includes(t)))return;let s=function(o,...a){return b(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),u=c.store;return i&&(u=u.index(a.shift())),(yield Promise.all([u[t](...a),r&&c.done]))[0]})};return qd.set(e,s),s}mb(n=>be(G({},n),{get:(e,t,i)=>yb(e,t)||n.get(e,t,i),has:(e,t)=>!!yb(e,t)||n.has(e,t)}));var Wd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(fR(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function fR(n){let e=n.getComponent();return e?.type==="VERSION"}var Gd="@firebase/app",_b="0.10.8";var Oi=new nn("@firebase/app"),pR="@firebase/app-compat",gR="@firebase/analytics-compat",mR="@firebase/analytics",yR="@firebase/app-check-compat",_R="@firebase/app-check",vR="@firebase/auth",bR="@firebase/auth-compat",wR="@firebase/database",IR="@firebase/database-compat",ER="@firebase/functions",TR="@firebase/functions-compat",SR="@firebase/installations",AR="@firebase/installations-compat",CR="@firebase/messaging",xR="@firebase/messaging-compat",RR="@firebase/performance",DR="@firebase/performance-compat",PR="@firebase/remote-config",kR="@firebase/remote-config-compat",MR="@firebase/storage",OR="@firebase/storage-compat",NR="@firebase/firestore",VR="@firebase/vertexai-preview",LR="@firebase/firestore-compat",FR="firebase",UR="10.12.5";var Hd="[DEFAULT]",BR={[Gd]:"fire-core",[pR]:"fire-core-compat",[mR]:"fire-analytics",[gR]:"fire-analytics-compat",[_R]:"fire-app-check",[yR]:"fire-app-check-compat",[vR]:"fire-auth",[bR]:"fire-auth-compat",[wR]:"fire-rtdb",[IR]:"fire-rtdb-compat",[ER]:"fire-fn",[TR]:"fire-fn-compat",[SR]:"fire-iid",[AR]:"fire-iid-compat",[CR]:"fire-fcm",[xR]:"fire-fcm-compat",[RR]:"fire-perf",[DR]:"fire-perf-compat",[PR]:"fire-rc",[kR]:"fire-rc-compat",[MR]:"fire-gcs",[OR]:"fire-gcs-compat",[NR]:"fire-fst",[LR]:"fire-fst-compat",[VR]:"fire-vertex","fire-js":"fire-js",[FR]:"fire-js-all"};var Lc=new Map,jR=new Map,Kd=new Map;function vb(n,e){try{n.container.addComponent(e)}catch(t){Oi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function mt(n){let e=n.name;if(Kd.has(e))return Oi.debug(`There were multiple attempts to register component ${e}.`),!1;Kd.set(e,n);for(let t of Lc.values())vb(t,n);for(let t of jR.values())vb(t,n);return!0}function Wt(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function sn(n){return n.settings!==void 0}var zR={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ii=new xt("app","Firebase",zR);var Yd=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ge("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ii.create("app-deleted",{appName:this._name})}};var ri=UR;function Jd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:Hd,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ii.create("bad-app-name",{appName:String(r)});if(t||(t=Nd()),!t)throw ii.create("no-options");let s=Lc.get(r);if(s){if(Cn(t,s.options)&&Cn(i,s.config))return s;throw ii.create("duplicate-app",{appName:r})}let o=new Oc(r);for(let c of Kd.values())o.addComponent(c);let a=new Yd(t,i,o);return Lc.set(r,a),a}function Ni(n=Hd){let e=Lc.get(n);if(!e&&n===Hd&&Nd())return Jd();if(!e)throw ii.create("no-app",{appName:n});return e}function Je(n,e,t){var i;let r=(i=BR[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Oi.warn(a.join(" "));return}mt(new Ge(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var qR="firebase-heartbeat-database",$R=1,Co="firebase-heartbeat-store",$d=null;function Eb(){return $d||($d=Vc(qR,$R,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Co)}catch(t){console.warn(t)}}}}).catch(n=>{throw ii.create("idb-open",{originalErrorMessage:n.message})})),$d}function WR(n){return b(this,null,function*(){try{let t=(yield Eb()).transaction(Co),i=yield t.objectStore(Co).get(Tb(n));return yield t.done,i}catch(e){if(e instanceof Xe)Oi.warn(e.message);else{let t=ii.create("idb-get",{originalErrorMessage:e?.message});Oi.warn(t.message)}}})}function bb(n,e){return b(this,null,function*(){try{let i=(yield Eb()).transaction(Co,"readwrite");yield i.objectStore(Co).put(e,Tb(n)),yield i.done}catch(t){if(t instanceof Xe)Oi.warn(t.message);else{let i=ii.create("idb-set",{originalErrorMessage:t?.message});Oi.warn(i.message)}}})}function Tb(n){return`${n.name}!${n.options.appId}`}var GR=1024,HR=30*24*60*60*1e3,Qd=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new Xd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return b(this,null,function*(){var e,t;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=wb();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=HR}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return b(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=wb(),{heartbeatsToSend:i,unsentEntries:r}=KR(this._heartbeatsCache.heartbeats),s=So(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function wb(){return new Date().toISOString().substring(0,10)}function KR(n,e=GR){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Ib(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Ib(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var Xd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Ao()?Mc().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield WR(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Ib(n){return So(JSON.stringify({version:2,heartbeats:n})).length}function YR(n){mt(new Ge("platform-logger",e=>new Wd(e),"PRIVATE")),mt(new Ge("heartbeat",e=>new Qd(e),"PRIVATE")),Je(Gd,_b,n),Je(Gd,_b,"esm2017"),Je("fire-js","")}YR("");var QR="firebase",XR="10.12.5";Je(QR,XR,"app");var Cb="@firebase/installations",nf="0.6.8";var xb=1e4,Rb=`w:${nf}`,Db="FIS_v2",JR="https://firebaseinstallations.googleapis.com/v1",ZR=60*60*1e3,eD="installations",tD="Installations";var nD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Li=new xt(eD,tD,nD);function Pb(n){return n instanceof Xe&&n.code.includes("request-failed")}function kb({projectId:n}){return`${JR}/projects/${n}/installations`}function Mb(n){return{token:n.token,requestStatus:2,expiresIn:rD(n.expiresIn),creationTime:Date.now()}}function Ob(n,e){return b(this,null,function*(){let i=(yield e.json()).error;return Li.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function Nb({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function iD(n,{refreshToken:e}){let t=Nb(n);return t.append("Authorization",sD(e)),t}function Vb(n){return b(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function rD(n){return Number(n.replace("s","000"))}function sD(n){return`${Db} ${n}`}function oD(i,r){return b(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let s=kb(n),o=Nb(n),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}let c={fid:t,authVersion:Db,appId:n.appId,sdkVersion:Rb},u={method:"POST",headers:o,body:JSON.stringify(c)},h=yield Vb(()=>fetch(s,u));if(h.ok){let f=yield h.json();return{fid:f.fid||t,registrationStatus:2,refreshToken:f.refreshToken,authToken:Mb(f.authToken)}}else throw yield Ob("Create Installation",h)})}function Lb(n){return new Promise(e=>{setTimeout(e,n)})}function aD(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var cD=/^[cdef][\w-]{21}$/,tf="";function lD(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=uD(n);return cD.test(t)?t:tf}catch{return tf}}function uD(n){return aD(n).substr(0,22)}function Uc(n){return`${n.appName}!${n.appId}`}var Fb=new Map;function Ub(n,e){let t=Uc(n);Bb(t,e),hD(t,e)}function Bb(n,e){let t=Fb.get(n);if(t)for(let i of t)i(e)}function hD(n,e){let t=dD();t&&t.postMessage({key:n,fid:e}),fD()}var Vi=null;function dD(){return!Vi&&"BroadcastChannel"in self&&(Vi=new BroadcastChannel("[Firebase] FID Change"),Vi.onmessage=n=>{Bb(n.data.key,n.data.fid)}),Vi}function fD(){Fb.size===0&&Vi&&(Vi.close(),Vi=null)}var pD="firebase-installations-database",gD=1,Fi="firebase-installations-store",Zd=null;function rf(){return Zd||(Zd=Vc(pD,gD,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(Fi)}}})),Zd}function Fc(n,e){return b(this,null,function*(){let t=Uc(n),r=(yield rf()).transaction(Fi,"readwrite"),s=r.objectStore(Fi),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&Ub(n,e.fid),e})}function jb(n){return b(this,null,function*(){let e=Uc(n),i=(yield rf()).transaction(Fi,"readwrite");yield i.objectStore(Fi).delete(e),yield i.done})}function Bc(n,e){return b(this,null,function*(){let t=Uc(n),r=(yield rf()).transaction(Fi,"readwrite"),s=r.objectStore(Fi),o=yield s.get(t),a=e(o);return a===void 0?yield s.delete(t):yield s.put(a,t),yield r.done,a&&(!o||o.fid!==a.fid)&&Ub(n,a.fid),a})}function sf(n){return b(this,null,function*(){let e,t=yield Bc(n.appConfig,i=>{let r=mD(i),s=yD(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===tf?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function mD(n){let e=n||{fid:lD(),registrationStatus:0};return zb(e)}function yD(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(Li.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=_D(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:vD(n)}:{installationEntry:e}}function _D(n,e){return b(this,null,function*(){try{let t=yield oD(n,e);return Fc(n.appConfig,t)}catch(t){throw Pb(t)&&t.customData.serverCode===409?yield jb(n.appConfig):yield Fc(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function vD(n){return b(this,null,function*(){let e=yield Sb(n.appConfig);for(;e.registrationStatus===1;)yield Lb(100),e=yield Sb(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:i}=yield sf(n);return i||t}return e})}function Sb(n){return Bc(n,e=>{if(!e)throw Li.create("installation-not-found");return zb(e)})}function zb(n){return bD(n)?{fid:n.fid,registrationStatus:0}:n}function bD(n){return n.registrationStatus===1&&n.registrationTime+xb<Date.now()}function wD(i,r){return b(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let s=ID(n,t),o=iD(n,t),a=e.getImmediate({optional:!0});if(a){let f=yield a.getHeartbeatsHeader();f&&o.append("x-firebase-client",f)}let c={installation:{sdkVersion:Rb,appId:n.appId}},u={method:"POST",headers:o,body:JSON.stringify(c)},h=yield Vb(()=>fetch(s,u));if(h.ok){let f=yield h.json();return Mb(f)}else throw yield Ob("Generate Auth Token",h)})}function ID(n,{fid:e}){return`${kb(n)}/${e}/authTokens:generate`}function of(n,e=!1){return b(this,null,function*(){let t,i=yield Bc(n.appConfig,s=>{if(!qb(s))throw Li.create("not-registered");let o=s.authToken;if(!e&&SD(o))return s;if(o.requestStatus===1)return t=ED(n,e),s;{if(!navigator.onLine)throw Li.create("app-offline");let a=CD(s);return t=TD(n,a),a}});return t?yield t:i.authToken})}function ED(n,e){return b(this,null,function*(){let t=yield Ab(n.appConfig);for(;t.authToken.requestStatus===1;)yield Lb(100),t=yield Ab(n.appConfig);let i=t.authToken;return i.requestStatus===0?of(n,e):i})}function Ab(n){return Bc(n,e=>{if(!qb(e))throw Li.create("not-registered");let t=e.authToken;return xD(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function TD(n,e){return b(this,null,function*(){try{let t=yield wD(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield Fc(n.appConfig,i),t}catch(t){if(Pb(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield jb(n.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Fc(n.appConfig,i)}throw t}})}function qb(n){return n!==void 0&&n.registrationStatus===2}function SD(n){return n.requestStatus===2&&!AD(n)}function AD(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+ZR}function CD(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function xD(n){return n.requestStatus===1&&n.requestTime+xb<Date.now()}function RD(n){return b(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:i}=yield sf(e);return i?i.catch(console.error):of(e).catch(console.error),t.fid})}function DD(n,e=!1){return b(this,null,function*(){let t=n;return yield PD(t),(yield of(t,e)).token})}function PD(n){return b(this,null,function*(){let{registrationPromise:e}=yield sf(n);e&&(yield e)})}function kD(n){if(!n||!n.options)throw ef("App Configuration");if(!n.name)throw ef("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw ef(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function ef(n){return Li.create("missing-app-config-values",{valueName:n})}var $b="installations",MD="installations-internal",OD=n=>{let e=n.getProvider("app").getImmediate(),t=kD(e),i=Wt(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},ND=n=>{let e=n.getProvider("app").getImmediate(),t=Wt(e,$b).getImmediate();return{getId:()=>RD(t),getToken:r=>DD(t,r)}};function VD(){mt(new Ge($b,OD,"PUBLIC")),mt(new Ge(MD,ND,"PRIVATE"))}VD();Je(Cb,nf);Je(Cb,nf,"esm2017");var jc="analytics",LD="firebase_id",FD="origin",UD=60*1e3,BD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ff="https://www.googletagmanager.com/gtag/js";var yt=new nn("@firebase/analytics");var jD={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Rt=new xt("analytics","Analytics",jD);function zD(n){if(!n.startsWith(ff)){let e=Rt.create("invalid-gtag-resource",{gtagURL:n});return yt.warn(e.message),""}return n}function Xb(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function qD(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function $D(n,e){let t=qD("firebase-js-sdk-policy",{createScriptURL:zD}),i=document.createElement("script"),r=`${ff}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function WD(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function GD(n,e,t,i,r,s){return b(this,null,function*(){let o=i[r];try{if(o)yield e[o];else{let c=(yield Xb(t)).find(u=>u.measurementId===r);c&&(yield e[c.appId])}}catch(a){yt.error(a)}n("config",r,s)})}function HD(n,e,t,i,r){return b(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let a=yield Xb(t);for(let c of o){let u=a.find(f=>f.measurementId===c),h=u&&e[u.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){yt.error(s)}})}function KD(n,e,t,i){function r(s,...o){return b(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield HD(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield GD(n,e,t,i,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,u]=o;n("get",a,c,u)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){yt.error(a)}})}return r}function YD(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=KD(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}function QD(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(ff)&&t.src.includes(n))return t;return null}var XD=30,JD=1e3,cf=class{constructor(e={},t=JD){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Jb=new cf;function ZD(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function eP(n){return b(this,null,function*(){var e;let{appId:t,apiKey:i}=n,r={method:"GET",headers:ZD(i)},s=BD.replace("{app-id}",t),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Rt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function tP(i){return b(this,arguments,function*(n,e=Jb,t){let{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw Rt.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw Rt.create("no-api-key")}let a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new lf;return setTimeout(()=>b(this,null,function*(){c.abort()}),t!==void 0?t:UD),Zb({appId:r,apiKey:s,measurementId:o},a,c,e)})}function Zb(s,o,a){return b(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=Jb){var c;let{appId:u,measurementId:h}=n;try{yield nP(i,e)}catch(f){if(h)return yt.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${f?.message}]`),{appId:u,measurementId:h};throw f}try{let f=yield eP(n);return r.deleteThrottleMetadata(u),f}catch(f){let g=f;if(!iP(g)){if(r.deleteThrottleMetadata(u),h)return yt.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${g?.message}]`),{appId:u,measurementId:h};throw f}let m=Number((c=g?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Ld(t,r.intervalMillis,XD):Ld(t,r.intervalMillis),T={throttleEndTimeMillis:Date.now()+m,backoffCount:t+1};return r.setThrottleMetadata(u,T),yt.debug(`Calling attemptFetch again in ${m} millis`),Zb(n,T,i,r)}})}function nP(n,e){return new Promise((t,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Rt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function iP(n){if(!(n instanceof Xe)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var lf=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var uf;function rP(n,e,t,i,r){return b(this,null,function*(){if(r&&r.global){n("event",t,i);return}else{let s=yield e,o=Object.assign(Object.assign({},i),{send_to:s});n("event",t,o)}})}var hf;function sP(n){hf=n}function oP(n){uf=n}function aP(){return b(this,null,function*(){if(Ao())try{yield Mc()}catch(n){return yt.warn(Rt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return yt.warn(Rt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function cP(n,e,t,i,r,s,o){return b(this,null,function*(){var a;let c=tP(n);c.then(m=>{t[m.measurementId]=m.appId,n.options.measurementId&&m.measurementId!==n.options.measurementId&&yt.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>yt.error(m)),e.push(c);let u=aP().then(m=>{if(m)return i.getId()}),[h,f]=yield Promise.all([c,u]);QD(s)||$D(s,h.measurementId),hf&&(r("consent","default",hf),sP(void 0)),r("js",new Date);let g=(a=o?.config)!==null&&a!==void 0?a:{};return g[FD]="firebase",g.update=!0,f!=null&&(g[LD]=f),r("config",h.measurementId,g),uf&&(r("set",uf),oP(void 0)),h.measurementId})}var df=class{constructor(e){this.app=e}_delete(){return delete xo[this.app.options.appId],Promise.resolve()}},xo={},Wb=[],Gb={},af="dataLayer",lP="gtag",Hb,ew,Kb=!1;function uP(){let n=[];if(kc()&&n.push("This is a browser extension environment."),lb()||n.push("Cookies are not available."),n.length>0){let e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Rt.create("invalid-analytics-context",{errorInfo:e});yt.warn(t.message)}}function hP(n,e,t){uP();let i=n.options.appId;if(!i)throw Rt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)yt.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Rt.create("no-api-key");if(xo[i]!=null)throw Rt.create("already-exists",{id:i});if(!Kb){WD(af);let{wrappedGtag:s,gtagCore:o}=YD(xo,Wb,Gb,af,lP);ew=s,Hb=o,Kb=!0}return xo[i]=cP(n,Wb,Gb,e,Hb,af,t),new df(n)}function tw(n=Ni()){n=We(n);let e=Wt(n,jc);return e.isInitialized()?e.getImmediate():dP(n)}function dP(n,e={}){let t=Wt(n,jc);if(t.isInitialized()){let r=t.getImmediate();if(Cn(e,t.getOptions()))return r;throw Rt.create("already-initialized")}return t.initialize({options:e})}function fP(n,e,t,i){n=We(n),rP(ew,xo[n.app.options.appId],e,t,i).catch(r=>yt.error(r))}var Yb="@firebase/analytics",Qb="0.10.7";function pP(){mt(new Ge(jc,(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return hP(i,r,t)},"PUBLIC")),mt(new Ge("analytics-internal",n,"PRIVATE")),Je(Yb,Qb),Je(Yb,Qb,"esm2017");function n(e){try{let t=e.getProvider(jc).getImmediate();return{logEvent:(i,r,s)=>fP(t,i,r,s)}}catch(t){throw Rt.create("interop-component-reg-failed",{reason:t})}}}pP();var nw=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},iw={};var si,pf;(function(){var n;function e(E,_){function v(){}v.prototype=_.prototype,E.D=_.prototype,E.prototype=new v,E.prototype.constructor=E,E.C=function(S,C,x){for(var I=Array(arguments.length-2),Ue=2;Ue<arguments.length;Ue++)I[Ue-2]=arguments[Ue];return _.prototype[C].apply(S,I)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,_,v){v||(v=0);var S=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)S[C]=_.charCodeAt(v++)|_.charCodeAt(v++)<<8|_.charCodeAt(v++)<<16|_.charCodeAt(v++)<<24;else for(C=0;16>C;++C)S[C]=_[v++]|_[v++]<<8|_[v++]<<16|_[v++]<<24;_=E.g[0],v=E.g[1],C=E.g[2];var x=E.g[3],I=_+(x^v&(C^x))+S[0]+3614090360&4294967295;_=v+(I<<7&4294967295|I>>>25),I=x+(C^_&(v^C))+S[1]+3905402710&4294967295,x=_+(I<<12&4294967295|I>>>20),I=C+(v^x&(_^v))+S[2]+606105819&4294967295,C=x+(I<<17&4294967295|I>>>15),I=v+(_^C&(x^_))+S[3]+3250441966&4294967295,v=C+(I<<22&4294967295|I>>>10),I=_+(x^v&(C^x))+S[4]+4118548399&4294967295,_=v+(I<<7&4294967295|I>>>25),I=x+(C^_&(v^C))+S[5]+1200080426&4294967295,x=_+(I<<12&4294967295|I>>>20),I=C+(v^x&(_^v))+S[6]+2821735955&4294967295,C=x+(I<<17&4294967295|I>>>15),I=v+(_^C&(x^_))+S[7]+4249261313&4294967295,v=C+(I<<22&4294967295|I>>>10),I=_+(x^v&(C^x))+S[8]+1770035416&4294967295,_=v+(I<<7&4294967295|I>>>25),I=x+(C^_&(v^C))+S[9]+2336552879&4294967295,x=_+(I<<12&4294967295|I>>>20),I=C+(v^x&(_^v))+S[10]+4294925233&4294967295,C=x+(I<<17&4294967295|I>>>15),I=v+(_^C&(x^_))+S[11]+2304563134&4294967295,v=C+(I<<22&4294967295|I>>>10),I=_+(x^v&(C^x))+S[12]+1804603682&4294967295,_=v+(I<<7&4294967295|I>>>25),I=x+(C^_&(v^C))+S[13]+4254626195&4294967295,x=_+(I<<12&4294967295|I>>>20),I=C+(v^x&(_^v))+S[14]+2792965006&4294967295,C=x+(I<<17&4294967295|I>>>15),I=v+(_^C&(x^_))+S[15]+1236535329&4294967295,v=C+(I<<22&4294967295|I>>>10),I=_+(C^x&(v^C))+S[1]+4129170786&4294967295,_=v+(I<<5&4294967295|I>>>27),I=x+(v^C&(_^v))+S[6]+3225465664&4294967295,x=_+(I<<9&4294967295|I>>>23),I=C+(_^v&(x^_))+S[11]+643717713&4294967295,C=x+(I<<14&4294967295|I>>>18),I=v+(x^_&(C^x))+S[0]+3921069994&4294967295,v=C+(I<<20&4294967295|I>>>12),I=_+(C^x&(v^C))+S[5]+3593408605&4294967295,_=v+(I<<5&4294967295|I>>>27),I=x+(v^C&(_^v))+S[10]+38016083&4294967295,x=_+(I<<9&4294967295|I>>>23),I=C+(_^v&(x^_))+S[15]+3634488961&4294967295,C=x+(I<<14&4294967295|I>>>18),I=v+(x^_&(C^x))+S[4]+3889429448&4294967295,v=C+(I<<20&4294967295|I>>>12),I=_+(C^x&(v^C))+S[9]+568446438&4294967295,_=v+(I<<5&4294967295|I>>>27),I=x+(v^C&(_^v))+S[14]+3275163606&4294967295,x=_+(I<<9&4294967295|I>>>23),I=C+(_^v&(x^_))+S[3]+4107603335&4294967295,C=x+(I<<14&4294967295|I>>>18),I=v+(x^_&(C^x))+S[8]+1163531501&4294967295,v=C+(I<<20&4294967295|I>>>12),I=_+(C^x&(v^C))+S[13]+2850285829&4294967295,_=v+(I<<5&4294967295|I>>>27),I=x+(v^C&(_^v))+S[2]+4243563512&4294967295,x=_+(I<<9&4294967295|I>>>23),I=C+(_^v&(x^_))+S[7]+1735328473&4294967295,C=x+(I<<14&4294967295|I>>>18),I=v+(x^_&(C^x))+S[12]+2368359562&4294967295,v=C+(I<<20&4294967295|I>>>12),I=_+(v^C^x)+S[5]+4294588738&4294967295,_=v+(I<<4&4294967295|I>>>28),I=x+(_^v^C)+S[8]+2272392833&4294967295,x=_+(I<<11&4294967295|I>>>21),I=C+(x^_^v)+S[11]+1839030562&4294967295,C=x+(I<<16&4294967295|I>>>16),I=v+(C^x^_)+S[14]+4259657740&4294967295,v=C+(I<<23&4294967295|I>>>9),I=_+(v^C^x)+S[1]+2763975236&4294967295,_=v+(I<<4&4294967295|I>>>28),I=x+(_^v^C)+S[4]+1272893353&4294967295,x=_+(I<<11&4294967295|I>>>21),I=C+(x^_^v)+S[7]+4139469664&4294967295,C=x+(I<<16&4294967295|I>>>16),I=v+(C^x^_)+S[10]+3200236656&4294967295,v=C+(I<<23&4294967295|I>>>9),I=_+(v^C^x)+S[13]+681279174&4294967295,_=v+(I<<4&4294967295|I>>>28),I=x+(_^v^C)+S[0]+3936430074&4294967295,x=_+(I<<11&4294967295|I>>>21),I=C+(x^_^v)+S[3]+3572445317&4294967295,C=x+(I<<16&4294967295|I>>>16),I=v+(C^x^_)+S[6]+76029189&4294967295,v=C+(I<<23&4294967295|I>>>9),I=_+(v^C^x)+S[9]+3654602809&4294967295,_=v+(I<<4&4294967295|I>>>28),I=x+(_^v^C)+S[12]+3873151461&4294967295,x=_+(I<<11&4294967295|I>>>21),I=C+(x^_^v)+S[15]+530742520&4294967295,C=x+(I<<16&4294967295|I>>>16),I=v+(C^x^_)+S[2]+3299628645&4294967295,v=C+(I<<23&4294967295|I>>>9),I=_+(C^(v|~x))+S[0]+4096336452&4294967295,_=v+(I<<6&4294967295|I>>>26),I=x+(v^(_|~C))+S[7]+1126891415&4294967295,x=_+(I<<10&4294967295|I>>>22),I=C+(_^(x|~v))+S[14]+2878612391&4294967295,C=x+(I<<15&4294967295|I>>>17),I=v+(x^(C|~_))+S[5]+4237533241&4294967295,v=C+(I<<21&4294967295|I>>>11),I=_+(C^(v|~x))+S[12]+1700485571&4294967295,_=v+(I<<6&4294967295|I>>>26),I=x+(v^(_|~C))+S[3]+2399980690&4294967295,x=_+(I<<10&4294967295|I>>>22),I=C+(_^(x|~v))+S[10]+4293915773&4294967295,C=x+(I<<15&4294967295|I>>>17),I=v+(x^(C|~_))+S[1]+2240044497&4294967295,v=C+(I<<21&4294967295|I>>>11),I=_+(C^(v|~x))+S[8]+1873313359&4294967295,_=v+(I<<6&4294967295|I>>>26),I=x+(v^(_|~C))+S[15]+4264355552&4294967295,x=_+(I<<10&4294967295|I>>>22),I=C+(_^(x|~v))+S[6]+2734768916&4294967295,C=x+(I<<15&4294967295|I>>>17),I=v+(x^(C|~_))+S[13]+1309151649&4294967295,v=C+(I<<21&4294967295|I>>>11),I=_+(C^(v|~x))+S[4]+4149444226&4294967295,_=v+(I<<6&4294967295|I>>>26),I=x+(v^(_|~C))+S[11]+3174756917&4294967295,x=_+(I<<10&4294967295|I>>>22),I=C+(_^(x|~v))+S[2]+718787259&4294967295,C=x+(I<<15&4294967295|I>>>17),I=v+(x^(C|~_))+S[9]+3951481745&4294967295,E.g[0]=E.g[0]+_&4294967295,E.g[1]=E.g[1]+(C+(I<<21&4294967295|I>>>11))&4294967295,E.g[2]=E.g[2]+C&4294967295,E.g[3]=E.g[3]+x&4294967295}i.prototype.u=function(E,_){_===void 0&&(_=E.length);for(var v=_-this.blockSize,S=this.B,C=this.h,x=0;x<_;){if(C==0)for(;x<=v;)r(this,E,x),x+=this.blockSize;if(typeof E=="string"){for(;x<_;)if(S[C++]=E.charCodeAt(x++),C==this.blockSize){r(this,S),C=0;break}}else for(;x<_;)if(S[C++]=E[x++],C==this.blockSize){r(this,S),C=0;break}}this.h=C,this.o+=_},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var _=1;_<E.length-8;++_)E[_]=0;var v=8*this.o;for(_=E.length-8;_<E.length;++_)E[_]=v&255,v/=256;for(this.u(E),E=Array(16),_=v=0;4>_;++_)for(var S=0;32>S;S+=8)E[v++]=this.g[_]>>>S&255;return E};function s(E,_){var v=a;return Object.prototype.hasOwnProperty.call(v,E)?v[E]:v[E]=_(E)}function o(E,_){this.h=_;for(var v=[],S=!0,C=E.length-1;0<=C;C--){var x=E[C]|0;S&&x==_||(v[C]=x,S=!1)}this.g=v}var a={};function c(E){return-128<=E&&128>E?s(E,function(_){return new o([_|0],0>_?-1:0)}):new o([E|0],0>E?-1:0)}function u(E){if(isNaN(E)||!isFinite(E))return f;if(0>E)return w(u(-E));for(var _=[],v=1,S=0;E>=v;S++)_[S]=E/v|0,v*=4294967296;return new o(_,0)}function h(E,_){if(E.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(E.charAt(0)=="-")return w(h(E.substring(1),_));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var v=u(Math.pow(_,8)),S=f,C=0;C<E.length;C+=8){var x=Math.min(8,E.length-C),I=parseInt(E.substring(C,C+x),_);8>x?(x=u(Math.pow(_,x)),S=S.j(x).add(u(I))):(S=S.j(v),S=S.add(u(I)))}return S}var f=c(0),g=c(1),m=c(16777216);n=o.prototype,n.m=function(){if(A(this))return-w(this).m();for(var E=0,_=1,v=0;v<this.g.length;v++){var S=this.i(v);E+=(0<=S?S:4294967296+S)*_,_*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(T(this))return"0";if(A(this))return"-"+w(this).toString(E);for(var _=u(Math.pow(E,6)),v=this,S="";;){var C=j(v,_).g;v=D(v,C.j(_));var x=((0<v.g.length?v.g[0]:v.h)>>>0).toString(E);if(v=C,T(v))return x+S;for(;6>x.length;)x="0"+x;S=x+S}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function T(E){if(E.h!=0)return!1;for(var _=0;_<E.g.length;_++)if(E.g[_]!=0)return!1;return!0}function A(E){return E.h==-1}n.l=function(E){return E=D(this,E),A(E)?-1:T(E)?0:1};function w(E){for(var _=E.g.length,v=[],S=0;S<_;S++)v[S]=~E.g[S];return new o(v,~E.h).add(g)}n.abs=function(){return A(this)?w(this):this},n.add=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],S=0,C=0;C<=_;C++){var x=S+(this.i(C)&65535)+(E.i(C)&65535),I=(x>>>16)+(this.i(C)>>>16)+(E.i(C)>>>16);S=I>>>16,x&=65535,I&=65535,v[C]=I<<16|x}return new o(v,v[v.length-1]&-2147483648?-1:0)};function D(E,_){return E.add(w(_))}n.j=function(E){if(T(this)||T(E))return f;if(A(this))return A(E)?w(this).j(w(E)):w(w(this).j(E));if(A(E))return w(this.j(w(E)));if(0>this.l(m)&&0>E.l(m))return u(this.m()*E.m());for(var _=this.g.length+E.g.length,v=[],S=0;S<2*_;S++)v[S]=0;for(S=0;S<this.g.length;S++)for(var C=0;C<E.g.length;C++){var x=this.i(S)>>>16,I=this.i(S)&65535,Ue=E.i(C)>>>16,pe=E.i(C)&65535;v[2*S+2*C]+=I*pe,k(v,2*S+2*C),v[2*S+2*C+1]+=x*pe,k(v,2*S+2*C+1),v[2*S+2*C+1]+=I*Ue,k(v,2*S+2*C+1),v[2*S+2*C+2]+=x*Ue,k(v,2*S+2*C+2)}for(S=0;S<_;S++)v[S]=v[2*S+1]<<16|v[2*S];for(S=_;S<2*_;S++)v[S]=0;return new o(v,0)};function k(E,_){for(;(E[_]&65535)!=E[_];)E[_+1]+=E[_]>>>16,E[_]&=65535,_++}function U(E,_){this.g=E,this.h=_}function j(E,_){if(T(_))throw Error("division by zero");if(T(E))return new U(f,f);if(A(E))return _=j(w(E),_),new U(w(_.g),w(_.h));if(A(_))return _=j(E,w(_)),new U(w(_.g),_.h);if(30<E.g.length){if(A(E)||A(_))throw Error("slowDivide_ only works with positive integers.");for(var v=g,S=_;0>=S.l(E);)v=N(v),S=N(S);var C=V(v,1),x=V(S,1);for(S=V(S,2),v=V(v,2);!T(S);){var I=x.add(S);0>=I.l(E)&&(C=C.add(v),x=I),S=V(S,1),v=V(v,1)}return _=D(E,C.j(_)),new U(C,_)}for(C=f;0<=E.l(_);){for(v=Math.max(1,Math.floor(E.m()/_.m())),S=Math.ceil(Math.log(v)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),x=u(v),I=x.j(_);A(I)||0<I.l(E);)v-=S,x=u(v),I=x.j(_);T(x)&&(x=g),C=C.add(x),E=D(E,I)}return new U(C,E)}n.A=function(E){return j(this,E).h},n.and=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],S=0;S<_;S++)v[S]=this.i(S)&E.i(S);return new o(v,this.h&E.h)},n.or=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],S=0;S<_;S++)v[S]=this.i(S)|E.i(S);return new o(v,this.h|E.h)},n.xor=function(E){for(var _=Math.max(this.g.length,E.g.length),v=[],S=0;S<_;S++)v[S]=this.i(S)^E.i(S);return new o(v,this.h^E.h)};function N(E){for(var _=E.g.length+1,v=[],S=0;S<_;S++)v[S]=E.i(S)<<1|E.i(S-1)>>>31;return new o(v,E.h)}function V(E,_){var v=_>>5;_%=32;for(var S=E.g.length-v,C=[],x=0;x<S;x++)C[x]=0<_?E.i(x+v)>>>_|E.i(x+v+1)<<32-_:E.i(x+v);return new o(C,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,pf=iw.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=h,si=iw.Integer=o}).apply(typeof nw<"u"?nw:typeof self<"u"?self:typeof window<"u"?window:{});var zc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xn={};var gf,mf,Nr,yf,Ro,qc,_f,vf,bf;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,d,p){return l==Array.prototype||l==Object.prototype||(l[d]=p.value),l};function t(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof zc=="object"&&zc];for(var d=0;d<l.length;++d){var p=l[d];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=t(this);function r(l,d){if(d)e:{var p=i;l=l.split(".");for(var y=0;y<l.length-1;y++){var R=l[y];if(!(R in p))break e;p=p[R]}l=l[l.length-1],y=p[l],d=d(y),d!=y&&d!=null&&e(p,l,{configurable:!0,writable:!0,value:d})}}function s(l,d){l instanceof String&&(l+="");var p=0,y=!1,R={next:function(){if(!y&&p<l.length){var P=p++;return{value:d(P,l[P]),done:!1}}return y=!0,{done:!0,value:void 0}}};return R[Symbol.iterator]=function(){return R},R}r("Array.prototype.values",function(l){return l||function(){return s(this,function(d,p){return p})}});var o=o||{},a=this||self;function c(l){var d=typeof l;return d=d!="object"?d:l?Array.isArray(l)?"array":d:"null",d=="array"||d=="object"&&typeof l.length=="number"}function u(l){var d=typeof l;return d=="object"&&l!=null||d=="function"}function h(l,d,p){return l.call.apply(l.bind,arguments)}function f(l,d,p){if(!l)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var R=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(R,y),l.apply(d,R)}}return function(){return l.apply(d,arguments)}}function g(l,d,p){return g=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:f,g.apply(null,arguments)}function m(l,d){var p=Array.prototype.slice.call(arguments,1);return function(){var y=p.slice();return y.push.apply(y,arguments),l.apply(this,y)}}function T(l,d){function p(){}p.prototype=d.prototype,l.aa=d.prototype,l.prototype=new p,l.prototype.constructor=l,l.Qb=function(y,R,P){for(var B=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)B[ge-2]=arguments[ge];return d.prototype[R].apply(y,B)}}function A(l){let d=l.length;if(0<d){let p=Array(d);for(let y=0;y<d;y++)p[y]=l[y];return p}return[]}function w(l,d){for(let p=1;p<arguments.length;p++){let y=arguments[p];if(c(y)){let R=l.length||0,P=y.length||0;l.length=R+P;for(let B=0;B<P;B++)l[R+B]=y[B]}else l.push(y)}}class D{constructor(d,p){this.i=d,this.j=p,this.h=0,this.g=null}get(){let d;return 0<this.h?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function k(l){return/^[\s\xa0]*$/.test(l)}function U(){var l=a.navigator;return l&&(l=l.userAgent)?l:""}function j(l){return j[" "](l),l}j[" "]=function(){};var N=U().indexOf("Gecko")!=-1&&!(U().toLowerCase().indexOf("webkit")!=-1&&U().indexOf("Edge")==-1)&&!(U().indexOf("Trident")!=-1||U().indexOf("MSIE")!=-1)&&U().indexOf("Edge")==-1;function V(l,d,p){for(let y in l)d.call(p,l[y],y,l)}function E(l,d){for(let p in l)d.call(void 0,l[p],p,l)}function _(l){let d={};for(let p in l)d[p]=l[p];return d}let v="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,d){let p,y;for(let R=1;R<arguments.length;R++){y=arguments[R];for(p in y)l[p]=y[p];for(let P=0;P<v.length;P++)p=v[P],Object.prototype.hasOwnProperty.call(y,p)&&(l[p]=y[p])}}function C(l){var d=1;l=l.split(":");let p=[];for(;0<d&&l.length;)p.push(l.shift()),d--;return l.length&&p.push(l.join(":")),p}function x(l){a.setTimeout(()=>{throw l},0)}function I(){var l=qn;let d=null;return l.g&&(d=l.g,l.g=l.g.next,l.g||(l.h=null),d.next=null),d}class Ue{constructor(){this.h=this.g=null}add(d,p){let y=pe.get();y.set(d,p),this.h?this.h.next=y:this.g=y,this.h=y}}var pe=new D(()=>new Ve,l=>l.reset());class Ve{constructor(){this.next=this.g=this.h=null}set(d,p){this.h=d,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let Be,Qt=!1,qn=new Ue,vn=()=>{let l=a.Promise.resolve(void 0);Be=()=>{l.then(or)}};var or=()=>{for(var l;l=I();){try{l.h.call(l.g)}catch(p){x(p)}var d=pe;d.j(l),100>d.h&&(d.h++,l.next=d.g,d.g=l)}Qt=!1};function at(){this.s=this.s,this.C=this.C}at.prototype.s=!1,at.prototype.ma=function(){this.s||(this.s=!0,this.N())},at.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(l,d){this.type=l,this.g=this.target=d,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var bn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var l=!1,d=Object.defineProperty({},"passive",{get:function(){l=!0}});try{let p=()=>{};a.addEventListener("test",p,d),a.removeEventListener("test",p,d)}catch{}return l}();function Ut(l,d){if(Se.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var p=this.type=l.type,y=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=d,d=l.relatedTarget){if(N){e:{try{j(d.nodeName);var R=!0;break e}catch{}R=!1}R||(d=null)}}else p=="mouseover"?d=l.fromElement:p=="mouseout"&&(d=l.toElement);this.relatedTarget=d,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:wn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Ut.aa.h.call(this)}}T(Ut,Se);var wn={2:"touch",3:"pen",4:"mouse"};Ut.prototype.h=function(){Ut.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var Ss="closure_listenable_"+(1e6*Math.random()|0),iS=0;function rS(l,d,p,y,R){this.listener=l,this.proxy=null,this.src=d,this.type=p,this.capture=!!y,this.ha=R,this.key=++iS,this.da=this.fa=!1}function xa(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Ra(l){this.src=l,this.g={},this.h=0}Ra.prototype.add=function(l,d,p,y,R){var P=l.toString();l=this.g[P],l||(l=this.g[P]=[],this.h++);var B=Nu(l,d,y,R);return-1<B?(d=l[B],p||(d.fa=!1)):(d=new rS(d,this.src,P,!!y,R),d.fa=p,l.push(d)),d};function Ou(l,d){var p=d.type;if(p in l.g){var y=l.g[p],R=Array.prototype.indexOf.call(y,d,void 0),P;(P=0<=R)&&Array.prototype.splice.call(y,R,1),P&&(xa(d),l.g[p].length==0&&(delete l.g[p],l.h--))}}function Nu(l,d,p,y){for(var R=0;R<l.length;++R){var P=l[R];if(!P.da&&P.listener==d&&P.capture==!!p&&P.ha==y)return R}return-1}var Vu="closure_lm_"+(1e6*Math.random()|0),Lu={};function Gm(l,d,p,y,R){if(y&&y.once)return Km(l,d,p,y,R);if(Array.isArray(d)){for(var P=0;P<d.length;P++)Gm(l,d[P],p,y,R);return null}return p=ju(p),l&&l[Ss]?l.K(d,p,u(y)?!!y.capture:!!y,R):Hm(l,d,p,!1,y,R)}function Hm(l,d,p,y,R,P){if(!d)throw Error("Invalid event type");var B=u(R)?!!R.capture:!!R,ge=Uu(l);if(ge||(l[Vu]=ge=new Ra(l)),p=ge.add(d,p,y,B,P),p.proxy)return p;if(y=sS(),p.proxy=y,y.src=l,y.listener=p,l.addEventListener)bn||(R=B),R===void 0&&(R=!1),l.addEventListener(d.toString(),y,R);else if(l.attachEvent)l.attachEvent(Qm(d.toString()),y);else if(l.addListener&&l.removeListener)l.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return p}function sS(){function l(p){return d.call(l.src,l.listener,p)}let d=oS;return l}function Km(l,d,p,y,R){if(Array.isArray(d)){for(var P=0;P<d.length;P++)Km(l,d[P],p,y,R);return null}return p=ju(p),l&&l[Ss]?l.L(d,p,u(y)?!!y.capture:!!y,R):Hm(l,d,p,!0,y,R)}function Ym(l,d,p,y,R){if(Array.isArray(d))for(var P=0;P<d.length;P++)Ym(l,d[P],p,y,R);else y=u(y)?!!y.capture:!!y,p=ju(p),l&&l[Ss]?(l=l.i,d=String(d).toString(),d in l.g&&(P=l.g[d],p=Nu(P,p,y,R),-1<p&&(xa(P[p]),Array.prototype.splice.call(P,p,1),P.length==0&&(delete l.g[d],l.h--)))):l&&(l=Uu(l))&&(d=l.g[d.toString()],l=-1,d&&(l=Nu(d,p,y,R)),(p=-1<l?d[l]:null)&&Fu(p))}function Fu(l){if(typeof l!="number"&&l&&!l.da){var d=l.src;if(d&&d[Ss])Ou(d.i,l);else{var p=l.type,y=l.proxy;d.removeEventListener?d.removeEventListener(p,y,l.capture):d.detachEvent?d.detachEvent(Qm(p),y):d.addListener&&d.removeListener&&d.removeListener(y),(p=Uu(d))?(Ou(p,l),p.h==0&&(p.src=null,d[Vu]=null)):xa(l)}}}function Qm(l){return l in Lu?Lu[l]:Lu[l]="on"+l}function oS(l,d){if(l.da)l=!0;else{d=new Ut(d,this);var p=l.listener,y=l.ha||l.src;l.fa&&Fu(l),l=p.call(y,d)}return l}function Uu(l){return l=l[Vu],l instanceof Ra?l:null}var Bu="__closure_events_fn_"+(1e9*Math.random()>>>0);function ju(l){return typeof l=="function"?l:(l[Bu]||(l[Bu]=function(d){return l.handleEvent(d)}),l[Bu])}function et(){at.call(this),this.i=new Ra(this),this.M=this,this.F=null}T(et,at),et.prototype[Ss]=!0,et.prototype.removeEventListener=function(l,d,p,y){Ym(this,l,d,p,y)};function ct(l,d){var p,y=l.F;if(y)for(p=[];y;y=y.F)p.push(y);if(l=l.M,y=d.type||d,typeof d=="string")d=new Se(d,l);else if(d instanceof Se)d.target=d.target||l;else{var R=d;d=new Se(y,l),S(d,R)}if(R=!0,p)for(var P=p.length-1;0<=P;P--){var B=d.g=p[P];R=Da(B,y,!0,d)&&R}if(B=d.g=l,R=Da(B,y,!0,d)&&R,R=Da(B,y,!1,d)&&R,p)for(P=0;P<p.length;P++)B=d.g=p[P],R=Da(B,y,!1,d)&&R}et.prototype.N=function(){if(et.aa.N.call(this),this.i){var l=this.i,d;for(d in l.g){for(var p=l.g[d],y=0;y<p.length;y++)xa(p[y]);delete l.g[d],l.h--}}this.F=null},et.prototype.K=function(l,d,p,y){return this.i.add(String(l),d,!1,p,y)},et.prototype.L=function(l,d,p,y){return this.i.add(String(l),d,!0,p,y)};function Da(l,d,p,y){if(d=l.i.g[String(d)],!d)return!0;d=d.concat();for(var R=!0,P=0;P<d.length;++P){var B=d[P];if(B&&!B.da&&B.capture==p){var ge=B.listener,Ke=B.ha||B.src;B.fa&&Ou(l.i,B),R=ge.call(Ke,y)!==!1&&R}}return R&&!y.defaultPrevented}function Xm(l,d,p){if(typeof l=="function")p&&(l=g(l,p));else if(l&&typeof l.handleEvent=="function")l=g(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(d)?-1:a.setTimeout(l,d||0)}function Jm(l){l.g=Xm(()=>{l.g=null,l.i&&(l.i=!1,Jm(l))},l.l);let d=l.h;l.h=null,l.m.apply(null,d)}class aS extends at{constructor(d,p){super(),this.m=d,this.l=p,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:Jm(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function As(l){at.call(this),this.h=l,this.g={}}T(As,at);var Zm=[];function ey(l){V(l.g,function(d,p){this.g.hasOwnProperty(p)&&Fu(d)},l),l.g={}}As.prototype.N=function(){As.aa.N.call(this),ey(this)},As.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var zu=a.JSON.stringify,cS=a.JSON.parse,lS=class{stringify(l){return a.JSON.stringify(l,void 0)}parse(l){return a.JSON.parse(l,void 0)}};function qu(){}qu.prototype.h=null;function ty(l){return l.h||(l.h=l.i())}function ny(){}var Cs={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function $u(){Se.call(this,"d")}T($u,Se);function Wu(){Se.call(this,"c")}T(Wu,Se);var wi={},iy=null;function Pa(){return iy=iy||new et}wi.La="serverreachability";function ry(l){Se.call(this,wi.La,l)}T(ry,Se);function xs(l){let d=Pa();ct(d,new ry(d))}wi.STAT_EVENT="statevent";function sy(l,d){Se.call(this,wi.STAT_EVENT,l),this.stat=d}T(sy,Se);function lt(l){let d=Pa();ct(d,new sy(d,l))}wi.Ma="timingevent";function oy(l,d){Se.call(this,wi.Ma,l),this.size=d}T(oy,Se);function Rs(l,d){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){l()},d)}function Ds(){this.g=!0}Ds.prototype.xa=function(){this.g=!1};function uS(l,d,p,y,R,P){l.info(function(){if(l.g)if(P)for(var B="",ge=P.split("&"),Ke=0;Ke<ge.length;Ke++){var se=ge[Ke].split("=");if(1<se.length){var tt=se[0];se=se[1];var nt=tt.split("_");B=2<=nt.length&&nt[1]=="type"?B+(tt+"="+se+"&"):B+(tt+"=redacted&")}}else B=null;else B=P;return"XMLHTTP REQ ("+y+") [attempt "+R+"]: "+d+`
`+p+`
`+B})}function hS(l,d,p,y,R,P,B){l.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+R+"]: "+d+`
`+p+`
`+P+" "+B})}function ar(l,d,p,y){l.info(function(){return"XMLHTTP TEXT ("+d+"): "+fS(l,p)+(y?" "+y:"")})}function dS(l,d){l.info(function(){return"TIMEOUT: "+d})}Ds.prototype.info=function(){};function fS(l,d){if(!l.g)return d;if(!d)return null;try{var p=JSON.parse(d);if(p){for(l=0;l<p.length;l++)if(Array.isArray(p[l])){var y=p[l];if(!(2>y.length)){var R=y[1];if(Array.isArray(R)&&!(1>R.length)){var P=R[0];if(P!="noop"&&P!="stop"&&P!="close")for(var B=1;B<R.length;B++)R[B]=""}}}}return zu(p)}catch{return d}}var ka={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},ay={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Gu;function Ma(){}T(Ma,qu),Ma.prototype.g=function(){return new XMLHttpRequest},Ma.prototype.i=function(){return{}},Gu=new Ma;function $n(l,d,p,y){this.j=l,this.i=d,this.l=p,this.R=y||1,this.U=new As(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new cy}function cy(){this.i=null,this.g="",this.h=!1}var ly={},Hu={};function Ku(l,d,p){l.L=1,l.v=La(In(d)),l.m=p,l.P=!0,uy(l,null)}function uy(l,d){l.F=Date.now(),Oa(l),l.A=In(l.v);var p=l.A,y=l.R;Array.isArray(y)||(y=[String(y)]),Ty(p.i,"t",y),l.C=0,p=l.j.J,l.h=new cy,l.g=zy(l.j,p?d:null,!l.m),0<l.O&&(l.M=new aS(g(l.Y,l,l.g),l.O)),d=l.U,p=l.g,y=l.ca;var R="readystatechange";Array.isArray(R)||(R&&(Zm[0]=R.toString()),R=Zm);for(var P=0;P<R.length;P++){var B=Gm(p,R[P],y||d.handleEvent,!1,d.h||d);if(!B)break;d.g[B.key]=B}d=l.H?_(l.H):{},l.m?(l.u||(l.u="POST"),d["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,d)):(l.u="GET",l.g.ea(l.A,l.u,null,d)),xs(),uS(l.i,l.u,l.A,l.l,l.R,l.m)}$n.prototype.ca=function(l){l=l.target;let d=this.M;d&&En(l)==3?d.j():this.Y(l)},$n.prototype.Y=function(l){try{if(l==this.g)e:{let nt=En(this.g);var d=this.g.Ba();let ur=this.g.Z();if(!(3>nt)&&(nt!=3||this.g&&(this.h.h||this.g.oa()||Py(this.g)))){this.J||nt!=4||d==7||(d==8||0>=ur?xs(3):xs(2)),Yu(this);var p=this.g.Z();this.X=p;t:if(hy(this)){var y=Py(this.g);l="";var R=y.length,P=En(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ii(this),Ps(this);var B="";break t}this.h.i=new a.TextDecoder}for(d=0;d<R;d++)this.h.h=!0,l+=this.h.i.decode(y[d],{stream:!(P&&d==R-1)});y.length=0,this.h.g+=l,this.C=0,B=this.h.g}else B=this.g.oa();if(this.o=p==200,hS(this.i,this.u,this.A,this.l,this.R,nt,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ge,Ke=this.g;if((ge=Ke.g?Ke.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!k(ge)){var se=ge;break t}}se=null}if(p=se)ar(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qu(this,p);else{this.o=!1,this.s=3,lt(12),Ii(this),Ps(this);break e}}if(this.P){p=!0;let Bt;for(;!this.J&&this.C<B.length;)if(Bt=pS(this,B),Bt==Hu){nt==4&&(this.s=4,lt(14),p=!1),ar(this.i,this.l,null,"[Incomplete Response]");break}else if(Bt==ly){this.s=4,lt(15),ar(this.i,this.l,B,"[Invalid Chunk]"),p=!1;break}else ar(this.i,this.l,Bt,null),Qu(this,Bt);if(hy(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),nt!=4||B.length!=0||this.h.h||(this.s=1,lt(16),p=!1),this.o=this.o&&p,!p)ar(this.i,this.l,B,"[Invalid Chunked Response]"),Ii(this),Ps(this);else if(0<B.length&&!this.W){this.W=!0;var tt=this.j;tt.g==this&&tt.ba&&!tt.M&&(tt.j.info("Great, no buffering proxy detected. Bytes received: "+B.length),nh(tt),tt.M=!0,lt(11))}}else ar(this.i,this.l,B,null),Qu(this,B);nt==4&&Ii(this),this.o&&!this.J&&(nt==4?Fy(this.j,this):(this.o=!1,Oa(this)))}else PS(this.g),p==400&&0<B.indexOf("Unknown SID")?(this.s=3,lt(12)):(this.s=0,lt(13)),Ii(this),Ps(this)}}}catch{}finally{}};function hy(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function pS(l,d){var p=l.C,y=d.indexOf(`
`,p);return y==-1?Hu:(p=Number(d.substring(p,y)),isNaN(p)?ly:(y+=1,y+p>d.length?Hu:(d=d.slice(y,y+p),l.C=y+p,d)))}$n.prototype.cancel=function(){this.J=!0,Ii(this)};function Oa(l){l.S=Date.now()+l.I,dy(l,l.I)}function dy(l,d){if(l.B!=null)throw Error("WatchDog timer not null");l.B=Rs(g(l.ba,l),d)}function Yu(l){l.B&&(a.clearTimeout(l.B),l.B=null)}$n.prototype.ba=function(){this.B=null;let l=Date.now();0<=l-this.S?(dS(this.i,this.A),this.L!=2&&(xs(),lt(17)),Ii(this),this.s=2,Ps(this)):dy(this,this.S-l)};function Ps(l){l.j.G==0||l.J||Fy(l.j,l)}function Ii(l){Yu(l);var d=l.M;d&&typeof d.ma=="function"&&d.ma(),l.M=null,ey(l.U),l.g&&(d=l.g,l.g=null,d.abort(),d.ma())}function Qu(l,d){try{var p=l.j;if(p.G!=0&&(p.g==l||Xu(p.h,l))){if(!l.K&&Xu(p.h,l)&&p.G==3){try{var y=p.Da.g.parse(d)}catch{y=null}if(Array.isArray(y)&&y.length==3){var R=y;if(R[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<l.F)za(p),Ba(p);else break e;th(p),lt(18)}}else p.za=R[1],0<p.za-p.T&&37500>R[2]&&p.F&&p.v==0&&!p.C&&(p.C=Rs(g(p.Za,p),6e3));if(1>=gy(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Ti(p,11)}else if((l.K||p.g==l)&&za(p),!k(d))for(R=p.Da.g.parse(d),d=0;d<R.length;d++){let se=R[d];if(p.T=se[0],se=se[1],p.G==2)if(se[0]=="c"){p.K=se[1],p.ia=se[2];let tt=se[3];tt!=null&&(p.la=tt,p.j.info("VER="+p.la));let nt=se[4];nt!=null&&(p.Aa=nt,p.j.info("SVER="+p.Aa));let ur=se[5];ur!=null&&typeof ur=="number"&&0<ur&&(y=1.5*ur,p.L=y,p.j.info("backChannelRequestTimeoutMs_="+y)),y=p;let Bt=l.g;if(Bt){let $a=Bt.g?Bt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($a){var P=y.h;P.g||$a.indexOf("spdy")==-1&&$a.indexOf("quic")==-1&&$a.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(Ju(P,P.h),P.h=null))}if(y.D){let ih=Bt.g?Bt.g.getResponseHeader("X-HTTP-Session-Id"):null;ih&&(y.ya=ih,ve(y.I,y.D,ih))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-l.F,p.j.info("Handshake RTT: "+p.R+"ms")),y=p;var B=l;if(y.qa=jy(y,y.J?y.ia:null,y.W),B.K){my(y.h,B);var ge=B,Ke=y.L;Ke&&(ge.I=Ke),ge.B&&(Yu(ge),Oa(ge)),y.g=B}else Vy(y);0<p.i.length&&ja(p)}else se[0]!="stop"&&se[0]!="close"||Ti(p,7);else p.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Ti(p,7):eh(p):se[0]!="noop"&&p.l&&p.l.ta(se),p.v=0)}}xs(4)}catch{}}var gS=class{constructor(l,d){this.g=l,this.map=d}};function fy(l){this.l=l||10,a.PerformanceNavigationTiming?(l=a.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function py(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function gy(l){return l.h?1:l.g?l.g.size:0}function Xu(l,d){return l.h?l.h==d:l.g?l.g.has(d):!1}function Ju(l,d){l.g?l.g.add(d):l.h=d}function my(l,d){l.h&&l.h==d?l.h=null:l.g&&l.g.has(d)&&l.g.delete(d)}fy.prototype.cancel=function(){if(this.i=yy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let l of this.g.values())l.cancel();this.g.clear()}};function yy(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let d=l.i;for(let p of l.g.values())d=d.concat(p.D);return d}return A(l.i)}function mS(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(c(l)){for(var d=[],p=l.length,y=0;y<p;y++)d.push(l[y]);return d}d=[],p=0;for(y in l)d[p++]=l[y];return d}function yS(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(c(l)||typeof l=="string"){var d=[];l=l.length;for(var p=0;p<l;p++)d.push(p);return d}d=[],p=0;for(let y in l)d[p++]=y;return d}}}function _y(l,d){if(l.forEach&&typeof l.forEach=="function")l.forEach(d,void 0);else if(c(l)||typeof l=="string")Array.prototype.forEach.call(l,d,void 0);else for(var p=yS(l),y=mS(l),R=y.length,P=0;P<R;P++)d.call(void 0,y[P],p&&p[P],l)}var vy=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _S(l,d){if(l){l=l.split("&");for(var p=0;p<l.length;p++){var y=l[p].indexOf("="),R=null;if(0<=y){var P=l[p].substring(0,y);R=l[p].substring(y+1)}else P=l[p];d(P,R?decodeURIComponent(R.replace(/\+/g," ")):"")}}}function Ei(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof Ei){this.h=l.h,Na(this,l.j),this.o=l.o,this.g=l.g,Va(this,l.s),this.l=l.l;var d=l.i,p=new Os;p.i=d.i,d.g&&(p.g=new Map(d.g),p.h=d.h),by(this,p),this.m=l.m}else l&&(d=String(l).match(vy))?(this.h=!1,Na(this,d[1]||"",!0),this.o=ks(d[2]||""),this.g=ks(d[3]||"",!0),Va(this,d[4]),this.l=ks(d[5]||"",!0),by(this,d[6]||"",!0),this.m=ks(d[7]||"")):(this.h=!1,this.i=new Os(null,this.h))}Ei.prototype.toString=function(){var l=[],d=this.j;d&&l.push(Ms(d,wy,!0),":");var p=this.g;return(p||d=="file")&&(l.push("//"),(d=this.o)&&l.push(Ms(d,wy,!0),"@"),l.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&l.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&l.push("/"),l.push(Ms(p,p.charAt(0)=="/"?wS:bS,!0))),(p=this.i.toString())&&l.push("?",p),(p=this.m)&&l.push("#",Ms(p,ES)),l.join("")};function In(l){return new Ei(l)}function Na(l,d,p){l.j=p?ks(d,!0):d,l.j&&(l.j=l.j.replace(/:$/,""))}function Va(l,d){if(d){if(d=Number(d),isNaN(d)||0>d)throw Error("Bad port number "+d);l.s=d}else l.s=null}function by(l,d,p){d instanceof Os?(l.i=d,TS(l.i,l.h)):(p||(d=Ms(d,IS)),l.i=new Os(d,l.h))}function ve(l,d,p){l.i.set(d,p)}function La(l){return ve(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function ks(l,d){return l?d?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Ms(l,d,p){return typeof l=="string"?(l=encodeURI(l).replace(d,vS),p&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function vS(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var wy=/[#\/\?@]/g,bS=/[#\?:]/g,wS=/[#\?]/g,IS=/[#\?@]/g,ES=/#/g;function Os(l,d){this.h=this.g=null,this.i=l||null,this.j=!!d}function Wn(l){l.g||(l.g=new Map,l.h=0,l.i&&_S(l.i,function(d,p){l.add(decodeURIComponent(d.replace(/\+/g," ")),p)}))}n=Os.prototype,n.add=function(l,d){Wn(this),this.i=null,l=cr(this,l);var p=this.g.get(l);return p||this.g.set(l,p=[]),p.push(d),this.h+=1,this};function Iy(l,d){Wn(l),d=cr(l,d),l.g.has(d)&&(l.i=null,l.h-=l.g.get(d).length,l.g.delete(d))}function Ey(l,d){return Wn(l),d=cr(l,d),l.g.has(d)}n.forEach=function(l,d){Wn(this),this.g.forEach(function(p,y){p.forEach(function(R){l.call(d,R,y,this)},this)},this)},n.na=function(){Wn(this);let l=Array.from(this.g.values()),d=Array.from(this.g.keys()),p=[];for(let y=0;y<d.length;y++){let R=l[y];for(let P=0;P<R.length;P++)p.push(d[y])}return p},n.V=function(l){Wn(this);let d=[];if(typeof l=="string")Ey(this,l)&&(d=d.concat(this.g.get(cr(this,l))));else{l=Array.from(this.g.values());for(let p=0;p<l.length;p++)d=d.concat(l[p])}return d},n.set=function(l,d){return Wn(this),this.i=null,l=cr(this,l),Ey(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[d]),this.h+=1,this},n.get=function(l,d){return l?(l=this.V(l),0<l.length?String(l[0]):d):d};function Ty(l,d,p){Iy(l,d),0<p.length&&(l.i=null,l.g.set(cr(l,d),A(p)),l.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let l=[],d=Array.from(this.g.keys());for(var p=0;p<d.length;p++){var y=d[p];let P=encodeURIComponent(String(y)),B=this.V(y);for(y=0;y<B.length;y++){var R=P;B[y]!==""&&(R+="="+encodeURIComponent(String(B[y]))),l.push(R)}}return this.i=l.join("&")};function cr(l,d){return d=String(d),l.j&&(d=d.toLowerCase()),d}function TS(l,d){d&&!l.j&&(Wn(l),l.i=null,l.g.forEach(function(p,y){var R=y.toLowerCase();y!=R&&(Iy(this,y),Ty(this,R,p))},l)),l.j=d}function SS(l,d){let p=new Ds;if(a.Image){let y=new Image;y.onload=m(Gn,p,"TestLoadImage: loaded",!0,d,y),y.onerror=m(Gn,p,"TestLoadImage: error",!1,d,y),y.onabort=m(Gn,p,"TestLoadImage: abort",!1,d,y),y.ontimeout=m(Gn,p,"TestLoadImage: timeout",!1,d,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=l}else d(!1)}function AS(l,d){let p=new Ds,y=new AbortController,R=setTimeout(()=>{y.abort(),Gn(p,"TestPingServer: timeout",!1,d)},1e4);fetch(l,{signal:y.signal}).then(P=>{clearTimeout(R),P.ok?Gn(p,"TestPingServer: ok",!0,d):Gn(p,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(R),Gn(p,"TestPingServer: error",!1,d)})}function Gn(l,d,p,y,R){try{R&&(R.onload=null,R.onerror=null,R.onabort=null,R.ontimeout=null),y(p)}catch{}}function CS(){this.g=new lS}function xS(l,d,p){let y=p||"";try{_y(l,function(R,P){let B=R;u(R)&&(B=zu(R)),d.push(y+P+"="+encodeURIComponent(B))})}catch(R){throw d.push(y+"type="+encodeURIComponent("_badmap")),R}}function Ns(l){this.l=l.Ub||null,this.j=l.eb||!1}T(Ns,qu),Ns.prototype.g=function(){return new Fa(this.l,this.j)},Ns.prototype.i=function(l){return function(){return l}}({});function Fa(l,d){et.call(this),this.D=l,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}T(Fa,et),n=Fa.prototype,n.open=function(l,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=d,this.readyState=1,Ls(this)},n.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let d={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(d.body=l),(this.D||a).fetch(new Request(this.A,d)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Vs(this)),this.readyState=0},n.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,Ls(this)),this.g&&(this.readyState=3,Ls(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Sy(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Sy(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}n.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var d=l.value?l.value:new Uint8Array(0);(d=this.v.decode(d,{stream:!l.done}))&&(this.response=this.responseText+=d)}l.done?Vs(this):Ls(this),this.readyState==3&&Sy(this)}},n.Ra=function(l){this.g&&(this.response=this.responseText=l,Vs(this))},n.Qa=function(l){this.g&&(this.response=l,Vs(this))},n.ga=function(){this.g&&Vs(this)};function Vs(l){l.readyState=4,l.l=null,l.j=null,l.v=null,Ls(l)}n.setRequestHeader=function(l,d){this.u.append(l,d)},n.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let l=[],d=this.h.entries();for(var p=d.next();!p.done;)p=p.value,l.push(p[0]+": "+p[1]),p=d.next();return l.join(`\r
`)};function Ls(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Fa.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ay(l){let d="";return V(l,function(p,y){d+=y,d+=":",d+=p,d+=`\r
`}),d}function Zu(l,d,p){e:{for(y in p){var y=!1;break e}y=!0}y||(p=Ay(p),typeof l=="string"?p!=null&&encodeURIComponent(String(p)):ve(l,d,p))}function Ae(l){et.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}T(Ae,et);var RS=/^https?$/i,DS=["POST","PUT"];n=Ae.prototype,n.Ha=function(l){this.J=l},n.ea=function(l,d,p,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);d=d?d.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Gu.g(),this.v=this.o?ty(this.o):ty(Gu),this.g.onreadystatechange=g(this.Ea,this);try{this.B=!0,this.g.open(d,String(l),!0),this.B=!1}catch(P){Cy(this,P);return}if(l=p||"",p=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var R in y)p.set(R,y[R]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let P of y.keys())p.set(P,y.get(P));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(p.keys()).find(P=>P.toLowerCase()=="content-type"),R=a.FormData&&l instanceof a.FormData,!(0<=Array.prototype.indexOf.call(DS,d,void 0))||y||R||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[P,B]of p)this.g.setRequestHeader(P,B);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Dy(this),this.u=!0,this.g.send(l),this.u=!1}catch(P){Cy(this,P)}};function Cy(l,d){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=d,l.m=5,xy(l),Ua(l)}function xy(l){l.A||(l.A=!0,ct(l,"complete"),ct(l,"error"))}n.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,ct(this,"complete"),ct(this,"abort"),Ua(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Ua(this,!0)),Ae.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ry(this):this.bb())},n.bb=function(){Ry(this)};function Ry(l){if(l.h&&typeof o<"u"&&(!l.v[1]||En(l)!=4||l.Z()!=2)){if(l.u&&En(l)==4)Xm(l.Ea,0,l);else if(ct(l,"readystatechange"),En(l)==4){l.h=!1;try{let B=l.Z();e:switch(B){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var p;if(!(p=d)){var y;if(y=B===0){var R=String(l.D).match(vy)[1]||null;!R&&a.self&&a.self.location&&(R=a.self.location.protocol.slice(0,-1)),y=!RS.test(R?R.toLowerCase():"")}p=y}if(p)ct(l,"complete"),ct(l,"success");else{l.m=6;try{var P=2<En(l)?l.g.statusText:""}catch{P=""}l.l=P+" ["+l.Z()+"]",xy(l)}}finally{Ua(l)}}}}function Ua(l,d){if(l.g){Dy(l);let p=l.g,y=l.v[0]?()=>{}:null;l.g=null,l.v=null,d||ct(l,"ready");try{p.onreadystatechange=y}catch{}}}function Dy(l){l.I&&(a.clearTimeout(l.I),l.I=null)}n.isActive=function(){return!!this.g};function En(l){return l.g?l.g.readyState:0}n.Z=function(){try{return 2<En(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(l){if(this.g){var d=this.g.responseText;return l&&d.indexOf(l)==0&&(d=d.substring(l.length)),cS(d)}};function Py(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function PS(l){let d={};l=(l.g&&2<=En(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<l.length;y++){if(k(l[y]))continue;var p=C(l[y]);let R=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let P=d[R]||[];d[R]=P,P.push(p)}E(d,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Fs(l,d,p){return p&&p.internalChannelParams&&p.internalChannelParams[l]||d}function ky(l){this.Aa=0,this.i=[],this.j=new Ds,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Fs("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Fs("baseRetryDelayMs",5e3,l),this.cb=Fs("retryDelaySeedMs",1e4,l),this.Wa=Fs("forwardChannelMaxRetries",2,l),this.wa=Fs("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new fy(l&&l.concurrentRequestLimit),this.Da=new CS,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ky.prototype,n.la=8,n.G=1,n.connect=function(l,d,p,y){lt(0),this.W=l,this.H=d||{},p&&y!==void 0&&(this.H.OSID=p,this.H.OAID=y),this.F=this.X,this.I=jy(this,null,this.W),ja(this)};function eh(l){if(My(l),l.G==3){var d=l.U++,p=In(l.I);if(ve(p,"SID",l.K),ve(p,"RID",d),ve(p,"TYPE","terminate"),Us(l,p),d=new $n(l,l.j,d),d.L=2,d.v=La(In(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(d.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=d.v,p=!0),p||(d.g=zy(d.j,null),d.g.ea(d.v)),d.F=Date.now(),Oa(d)}By(l)}function Ba(l){l.g&&(nh(l),l.g.cancel(),l.g=null)}function My(l){Ba(l),l.u&&(a.clearTimeout(l.u),l.u=null),za(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&a.clearTimeout(l.s),l.s=null)}function ja(l){if(!py(l.h)&&!l.s){l.s=!0;var d=l.Ga;Be||vn(),Qt||(Be(),Qt=!0),qn.add(d,l),l.B=0}}function kS(l,d){return gy(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=d.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=Rs(g(l.Ga,l,d),Uy(l,l.B)),l.B++,!0)}n.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;let R=new $n(this,this.j,l),P=this.o;if(this.S&&(P?(P=_(P),S(P,this.S)):P=this.S),this.m!==null||this.O||(R.H=P,P=null),this.P)e:{for(var d=0,p=0;p<this.i.length;p++){t:{var y=this.i[p];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(d+=y,4096<d){d=p;break e}if(d===4096||p===this.i.length-1){d=p+1;break e}}d=1e3}else d=1e3;d=Ny(this,R,d),p=In(this.I),ve(p,"RID",l),ve(p,"CVER",22),this.D&&ve(p,"X-HTTP-Session-Id",this.D),Us(this,p),P&&(this.O?d="headers="+encodeURIComponent(String(Ay(P)))+"&"+d:this.m&&Zu(p,this.m,P)),Ju(this.h,R),this.Ua&&ve(p,"TYPE","init"),this.P?(ve(p,"$req",d),ve(p,"SID","null"),R.T=!0,Ku(R,p,null)):Ku(R,p,d),this.G=2}}else this.G==3&&(l?Oy(this,l):this.i.length==0||py(this.h)||Oy(this))};function Oy(l,d){var p;d?p=d.l:p=l.U++;let y=In(l.I);ve(y,"SID",l.K),ve(y,"RID",p),ve(y,"AID",l.T),Us(l,y),l.m&&l.o&&Zu(y,l.m,l.o),p=new $n(l,l.j,p,l.B+1),l.m===null&&(p.H=l.o),d&&(l.i=d.D.concat(l.i)),d=Ny(l,p,1e3),p.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Ju(l.h,p),Ku(p,y,d)}function Us(l,d){l.H&&V(l.H,function(p,y){ve(d,y,p)}),l.l&&_y({},function(p,y){ve(d,y,p)})}function Ny(l,d,p){p=Math.min(l.i.length,p);var y=l.l?g(l.l.Na,l.l,l):null;e:{var R=l.i;let P=-1;for(;;){let B=["count="+p];P==-1?0<p?(P=R[0].g,B.push("ofs="+P)):P=0:B.push("ofs="+P);let ge=!0;for(let Ke=0;Ke<p;Ke++){let se=R[Ke].g,tt=R[Ke].map;if(se-=P,0>se)P=Math.max(0,R[Ke].g-100),ge=!1;else try{xS(tt,B,"req"+se+"_")}catch{y&&y(tt)}}if(ge){y=B.join("&");break e}}}return l=l.i.splice(0,p),d.D=l,y}function Vy(l){if(!l.g&&!l.u){l.Y=1;var d=l.Fa;Be||vn(),Qt||(Be(),Qt=!0),qn.add(d,l),l.v=0}}function th(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=Rs(g(l.Fa,l),Uy(l,l.v)),l.v++,!0)}n.Fa=function(){if(this.u=null,Ly(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=Rs(g(this.ab,this),l)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,lt(10),Ba(this),Ly(this))};function nh(l){l.A!=null&&(a.clearTimeout(l.A),l.A=null)}function Ly(l){l.g=new $n(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var d=In(l.qa);ve(d,"RID","rpc"),ve(d,"SID",l.K),ve(d,"AID",l.T),ve(d,"CI",l.F?"0":"1"),!l.F&&l.ja&&ve(d,"TO",l.ja),ve(d,"TYPE","xmlhttp"),Us(l,d),l.m&&l.o&&Zu(d,l.m,l.o),l.L&&(l.g.I=l.L);var p=l.g;l=l.ia,p.L=1,p.v=La(In(d)),p.m=null,p.P=!0,uy(p,l)}n.Za=function(){this.C!=null&&(this.C=null,Ba(this),th(this),lt(19))};function za(l){l.C!=null&&(a.clearTimeout(l.C),l.C=null)}function Fy(l,d){var p=null;if(l.g==d){za(l),nh(l),l.g=null;var y=2}else if(Xu(l.h,d))p=d.D,my(l.h,d),y=1;else return;if(l.G!=0){if(d.o)if(y==1){p=d.m?d.m.length:0,d=Date.now()-d.F;var R=l.B;y=Pa(),ct(y,new oy(y,p)),ja(l)}else Vy(l);else if(R=d.s,R==3||R==0&&0<d.X||!(y==1&&kS(l,d)||y==2&&th(l)))switch(p&&0<p.length&&(d=l.h,d.i=d.i.concat(p)),R){case 1:Ti(l,5);break;case 4:Ti(l,10);break;case 3:Ti(l,6);break;default:Ti(l,2)}}}function Uy(l,d){let p=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(p*=2),p*d}function Ti(l,d){if(l.j.info("Error code "+d),d==2){var p=g(l.fb,l),y=l.Xa;let R=!y;y=new Ei(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Na(y,"https"),La(y),R?SS(y.toString(),p):AS(y.toString(),p)}else lt(2);l.G=0,l.l&&l.l.sa(d),By(l),My(l)}n.fb=function(l){l?(this.j.info("Successfully pinged google.com"),lt(2)):(this.j.info("Failed to ping google.com"),lt(1))};function By(l){if(l.G=0,l.ka=[],l.l){let d=yy(l.h);(d.length!=0||l.i.length!=0)&&(w(l.ka,d),w(l.ka,l.i),l.h.i.length=0,A(l.i),l.i.length=0),l.l.ra()}}function jy(l,d,p){var y=p instanceof Ei?In(p):new Ei(p);if(y.g!="")d&&(y.g=d+"."+y.g),Va(y,y.s);else{var R=a.location;y=R.protocol,d=d?d+"."+R.hostname:R.hostname,R=+R.port;var P=new Ei(null);y&&Na(P,y),d&&(P.g=d),R&&Va(P,R),p&&(P.l=p),y=P}return p=l.D,d=l.ya,p&&d&&ve(y,p,d),ve(y,"VER",l.la),Us(l,y),y}function zy(l,d,p){if(d&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return d=l.Ca&&!l.pa?new Ae(new Ns({eb:p})):new Ae(l.pa),d.Ha(l.J),d}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function qy(){}n=qy.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function qa(){}qa.prototype.g=function(l,d){return new Et(l,d)};function Et(l,d){et.call(this),this.g=new ky(d),this.l=l,this.h=d&&d.messageUrlParams||null,l=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(l?l["X-WebChannel-Content-Type"]=d.messageContentType:l={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.va&&(l?l["X-WebChannel-Client-Profile"]=d.va:l={"X-WebChannel-Client-Profile":d.va}),this.g.S=l,(l=d&&d.Sb)&&!k(l)&&(this.g.m=l),this.v=d&&d.supportsCrossDomainXhr||!1,this.u=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!k(d)&&(this.g.D=d,l=this.h,l!==null&&d in l&&(l=this.h,d in l&&delete l[d])),this.j=new lr(this)}T(Et,et),Et.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Et.prototype.close=function(){eh(this.g)},Et.prototype.o=function(l){var d=this.g;if(typeof l=="string"){var p={};p.__data__=l,l=p}else this.u&&(p={},p.__data__=zu(l),l=p);d.i.push(new gS(d.Ya++,l)),d.G==3&&ja(d)},Et.prototype.N=function(){this.g.l=null,delete this.j,eh(this.g),delete this.g,Et.aa.N.call(this)};function $y(l){$u.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var d=l.__sm__;if(d){e:{for(let p in d){l=p;break e}l=void 0}(this.i=l)&&(l=this.i,d=d!==null&&l in d?d[l]:void 0),this.data=d}else this.data=l}T($y,$u);function Wy(){Wu.call(this),this.status=1}T(Wy,Wu);function lr(l){this.g=l}T(lr,qy),lr.prototype.ua=function(){ct(this.g,"a")},lr.prototype.ta=function(l){ct(this.g,new $y(l))},lr.prototype.sa=function(l){ct(this.g,new Wy)},lr.prototype.ra=function(){ct(this.g,"b")},qa.prototype.createWebChannel=qa.prototype.g,Et.prototype.send=Et.prototype.o,Et.prototype.open=Et.prototype.m,Et.prototype.close=Et.prototype.close,bf=xn.createWebChannelTransport=function(){return new qa},vf=xn.getStatEventTarget=function(){return Pa()},_f=xn.Event=wi,qc=xn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,Ro=xn.ErrorCode=ka,ay.COMPLETE="complete",yf=xn.EventType=ay,ny.EventType=Cs,Cs.OPEN="a",Cs.CLOSE="b",Cs.ERROR="c",Cs.MESSAGE="d",et.prototype.listen=et.prototype.K,Nr=xn.WebChannel=ny,mf=xn.FetchXmlHttpFactory=Ns,Ae.prototype.listenOnce=Ae.prototype.L,Ae.prototype.getLastError=Ae.prototype.Ka,Ae.prototype.getLastErrorCode=Ae.prototype.Ba,Ae.prototype.getStatus=Ae.prototype.Z,Ae.prototype.getResponseJson=Ae.prototype.Oa,Ae.prototype.getResponseText=Ae.prototype.oa,Ae.prototype.send=Ae.prototype.ea,Ae.prototype.setWithCredentials=Ae.prototype.Ha,gf=xn.XhrIo=Ae}).apply(typeof zc<"u"?zc:typeof self<"u"?self:typeof window<"u"?window:{});var rw="@firebase/firestore";var He=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};He.UNAUTHENTICATED=new He(null),He.GOOGLE_CREDENTIALS=new He("google-credentials-uid"),He.FIRST_PARTY=new He("first-party-uid"),He.MOCK_USER=new He("mock-user");var ns="10.12.5";var zi=new nn("@firebase/firestore");function Do(){return zi.logLevel}function W(n,...e){if(zi.logLevel<=ne.DEBUG){let t=e.map(ag);zi.debug(`Firestore (${ns}): ${n}`,...t)}}function Rn(n,...e){if(zi.logLevel<=ne.ERROR){let t=e.map(ag);zi.error(`Firestore (${ns}): ${n}`,...t)}}function qr(n,...e){if(zi.logLevel<=ne.WARN){let t=e.map(ag);zi.warn(`Firestore (${ns}): ${n}`,...t)}}function ag(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function K(n="Unexpected state"){let e=`FIRESTORE (${ns}) INTERNAL ASSERTION FAILED: `+n;throw Rn(e),new Error(e)}function me(n,e){n||K()}function Q(n,e){return n}var M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},z=class extends Xe{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var cn=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Kc=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Sf=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(He.UNAUTHENTICATED))}shutdown(){}},Af=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Cf=class{constructor(e){this.t=e,this.currentUser=He.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new cn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new cn,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>b(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{W("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(W("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new cn)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(W("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(me(typeof i.accessToken=="string"),new Kc(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return me(e===null||typeof e=="string"),new He(e)}},xf=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=He.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Rf=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new xf(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(He.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Df=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Pf=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&W("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,W("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{W("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):W("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(me(typeof t.token=="string"),this.R=t.token,new Df(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function gP(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Yc=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=gP(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function le(n,e){return n<e?-1:n>e?1:0}function $r(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var Ze=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?le(this.nanoseconds,e.nanoseconds):le(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Z=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Ze(0,0))}static max(){return new n(new Ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Qc=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&K(),i===void 0?i=e.length-t:i>e.length-t&&K(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Ee=class n extends Qc{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new z(M.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},mP=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Dt=class n extends Qc{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return mP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var H=class n{constructor(e){this.path=e}static fromPath(e){return new n(Ee.fromString(e))}static fromName(e){return new n(Ee.fromString(e).popFirst(5))}static empty(){return new n(Ee.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ee.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ee.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Ee(e.slice()))}};var kf=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};kf.UNKNOWN_ID=-1;function yP(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Z.fromTimestamp(i===1e9?new Ze(t+1,0):new Ze(t,i));return new qi(r,H.empty(),e)}function _P(n){return new qi(n.readTime,n.key,-1)}var qi=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Z.min(),H.empty(),-1)}static max(){return new n(Z.max(),H.empty(),-1)}};function vP(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=H.comparator(n.documentKey,e.documentKey),t!==0?t:le(n.largestBatchId,e.largestBatchId))}var bP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Mf=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Qo(n){return b(this,null,function*(){if(n.code!==M.FAILED_PRECONDITION||n.message!==bP)throw n;W("LocalStore","Unexpectedly lost primary lease")})}var O=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&K(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let u=c;t(e[u]).next(h=>{o[u]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function wP(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Xo(n){return n.name==="IndexedDbTransactionError"}var Vw=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function El(n){return n==null}function Vo(n){return n===0&&1/n==-1/0}function IP(n){return typeof n=="number"&&Number.isInteger(n)&&!Vo(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var EP=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],_U=[...EP,"documentOverlays"],TP=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],SP=TP,AP=[...SP,"indexConfiguration","indexState","indexEntries"];var vU=[...AP,"globals"];function sw(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function is(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lw(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var xe=class n{constructor(e,t){this.comparator=e,this.root=t||ln.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ln.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ln.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ur(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ur(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ur(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ur(this.root,e,this.comparator,!0)}},Ur=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},ln=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw K();let e=this.left.check();if(e!==this.right.check())throw K();return e+(this.isRed()?0:1)}};ln.EMPTY=null,ln.RED=!0,ln.BLACK=!1;ln.EMPTY=new class{constructor(){this.size=0}get key(){throw K()}get value(){throw K()}get color(){throw K()}get left(){throw K()}get right(){throw K()}copy(e,t,i,r,s){return this}insert(e,t,i){return new ln(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var rt=class n{constructor(e){this.comparator=e,this.data=new xe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Xc(this.data.getIterator())}getIteratorFrom(e){return new Xc(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Xc=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var an=class n{constructor(e){this.fields=e,e.sort(Dt.comparator)}static empty(){return new n([])}unionWith(e){let t=new rt(Dt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return $r(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Jc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var st=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Jc("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return le(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};st.EMPTY_BYTE_STRING=new st("");var CP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Dn(n){if(me(!!n),typeof n=="string"){let e=0,t=CP.exec(n);if(me(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ce(n.seconds),nanos:Ce(n.nanos)}}function Ce(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function ai(n){return typeof n=="string"?st.fromBase64String(n):st.fromUint8Array(n)}function cg(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function lg(n){let e=n.mapValue.fields.__previous_value__;return cg(e)?lg(e):e}function Lo(n){let e=Dn(n.mapValue.fields.__local_write_time__.timestampValue);return new Ze(e.seconds,e.nanos)}var Of=class{constructor(e,t,i,r,s,o,a,c,u){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=u}},Zc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var $c={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $i(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cg(n)?4:Fw(n)?9007199254740991:10:K()}function dn(n,e){if(n===e)return!0;let t=$i(n);if(t!==$i(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Lo(n).isEqual(Lo(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Dn(r.timestampValue),a=Dn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return ai(r.bytesValue).isEqual(ai(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ce(r.geoPointValue.latitude)===Ce(s.geoPointValue.latitude)&&Ce(r.geoPointValue.longitude)===Ce(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ce(r.integerValue)===Ce(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ce(r.doubleValue),a=Ce(s.doubleValue);return o===a?Vo(o)===Vo(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return $r(n.arrayValue.values||[],e.arrayValue.values||[],dn);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(sw(o)!==sw(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!dn(o[c],a[c])))return!1;return!0}(n,e);default:return K()}}function Fo(n,e){return(n.values||[]).find(t=>dn(t,e))!==void 0}function Wr(n,e){if(n===e)return 0;let t=$i(n),i=$i(e);if(t!==i)return le(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return le(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=Ce(s.integerValue||s.doubleValue),c=Ce(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return ow(n.timestampValue,e.timestampValue);case 4:return ow(Lo(n),Lo(e));case 5:return le(n.stringValue,e.stringValue);case 6:return function(s,o){let a=ai(s),c=ai(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let u=0;u<a.length&&u<c.length;u++){let h=le(a[u],c[u]);if(h!==0)return h}return le(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=le(Ce(s.latitude),Ce(o.latitude));return a!==0?a:le(Ce(s.longitude),Ce(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let u=0;u<a.length&&u<c.length;++u){let h=Wr(a[u],c[u]);if(h)return h}return le(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===$c.mapValue&&o===$c.mapValue)return 0;if(s===$c.mapValue)return 1;if(o===$c.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),u=o.fields||{},h=Object.keys(u);c.sort(),h.sort();for(let f=0;f<c.length&&f<h.length;++f){let g=le(c[f],h[f]);if(g!==0)return g;let m=Wr(a[c[f]],u[h[f]]);if(m!==0)return m}return le(c.length,h.length)}(n.mapValue,e.mapValue);default:throw K()}}function ow(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return le(n,e);let t=Dn(n),i=Dn(e),r=le(t.seconds,i.seconds);return r!==0?r:le(t.nanos,i.nanos)}function Gr(n){return Nf(n)}function Nf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Dn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return ai(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return H.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Nf(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Nf(t.fields[o])}`;return r+"}"}(n.mapValue):K()}function aw(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Vf(n){return!!n&&"integerValue"in n}function ug(n){return!!n&&"arrayValue"in n}function cw(n){return!!n&&"nullValue"in n}function lw(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Gc(n){return!!n&&"mapValue"in n}function ko(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return is(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ko(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ko(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Fw(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Gt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Gc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ko(t)}setAll(e){let t=Dt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=ko(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Gc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return dn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Gc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){is(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(ko(this.value))}};function Uw(n){let e=[];return is(n.fields,(t,i)=>{let r=new Dt([t]);if(Gc(i)){let s=Uw(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new an(e)}var Ht=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,Z.min(),Z.min(),Z.min(),Gt.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Z.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Z.min(),Z.min(),Gt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Z.min(),Z.min(),Gt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Z.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Gt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Gt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Z.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Hr=class{constructor(e,t){this.position=e,this.inclusive=t}};function uw(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=H.comparator(H.fromName(o.referenceValue),t.key):i=Wr(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function hw(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!dn(n.position[t],e.position[t]))return!1;return!0}var Kr=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function xP(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var el=class{},Ne=class n extends el{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Ff(e,t,i):t==="array-contains"?new jf(e,i):t==="in"?new zf(e,i):t==="not-in"?new qf(e,i):t==="array-contains-any"?new $f(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Uf(e,i):new Bf(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Wr(t,this.value)):t!==null&&$i(this.value)===$i(t)&&this.matchesComparison(Wr(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return K()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Kt=class n extends el{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Bw(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Bw(n){return n.op==="and"}function jw(n){return RP(n)&&Bw(n)}function RP(n){for(let e of n.filters)if(e instanceof Kt)return!1;return!0}function Lf(n){if(n instanceof Ne)return n.field.canonicalString()+n.op.toString()+Gr(n.value);if(jw(n))return n.filters.map(e=>Lf(e)).join(",");{let e=n.filters.map(t=>Lf(t)).join(",");return`${n.op}(${e})`}}function zw(n,e){return n instanceof Ne?function(i,r){return r instanceof Ne&&i.op===r.op&&i.field.isEqual(r.field)&&dn(i.value,r.value)}(n,e):n instanceof Kt?function(i,r){return r instanceof Kt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&zw(o,r.filters[a]),!0):!1}(n,e):void K()}function qw(n){return n instanceof Ne?function(t){return`${t.field.canonicalString()} ${t.op} ${Gr(t.value)}`}(n):n instanceof Kt?function(t){return t.op.toString()+" {"+t.getFilters().map(qw).join(" ,")+"}"}(n):"Filter"}var Ff=class extends Ne{constructor(e,t,i){super(e,t,i),this.key=H.fromName(i.referenceValue)}matches(e){let t=H.comparator(e.key,this.key);return this.matchesComparison(t)}},Uf=class extends Ne{constructor(e,t){super(e,"in",t),this.keys=$w("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Bf=class extends Ne{constructor(e,t){super(e,"not-in",t),this.keys=$w("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function $w(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>H.fromName(i.referenceValue))}var jf=class extends Ne{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return ug(t)&&Fo(t.arrayValue,this.value)}},zf=class extends Ne{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Fo(this.value.arrayValue,t)}},qf=class extends Ne{constructor(e,t){super(e,"not-in",t)}matches(e){if(Fo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Fo(this.value.arrayValue,t)}},$f=class extends Ne{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!ug(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Fo(this.value.arrayValue,i))}};var Wf=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function dw(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Wf(n,e,t,i,r,s,o)}function hg(n){let e=Q(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Lf(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),El(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Gr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Gr(i)).join(",")),e.ue=t}return e.ue}function dg(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!xP(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!zw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!hw(n.startAt,e.startAt)&&hw(n.endAt,e.endAt)}function Gf(n){return H.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Wi=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function DP(n,e,t,i,r,s,o,a){return new Wi(n,e,t,i,r,s,o,a)}function Ww(n){return new Wi(n)}function fw(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Gw(n){return n.collectionGroup!==null}function Mo(n){let e=Q(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new rt(Dt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Kr(s,i))}),t.has(Dt.keyField().canonicalString())||e.ce.push(new Kr(Dt.keyField(),i))}return e.ce}function un(n){let e=Q(n);return e.le||(e.le=PP(e,Mo(n))),e.le}function PP(n,e){if(n.limitType==="F")return dw(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new Kr(r.field,s)});let t=n.endAt?new Hr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Hr(n.startAt.position,n.startAt.inclusive):null;return dw(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Hf(n,e){let t=n.filters.concat([e]);return new Wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Kf(n,e,t){return new Wi(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Tl(n,e){return dg(un(n),un(e))&&n.limitType===e.limitType}function Hw(n){return`${hg(un(n))}|lt:${n.limitType}`}function Vr(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>qw(r)).join(", ")}]`),El(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Gr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Gr(r)).join(",")),`Target(${i})`}(un(n))}; limitType=${n.limitType})`}function Sl(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):H.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Mo(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let u=uw(o,a,c);return o.inclusive?u<=0:u<0}(i.startAt,Mo(i),r)||i.endAt&&!function(o,a,c){let u=uw(o,a,c);return o.inclusive?u>=0:u>0}(i.endAt,Mo(i),r))}(n,e)}function kP(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Kw(n){return(e,t)=>{let i=!1;for(let r of Mo(n)){let s=MP(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function MP(n,e,t){let i=n.field.isKeyField()?H.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),u=a.data.field(s);return c!==null&&u!==null?Wr(c,u):K()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return K()}}var ci=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){is(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return Lw(this.inner)}size(){return this.innerSize}};var OP=new xe(H.comparator);function Pn(){return OP}var Yw=new xe(H.comparator);function Po(...n){let e=Yw;for(let t of n)e=e.insert(t.key,t);return e}function Qw(n){let e=Yw;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Ui(){return Oo()}function Xw(){return Oo()}function Oo(){return new ci(n=>n.toString(),(n,e)=>n.isEqual(e))}var NP=new xe(H.comparator),VP=new rt(H.comparator);function ie(...n){let e=VP;for(let t of n)e=e.add(t);return e}var LP=new rt(le);function FP(){return LP}function Jw(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vo(e)?"-0":e}}function Zw(n){return{integerValue:""+n}}function UP(n,e){return IP(e)?Zw(e):Jw(n,e)}var Yr=class{constructor(){this._=void 0}};function BP(n,e,t){return n instanceof Qr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&cg(s)&&(s=lg(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Gi?t0(n,e):n instanceof Hi?n0(n,e):function(r,s){let o=e0(r,s),a=pw(o)+pw(r.Pe);return Vf(o)&&Vf(r.Pe)?Zw(a):Jw(r.serializer,a)}(n,e)}function jP(n,e,t){return n instanceof Gi?t0(n,e):n instanceof Hi?n0(n,e):t}function e0(n,e){return n instanceof Xr?function(i){return Vf(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Qr=class extends Yr{},Gi=class extends Yr{constructor(e){super(),this.elements=e}};function t0(n,e){let t=i0(e);for(let i of n.elements)t.some(r=>dn(r,i))||t.push(i);return{arrayValue:{values:t}}}var Hi=class extends Yr{constructor(e){super(),this.elements=e}};function n0(n,e){let t=i0(e);for(let i of n.elements)t=t.filter(r=>!dn(r,i));return{arrayValue:{values:t}}}var Xr=class extends Yr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function pw(n){return Ce(n.integerValue||n.doubleValue)}function i0(n){return ug(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function zP(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Gi&&r instanceof Gi||i instanceof Hi&&r instanceof Hi?$r(i.elements,r.elements,dn):i instanceof Xr&&r instanceof Xr?dn(i.Pe,r.Pe):i instanceof Qr&&r instanceof Qr}(n.transform,e.transform)}var Yf=class{constructor(e,t){this.version=e,this.transformResults=t}},ji=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Hc(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Jr=class{};function r0(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new tl(n.key,ji.none()):new Ki(n.key,n.data,ji.none());{let t=n.data,i=Gt.empty(),r=new rt(Dt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new kn(n.key,i,new an(r.toArray()),ji.none())}}function qP(n,e,t){n instanceof Ki?function(r,s,o){let a=r.value.clone(),c=mw(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kn?function(r,s,o){if(!Hc(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=mw(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(s0(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function No(n,e,t,i){return n instanceof Ki?function(s,o,a,c){if(!Hc(s.precondition,o))return a;let u=s.value.clone(),h=yw(s.fieldTransforms,c,o);return u.setAll(h),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(n,e,t,i):n instanceof kn?function(s,o,a,c){if(!Hc(s.precondition,o))return a;let u=yw(s.fieldTransforms,c,o),h=o.data;return h.setAll(s0(s)),h.setAll(u),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,i):function(s,o,a){return Hc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function $P(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=e0(i.transform,r||null);s!=null&&(t===null&&(t=Gt.empty()),t.set(i.field,s))}return t||null}function gw(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&$r(i,r,(s,o)=>zP(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ki=class extends Jr{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},kn=class extends Jr{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function s0(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function mw(n,e,t){let i=new Map;me(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,jP(o,a,t[r]))}return i}function yw(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,BP(s,o,e))}return i}var tl=class extends Jr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Qf=class extends Jr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Xf=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&qP(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=No(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=No(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=Xw();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=r0(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(Z.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ie())}isEqual(e){return this.batchId===e.batchId&&$r(this.mutations,e.mutations,(t,i)=>gw(t,i))&&$r(this.baseMutations,e.baseMutations,(t,i)=>gw(t,i))}},Jf=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){me(e.mutations.length===i.length);let r=function(){return NP}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var Zf=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var ep=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Me,re;function WP(n){switch(n){default:return K();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function o0(n){if(n===void 0)return Rn("GRPC error has no .code"),M.UNKNOWN;switch(n){case Me.OK:return M.OK;case Me.CANCELLED:return M.CANCELLED;case Me.UNKNOWN:return M.UNKNOWN;case Me.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Me.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Me.INTERNAL:return M.INTERNAL;case Me.UNAVAILABLE:return M.UNAVAILABLE;case Me.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Me.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Me.NOT_FOUND:return M.NOT_FOUND;case Me.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Me.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Me.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Me.ABORTED:return M.ABORTED;case Me.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Me.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Me.DATA_LOSS:return M.DATA_LOSS;default:return K()}}(re=Me||(Me={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var _w=null;function GP(){return new TextEncoder}var HP=new si([4294967295,4294967295],0);function vw(n){let e=GP().encode(n),t=new pf;return t.update(e),new Uint8Array(t.digest())}function bw(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new si([t,i],0),new si([r,s],0)]}var tp=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Bi(`Invalid padding: ${t}`);if(i<0)throw new Bi(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Bi(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Bi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=si.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(si.fromNumber(i)));return r.compare(HP)===1&&(r=new si([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=vw(e),[i,r]=bw(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=vw(e),[i,r]=bw(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},Bi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var nl=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Uo.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Z.min(),r,new xe(le),Pn(),ie())}},Uo=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ie(),ie(),ie())}};var jr=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},il=class{constructor(e,t){this.targetId=e,this.me=t}},rl=class{constructor(e,t,i=st.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},sl=class{constructor(){this.fe=0,this.ge=Iw(),this.pe=st.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ie(),t=ie(),i=ie();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:K()}}),new Uo(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=Iw()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,me(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},np=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Pn(),this.qe=ww(),this.Qe=new xe(le)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:K()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(Gf(s))if(i===0){let o=new H(s.path);this.Ue(t,o,Ht.newNoDocument(o,Z.min()))}else me(i===1);else{let o=this.Ye(t);if(o!==i){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,u)}_w?.et(function(h,f,g,m,T){var A,w,D,k,U,j;let N={localCacheCount:h,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},V=f.unchangedNames;return V&&(N.bloomFilter={applied:T===0,hashCount:(A=V?.hashCount)!==null&&A!==void 0?A:0,bitmapLength:(k=(D=(w=V?.bits)===null||w===void 0?void 0:w.bitmap)===null||D===void 0?void 0:D.length)!==null&&k!==void 0?k:0,padding:(j=(U=V?.bits)===null||U===void 0?void 0:U.padding)!==null&&j!==void 0?j:0,mightContain:E=>{var _;return(_=m?.mightContain(E))!==null&&_!==void 0&&_}}),N}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=ai(i).toUint8Array()}catch(c){if(c instanceof Jc)return qr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new tp(o,r,s)}catch(c){return qr(c instanceof Bi?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Gf(a.target)){let c=new H(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,Ht.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let i=ie();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let u=this.Je(c);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new nl(e,t,this.Qe,this.ke,i);return this.ke=Pn(),this.qe=ww(),this.Qe=new xe(le),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new sl,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new rt(le),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||W("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new sl),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function ww(){return new xe(H.comparator)}function Iw(){return new xe(H.comparator)}var KP={asc:"ASCENDING",desc:"DESCENDING"},YP={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},QP={and:"AND",or:"OR"},ip=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function rp(n,e){return n.useProto3Json||El(e)?e:{value:e}}function ol(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function a0(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function XP(n,e){return ol(n,e.toTimestamp())}function hn(n){return me(!!n),Z.fromTimestamp(function(t){let i=Dn(t);return new Ze(i.seconds,i.nanos)}(n))}function fg(n,e){return sp(n,e).canonicalString()}function sp(n,e){let t=function(r){return new Ee(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function c0(n){let e=Ee.fromString(n);return me(f0(e)),e}function op(n,e){return fg(n.databaseId,e.path)}function wf(n,e){let t=c0(e);if(t.get(1)!==n.databaseId.projectId)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new H(u0(t))}function l0(n,e){return fg(n.databaseId,e)}function JP(n){let e=c0(n);return e.length===4?Ee.emptyPath():u0(e)}function ap(n){return new Ee(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function u0(n){return me(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Ew(n,e,t){return{name:op(n,e),fields:t.value.mapValue.fields}}function ZP(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:K()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(u,h){return u.useProto3Json?(me(h===void 0||typeof h=="string"),st.fromBase64String(h||"")):(me(h===void 0||h instanceof Buffer||h instanceof Uint8Array),st.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){let h=u.code===void 0?M.UNKNOWN:o0(u.code);return new z(h,u.message||"")}(o);t=new rl(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=wf(n,i.document.name),s=hn(i.document.updateTime),o=i.document.createTime?hn(i.document.createTime):Z.min(),a=new Gt({mapValue:{fields:i.document.fields}}),c=Ht.newFoundDocument(r,s,o,a),u=i.targetIds||[],h=i.removedTargetIds||[];t=new jr(u,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=wf(n,i.document),s=i.readTime?hn(i.readTime):Z.min(),o=Ht.newNoDocument(r,s),a=i.removedTargetIds||[];t=new jr([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=wf(n,i.document),s=i.removedTargetIds||[];t=new jr([],s,r,null)}else{if(!("filter"in e))return K();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new ep(r,s),a=i.targetId;t=new il(a,o)}}return t}function ek(n,e){let t;if(e instanceof Ki)t={update:Ew(n,e.key,e.value)};else if(e instanceof tl)t={delete:op(n,e.key)};else if(e instanceof kn)t={update:Ew(n,e.key,e.data),updateMask:lk(e.fieldMask)};else{if(!(e instanceof Qf))return K();t={verify:op(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Qr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Gi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Hi)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Xr)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw K()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:XP(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:K()}(n,e.precondition)),t}function tk(n,e){return n&&n.length>0?(me(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?hn(r.updateTime):hn(s);return o.isEqual(Z.min())&&(o=hn(s)),new Yf(o,r.transformResults||[])}(t,e))):[]}function nk(n,e){return{documents:[l0(n,e.path)]}}function ik(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=l0(n,r);let s=function(u){if(u.length!==0)return d0(Kt.create(u,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(u){if(u.length!==0)return u.map(h=>function(g){return{field:Lr(g.field),direction:ok(g.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=rp(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:t,parent:r}}function rk(n){let e=JP(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){me(i===1);let h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(f){let g=h0(f);return g instanceof Kt&&jw(g)?g.getFilters():[g]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(g=>function(T){return new Kr(Fr(T.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(T.direction))}(g))}(t.orderBy));let a=null;t.limit&&(a=function(f){let g;return g=typeof f=="object"?f.value:f,El(g)?null:g}(t.limit));let c=null;t.startAt&&(c=function(f){let g=!!f.before,m=f.values||[];return new Hr(m,g)}(t.startAt));let u=null;return t.endAt&&(u=function(f){let g=!f.before,m=f.values||[];return new Hr(m,g)}(t.endAt)),DP(e,r,o,s,a,"F",c,u)}function sk(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return K()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function h0(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=Fr(t.unaryFilter.field);return Ne.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Fr(t.unaryFilter.field);return Ne.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Fr(t.unaryFilter.field);return Ne.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Fr(t.unaryFilter.field);return Ne.create(o,"!=",{nullValue:"NULL_VALUE"});default:return K()}}(n):n.fieldFilter!==void 0?function(t){return Ne.create(Fr(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return K()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Kt.create(t.compositeFilter.filters.map(i=>h0(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return K()}}(t.compositeFilter.op))}(n):K()}function ok(n){return KP[n]}function ak(n){return YP[n]}function ck(n){return QP[n]}function Lr(n){return{fieldPath:n.canonicalString()}}function Fr(n){return Dt.fromServerFormat(n.fieldPath)}function d0(n){return n instanceof Ne?function(t){if(t.op==="=="){if(lw(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NAN"}};if(cw(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(lw(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NOT_NAN"}};if(cw(t.value))return{unaryFilter:{field:Lr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Lr(t.field),op:ak(t.op),value:t.value}}}(n):n instanceof Kt?function(t){let i=t.getFilters().map(r=>d0(r));return i.length===1?i[0]:{compositeFilter:{op:ck(t.op),filters:i}}}(n):K()}function lk(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function f0(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Bo=class n{constructor(e,t,i,r,s=Z.min(),o=Z.min(),a=st.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var cp=class{constructor(e){this.ct=e}};function uk(n){let e=rk({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Kf(e,e.limit,"L"):e}var al=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ce(e.integerValue));else if("doubleValue"in e){let i=Ce(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Vo(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Dn(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(ai(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?Fw(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):K()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}St(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),H.fromName(e).path.forEach(i=>{this.dt(t,60),this.bt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};al.Dt=new al;var lp=class{constructor(){this.an=new up}addToCollectionParentIndex(e,t){return this.an.add(t),O.resolve()}getCollectionParents(e,t){return O.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return O.resolve()}deleteFieldIndex(e,t){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,t){return O.resolve()}getDocumentsMatchingTarget(e,t){return O.resolve(null)}getIndexType(e,t){return O.resolve(0)}getFieldIndexes(e,t){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,t){return O.resolve(qi.min())}getMinOffsetFromCollectionGroup(e,t){return O.resolve(qi.min())}updateCollectionGroup(e,t,i){return O.resolve()}updateIndexEntries(e,t){return O.resolve()}},up=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new rt(Ee.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new rt(Ee.comparator)).toArray()}};var wU=new Uint8Array(0);var on=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};on.DEFAULT_COLLECTION_PERCENTILE=10,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,on.DEFAULT=new on(41943040,on.DEFAULT_COLLECTION_PERCENTILE,on.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),on.DISABLED=new on(-1,0,0);var jo=class n{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new n(0)}static Bn(){return new n(-1)}};var hp=class{constructor(){this.changes=new ci(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ht.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?O.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var dp=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var fp=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&No(i.mutation,r,an.empty(),Ze.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ie()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ie()){let r=Ui();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Po();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=Ui();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ie()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Pn(),o=Oo(),a=function(){return Oo()}();return t.forEach((c,u)=>{let h=i.get(u.key);r.has(u.key)&&(h===void 0||h.mutation instanceof kn)?s=s.insert(u.key,u):h!==void 0?(o.set(u.key,h.mutation.getFieldMask()),No(h.mutation,u,h.mutation.getFieldMask(),Ze.now())):o.set(u.key,an.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((u,h)=>o.set(u,h)),t.forEach((u,h)=>{var f;return a.set(u,new dp(h,(f=o.get(u))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){let i=Oo(),r=new xe((o,a)=>o-a),s=ie();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let u=t.get(c);if(u===null)return;let h=i.get(c)||an.empty();h=a.applyToLocalView(u,h),i.set(c,h);let f=(r.get(a.batchId)||ie()).add(c);r=r.insert(a.batchId,f)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),u=c.key,h=c.value,f=Xw();h.forEach(g=>{if(!s.has(g)){let m=r0(t.get(g),i.get(g));m!==null&&f.set(g,m),s=s.add(g)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,f))}return O.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return H.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):O.resolve(Ui()),a=-1,c=s;return o.next(u=>O.forEach(u,(h,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(h)?O.resolve():this.remoteDocumentCache.getEntry(e,h).next(g=>{c=c.insert(h,g)}))).next(()=>this.populateOverlays(e,u,s)).next(()=>this.computeViews(e,c,u,ie())).next(h=>({batchId:a,changes:Qw(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new H(t)).next(i=>{let r=Po();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Po();return this.indexManager.getCollectionParents(e,s).next(a=>O.forEach(a,c=>{let u=function(f,g){return new Wi(g,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,u,i,r).next(h=>{h.forEach((f,g)=>{o=o.insert(f,g)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,u)=>{let h=u.getKey();o.get(h)===null&&(o=o.insert(h,Ht.newInvalidDocument(h)))});let a=Po();return o.forEach((c,u)=>{let h=s.get(c);h!==void 0&&No(h.mutation,u,an.empty(),Ze.now()),Sl(t,u)&&(a=a.insert(c,u))}),a})}};var pp=class{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return O.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:hn(r.createTime)}}(t)),O.resolve()}getNamedQuery(e,t){return O.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,function(r){return{name:r.name,query:uk(r.bundledQuery),readTime:hn(r.readTime)}}(t)),O.resolve()}};var gp=class{constructor(){this.overlays=new xe(H.comparator),this.Pr=new Map}getOverlay(e,t){return O.resolve(this.overlays.get(t))}getOverlays(e,t){let i=Ui();return O.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),O.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Pr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(i)),O.resolve()}getOverlaysForCollection(e,t,i){let r=Ui(),s=t.length+1,o=new H(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,u=c.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return O.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new xe((u,h)=>u-h),o=this.overlays.getIterator();for(;o.hasNext();){let u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let h=s.get(u.largestBatchId);h===null&&(h=Ui(),s=s.insert(u.largestBatchId,h)),h.set(u.getKey(),u)}}let a=Ui(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return O.resolve(a)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Pr.get(r.largestBatchId).delete(i.key);this.Pr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Zf(t,i));let s=this.Pr.get(t);s===void 0&&(s=ie(),this.Pr.set(t,s)),this.Pr.set(t,s.add(i.key))}};var mp=class{constructor(){this.sessionToken=st.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,O.resolve()}};var zo=class{constructor(){this.Ir=new rt(Oe.Tr),this.Er=new rt(Oe.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){let i=new Oe(e,t);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Rr(new Oe(e,t))}Vr(e,t){e.forEach(i=>this.removeReference(i,t))}mr(e){let t=new H(new Ee([])),i=new Oe(t,e),r=new Oe(t,e+1),s=[];return this.Er.forEachInRange([i,r],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){let t=new H(new Ee([])),i=new Oe(t,e),r=new Oe(t,e+1),s=ie();return this.Er.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Oe(e,0),i=this.Ir.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Oe=class{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return H.comparator(e.key,t.key)||le(e.yr,t.yr)}static dr(e,t){return le(e.yr,t.yr)||H.comparator(e.key,t.key)}};var yp=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new rt(Oe.Tr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Xf(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Sr=this.Sr.add(new Oe(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,t){return O.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Dr(i),s=r<0?0:r;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Oe(t,0),r=new Oe(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([i,r],o=>{let a=this.br(o.yr);s.push(a)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new rt(le);return t.forEach(r=>{let s=new Oe(r,0),o=new Oe(r,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{i=i.add(a.yr)})}),O.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;H.isDocumentKey(s)||(s=s.child(""));let o=new Oe(new H(s),0),a=new rt(le);return this.Sr.forEachWhile(c=>{let u=c.key.path;return!!i.isPrefixOf(u)&&(u.length===r&&(a=a.add(c.yr)),!0)},o),O.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(i=>{let r=this.br(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){me(this.vr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return O.forEach(t.mutations,r=>{let s=new Oe(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Sr=i})}xn(e){}containsKey(e,t){let i=new Oe(t,0),r=this.Sr.firstAfterOrEqual(i);return O.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){let t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var _p=class{constructor(e){this.Fr=e,this.docs=function(){return new xe(H.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Fr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return O.resolve(i?i.document.mutableCopy():Ht.newInvalidDocument(t))}getEntries(e,t){let i=Pn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ht.newInvalidDocument(r))}),O.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Pn(),o=t.path,a=new H(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:u,value:{document:h}}=c.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||vP(_P(h),i)<=0||(r.has(h.key)||Sl(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,t,i,r){K()}Mr(e,t){return O.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new vp(this)}getSize(e){return O.resolve(this.size)}},vp=class extends hp{constructor(e){super(),this.ur=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.ur.addEntry(e,r)):this.ur.removeEntry(i)}),O.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}};var bp=class{constructor(e){this.persistence=e,this.Or=new ci(t=>hg(t),dg),this.lastRemoteSnapshotVersion=Z.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new zo,this.targetCount=0,this.Br=jo.Ln()}forEachTarget(e,t){return this.Or.forEach((i,r)=>t(r)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Nr&&(this.Nr=t),O.resolve()}Qn(e){this.Or.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Br=new jo(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,O.resolve()}updateTargetData(e,t){return this.Qn(t),O.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),O.waitFor(s).next(()=>r)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,t){let i=this.Or.get(t)||null;return O.resolve(i)}addMatchingKeys(e,t,i){return this.Lr.Ar(t,i),O.resolve()}removeMatchingKeys(e,t,i){this.Lr.Vr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),O.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Lr.pr(t);return O.resolve(i)}containsKey(e,t){return O.resolve(this.Lr.containsKey(t))}};var wp=class{constructor(e,t){this.kr={},this.overlays={},this.qr=new Vw(0),this.Qr=!1,this.Qr=!0,this.Kr=new mp,this.referenceDelegate=e(this),this.$r=new bp(this),this.indexManager=new lp,this.remoteDocumentCache=function(r){return new _p(r)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new cp(t),this.Wr=new pp(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new gp,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.kr[e.toKey()];return i||(i=new yp(t,this.referenceDelegate),this.kr[e.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,i){W("MemoryPersistence","Starting transaction:",e);let r=new Ip(this.qr.next());return this.referenceDelegate.Gr(),i(r).next(s=>this.referenceDelegate.zr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}jr(e,t){return O.or(Object.values(this.kr).map(i=>()=>i.containsKey(e,t)))}},Ip=class extends Mf{constructor(e){super(),this.currentSequenceNumber=e}},Ep=class n{constructor(e){this.persistence=e,this.Hr=new zo,this.Jr=null}static Yr(e){return new n(e)}get Zr(){if(this.Jr)return this.Jr;throw K()}addReference(e,t,i){return this.Hr.addReference(i,t),this.Zr.delete(i.toString()),O.resolve()}removeReference(e,t,i){return this.Hr.removeReference(i,t),this.Zr.add(i.toString()),O.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),O.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(r=>this.Zr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Zr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.Zr,i=>{let r=H.fromPath(i);return this.Xr(e,r).next(s=>{s||t.removeEntry(r,Z.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(i=>{i?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return O.or([()=>O.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}};var Tp=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ki=i,this.$i=r}static Ui(e,t){let i=ie(),r=ie();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var Sp=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ap=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return cb()?8:wP(Le())>0?6:4}()}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Sp;return this.Zi(e,t,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(e,t,o,a.size)})}).next(()=>s.result)}Xi(e,t,i,r){return i.documentReadCount<this.zi?(Do()<=ne.DEBUG&&W("QueryEngine","SDK will not create cache indexes for query:",Vr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),O.resolve()):(Do()<=ne.DEBUG&&W("QueryEngine","Query:",Vr(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ji*r?(Do()<=ne.DEBUG&&W("QueryEngine","The SDK decides to create cache indexes for query:",Vr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,un(t))):O.resolve())}Ji(e,t){if(fw(t))return O.resolve(null);let i=un(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=Kf(t,null,"F"),i=un(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ie(...s);return this.Hi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let u=this.es(t,a);return this.ts(t,u,o,c.readTime)?this.Ji(e,Kf(t,null,"F")):this.ns(e,u,t,c)}))})))}Yi(e,t,i,r){return fw(t)||r.isEqual(Z.min())?O.resolve(null):this.Hi.getDocuments(e,i).next(s=>{let o=this.es(t,s);return this.ts(t,o,i,r)?O.resolve(null):(Do()<=ne.DEBUG&&W("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Vr(t)),this.ns(e,o,t,yP(r,-1)).next(a=>a))})}es(e,t){let i=new rt(Kw(e));return t.forEach((r,s)=>{Sl(e,s)&&(i=i.add(s))}),i}ts(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Zi(e,t,i){return Do()<=ne.DEBUG&&W("QueryEngine","Using full collection scan to execute query:",Vr(t)),this.Hi.getDocumentsMatchingQuery(e,t,qi.min(),i)}ns(e,t,i,r){return this.Hi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Cp=class{constructor(e,t,i,r){this.persistence=e,this.rs=t,this.serializer=r,this.ss=new xe(le),this.os=new ci(s=>hg(s),dg),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(i)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new fp(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}};function hk(n,e,t,i){return new Cp(n,e,t,i)}function p0(n,e){return b(this,null,function*(){let t=Q(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.cs(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=ie();for(let u of r){o.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}for(let u of s){a.push(u.batchId);for(let h of u.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(i,c).next(u=>({ls:u,removedBatchIds:o,addedBatchIds:a}))})})})}function dk(n,e){let t=Q(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.us.newChangeBuffer({trackRemovals:!0});return function(a,c,u,h){let f=u.batch,g=f.keys(),m=O.resolve();return g.forEach(T=>{m=m.next(()=>h.getEntry(c,T)).next(A=>{let w=u.docVersions.get(T);me(w!==null),A.version.compareTo(w)<0&&(f.applyToRemoteDocument(A,u),A.isValidDocument()&&(A.setReadTime(u.commitVersion),h.addEntry(A)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(c,f))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=ie();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(c=c.add(a.batch.mutations[u].key));return c}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function g0(n){let e=Q(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function fk(n,e){let t=Q(n),i=e.snapshotVersion,r=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.us.newChangeBuffer({trackRemovals:!0});r=t.ss;let a=[];e.targetChanges.forEach((h,f)=>{let g=r.get(f);if(!g)return;a.push(t.$r.removeMatchingKeys(s,h.removedDocuments,f).next(()=>t.$r.addMatchingKeys(s,h.addedDocuments,f)));let m=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?m=m.withResumeToken(st.EMPTY_BYTE_STRING,Z.min()).withLastLimboFreeSnapshotVersion(Z.min()):h.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(h.resumeToken,i)),r=r.insert(f,m),function(A,w,D){return A.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-A.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(g,m,h)&&a.push(t.$r.updateTargetData(s,m))});let c=Pn(),u=ie();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(pk(s,o,e.documentUpdates).next(h=>{c=h.hs,u=h.Ps})),!i.isEqual(Z.min())){let h=t.$r.getLastRemoteSnapshotVersion(s).next(f=>t.$r.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return O.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,u)).next(()=>c)}).then(s=>(t.ss=r,s))}function pk(n,e,t){let i=ie(),r=ie();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Pn();return t.forEach((a,c)=>{let u=s.get(a);c.isFoundDocument()!==u.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(Z.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!u.isValidDocument()||c.version.compareTo(u.version)>0||c.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):W("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",c.version)}),{hs:o,Ps:r}})}function gk(n,e){let t=Q(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function mk(n,e){let t=Q(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.$r.getTargetData(i,e).next(s=>s?(r=s,O.resolve(r)):t.$r.allocateTargetId(i).next(o=>(r=new Bo(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.$r.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ss=t.ss.insert(i.targetId,i),t.os.set(e,i.targetId)),i})}function xp(n,e,t){return b(this,null,function*(){let i=Q(n),r=i.ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Xo(o))throw o;W("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ss=i.ss.remove(e),i.os.delete(r.target)})}function Tw(n,e,t){let i=Q(n),r=Z.min(),s=ie();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,u,h){let f=Q(c),g=f.os.get(h);return g!==void 0?O.resolve(f.ss.get(g)):f.$r.getTargetData(u,h)}(i,o,un(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.rs.getDocumentsMatchingQuery(o,e,t?r:Z.min(),t?s:ie())).next(a=>(yk(i,kP(e),a),{documents:a,Is:s})))}function yk(n,e,t){let i=n._s.get(e)||Z.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n._s.set(e,i)}var cl=class{constructor(){this.activeTargetIds=FP()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Rp=class{constructor(){this.io=new cl,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,i){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new cl,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Dp=class{oo(e){}shutdown(){}};var ll=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){W("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.lo)e(0)}co(){W("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Wc=null;function If(){return Wc===null?Wc=function(){return 268435456+Math.round(2147483648*Math.random())}():Wc++,"0x"+Wc.toString(16)}var _k={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Pp=class{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}};var it="WebChannelConnection",kp=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+t.host,this.Do=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get vo(){return!1}Fo(t,i,r,s,o){let a=If(),c=this.Mo(t,i.toUriEncodedString());W("RestConnection",`Sending RPC '${t}' ${a}:`,c,r);let u={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(u,s,o),this.Oo(t,c,u,r).then(h=>(W("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw qr("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",r),h})}No(t,i,r,s,o,a){return this.Fo(t,i,r,s,o)}xo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+ns}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}Mo(t,i){let r=_k[t];return`${this.bo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,i,r){let s=If();return new Promise((o,a)=>{let c=new gf;c.setWithCredentials(!0),c.listenOnce(yf.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Ro.NO_ERROR:let h=c.getResponseJson();W(it,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case Ro.TIMEOUT:W(it,`RPC '${e}' ${s} timed out`),a(new z(M.DEADLINE_EXCEEDED,"Request time out"));break;case Ro.HTTP_ERROR:let f=c.getStatus();if(W(it,`RPC '${e}' ${s} failed with status:`,f,"response text:",c.getResponseText()),f>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);let m=g?.error;if(m&&m.status&&m.message){let T=function(w){let D=w.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(D)>=0?D:M.UNKNOWN}(m.status);a(new z(T,m.message))}else a(new z(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new z(M.UNAVAILABLE,"Connection failed."));break;default:K()}}finally{W(it,`RPC '${e}' ${s} completed.`)}});let u=JSON.stringify(r);W(it,`RPC '${e}' ${s} sending request:`,r),c.send(t,"POST",u,i,15)})}Lo(e,t,i){let r=If(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bf(),a=vf(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(c.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(c.xmlHttpFactory=new mf({})),this.xo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let h=s.join("");W(it,`Creating RPC '${e}' stream ${r}: ${h}`,c);let f=o.createWebChannel(h,c),g=!1,m=!1,T=new Pp({Po:w=>{m?W(it,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(g||(W(it,`Opening RPC '${e}' stream ${r} transport.`),f.open(),g=!0),W(it,`RPC '${e}' stream ${r} sending:`,w),f.send(w))},Io:()=>f.close()}),A=(w,D,k)=>{w.listen(D,U=>{try{k(U)}catch(j){setTimeout(()=>{throw j},0)}})};return A(f,Nr.EventType.OPEN,()=>{m||(W(it,`RPC '${e}' stream ${r} transport opened.`),T.po())}),A(f,Nr.EventType.CLOSE,()=>{m||(m=!0,W(it,`RPC '${e}' stream ${r} transport closed`),T.wo())}),A(f,Nr.EventType.ERROR,w=>{m||(m=!0,qr(it,`RPC '${e}' stream ${r} transport errored:`,w),T.wo(new z(M.UNAVAILABLE,"The operation could not be completed")))}),A(f,Nr.EventType.MESSAGE,w=>{var D;if(!m){let k=w.data[0];me(!!k);let U=k,j=U.error||((D=U[0])===null||D===void 0?void 0:D.error);if(j){W(it,`RPC '${e}' stream ${r} received error:`,j);let N=j.status,V=function(v){let S=Me[v];if(S!==void 0)return o0(S)}(N),E=j.message;V===void 0&&(V=M.INTERNAL,E="Unknown error status: "+N+" with message "+j.message),m=!0,T.wo(new z(V,E)),f.close()}else W(it,`RPC '${e}' stream ${r} received:`,k),T.So(k)}}),A(a,_f.STAT_EVENT,w=>{w.stat===qc.PROXY?W(it,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===qc.NOPROXY&&W(it,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{T.yo()},0),T}};function Ef(){return typeof document<"u"?document:null}function Al(n){return new ip(n,!0)}var ul=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ai=e,this.timerId=t,this.Bo=i,this.ko=r,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();let t=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),r=Math.max(0,t-i);r>0&&W("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var hl=class{constructor(e,t,i,r,s,o,a,c){this.ai=e,this.jo=i,this.Ho=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new ul(e,t)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return b(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){return b(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){return b(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():t&&t.code===M.RESOURCE_EXHAUSTED?(Rn(t.toString()),Rn("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):t&&t.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Vo(t)})}c_(){}auth(){this.state=1;let e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Jo===t&&this.h_(i,r)},i=>{e(()=>{let r=new z(M.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(r)})})}h_(e,t){let i=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(r=>{i(()=>this.P_(r))}),this.stream.onMessage(r=>{i(()=>++this.Xo==1?this.T_(r):this.onNext(r))})}r_(){this.state=5,this.e_.Wo(()=>b(this,null,function*(){this.state=0,this.start()}))}P_(e){return W("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(W("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Mp=class extends hl{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();let t=ZP(this.serializer,e),i=function(s){if(!("targetChange"in s))return Z.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Z.min():o.readTime?hn(o.readTime):Z.min()}(e);return this.listener.E_(t,i)}d_(e){let t={};t.database=ap(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Gf(c)?{documents:nk(s,c)}:{query:ik(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=a0(s,o.resumeToken);let u=rp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Z.min())>0){a.readTime=ol(s,o.snapshotVersion.toTimestamp());let u=rp(s,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);let i=sk(this.serializer,e);i&&(t.labels=i),this.__(t)}A_(e){let t={};t.database=ap(this.serializer),t.removeTarget=e,this.__(t)}},Op=class extends hl{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return me(!!e.streamToken),this.lastStreamToken=e.streamToken,me(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){me(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();let t=tk(e.writeResults,e.commitTime),i=hn(e.commitTime);return this.listener.f_(i,t)}g_(){let e={};e.database=ap(this.serializer),this.__(e)}V_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>ek(this.serializer,i))};this.__(t)}};var Np=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,sp(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new z(M.UNKNOWN,s.toString())})}No(e,t,i,r,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(e,sp(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(M.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},Vp=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Rn(t),this.b_=!1):W("OnlineStateTracker",t)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var Lp=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{i.enqueueAndForget(()=>b(this,null,function*(){Yi(this)&&(W("RemoteStore","Restarting streams for network reachability change."),yield function(c){return b(this,null,function*(){let u=Q(c);u.N_.add(4),yield Jo(u),u.k_.set("Unknown"),u.N_.delete(4),yield Cl(u)})}(this))}))}),this.k_=new Vp(i,r)}};function Cl(n){return b(this,null,function*(){if(Yi(n))for(let e of n.L_)yield e(!0)})}function Jo(n){return b(this,null,function*(){for(let e of n.L_)yield e(!1)})}function m0(n,e){let t=Q(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),yg(t)?mg(t):rs(t).n_()&&gg(t,e))}function pg(n,e){let t=Q(n),i=rs(t);t.O_.delete(e),i.n_()&&y0(t,e),t.O_.size===0&&(i.n_()?i.s_():Yi(t)&&t.k_.set("Unknown"))}function gg(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Z.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}rs(n).d_(e)}function y0(n,e){n.q_.xe(e),rs(n).A_(e)}function mg(n){n.q_=new np({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),rs(n).start(),n.k_.D_()}function yg(n){return Yi(n)&&!rs(n).t_()&&n.O_.size>0}function Yi(n){return Q(n).N_.size===0}function _0(n){n.q_=void 0}function vk(n){return b(this,null,function*(){n.k_.set("Online")})}function bk(n){return b(this,null,function*(){n.O_.forEach((e,t)=>{gg(n,e)})})}function wk(n,e){return b(this,null,function*(){_0(n),yg(n)?(n.k_.F_(e),mg(n)):n.k_.set("Unknown")})}function Ik(n,e,t){return b(this,null,function*(){if(n.k_.set("Online"),e instanceof rl&&e.state===2&&e.cause)try{yield function(r,s){return b(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.O_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.O_.delete(a),r.q_.removeTarget(a))})}(n,e)}catch(i){W("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield dl(n,i)}else if(e instanceof jr?n.q_.Ke(e):e instanceof il?n.q_.He(e):n.q_.We(e),!t.isEqual(Z.min()))try{let i=yield g0(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.q_.rt(o);return a.targetChanges.forEach((c,u)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.O_.get(u);h&&s.O_.set(u,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,u)=>{let h=s.O_.get(c);if(!h)return;s.O_.set(c,h.withResumeToken(st.EMPTY_BYTE_STRING,h.snapshotVersion)),y0(s,c);let f=new Bo(h.target,c,u,h.sequenceNumber);gg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){W("RemoteStore","Failed to raise snapshot:",i),yield dl(n,i)}})}function dl(n,e,t){return b(this,null,function*(){if(!Xo(e))throw e;n.N_.add(1),yield Jo(n),n.k_.set("Offline"),t||(t=()=>g0(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){W("RemoteStore","Retrying IndexedDB access"),yield t(),n.N_.delete(1),yield Cl(n)}))})}function v0(n,e){return e().catch(t=>dl(n,t,e))}function xl(n){return b(this,null,function*(){let e=Q(n),t=li(e),i=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;Ek(e);)try{let r=yield gk(e.localStore,i);if(r===null){e.x_.length===0&&t.s_();break}i=r.batchId,Tk(e,r)}catch(r){yield dl(e,r)}b0(e)&&w0(e)})}function Ek(n){return Yi(n)&&n.x_.length<10}function Tk(n,e){n.x_.push(e);let t=li(n);t.n_()&&t.R_&&t.V_(e.mutations)}function b0(n){return Yi(n)&&!li(n).t_()&&n.x_.length>0}function w0(n){li(n).start()}function Sk(n){return b(this,null,function*(){li(n).g_()})}function Ak(n){return b(this,null,function*(){let e=li(n);for(let t of n.x_)e.V_(t.mutations)})}function Ck(n,e,t){return b(this,null,function*(){let i=n.x_.shift(),r=Jf.from(i,e,t);yield v0(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield xl(n)})}function xk(n,e){return b(this,null,function*(){e&&li(n).R_&&(yield function(i,r){return b(this,null,function*(){if(function(o){return WP(o)&&o!==M.ABORTED}(r.code)){let s=i.x_.shift();li(i).i_(),yield v0(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield xl(i)}})}(n,e)),b0(n)&&w0(n)})}function Sw(n,e){return b(this,null,function*(){let t=Q(n);t.asyncQueue.verifyOperationInProgress(),W("RemoteStore","RemoteStore received new credentials");let i=Yi(t);t.N_.add(3),yield Jo(t),i&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield Cl(t)})}function Rk(n,e){return b(this,null,function*(){let t=Q(n);e?(t.N_.delete(2),yield Cl(t)):e||(t.N_.add(2),yield Jo(t),t.k_.set("Unknown"))})}function rs(n){return n.Q_||(n.Q_=function(t,i,r){let s=Q(t);return s.y_(),new Mp(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:vk.bind(null,n),Ao:bk.bind(null,n),Vo:wk.bind(null,n),E_:Ik.bind(null,n)}),n.L_.push(e=>b(this,null,function*(){e?(n.Q_.i_(),yg(n)?mg(n):n.k_.set("Unknown")):(yield n.Q_.stop(),_0(n))}))),n.Q_}function li(n){return n.K_||(n.K_=function(t,i,r){let s=Q(t);return s.y_(),new Op(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:Sk.bind(null,n),Vo:xk.bind(null,n),m_:Ak.bind(null,n),f_:Ck.bind(null,n)}),n.L_.push(e=>b(this,null,function*(){e?(n.K_.i_(),yield xl(n)):(yield n.K_.stop(),n.x_.length>0&&(W("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))}))),n.K_}var Fp=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new cn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function _g(n,e){if(Rn("AsyncQueue",`${e}: ${n}`),Xo(n))return new z(M.UNAVAILABLE,`${e}: ${n}`);throw n}var fl=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||H.comparator(t.key,i.key):(t,i)=>H.comparator(t.key,i.key),this.keyedMap=Po(),this.sortedSet=new xe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var pl=class{constructor(){this.U_=new xe(H.comparator)}track(e){let t=e.doc.key,i=this.U_.get(t);i?e.type!==0&&i.type===3?this.U_=this.U_.insert(t,e):e.type===3&&i.type!==1?this.U_=this.U_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.U_=this.U_.remove(t):e.type===1&&i.type===2?this.U_=this.U_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):K():this.U_=this.U_.insert(t,e)}W_(){let e=[];return this.U_.inorderTraversal((t,i)=>{e.push(i)}),e}},Zr=class n{constructor(e,t,i,r,s,o,a,c,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,fl.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Tl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var Up=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}},Bp=class{constructor(){this.queries=Aw(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(t,i){let r=Q(t),s=r.queries;r.queries=Aw(),s.forEach((o,a)=>{for(let c of a.z_)c.onError(i)})})(this,new z(M.ABORTED,"Firestore shutting down"))}};function Aw(){return new ci(n=>Hw(n),Tl)}function Dk(n,e){return b(this,null,function*(){let t=Q(n),i=3,r=e.query,s=t.queries.get(r);s?!s.j_()&&e.H_()&&(i=2):(s=new Up,i=e.H_()?0:1);try{switch(i){case 0:s.G_=yield t.onListen(r,!0);break;case 1:s.G_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let a=_g(o,`Initialization of query '${Vr(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.z_.push(e),e.Y_(t.onlineState),s.G_&&e.Z_(s.G_)&&vg(t)})}function Pk(n,e){return b(this,null,function*(){let t=Q(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?r=e.H_()?0:1:!s.j_()&&e.H_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function kk(n,e){let t=Q(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.z_)a.Z_(r)&&(i=!0);o.G_=r}}i&&vg(t)}function Mk(n,e,t){let i=Q(n),r=i.queries.get(e);if(r)for(let s of r.z_)s.onError(t);i.queries.delete(e)}function vg(n){n.J_.forEach(e=>{e.next()})}var jp,Cw;(Cw=jp||(jp={})).X_="default",Cw.Cache="cache";var zp=class{constructor(e,t,i){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Zr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){if(!e.fromCache||!this.H_())return!0;let i=t!=="Offline";return(!this.options.oa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ra(e){if(e.docChanges.length>0)return!0;let t=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}sa(e){e=Zr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==jp.Cache}};var gl=class{constructor(e){this.key=e}},ml=class{constructor(e){this.key=e}},qp=class{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=ie(),this.mutatedKeys=ie(),this.da=Kw(e),this.Aa=new fl(this.da)}get Ra(){return this.Ia}Va(e,t){let i=t?t.ma:new pl,r=t?t.Aa:this.Aa,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,u=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,f)=>{let g=r.get(h),m=Sl(this.query,f)?f:null,T=!!g&&this.mutatedKeys.has(g.key),A=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations),w=!1;g&&m?g.data.isEqual(m.data)?T!==A&&(i.track({type:3,doc:m}),w=!0):this.fa(g,m)||(i.track({type:2,doc:m}),w=!0,(c&&this.da(m,c)>0||u&&this.da(m,u)<0)&&(a=!0)):!g&&m?(i.track({type:0,doc:m}),w=!0):g&&!m&&(i.track({type:1,doc:g}),w=!0,(c||u)&&(a=!0)),w&&(m?(o=o.add(m),s=A?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Aa:o,ma:i,ts:a,mutatedKeys:s}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;let o=e.ma.W_();o.sort((h,f)=>function(m,T){let A=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return K()}};return A(m)-A(T)}(h.type,f.type)||this.da(h.doc,f.doc)),this.ga(i),r=r!=null&&r;let a=t&&!r?this.pa():[],c=this.Ea.size===0&&this.current&&!r?1:0,u=c!==this.Ta;return this.Ta=c,o.length!==0||u?{snapshot:new Zr(this.query,e.Aa,s,o,e.mutatedKeys,c===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new pl,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];let e=this.Ea;this.Ea=ie(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});let t=[];return e.forEach(i=>{this.Ea.has(i)||t.push(new ml(i))}),this.Ea.forEach(i=>{e.has(i)||t.push(new gl(i))}),t}Sa(e){this.Ia=e.Is,this.Ea=ie();let t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return Zr.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},$p=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Wp=class{constructor(e){this.key=e,this.Da=!1}},Gp=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new ci(a=>Hw(a),Tl),this.Fa=new Map,this.Ma=new Set,this.xa=new xe(H.comparator),this.Oa=new Map,this.Na=new zo,this.La={},this.Ba=new Map,this.ka=jo.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function Ok(n,e,t=!0){return b(this,null,function*(){let i=C0(n),r,s=i.va.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ba()):r=yield I0(i,e,t,!0),r})}function Nk(n,e){return b(this,null,function*(){let t=C0(n);yield I0(t,e,!0,!1)})}function I0(n,e,t,i){return b(this,null,function*(){let r=yield mk(n.localStore,un(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield Vk(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&m0(n.remoteStore,r),a})}function Vk(n,e,t,i,r){return b(this,null,function*(){n.Qa=(f,g,m)=>function(A,w,D,k){return b(this,null,function*(){let U=w.view.Va(D);U.ts&&(U=yield Tw(A.localStore,w.query,!1).then(({documents:E})=>w.view.Va(E,U)));let j=k&&k.targetChanges.get(w.targetId),N=k&&k.targetMismatches.get(w.targetId)!=null,V=w.view.applyChanges(U,A.isPrimaryClient,j,N);return Rw(A,w.targetId,V.ya),V.snapshot})}(n,f,g,m);let s=yield Tw(n.localStore,e,!0),o=new qp(e,s.Is),a=o.Va(s.documents),c=Uo.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),u=o.applyChanges(a,n.isPrimaryClient,c);Rw(n,t,u.ya);let h=new $p(e,t,o);return n.va.set(e,h),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),u.snapshot})}function Lk(n,e,t){return b(this,null,function*(){let i=Q(n),r=i.va.get(e),s=i.Fa.get(r.targetId);if(s.length>1)return i.Fa.set(r.targetId,s.filter(o=>!Tl(o,e))),void i.va.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xp(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&pg(i.remoteStore,r.targetId),Hp(i,r.targetId)}).catch(Qo))):(Hp(i,r.targetId),yield xp(i.localStore,r.targetId,!0))})}function Fk(n,e){return b(this,null,function*(){let t=Q(n),i=t.va.get(e),r=t.Fa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),pg(t.remoteStore,i.targetId))})}function Uk(n,e,t){return b(this,null,function*(){let i=Gk(n);try{let r=yield function(o,a){let c=Q(o),u=Ze.now(),h=a.reduce((m,T)=>m.add(T.key),ie()),f,g;return c.persistence.runTransaction("Locally write mutations","readwrite",m=>{let T=Pn(),A=ie();return c.us.getEntries(m,h).next(w=>{T=w,T.forEach((D,k)=>{k.isValidDocument()||(A=A.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(m,T)).next(w=>{f=w;let D=[];for(let k of a){let U=$P(k,f.get(k.key).overlayedDocument);U!=null&&D.push(new kn(k.key,U,Uw(U.value.mapValue),ji.exists(!0)))}return c.mutationQueue.addMutationBatch(m,u,D,a)}).next(w=>{g=w;let D=w.applyToLocalDocumentSet(f,A);return c.documentOverlayCache.saveOverlays(m,w.batchId,D)})}).then(()=>({batchId:g.batchId,changes:Qw(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let u=o.La[o.currentUser.toKey()];u||(u=new xe(le)),u=u.insert(a,c),o.La[o.currentUser.toKey()]=u}(i,r.batchId,t),yield Zo(i,r.changes),yield xl(i.remoteStore)}catch(r){let s=_g(r,"Failed to persist write");t.reject(s)}})}function E0(n,e){return b(this,null,function*(){let t=Q(n);try{let i=yield fk(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Oa.get(s);o&&(me(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Da=!0:r.modifiedDocuments.size>0?me(o.Da):r.removedDocuments.size>0&&(me(o.Da),o.Da=!1))}),yield Zo(t,i,e)}catch(i){yield Qo(i)}})}function xw(n,e,t){let i=Q(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.va.forEach((s,o)=>{let a=o.view.Y_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=Q(o);c.onlineState=a;let u=!1;c.queries.forEach((h,f)=>{for(let g of f.z_)g.Y_(a)&&(u=!0)}),u&&vg(c)}(i.eventManager,e),r.length&&i.Ca.E_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function Bk(n,e,t){return b(this,null,function*(){let i=Q(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Oa.get(e),s=r&&r.key;if(s){let o=new xe(H.comparator);o=o.insert(s,Ht.newNoDocument(s,Z.min()));let a=ie().add(s),c=new nl(Z.min(),new Map,new xe(le),o,a);yield E0(i,c),i.xa=i.xa.remove(s),i.Oa.delete(e),bg(i)}else yield xp(i.localStore,e,!1).then(()=>Hp(i,e,t)).catch(Qo)})}function jk(n,e){return b(this,null,function*(){let t=Q(n),i=e.batch.batchId;try{let r=yield dk(t.localStore,e);S0(t,i,null),T0(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Zo(t,r)}catch(r){yield Qo(r)}})}function zk(n,e,t){return b(this,null,function*(){let i=Q(n);try{let r=yield function(o,a){let c=Q(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let h;return c.mutationQueue.lookupMutationBatch(u,a).next(f=>(me(f!==null),h=f.keys(),c.mutationQueue.removeMutationBatch(u,f))).next(()=>c.mutationQueue.performConsistencyCheck(u)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(u,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,h)).next(()=>c.localDocuments.getDocuments(u,h))})}(i.localStore,e);S0(i,e,t),T0(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Zo(i,r)}catch(r){yield Qo(r)}})}function T0(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function S0(n,e,t){let i=Q(n),r=i.La[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.La[i.currentUser.toKey()]=r}}function Hp(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Fa.get(e))n.va.delete(i),t&&n.Ca.Ka(i,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(i=>{n.Na.containsKey(i)||A0(n,i)})}function A0(n,e){n.Ma.delete(e.path.canonicalString());let t=n.xa.get(e);t!==null&&(pg(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),bg(n))}function Rw(n,e,t){for(let i of t)i instanceof gl?(n.Na.addReference(i.key,e),qk(n,i)):i instanceof ml?(W("SyncEngine","Document no longer in limbo: "+i.key),n.Na.removeReference(i.key,e),n.Na.containsKey(i.key)||A0(n,i.key)):K()}function qk(n,e){let t=e.key,i=t.path.canonicalString();n.xa.get(t)||n.Ma.has(i)||(W("SyncEngine","New document in limbo: "+t),n.Ma.add(i),bg(n))}function bg(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){let e=n.Ma.values().next().value;n.Ma.delete(e);let t=new H(Ee.fromString(e)),i=n.ka.next();n.Oa.set(i,new Wp(t)),n.xa=n.xa.insert(t,i),m0(n.remoteStore,new Bo(un(Ww(t.path)),i,"TargetPurposeLimboResolution",Vw.oe))}}function Zo(n,e,t){return b(this,null,function*(){let i=Q(n),r=[],s=[],o=[];i.va.isEmpty()||(i.va.forEach((a,c)=>{o.push(i.Qa(c,e,t).then(u=>{var h;if((u||t)&&i.isPrimaryClient){let f=u?!u.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(c.targetId,f?"current":"not-current")}if(u){r.push(u);let f=Tp.Ui(c.targetId,u);s.push(f)}}))}),yield Promise.all(o),i.Ca.E_(r),yield function(c,u){return b(this,null,function*(){let h=Q(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>O.forEach(u,g=>O.forEach(g.Ki,m=>h.persistence.referenceDelegate.addReference(f,g.targetId,m)).next(()=>O.forEach(g.$i,m=>h.persistence.referenceDelegate.removeReference(f,g.targetId,m)))))}catch(f){if(!Xo(f))throw f;W("LocalStore","Failed to update sequence numbers: "+f)}for(let f of u){let g=f.targetId;if(!f.fromCache){let m=h.ss.get(g),T=m.snapshotVersion,A=m.withLastLimboFreeSnapshotVersion(T);h.ss=h.ss.insert(g,A)}}})}(i.localStore,s))})}function $k(n,e){return b(this,null,function*(){let t=Q(n);if(!t.currentUser.isEqual(e)){W("SyncEngine","User change. New user:",e.toKey());let i=yield p0(t.localStore,e);t.currentUser=e,function(s,o){s.Ba.forEach(a=>{a.forEach(c=>{c.reject(new z(M.CANCELLED,o))})}),s.Ba.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Zo(t,i.ls)}})}function Wk(n,e){let t=Q(n),i=t.Oa.get(e);if(i&&i.Da)return ie().add(i.key);{let r=ie(),s=t.Fa.get(e);if(!s)return r;for(let o of s){let a=t.va.get(o);r=r.unionWith(a.view.Ra)}return r}}function C0(n){let e=Q(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=E0.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Wk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bk.bind(null,e),e.Ca.E_=kk.bind(null,e.eventManager),e.Ca.Ka=Mk.bind(null,e.eventManager),e}function Gk(n){let e=Q(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zk.bind(null,e),e}var yl=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=Al(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return hk(this.persistence,new Ap,e.initialUser,this.serializer)}createPersistence(e){return new wp(Ep.Yr,this.serializer)}createSharedClientState(e){return new Rp}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Kp=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>xw(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=$k.bind(null,this.syncEngine),yield Rk(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Bp}()}createDatastore(e){let t=Al(e.databaseInfo.databaseId),i=function(s){return new kp(s)}(e.databaseInfo);return function(s,o,a,c){return new Np(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new Lp(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>xw(this.syncEngine,t,0),function(){return ll.D()?new ll:new Dp}())}createSyncEngine(e,t){return function(r,s,o,a,c,u,h){let f=new Gp(r,s,o,a,c,u);return h&&(f.qa=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e,t;yield function(r){return b(this,null,function*(){let s=Q(r);W("RemoteStore","RemoteStore shutting down."),s.N_.add(5),yield Jo(s),s.B_.shutdown(),s.k_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var Yp=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Rn("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var Qp=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=He.UNAUTHENTICATED,this.clientId=Yc.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>b(this,null,function*(){W("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(W("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new cn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=_g(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Tf(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),W("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>b(this,null,function*(){i.isEqual(r)||(yield p0(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function Dw(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield Kk(n);W("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>Sw(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Sw(e.remoteStore,r)),n._onlineComponents=e})}function Hk(n){return n.name==="FirebaseError"?n.code===M.FAILED_PRECONDITION||n.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function Kk(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){W("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Tf(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!Hk(t))throw t;qr("Error using user provided cache. Falling back to memory cache: "+t),yield Tf(n,new yl)}}else W("FirestoreClient","Using default OfflineComponentProvider"),yield Tf(n,new yl);return n._offlineComponents})}function x0(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(W("FirestoreClient","Using user provided OnlineComponentProvider"),yield Dw(n,n._uninitializedComponentsProvider._online)):(W("FirestoreClient","Using default OnlineComponentProvider"),yield Dw(n,new Kp))),n._onlineComponents})}function Yk(n){return x0(n).then(e=>e.syncEngine)}function Qk(n){return b(this,null,function*(){let e=yield x0(n),t=e.eventManager;return t.onListen=Ok.bind(null,e.syncEngine),t.onUnlisten=Lk.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=Nk.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=Fk.bind(null,e.syncEngine),t})}function Xk(n,e,t={}){let i=new cn;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,a,c,u){let h=new Yp({next:g=>{o.enqueueAndForget(()=>Pk(s,f)),g.fromCache&&c.source==="server"?u.reject(new z(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(g)},error:g=>u.reject(g)}),f=new zp(a,h,{includeMetadataChanges:!0,oa:!0});return Dk(s,f)}(yield Qk(n),n.asyncQueue,e,t,i)})),i.promise}function R0(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Pw=new Map;function D0(n,e,t){if(!t)throw new z(M.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Jk(n,e,t,i){if(e===!0&&i===!0)throw new z(M.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function kw(n){if(!H.isDocumentKey(n))throw new z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mw(n){if(H.isDocumentKey(n))throw new z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Rl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":K()}function _l(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Rl(n);throw new z(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var vl=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R0((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},es=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vl(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Sf;switch(i.type){case"firstParty":return new Rf(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=Pw.get(t);i&&(W("ComponentProvider","Removing Datastore"),Pw.delete(t),i.terminate())}(this),Promise.resolve()}};function Zk(n,e,t,i={}){var r;let s=(n=_l(n,es))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&qr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=He.MOCK_USER;else{a=rb(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let u=i.mockUserToken.sub||i.mockUserToken.user_id;if(!u)throw new z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new He(u)}n._authCredentials=new Af(new Kc(a,c))}}var ts=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Vt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},oi=class n extends ts{constructor(e,t,i){super(e,t,Ww(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Vt(this.firestore,null,new H(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function ui(n,e,...t){if(n=We(n),D0("collection","path",e),n instanceof es){let i=Ee.fromString(e,...t);return Mw(i),new oi(n,null,i)}{if(!(n instanceof Vt||n instanceof oi))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ee.fromString(e,...t));return Mw(i),new oi(n.firestore,null,i)}}function eM(n,e,...t){if(n=We(n),arguments.length===1&&(e=Yc.newId()),D0("doc","path",e),n instanceof es){let i=Ee.fromString(e,...t);return kw(i),new Vt(n,null,new H(i))}{if(!(n instanceof Vt||n instanceof oi))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ee.fromString(e,...t));return kw(i),new Vt(n.firestore,n instanceof oi?n.converter:null,new H(i))}}var Xp=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new ul(this,"async_queue_retry"),this.Tu=()=>{let t=Ef();t&&W("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};let e=Ef();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;let t=Ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});let t=new cn;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){return b(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!Xo(e))throw e;W("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(e){let t=this._u.then(()=>(this.hu=!0,e().catch(i=>{this.lu=i,this.hu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Rn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.hu=!1,i))));return this._u=t,t}enqueueAfterDelay(e,t,i){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);let r=Fp.createAndSchedule(this,e,t,i,s=>this.Ru(s));return this.cu.push(r),r}Eu(){this.lu&&K()}verifyOperationInProgress(){}Vu(){return b(this,null,function*(){let e;do e=this._u,yield e;while(e!==this._u)})}mu(e){for(let t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.cu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){let t=this.cu.indexOf(e);this.cu.splice(t,1)}};var qo=class extends es{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new Xp}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||M0(this),this._firestoreClient.terminate()}};function P0(n,e){let t=typeof n=="object"?n:Ni(),i=typeof n=="string"?n:e||"(default)",r=Wt(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=ib("firestore");s&&Zk(r,...s)}return r}function k0(n){return n._firestoreClient||M0(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function M0(n){var e,t,i;let r=n._freezeSettings(),s=function(a,c,u,h){return new Of(a,c,u,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,R0(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new Qp(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var $o=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(st.fromBase64String(e))}catch(t){throw new z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(st.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Wo=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var bl=class{constructor(e){this._methodName=e}};var Go=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return le(this._lat,e._lat)||le(this._long,e._long)}};var tM=/^__.*__$/,Jp=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new kn(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ki(e,this.data,t,this.fieldTransforms)}};function O0(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw K()}}var Zp=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.wu({path:i,bu:!1});return r.Du(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.wu({path:i,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return wl(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(O0(this.yu)&&tM.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}},eg=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Al(e)}Ou(e,t,i,r=!1){return new Zp({yu:e,methodName:t,xu:i,path:Dt.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function N0(n){let e=n._freezeSettings(),t=Al(n._databaseId);return new eg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nM(n,e,t,i,r,s={}){let o=n.Ou(s.merge||s.mergeFields?2:0,e,t,r);F0("Data must be an object, but it was:",o,i);let a=V0(i,o),c,u;if(s.merge)c=new an(o.fieldMask),u=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let f of s.mergeFields){let g=rM(e,f,t);if(!o.contains(g))throw new z(M.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);oM(h,g)||h.push(g)}c=new an(h),u=o.fieldTransforms.filter(f=>c.covers(f.field))}else c=null,u=o.fieldTransforms;return new Jp(new Gt(a),c,u)}function iM(n,e,t,i=!1){return wg(t,n.Ou(i?4:3,e))}function wg(n,e){if(L0(n=We(n)))return F0("Unsupported field value:",e,n),V0(n,e);if(n instanceof bl)return function(i,r){if(!O0(r.yu))throw r.Fu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=wg(a,r.vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=We(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return UP(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ze.fromDate(i);return{timestampValue:ol(r.serializer,s)}}if(i instanceof Ze){let s=new Ze(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:ol(r.serializer,s)}}if(i instanceof Go)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof $o)return{bytesValue:a0(r.serializer,i._byteString)};if(i instanceof Vt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:fg(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Fu(`Unsupported field value: ${Rl(i)}`)}(n,e)}function V0(n,e){let t={};return Lw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):is(n,(i,r)=>{let s=wg(r,e.Su(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function L0(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ze||n instanceof Go||n instanceof $o||n instanceof Vt||n instanceof bl)}function F0(n,e,t){if(!L0(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Rl(t);throw i==="an object"?e.Fu(n+" a custom object"):e.Fu(n+" "+i)}}function rM(n,e,t){if((e=We(e))instanceof Wo)return e._internalPath;if(typeof e=="string")return U0(n,e);throw wl("Field path arguments must be of type string or ",n,!1,void 0,t)}var sM=new RegExp("[~\\*/\\[\\]]");function U0(n,e,t){if(e.search(sM)>=0)throw wl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Wo(...e.split("."))._internalPath}catch{throw wl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function wl(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new z(M.INVALID_ARGUMENT,a+n+c)}function oM(n,e){return n.some(t=>t.isEqual(e))}var Il=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Vt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new tg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(Ig("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},tg=class extends Il{data(){return super.data()}};function Ig(n,e){return typeof e=="string"?U0(n,e):e instanceof Wo?e._internalPath:e._delegate._internalPath}function aM(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Ho=class{},ng=class extends Ho{};function ss(n,e,...t){let i=[];e instanceof Ho&&i.push(e),i=i.concat(t),function(s){let o=s.filter(c=>c instanceof Yo).length,a=s.filter(c=>c instanceof Ko).length;if(o>1||o>0&&a>0)throw new z(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var Ko=class n extends ng{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return j0(e._query,t),new ts(e.firestore,e.converter,Hf(e._query,t))}_parse(e){let t=N0(e.firestore);return function(s,o,a,c,u,h,f){let g;if(u.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new z(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){Nw(f,h);let m=[];for(let T of f)m.push(Ow(c,s,T));g={arrayValue:{values:m}}}else g=Ow(c,s,f)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||Nw(f,h),g=iM(a,o,f,h==="in"||h==="not-in");return Ne.create(u,h,g)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function ht(n,e,t){let i=e,r=Ig("where",n);return Ko._create(r,i,t)}var Yo=class n extends Ho{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Kt.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)j0(o,c),o=Hf(o,c)}(e._query,t),new ts(e.firestore,e.converter,Hf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function B0(...n){return n.forEach(e=>cM("and",e)),Yo._create("and",n)}function Ow(n,e,t){if(typeof(t=We(t))=="string"){if(t==="")throw new z(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gw(e)&&t.indexOf("/")!==-1)throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Ee.fromString(t));if(!H.isDocumentKey(i))throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return aw(n,new H(i))}if(t instanceof Vt)return aw(n,t._key);throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rl(t)}.`)}function Nw(n,e){if(!Array.isArray(n)||n.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function j0(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function cM(n,e){if(!(e instanceof Ko||e instanceof Yo))throw new z(M.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var ig=class{convertValue(e,t="none"){switch($i(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(ai(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw K()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return is(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Go(Ce(e.latitude),Ce(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=lg(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Lo(e));default:return null}}convertTimestamp(e){let t=Dn(e);return new Ze(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Ee.fromString(e);me(f0(i));let r=new Zc(i.get(1),i.get(3)),s=new H(i.popFirst(5));return r.isEqual(t)||Rn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function lM(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var Br=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},rg=class extends Il{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new zr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(Ig("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},zr=class extends rg{data(e={}){return super.data(e)}},sg=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Br(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new zr(this._firestore,this._userDataWriter,i.key,i,new Br(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new zr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Br(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new zr(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Br(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),u=-1,h=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:uM(a.type),doc:c,oldIndex:u,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function uM(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return K()}}var og=class extends ig{constructor(e){super(),this.firestore=e}convertBytes(e){return new $o(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Vt(this.firestore,null,t)}};function os(n){n=_l(n,ts);let e=_l(n.firestore,qo),t=k0(e),i=new og(e);return aM(n._query),Xk(t,n._query).then(r=>new sg(e,i,n,r))}function Eg(n,e){let t=_l(n.firestore,qo),i=eM(n),r=lM(n.converter,e);return hM(t,[nM(N0(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,ji.exists(!1))]).then(()=>i)}function hM(n,e){return function(i,r){let s=new cn;return i.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return Uk(yield Yk(i),r,s)})),s.promise}(k0(n),e)}(function(e,t=!0){(function(r){ns=r})(ri),mt(new Ge("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new qo(new Cf(i.getProvider("auth-internal")),new Pf(i.getProvider("app-check-internal")),function(u,h){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Zc(u.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Je(rw,"4.6.5",e),Je(rw,"4.6.5","esm2017")})();function nI(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var iI=nI,rI=new xt("auth","Firebase",nI());var Nl=new nn("@firebase/auth");function dM(n,...e){Nl.logLevel<=ne.WARN&&Nl.warn(`Auth (${ri}): ${n}`,...e)}function Pl(n,...e){Nl.logLevel<=ne.ERROR&&Nl.error(`Auth (${ri}): ${n}`,...e)}function pn(n,...e){throw jg(n,...e)}function Yt(n,...e){return jg(n,...e)}function Bg(n,e,t){let i=Object.assign(Object.assign({},iI()),{[e]:t});return new xt("auth","Firebase",i).create(e,{appName:n.name})}function Qi(n){return Bg(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function fM(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&pn(n,"argument-error"),Bg(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jg(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return rI.create(n,...e)}function Y(n,e,...t){if(!n)throw jg(e,...t)}function Mn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw Pl(e),new Error(e)}function Nn(n,e){n||Mn(e)}function Ag(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function pM(){return z0()==="http:"||z0()==="https:"}function z0(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function gM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(pM()||kc()||"connection"in navigator)?navigator.onLine:!0}function mM(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xi=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,Nn(t>e,"Short delay should be less than long delay!"),this.isMobile=sb()||ob()}get(){return gM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function zg(n,e){Nn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Vl=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var yM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var _M=new Xi(3e4,6e4);function qg(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function ls(s,o,a,c){return b(this,arguments,function*(n,e,t,i,r={}){return sI(n,r,()=>b(this,null,function*(){let u={},h={};i&&(e==="GET"?h=i:u={body:JSON.stringify(i)});let f=Or(Object.assign({key:n.config.apiKey},h)).slice(1),g=yield n._getAdditionalHeaders();return g["Content-Type"]="application/json",n.languageCode&&(g["X-Firebase-Locale"]=n.languageCode),Vl.fetch()(oI(n,n.config.apiHost,t,f),Object.assign({method:e,headers:g,referrerPolicy:"no-referrer"},u))}))})}function sI(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},yM),e);try{let r=new Cg(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Dl(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,u]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Dl(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Dl(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Dl(n,"user-disabled",o);let h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Bg(n,h,u);pn(n,h)}}catch(r){if(r instanceof Xe)throw r;pn(n,"network-request-failed",{message:String(r)})}})}function vM(s,o,a,c){return b(this,arguments,function*(n,e,t,i,r={}){let u=yield ls(n,e,t,i,r);return"mfaPendingCredential"in u&&pn(n,"multi-factor-auth-required",{_serverResponse:u}),u})}function oI(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?zg(n.config,r):`${n.config.apiScheme}://${r}`}var Cg=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Yt(this.auth,"network-request-failed")),_M.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Dl(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Yt(n,e,i);return r.customData._tokenResponse=t,r}function bM(n,e){return b(this,null,function*(){return ls(n,"POST","/v1/accounts:delete",e)})}function aI(n,e){return b(this,null,function*(){return ls(n,"POST","/v1/accounts:lookup",e)})}function ea(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function cI(n,e=!1){return b(this,null,function*(){let t=We(n),i=yield t.getIdToken(e),r=$g(i);Y(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:ea(Tg(r.auth_time)),issuedAtTime:ea(Tg(r.iat)),expirationTime:ea(Tg(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Tg(n){return Number(n)*1e3}function $g(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Pl("JWT malformed, contained fewer than 3 sections"),null;try{let r=Md(t);return r?JSON.parse(r):(Pl("Failed to decode base64 JWT payload"),null)}catch(r){return Pl("Caught error parsing JWT payload as JSON",r?.toString()),null}}function q0(n){let e=$g(n);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function na(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Xe&&wM(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function wM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var xg=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ia=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=ea(this.lastLoginAt),this.creationTime=ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ll(n){return b(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield na(n,aI(t,{idToken:i}));Y(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?uI(s.providerUserInfo):[],a=IM(n.providerData,o),c=n.isAnonymous,u=!(n.email&&s.passwordHash)&&!a?.length,h=c?u:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ia(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,f)})}function lI(n){return b(this,null,function*(){let e=We(n);yield Ll(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function IM(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function uI(n){return n.map(e=>{var{providerId:t}=e,i=Wa(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function EM(n,e){return b(this,null,function*(){let t=yield sI(n,{},()=>b(this,null,function*(){let i=Or({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=oI(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Vl.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function TM(n,e){return b(this,null,function*(){return ls(n,"POST","/v2/accounts:revokeToken",qg(n,e))})}var ta=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):q0(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Y(e.length!==0,"internal-error");let t=q0(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Y(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield EM(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(Y(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Y(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Mn("not implemented")}};function hi(n,e){Y(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var cs=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Wa(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ia(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield na(this,this.stsTokenManager.getToken(this.auth,e));return Y(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return cI(this,e)}reload(){return lI(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield Ll(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(sn(this.auth.app))return Promise.reject(Qi(this.auth));let e=yield this.getIdToken();return yield na(this,bM(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,u,h;let f=(i=t.displayName)!==null&&i!==void 0?i:void 0,g=(r=t.email)!==null&&r!==void 0?r:void 0,m=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,T=(o=t.photoURL)!==null&&o!==void 0?o:void 0,A=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,D=(u=t.createdAt)!==null&&u!==void 0?u:void 0,k=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:U,emailVerified:j,isAnonymous:N,providerData:V,stsTokenManager:E}=t;Y(U&&E,e,"internal-error");let _=ta.fromJSON(this.name,E);Y(typeof U=="string",e,"internal-error"),hi(f,e.name),hi(g,e.name),Y(typeof j=="boolean",e,"internal-error"),Y(typeof N=="boolean",e,"internal-error"),hi(m,e.name),hi(T,e.name),hi(A,e.name),hi(w,e.name),hi(D,e.name),hi(k,e.name);let v=new n({uid:U,auth:e,email:g,emailVerified:j,displayName:f,isAnonymous:N,photoURL:T,phoneNumber:m,tenantId:A,stsTokenManager:_,createdAt:D,lastLoginAt:k});return V&&Array.isArray(V)&&(v.providerData=V.map(S=>Object.assign({},S))),w&&(v._redirectEventId=w),v}static _fromIdTokenResponse(e,t,i=!1){return b(this,null,function*(){let r=new ta;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield Ll(s),s})}static _fromGetAccountInfoResponse(e,t,i){return b(this,null,function*(){let r=t.users[0];Y(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?uI(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new ta;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new ia(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,u),c})}};var $0=new Map;function On(n){Nn(n instanceof Function,"Expected a class definition");let e=$0.get(n);return e?(Nn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,$0.set(n,e),e)}var SM=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,i){return b(this,null,function*(){this.storage[t]=i})}_get(t){return b(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Rg=SM;function kl(n,e,t){return`firebase:${n}:${e}:${t}`}var Fl=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=kl(this.userKey,r.apiKey,s),this.fullPersistenceKey=kl("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?cs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return b(this,null,function*(){if(!t.length)return new n(On(Rg),e,i);let r=(yield Promise.all(t.map(u=>b(this,null,function*(){if(yield u._isAvailable())return u})))).filter(u=>u),s=r[0]||On(Rg),o=kl(i,e.config.apiKey,e.name),a=null;for(let u of t)try{let h=yield u._get(o);if(h){let f=cs._fromJSON(e,h);u!==s&&(a=f),s=u;break}}catch{}let c=r.filter(u=>u._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(u=>b(this,null,function*(){if(u!==s)try{yield u._remove(o)}catch{}}))),new n(s,e,i))})}};function W0(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(fI(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hI(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(gI(e))return"Blackberry";if(mI(e))return"Webos";if(Wg(e))return"Safari";if((e.includes("chrome/")||dI(e))&&!e.includes("edge/"))return"Chrome";if(pI(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function hI(n=Le()){return/firefox\//i.test(n)}function Wg(n=Le()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function dI(n=Le()){return/crios\//i.test(n)}function fI(n=Le()){return/iemobile/i.test(n)}function pI(n=Le()){return/android/i.test(n)}function gI(n=Le()){return/blackberry/i.test(n)}function mI(n=Le()){return/webos/i.test(n)}function Hl(n=Le()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function AM(n=Le()){var e;return Hl(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function CM(){return ab()&&document.documentMode===10}function yI(n=Le()){return Hl(n)||pI(n)||mI(n)||gI(n)||/windows phone/i.test(n)||fI(n)}function xM(){try{return!!(window&&window!==window.top)}catch{return!1}}function _I(n,e=[]){let t;switch(n){case"Browser":t=W0(Le());break;case"Worker":t=`${W0(Le())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ri}/${i}`}var Dg=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function RM(t){return b(this,arguments,function*(n,e={}){return ls(n,"GET","/v2/passwordPolicy",qg(n,e))})}var DM=6,Pg=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:DM,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var kg=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ul(this),this.idTokenSubscription=new Ul(this),this.beforeStateQueue=new Dg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=rI,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=On(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Fl.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield aI(this,{idToken:e}),i=yield cs._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(sn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield Ll(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=mM()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(sn(this.app))return Promise.reject(Qi(this));let t=e?We(e):null;return t&&Y(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return sn(this.app)?Promise.reject(Qi(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return sn(this.app)?Promise.reject(Qi(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(On(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield RM(this),t=new Pg(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new xt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield TM(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&On(e)||this._popupRedirectResolver;Y(t,this,"argument-error"),this.redirectPersistenceManager=yield Fl.create(this,[On(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_I(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&dM(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Kl(n){return We(n)}var Ul=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=hb(t=>this.observer=t)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Gg={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PM(n){Gg=n}function kM(n){return Gg.loadJS(n)}function MM(){return Gg.gapiScript}function vI(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function bI(n,e){let t=Wt(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Cn(s,e??{}))return r;pn(r,"already-initialized")}return t.initialize({options:e})}function OM(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(On);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function wI(n,e,t){let i=Kl(n);Y(i._canInitEmulator,i,"emulator-config-failed"),Y(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=II(e),{host:o,port:a}=NM(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||VM()}function II(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function NM(n){let e=II(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:G0(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:G0(o)}}}function G0(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function VM(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var ra=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Mn("not implemented")}_getIdTokenResponse(e){return Mn("not implemented")}_linkToIdToken(e,t){return Mn("not implemented")}_getReauthenticationResolver(e){return Mn("not implemented")}};function as(n,e){return b(this,null,function*(){return vM(n,"POST","/v1/accounts:signInWithIdp",qg(n,e))})}var LM="http://localhost",Bl=class n extends ra{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):pn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Wa(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return as(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,as(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,as(e,t)}buildRequest(){let e={requestUri:LM,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Or(t)}return e}};var sa=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var jl=class extends sa{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var Hg=(()=>{class n extends jl{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Bl._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var oa=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return b(this,null,function*(){let s=yield cs._fromIdTokenResponse(e,i,r),o=H0(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return b(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=H0(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function H0(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var Mg=class n extends Xe{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function EI(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Mg._fromErrorAndOperation(n,s,e,i):s})}function FM(n,e,t=!1){return b(this,null,function*(){let i=yield na(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return oa._forOperation(n,"link",i)})}function UM(n,e,t=!1){return b(this,null,function*(){let{auth:i}=n;if(sn(i.app))return Promise.reject(Qi(i));let r="reauthenticate";try{let s=yield na(n,EI(i,r,e,n),t);Y(s.idToken,i,"internal-error");let o=$g(s.idToken);Y(o,i,"internal-error");let{sub:a}=o;return Y(n.uid===a,i,"user-mismatch"),oa._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&pn(i,"user-mismatch"),s}})}function BM(n,e,t=!1){return b(this,null,function*(){if(sn(n.app))return Promise.reject(Qi(n));let i="signIn",r=yield EI(n,i,e),s=yield oa._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function TI(n,e,t,i){return We(n).onIdTokenChanged(e,t,i)}function SI(n,e,t){return We(n).beforeAuthStateChanged(e,t)}function Kg(n){return We(n).signOut()}var zl="__sak";var ql=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(zl,"1"),this.storage.removeItem(zl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function jM(){let n=Le();return Wg(n)||Hl(n)}var zM=1e3,qM=10,$M=(()=>{class n extends ql{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=jM()&&xM(),this.fallbackToPolling=yI(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,u)=>{this.notifyListeners(a,u)});return}let r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(t.newValue!==a)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);CM()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,qM):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},zM)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return b(this,null,function*(){yield Hn(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return b(this,null,function*(){let i=yield Hn(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return b(this,null,function*(){yield Hn(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),AI=$M;var WM=(()=>{class n extends ql{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),Yg=WM;function GM(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var HM=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(h=>b(this,null,function*(){return h(i.origin,o)})),u=yield GM(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Qg(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Og=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return b(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let u=Qg("",20);r.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){let g=f;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(g.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function fn(){return window}function KM(n){fn().location.href=n}function CI(){return typeof fn().WorkerGlobalScope<"u"&&typeof fn().importScripts=="function"}function YM(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function QM(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function XM(){return CI()?self:null}var xI="firebaseLocalStorageDb",JM=1,$l="firebaseLocalStorage",RI="fbase_key",Ji=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Yl(n,e){return n.transaction([$l],e?"readwrite":"readonly").objectStore($l)}function ZM(){let n=indexedDB.deleteDatabase(xI);return new Ji(n).toPromise()}function Ng(){let n=indexedDB.open(xI,JM);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore($l,{keyPath:RI})}catch(r){t(r)}}),n.addEventListener("success",()=>b(this,null,function*(){let i=n.result;i.objectStoreNames.contains($l)?e(i):(i.close(),yield ZM(),e(yield Ng()))}))})}function K0(n,e,t){return b(this,null,function*(){let i=Yl(n,!0).put({[RI]:e,value:t});return new Ji(i).toPromise()})}function eO(n,e){return b(this,null,function*(){let t=Yl(n,!1).get(e),i=yield new Ji(t).toPromise();return i===void 0?null:i.value})}function Y0(n,e){let t=Yl(n,!0).delete(e);return new Ji(t).toPromise()}var tO=800,nO=3,iO=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Ng(),this.db)})}_withRetries(t){return b(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>nO)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return CI()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=HM._getInstance(XM()),this.receiver._subscribe("keyChanged",(t,i)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,i;if(this.activeServiceWorker=yield YM(),!this.activeServiceWorker)return;this.sender=new Og(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||QM()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Ng();return yield K0(t,zl,"1"),yield Y0(t,zl),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>K0(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let i=yield this._withRetries(r=>eO(r,t));return this.localCache[t]=i,i})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>Y0(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let o=Yl(s,!1).getAll();return new Ji(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),tO)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),DI=iO;var NU=vI("rcb"),VU=new Xi(3e4,6e4);function PI(n,e){return e?On(e):(Y(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var aa=class extends ra{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return as(e,this._buildIdpRequest())}_linkToIdToken(e,t){return as(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return as(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function rO(n){return BM(n.auth,new aa(n),n.bypassAuthState)}function sO(n){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),UM(t,new aa(n),n.bypassAuthState)}function oO(n){return b(this,null,function*(){let{auth:e,user:t}=n;return Y(t,e,"internal-error"),FM(t,new aa(n),n.bypassAuthState)})}var Wl=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(u){this.reject(u)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return rO;case"linkViaPopup":case"linkViaRedirect":return oO;case"reauthViaPopup":case"reauthViaRedirect":return sO;default:pn(this.auth,"internal-error")}}resolve(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Nn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var aO=new Xi(2e3,1e4);function Xg(n,e,t){return b(this,null,function*(){if(sn(n.app))return Promise.reject(Yt(n,"operation-not-supported-in-this-environment"));let i=Kl(n);fM(n,e,sa);let r=PI(i,t);return new cO(i,"signInViaPopup",e,r).executeNotNull()})}var cO=(()=>{class n extends Wl{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return Y(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){Nn(this.filter.length===1,"Popup operations only handle one event");let t=Qg();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Yt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Yt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,aO.get())};t()}}n.currentPopupAction=null;return n})(),lO="pendingRedirect",Ml=new Map,Vg=class n extends Wl{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return b(this,null,function*(){let e=Ml.get(this.auth._key());if(!e){try{let i=(yield uO(this.resolver,this.auth))?yield Hn(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Ml.set(this.auth._key(),e)}return this.bypassAuthState||Ml.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return Hn(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,Hn(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function uO(n,e){return b(this,null,function*(){let t=fO(e),i=dO(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function hO(n,e){Ml.set(n._key(),e)}function dO(n){return On(n._redirectPersistence)}function fO(n){return kl(lO,n.config.apiKey,n.name)}function pO(n,e,t=!1){return b(this,null,function*(){if(sn(n.app))return Promise.reject(Qi(n));let i=Kl(n),r=PI(i,e),o=yield new Vg(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var gO=10*60*1e3,Lg=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!mO(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!kI(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Yt(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gO&&this.cachedEventUids.clear(),this.cachedEventUids.has(Q0(e))}saveEventToCache(e){this.cachedEventUids.add(Q0(e)),this.lastProcessedEventTime=Date.now()}};function Q0(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function kI({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function mO(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kI(n);default:return!1}}function yO(t){return b(this,arguments,function*(n,e={}){return ls(n,"GET","/v1/projects",e)})}var _O=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vO=/^https?/;function bO(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield yO(n);for(let t of e)try{if(wO(t))return}catch{}pn(n,"unauthorized-domain")})}function wO(n){let e=Ag(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!vO.test(t))return!1;if(_O.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var IO=new Xi(3e4,6e4);function X0(){let n=fn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function EO(n){return new Promise((e,t)=>{var i,r,s;function o(){X0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{X0(),t(Yt(n,"network-request-failed"))},timeout:IO.get()})}if(!((r=(i=fn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=fn().gapi)===null||s===void 0)&&s.load)o();else{let a=vI("iframefcb");return fn()[a]=()=>{gapi.load?o():t(Yt(n,"network-request-failed"))},kM(`${MM()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Ol=null,e})}var Ol=null;function TO(n){return Ol=Ol||EO(n),Ol}var SO=new Xi(5e3,15e3),AO="__/auth/iframe",CO="emulator/auth/iframe",xO={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RO=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DO(n){let e=n.config;Y(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?zg(e,CO):`https://${n.config.authDomain}/${AO}`,i={apiKey:e.apiKey,appName:n.name,v:ri},r=RO.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Or(i).slice(1)}`}function PO(n){return b(this,null,function*(){let e=yield TO(n),t=fn().gapi;return Y(t,n,"internal-error"),e.open({where:document.body,url:DO(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:xO,dontclear:!0},i=>new Promise((r,s)=>b(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Yt(n,"network-request-failed"),a=fn().setTimeout(()=>{s(o)},SO.get());function c(){fn().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var kO={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MO=500,OO=600,NO="_blank",VO="http://localhost",Gl=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function LO(n,e,t,i=MO,r=OO){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},kO),{width:i.toString(),height:r.toString(),top:s,left:o}),u=Le().toLowerCase();t&&(a=dI(u)?NO:t),hI(u)&&(e=e||VO,c.scrollbars="yes");let h=Object.entries(c).reduce((g,[m,T])=>`${g}${m}=${T},`,"");if(AM(u)&&a!=="_self")return FO(e||"",a),new Gl(null);let f=window.open(e||"",a,h);Y(f,n,"popup-blocked");try{f.focus()}catch{}return new Gl(f)}function FO(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var UO="__/auth/handler",BO="emulator/auth/handler",jO=encodeURIComponent("fac");function J0(n,e,t,i,r,s){return b(this,null,function*(){Y(n.config.authDomain,n,"auth-domain-config-required"),Y(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:ri,eventId:r};if(e instanceof sa){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ub(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,f]of Object.entries(s||{}))o[h]=f}if(e instanceof jl){let h=e.getScopes().filter(f=>f!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),u=c?`#${jO}=${encodeURIComponent(c)}`:"";return`${zO(n)}?${Or(a).slice(1)}${u}`})}function zO({config:n}){return n.emulator?zg(n,BO):`https://${n.authDomain}/${UO}`}var Sg="webStorageSupport",Fg=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Yg,this._completeRedirectFn=pO,this._overrideRedirectResult=hO}_openPopup(e,t,i,r){return b(this,null,function*(){var s;Nn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield J0(e,t,i,Ag(),r);return LO(e,o,Qg())})}_openRedirect(e,t,i,r){return b(this,null,function*(){yield this._originValidation(e);let s=yield J0(e,t,i,Ag(),r);return KM(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Nn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return b(this,null,function*(){let t=yield PO(e),i=new Lg(e);return t.register("authEvent",r=>(Y(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Sg,{type:Sg},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Sg];o!==void 0&&t(!!o),pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=bO(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return yI()||Wg()||Hl()}},MI=Fg;var Z0="@firebase/auth",eI="1.7.6";var Ug=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function qO(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function $O(n){mt(new Ge("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_I(n)},u=new kg(i,r,s,c);return OM(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),mt(new Ge("auth-internal",e=>{let t=Kl(e.getProvider("auth").getImmediate());return(i=>new Ug(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Je(Z0,eI,qO(n)),Je(Z0,eI,"esm2017")}var WO=5*60,GO=Vd("authIdTokenMaxAge")||WO,tI=null,HO=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>GO)return;let r=t?.token;tI!==r&&(tI=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function Jg(n=Ni()){let e=Wt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=bI(n,{popupRedirectResolver:MI,persistence:[DI,AI,Yg]}),i=Vd("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=HO(s.toString());SI(t,o,()=>o(t.currentUser)),TI(t,a=>o(a))}}let r=Od("auth");return r&&wI(t,`http://${r}`),t}function KO(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}PM({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Yt("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",KO().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});$O("Browser");var YO={apiKey:"AIzaSyBuS1gDyDbKr5is5s-hytKtVzEj6C8yFEo",authDomain:"r210-840cd.firebaseapp.com",databaseURL:"https://r210-840cd-default-rtdb.firebaseio.com",projectId:"r210-840cd",storageBucket:"r210-840cd.appspot.com",messagingSenderId:"707797710533",appId:"1:707797710533:web:0e4158a28a89476e40e2ac",measurementId:"G-6HDH51CCC0"},VI=Jd(YO),uj=tw(VI),Ql=P0(VI),QO=new Hg,Zg=Jg(),OI="LaserPower",NI="LaserPowerPermission";Zg.languageCode="it";var us=(()=>{let e=class e{constructor(){this._user=null,this._loginInfo={user:null,permissions:null},this.is_loading=!1,this.FireBaseKeyName=OI,console.log("new FirebaseAccessService")}get_db(){return Ql}get_user(){return this._user}get_loginInfo(){return this._loginInfo}set_loginInfo(i){this._loginInfo=i}getNewPermission(){return{email:"",desc:"",isAdministrator:0}}getNewPowerData(){return{id:null,basepower:null,workpower:null,workStructure:null,beamExpander:null,lens:null,slit:null,doe:null,wavePlate:null,lambda:null,atDate:null,brandKey:"",brandvalue0_Laser:null,brandvalue1_rate:null,brandvalue2_atten:null,email:null,displayname:null}}addData(i){return b(this,null,function*(){try{let r=yield Eg(ui(Ql,OI),{basepower:i.basepower,workpower:i.workpower,workStructure:i.workStructure,beamExpander:i.beamExpander,lens:i.lens,slit:i.slit,doe:i.doe,wavePlate:i.wavePlate,lambda:i.lambda,atDate:i.atDate,brandKey:i.brandKey,brandvalue0_Laser:i.brandvalue0_Laser,brandvalue1_rate:i.brandvalue1_rate,brandvalue2_atten:i.brandvalue2_atten,email:i.email,displayname:i.displayname});console.log("Document written with ID: ",r.id)}catch(r){console.error("Error adding document: ",r)}})}auth(){return b(this,null,function*(){return Xg(Zg,QO)})}signOut(){return b(this,null,function*(){console.log("signOut"),yield Kg(Zg),console.log("done")})}setPermission(i){return b(this,null,function*(){this.is_loading=!0;try{let r=yield Eg(ui(Ql,NI),{email:i.email,desc:i.desc,isAdministrator:i.isAdministrator})}catch{}finally{this.is_loading=!1}})}getPermission(i){return b(this,null,function*(){let r=ss(ui(Ql,NI),ht("email","==",i)),s=yield os(r),o=null;return s.forEach(a=>{o={email:a.data().email,desc:a.data().desc,isAdministrator:a.data().isAdministrator}}),this._loginInfo.permissions=o,o})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var fj=(()=>{let e=class e{constructor(i){this.user=null,this.fire=i,this.perm_data=this.fire.getNewPermission()}ngOnInit(){this.user=this.fire.get_loginInfo(),this.perm_data.email=this.user?.user?.user.email??""}onSubmit(){console.log(this.perm_data),this.fire.setPermission(this.perm_data).then(i=>{console.log(i)}),this.fire.getPermission(this.perm_data.email).then(i=>{console.log(i)})}};e.\u0275fac=function(r){return new(r||e)(de(us))},e.\u0275cmp=Xt({type:e,selectors:[["app-regist"]],standalone:!0,features:[Zt],decls:12,vars:2,consts:[["form","ngForm"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"col-md-4"],["for","desc",1,"form-label"],["type","text","id","desc","name","desc",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"col-auto"],["id","detail",1,"form-text"],[1,"row","g-3"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"]],template:function(r,s){if(r&1){let o=Hs();L(0,"form",1,0),$e("ngSubmit",function(){return De(o),Pe(s.onSubmit())}),L(2,"div",2)(3,"label",3),$(4,"\u5DE5\u865F\u6216\u540D\u7A31"),F(),L(5,"input",4),gt("ngModelChange",function(c){return De(o),pt(s.perm_data.desc,c)||(s.perm_data.desc=c),Pe(c)}),F(),L(6,"div",5)(7,"span",6),$(8," \u8ACB\u5DE5\u865F\u6216\u540D\u7A31\u4EE5\u8A3B\u518A,\u82E5\u7121\u5DE5\u865F\u8ACB\u8F38\u5165\u8DB3\u4F9B\u7BA1\u7406\u8005\u8FA8\u8B58\u7684\u540D\u7A31 "),F()()(),L(9,"div",7)(10,"button",8),$(11,"\u78BA\u8A8D\u9001\u51FA"),F()()()}r&2&&(q(5),ft("ngModel",s.perm_data.desc),J("placeholder",s.user==null||s.user.user==null||s.user.user.user==null?null:s.user.user.user.displayName))},dependencies:[Rc,Cc,Mr,Tc,Sc,To,Eo]});let n=e;return n})();function JO(n,e){n&1&&(L(0,"th",2),$(1,"\u5DE5\u4F5C\u7D50\u69CB"),F())}function ZO(n,e){n&1&&(L(0,"th",2),$(1,"\u54C1\u724C"),F())}function eN(n,e){n&1&&(L(0,"th",2),$(1,"doe"),F())}function tN(n,e){n&1&&(L(0,"th",2),$(1,"\u93E1\u7D44"),F())}function nN(n,e){n&1&&(L(0,"th",2),$(1,"\u72F9\u7E2B"),F())}function iN(n,e){n&1&&(L(0,"th",2),$(1,"wave plate"),F())}function rN(n,e){n&1&&(L(0,"th",2),$(1,"\u8A18\u9304\u4EBA"),F())}function sN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.workStructure)}}function oN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.brandKey)}}function aN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.doe)}}function cN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.lens)}}function lN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.slit)}}function uN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.wavePlate)}}function hN(n,e){if(n&1&&(L(0,"td"),$(1),F()),n&2){let t=Tt().$implicit;q(),St(t.displayname)}}function dN(n,e){if(n&1&&(L(0,"tr")(1,"th",6),$(2),F(),L(3,"td"),$(4),F(),L(5,"td"),$(6),F(),L(7,"td"),$(8),F(),L(9,"td"),$(10),I_(11,"number"),F(),L(12,"td"),$(13),F(),ut(14,sN,2,1,"td",7)(15,oN,2,1,"td",7)(16,aN,2,1,"td",7)(17,cN,2,1,"td",7)(18,lN,2,1,"td",7)(19,uN,2,1,"td",7)(20,hN,2,1,"td",7),F()),n&2){let t=e.$implicit,i=e.index,r=Tt();q(2),St(i),q(2),St(t.atDate),q(2),St(t.basepower),q(2),St(t.workpower),q(2),qt(" ",E_(11,13,t.basepower*100/t.workpower,"1.2-2")," "),q(3),St(t.lambda),q(),J("ngIf",!r.isNarrow),q(),J("ngIf",!r.isNarrow),q(),J("ngIf",!r.isNarrow),q(),J("ngIf",!r.isNarrow),q(),J("ngIf",!r.isNarrow),q(),J("ngIf",!r.isNarrow),q(),J("ngIf",!r.isNarrow)}}var LI=1190,FI=(()=>{let e=class e{constructor(){this.source=[],this.isNarrow=!1}ngOnInit(){this.isNarrow=window.innerWidth<LI}onResize(i){this.isNarrow=i.target.innerWidth<LI}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Xt({type:e,selectors:[["app-result-table"]],hostBindings:function(r,s){r&1&&$e("resize",function(a){return s.onResize(a)},!1,p_)},inputs:{source:"source"},standalone:!0,features:[Zt],decls:25,vars:8,consts:[[1,"div-container"],[1,"table"],["scope","col"],["scope","col",4,"ngIf"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["scope","row"],[4,"ngIf"]],template:function(r,s){r&1&&(L(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),$(5,"\uFF03"),F(),L(6,"th",2),$(7,"\u65E5\u671F"),F(),L(8,"th",2),$(9,"[\u57FA]\u529F\u7387(W)"),F(),L(10,"th",2),$(11,"[\u5DE5]\u529F\u73872(W)"),F(),L(12,"th",2),$(13,"\u7A7F\u900F\u7387(%)"),F(),L(14,"th",2),$(15,"\u6CE2\u9577(nm)"),F(),ut(16,JO,2,0,"th",3)(17,ZO,2,0,"th",3)(18,eN,2,0,"th",3)(19,tN,2,0,"th",3)(20,nN,2,0,"th",3)(21,iN,2,0,"th",3)(22,rN,2,0,"th",3),F()(),L(23,"tbody",4),ut(24,dN,21,16,"tr",5),F()()()),r&2&&(q(16),J("ngIf",!s.isNarrow),q(),J("ngIf",!s.isNarrow),q(),J("ngIf",!s.isNarrow),q(),J("ngIf",!s.isNarrow),q(),J("ngIf",!s.isNarrow),q(),J("ngIf",!s.isNarrow),q(),J("ngIf",!s.isNarrow),q(2),J("ngForOf",s.source))},dependencies:[Ys,Qa,Xa,D_],styles:[".div-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]});let n=e;return n})();function ua(n){return n+.5|0}var di=(n,e,t)=>Math.max(Math.min(n,t),e);function ca(n){return di(ua(n*2.55),0,255)}function fi(n){return di(ua(n*255),0,255)}function Vn(n){return di(ua(n/2.55)/100,0,1)}function UI(n){return di(ua(n*100),0,100)}var Lt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nm=[..."0123456789ABCDEF"],fN=n=>nm[n&15],pN=n=>nm[(n&240)>>4]+nm[n&15],Xl=n=>(n&240)>>4===(n&15),gN=n=>Xl(n.r)&&Xl(n.g)&&Xl(n.b)&&Xl(n.a);function mN(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Lt[n[1]]*17,g:255&Lt[n[2]]*17,b:255&Lt[n[3]]*17,a:e===5?Lt[n[4]]*17:255}:(e===7||e===9)&&(t={r:Lt[n[1]]<<4|Lt[n[2]],g:Lt[n[3]]<<4|Lt[n[4]],b:Lt[n[5]]<<4|Lt[n[6]],a:e===9?Lt[n[7]]<<4|Lt[n[8]]:255})),t}var yN=(n,e)=>n<255?e(n):"";function _N(n){var e=gN(n)?fN:pN;return n?"#"+e(n.r)+e(n.g)+e(n.b)+yN(n.a,e):void 0}var vN=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function qI(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function bN(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function wN(n,e,t){let i=qI(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function IN(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function im(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,u,h;return s!==o&&(h=s-o,u=a>.5?h/(2-s-o):h/(s+o),c=IN(t,i,r,h,s),c=c*60+.5),[c|0,u||0,a]}function rm(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(fi)}function sm(n,e,t){return rm(qI,n,e,t)}function EN(n,e,t){return rm(wN,n,e,t)}function TN(n,e,t){return rm(bN,n,e,t)}function $I(n){return(n%360+360)%360}function SN(n){let e=vN.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?ca(+e[5]):fi(+e[5]));let r=$I(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=EN(r,s,o):e[1]==="hsv"?i=TN(r,s,o):i=sm(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function AN(n,e){var t=im(n);t[0]=$I(t[0]+e),t=sm(t),n.r=t[0],n.g=t[1],n.b=t[2]}function CN(n){if(!n)return;let e=im(n),t=e[0],i=UI(e[1]),r=UI(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${Vn(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var BI={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},jI={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xN(){let n={},e=Object.keys(jI),t=Object.keys(BI),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,BI[s]);s=parseInt(jI[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Jl;function RN(n){Jl||(Jl=xN(),Jl.transparent=[0,0,0,0]);let e=Jl[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var DN=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function PN(n){let e=DN.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?ca(o):di(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?ca(i):di(i,0,255)),r=255&(e[4]?ca(r):di(r,0,255)),s=255&(e[6]?ca(s):di(s,0,255)),{r:i,g:r,b:s,a:t}}}function kN(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Vn(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var tm=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,hs=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function MN(n,e,t){let i=hs(Vn(n.r)),r=hs(Vn(n.g)),s=hs(Vn(n.b));return{r:fi(tm(i+t*(hs(Vn(e.r))-i))),g:fi(tm(r+t*(hs(Vn(e.g))-r))),b:fi(tm(s+t*(hs(Vn(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Zl(n,e,t){if(n){let i=im(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=sm(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function WI(n,e){return n&&Object.assign(e||{},n)}function zI(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=fi(n[3]))):(e=WI(n,{r:0,g:0,b:0,a:1}),e.a=fi(e.a)),e}function ON(n){return n.charAt(0)==="r"?PN(n):SN(n)}var la=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=zI(e):t==="string"&&(i=mN(e)||RN(e)||ON(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=WI(this._rgb);return e&&(e.a=Vn(e.a)),e}set rgb(e){this._rgb=zI(e)}rgbString(){return this._valid?kN(this._rgb):void 0}hexString(){return this._valid?_N(this._rgb):void 0}hslString(){return this._valid?CN(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,u=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-u,i.r=255&u*i.r+s*r.r+.5,i.g=255&u*i.g+s*r.g+.5,i.b=255&u*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=MN(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=fi(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=ua(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Zl(this._rgb,2,e),this}darken(e){return Zl(this._rgb,2,-e),this}saturate(e){return Zl(this._rgb,1,e),this}desaturate(e){return Zl(this._rgb,1,-e),this}rotate(e){return AN(this._rgb,e),this}};function mn(){}var nE=(()=>{let n=0;return()=>n++})();function _e(n){return n===null||typeof n>"u"}function Ie(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ae(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Fe(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function vt(n,e){return Fe(n)?n:e}function fe(n,e){return typeof n>"u"?e:n}var iE=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Te(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function he(n,e,t,i){let r,s,o;if(Ie(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(ae(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function fa(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function iu(n){if(Ie(n))return n.map(iu);if(ae(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=iu(n[t[r]]);return e}return n}function rE(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function NN(n,e,t,i){if(!rE(n))return;let r=e[n],s=t[n];ae(r)&&ae(s)?fs(r,s,i):e[n]=iu(s)}function fs(n,e,t){let i=Ie(e)?e:[e],r=i.length;if(!ae(n))return n;t=t||{};let s=t.merger||NN,o;for(let a=0;a<r;++a){if(o=i[a],!ae(o))continue;let c=Object.keys(o);for(let u=0,h=c.length;u<h;++u)s(c[u],n,o,t)}return n}function gs(n,e){return fs(n,e,{merger:VN})}function VN(n,e,t){if(!rE(n))return;let i=e[n],r=t[n];ae(i)&&ae(r)?gs(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=iu(r))}var GI={"":n=>n,x:n=>n.x,y:n=>n.y};function LN(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function FN(n){let e=LN(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function pa(n,e){return(GI[e]||(GI[e]=FN(e)))(n)}function au(n){return n.charAt(0).toUpperCase()+n.slice(1)}var ga=n=>typeof n<"u",Ln=n=>typeof n=="function",lm=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function sE(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var ke=Math.PI,Pt=2*ke,UN=Pt+ke,ru=Number.POSITIVE_INFINITY,BN=ke/180,_t=ke/2,Zi=ke/4,HI=ke*2/3,Fn=Math.log10,tr=Math.sign;function ms(n,e,t){return Math.abs(n-e)<t}function um(n){let e=Math.round(n);n=ms(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(Fn(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function oE(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function ys(n){return!isNaN(parseFloat(n))&&isFinite(n)}function aE(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function hm(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Un(n){return n*(ke/180)}function cu(n){return n*(180/ke)}function dm(n){if(!Fe(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function cE(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*ke&&(s+=Pt),{angle:s,distance:r}}function su(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function jN(n,e){return(n-e+UN)%Pt-ke}function Ft(n){return(n%Pt+Pt)%Pt}function fm(n,e,t,i){let r=Ft(n),s=Ft(e),o=Ft(t),a=Ft(s-r),c=Ft(o-r),u=Ft(r-s),h=Ft(r-o);return r===s||r===o||i&&s===o||a>c&&u<h}function kt(n,e,t){return Math.max(e,Math.min(t,n))}function lE(n){return kt(n,-32768,32767)}function uE(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function lu(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var gi=(n,e,t,i)=>lu(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),hE=(n,e,t)=>lu(n,t,i=>n[i][e]>=t);function dE(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var fE=["push","pop","shift","splice","unshift"];function pE(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),fE.forEach(t=>{let i="_onData"+au(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function pm(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(fE.forEach(s=>{delete n[s]}),delete n._chartjs)}function gE(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var gm=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function mm(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,gm.call(window,()=>{i=!1,n.apply(e,t)}))}}function mE(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var ym=n=>n==="start"?"left":n==="end"?"right":"center",_s=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2;function yE(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,_parsed:a}=n,c=o.axis,{min:u,max:h,minDefined:f,maxDefined:g}=o.getUserBounds();f&&(r=kt(Math.min(gi(a,c,u).lo,t?i:gi(e,c,o.getPixelForValue(u)).lo),0,i-1)),g?s=kt(Math.max(gi(a,o.axis,h,!0).hi+1,t?0:gi(e,c,o.getPixelForValue(h),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function _E(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var eu=n=>n===0||n===1,KI=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Pt/t)),YI=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Pt/t)+1,ds={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*_t)+1,easeOutSine:n=>Math.sin(n*_t),easeInOutSine:n=>-.5*(Math.cos(ke*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>eu(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>eu(n)?n:KI(n,.075,.3),easeOutElastic:n=>eu(n)?n:YI(n,.075,.3),easeInOutElastic(n){return eu(n)?n:n<.5?.5*KI(n*2,.1125,.45):.5+.5*YI(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-ds.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?ds.easeInBounce(n*2)*.5:ds.easeOutBounce(n*2-1)*.5+.5};function _m(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function vm(n){return _m(n)?n:new la(n)}function om(n){return _m(n)?n:new la(n).saturate(.5).darken(.1).hexString()}var zN=["x","y","borderWidth","radius","tension"],qN=["color","borderColor","backgroundColor"];function $N(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:qN},numbers:{type:"number",properties:zN}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function WN(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var QI=new Map;function GN(n,e){e=e||{};let t=n+JSON.stringify(e),i=QI.get(t);return i||(i=new Intl.NumberFormat(n,e),QI.set(t,i)),i}function uu(n,e,t){return GN(e,t).format(n)}var vE={values(n){return Ie(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let u=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(u<1e-4||u>1e15)&&(r="scientific"),s=HN(n,t)}let o=Fn(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),uu(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(Fn(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?vE.numeric.call(this,n,e,t):""}};function HN(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ma={formatters:vE};function KN(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ma.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var mi=Object.create(null),hu=Object.create(null);function ha(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function am(n,e,t){return typeof e=="string"?fs(ha(n,e),t):fs(ha(n,""),e)}var cm=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>om(r.backgroundColor),this.hoverBorderColor=(i,r)=>om(r.borderColor),this.hoverColor=(i,r)=>om(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return am(this,e,t)}get(e){return ha(this,e)}describe(e,t){return am(hu,e,t)}override(e,t){return am(mi,e,t)}route(e,t,i,r){let s=ha(this,e),o=ha(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],u=o[r];return ae(c)?Object.assign({},u,c):fe(c,u)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Re=new cm({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$N,WN,KN]);function YN(n){return!n||_e(n.size)||_e(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function da(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function bE(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,u,h,f,g;for(c=0;c<a;c++)if(f=t[c],f!=null&&!Ie(f))o=da(n,r,s,o,f);else if(Ie(f))for(u=0,h=f.length;u<h;u++)g=f[u],g!=null&&!Ie(g)&&(o=da(n,r,s,o,g));n.restore();let m=s.length/2;if(m>t.length){for(c=0;c<m;c++)delete r[s[c]];s.splice(0,m)}return o}function yi(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function bm(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function du(n,e,t,i){wE(n,e,t,i,null)}function wE(n,e,t,i,r){let s,o,a,c,u,h,f,g,m=e.pointStyle,T=e.rotation,A=e.radius,w=(T||0)*BN;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(w),n.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),n.restore();return}if(!(isNaN(A)||A<=0)){switch(n.beginPath(),m){default:r?n.ellipse(t,i,r/2,A,0,0,Pt):n.arc(t,i,A,0,Pt),n.closePath();break;case"triangle":h=r?r/2:A,n.moveTo(t+Math.sin(w)*h,i-Math.cos(w)*A),w+=HI,n.lineTo(t+Math.sin(w)*h,i-Math.cos(w)*A),w+=HI,n.lineTo(t+Math.sin(w)*h,i-Math.cos(w)*A),n.closePath();break;case"rectRounded":u=A*.516,c=A-u,o=Math.cos(w+Zi)*c,f=Math.cos(w+Zi)*(r?r/2-u:c),a=Math.sin(w+Zi)*c,g=Math.sin(w+Zi)*(r?r/2-u:c),n.arc(t-f,i-a,u,w-ke,w-_t),n.arc(t+g,i-o,u,w-_t,w),n.arc(t+f,i+a,u,w,w+_t),n.arc(t-g,i+o,u,w+_t,w+ke),n.closePath();break;case"rect":if(!T){c=Math.SQRT1_2*A,h=r?r/2:c,n.rect(t-h,i-c,2*h,2*c);break}w+=Zi;case"rectRot":f=Math.cos(w)*(r?r/2:A),o=Math.cos(w)*A,a=Math.sin(w)*A,g=Math.sin(w)*(r?r/2:A),n.moveTo(t-f,i-a),n.lineTo(t+g,i-o),n.lineTo(t+f,i+a),n.lineTo(t-g,i+o),n.closePath();break;case"crossRot":w+=Zi;case"cross":f=Math.cos(w)*(r?r/2:A),o=Math.cos(w)*A,a=Math.sin(w)*A,g=Math.sin(w)*(r?r/2:A),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+g,i-o),n.lineTo(t-g,i+o);break;case"star":f=Math.cos(w)*(r?r/2:A),o=Math.cos(w)*A,a=Math.sin(w)*A,g=Math.sin(w)*(r?r/2:A),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+g,i-o),n.lineTo(t-g,i+o),w+=Zi,f=Math.cos(w)*(r?r/2:A),o=Math.cos(w)*A,a=Math.sin(w)*A,g=Math.sin(w)*(r?r/2:A),n.moveTo(t-f,i-a),n.lineTo(t+f,i+a),n.moveTo(t+g,i-o),n.lineTo(t-g,i+o);break;case"line":o=r?r/2:Math.cos(w)*A,a=Math.sin(w)*A,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(w)*(r?r/2:A),i+Math.sin(w)*A);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function gn(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function wm(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function Im(n){n.restore()}function IE(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function EE(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function QN(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),_e(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function XN(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,u=t+s.actualBoundingBoxDescent,h=r.strikethrough?(c+u)/2:u;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function JN(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function vs(n,e,t,i,r,s={}){let o=Ie(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,u;for(n.save(),n.font=r.string,QN(n,s),c=0;c<o.length;++c)u=o[c],s.backdrop&&JN(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),_e(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(u,t,i,s.maxWidth)),n.fillText(u,t,i,s.maxWidth),XN(n,t,i,u,s),i+=Number(r.lineHeight);n.restore()}function fu(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*ke,ke,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ke,_t,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,_t,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-_t,!0),n.lineTo(t+o.topLeft,i)}var ZN=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,e1=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function t1(n,e){let t=(""+n).match(ZN);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var n1=n=>+n||0;function Em(n,e){let t={},i=ae(e),r=i?Object.keys(e):e,s=ae(n)?i?o=>fe(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=n1(s(o));return t}function TE(n){return Em(n,{top:"y",right:"x",bottom:"y",left:"x"})}function bs(n){return Em(n,["topLeft","topRight","bottomLeft","bottomRight"])}function bt(n){let e=TE(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function ot(n,e){n=n||{},e=e||Re.font;let t=fe(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=fe(n.style,e.style);i&&!(""+i).match(e1)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:fe(n.family,e.family),lineHeight:t1(fe(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:fe(n.weight,e.weight),string:""};return r.string=YN(r),r}function ya(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&Ie(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function SE(n,e,t){let{min:i,max:r}=n,s=iE(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Bn(n,e){return Object.assign(Object.create(n),e)}function pu(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=xE("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>pu([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return AE(a,c,()=>u1(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return JI(a).includes(c)},ownKeys(a){return JI(a)},set(a,c,u){let h=a._storage||(a._storage=r());return a[c]=h[c]=u,delete a._keys,!0}})}function nr(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:Tm(n,i),setContext:s=>nr(n,s,t,i),override:s=>nr(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return AE(s,o,()=>r1(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function Tm(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:Ln(t)?t:()=>t,isIndexable:Ln(i)?i:()=>i}}var i1=(n,e)=>n?n+au(e):e,Sm=(n,e)=>ae(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function AE(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function r1(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return Ln(a)&&o.isScriptable(e)&&(a=s1(e,a,n,t)),Ie(a)&&a.length&&(a=o1(e,a,n,o.isIndexable)),Sm(e,a)&&(a=nr(a,r,s&&s[e],o)),a}function s1(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),Sm(n,c)&&(c=Am(r._scopes,r,n,c)),c}function o1(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(ae(e[0])){let c=e,u=r._scopes.filter(h=>h!==c);e=[];for(let h of c){let f=Am(u,r,n,h);e.push(nr(f,s,o&&o[n],a))}}return e}function CE(n,e,t){return Ln(n)?n(e,t):n}var a1=(n,e)=>n===!0?e:typeof n=="string"?pa(e,n):void 0;function c1(n,e,t,i,r){for(let s of e){let o=a1(t,s);if(o){n.add(o);let a=CE(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function Am(n,e,t,i){let r=e._rootScopes,s=CE(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=XI(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=XI(a,o,s,c,i),c===null)?!1:pu(Array.from(a),[""],r,s,()=>l1(e,t,i))}function XI(n,e,t,i,r){for(;t;)t=c1(n,e,t,i,r);return t}function l1(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return Ie(r)&&ae(t)?t:r||{}}function u1(n,e,t,i){let r;for(let s of e)if(r=xE(i1(s,n),t),typeof r<"u")return Sm(n,r)?Am(t,i,n,r):r}function xE(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function JI(n){let e=n._keys;return e||(e=n._keys=h1(n._scopes)),e}function h1(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}var d1=Number.EPSILON||1e-14,ps=(n,e)=>e<n.length&&!n[e].skip&&n[e],RE=n=>n==="x"?"y":"x";function f1(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=su(s,r),c=su(o,s),u=a/(a+c),h=c/(a+c);u=isNaN(u)?0:u,h=isNaN(h)?0:h;let f=i*u,g=i*h;return{previous:{x:s.x-f*(o.x-r.x),y:s.y-f*(o.y-r.y)},next:{x:s.x+g*(o.x-r.x),y:s.y+g*(o.y-r.y)}}}function p1(n,e,t){let i=n.length,r,s,o,a,c,u=ps(n,0);for(let h=0;h<i-1;++h)if(c=u,u=ps(n,h+1),!(!c||!u)){if(ms(e[h],0,d1)){t[h]=t[h+1]=0;continue}r=t[h]/e[h],s=t[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=r*o*e[h],t[h+1]=s*o*e[h])}}function g1(n,e,t="x"){let i=RE(t),r=n.length,s,o,a,c=ps(n,0);for(let u=0;u<r;++u){if(o=a,a=c,c=ps(n,u+1),!a)continue;let h=a[t],f=a[i];o&&(s=(h-o[t])/3,a[`cp1${t}`]=h-s,a[`cp1${i}`]=f-s*e[u]),c&&(s=(c[t]-h)/3,a[`cp2${t}`]=h+s,a[`cp2${i}`]=f+s*e[u])}}function m1(n,e="x"){let t=RE(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,u=ps(n,0);for(o=0;o<i;++o)if(a=c,c=u,u=ps(n,o+1),!!c){if(u){let h=u[e]-c[e];r[o]=h!==0?(u[t]-c[t])/h:0}s[o]=a?u?tr(r[o-1])!==tr(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}p1(n,r,s),g1(n,s,e)}function tu(n,e,t){return Math.max(Math.min(n,t),e)}function y1(n,e){let t,i,r,s,o,a=gn(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&gn(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=tu(r.cp1x,e.left,e.right),r.cp1y=tu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=tu(r.cp2x,e.left,e.right),r.cp2y=tu(r.cp2y,e.top,e.bottom)))}function DE(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(u=>!u.skip)),e.cubicInterpolationMode==="monotone")m1(n,r);else{let u=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=f1(u,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,u=a}e.capBezierPoints&&y1(n,t)}function gu(){return typeof window<"u"&&typeof document<"u"}function mu(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function ou(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var yu=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function _1(n,e){return yu(n).getPropertyValue(e)}var v1=["top","right","bottom","left"];function er(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=v1[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var b1=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function w1(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(b1(r,s,n.target))a=r,c=s;else{let u=e.getBoundingClientRect();a=i.clientX-u.left,c=i.clientY-u.top,o=!0}return{x:a,y:c,box:o}}function _i(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=yu(t),s=r.boxSizing==="border-box",o=er(r,"padding"),a=er(r,"border","width"),{x:c,y:u,box:h}=w1(n,t),f=o.left+(h&&a.left),g=o.top+(h&&a.top),{width:m,height:T}=e;return s&&(m-=o.width+a.width,T-=o.height+a.height),{x:Math.round((c-f)/m*t.width/i),y:Math.round((u-g)/T*t.height/i)}}function I1(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&mu(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=yu(s),c=er(a,"border","width"),u=er(a,"padding");e=o.width-u.width-c.width,t=o.height-u.height-c.height,i=ou(a.maxWidth,s,"clientWidth"),r=ou(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||ru,maxHeight:r||ru}}var nu=n=>Math.round(n*10)/10;function PE(n,e,t,i){let r=yu(n),s=er(r,"margin"),o=ou(r.maxWidth,n,"clientWidth")||ru,a=ou(r.maxHeight,n,"clientHeight")||ru,c=I1(n,e,t),{width:u,height:h}=c;if(r.boxSizing==="content-box"){let g=er(r,"border","width"),m=er(r,"padding");u-=m.width+g.width,h-=m.height+g.height}return u=Math.max(0,u-s.width),h=Math.max(0,i?u/i:h-s.height),u=nu(Math.min(u,o,c.maxWidth)),h=nu(Math.min(h,a,c.maxHeight)),u&&!h&&(h=nu(u/2)),(e!==void 0||t!==void 0)&&i&&c.height&&h>c.height&&(h=c.height,u=nu(Math.floor(h*i))),{width:u,height:h}}function Cm(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var kE=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};gu()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function xm(n,e){let t=_1(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function pi(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function ME(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function OE(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=pi(n,r,t),a=pi(r,s,t),c=pi(s,e,t),u=pi(o,a,t),h=pi(a,c,t);return pi(u,h,t)}var E1=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},T1=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function _u(n,e,t){return n?E1(e,t):T1()}function NE(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function VE(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function LE(n){return n==="angle"?{between:fm,compare:jN,normalize:Ft}:{between:uE,compare:(e,t)=>e-t,normalize:e=>e}}function ZI({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function S1(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=LE(i),c=e.length,{start:u,end:h,loop:f}=n,g,m;if(f){for(u+=c,h+=c,g=0,m=c;g<m&&o(a(e[u%c][i]),r,s);++g)u--,h--;u%=c,h%=c}return h<u&&(h+=c),{start:u,end:h,loop:f,style:n.style}}function FE(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:u}=LE(i),{start:h,end:f,loop:g,style:m}=S1(n,e,t),T=[],A=!1,w=null,D,k,U,j=()=>c(r,U,D)&&a(r,U)!==0,N=()=>a(s,D)===0||c(s,U,D),V=()=>A||j(),E=()=>!A||N();for(let _=h,v=h;_<=f;++_)k=e[_%o],!k.skip&&(D=u(k[i]),D!==U&&(A=c(D,r,s),w===null&&V()&&(w=a(D,r)===0?_:v),w!==null&&E()&&(T.push(ZI({start:w,end:_,loop:g,count:o,style:m})),w=null),v=_,U=D));return w!==null&&T.push(ZI({start:w,end:f,loop:g,count:o,style:m})),T}function UE(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=FE(i[r],n.points,e);s.length&&t.push(...s)}return t}function A1(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function C1(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let u=n[c%r];u.skip||u.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=u.stop?c:null):(o=c,a.skip&&(e=c)),a=u}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function BE(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=A1(t,r,s,i);if(i===!0)return eE(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,u=!!n._fullLoop&&o===0&&a===r-1;return eE(n,C1(t,o,c,u),t,e)}function eE(n,e,t,i){return!i||!i.setContext||!t?e:x1(n,e,t,i)}function x1(n,e,t,i){let r=n._chart.getContext(),s=tE(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,u=[],h=s,f=e[0].start,g=f;function m(T,A,w,D){let k=a?-1:1;if(T!==A){for(T+=c;t[T%c].skip;)T-=k;for(;t[A%c].skip;)A+=k;T%c!==A%c&&(u.push({start:T%c,end:A%c,loop:w,style:D}),h=D,f=A%c)}}for(let T of e){f=a?f:T.start;let A=t[f%c],w;for(g=f+1;g<=T.end;g++){let D=t[g%c];w=tE(i.setContext(Bn(r,{type:"segment",p0:A,p1:D,p0DataIndex:(g-1)%c,p1DataIndex:g%c,datasetIndex:o}))),R1(w,h)&&m(f,g-1,T.loop,h),A=D,h=w}f<g-1&&m(f,g-1,T.loop,h)}return u}function tE(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function R1(n,e){if(!e)return!1;let t=[],i=function(r,s){return _m(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}var Om=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=gm.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},jn=new Om,jE="transparent",D1={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=vm(n||jE),r=i.valid&&vm(e||jE);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},Nm=class{constructor(e,t,i,r){let s=t[i];r=ya([e.to,r,s,e.from]);let o=ya([e.from,s,r]);this._active=!0,this._fn=e.fn||D1[e.type||typeof o],this._easing=ds[e.easing]||ds.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=ya([e.to,t,r,e.from]),this._from=ya([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},Cu=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ae(e))return;let t=Object.keys(Re.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!ae(s))return;let o={};for(let a of t)o[a]=s[a];(Ie(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=k1(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&P1(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let u=o[c];if(u.charAt(0)==="$")continue;if(u==="options"){r.push(...this._animateOptions(e,t));continue}let h=t[u],f=s[u],g=i.get(u);if(f)if(g&&f.active()){f.update(g,h,a);continue}else f.cancel();if(!g||!g.duration){e[u]=h;continue}s[u]=f=new Nm(g,e,u,h),r.push(f)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return jn.add(this._chart,i),!0}};function P1(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function k1(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function zE(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function M1(n,e,t){if(t===!1)return!1;let i=zE(n,t),r=zE(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function O1(n){let e,t,i,r;return ae(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function OT(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function qE(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,u;if(e!==null){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(i.all)continue;break}u=n.values[c],Fe(u)&&(s||e===0||tr(e)===tr(u))&&(e+=u)}return e}}function N1(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,u,h;for(c=0,u=o.length;c<u;++c)h=o[c],a[c]={[r]:h,[s]:n[h]};return a}function $E(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function V1(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function L1(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function F1(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function WE(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function GE(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,u=o.axis,h=V1(s,o,i),f=e.length,g;for(let m=0;m<f;++m){let T=e[m],{[c]:A,[u]:w}=T,D=T._stacks||(T._stacks={});g=D[u]=F1(r,h,A),g[a]=w,g._top=WE(g,o,!0,i.type),g._bottom=WE(g,o,!1,i.type);let k=g._visualValues||(g._visualValues={});k[a]=w}}function Rm(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function U1(n,e){return Bn(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function B1(n,e,t){return Bn(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function _a(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var Dm=n=>n==="reset"||n==="none",HE=(n,e)=>e?n:Object.assign({},n),j1=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:OT(t,!0),values:null},NT=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=$E(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&_a(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(g,m,T,A)=>g==="x"?m:g==="r"?A:T,o=i.xAxisID=fe(r.xAxisID,Rm(t,"x")),a=i.yAxisID=fe(r.yAxisID,Rm(t,"y")),c=i.rAxisID=fe(r.rAxisID,Rm(t,"r")),u=i.indexAxis,h=i.iAxisID=s(u,o,a,c),f=i.vAxisID=s(u,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&pm(this._data,this),t._stacked&&_a(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(ae(i)){let s=this._cachedMeta;this._data=N1(i,s)}else if(r!==i){if(r){pm(r,this);let s=this._cachedMeta;_a(s),s._parsed=[]}i&&Object.isExtensible(i)&&pE(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=$E(i.vScale,i),i.stack!==r.stack&&(s=!0,_a(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&GE(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,u=t===0&&i===s.length?!0:r._sorted,h=t>0&&r._parsed[t-1],f,g,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{Ie(s[t])?m=this.parseArrayData(r,s,t,i):ae(s[t])?m=this.parseObjectData(r,s,t,i):m=this.parsePrimitiveData(r,s,t,i);let T=()=>g[c]===null||h&&g[c]<h[c];for(f=0;f<i;++f)r._parsed[f+t]=g=m[f],u&&(T()&&(u=!1),h=g);r._sorted=u}a&&GE(this,m)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,u=a.axis,h=o.getLabels(),f=o===a,g=new Array(s),m,T,A;for(m=0,T=s;m<T;++m)A=m+r,g[m]={[c]:f||o.parse(h[A],A),[u]:a.parse(i[A],A)};return g}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),u,h,f,g;for(u=0,h=s;u<h;++u)f=u+r,g=i[f],c[u]={x:o.parse(g[0],f),y:a.parse(g[1],f)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:u="y"}=this._parsing,h=new Array(s),f,g,m,T;for(f=0,g=s;f<g;++f)m=f+r,T=i[m],h[f]={x:o.parse(pa(T,c),m),y:a.parse(pa(T,u),m)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:OT(s,!0),values:i._stacks[t.axis]._visualValues};return qE(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=qE(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),u=j1(i,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:g}=L1(c),m,T;function A(){T=s[m];let w=T[c.axis];return!Fe(T[t.axis])||f>w||g<w}for(m=0;m<a&&!(!A()&&(this.updateRangeFromParsed(h,t,T,u),o));++m);if(o){for(m=a-1;m>=0;--m)if(!A()){this.updateRangeFromParsed(h,t,T,u);break}}return h}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Fe(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=O1(fe(this.options.clip,M1(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,u=this._drawCount||s.length-c,h=this.options.drawActiveElementsOnTop,f;for(r.dataset&&r.dataset.draw(t,o,c,u),f=c;f<c+u;++f){let g=s[f];g.hidden||(g.active&&h?a.push(g):g.draw(t,o))}for(f=0;f<a.length;++f)a[f].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=B1(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=U1(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],u=this.enableOptionSharing&&ga(r);if(c)return HE(c,u);let h=this.chart.config,f=h.datasetElementScopeKeys(this._type,t),g=s?[`${t}Hover`,"hover",t,""]:[t,""],m=h.getOptionScopes(this.getDataset(),f),T=Object.keys(Re.elements[t]),A=()=>this.getContext(r,s,i),w=h.resolveNamedOptions(m,T,A,g);return w.$shared&&(w.$shared=u,o[a]=Object.freeze(HE(w,u))),w}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let u;if(s.options.animation!==!1){let f=this.chart.config,g=f.datasetAnimationScopeKeys(this._type,i),m=f.getOptionScopes(this.getDataset(),g);u=f.createResolver(m,this.getContext(t,r,i))}let h=new Cu(s,u&&u.animations);return u&&u._cacheable&&(o[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||Dm(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){Dm(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!Dm(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,u,h]of this._syncList)this[c](u,h);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,u=h=>{for(h.length+=i,c=h.length-1;c>=a;c--)h[c]=h[c-i]};for(u(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&u(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&_a(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();var VT=(()=>{class n extends NT{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:u}=yE(i,s,a);this._drawStart=c,this._drawCount=u,_E(i)&&(c=0,u=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(s,c,u,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:u,_dataset:h}=this._cachedMeta,{sharedOptions:f,includeOptions:g}=this._getSharedOptions(i,s),m=a.axis,T=c.axis,{spanGaps:A,segment:w}=this.options,D=ys(A)?A:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||s==="none",U=i+r,j=t.length,N=i>0&&this.getParsed(i-1);for(let V=0;V<j;++V){let E=t[V],_=k?E:{};if(V<i||V>=U){_.skip=!0;continue}let v=this.getParsed(V),S=_e(v[T]),C=_[m]=a.getPixelForValue(v[m],V),x=_[T]=o||S?c.getBasePixel():c.getPixelForValue(u?this.applyStack(c,v,u):v[T],V);_.skip=isNaN(C)||isNaN(x)||S,_.stop=V>0&&Math.abs(v[m]-N[m])>D,w&&(_.parsed=v,_.raw=h.data[V]),g&&(_.options=f||this.resolveDataElementOptions(V,E.active?"active":s)),k||this.updateElement(E,V,_,s),N=v}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})();function ir(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Vm=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return ir()}parse(){return ir()}format(){return ir()}add(){return ir()}diff(){return ir()}startOf(){return ir()}endOf(){return ir()}},z1={_date:Vm};function q1(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?hE:gi;if(i){if(r._sharedOptions){let u=s[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){let f=c(s,e,t-h),g=c(s,e,t+h);return{lo:f.lo,hi:g.hi}}}}else return c(s,e,t)}return{lo:0,hi:s.length-1}}function Ca(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:u,data:h}=s[a],{lo:f,hi:g}=q1(s[a],e,o,r);for(let m=f;m<=g;++m){let T=h[m];T.skip||i(T,u,m)}}}function $1(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Pm(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||Ca(n,t,e,function(a,c,u){!r&&!gn(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:u})},!0),s}function W1(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:u,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:f}=cE(o,{x:e.x,y:e.y});fm(f,u,h)&&r.push({element:o,datasetIndex:a,index:c})}return Ca(n,t,e,s),r}function G1(n,e,t,i,r,s){let o=[],a=$1(t),c=Number.POSITIVE_INFINITY;function u(h,f,g){let m=h.inRange(e.x,e.y,r);if(i&&!m)return;let T=h.getCenterPoint(r);if(!(!!s||n.isPointInArea(T))&&!m)return;let w=a(e,T);w<c?(o=[{element:h,datasetIndex:f,index:g}],c=w):w===c&&o.push({element:h,datasetIndex:f,index:g})}return Ca(n,t,e,u),o}function km(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?W1(n,e,t,r):G1(n,e,t,i,r,s)}function KE(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return Ca(n,t,e,(c,u,h)=>{c[o]&&c[o](e[t],r)&&(s.push({element:c,datasetIndex:u,index:h}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var H1={evaluateInteractionItems:Ca,modes:{index(n,e,t,i){let r=_i(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?Pm(n,r,s,i,o):km(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(u=>{let h=a[0].index,f=u.data[h];f&&!f.skip&&c.push({element:f,datasetIndex:u.index,index:h})}),c):[]},dataset(n,e,t,i){let r=_i(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?Pm(n,r,s,i,o):km(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,u=n.getDatasetMeta(c).data;a=[];for(let h=0;h<u.length;++h)a.push({element:u[h],datasetIndex:c,index:h})}return a},point(n,e,t,i){let r=_i(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return Pm(n,r,s,i,o)},nearest(n,e,t,i){let r=_i(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return km(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=_i(e,n);return KE(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=_i(e,n);return KE(n,r,"y",t.intersect,i)}}},LT=["left","top","right","bottom"];function va(n,e){return n.filter(t=>t.pos===e)}function YE(n,e){return n.filter(t=>LT.indexOf(t.pos)===-1&&t.box.axis===e)}function ba(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function K1(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function Y1(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!LT.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function Q1(n,e){let t=Y1(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,u=t[a.stack],h=u&&a.stackWeight/u.weight;a.horizontal?(a.width=h?h*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:c&&e.availableHeight)}return t}function X1(n){let e=K1(n),t=ba(e.filter(u=>u.box.fullSize),!0),i=ba(va(e,"left"),!0),r=ba(va(e,"right")),s=ba(va(e,"top"),!0),o=ba(va(e,"bottom")),a=YE(e,"x"),c=YE(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:va(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function QE(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function FT(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function J1(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!ae(r)){t.size&&(n[r]-=t.size);let f=i[t.stack]||{size:0,count:1};f.size=Math.max(f.size,t.horizontal?s.height:s.width),t.size=f.size/f.count,n[r]+=t.size}s.getPadding&&FT(o,s.getPadding());let a=Math.max(0,e.outerWidth-QE(o,n,"left","right")),c=Math.max(0,e.outerHeight-QE(o,n,"top","bottom")),u=a!==n.w,h=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:u,other:h}:{same:h,other:u}}function Z1(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function eV(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Ea(n,e,t,i){let r=[],s,o,a,c,u,h;for(s=0,o=n.length,u=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,eV(a.horizontal,e));let{same:f,other:g}=J1(e,t,a,i);u|=f&&r.length,h=h||g,c.fullSize||r.push(a)}return u&&Ea(r,e,t,i)||h}function vu(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function XE(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,u=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/u.weight||1;if(a.horizontal){let f=e.w*h,g=u.size||c.height;ga(u.start)&&(o=u.start),c.fullSize?vu(c,r.left,o,t.outerWidth-r.right-r.left,g):vu(c,e.left+u.placed,o,f,g),u.start=o,u.placed+=f,o=c.bottom}else{let f=e.h*h,g=u.size||c.width;ga(u.start)&&(s=u.start),c.fullSize?vu(c,s,r.top,g,t.outerHeight-r.bottom-r.top):vu(c,s,e.top+u.placed,g,f),u.start=s,u.placed+=f,s=c.right}}e.x=s,e.y=o}var vi={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=bt(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=X1(n.boxes),c=a.vertical,u=a.horizontal;he(n.boxes,A=>{typeof A.beforeLayout=="function"&&A.beforeLayout()});let h=c.reduce((A,w)=>w.box.options&&w.box.options.display===!1?A:A+1,0)||1,f=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),g=Object.assign({},r);FT(g,bt(i));let m=Object.assign({maxPadding:g,w:s,h:o,x:r.left,y:r.top},r),T=Q1(c.concat(u),f);Ea(a.fullSize,m,f,T),Ea(c,m,f,T),Ea(u,m,f,T)&&Ea(c,m,f,T),Z1(m),XE(a.leftAndTop,m,f,T),m.x+=m.w,m.y+=m.h,XE(a.rightAndBottom,m,f,T),n.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},he(a.chartArea,A=>{let w=A.box;Object.assign(w,n.chartArea),w.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},xu=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},Lm=class extends xu{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},Su="$chartjs",tV={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},JE=n=>n===null||n==="";function nV(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[Su]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",JE(r)){let s=xm(n,"width");s!==void 0&&(n.width=s)}if(JE(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=xm(n,"height");s!==void 0&&(n.height=s)}return n}var UT=kE?{passive:!0}:!1;function iV(n,e,t){n&&n.addEventListener(e,t,UT)}function rV(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,UT)}function sV(n,e){let t=tV[n.type]||n.type,{x:i,y:r}=_i(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Ru(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function oV(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Ru(a.addedNodes,i),o=o&&!Ru(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function aV(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Ru(a.removedNodes,i),o=o&&!Ru(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var Sa=new Map,ZE=0;function BT(){let n=window.devicePixelRatio;n!==ZE&&(ZE=n,Sa.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function cV(n,e){Sa.size||window.addEventListener("resize",BT),Sa.set(n,e)}function lV(n){Sa.delete(n),Sa.size||window.removeEventListener("resize",BT)}function uV(n,e,t){let i=n.canvas,r=i&&mu(i);if(!r)return;let s=mm((a,c)=>{let u=r.clientWidth;t(a,c),u<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],u=c.contentRect.width,h=c.contentRect.height;u===0&&h===0||s(u,h)});return o.observe(r),cV(n,s),o}function Mm(n,e,t){t&&t.disconnect(),e==="resize"&&lV(n)}function hV(n,e,t){let i=n.canvas,r=mm(s=>{n.ctx!==null&&t(sV(s,n))},n);return iV(i,e,r),r}var Fm=class extends xu{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(nV(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[Su])return!1;let i=t[Su].initial;["height","width"].forEach(s=>{let o=i[s];_e(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[Su],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:oV,detach:aV,resize:uV}[t]||hV;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:Mm,detach:Mm,resize:Mm}[t]||rV)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return PE(e,t,i,r)}isAttached(e){let t=e&&mu(e);return!!(t&&t.isConnected)}};function dV(n){return!gu()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?Lm:Fm}var bi=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return ys(this.x)&&ys(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function fV(n,e){let t=n.options.ticks,i=pV(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?mV(e):[],o=s.length,a=s[0],c=s[o-1],u=[];if(o>r)return yV(e,u,s,o/r),u;let h=gV(s,e,r);if(o>0){let f,g,m=o>1?Math.round((c-a)/(o-1)):null;for(bu(e,u,h,_e(m)?0:a-m,a),f=0,g=o-1;f<g;f++)bu(e,u,h,s[f],s[f+1]);return bu(e,u,h,c,_e(m)?e.length:c+m),u}return bu(e,u,h),u}function pV(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function gV(n,e,t){let i=_V(n),r=e.length/t;if(!i)return Math.max(r,1);let s=oE(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function mV(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function yV(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function bu(n,e,t,i,r){let s=fe(i,0),o=Math.min(fe(r,n.length),n.length),a=0,c,u,h;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),h=s;h<0;)a++,h=Math.round(s+a*t);for(u=Math.max(s,0);u<o;u++)u===h&&(e.push(n[u]),a++,h=Math.round(s+a*t))}function _V(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var vV=n=>n==="left"?"right":n==="right"?"left":n,eT=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,tT=(n,e)=>Math.min(e||n,n);function nT(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function bV(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),u;if(!(t&&(i===1?u=Math.max(c-s,o-c):e===0?u=(n.getPixelForTick(1)-c)/2:u=(c-n.getPixelForTick(r-1))/2,c+=r<e?u:-u,c<s-a||c>o+a)))return c}function wV(n,e){he(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function wa(n){return n.drawTicks?n.tickLength:0}function iT(n,e){if(!n.display)return 0;let t=ot(n.font,e),i=bt(n.padding);return(Ie(n.text)?n.text.length:1)*t.lineHeight+i.height}function IV(n,e){return Bn(n,{scale:e,type:"scale"})}function EV(n,e,t){return Bn(n,{tick:t,index:e,type:"tick"})}function TV(n,e,t){let i=ym(n);return(t&&e!=="right"||!t&&e==="right")&&(i=vV(i)),i}function SV(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:u,scales:h}=c,f=0,g,m,T,A=o-r,w=a-s;if(n.isHorizontal()){if(m=_s(i,s,a),ae(t)){let D=Object.keys(t)[0],k=t[D];T=h[D].getPixelForValue(k)+A-e}else t==="center"?T=(u.bottom+u.top)/2+A-e:T=eT(n,t,e);g=a-s}else{if(ae(t)){let D=Object.keys(t)[0],k=t[D];m=h[D].getPixelForValue(k)-w+e}else t==="center"?m=(u.left+u.right)/2-w+e:m=eT(n,t,e);T=_s(i,o,r),f=t==="left"?-_t:_t}return{titleX:m,titleY:T,maxWidth:g,rotation:f}}var sr=class n extends bi{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=vt(e,Number.POSITIVE_INFINITY),t=vt(t,Number.NEGATIVE_INFINITY),i=vt(i,Number.POSITIVE_INFINITY),r=vt(r,Number.NEGATIVE_INFINITY),{min:vt(e,i),max:vt(t,r),minDefined:Fe(e),maxDefined:Fe(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,u=a.length;c<u;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:vt(t,vt(i,t)),max:vt(i,vt(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Te(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=SE(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?nT(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=fV(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Te(this.options.afterUpdate,[this])}beforeSetDimensions(){Te(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Te(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Te(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Te(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Te(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Te(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Te(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=tT(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,u;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let h=this._getLabelSizes(),f=h.widest.width,g=h.highest.height,m=kt(this.chart.width-f,0,this.maxWidth);a=e.offset?this.maxWidth/i:m/(i-1),f+6>a&&(a=m/(i-(e.offset?.5:1)),c=this.maxHeight-wa(e.grid)-t.padding-iT(e.title,this.chart.options.font),u=Math.sqrt(f*f+g*g),o=cu(Math.min(Math.asin(kt((h.highest.height+6)/a,-1,1)),Math.asin(kt(c/u,-1,1))-Math.asin(kt(g/u,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Te(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Te(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=iT(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=wa(s)+c):(e.height=this.maxHeight,e.width=wa(s)+c),i.display&&this.ticks.length){let{first:u,last:h,widest:f,highest:g}=this._getLabelSizes(),m=i.padding*2,T=Un(this.labelRotation),A=Math.cos(T),w=Math.sin(T);if(a){let D=i.mirror?0:w*f.width+A*g.height;e.height=Math.min(this.maxHeight,e.height+D+m)}else{let D=i.mirror?0:A*f.width+w*g.height;e.width=Math.min(this.maxWidth,e.width+D+m)}this._calculatePadding(u,h,w,A)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,u=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,f=this.right-this.getPixelForTick(this.ticks.length-1),g=0,m=0;c?u?(g=r*e.width,m=i*t.height):(g=i*e.height,m=r*t.width):s==="start"?m=t.width:s==="end"?g=e.width:s!=="inner"&&(g=e.width/2,m=t.width/2),this.paddingLeft=Math.max((g-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((m-f+o)*this.width/(this.width-f),0)}else{let h=t.height/2,f=e.height/2;s==="start"?(h=0,f=e.height):s==="end"&&(h=t.height,f=0),this.paddingTop=h+o,this.paddingBottom=f+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Te(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)_e(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=nT(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/tT(t,i)),u=0,h=0,f,g,m,T,A,w,D,k,U,j,N;for(f=0;f<t;f+=c){if(T=e[f].label,A=this._resolveTickFontOptions(f),r.font=w=A.string,D=s[w]=s[w]||{data:{},gc:[]},k=A.lineHeight,U=j=0,!_e(T)&&!Ie(T))U=da(r,D.data,D.gc,U,T),j=k;else if(Ie(T))for(g=0,m=T.length;g<m;++g)N=T[g],!_e(N)&&!Ie(N)&&(U=da(r,D.data,D.gc,U,N),j+=k);o.push(U),a.push(j),u=Math.max(U,u),h=Math.max(j,h)}wV(s,t);let V=o.indexOf(u),E=a.indexOf(h),_=v=>({width:o[v]||0,height:a[v]||0});return{first:_(0),last:_(t-1),widest:_(V),highest:_(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return lE(this._alignToPixels?yi(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=EV(this.getContext(),e,i))}return this.$context||(this.$context=IV(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Un(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,u=this.isHorizontal(),f=this.ticks.length+(c?1:0),g=wa(s),m=[],T=a.setContext(this.getContext()),A=T.display?T.width:0,w=A/2,D=function(Ve){return yi(i,Ve,A)},k,U,j,N,V,E,_,v,S,C,x,I;if(o==="top")k=D(this.bottom),E=this.bottom-g,v=k-w,C=D(e.top)+w,I=e.bottom;else if(o==="bottom")k=D(this.top),C=e.top,I=D(e.bottom)-w,E=k+w,v=this.top+g;else if(o==="left")k=D(this.right),V=this.right-g,_=k-w,S=D(e.left)+w,x=e.right;else if(o==="right")k=D(this.left),S=e.left,x=D(e.right)-w,V=k+w,_=this.left+g;else if(t==="x"){if(o==="center")k=D((e.top+e.bottom)/2+.5);else if(ae(o)){let Ve=Object.keys(o)[0],Be=o[Ve];k=D(this.chart.scales[Ve].getPixelForValue(Be))}C=e.top,I=e.bottom,E=k+w,v=E+g}else if(t==="y"){if(o==="center")k=D((e.left+e.right)/2);else if(ae(o)){let Ve=Object.keys(o)[0],Be=o[Ve];k=D(this.chart.scales[Ve].getPixelForValue(Be))}V=k-w,_=V-g,S=e.left,x=e.right}let Ue=fe(r.ticks.maxTicksLimit,f),pe=Math.max(1,Math.ceil(f/Ue));for(U=0;U<f;U+=pe){let Ve=this.getContext(U),Be=s.setContext(Ve),Qt=a.setContext(Ve),qn=Be.lineWidth,vn=Be.color,or=Qt.dash||[],at=Qt.dashOffset,Se=Be.tickWidth,bn=Be.tickColor,Ut=Be.tickBorderDash||[],wn=Be.tickBorderDashOffset;j=bV(this,U,c),j!==void 0&&(N=yi(i,j,qn),u?V=_=S=x=N:E=v=C=I=N,m.push({tx1:V,ty1:E,tx2:_,ty2:v,x1:S,y1:C,x2:x,y2:I,width:qn,color:vn,borderDash:or,borderDashOffset:at,tickWidth:Se,tickColor:bn,tickBorderDash:Ut,tickBorderDashOffset:wn}))}return this._ticksLength=f,this._borderValue=k,m}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:u,padding:h,mirror:f}=s,g=wa(i.grid),m=g+h,T=f?-h:m,A=-Un(this.labelRotation),w=[],D,k,U,j,N,V,E,_,v,S,C,x,I="middle";if(r==="top")V=this.bottom-T,E=this._getXAxisLabelAlignment();else if(r==="bottom")V=this.top+T,E=this._getXAxisLabelAlignment();else if(r==="left"){let pe=this._getYAxisLabelAlignment(g);E=pe.textAlign,N=pe.x}else if(r==="right"){let pe=this._getYAxisLabelAlignment(g);E=pe.textAlign,N=pe.x}else if(t==="x"){if(r==="center")V=(e.top+e.bottom)/2+m;else if(ae(r)){let pe=Object.keys(r)[0],Ve=r[pe];V=this.chart.scales[pe].getPixelForValue(Ve)+m}E=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")N=(e.left+e.right)/2-m;else if(ae(r)){let pe=Object.keys(r)[0],Ve=r[pe];N=this.chart.scales[pe].getPixelForValue(Ve)}E=this._getYAxisLabelAlignment(g).textAlign}t==="y"&&(c==="start"?I="top":c==="end"&&(I="bottom"));let Ue=this._getLabelSizes();for(D=0,k=a.length;D<k;++D){U=a[D],j=U.label;let pe=s.setContext(this.getContext(D));_=this.getPixelForTick(D)+s.labelOffset,v=this._resolveTickFontOptions(D),S=v.lineHeight,C=Ie(j)?j.length:1;let Ve=C/2,Be=pe.color,Qt=pe.textStrokeColor,qn=pe.textStrokeWidth,vn=E;o?(N=_,E==="inner"&&(D===k-1?vn=this.options.reverse?"left":"right":D===0?vn=this.options.reverse?"right":"left":vn="center"),r==="top"?u==="near"||A!==0?x=-C*S+S/2:u==="center"?x=-Ue.highest.height/2-Ve*S+S:x=-Ue.highest.height+S/2:u==="near"||A!==0?x=S/2:u==="center"?x=Ue.highest.height/2-Ve*S:x=Ue.highest.height-C*S,f&&(x*=-1),A!==0&&!pe.showLabelBackdrop&&(N+=S/2*Math.sin(A))):(V=_,x=(1-C)*S/2);let or;if(pe.showLabelBackdrop){let at=bt(pe.backdropPadding),Se=Ue.heights[D],bn=Ue.widths[D],Ut=x-at.top,wn=0-at.left;switch(I){case"middle":Ut-=Se/2;break;case"bottom":Ut-=Se;break}switch(E){case"center":wn-=bn/2;break;case"right":wn-=bn;break;case"inner":D===k-1?wn-=bn:D>0&&(wn-=bn/2);break}or={left:wn,top:Ut,width:bn+at.width,height:Se+at.height,color:pe.backdropColor}}w.push({label:j,font:v,textOffset:x,options:{rotation:A,color:Be,strokeColor:Qt,strokeWidth:qn,textAlign:vn,textBaseline:I,translation:[N,V],backdrop:or}})}return w}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Un(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,u,h;return t==="left"?r?(h=this.right+s,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h+=c)):(h=this.right-a,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h=this.left)):t==="right"?r?(h=this.left+s,i==="near"?u="right":i==="center"?(u="center",h-=c/2):(u="left",h-=c)):(h=this.left+a,i==="near"?u="left":i==="center"?(u="center",h+=c/2):(u="right",h=this.right)):u="right",{textAlign:u,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,u,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(u.x,u.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,u,h,f,g;this.isHorizontal()?(u=yi(e,this.left,o)-o/2,h=yi(e,this.right,a)+a/2,f=g=c):(f=yi(e,this.top,o)-o/2,g=yi(e,this.bottom,a)+a/2,u=h=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(u,f),t.lineTo(h,g),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&wm(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,u=o.label,h=o.textOffset;vs(i,u,0,h,c,a)}r&&Im(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=ot(i.font),o=bt(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||ae(t)?(c+=o.bottom,Ie(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:u,titleY:h,maxWidth:f,rotation:g}=SV(this,c,t,a);vs(e,i.text,0,0,s,{color:i.color,maxWidth:f,rotation:g,textAlign:TV(a,t,r),textBaseline:"middle",translation:[u,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=fe(e.grid&&e.grid.z,-1),r=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return ot(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},ws=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;xV(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,AV(e,o,i),this.override&&Re.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Re[r]&&(delete Re[r][i],this.override&&delete mi[i])}};function AV(n,e,t){let i=fs(Object.create(null),[t?Re.get(t):{},Re.get(e),n.defaults]);Re.set(e,i),n.defaultRoutes&&CV(e,n.defaultRoutes),n.descriptors&&Re.describe(e,n.descriptors)}function CV(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");Re.route(s,r,c,a)})}function xV(n){return"id"in n&&"defaults"in n}var Um=class{constructor(){this.controllers=new ws(NT,"datasets",!0),this.elements=new ws(bi,"elements"),this.plugins=new ws(Object,"plugins"),this.scales=new ws(sr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):he(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=au(e);Te(i["before"+r],[],i),t[e](i),Te(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},_n=new Um,Bm=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(Te(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){_e(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=fe(i.options&&i.options.plugins,{}),s=RV(i);return r===!1&&!t?[]:PV(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function RV(n){let e={},t=[],i=Object.keys(_n.plugins.items);for(let s=0;s<i.length;s++)t.push(_n.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function DV(n,e){return!e&&n===!1?null:n===!0?{}:n}function PV(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,u=DV(i[c],r);u!==null&&s.push({plugin:a,options:kV(n.config,{plugin:a,local:t[c]},u,o)})}return s}function kV(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function jm(n,e){let t=Re.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function MV(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function OV(n,e){return n===e?"_index_":"_value_"}function rT(n){if(n==="x"||n==="y"||n==="r")return n}function NV(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function zm(n,...e){if(rT(n))return n;for(let t of e){let i=t.axis||NV(t.position)||n.length>1&&rT(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function sT(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function VV(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return sT(n,"x",t[0])||sT(n,"y",t[0])}return{}}function LV(n,e){let t=mi[n.type]||{scales:{}},i=e.scales||{},r=jm(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!ae(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=zm(o,a,VV(o,n),Re.scales[a.type]),u=OV(c,r),h=t.scales||{};s[o]=gs(Object.create(null),[{axis:c},a,h[c],h[u]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||jm(a,e),h=(mi[a]||{}).scales||{};Object.keys(h).forEach(f=>{let g=MV(f,c),m=o[g+"AxisID"]||g;s[m]=s[m]||Object.create(null),gs(s[m],[{axis:g},i[m],h[f]])})}),Object.keys(s).forEach(o=>{let a=s[o];gs(a,[Re.scales[a.type],Re.scale])}),s}function jT(n){let e=n.options||(n.options={});e.plugins=fe(e.plugins,{}),e.scales=LV(n,e)}function zT(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function FV(n){return n=n||{},n.data=zT(n.data),jT(n),n}var oT=new Map,qT=new Set;function wu(n,e){let t=oT.get(n);return t||(t=e(),oT.set(n,t),qT.add(t)),t}var Ia=(n,e,t)=>{let i=pa(e,t);i!==void 0&&n.add(i)},qm=class{constructor(e){this._config=FV(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=zT(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),jT(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return wu(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return wu(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return wu(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return wu(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(h=>{e&&(c.add(e),h.forEach(f=>Ia(c,e,f))),h.forEach(f=>Ia(c,r,f)),h.forEach(f=>Ia(c,mi[s]||{},f)),h.forEach(f=>Ia(c,Re,f)),h.forEach(f=>Ia(c,hu,f))});let u=Array.from(c);return u.length===0&&u.push(Object.create(null)),qT.has(t)&&o.set(t,u),u}chartOptionScopes(){let{options:e,type:t}=this;return[e,mi[t]||{},Re.datasets[t]||{},{type:t},Re,hu]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=aT(this._resolverCache,e,r),c=o;if(BV(o,t)){s.$shared=!1,i=Ln(i)?i():i;let u=this.createResolver(e,i,a);c=nr(o,i,u)}for(let u of t)s[u]=c[u];return s}createResolver(e,t,i=[""],r){let{resolver:s}=aT(this._resolverCache,e,i);return ae(t)?nr(s,t,void 0,r):s}};function aT(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:pu(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var UV=n=>ae(n)&&Object.getOwnPropertyNames(n).some(e=>Ln(n[e]));function BV(n,e){let{isScriptable:t,isIndexable:i}=Tm(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(Ln(a)||UV(a))||o&&Ie(a))return!0}return!1}var jV="4.4.4",zV=["top","bottom","left","right","chartArea"];function cT(n,e){return n==="top"||n==="bottom"||zV.indexOf(n)===-1&&e==="x"}function lT(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function uT(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Te(t&&t.onComplete,[n],e)}function qV(n){let e=n.chart,t=e.options.animation;Te(t&&t.onProgress,[n],e)}function $T(n){return gu()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Au={},hT=n=>{let e=$T(n);return Object.values(Au).filter(t=>t.canvas===e).pop()};function $V(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function WV(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function Iu(n,e,t){return n.options.clip?n[t]:e[t]}function GV(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:Iu(t,e,"left"),right:Iu(t,e,"right"),top:Iu(i,e,"top"),bottom:Iu(i,e,"bottom")}:e}var ku=(()=>{class n{static defaults=Re;static instances=Au;static overrides=mi;static registry=_n;static version=jV;static getChart=hT;static register(...t){_n.add(...t),dT()}static unregister(...t){_n.remove(...t),dT()}constructor(t,i){let r=this.config=new qm(i),s=$T(t),o=hT(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||dV(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),u=c&&c.canvas,h=u&&u.height,f=u&&u.width;if(this.id=nE(),this.ctx=c,this.canvas=u,this.width=f,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Bm,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=mE(g=>this.update(g),a.resizeDelay||0),this._dataChanges=[],Au[this.id]=this,!c||!u){console.error("Failed to create chart: can't acquire context from the given item");return}jn.listen(this,"complete",uT),jn.listen(this,"progress",qV),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return _e(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return _n}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Cm(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return bm(this.canvas,this.ctx),this}stop(){return jn.stop(this),this}resize(t,i){jn.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Cm(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Te(r.onResize,[this,a],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};he(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],u=zm(a,c),h=u==="r",f=u==="x";return{options:c,dposition:h?"chartArea":f?"bottom":"left",dtype:h?"radialLinear":f?"category":"linear"}}))),he(o,a=>{let c=a.options,u=c.id,h=zm(u,c),f=fe(c.type,a.dtype);(c.position===void 0||cT(c.position,h)!==cT(a.dposition))&&(c.position=a.dposition),s[u]=!0;let g=null;if(u in r&&r[u].type===f)g=r[u];else{let m=_n.getScale(f);g=new m({id:u,type:f,ctx:this.ctx,chart:this}),r[g.id]=g}g.init(c,t)}),he(s,(a,c)=>{a||delete r[c]}),he(r,a=>{vi.configure(this,a,a.options),vi.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(lT("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||jm(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let u=_n.getController(c),{datasetElementType:h,dataElementType:f}=Re.datasets[c];Object.assign(u,{dataElementType:_n.getElement(f),datasetElementType:h&&_n.getElement(h)}),a.controller=new u(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){he(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,f=this.data.datasets.length;h<f;h++){let{controller:g}=this.getDatasetMeta(h),m=!s&&o.indexOf(g)===-1;g.buildOrUpdateElements(m),a=Math.max(+g.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||he(o,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(lT("z","_idx"));let{_active:c,_lastEvent:u}=this;u?this._eventHandler(u,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){he(this.scales,t=>{vi.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!lm(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;$V(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!lm(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;vi.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],he(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Ln(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(jn.has(this)?this.attached&&!jn.running(this)&&jn.start(this):(this.draw(),uT({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=GV(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&wm(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&Im(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return gn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=H1.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Bn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);ga(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),jn.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),bm(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete Au[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};he(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(u,h)=>{i.addEventListener(this,u,h),t[u]=h},s=(u,h)=>{t[u]&&(i.removeEventListener(this,u,h),delete t[u])},o=(u,h)=>{this.canvas&&this.resize(u,h)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){he(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},he(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,u;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,u=t.length;c<u;++c){a=t[c];let h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!fa(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(u,h)=>u.filter(f=>!h.some(g=>f.datasetIndex===g.datasetIndex&&f.index===g.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),u=sE(t),h=WV(t,this._lastEvent,r,u);r&&(this._lastEvent=null,Te(o.onHover,[t,c,this],this),u&&Te(o.onClick,[t,c,this],this));let f=!fa(c,s);return(f||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=h,f}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function dT(){return he(ku.instances,n=>n._plugins.invalidate())}function WT(n,e,t=e){n.lineCap=fe(t.borderCapStyle,e.borderCapStyle),n.setLineDash(fe(t.borderDash,e.borderDash)),n.lineDashOffset=fe(t.borderDashOffset,e.borderDashOffset),n.lineJoin=fe(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=fe(t.borderWidth,e.borderWidth),n.strokeStyle=fe(t.borderColor,e.borderColor)}function HV(n,e,t){n.lineTo(t.x,t.y)}function KV(n){return n.stepped?IE:n.tension||n.cubicInterpolationMode==="monotone"?EE:HV}function GT(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),u=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:u<c&&!h?i+u-c:u-c}}function YV(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:u}=GT(r,t,i),h=KV(s),{move:f=!0,reverse:g}=i||{},m,T,A;for(m=0;m<=u;++m)T=r[(a+(g?u-m:m))%o],!T.skip&&(f?(n.moveTo(T.x,T.y),f=!1):h(n,A,T,g,s.stepped),A=T);return c&&(T=r[(a+(g?u:0))%o],h(n,A,T,g,s.stepped)),!!c}function QV(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=GT(r,t,i),{move:c=!0,reverse:u}=i||{},h=0,f=0,g,m,T,A,w,D,k=j=>(o+(u?a-j:j))%s,U=()=>{A!==w&&(n.lineTo(h,w),n.lineTo(h,A),n.lineTo(h,D))};for(c&&(m=r[k(0)],n.moveTo(m.x,m.y)),g=0;g<=a;++g){if(m=r[k(g)],m.skip)continue;let j=m.x,N=m.y,V=j|0;V===T?(N<A?A=N:N>w&&(w=N),h=(f*h+j)/++f):(U(),n.lineTo(j,N),T=V,f=0,A=w=N),D=N}U()}function $m(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?QV:YV}function XV(n){return n.stepped?ME:n.tension||n.cubicInterpolationMode==="monotone"?OE:pi}function JV(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),WT(n,e.options),n.stroke(r)}function ZV(n,e,t,i){let{segments:r,options:s}=e,o=$m(e);for(let a of r)WT(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var eL=typeof Path2D=="function";function tL(n,e,t,i){eL&&!e.options.segment?JV(n,e,t,i):ZV(n,e,t,i)}var HT=(()=>{class n extends bi{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;DE(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=BE(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=UE(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],u=XV(r),h,f;for(h=0,f=a.length;h<f;++h){let{start:g,end:m}=a[h],T=o[g],A=o[m];if(T===A){c.push(T);continue}let w=Math.abs((s-T[i])/(A[i]-T[i])),D=u(T,A,w,r.stepped);D[i]=t[i],c.push(D)}return c.length===1?c[0]:c}pathSegment(t,i,r){return $m(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=$m(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),tL(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function fT(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var KT=(()=>{class n extends bi{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return fT(this,t,"x",i)}inYRange(t,i){return fT(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!gn(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,du(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();var Du=class extends bi{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=Ie(i.text)?i.text.length:1;this._padding=bt(i.padding);let s=r*ot(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,u,h,f;return this.isHorizontal()?(h=_s(a,i,s),f=t+e,u=s-i):(o.position==="left"?(h=i+e,f=_s(a,r,t),c=ke*-.5):(h=s-e,f=_s(a,t,r),c=ke*.5),u=r-t),{titleX:h,titleY:f,maxWidth:u,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=ot(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:u}=this._drawArgs(s);vs(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:u,textAlign:ym(t.align),textBaseline:"middle",translation:[o,a]})}};function nL(n,e){let t=new Du({ctx:n.ctx,options:e,chart:n});vi.configure(n,t,e),vi.addBox(n,t),n.titleBlock=t}var YT={id:"title",_element:Du,start(n,e,t){nL(n,t)},stop(n){let e=n.titleBlock;vi.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;vi.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};var Ta={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let u=c.getCenterPoint(),h=su(e,u);h<r&&(r=h,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function yn(n,e){return e&&(Ie(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function zn(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function iL(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function pT(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=ot(e.bodyFont),u=ot(e.titleFont),h=ot(e.footerFont),f=s.length,g=r.length,m=i.length,T=bt(e.padding),A=T.height,w=0,D=i.reduce((j,N)=>j+N.before.length+N.lines.length+N.after.length,0);if(D+=n.beforeBody.length+n.afterBody.length,f&&(A+=f*u.lineHeight+(f-1)*e.titleSpacing+e.titleMarginBottom),D){let j=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;A+=m*j+(D-m)*c.lineHeight+(D-1)*e.bodySpacing}g&&(A+=e.footerMarginTop+g*h.lineHeight+(g-1)*e.footerSpacing);let k=0,U=function(j){w=Math.max(w,t.measureText(j).width+k)};return t.save(),t.font=u.string,he(n.title,U),t.font=c.string,he(n.beforeBody.concat(n.afterBody),U),k=e.displayColors?o+2+e.boxPadding:0,he(i,j=>{he(j.before,U),he(j.lines,U),he(j.after,U)}),k=0,t.font=h.string,he(n.footer,U),t.restore(),w+=T.width,{width:w,height:A}}function rL(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function sL(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function oL(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,u="center";return i==="center"?u=r<=(a+c)/2?"left":"right":r<=s/2?u="left":r>=o-s/2&&(u="right"),sL(u,n,e,t)&&(u="center"),u}function gT(n,e,t){let i=t.yAlign||e.yAlign||rL(n,t);return{xAlign:t.xAlign||e.xAlign||oL(n,e,t,i),yAlign:i}}function aL(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function cL(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function mT(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,u=r+s,{topLeft:h,topRight:f,bottomLeft:g,bottomRight:m}=bs(o),T=aL(e,a),A=cL(e,c,u);return c==="center"?a==="left"?T+=u:a==="right"&&(T-=u):a==="left"?T-=Math.max(h,g)+r:a==="right"&&(T+=Math.max(f,m)+r),{x:kt(T,0,i.width-e.width),y:kt(A,0,i.height-e.height)}}function Eu(n,e,t){let i=bt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function yT(n){return yn([],zn(n))}function lL(n,e,t){return Bn(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function _T(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var QT={beforeTitle:mn,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:mn,beforeBody:mn,beforeLabel:mn,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return _e(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:mn,afterBody:mn,beforeFooter:mn,footer:mn,afterFooter:mn};function wt(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?QT[e].call(t,i):r}var vT=(()=>{class n extends bi{static positioners=Ta;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new Cu(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=lL(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=wt(r,"beforeTitle",this,t),o=wt(r,"title",this,t),a=wt(r,"afterTitle",this,t),c=[];return c=yn(c,zn(s)),c=yn(c,zn(o)),c=yn(c,zn(a)),c}getBeforeBody(t,i){return yT(wt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return he(t,o=>{let a={before:[],lines:[],after:[]},c=_T(r,o);yn(a.before,zn(wt(c,"beforeLabel",this,o))),yn(a.lines,wt(c,"label",this,o)),yn(a.after,zn(wt(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return yT(wt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=wt(r,"beforeFooter",this,t),o=wt(r,"footer",this,t),a=wt(r,"afterFooter",this,t),c=[];return c=yn(c,zn(s)),c=yn(c,zn(o)),c=yn(c,zn(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],u,h;for(u=0,h=i.length;u<h;++u)c.push(iL(this.chart,i[u]));return t.filter&&(c=c.filter((f,g,m)=>t.filter(f,g,m,r))),t.itemSort&&(c=c.sort((f,g)=>t.itemSort(f,g,r))),he(c,f=>{let g=_T(t.callbacks,f);s.push(wt(g,"labelColor",this,f)),o.push(wt(g,"labelPointStyle",this,f)),a.push(wt(g,"labelTextColor",this,f))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=Ta[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let u=this._size=pT(this,r),h=Object.assign({},c,u),f=gT(this.chart,r,h),g=mT(r,h,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,o={opacity:1,x:g.x,y:g.y,width:u.width,height:u.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:g}=bs(c),{x:m,y:T}=t,{width:A,height:w}=i,D,k,U,j,N,V;return o==="center"?(N=T+w/2,s==="left"?(D=m,k=D-a,j=N+a,V=N-a):(D=m+A,k=D+a,j=N-a,V=N+a),U=D):(s==="left"?k=m+Math.max(u,f)+a:s==="right"?k=m+A-Math.max(h,g)-a:k=this.caretX,o==="top"?(j=T,N=j-a,D=k-a,U=k+a):(j=T+w,N=j+a,D=k+a,U=k-a),V=j),{x1:D,x2:k,x3:U,y1:j,y2:N,y3:V}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,u;if(o){let h=_u(r.rtl,this.x,this.width);for(t.x=Eu(this,r.titleAlign,r),i.textAlign=h.textAlign(r.titleAlign),i.textBaseline="middle",a=ot(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,u=0;u<o;++u)i.fillText(s[u],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,u+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:u,boxWidth:h}=o,f=ot(o.bodyFont),g=Eu(this,"left",o),m=s.x(g),T=u<f.lineHeight?(f.lineHeight-u)/2:0,A=i.y+T;if(o.usePointStyle){let w={radius:Math.min(h,u)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},D=s.leftForLtr(m,h)+h/2,k=A+u/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,du(t,w,D,k),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,du(t,w,D,k)}else{t.lineWidth=ae(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let w=s.leftForLtr(m,h),D=s.leftForLtr(s.xPlus(m,1),h-2),k=bs(a.borderRadius);Object.values(k).some(U=>U!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,fu(t,{x:w,y:A,w:h,h:u,radius:k}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),fu(t,{x:D,y:A+1,w:h-2,h:u-2,radius:k}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(w,A,h,u),t.strokeRect(w,A,h,u),t.fillStyle=a.backgroundColor,t.fillRect(D,A+1,h-2,u-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:u,boxWidth:h,boxPadding:f}=r,g=ot(r.bodyFont),m=g.lineHeight,T=0,A=_u(r.rtl,this.x,this.width),w=function(v){i.fillText(v,A.x(t.x+T),t.y+m/2),t.y+=m+o},D=A.textAlign(a),k,U,j,N,V,E,_;for(i.textAlign=a,i.textBaseline="middle",i.font=g.string,t.x=Eu(this,D,r),i.fillStyle=r.bodyColor,he(this.beforeBody,w),T=c&&D!=="right"?a==="center"?h/2+f:h+2+f:0,N=0,E=s.length;N<E;++N){for(k=s[N],U=this.labelTextColors[N],i.fillStyle=U,he(k.before,w),j=k.lines,c&&j.length&&(this._drawColorBox(i,t,N,A,r),m=Math.max(g.lineHeight,u)),V=0,_=j.length;V<_;++V)w(j[V]),m=g.lineHeight;he(k.after,w)}T=0,m=g.lineHeight,he(this.afterBody,w),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let u=_u(r.rtl,this.x,this.width);for(t.x=Eu(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=u.textAlign(r.footerAlign),i.textBaseline="middle",a=ot(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],u.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:u}=t,{width:h,height:f}=r,{topLeft:g,topRight:m,bottomLeft:T,bottomRight:A}=bs(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+g,u),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+h-m,u),i.quadraticCurveTo(c+h,u,c+h,u+m),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+h,u+f-A),i.quadraticCurveTo(c+h,u+f,c+h-A,u+f),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+T,u+f),i.quadraticCurveTo(c,u+f,c,u+f-T),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,u+g),i.quadraticCurveTo(c,u,c+g,u),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=Ta[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=pT(this,t),u=Object.assign({},a,this._size),h=gT(i,t,u),f=mT(t,u,h,i);(s._to!==f.x||o._to!==f.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=bt(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),NE(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),VE(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:u})=>{let h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[u],index:u}}),o=!fa(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),u=i||!fa(a,o)||c;return u&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),u}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=Ta[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),XT={id:"tooltip",_element:vT,positioners:Ta,afterInit(n,e,t){t&&(n.tooltip=new vT({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",be(G({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:QT},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};var uL=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function hL(n,e,t,i){let r=n.indexOf(e);if(r===-1)return uL(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var dL=(n,e)=>n===null?null:kt(Math.round(n),0,e);function bT(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var JT=(()=>{class n extends sr{static id="category";static defaults={ticks:{callback:bT}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(_e(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:hL(r,t,fe(i,t),this._addedLabels),dL(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return bT.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function fL(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:u,maxTicks:h,maxDigits:f,includeBounds:g}=n,m=s||1,T=h-1,{min:A,max:w}=e,D=!_e(o),k=!_e(a),U=!_e(u),j=(w-A)/(f+1),N=um((w-A)/T/m)*m,V,E,_,v;if(N<1e-14&&!D&&!k)return[{value:A},{value:w}];v=Math.ceil(w/N)-Math.floor(A/N),v>T&&(N=um(v*N/T/m)*m),_e(c)||(V=Math.pow(10,c),N=Math.ceil(N*V)/V),r==="ticks"?(E=Math.floor(A/N)*N,_=Math.ceil(w/N)*N):(E=A,_=w),D&&k&&s&&aE((a-o)/s,N/1e3)?(v=Math.round(Math.min((a-o)/N,h)),N=(a-o)/v,E=o,_=a):U?(E=D?o:E,_=k?a:_,v=u-1,N=(_-E)/v):(v=(_-E)/N,ms(v,Math.round(v),N/1e3)?v=Math.round(v):v=Math.ceil(v));let S=Math.max(dm(N),dm(E));V=Math.pow(10,_e(c)?S:c),E=Math.round(E*V)/V,_=Math.round(_*V)/V;let C=0;for(D&&(g&&E!==o?(t.push({value:o}),E<o&&C++,ms(Math.round((E+C*N)*V)/V,o,wT(o,j,n))&&C++):E<o&&C++);C<v;++C){let x=Math.round((E+C*N)*V)/V;if(k&&x>a)break;t.push({value:x})}return k&&g&&_!==a?t.length&&ms(t[t.length-1].value,a,wT(a,j,n))?t[t.length-1].value=a:t.push({value:a}):(!k||_===a)&&t.push({value:_}),t}function wT(n,e,{horizontal:t,minRotation:i}){let r=Un(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var Is=class extends sr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return _e(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=tr(r),u=tr(s);c<0&&u<0?a(0):c>0&&u>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=fL(r,s);return e.bounds==="ticks"&&hm(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return uu(e,this.chart.options.locale,this.options.ticks.format)}},Pu=class extends Is{static id="linear";static defaults={ticks:{callback:ma.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Fe(e)?e:0,this.max=Fe(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Un(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},Aa=n=>Math.floor(Fn(n)),rr=(n,e)=>Math.pow(10,Aa(n)+e);function IT(n){return n/Math.pow(10,Aa(n))===1}function ET(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function pL(n,e){let t=e-n,i=Aa(t);for(;ET(n,e,i)>10;)i++;for(;ET(n,e,i)<10;)i--;return Math.min(i,Aa(n))}function gL(n,{min:e,max:t}){e=vt(n.min,e);let i=[],r=Aa(e),s=pL(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,u=Math.round((e-c)*o)/o,h=Math.floor((e-c)/a/10)*a*10,f=Math.floor((u-h)/Math.pow(10,s)),g=vt(n.min,Math.round((c+h+f*Math.pow(10,s))*o)/o);for(;g<t;)i.push({value:g,major:IT(g),significand:f}),f>=10?f=f<15?15:20:f++,f>=20&&(s++,f=2,o=s>=0?1:o),g=Math.round((c+h+f*Math.pow(10,s))*o)/o;let m=vt(n.max,g);return i.push({value:m,major:IT(m),significand:f}),i}var TT=class extends sr{static id="logarithmic";static defaults={ticks:{callback:ma.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=Is.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Fe(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Fe(e)?Math.max(0,e):null,this.max=Fe(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Fe(this._userMin)&&(this.min=e===rr(this.min,0)?rr(this.min,-1):rr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(rr(i,-1)),o(rr(r,1)))),i<=0&&s(rr(r,-1)),r<=0&&o(rr(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=gL(t,this);return e.bounds==="ticks"&&hm(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":uu(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=Fn(e),this._valueRange=Fn(this.max)-Fn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Fn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function Wm(n){let e=n.ticks;if(e.display&&n.display){let t=bt(e.backdropPadding);return fe(e.font&&e.font.size,Re.font.size)+t.height}return 0}function mL(n,e,t){return t=Ie(t)?t:[t],{w:bE(n,e.string,t),h:t.length*e.lineHeight}}function ST(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function yL(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?ke/s:0;for(let c=0;c<s;c++){let u=o.setContext(n.getPointLabelContext(c));r[c]=u.padding;let h=n.getPointPosition(c,n.drawingArea+r[c],a),f=ot(u.font),g=mL(n.ctx,f,n._pointLabels[c]);i[c]=g;let m=Ft(n.getIndexAngle(c)+a),T=Math.round(cu(m)),A=ST(T,h.x,g.w,0,180),w=ST(T,h.y,g.h,90,270);_L(t,e,m,A,w)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=wL(n,i,r)}function _L(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function vL(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),u=Math.round(cu(Ft(c.angle+_t))),h=TL(c.y,a.h,u),f=IL(u),g=EL(c.x,a.w,f);return{visible:!0,x:c.x,y:h,textAlign:f,left:g,top:h,right:g+a.w,bottom:h+a.h}}function bL(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(gn({x:t,y:i},e)||gn({x:t,y:s},e)||gn({x:r,y:i},e)||gn({x:r,y:s},e))}function wL(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:Wm(s)/2,additionalAngle:o?ke/r:0},u;for(let h=0;h<r;h++){c.padding=t[h],c.size=e[h];let f=vL(n,h,c);i.push(f),a==="auto"&&(f.visible=bL(f,u),f.visible&&(u=f))}return i}function IL(n){return n===0||n===180?"center":n<180?"left":"right"}function EL(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function TL(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function SL(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!_e(a)){let c=bs(e.borderRadius),u=bt(e.backdropPadding);n.fillStyle=a;let h=i-u.left,f=r-u.top,g=s-i+u.width,m=o-r+u.height;Object.values(c).some(T=>T!==0)?(n.beginPath(),fu(n,{x:h,y:f,w:g,h:m,radius:c}),n.fill()):n.fillRect(h,f,g,m)}}function AL(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));SL(t,o,s);let a=ot(o.font),{x:c,y:u,textAlign:h}=s;vs(t,n._pointLabels[r],c,u+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function ZT(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Pt);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function CL(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),ZT(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function xL(n,e,t){return Bn(n,{label:t,index:e,type:"pointLabel"})}var AT=class extends Is{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ma.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=bt(Wm(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Fe(e)&&!isNaN(e)?e:0,this.max=Fe(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Wm(this.options))}generateTickLabels(e){Is.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=Te(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?yL(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=Pt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Ft(e*t+Un(i))}getDistanceFromCenterForValue(e){if(_e(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(_e(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return xL(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-_t+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),ZT(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,u;if(t.pointLabels.display&&AL(this,o),r.display&&this.ticks.forEach((h,f)=>{if(f!==0||f===0&&this.min<0){c=this.getDistanceFromCenterForValue(h.value);let g=this.getContext(f),m=r.setContext(g),T=s.setContext(g);CL(this,m,c,o,T)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let h=i.setContext(this.getPointLabelContext(a)),{color:f,lineWidth:g}=h;!g||!f||(e.lineWidth=g,e.strokeStyle=f,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),u=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let u=i.setContext(this.getContext(c)),h=ot(u.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),u.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=u.backdropColor;let f=bt(u.backdropPadding);e.fillRect(-o/2-f.left,-s-h.size/2-f.top,o+f.width,h.size+f.height)}vs(e,a.label,0,-s,h,{color:u.color,strokeColor:u.textStrokeColor,strokeWidth:u.textStrokeWidth})}),e.restore()}drawTitle(){}},Mu={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},It=Object.keys(Mu);function CT(n,e){return n-e}function xT(n,e){if(_e(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Fe(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(ys(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function RT(n,e,t,i){let r=It.length;for(let s=It.indexOf(n);s<r-1;++s){let o=Mu[It[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return It[s]}return It[r-1]}function RL(n,e,t,i,r){for(let s=It.length-1;s>=It.indexOf(t);s--){let o=It[s];if(Mu[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return It[t?It.indexOf(t):0]}function DL(n){for(let e=It.indexOf(n)+1,t=It.length;e<t;++e)if(Mu[It[e]].common)return It[e]}function DT(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=lu(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function PL(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function PT(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:PL(n,i,r,t)}var kT=(()=>{class n extends sr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new z1._date(t.adapters.date);s.init(i),gs(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:xT(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function u(h){!a&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!c&&!isNaN(h.max)&&(o=Math.max(o,h.max))}(!a||!c)&&(u(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&u(this.getMinMax(!1))),s=Fe(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Fe(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=dE(s,o,a);return this._unit=i.unit||(r.autoSkip?RT(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):RL(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:DL(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),PT(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=kt(i,0,a),r=kt(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||RT(o.minUnit,i,r,this._getLabelCapacity(i)),c=fe(s.ticks.stepSize,1),u=a==="week"?o.isoWeekday:!1,h=ys(u)||u===!0,f={},g=i,m,T;if(h&&(g=+t.startOf(g,"isoWeek",u)),g=+t.startOf(g,h?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let A=s.ticks.source==="data"&&this.getDataTimestamps();for(m=g,T=0;m<r;m=+t.add(m,c,a),T++)DT(f,m,A);return(m===r||s.bounds==="ticks"||T===1)&&DT(f,m,A),Object.keys(f).sort(CT).map(w=>+w)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return Te(a,[t,i,r],this);let c=o.time.displayFormats,u=this._unit,h=this._majorUnit,f=u&&c[u],g=h&&c[h],m=r[i],T=h&&g&&m&&m.major;return this._adapter.format(t,s||(T?g:f))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Un(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,PT(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(xT(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return gE(t.sort(CT))}}return n})();function Tu(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=gi(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=gi(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let u=o-s;return u?a+(c-a)*(e-s)/u:a}var MT=class extends kT{static id="timeseries";static defaults=kT.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Tu(t,this.min),this._tableRange=Tu(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,u,h;for(o=0,a=e.length;o<a;++o)u=e[o],u>=t&&u<=i&&r.push(u);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],c=r[o-1],u=r[o],Math.round((h+c)/2)!==u&&s.push({time:u,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(Tu(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return Tu(this._table,i*this._tableRange+this._minPos,!0)}};var Es=(n,e)=>n.p0.skip||n.p1.skip?e:void 0,Ts={CHART_COLORS:{red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(231,233,237)"}},kL=[{label:"\u57FA\u790E\u529F\u7387",data:[],fill:!1,borderColor:Ts.CHART_COLORS.orange,backgroundColor:Ts.CHART_COLORS.orange,tension:.2,segment:{borderColor:n=>Es(n,"rgb(255,255,255,0.2)"),borderDash:n=>Es(n,[6,6])},spanGaps:!0},{label:"\u52A0\u5DE5\u9762\u529F\u7387",data:[],fill:!0,borderColor:Ts.CHART_COLORS.red,backgroundColor:Ts.CHART_COLORS.red,tension:.2,segment:{borderColor:n=>Es(n,"rgb(255,255,255,0.2)"),borderDash:n=>Es(n,[6,6])},spanGaps:!0},{label:"\u6BD4\u4F8B",data:[],fill:!0,yAxisID:"y-axis-1",borderColor:Ts.CHART_COLORS.green,backgroundColor:Ts.CHART_COLORS.green,tension:.2,segment:{borderColor:n=>Es(n,"rgb(255,255,255,0.2)"),borderDash:n=>Es(n,[6,6])},spanGaps:!0}],eS={type:"line",data:{labels:[],datasets:kL},options:{scales:{y:{}},responsive:!0,plugins:{title:{display:!0,text:"\u6BD4\u4F8B(\u85CD\u8272) = \u5DE5\u4F5C\u9762\u529F\u7387(\u7D05\u8272) / \u57FA\u790E\u529F\u7387(\u6A58\u8272)"}}}};var tS=(()=>{let e=class e{set source2(i){this._source2=i,this.labels=i.map(r=>r.atDate?.toString()??""),this.source_1=i.map(r=>r.basepower),this.source_2=i.map(r=>r.workpower),this.source_3=i.map(r=>r.workpower==null||r.basepower==null?null:r.workpower/r.basepower),this.update()}get source2(){return this._source2}constructor(){this.chart=void 0,this.labels=[],this.source_1=[],this.source_2=[],this.source_3=[],this._source2=[],ku.register(VT,HT,KT,Pu,YT,XT,JT)}ngOnInit(){this.initializeChart()}initializeChart(){let i=document.getElementById("myChart");i&&(this.chart=new ku(i,eS),this.update())}update(){this.chart&&(this.chart.data.labels=this.labels,this.chart.data.datasets[0].data=this.source_1,this.chart.data.datasets[1].data=this.source_2,this.chart.data.datasets[2].data=this.source_3,this.chart.update())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=Xt({type:e,selectors:[["app-result-chart"]],inputs:{source2:"source2"},standalone:!0,features:[Zt],decls:1,vars:0,consts:[["id","myChart","width","400","height","200"]],template:function(r,s){r&1&&qe(0,"canvas",0)}});let n=e;return n})();var nS=(()=>{let e=class e{constructor(i){this.fire=i}convertData(i){return{id:i.id,basepower:i.data().basepower,workpower:i.data().workpower,workStructure:i.data().workStructure,beamExpander:i.data().beamExpander,lens:i.data().lens,slit:i.data().slit,doe:i.data().doe,wavePlate:i.data().wavePlate,lambda:i.data().lambda,atDate:i.data().atDate,brandKey:i.data().brandKey,brandvalue0_Laser:i.data().brandvalue0_Laser,brandvalue1_rate:i.data().brandvalue1_rate,brandvalue2_atten:i.data().brandvalue2_atten,email:i.data().email,displayname:i.data().displayname}}getAllData(){return b(this,null,function*(){let i=[],r=ss(ui(this.fire.get_db(),this.fire.FireBaseKeyName)),s=yield os(r);return console.log(s),s.forEach(o=>{i.push(this.convertData(o))}),i.sort((o,a)=>new Date(o.atDate??"").getTime()-new Date(a.atDate??"").getTime()),i})}getSpecData(i){return b(this,null,function*(){let r=[],s=ss(ui(this.fire.get_db(),this.fire.FireBaseKeyName),B0(ht("brandKey","==",i.brandKey),ht("beamExpander","==",i.beamExpander),ht("lens","==",i.lens),ht("slit","==",i.slit),ht("doe","==",i.doe),ht("wavePlate","==",i.wavePlate),ht("lambda","==",i.lambda),ht("brandvalue0_Laser","==",i.brandvalue0_Laser),ht("brandvalue1_rate","==",i.brandvalue1_rate),ht("brandvalue2_atten","==",i.brandvalue2_atten),ht("workStructure","==",i.workStructure)));return(yield os(s)).forEach(a=>{console.log(a),r.push(this.convertData(a))}),r.sort((a,c)=>new Date(a.atDate??"").getTime()-new Date(c.atDate??"").getTime()),r})}getUserData(i){return b(this,null,function*(){let r=[],s=ss(ui(this.fire.get_db(),this.fire.FireBaseKeyName),ht("email","==",i));return(yield os(s)).forEach(a=>{r.push(this.convertData(a))}),r.sort((a,c)=>new Date(a.atDate??"").getTime()-new Date(c.atDate??"").getTime()),r})}};e.\u0275fac=function(r){return new(r||e)(ye(us))},e.\u0275prov=ce({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var OL=()=>({updateOn:"change"});function NL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function VL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function LL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function FL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function UL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function BL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function jL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function zL(n,e){if(n&1&&(L(0,"option",43),$(1),F()),n&2){let t=e.$implicit;J("value",t),q(),qt(" ",t," ")}}function qL(n,e){n&1&&(L(0,"div",46),qe(1,"div",47),L(2,"span",48),$(3,"Loading..."),F()())}function $L(n,e){if(n&1){let t=Hs();qe(0,"app-result-chart",49),L(1,"div",50)(2,"div",51)(3,"button",52),dh(),L(4,"svg",53),qe(5,"path",54),F()()(),fh(),L(6,"div",55)(7,"button",56),$e("click",function(){De(t);let r=Tt(2);return Pe(r.download_data())}),dh(),L(8,"svg",57),qe(9,"path",58)(10,"path",59),F()()()(),fh(),L(11,"div")(12,"div",60),qe(13,"app-result-table",61),F()()}if(n&2){let t=Tt(2);J("source2",t.recieve_data),q(13),J("source",t.recieve_data)}}function WL(n,e){if(n&1&&(L(0,"div"),qe(1,"hr",20),L(2,"div",44),ut(3,qL,4,0,"div",45)(4,$L,14,2,"ng-template",null,1,T_),F()()),n&2){let t=b_(5),i=Tt();q(3),J("ngIf",i.is_loading)("ngIfElse",t)}}var Vj=(()=>{let e=class e{constructor(i,r){this.recieve_data=[],this.is_TableShow=!1,this.is_loading=!1,this.brands2={},this.keys_brands2=Object.keys(this.brands2),this.lambdas=["1030","515","343","258"],this.workStructureList=["\u76F4\u5BEB","Scanner"],this.beamExpanderList=["x(\u7121)","VRE13","VEX13"],this.slitList=["x(\u7121)"],this.lensList=["F 70 telecentric","F 100 telecentric","F 160 telecentric","F 103 telecentric Ronar-Simith","F 254 telecentric Ronar-Simith","Mitutoyo NIR 5X","Mitutoyo NIR 10X","Mitutoyo NIR 20X","Mitutoyo NIR 50X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 20X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 50X","OLYMPUS IR \u4FEE\u50CF\u5DEE 50X"],this.doeList=["X(\u7121)","\u5E73\u9802","M shape"],this.wavePlateList=["X(\u7121)","\u03BB2","\u03BB/4"],this.fire=i,this.getData=r,this.data=this.fire.getNewPowerData()}ngOnInit(){this.brands2["LC 80W"]=["S1",100,80],this.brands2.EKSPLA=["S2",200,100],this.brands2.Litlit=["S2",100,100],this.brands2["LC 40W"]=["S3",100,80],this.keys_brands2=Object.keys(this.brands2),this.data.brandKey=this.keys_brands2[0],this.data.lambda=this.lambdas[0],this.data.workStructure=this.workStructureList[0],this.data.beamExpander=this.beamExpanderList[0],this.data.slit=this.slitList[0],this.data.lens=this.lensList[0],this.data.doe=this.doeList[0],this.data.wavePlate=this.wavePlateList[0],this.data.atDate=new Date().toISOString().split("T")[0]}data_complete(){return this.data.brandvalue0_Laser=this.brands2[this.data.brandKey][0],this.data.brandvalue1_rate=this.brands2[this.data.brandKey][1],this.data.brandvalue2_atten=this.brands2[this.data.brandKey][2],this.data.email=this.fire.get_loginInfo()?.user?.user.email??null,this.data.displayname=this.fire.get_loginInfo()?.user?.user.displayName??null,this.data.basepower!=null&&this.data.workpower!=null&&this.data.workStructure!=null&&this.data.beamExpander!=null&&this.data.lens!=null&&this.data.slit!=null&&this.data.doe!=null&&this.data.wavePlate!=null&&this.data.lambda!=null&&this.data.atDate!=null&&this.data.brandKey!=null&&this.data.brandvalue0_Laser!=null&&this.data.brandvalue1_rate!=null&&this.data.brandvalue2_atten!=null}onGetDataClose(){this.recieve_data=[],console.log("onClose"),this.is_TableShow=!1}onGetDataStructure(){this.recieve_data=[],this.is_loading=!0,this.data_complete(),console.log(this.data),this.getData.getSpecData(this.data).then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}onGetDataUser(){this.recieve_data=[],this.is_loading=!0,this.data_complete(),console.log(this.data.email),this.getData.getUserData(this.data.email).then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}onGetDataAll(){this.recieve_data=[],this.is_loading=!0,this.getData.getAllData().then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}convertToCSV(i){let r=Object.keys(i[0]).join(","),s=i.map(o=>Object.values(o).join(","));return`${r}
${s.join(`
`)}`}download_data(){let i=this.convertToCSV(this.recieve_data),r="data:text/csv;charset=utf-8,"+encodeURIComponent(i),s=document.createElement("a");s.href=r,s.download="recieve_data.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}onSubmit(){console.log(this.data_complete()),console.log("brands2\u7684key:",this.data),this.fire.addData(this.data)}};e.\u0275fac=function(r){return new(r||e)(de(us),de(nS))},e.\u0275cmp=Xt({type:e,selectors:[["app-inputdata"]],standalone:!0,features:[Zt],decls:100,vars:25,consts:[["form","ngForm"],["elseBlock",""],[1,"container"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"text-center"],[1,"blockquote"],[1,"row","g-3"],[1,"col-md-12"],["for","brandKey",1,"form-label"],["id","brandKey","name","brandKey","required","",1,"form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["for","laser",1,"form-label"],["type","text","id","laser","disabled","true",1,"form-control",3,"value"],["for","rate",1,"form-label"],["type","text","id","rate","disabled","true",1,"form-control",3,"value"],["for","attenuator",1,"form-label"],["type","text","id","attenuator","disabled","true",1,"form-control",3,"value"],["for","lambda",1,"form-label"],["id","lambda","name","lambda","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"my-4"],["for","workStructure",1,"form-label"],["id","workStructure","name","workStructure","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","beamExpander",1,"form-label"],["id","beamExpander","name","beamExpander","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","slit",1,"form-label"],["id","slit","name","slit","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","lens",1,"form-label"],["id","lens","name","lens","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","doe",1,"form-label"],["id","doe","name","doe","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","wavePlate",1,"form-label"],["id","wavePlate","name","wavePlate","required","",1,"form-select",3,"ngModelChange","ngModel"],["role","group","aria-label","Small button group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-primary",3,"click"],[4,"ngIf"],["for","basepower",1,"form-label"],["type","number","id","basepower","name","basepower","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","workpower","name","workpower","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["for","atDate",1,"form-label"],["type","date","id","atDate","name","atDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"],[3,"value"],[1,"border","border-primary"],["class","div-loading",4,"ngIf","ngIfElse"],[1,"div-loading"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,""],[3,"source2"],[1,"row","align-items-start"],["data-bs-toggle","collapse","data-bs-placement","top","title","\u5C55\u793A/\u6536\u7E2E\u8A73\u7D30\u8868\u683C",1,"col-md-1"],["type","button","aria-label","Close","data-bs-toggle","collapse","data-bs-placement","top","title","\u5C55\u793A/\u6536\u7E2E\u8A73\u7D30\u8868\u683C","data-bs-target","#collapseWidthExample","aria-expanded","false","aria-controls","collapseWidthExample",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-table"],["d","M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 2h-4v3h4zm0 4h-4v3h4zm0 4h-4v3h3a1 1 0 0 0 1-1zm-5 3v-3H6v3zm-5 0v-3H1v2a1 1 0 0 0 1 1zm-4-4h4V8H1zm0-4h4V4H1zm5-3v3h4V4zm4 4H6v3h4z"],[1,"col-md-1"],["type","button","data-bs-toggle","tooltip","data-bs-placement","top","title","\u8CC7\u6599\u4E0B\u8F09[.csv]",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"],["id","collapseWidthExample",1,"collapse"],[3,"source"]],template:function(r,s){if(r&1){let o=Hs();L(0,"div",2)(1,"form",3,0),$e("ngSubmit",function(){return De(o),Pe(s.onSubmit())}),L(3,"figure",4)(4,"blockquote",5)(5,"p"),$(6,"\u96F7\u5C04"),F()()(),L(7,"div",6)(8,"div",7)(9,"label",8),$(10,"\u54C1\u724C"),F(),L(11,"select",9),gt("ngModelChange",function(c){return De(o),pt(s.data.brandKey,c)||(s.data.brandKey=c),Pe(c)}),ut(12,NL,2,2,"option",10),F()(),L(13,"div",11)(14,"label",12),$(15,"\u8A2D\u5099"),F(),qe(16,"input",13),F(),L(17,"div",11)(18,"label",14),$(19,"\u91CD\u8907\u7387(kHz)"),F(),qe(20,"input",15),F(),L(21,"div",11)(22,"label",16),$(23,"attenuator(%)"),F(),qe(24,"input",17),F(),L(25,"div",7)(26,"label",18),$(27,"\u6CE2\u9577(nm)"),F(),L(28,"select",19),gt("ngModelChange",function(c){return De(o),pt(s.data.lambda,c)||(s.data.lambda=c),Pe(c)}),ut(29,VL,2,2,"option",10),F()()(),qe(30,"hr",20),L(31,"figure",4)(32,"blockquote",5)(33,"p"),$(34,"\u5149\u8DEF\u67B6\u69CB"),F()()(),L(35,"div",6)(36,"div",7)(37,"label",21),$(38,"\u52A0\u5DE5\u7CFB\u7D71"),F(),L(39,"select",22),gt("ngModelChange",function(c){return De(o),pt(s.data.workStructure,c)||(s.data.workStructure=c),Pe(c)}),ut(40,LL,2,2,"option",10),F()(),L(41,"div",7)(42,"label",23),$(43,"\u64F4\u675F\u93E1"),F(),L(44,"select",24),gt("ngModelChange",function(c){return De(o),pt(s.data.beamExpander,c)||(s.data.beamExpander=c),Pe(c)}),ut(45,FL,2,2,"option",10),F()(),L(46,"div",7)(47,"label",25),$(48,"\u72F9\u7E2B"),F(),L(49,"select",26),gt("ngModelChange",function(c){return De(o),pt(s.data.slit,c)||(s.data.slit=c),Pe(c)}),ut(50,UL,2,2,"option",10),F()(),L(51,"div",7)(52,"label",27),$(53,"\u93E1\u982D"),F(),L(54,"select",28),gt("ngModelChange",function(c){return De(o),pt(s.data.lens,c)||(s.data.lens=c),Pe(c)}),ut(55,BL,2,2,"option",10),F()(),L(56,"div",7)(57,"label",29),$(58,"DOE"),F(),L(59,"select",30),gt("ngModelChange",function(c){return De(o),pt(s.data.doe,c)||(s.data.doe=c),Pe(c)}),ut(60,jL,2,2,"option",10),F()(),L(61,"div",7)(62,"label",31),$(63,"DOE"),F(),L(64,"select",32),gt("ngModelChange",function(c){return De(o),pt(s.data.wavePlate,c)||(s.data.wavePlate=c),Pe(c)}),ut(65,zL,2,2,"option",10),F()()(),qe(66,"hr",20),L(67,"div",6)(68,"div",33)(69,"button",34),$e("click",function(){return De(o),Pe(s.onGetDataClose())}),$(70," \u95DC\u9589 "),F(),L(71,"button",34),$e("click",function(){return De(o),Pe(s.onGetDataStructure())}),$(72," \u4F9D\u67B6\u69CB "),F(),L(73,"button",34),$e("click",function(){return De(o),Pe(s.onGetDataUser())}),$(74," \u4F9D\u672C\u4EBA "),F(),L(75,"button",34),$e("click",function(){return De(o),Pe(s.onGetDataAll())}),$(76," \u5168\u90E8 "),F()()(),ut(77,WL,6,2,"div",35),qe(78,"hr",20),L(79,"figure",4)(80,"blockquote",5)(81,"p"),$(82,"\u91CF\u6E2C\u7D00\u9304"),F()()(),L(83,"div",6)(84,"div",7)(85,"label",36),$(86,"\u57FA\u983B\u5149\u96F7\u5C04\u529F\u7387(w)"),F(),L(87,"input",37),gt("ngModelChange",function(c){return De(o),pt(s.data.basepower,c)||(s.data.basepower=c),Pe(c)}),F()(),L(88,"div",7)(89,"label",36),$(90,"\u52A0\u5DE5\u9762\u529F\u7387(w)"),F(),L(91,"input",38),gt("ngModelChange",function(c){return De(o),pt(s.data.workpower,c)||(s.data.workpower=c),Pe(c)}),F()(),L(92,"div",39)(93,"label",40),$(94,"\u65E5\u671F"),F(),L(95,"input",41),gt("ngModelChange",function(c){return De(o),pt(s.data.atDate,c)||(s.data.atDate=c),Pe(c)}),F()()(),qe(96,"hr",20),L(97,"div",6)(98,"button",42),$(99," \u78BA\u8A8D\u9001\u51FA "),F()()()()}r&2&&(q(11),ft("ngModel",s.data.brandKey),J("ngModelOptions",w_(24,OL)),q(),J("ngForOf",s.keys_brands2),q(4),J("value",s.brands2[s.data.brandKey][0]),q(4),J("value",s.brands2[s.data.brandKey][1]),q(4),J("value",s.brands2[s.data.brandKey][2]),q(4),ft("ngModel",s.data.lambda),q(),J("ngForOf",s.lambdas),q(10),ft("ngModel",s.data.workStructure),q(),J("ngForOf",s.workStructureList),q(4),ft("ngModel",s.data.beamExpander),q(),J("ngForOf",s.beamExpanderList),q(4),ft("ngModel",s.data.slit),q(),J("ngForOf",s.slitList),q(4),ft("ngModel",s.data.lens),q(),J("ngForOf",s.lensList),q(4),ft("ngModel",s.data.doe),q(),J("ngForOf",s.doeList),q(4),ft("ngModel",s.data.wavePlate),q(),J("ngForOf",s.wavePlateList),q(12),J("ngIf",s.is_TableShow),q(10),ft("ngModel",s.data.basepower),q(4),ft("ngModel",s.data.workpower),q(4),ft("ngModel",s.data.atDate))},dependencies:[Rc,Cc,Qv,Jv,Mr,xd,xc,Tc,Sc,Rd,To,Eo,Ys,Qa,Xa,FI,tS],styles:[".div-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:50%;left:50%}.custom-tooltip[_ngcontent-%COMP%]{--bs-tooltip-bg: var(--bd-violet-bg);--bs-tooltip-color: var(--bs-white)}"]});let n=e;return n})();export{QL as a,U_ as b,vF as c,sA as d,NA as e,t2 as f,us as g,fj as h,Vj as i};
