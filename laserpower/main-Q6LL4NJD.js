import{$ as _a,$a as bi,A as Wi,Aa as Ds,Ab as Ta,B as Sr,Ba as U0,Bb as Vl,C as nm,Ca as j0,Cb as Ul,D as im,Da as B0,Db as rw,E as Cn,Ea as z0,Eb as lm,F as R0,Fa as q0,Fb as um,G as k0,Ga as W0,Gb as ks,H as Cr,Ha as $0,Hb as sw,I as $i,Ia as rn,Ib as Ge,J as rm,Ja as H0,Jb as Ps,K as P0,Ka as G0,Kb as ow,L as M0,La as Ia,Lb as aw,M as O0,Ma as j,Mb as $t,N as kl,Na as Q,Nb as jl,O as Pl,Oa as Ea,Ob as cw,P as Dn,Pa as K0,Pb as lw,Q as As,Qa as Nl,Qb as Ms,R as Xt,Ra as Mr,Rb as Ki,S as Mt,Sa as Y0,Sb as uw,T as pi,Ta as Zt,Tb as dw,U as et,Ua as Q0,Ub as hw,V as de,Va as He,Vb as fw,W as N0,Wa as Hi,Wb as on,X as Tt,Xa as X0,Xb as mw,Y as sm,Ya as J0,Yb as pw,Z as X,Za as Z0,Zb as dm,_ as J,_a as Ct,_b as gw,a as $,aa as Wt,ab as H,b as Rt,ba as Jt,bb as Rn,ca as he,cb as Fl,d as zi,da as Vt,db as O,e as x,ea as ya,eb as N,f as ga,fa as F0,fb as yt,g as S0,ga as va,gb as _i,h as Jf,ha as Dr,hb as Ot,i as Zf,ia as Ss,ib as te,j as tm,ja as wt,jb as Rs,k as pn,ka as It,kb as Gi,l as We,la as om,lb as tw,m as qi,ma as am,mb as kn,n as Cl,na as gi,nb as xa,o as $e,oa as cm,ob as B,p as tt,pa as Ml,pb as Ne,q as Ar,qa as Rr,qb as Fe,r as C0,ra as ye,rb as oe,s as D0,sa as bn,sb as ae,t as ot,ta as L0,tb as ce,u as ba,ua as Ol,ub as sn,v as gn,va as V0,vb as ee,w as Dl,wa as kr,wb as ew,x as em,xa as Pr,xb as Ll,y as Rl,ya as wa,yb as nw,z as mi,za as Cs,zb as iw}from"./chunk-76YY3PGC.js";var fm=class{};var Os=class n{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let i=e.indexOf(":");if(i>0){let r=e.slice(0,i),s=r.toLowerCase(),o=e.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,i)=>{this.setHeaderEntries(i,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,i])=>{this.setHeaderEntries(e,i)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new n;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let i=t.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(t.name,e);let r=(t.op==="a"?this.headers.get(e):void 0)||[];r.push(...i),this.headers.set(e,r);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let i=(Array.isArray(e)?e:[e]).map(s=>s.toString()),r=t.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(t,r)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var mm=class{encodeKey(t){return bw(t)}encodeValue(t){return bw(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function ck(n,t){let e=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[t.decodeKey(r),""]:[t.decodeKey(r.slice(0,s)),t.decodeValue(r.slice(s+1))],c=e.get(o)||[];c.push(a),e.set(o,c)}),e}var lk=/%(\d[a-f0-9])/gi,uk={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function bw(n){return encodeURIComponent(n).replace(lk,(t,e)=>uk[e]??t)}function Bl(n){return`${n}`}var Yi=class n{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new mm,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=ck(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let i=t.fromObject[e],r=Array.isArray(i)?i.map(Bl):[Bl(i)];this.map.set(e,r)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(i=>{let r=t[i];Array.isArray(r)?r.forEach(s=>{e.push({param:i,value:s,op:"a"})}):e.push({param:i,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(i=>e+"="+this.encoder.encodeValue(i)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new n({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(Bl(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let i=this.map.get(t.param)||[],r=i.indexOf(Bl(t.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(t.param,i):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var pm=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function dk(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function _w(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function yw(n){return typeof Blob<"u"&&n instanceof Blob}function vw(n){return typeof FormData<"u"&&n instanceof FormData}function hk(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Aa=class n{constructor(t,e,i,r){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(dk(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Os,this.context??=new pm,!this.params)this.params=new Yi,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),c=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||_w(this.body)||yw(this.body)||vw(this.body)||hk(this.body)?this.body:this.body instanceof Yi?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||vw(this.body)?null:yw(this.body)?this.body.type||null:_w(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Yi?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,i=t.url||this.url,r=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,c=t.reportProgress??this.reportProgress,l=t.headers||this.headers,d=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(l=Object.keys(t.setHeaders).reduce((m,g)=>m.set(g,t.setHeaders[g]),l)),t.setParams&&(d=Object.keys(t.setParams).reduce((m,g)=>m.set(g,t.setParams[g]),d)),new n(e,i,o,{params:d,headers:l,context:h,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},ww=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(ww||{}),gm=class{constructor(t,e=Iw.Ok,i="OK"){this.headers=t.headers||new Os,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||i,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}};var bm=class n extends gm{constructor(t={}){super(t),this.type=ww.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new n({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}};var Iw=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(Iw||{});function hm(n,t){return{body:t,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Ew=(()=>{let t=class t{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Aa)o=i;else{let l;s.headers instanceof Os?l=s.headers:l=new Os(s.headers);let d;s.params&&(s.params instanceof Yi?d=s.params:d=new Yi({fromObject:s.params})),o=new Aa(i,r,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:d,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=tt(o).pipe(Sr(l=>this.handler.handle(l)));if(i instanceof Aa||s.observe==="events")return a;let c=a.pipe(mi(l=>l instanceof bm));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ot(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ot(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ot(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ot(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Yi().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,hm(s,r))}post(i,r,s={}){return this.request("POST",i,hm(s,r))}put(i,r,s={}){return this.request("PUT",i,hm(s,r))}};t.\u0275fac=function(r){return new(r||t)(X(fm))},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})();var vm=class extends aw{constructor(){super(...arguments),this.supportsDOMEvents=!0}},wm=class n extends vm{static makeCurrent(){ow(new n)}onAndCancel(t,e,i){return t.addEventListener(e,i),()=>{t.removeEventListener(e,i)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=pk();return e==null?null:gk(e)}resetBaseElement(){Sa=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return cw(document.cookie,t)}},Sa=null;function pk(){return Sa=Sa||document.querySelector("base"),Sa?Sa.getAttribute("href"):null}function gk(n){return new URL(n,document.baseURI).pathname}var bk=(()=>{let t=class t{build(){return new XMLHttpRequest}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})(),Im=new Tt(""),Sw=(()=>{let t=class t{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Mt(5101,!1);return this._eventNameToPlugin.set(i,r),r}};t.\u0275fac=function(r){return new(r||t)(X(Im),X(Zt))},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})(),zl=class{constructor(t){this._doc=t}},_m="ng-app-id",Cw=(()=>{let t=class t{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=dm(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${_m}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(_m),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(_m,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};t.\u0275fac=function(r){return new(r||t)(X($t),X(Ol),X(wa,8),X(kr))},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})(),ym={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Tm=/%COMP%/g,Dw="%COMP%",_k=`_nghost-${Dw}`,yk=`_ngcontent-${Dw}`,vk=!0,wk=new Tt("",{providedIn:"root",factory:()=>vk});function Ik(n){return yk.replace(Tm,n)}function Ek(n){return _k.replace(Tm,n)}function Rw(n,t){return t.map(e=>e.replace(Tm,n))}var ql=(()=>{let t=class t{constructor(i,r,s,o,a,c,l,d=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=d,this.rendererByCompId=new Map,this.platformIsServer=dm(c),this.defaultRenderer=new Ca(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===_a.ShadowDom&&(r=Rt($({},r),{encapsulation:_a.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Wl?s.applyToHost(i):s instanceof Da&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,d=this.sharedStylesHost,h=this.removeStylesOnCompDestroy,m=this.platformIsServer;switch(r.encapsulation){case _a.Emulated:o=new Wl(l,d,r,this.appId,h,a,c,m);break;case _a.ShadowDom:return new Em(l,d,i,r,a,c,this.nonce,m);default:o=new Da(l,d,r,h,a,c,m);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};t.\u0275fac=function(r){return new(r||t)(X(Sw),X(Cw),X(Ol),X(wk),X($t),X(kr),X(Zt),X(wa))},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})(),Ca=class{constructor(t,e,i,r){this.eventManager=t,this.doc=e,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(ym[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(xw(t)?t.content:t).appendChild(e)}insertBefore(t,e,i){t&&(xw(t)?t.content:t).insertBefore(e,i)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let i=typeof t=="string"?this.doc.querySelector(t):t;if(!i)throw new Mt(-5104,!1);return e||(i.textContent=""),i}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,i,r){if(r){e=r+":"+e;let s=ym[r];s?t.setAttributeNS(s,e,i):t.setAttribute(e,i)}else t.setAttribute(e,i)}removeAttribute(t,e,i){if(i){let r=ym[i];r?t.removeAttributeNS(r,e):t.removeAttribute(`${i}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,i,r){r&(Ia.DashCase|Ia.Important)?t.style.setProperty(e,i,r&Ia.Important?"important":""):t.style[e]=i}removeStyle(t,e,i){i&Ia.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,i){t!=null&&(t[e]=i)}setValue(t,e){t.nodeValue=e}listen(t,e,i){if(typeof t=="string"&&(t=Ps().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(i))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function xw(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Em=class extends Ca{constructor(t,e,i,r,s,o,a,c){super(t,s,o,c),this.sharedStylesHost=e,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=Rw(r.id,r.styles);for(let d of l){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=d,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,i){return super.insertBefore(this.nodeOrShadowRoot(t),e,i)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Da=class extends Ca{constructor(t,e,i,r,s,o,a,c){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=r,this.styles=c?Rw(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Wl=class extends Da{constructor(t,e,i,r,s,o,a,c){let l=r+"-"+i.id;super(t,e,i,s,o,a,c,l),this.contentAttr=Ik(l),this.hostAttr=Ek(l)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let i=super.createElement(t,e);return super.setAttribute(i,this.contentAttr,""),i}},xk=(()=>{let t=class t extends zl{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};t.\u0275fac=function(r){return new(r||t)(X($t))},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})(),Tw=["alt","control","meta","shift"],Tk={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Ak={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Sk=(()=>{let t=class t extends zl{constructor(i){super(i)}supports(i){return t.parseEventName(i)!=null}addEventListener(i,r,s){let o=t.parseEventName(r),a=t.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ps().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=t._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),Tw.forEach(d=>{let h=r.indexOf(d);h>-1&&(r.splice(h,1),a+=d+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=Tk[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),Tw.forEach(a=>{if(a!==s){let c=Ak[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{t.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};t.\u0275fac=function(r){return new(r||t)(X($t))},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})();function kw(n,t){return sw($({rootComponent:n},Ck(t)))}function Ck(n){return{appProviders:[...Mk,...n?.providers??[]],platformProviders:Pk}}function Dk(){wm.makeCurrent()}function Rk(){return new Rr}function kk(){return L0(document),document}var Pk=[{provide:kr,useValue:mw},{provide:V0,useValue:Dk,multi:!0},{provide:$t,useFactory:kk,deps:[]}];var Mk=[{provide:F0,useValue:"root"},{provide:Rr,useFactory:Rk,deps:[]},{provide:Im,useClass:xk,multi:!0,deps:[$t,Zt,kr]},{provide:Im,useClass:Sk,multi:!0,deps:[$t]},ql,Cw,Sw,{provide:Nl,useExisting:ql},{provide:gw,useClass:bk,deps:[]},[]];var Pw=(()=>{let t=class t{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};t.\u0275fac=function(r){return new(r||t)(X($t))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Am=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:function(r){let s=null;return r?s=new(r||t):s=X(Ok),s},providedIn:"root"});let n=t;return n})(),Ok=(()=>{let t=class t extends Am{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case rn.NONE:return r;case rn.HTML:return Ds(r,"HTML")?Cs(r):$0(this._doc,String(r)).toString();case rn.STYLE:return Ds(r,"Style")?Cs(r):r;case rn.SCRIPT:if(Ds(r,"Script"))return Cs(r);throw new Mt(5200,!1);case rn.URL:return Ds(r,"URL")?Cs(r):W0(String(r));case rn.RESOURCE_URL:if(Ds(r,"ResourceURL"))return Cs(r);throw new Mt(5201,!1);default:throw new Mt(5202,!1)}}bypassSecurityTrustHtml(i){return U0(i)}bypassSecurityTrustStyle(i){return j0(i)}bypassSecurityTrustScript(i){return B0(i)}bypassSecurityTrustUrl(i){return z0(i)}bypassSecurityTrustResourceUrl(i){return q0(i)}};t.\u0275fac=function(r){return new(r||t)(X($t))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var lt="primary",Wa=Symbol("RouteTitle"),km=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function Us(n){return new km(n)}function Vk(n,t,e){let i=e.path.split("/");if(i.length>n.length||e.pathMatch==="full"&&(t.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function Uk(n,t){if(n.length!==t.length)return!1;for(let e=0;e<n.length;++e)if(!jn(n[e],t[e]))return!1;return!0}function jn(n,t){let e=n?Pm(n):void 0,i=t?Pm(t):void 0;if(!e||!i||e.length!=i.length)return!1;let r;for(let s=0;s<e.length;s++)if(r=e[s],!Uw(n[r],t[r]))return!1;return!0}function Pm(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Uw(n,t){if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;let e=[...n].sort(),i=[...t].sort();return e.every((r,s)=>i[s]===r)}else return n===t}function jw(n){return n.length>0?n[n.length-1]:null}function Ji(n){return C0(n)?n:Ul(n)?$e(Promise.resolve(n)):tt(n)}var jk={exact:zw,subset:qw},Bw={exact:Bk,subset:zk,ignored:()=>!0};function Ow(n,t,e){return jk[e.paths](n.root,t.root,e.matrixParams)&&Bw[e.queryParams](n.queryParams,t.queryParams)&&!(e.fragment==="exact"&&n.fragment!==t.fragment)}function Bk(n,t){return jn(n,t)}function zw(n,t,e){if(!Nr(n.segments,t.segments)||!Gl(n.segments,t.segments,e)||n.numberOfChildren!==t.numberOfChildren)return!1;for(let i in t.children)if(!n.children[i]||!zw(n.children[i],t.children[i],e))return!1;return!0}function zk(n,t){return Object.keys(t).length<=Object.keys(n).length&&Object.keys(t).every(e=>Uw(n[e],t[e]))}function qw(n,t,e){return Ww(n,t,t.segments,e)}function Ww(n,t,e,i){if(n.segments.length>e.length){let r=n.segments.slice(0,e.length);return!(!Nr(r,e)||t.hasChildren()||!Gl(r,e,i))}else if(n.segments.length===e.length){if(!Nr(n.segments,e)||!Gl(n.segments,e,i))return!1;for(let r in t.children)if(!n.children[r]||!qw(n.children[r],t.children[r],i))return!1;return!0}else{let r=e.slice(0,n.segments.length),s=e.slice(n.segments.length);return!Nr(n.segments,r)||!Gl(n.segments,r,i)||!n.children[lt]?!1:Ww(n.children[lt],t,s,i)}}function Gl(n,t,e){return t.every((i,r)=>Bw[e](n[r].parameters,i.parameters))}var Qi=class{constructor(t=new At([],{}),e={},i=null){this.root=t,this.queryParams=e,this.fragment=i}get queryParamMap(){return this._queryParamMap??=Us(this.queryParams),this._queryParamMap}toString(){return $k.serialize(this)}},At=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Kl(this)}},Or=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=Us(this.parameters),this._parameterMap}toString(){return Hw(this)}};function qk(n,t){return Nr(n,t)&&n.every((e,i)=>jn(e.parameters,t[i].parameters))}function Nr(n,t){return n.length!==t.length?!1:n.every((e,i)=>e.path===t[i].path)}function Wk(n,t){let e=[];return Object.entries(n.children).forEach(([i,r])=>{i===lt&&(e=e.concat(t(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==lt&&(e=e.concat(t(r,i)))}),e}var rp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:()=>new Ql,providedIn:"root"});let n=t;return n})(),Ql=class{parse(t){let e=new Om(t);return new Qi(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${Ra(t.root,!0)}`,i=Kk(t.queryParams),r=typeof t.fragment=="string"?`#${Hk(t.fragment)}`:"";return`${e}${i}${r}`}},$k=new Ql;function Kl(n){return n.segments.map(t=>Hw(t)).join("/")}function Ra(n,t){if(!n.hasChildren())return Kl(n);if(t){let e=n.children[lt]?Ra(n.children[lt],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==lt&&i.push(`${r}:${Ra(s,!1)}`)}),i.length>0?`${e}(${i.join("//")})`:e}else{let e=Wk(n,(i,r)=>r===lt?[Ra(n.children[lt],!1)]:[`${r}:${Ra(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[lt]!=null?`${Kl(n)}/${e[0]}`:`${Kl(n)}/(${e.join("//")})`}}function $w(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function $l(n){return $w(n).replace(/%3B/gi,";")}function Hk(n){return encodeURI(n)}function Mm(n){return $w(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Yl(n){return decodeURIComponent(n)}function Nw(n){return Yl(n.replace(/\+/g,"%20"))}function Hw(n){return`${Mm(n.path)}${Gk(n.parameters)}`}function Gk(n){return Object.entries(n).map(([t,e])=>`;${Mm(t)}=${Mm(e)}`).join("")}function Kk(n){let t=Object.entries(n).map(([e,i])=>Array.isArray(i)?i.map(r=>`${$l(e)}=${$l(r)}`).join("&"):`${$l(e)}=${$l(i)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Yk=/^[^\/()?;#]+/;function Sm(n){let t=n.match(Yk);return t?t[0]:""}var Qk=/^[^\/()?;=#]+/;function Xk(n){let t=n.match(Qk);return t?t[0]:""}var Jk=/^[^=?&#]+/;function Zk(n){let t=n.match(Jk);return t?t[0]:""}var tP=/^[^&#]+/;function eP(n){let t=n.match(tP);return t?t[0]:""}var Om=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new At([],{}):new At([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(i[lt]=new At(t,e)),i}parseSegment(){let t=Sm(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new Mt(4009,!1);return this.capture(t),new Or(Yl(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Xk(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let r=Sm(this.remaining);r&&(i=r,this.capture(i))}t[Yl(e)]=Yl(i)}parseQueryParam(t){let e=Zk(this.remaining);if(!e)return;this.capture(e);let i="";if(this.consumeOptional("=")){let o=eP(this.remaining);o&&(i=o,this.capture(i))}let r=Nw(e),s=Nw(i);if(t.hasOwnProperty(r)){let o=t[r];Array.isArray(o)||(o=[o],t[r]=o),o.push(s)}else t[r]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Sm(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Mt(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=lt);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[lt]:new At([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new Mt(4011,!1)}};function Gw(n){return n.segments.length>0?new At([],{[lt]:n}):n}function Kw(n){let t={};for(let[i,r]of Object.entries(n.children)){let s=Kw(r);if(i===lt&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[i]=s)}let e=new At(n.segments,t);return nP(e)}function nP(n){if(n.numberOfChildren===1&&n.children[lt]){let t=n.children[lt];return new At(n.segments.concat(t.segments),t.children)}return n}function js(n){return n instanceof Qi}function iP(n,t,e=null,i=null){let r=Yw(n);return Qw(r,t,e,i)}function Yw(n){let t;function e(s){let o={};for(let c of s.children){let l=e(c);o[c.outlet]=l}let a=new At(s.url,o);return s===n&&(t=a),a}let i=e(n.root),r=Gw(i);return t??r}function Qw(n,t,e,i){let r=n;for(;r.parent;)r=r.parent;if(t.length===0)return Cm(r,r,r,e,i);let s=rP(t);if(s.toRoot())return Cm(r,r,new At([],{}),e,i);let o=sP(s,r,n),a=o.processChildren?Ma(o.segmentGroup,o.index,s.commands):Jw(o.segmentGroup,o.index,s.commands);return Cm(r,o.segmentGroup,a,e,i)}function Xl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Fa(n){return typeof n=="object"&&n!=null&&n.outlets}function Cm(n,t,e,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(d=>`${d}`):`${l}`});let o;n===t?o=e:o=Xw(n,t,e);let a=Gw(Kw(o));return new Qi(a,s,r)}function Xw(n,t,e){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===t?i[r]=e:i[r]=Xw(s,t,e)}),new At(n.segments,i)}var Jl=class{constructor(t,e,i){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=i,t&&i.length>0&&Xl(i[0]))throw new Mt(4003,!1);let r=i.find(Fa);if(r&&r!==jw(i))throw new Mt(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function rP(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Jl(!0,0,n);let t=0,e=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?e=!0:a===".."?t++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new Jl(e,t,i)}var Ls=class{constructor(t,e,i){this.segmentGroup=t,this.processChildren=e,this.index=i}};function sP(n,t,e){if(n.isAbsolute)return new Ls(t,!0,0);if(!e)return new Ls(t,!1,NaN);if(e.parent===null)return new Ls(e,!0,0);let i=Xl(n.commands[0])?0:1,r=e.segments.length-1+i;return oP(e,r,n.numberOfDoubleDots)}function oP(n,t,e){let i=n,r=t,s=e;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Mt(4005,!1);r=i.segments.length}return new Ls(i,!1,r-s)}function aP(n){return Fa(n[0])?n[0].outlets:{[lt]:n}}function Jw(n,t,e){if(n??=new At([],{}),n.segments.length===0&&n.hasChildren())return Ma(n,t,e);let i=cP(n,t,e),r=e.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new At(n.segments.slice(0,i.pathIndex),{});return s.children[lt]=new At(n.segments.slice(i.pathIndex),n.children),Ma(s,0,r)}else return i.match&&r.length===0?new At(n.segments,{}):i.match&&!n.hasChildren()?Nm(n,t,e):i.match?Ma(n,0,r):Nm(n,t,e)}function Ma(n,t,e){if(e.length===0)return new At(n.segments,{});{let i=aP(e),r={};if(Object.keys(i).some(s=>s!==lt)&&n.children[lt]&&n.numberOfChildren===1&&n.children[lt].segments.length===0){let s=Ma(n.children[lt],t,e);return new At(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Jw(n.children[s],t,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new At(n.segments,r)}}function cP(n,t,e){let i=0,r=t,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=e.length)return s;let o=n.segments[r],a=e[i];if(Fa(a))break;let c=`${a}`,l=i<e.length-1?e[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!Lw(c,l,o))return s;i+=2}else{if(!Lw(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Nm(n,t,e){let i=n.segments.slice(0,t),r=0;for(;r<e.length;){let s=e[r];if(Fa(s)){let c=lP(s.outlets);return new At(i,c)}if(r===0&&Xl(e[0])){let c=n.segments[t];i.push(new Or(c.path,Fw(e[0]))),r++;continue}let o=Fa(s)?s.outlets[lt]:`${s}`,a=r<e.length-1?e[r+1]:null;o&&a&&Xl(a)?(i.push(new Or(o,Fw(a))),r+=2):(i.push(new Or(o,{})),r++)}return new At(i,{})}function lP(n){let t={};return Object.entries(n).forEach(([e,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(t[e]=Nm(new At([],{}),0,i))}),t}function Fw(n){let t={};return Object.entries(n).forEach(([e,i])=>t[e]=`${i}`),t}function Lw(n,t,e){return n==e.path&&jn(t,e.parameters)}var Oa="imperative",Te=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Te||{}),_n=class{constructor(t,e){this.id=t,this.url=e}},La=class extends _n{constructor(t,e,i="imperative",r=null){super(t,e),this.type=Te.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Fr=class extends _n{constructor(t,e,i){super(t,e),this.urlAfterRedirects=i,this.type=Te.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},cn=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(cn||{}),Fm=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Fm||{}),Xi=class extends _n{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Te.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},Lr=class extends _n{constructor(t,e,i,r){super(t,e),this.reason=i,this.code=r,this.type=Te.NavigationSkipped}},Va=class extends _n{constructor(t,e,i,r){super(t,e),this.error=i,this.target=r,this.type=Te.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Zl=class extends _n{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Te.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Lm=class extends _n{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Te.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Vm=class extends _n{constructor(t,e,i,r,s){super(t,e),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Te.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Um=class extends _n{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Te.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jm=class extends _n{constructor(t,e,i,r){super(t,e),this.urlAfterRedirects=i,this.state=r,this.type=Te.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bm=class{constructor(t){this.route=t,this.type=Te.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},zm=class{constructor(t){this.route=t,this.type=Te.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},qm=class{constructor(t){this.snapshot=t,this.type=Te.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Wm=class{constructor(t){this.snapshot=t,this.type=Te.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},$m=class{constructor(t){this.snapshot=t,this.type=Te.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Hm=class{constructor(t){this.snapshot=t,this.type=Te.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Ua=class{},ja=class{constructor(t){this.url=t}};var Gm=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new su,this.attachRef=null}},su=(()=>{let t=class t{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Gm,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),tu=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=Km(t,this._root);return e?e.children.map(i=>i.value):[]}firstChild(t){let e=Km(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=Ym(t,this._root);return e.length<2?[]:e[e.length-2].children.map(r=>r.value).filter(r=>r!==t)}pathFromRoot(t){return Ym(t,this._root).map(e=>e.value)}};function Km(n,t){if(n===t.value)return t;for(let e of t.children){let i=Km(n,e);if(i)return i}return null}function Ym(n,t){if(n===t.value)return[t];for(let e of t.children){let i=Ym(n,e);if(i.length)return i.unshift(t),i}return[]}var an=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function Fs(n){let t={};return n&&n.children.forEach(e=>t[e.value.outlet]=e),t}var eu=class extends tu{constructor(t,e){super(t),this.snapshot=e,op(this,t)}toString(){return this.snapshot.toString()}};function Zw(n){let t=uP(n),e=new We([new Or("",{})]),i=new We({}),r=new We({}),s=new We({}),o=new We(""),a=new Bs(e,i,s,o,r,lt,n,t.root);return a.snapshot=t.root,new eu(new an(a,[]),t)}function uP(n){let t={},e={},i={},r="",s=new Ba([],t,i,r,e,lt,n,null,{});return new nu("",new an(s,[]))}var Bs=class{constructor(t,e,i,r,s,o,a,c){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ot(l=>l[Wa]))??tt(void 0),this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ot(t=>Us(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ot(t=>Us(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function sp(n,t,e="emptyOnly"){let i,{routeConfig:r}=n;return t!==null&&(e==="always"||r?.path===""||!t.component&&!t.routeConfig?.loadComponent)?i={params:$($({},t.params),n.params),data:$($({},t.data),n.data),resolve:$($($($({},n.data),t.data),r?.data),n._resolvedData)}:i={params:$({},n.params),data:$({},n.data),resolve:$($({},n.data),n._resolvedData??{})},r&&eI(r)&&(i.resolve[Wa]=r.title),i}var Ba=class{get title(){return this.data?.[Wa]}constructor(t,e,i,r,s,o,a,c,l){this.url=t,this.params=e,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Us(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Us(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(i=>i.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},nu=class extends tu{constructor(t,e){super(e),this.url=t,op(this,e)}toString(){return tI(this._root)}};function op(n,t){t.value._routerState=n,t.children.forEach(e=>op(n,e))}function tI(n){let t=n.children.length>0?` { ${n.children.map(tI).join(", ")} } `:"";return`${n.value}${t}`}function Dm(n){if(n.snapshot){let t=n.snapshot,e=n._futureSnapshot;n.snapshot=e,jn(t.queryParams,e.queryParams)||n.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&n.fragmentSubject.next(e.fragment),jn(t.params,e.params)||n.paramsSubject.next(e.params),Uk(t.url,e.url)||n.urlSubject.next(e.url),jn(t.data,e.data)||n.dataSubject.next(e.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Qm(n,t){let e=jn(n.params,t.params)&&qk(n.url,t.url),i=!n.parent!=!t.parent;return e&&!i&&(!n.parent||Qm(n.parent,t.parent))}function eI(n){return typeof n.title=="string"||n.title===null}var ap=(()=>{let t=class t{constructor(){this.activated=null,this._activatedRoute=null,this.name=lt,this.activateEvents=new bn,this.deactivateEvents=new bn,this.attachEvents=new bn,this.detachEvents=new bn,this.parentContexts=J(su),this.location=J(Q0),this.changeDetector=J(ks),this.environmentInjector=J(va),this.inputBinder=J(cp,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Mt(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Mt(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Mt(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Mt(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new Xm(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Vt({type:t,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Ss]});let n=t;return n})(),Xm=class n{__ngOutletInjector(t){return new n(this.route,this.childContexts,t)}constructor(t,e,i){this.route=t,this.childContexts=e,this.parent=i}get(t,e){return t===Bs?this.route:t===su?this.childContexts:this.parent.get(t,e)}},cp=new Tt("");function dP(n,t,e){let i=za(n,t._root,e?e._root:void 0);return new eu(i,t)}function za(n,t,e){if(e&&n.shouldReuseRoute(t.value,e.value.snapshot)){let i=e.value;i._futureSnapshot=t.value;let r=hP(n,t,e);return new an(i,r)}else{if(n.shouldAttach(t.value)){let s=n.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>za(n,a)),o}}let i=fP(t.value),r=t.children.map(s=>za(n,s));return new an(i,r)}}function hP(n,t,e){return t.children.map(i=>{for(let r of e.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return za(n,i,r);return za(n,i)})}function fP(n){return new Bs(new We(n.url),new We(n.params),new We(n.queryParams),new We(n.fragment),new We(n.data),n.outlet,n.component,n)}var nI="ngNavigationCancelingError";function iI(n,t){let{redirectTo:e,navigationBehaviorOptions:i}=js(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,r=rI(!1,cn.Redirect);return r.url=e,r.navigationBehaviorOptions=i,r}function rI(n,t){let e=new Error(`NavigationCancelingError: ${n||""}`);return e[nI]=!0,e.cancellationCode=t,e}function mP(n){return sI(n)&&js(n.url)}function sI(n){return!!n&&n[nI]}var pP=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Jt({type:t,selectors:[["ng-component"]],standalone:!0,features:[ee],decls:1,vars:0,template:function(r,s){r&1&&yt(0,"router-outlet")},dependencies:[ap],encapsulation:2});let n=t;return n})();function gP(n,t){return n.providers&&!n._injector&&(n._injector=J0(n.providers,t,`Route: ${n.path}`)),n._injector??t}function lp(n){let t=n.children&&n.children.map(lp),e=t?Rt($({},n),{children:t}):$({},n);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==lt&&(e.component=pP),e}function Bn(n){return n.outlet||lt}function bP(n,t){let e=n.filter(i=>Bn(i)===t);return e.push(...n.filter(i=>Bn(i)!==t)),e}function $a(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let t=n.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var _P=(n,t,e,i)=>ot(r=>(new Jm(t,r.targetRouterState,r.currentRouterState,e,i).activate(n),r)),Jm=class{constructor(t,e,i,r,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,i,t),Dm(this.futureState.root),this.activateChildRoutes(e,i,t)}deactivateChildRoutes(t,e,i){let r=Fs(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,i);else s&&this.deactivateRouteAndItsChildren(e,i)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Fs(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let i=e.getContext(t.value.outlet),r=i&&t.value.component?i.children:e,s=Fs(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(t,e,i){let r=Fs(e);t.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Hm(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Wm(t.value.snapshot))}activateRoutes(t,e,i){let r=t.value,s=e?e.value:null;if(Dm(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Dm(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=$a(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,i)}},iu=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},Vs=class{constructor(t,e){this.component=t,this.route=e}};function yP(n,t,e){let i=n._root,r=t?t._root:null;return ka(i,r,e,[i.value])}function vP(n){let t=n.routeConfig?n.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:n,guards:t}}function qs(n,t){let e=Symbol(),i=t.get(n,e);return i===e?typeof n=="function"&&!N0(n)?n:t.get(n):i}function ka(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=Fs(t);return n.children.forEach(o=>{wP(o,s[o.value.outlet],e,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Na(a,e.getContext(o),r)),r}function wP(n,t,e,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=t?t.value:null,a=e?e.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=IP(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new iu(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?ka(n,t,a?a.children:null,i,r):ka(n,t,e,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new Vs(a.outlet.component,o))}else o&&Na(t,a,r),r.canActivateChecks.push(new iu(i)),s.component?ka(n,null,a?a.children:null,i,r):ka(n,null,e,i,r);return r}function IP(n,t,e){if(typeof e=="function")return e(n,t);switch(e){case"pathParamsChange":return!Nr(n.url,t.url);case"pathParamsOrQueryParamsChange":return!Nr(n.url,t.url)||!jn(n.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Qm(n,t)||!jn(n.queryParams,t.queryParams);case"paramsChange":default:return!Qm(n,t)}}function Na(n,t,e){let i=Fs(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?t?Na(o,t.children.getContext(s),e):Na(o,null,e):Na(o,t,e)}),r.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new Vs(t.outlet.component,r)):e.canDeactivateChecks.push(new Vs(null,r)):e.canDeactivateChecks.push(new Vs(null,r))}function Ha(n){return typeof n=="function"}function EP(n){return typeof n=="boolean"}function xP(n){return n&&Ha(n.canLoad)}function TP(n){return n&&Ha(n.canActivate)}function AP(n){return n&&Ha(n.canActivateChild)}function SP(n){return n&&Ha(n.canDeactivate)}function CP(n){return n&&Ha(n.canMatch)}function oI(n){return n instanceof D0||n?.name==="EmptyError"}var Hl=Symbol("INITIAL_VALUE");function zs(){return Dn(n=>ba(n.map(t=>t.pipe(Cn(1),Pl(Hl)))).pipe(ot(t=>{for(let e of t)if(e!==!0){if(e===Hl)return Hl;if(e===!1||e instanceof Qi)return e}return!0}),mi(t=>t!==Hl),Cn(1)))}function DP(n,t){return gn(e=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?tt(Rt($({},e),{guardsResult:!0})):RP(o,i,r,n).pipe(gn(a=>a&&EP(a)?kP(i,s,n,t):tt(a)),ot(a=>Rt($({},e),{guardsResult:a})))})}function RP(n,t,e,i){return $e(n).pipe(gn(r=>FP(r.component,r.route,e,t,i)),$i(r=>r!==!0,!0))}function kP(n,t,e,i){return $e(t).pipe(Sr(r=>Dl(MP(r.route.parent,i),PP(r.route,i),NP(n,r.path,e),OP(n,r.route,e))),$i(r=>r!==!0,!0))}function PP(n,t){return n!==null&&t&&t(new $m(n)),tt(!0)}function MP(n,t){return n!==null&&t&&t(new qm(n)),tt(!0)}function OP(n,t,e){let i=t.routeConfig?t.routeConfig.canActivate:null;if(!i||i.length===0)return tt(!0);let r=i.map(s=>em(()=>{let o=$a(t)??e,a=qs(s,o),c=TP(a)?a.canActivate(t,n):Dr(o,()=>a(t,n));return Ji(c).pipe($i())}));return tt(r).pipe(zs())}function NP(n,t,e){let i=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>vP(o)).filter(o=>o!==null).map(o=>em(()=>{let a=o.guards.map(c=>{let l=$a(o.node)??e,d=qs(c,l),h=AP(d)?d.canActivateChild(i,n):Dr(l,()=>d(i,n));return Ji(h).pipe($i())});return tt(a).pipe(zs())}));return tt(s).pipe(zs())}function FP(n,t,e,i,r){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return tt(!0);let o=s.map(a=>{let c=$a(t)??r,l=qs(a,c),d=SP(l)?l.canDeactivate(n,t,e,i):Dr(c,()=>l(n,t,e,i));return Ji(d).pipe($i())});return tt(o).pipe(zs())}function LP(n,t,e,i){let r=t.canLoad;if(r===void 0||r.length===0)return tt(!0);let s=r.map(o=>{let a=qs(o,n),c=xP(a)?a.canLoad(t,e):Dr(n,()=>a(t,e));return Ji(c)});return tt(s).pipe(zs(),aI(i))}function aI(n){return S0(Xt(t=>{if(js(t))throw iI(n,t)}),ot(t=>t===!0))}function VP(n,t,e,i){let r=t.canMatch;if(!r||r.length===0)return tt(!0);let s=r.map(o=>{let a=qs(o,n),c=CP(a)?a.canMatch(t,e):Dr(n,()=>a(t,e));return Ji(c)});return tt(s).pipe(zs(),aI(i))}var qa=class{constructor(t){this.segmentGroup=t||null}},ru=class extends Error{constructor(t){super(),this.urlTree=t}};function Ns(n){return Ar(new qa(n))}function UP(n){return Ar(new Mt(4e3,!1))}function jP(n){return Ar(rI(!1,cn.GuardRejected))}var Zm=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let i=[],r=e.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return tt(i);if(r.numberOfChildren>1||!r.children[lt])return UP(t.redirectTo);r=r.children[lt]}}applyRedirectCommands(t,e,i){let r=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,i);if(e.startsWith("/"))throw new ru(r);return r}applyRedirectCreateUrlTree(t,e,i,r){let s=this.createSegmentGroup(t,e.root,i,r);return new Qi(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let i={};return Object.entries(t).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=e[a]}else i[r]=s}),i}createSegmentGroup(t,e,i,r){let s=this.createSegments(t,e.segments,i,r),o={};return Object.entries(e.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(t,c,i,r)}),new At(s,o)}createSegments(t,e,i,r){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,r):this.findOrReturn(s,i))}findPosParam(t,e,i){let r=i[e.path.substring(1)];if(!r)throw new Mt(4001,!1);return r}findOrReturn(t,e){let i=0;for(let r of e){if(r.path===t.path)return e.splice(i),r;i++}return t}},tp={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function BP(n,t,e,i,r){let s=up(n,t,e);return s.matched?(i=gP(t,i),VP(i,t,e,r).pipe(ot(o=>o===!0?s:$({},tp)))):tt(s)}function up(n,t,e){if(t.path==="**")return zP(e);if(t.path==="")return t.pathMatch==="full"&&(n.hasChildren()||e.length>0)?$({},tp):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let r=(t.matcher||Vk)(e,n,t);if(!r)return $({},tp);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?$($({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:e.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function zP(n){return{matched:!0,parameters:n.length>0?jw(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Vw(n,t,e,i){return e.length>0&&$P(n,e,i)?{segmentGroup:new At(t,WP(i,new At(e,n.children))),slicedSegments:[]}:e.length===0&&HP(n,e,i)?{segmentGroup:new At(n.segments,qP(n,e,i,n.children)),slicedSegments:e}:{segmentGroup:new At(n.segments,n.children),slicedSegments:e}}function qP(n,t,e,i){let r={};for(let s of e)if(ou(n,t,s)&&!i[Bn(s)]){let o=new At([],{});r[Bn(s)]=o}return $($({},i),r)}function WP(n,t){let e={};e[lt]=t;for(let i of n)if(i.path===""&&Bn(i)!==lt){let r=new At([],{});e[Bn(i)]=r}return e}function $P(n,t,e){return e.some(i=>ou(n,t,i)&&Bn(i)!==lt)}function HP(n,t,e){return e.some(i=>ou(n,t,i))}function ou(n,t,e){return(n.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function GP(n,t,e,i){return Bn(n)!==i&&(i===lt||!ou(t,e,n))?!1:up(t,n,e).matched}function KP(n,t,e){return t.length===0&&!n.children[e]}var ep=class{};function YP(n,t,e,i,r,s,o="emptyOnly"){return new np(n,t,e,i,r,o,s).recognize()}var QP=31,np=class{constructor(t,e,i,r,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new Zm(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new Mt(4002,`'${t.segmentGroup}'`)}recognize(){let t=Vw(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(ot(e=>{let i=new Ba([],Object.freeze({}),Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,{},lt,this.rootComponentType,null,{}),r=new an(i,e),s=new nu("",r),o=iP(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,lt).pipe(Wi(i=>{if(i instanceof ru)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof qa?this.noMatchError(i):i}))}inheritParamsAndData(t,e){let i=t.value,r=sp(i,e,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),t.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(t,e,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(t,e,i):this.processSegment(t,e,i,i.segments,r,!0).pipe(ot(s=>s instanceof an?[s]:[]))}processChildren(t,e,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return $e(r).pipe(Sr(s=>{let o=i.children[s],a=bP(e,s);return this.processSegmentGroup(t,a,o,s)}),M0((s,o)=>(s.push(...o),s)),im(null),P0(),gn(s=>{if(s===null)return Ns(i);let o=cI(s);return XP(o),tt(o)}))}processSegment(t,e,i,r,s,o){return $e(e).pipe(Sr(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,i,r,s,o).pipe(Wi(c=>{if(c instanceof qa)return tt(null);throw c}))),$i(a=>!!a),Wi(a=>{if(oI(a))return KP(i,r,s)?tt(new ep):Ns(i);throw a}))}processSegmentAgainstRoute(t,e,i,r,s,o,a){return GP(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(t,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,r,e,i,s,o):Ns(r):Ns(r)}expandSegmentAgainstRouteUsingRedirect(t,e,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:d}=up(e,r,s);if(!a)return Ns(e);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>QP&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,h).pipe(gn(m=>this.processSegment(t,i,e,m.concat(d),o,!1)))}matchSegmentAgainstRoute(t,e,i,r,s){let o=BP(e,i,r,t,this.urlSerializer);return i.path==="**"&&(e.children={}),o.pipe(Dn(a=>a.matched?(t=i._injector??t,this.getChildConfig(t,i,r).pipe(Dn(({routes:c})=>{let l=i._loadedInjector??t,{consumedSegments:d,remainingSegments:h,parameters:m}=a,g=new Ba(d,m,Object.freeze($({},this.urlTree.queryParams)),this.urlTree.fragment,ZP(i),Bn(i),i.component??i._loadedComponent??null,i,t1(i)),{segmentGroup:y,slicedSegments:b}=Vw(e,d,h,c);if(b.length===0&&y.hasChildren())return this.processChildren(l,c,y).pipe(ot(C=>C===null?null:new an(g,C)));if(c.length===0&&b.length===0)return tt(new an(g,[]));let v=Bn(i)===s;return this.processSegment(l,c,y,b,v?lt:s,!0).pipe(ot(C=>new an(g,C instanceof an?[C]:[])))}))):Ns(e)))}getChildConfig(t,e,i){return e.children?tt({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?tt({routes:e._loadedRoutes,injector:e._loadedInjector}):LP(t,e,i,this.urlSerializer).pipe(gn(r=>r?this.configLoader.loadChildren(t,e).pipe(Xt(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):jP(e))):tt({routes:[],injector:t})}};function XP(n){n.sort((t,e)=>t.value.outlet===lt?-1:e.value.outlet===lt?1:t.value.outlet.localeCompare(e.value.outlet))}function JP(n){let t=n.value.routeConfig;return t&&t.path===""}function cI(n){let t=[],e=new Set;for(let i of n){if(!JP(i)){t.push(i);continue}let r=t.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),e.add(r)):t.push(i)}for(let i of e){let r=cI(i.children);t.push(new an(i.value,r))}return t.filter(i=>!e.has(i))}function ZP(n){return n.data||{}}function t1(n){return n.resolve||{}}function e1(n,t,e,i,r,s){return gn(o=>YP(n,t,e,i,o.extractedUrl,r,s).pipe(ot(({state:a,tree:c})=>Rt($({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function n1(n,t){return gn(e=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=e;if(!r.length)return tt(e);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of lI(c))o.add(l);let a=0;return $e(o).pipe(Sr(c=>s.has(c)?i1(c,i,n,t):(c.data=sp(c,c.parent,n).resolve,tt(void 0))),Xt(()=>a++),rm(1),gn(c=>a===o.size?tt(e):qi))})}function lI(n){let t=n.children.map(e=>lI(e)).flat();return[n,...t]}function i1(n,t,e,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!eI(r)&&(s[Wa]=r.title),r1(s,n,t,i).pipe(ot(o=>(n._resolvedData=o,n.data=sp(n,n.parent,e).resolve,null)))}function r1(n,t,e,i){let r=Pm(n);if(r.length===0)return tt({});let s={};return $e(r).pipe(gn(o=>s1(n[o],t,e,i).pipe($i(),Xt(a=>{s[o]=a}))),rm(1),R0(s),Wi(o=>oI(o)?qi:Ar(o)))}function s1(n,t,e,i){let r=$a(t)??i,s=qs(n,r),o=s.resolve?s.resolve(t,e):Dr(r,()=>s(t,e));return Ji(o)}function Rm(n){return Dn(t=>{let e=n(t);return e?$e(e).pipe(ot(()=>t)):tt(t)})}var uI=(()=>{let t=class t{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===lt);return r}getResolvedTitleForRoute(i){return i.data[Wa]}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:()=>J(o1),providedIn:"root"});let n=t;return n})(),o1=(()=>{let t=class t extends uI{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};t.\u0275fac=function(r){return new(r||t)(X(Pw))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),dp=new Tt("",{providedIn:"root",factory:()=>({})}),hp=new Tt(""),a1=(()=>{let t=class t{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=J(um)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return tt(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=Ji(i.loadComponent()).pipe(ot(dI),Xt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Cr(()=>{this.componentLoaders.delete(i)})),s=new tm(r,()=>new pn).pipe(Zf());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return tt({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=c1(r,this.compiler,i,this.onLoadEndListener).pipe(Cr(()=>{this.childrenLoaders.delete(r)})),a=new tm(o,()=>new pn).pipe(Zf());return this.childrenLoaders.set(r,a),a}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function c1(n,t,e,i){return Ji(n.loadChildren()).pipe(ot(dI),gn(r=>r instanceof X0||Array.isArray(r)?tt(r):$e(t.compileModuleAsync(r))),ot(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(e).injector,o=s.get(hp,[],{optional:!0,self:!0}).flat()),{routes:o.map(lp),injector:s}}))}function l1(n){return n&&typeof n=="object"&&"default"in n}function dI(n){return l1(n)?n.default:n}var fp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:()=>J(u1),providedIn:"root"});let n=t;return n})(),u1=(()=>{let t=class t{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),d1=new Tt("");var h1=(()=>{let t=class t{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new pn,this.transitionAbortSubject=new pn,this.configLoader=J(a1),this.environmentInjector=J(va),this.urlSerializer=J(rp),this.rootContexts=J(su),this.location=J(jl),this.inputBindingEnabled=J(cp,{optional:!0})!==null,this.titleStrategy=J(uI),this.options=J(dp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=J(fp),this.createViewTransition=J(d1,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>tt(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Bm(s)),r=s=>this.events.next(new zm(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(Rt($($({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new We({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Oa,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(mi(o=>o.id!==0),ot(o=>Rt($({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),Dn(o=>{let a=!1,c=!1;return tt(o).pipe(Dn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",cn.SupersededByNewNavigation),qi;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?Rt($({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),h=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!d&&h!=="reload"){let m="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.rawUrl),m,Fm.IgnoredSameUrlNavigation)),l.resolve(null),qi}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return tt(l).pipe(Dn(m=>{let g=this.transitions?.getValue();return this.events.next(new La(m.id,this.urlSerializer.serialize(m.extractedUrl),m.source,m.restoredState)),g!==this.transitions?.getValue()?qi:Promise.resolve(m)}),e1(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),Xt(m=>{o.targetSnapshot=m.targetSnapshot,o.urlAfterRedirects=m.urlAfterRedirects,this.currentNavigation=Rt($({},this.currentNavigation),{finalUrl:m.urlAfterRedirects});let g=new Zl(m.id,this.urlSerializer.serialize(m.extractedUrl),this.urlSerializer.serialize(m.urlAfterRedirects),m.targetSnapshot);this.events.next(g)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:m,extractedUrl:g,source:y,restoredState:b,extras:v}=l,C=new La(m,this.urlSerializer.serialize(g),y,b);this.events.next(C);let R=Zw(this.rootComponentType).snapshot;return this.currentTransition=o=Rt($({},l),{targetSnapshot:R,urlAfterRedirects:g,extras:Rt($({},v),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,tt(o)}else{let m="";return this.events.next(new Lr(l.id,this.urlSerializer.serialize(l.extractedUrl),m,Fm.IgnoredByUrlHandlingStrategy)),l.resolve(null),qi}}),Xt(l=>{let d=new Lm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),ot(l=>(this.currentTransition=o=Rt($({},l),{guards:yP(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),DP(this.environmentInjector,l=>this.events.next(l)),Xt(l=>{if(o.guardsResult=l.guardsResult,js(l.guardsResult))throw iI(this.urlSerializer,l.guardsResult);let d=new Vm(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),mi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",cn.GuardRejected),!1)),Rm(l=>{if(l.guards.canActivateChecks.length)return tt(l).pipe(Xt(d=>{let h=new Um(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}),Dn(d=>{let h=!1;return tt(d).pipe(n1(this.paramsInheritanceStrategy,this.environmentInjector),Xt({next:()=>h=!0,complete:()=>{h||this.cancelNavigationTransition(d,"",cn.NoDataFromResolver)}}))}),Xt(d=>{let h=new jm(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(h)}))}),Rm(l=>{let d=h=>{let m=[];h.routeConfig?.loadComponent&&!h.routeConfig._loadedComponent&&m.push(this.configLoader.loadComponent(h.routeConfig).pipe(Xt(g=>{h.component=g}),ot(()=>{})));for(let g of h.children)m.push(...d(g));return m};return ba(d(l.targetSnapshot.root)).pipe(im(null),Cn(1))}),Rm(()=>this.afterPreactivation()),Dn(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,h=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return h?$e(h).pipe(ot(()=>o)):tt(o)}),ot(l=>{let d=dP(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=Rt($({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),Xt(()=>{this.events.next(new Ua)}),_P(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Cn(1),Xt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Fr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),As(this.transitionAbortSubject.pipe(Xt(l=>{throw l}))),Cr(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",cn.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Wi(l=>{if(c=!0,sI(l))this.events.next(new Xi(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),mP(l)?this.events.next(new ja(l.url)):o.resolve(!1);else{this.events.next(new Va(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(d){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(d)}}return qi}))}))}cancelNavigationTransition(i,r,s){let o=new Xi(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function f1(n){return n!==Oa}var m1=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:()=>J(p1),providedIn:"root"});let n=t;return n})(),ip=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},p1=(()=>{let t=class t extends ip{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),hI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:()=>J(g1),providedIn:"root"});let n=t;return n})(),g1=(()=>{let t=class t extends hI{constructor(){super(...arguments),this.location=J(jl),this.urlSerializer=J(rp),this.options=J(dp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=J(fp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Qi,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Zw(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof La)this.stateMemento=this.createStateMemento();else if(i instanceof Lr)this.rawUrlTree=r.initialUrl;else if(i instanceof Zl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Ua?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Xi&&(i.code===cn.GuardRejected||i.code===cn.NoDataFromResolver)?this.restoreHistory(r):i instanceof Va?this.restoreHistory(r,!0):i instanceof Fr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=$($({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=$($({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),Pa=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Pa||{});function b1(n,t){n.events.pipe(mi(e=>e instanceof Fr||e instanceof Xi||e instanceof Va||e instanceof Lr),ot(e=>e instanceof Fr||e instanceof Lr?Pa.COMPLETE:(e instanceof Xi?e.code===cn.Redirect||e.code===cn.SupersededByNewNavigation:!1)?Pa.REDIRECTING:Pa.FAILED),mi(e=>e!==Pa.REDIRECTING),Cn(1)).subscribe(()=>{t()})}function _1(n){throw n}var y1={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},v1={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},fI=(()=>{let t=class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=J(Vl),this.stateManager=J(hI),this.options=J(dp,{optional:!0})||{},this.pendingTasks=J(Z0),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=J(h1),this.urlSerializer=J(rp),this.location=J(jl),this.urlHandlingStrategy=J(fp),this._events=new pn,this.errorHandler=this.options.errorHandler||_1,this.navigated=!1,this.routeReuseStrategy=J(m1),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=J(hp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!J(cp,{optional:!0}),this.eventsSubscription=new ga,this.isNgZoneEnabled=J(Zt)instanceof Zt&&Zt.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Xi&&r.code!==cn.Redirect&&r.code!==cn.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Fr)this.navigated=!0;else if(r instanceof ja){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||f1(s.source)};this.scheduleNavigation(a,Oa,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}I1(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Oa,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=$({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(lp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,h=null;switch(c){case"merge":h=$($({},this.currentUrlTree.queryParams),o);break;case"preserve":h=this.currentUrlTree.queryParams;break;default:h=o||null}h!==null&&(h=this.removeEmptyProps(h));let m;try{let g=s?s.snapshot:this.routerState.snapshot.root;m=Yw(g)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),m=this.currentUrlTree.root}return Qw(m,i,h,d??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=js(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Oa,null,r)}navigate(i,r={skipLocationChange:!1}){return w1(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=$({},y1):r===!1?s=$({},v1):s=r,js(i))return Ow(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Ow(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,d;a?(c=a.resolve,l=a.reject,d=a.promise):d=new Promise((m,g)=>{c=m,l=g});let h=this.pendingTasks.add();return b1(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(h))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(m=>Promise.reject(m))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function w1(n){for(let t=0;t<n.length;t++)if(n[t]==null)throw new Mt(4008,!1)}function I1(n){return!(n instanceof Ua)&&!(n instanceof ja)}var E1=new Tt("");function mI(n,...t){return ya([{provide:hp,multi:!0,useValue:n},[],{provide:Bs,useFactory:x1,deps:[fI]},{provide:rw,multi:!0,useFactory:T1},t.map(e=>e.\u0275providers)])}function x1(n){return n.routerState.root}function T1(){let n=J(Ml);return t=>{let e=n.get(lm);if(t!==e.components[0])return;let i=n.get(fI),r=n.get(A1);n.get(S1)===1&&i.initialNavigation(),n.get(C1,null,sm.Optional)?.setUpPreloading(),n.get(E1,null,sm.Optional)?.init(),i.resetRootComponentType(e.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var A1=new Tt("",{factory:()=>new pn}),S1=new Tt("",{providedIn:"root",factory:()=>1});var C1=new Tt("");var pI=[];var D1="@",R1=(()=>{let t=class t{constructor(i,r,s,o,a){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=a,this._rendererFactoryPromise=null,this.scheduler=J(K0,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-ISAHKRFG.js")).catch(r=>{throw new Mt(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new mp(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(a=>{let c=a.createRenderer(i,r);o.use(c)}).catch(a=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};t.\u0275fac=function(r){Ea()},t.\u0275prov=et({token:t,factory:t.\u0275fac});let n=t;return n})(),mp=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,i,r){this.delegate.insertBefore(t,e,i,r)}removeChild(t,e,i){this.delegate.removeChild(t,e,i)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,i,r){this.delegate.setAttribute(t,e,i,r)}removeAttribute(t,e,i){this.delegate.removeAttribute(t,e,i)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,i,r){this.delegate.setStyle(t,e,i,r)}removeStyle(t,e,i){this.delegate.removeStyle(t,e,i)}setProperty(t,e,i){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,i)),this.delegate.setProperty(t,e,i)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,i){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,i)),this.delegate.listen(t,e,i)}shouldReplay(t){return this.replay!==null&&t.startsWith(D1)}};function gI(n="animations"){return Y0("NgAsyncAnimations"),ya([{provide:Nl,useFactory:(t,e,i)=>new R1(t,e,i,n),deps:[$t,ql,Zt]},{provide:Pr,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var bI={providers:[mI(pI),gI()]};var gp;try{gp=typeof Intl<"u"&&Intl.v8BreakIterator}catch{gp=!1}var ln=(()=>{let t=class t{constructor(i){this._platformId=i,this.isBrowser=this._platformId?pw(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||gp)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};t.\u0275fac=function(r){return new(r||t)(X(kr))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Ga;function k1(){if(Ga==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>Ga=!0}))}finally{Ga=Ga||!1}return Ga}function Ws(n){return k1()?n:!!n.capture}var pp;function P1(){if(pp==null){let n=typeof document<"u"?document.head:null;pp=!!(n&&(n.createShadowRoot||n.attachShadow))}return pp}function _I(n){if(P1()){let t=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function Zi(n){return n.composedPath?n.composedPath()[0]:n.target}function yI(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function bp(n){return Array.isArray(n)?n:[n]}function Vr(n){return n instanceof ye?n.nativeElement:n}var vI=new Set,Ur,M1=(()=>{let t=class t{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):N1}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&O1(i,this._nonce),this._matchMedia(i)}};t.\u0275fac=function(r){return new(r||t)(X(ln),X(wa,8))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function O1(n,t){if(!vI.has(n))try{Ur||(Ur=document.createElement("style"),t&&Ur.setAttribute("nonce",t),Ur.setAttribute("type","text/css"),document.head.appendChild(Ur)),Ur.sheet&&(Ur.sheet.insertRule(`@media ${n} {body{ }}`,0),vI.add(n))}catch(e){console.error(e)}}function N1(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var II=(()=>{let t=class t{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new pn}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return wI(bp(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=wI(bp(i)).map(a=>this._registerQuery(a).observable),o=ba(s);return o=Dl(o.pipe(Cn(1)),o.pipe(kl(1),nm(0))),o.pipe(ot(a=>{let c={matches:!1,breakpoints:{}};return a.forEach(({matches:l,query:d})=>{c.matches=c.matches||l,c.breakpoints[d]=l}),c}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new Jf(a=>{let c=l=>this._zone.run(()=>a.next(l));return r.addListener(c),()=>{r.removeListener(c)}}).pipe(Pl(r),ot(({matches:a})=>({query:i,matches:a})),As(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};t.\u0275fac=function(r){return new(r||t)(X(M1),X(Zt))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function wI(n){return n.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}function yp(n){return n.buttons===0||n.detail===0}function vp(n){let t=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var F1=new Tt("cdk-input-modality-detector-options"),L1={ignoreKeys:[18,17,224,91,16]},TI=650,$s=Ws({passive:!0,capture:!0}),V1=(()=>{let t=class t{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new We(null),this._lastTouchMs=0,this._onKeydown=a=>{this._options?.ignoreKeys?.some(c=>c===a.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Zi(a))},this._onMousedown=a=>{Date.now()-this._lastTouchMs<TI||(this._modality.next(yp(a)?"keyboard":"mouse"),this._mostRecentTarget=Zi(a))},this._onTouchstart=a=>{if(vp(a)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Zi(a)},this._options=$($({},L1),o),this.modalityDetected=this._modality.pipe(kl(1)),this.modalityChanged=this.modalityDetected.pipe(k0()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,$s),s.addEventListener("mousedown",this._onMousedown,$s),s.addEventListener("touchstart",this._onTouchstart,$s)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,$s),document.removeEventListener("mousedown",this._onMousedown,$s),document.removeEventListener("touchstart",this._onTouchstart,$s))}};t.\u0275fac=function(r){return new(r||t)(X(ln),X(Zt),X($t),X(F1,8))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var lu=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(lu||{}),U1=new Tt("cdk-focus-monitor-default-options"),cu=Ws({passive:!0,capture:!0}),AI=(()=>{let t=class t{constructor(i,r,s,o,a){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new pn,this._rootNodeFocusAndBlurListener=c=>{let l=Zi(c);for(let d=l;d;d=d.parentElement)c.type==="focus"?this._onFocus(c,d):this._onBlur(c,d)},this._document=o,this._detectionMode=a?.detectionMode||lu.IMMEDIATE}monitor(i,r=!1){let s=Vr(i);if(!this._platform.isBrowser||s.nodeType!==1)return tt();let o=_I(s)||this._getDocument(),a=this._elementInfo.get(s);if(a)return r&&(a.checkChildren=!0),a.subject;let c={checkChildren:r,subject:new pn,rootNode:o};return this._elementInfo.set(s,c),this._registerGlobalListeners(c),c.subject}stopMonitoring(i){let r=Vr(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=Vr(i),a=this._getDocument().activeElement;o===a?this._getClosestElementsInfo(o).forEach(([c,l])=>this._originChanged(c,r,l)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===lu.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===lu.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?TI:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Zi(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,cu),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,cu)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(As(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,cu),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,cu),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let a=0;a<o.length;a++)if(o[a].contains(r))return!0}return!1}};t.\u0275fac=function(r){return new(r||t)(X(Zt),X(ln),X(V1),X($t,8),X(U1,8))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var jr=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(jr||{}),EI="cdk-high-contrast-black-on-white",xI="cdk-high-contrast-white-on-black",_p="cdk-high-contrast-active",SI=(()=>{let t=class t{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=J(II).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return jr.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return jr.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return jr.BLACK_ON_WHITE}return jr.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(_p,EI,xI),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===jr.BLACK_ON_WHITE?i.add(_p,EI):r===jr.WHITE_ON_BLACK&&i.add(_p,xI)}}};t.\u0275fac=function(r){return new(r||t)(X(ln),X($t))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var wp=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({});let n=t;return n})();function B1(){return!0}var z1=new Tt("mat-sanity-checks",{providedIn:"root",factory:B1}),Pn=(()=>{let t=class t{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return yI()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};t.\u0275fac=function(r){return new(r||t)(X(SI),X(z1,8),X($t))},t.\u0275mod=he({type:t}),t.\u0275inj=de({imports:[wp,wp]});let n=t;return n})();var yn=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(yn||{}),xp=class{constructor(t,e,i,r=!1){this._renderer=t,this.element=e,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=yn.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},CI=Ws({passive:!0,capture:!0}),Tp=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=Zi(t);e&&this._events.get(t.type)?.forEach((i,r)=>{(r===e||r.contains(e))&&i.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,i,r){let s=this._events.get(e);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(e,new Map([[i,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,CI)})}removeHandler(t,e,i){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(i),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,CI)))}},DI={enterDuration:225,exitDuration:150},q1=800,RI=Ws({passive:!0,capture:!0}),kI=["mousedown","touchstart"],PI=["mouseup","mouseleave","touchend","touchcancel"],Ka=class Ka{constructor(t,e,i,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=Vr(i))}fadeInRipple(t,e,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=$($({},DI),i.animation);i.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=i.radius||W1(t,e,r),a=t-r.left,c=e-r.top,l=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-o}px`,d.style.top=`${c-o}px`,d.style.height=`${o*2}px`,d.style.width=`${o*2}px`,i.color!=null&&(d.style.backgroundColor=i.color),d.style.transitionDuration=`${l}ms`,this._containerElement.appendChild(d);let h=window.getComputedStyle(d),m=h.transitionProperty,g=h.transitionDuration,y=m==="none"||g==="0s"||g==="0s, 0s"||r.width===0&&r.height===0,b=new xp(this,d,i,y);d.style.transform="scale3d(1, 1, 1)",b.state=yn.FADING_IN,i.persistent||(this._mostRecentTransientRipple=b);let v=null;return!y&&(l||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let C=()=>this._finishRippleTransition(b),R=()=>this._destroyRipple(b);d.addEventListener("transitionend",C),d.addEventListener("transitioncancel",R),v={onTransitionEnd:C,onTransitionCancel:R}}),this._activeRipples.set(b,v),(y||!l)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(t.state===yn.FADING_OUT||t.state===yn.HIDDEN)return;let e=t.element,i=$($({},DI),t.config.animation);e.style.transitionDuration=`${i.exitDuration}ms`,e.style.opacity="0",t.state=yn.FADING_OUT,(t._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=Vr(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,kI.forEach(i=>{Ka._eventManager.addHandler(this._ngZone,i,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{PI.forEach(e=>{this._triggerElement.addEventListener(e,this,RI)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===yn.FADING_IN?this._startFadeOutTransition(t):t.state===yn.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:i}=t.config;t.state=yn.VISIBLE,!i&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=yn.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=yp(t),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+q1;!this._target.rippleDisabled&&!e&&!i&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!vp(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let i=0;i<e.length;i++)this.fadeInRipple(e[i].clientX,e[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===yn.VISIBLE||t.config.terminateOnPointerUp&&t.state===yn.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(kI.forEach(e=>Ka._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(PI.forEach(e=>t.removeEventListener(e,this,RI)),this._pointerUpEventsRegistered=!1))}};Ka._eventManager=new Tp;var Ap=Ka;function W1(n,t,e){let i=Math.max(Math.abs(n-e.left),Math.abs(n-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(i*i+r*r)}var FI=new Tt("mat-ripple-global-options"),$1=(()=>{let t=class t{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,a){this._elementRef=i,this._animationMode=a,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new Ap(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:$($($({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,$($({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,$($({},this.rippleConfig),i))}};t.\u0275fac=function(r){return new(r||t)(Q(ye),Q(Zt),Q(ln),Q(FI,8),Q(Pr,8))},t.\u0275dir=Vt({type:t,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Rn("mat-ripple-unbounded",s.unbounded)},inputs:{color:[Wt.None,"matRippleColor","color"],unbounded:[Wt.None,"matRippleUnbounded","unbounded"],centered:[Wt.None,"matRippleCentered","centered"],radius:[Wt.None,"matRippleRadius","radius"],animation:[Wt.None,"matRippleAnimation","animation"],disabled:[Wt.None,"matRippleDisabled","disabled"],trigger:[Wt.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=t;return n})(),LI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({imports:[Pn,Pn]});let n=t;return n})();var MI={capture:!0},OI=["focus","click","mouseenter","touchstart"],Ip="mat-ripple-loader-uninitialized",Ep="mat-ripple-loader-class-name",NI="mat-ripple-loader-centered",uu="mat-ripple-loader-disabled",VI=(()=>{let t=class t{constructor(){this._document=J($t,{optional:!0}),this._animationMode=J(Pr,{optional:!0}),this._globalRippleOptions=J(FI,{optional:!0}),this._platform=J(ln),this._ngZone=J(Zt),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${Ip}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of OI)this._document?.addEventListener(i,this._onInteraction,MI)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of OI)this._document?.removeEventListener(r,this._onInteraction,MI)}configureRipple(i,r){i.setAttribute(Ip,""),(r.className||!i.hasAttribute(Ep))&&i.setAttribute(Ep,r.className||""),r.centered&&i.setAttribute(NI,""),r.disabled&&i.setAttribute(uu,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(uu,""):i.removeAttribute(uu)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(Ep)),i.append(s);let o=new $1(new ye(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(NI),o.disabled=i.hasAttribute(uu),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(Ip),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var H1=["*"],du;function G1(){if(du===void 0&&(du=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(du=n.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return du}function Ya(n){return G1()?.createHTML(n)||n}function UI(n){return Error(`Unable to find icon with the name "${n}"`)}function K1(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function jI(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function BI(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var yi=class{constructor(t,e,i){this.url=t,this.svgText=e,this.options=i}},Y1=(()=>{let t=class t{constructor(i,r,s,o){this._httpClient=i,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,r,s){return this.addSvgIconInNamespace("",i,r,s)}addSvgIconLiteral(i,r,s){return this.addSvgIconLiteralInNamespace("",i,r,s)}addSvgIconInNamespace(i,r,s,o){return this._addSvgIconConfig(i,r,new yi(s,null,o))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,s,o){let a=this._sanitizer.sanitize(rn.HTML,s);if(!a)throw BI(s);let c=Ya(a);return this._addSvgIconConfig(i,r,new yi("",c,o))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,s){return this._addSvgIconSetConfig(i,new yi(r,null,s))}addSvgIconSetLiteralInNamespace(i,r,s){let o=this._sanitizer.sanitize(rn.HTML,r);if(!o)throw BI(r);let a=Ya(o);return this._addSvgIconSetConfig(i,new yi("",a,s))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){let r=this._sanitizer.sanitize(rn.RESOURCE_URL,i);if(!r)throw jI(i);let s=this._cachedIconsByUrl.get(r);return s?tt(hu(s)):this._loadSvgIconFromConfig(new yi(i,null)).pipe(Xt(o=>this._cachedIconsByUrl.set(r,o)),ot(o=>hu(o)))}getNamedSvgIcon(i,r=""){let s=zI(r,i),o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,i),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);let a=this._iconSetConfigs.get(r);return a?this._getSvgFromIconSetConfigs(i,a):Ar(UI(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?tt(hu(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(ot(r=>hu(r)))}_getSvgFromIconSetConfigs(i,r){let s=this._extractIconWithNameFromAnySet(i,r);if(s)return tt(s);let o=r.filter(a=>!a.svgText).map(a=>this._loadSvgIconSetFromConfig(a).pipe(Wi(c=>{let d=`Loading icon set URL: ${this._sanitizer.sanitize(rn.RESOURCE_URL,a.url)} failed: ${c.message}`;return this._errorHandler.handleError(new Error(d)),tt(null)})));return Rl(o).pipe(ot(()=>{let a=this._extractIconWithNameFromAnySet(i,r);if(!a)throw UI(i);return a}))}_extractIconWithNameFromAnySet(i,r){for(let s=r.length-1;s>=0;s--){let o=r[s];if(o.svgText&&o.svgText.toString().indexOf(i)>-1){let a=this._svgElementFromConfig(o),c=this._extractSvgIconFromSet(a,i,o.options);if(c)return c}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(Xt(r=>i.svgText=r),ot(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?tt(null):this._fetchIcon(i).pipe(Xt(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,s){let o=i.querySelector(`[id="${r}"]`);if(!o)return null;let a=o.cloneNode(!0);if(a.removeAttribute("id"),a.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(a,s);if(a.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(a),s);let c=this._svgElementFromString(Ya("<svg></svg>"));return c.appendChild(a),this._setSvgAttributes(c,s)}_svgElementFromString(i){let r=this._document.createElement("DIV");r.innerHTML=i;let s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){let r=this._svgElementFromString(Ya("<svg></svg>")),s=i.attributes;for(let o=0;o<s.length;o++){let{name:a,value:c}=s[o];a!=="id"&&r.setAttribute(a,c)}for(let o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){let{url:r,options:s}=i,o=s?.withCredentials??!1;if(!this._httpClient)throw K1();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let a=this._sanitizer.sanitize(rn.RESOURCE_URL,r);if(!a)throw jI(r);let c=this._inProgressUrlFetches.get(a);if(c)return c;let l=this._httpClient.get(a,{responseType:"text",withCredentials:o}).pipe(ot(d=>Ya(d)),Cr(()=>this._inProgressUrlFetches.delete(a)),O0());return this._inProgressUrlFetches.set(a,l),l}_addSvgIconConfig(i,r,s){return this._svgIconConfigs.set(zI(i,r),s),this}_addSvgIconSetConfig(i,r){let s=this._iconSetConfigs.get(i);return s?s.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){let r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let s=0;s<this._resolvers.length;s++){let o=this._resolvers[s](r,i);if(o)return Q1(o)?new yi(o.url,null,o.options):new yi(o,null)}}};t.\u0275fac=function(r){return new(r||t)(X(Ew,8),X(Am),X($t,8),X(Rr))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function hu(n){return n.cloneNode(!0)}function zI(n,t){return n+":"+t}function Q1(n){return!!(n.url&&n.options)}var X1=new Tt("MAT_ICON_DEFAULT_OPTIONS"),J1=new Tt("mat-icon-location",{providedIn:"root",factory:Z1});function Z1(){let n=J($t),t=n?n.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var qI=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],tM=qI.map(n=>`[${n}]`).join(", "),eM=/^url\(['"]?#(.*?)['"]?\)$/,WI=(()=>{let t=class t{get color(){return this._color||this._defaultColor}set color(i){this._color=i}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){let r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){let r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,s,o,a,c){this._elementRef=i,this._iconRegistry=r,this._location=o,this._errorHandler=a,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=ga.EMPTY,c&&(c.color&&(this.color=this._defaultColor=c.color),c.fontSet&&(this.fontSet=c.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];let r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let i=this._elementsWithExternalReferences;if(i&&i.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){let i=this._elementRef.nativeElement,r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let s=i.childNodes[r];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return typeof i=="string"?i.trim().split(" ")[0]:i}_prependPathToReferences(i){let r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(a=>{o.setAttribute(a.name,`url('${i}#${a.value}')`)})})}_cacheChildrenWithExternalReferences(i){let r=i.querySelectorAll(tM),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)qI.forEach(a=>{let c=r[o],l=c.getAttribute(a),d=l?l.match(eM):null;if(d){let h=s.get(c);h||(h=[],s.set(c,h)),h.push({name:a,value:d[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){let[r,s]=this._splitIconName(i);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(Cn(1)).subscribe(o=>this._setSvgElement(o),o=>{let a=`Error retrieving icon ${r}:${s}! ${o.message}`;this._errorHandler.handleError(new Error(a))})}}};t.\u0275fac=function(r){return new(r||t)(Q(ye),Q(Y1),cm("aria-hidden"),Q(J1),Q(Rr),Q(X1,8))},t.\u0275cmp=Jt({type:t,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,s){r&2&&(bi("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),Fl(s.color?"mat-"+s.color:""),Rn("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[Wt.HasDecoratorInputTransform,"inline","inline",Ge],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Hi,ee],ngContentSelectors:H1,decls:1,vars:0,template:function(r,s){r&1&&(Rs(),Gi(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=t;return n})(),$I=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({imports:[Pn,Pn]});let n=t;return n})();var iM=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],rM=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var sM=["mat-fab",""];var oM=new Tt("MAT_BUTTON_CONFIG");var aM=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],cM=(()=>{let t=class t{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=J(AI),this._rippleLoader=J(VI),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let a=J(oM,{optional:!0}),c=i.nativeElement,l=c.classList;this.disabledInteractive=a?.disabledInteractive??!1,this._rippleLoader?.configureRipple(c,{className:"mat-mdc-button-ripple"});for(let{attribute:d,mdcClasses:h}of aM)c.hasAttribute(d)&&l.add(...h)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};t.\u0275fac=function(r){Ea()},t.\u0275dir=Vt({type:t,inputs:{color:"color",disableRipple:[Wt.HasDecoratorInputTransform,"disableRipple","disableRipple",Ge],disabled:[Wt.HasDecoratorInputTransform,"disabled","disabled",Ge],ariaDisabled:[Wt.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",Ge],disabledInteractive:[Wt.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",Ge]},features:[Hi]});let n=t;return n})();var lM=new Tt("mat-mdc-fab-default-options",{providedIn:"root",factory:GI});function GI(){return{color:"accent"}}var HI=GI(),KI=(()=>{let t=class t extends cM{constructor(i,r,s,o,a){super(i,r,s,o),this._options=a,this._isFab=!0,this._options=this._options||HI,this.color=this._options.color||HI.color}};t.\u0275fac=function(r){return new(r||t)(Q(ye),Q(ln),Q(Zt),Q(Pr,8),Q(lM,8))},t.\u0275cmp=Jt({type:t,selectors:[["button","mat-fab",""]],hostVars:18,hostBindings:function(r,s){r&2&&(bi("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),Fl(s.color?"mat-"+s.color:""),Rn("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0)("mdc-fab--extended",s.extended)("mat-mdc-extended-fab",s.extended))},inputs:{extended:[Wt.HasDecoratorInputTransform,"extended","extended",Ge]},exportAs:["matButton"],standalone:!0,features:[Hi,He,ee],attrs:sM,ngContentSelectors:rM,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(Rs(iM),yt(0,"span",0),Gi(1),O(2,"span",1),Gi(3,1),N(),Gi(4,2),yt(5,"span",2)(6,"span",3)),r&2&&Rn("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-fab{background-color:var(--mdc-fab-container-color)}.mat-mdc-fab .mdc-fab__icon{width:var(--mdc-fab-icon-size);height:var(--mdc-fab-icon-size);font-size:var(--mdc-fab-icon-size)}.mat-mdc-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape)}.mat-mdc-mini-fab{background-color:var(--mdc-fab-small-container-color)}.mat-mdc-mini-fab .mdc-fab__icon{width:var(--mdc-fab-small-icon-size);height:var(--mdc-fab-small-icon-size);font-size:var(--mdc-fab-small-icon-size)}.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-small-container-shape)}.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-small-container-shape)}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mdc-extended-fab-container-height);border-radius:var(--mdc-extended-fab-container-shape);font-family:var(--mdc-extended-fab-label-text-font);font-size:var(--mdc-extended-fab-label-text-size);font-weight:var(--mdc-extended-fab-label-text-weight);letter-spacing:var(--mdc-extended-fab-label-text-tracking)}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:var(--mdc-extended-fab-container-shape)}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled,.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab[disabled],.mat-mdc-fab[disabled]:focus,.mat-mdc-fab.mat-mdc-button-disabled,.mat-mdc-fab.mat-mdc-button-disabled:focus,.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab[disabled]:focus,.mat-mdc-mini-fab.mat-mdc-button-disabled,.mat-mdc-mini-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab.mat-mdc-button-disabled-interactive,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{color:var(--mat-fab-foreground-color, inherit);box-shadow:var(--mdc-fab-container-elevation-shadow)}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color)}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color)}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity)}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity)}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity)}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow)}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color);background-color:var(--mat-fab-disabled-state-container-color)}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab{color:var(--mat-fab-small-foreground-color, inherit);box-shadow:var(--mdc-fab-small-container-elevation-shadow)}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color)}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity)}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity)}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity)}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow)}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow)}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow)}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color);background-color:var(--mat-fab-small-disabled-state-container-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab{box-shadow:var(--mdc-extended-fab-container-elevation-shadow)}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow)}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow)}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow)}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}'],encapsulation:2,changeDetection:0});let n=t;return n})();var YI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({imports:[Pn,LI,Pn]});let n=t;return n})();var QI=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({imports:[Pn,on,Pn]});let n=t;return n})();var JI=function(n){let t=[],e=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?t[e++]=r:r<2048?(t[e++]=r>>6|192,t[e++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),t[e++]=r>>18|240,t[e++]=r>>12&63|128,t[e++]=r>>6&63|128,t[e++]=r&63|128):(t[e++]=r>>12|224,t[e++]=r>>6&63|128,t[e++]=r&63|128)}return t},dM=function(n){let t=[],e=0,i=0;for(;e<n.length;){let r=n[e++];if(r<128)t[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[e++];t[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[e++],o=n[e++],a=n[e++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[i++]=String.fromCharCode(55296+(c>>10)),t[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[e++],o=n[e++];t[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ZI={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,t){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let e=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,d=s>>2,h=(s&3)<<4|a>>4,m=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(m=64)),i.push(e[d],e[h],e[m],e[g])}return i.join("")},encodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(n):this.encodeByteArray(JI(n),t)},decodeString(n,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(n):dM(this.decodeStringToByteArray(n,t))},decodeStringToByteArray(n,t){this.init_();let e=t?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=e[n.charAt(r++)],a=r<n.length?e[n.charAt(r)]:0;++r;let l=r<n.length?e[n.charAt(r)]:64;++r;let h=r<n.length?e[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||h==null)throw new Cp;let m=s<<2|a>>4;if(i.push(m),l!==64){let g=a<<4&240|l>>2;if(i.push(g),h!==64){let y=l<<6&192|h;i.push(y)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Cp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},hM=function(n){let t=JI(n);return ZI.encodeByteArray(t,!0)},Qa=function(n){return hM(n).replace(/\./g,"")},Rp=function(n){try{return ZI.decodeString(n,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function fM(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var mM=()=>fM().__FIREBASE_DEFAULTS__,pM=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},gM=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let t=n&&Rp(n[1]);return t&&JSON.parse(t)},mu=()=>{try{return mM()||pM()||gM()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},kp=n=>{var t,e;return(e=(t=mu())===null||t===void 0?void 0:t.emulatorHosts)===null||e===void 0?void 0:e[n]},tE=n=>{let t=kp(n);if(!t)return;let e=t.lastIndexOf(":");if(e<=0||e+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);let i=parseInt(t.substring(e+1),10);return t[0]==="["?[t.substring(1,e-1),i]:[t.substring(0,e),i]},Pp=()=>{var n;return(n=mu())===null||n===void 0?void 0:n.config},Mp=n=>{var t;return(t=mu())===null||t===void 0?void 0:t[`_${n}`]};var fu=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}wrapCallback(t){return(e,i)=>{e?this.reject(e):this.resolve(i),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(e):t(e,i))}}};function eE(n,t){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let e={alg:"none",type:"JWT"},i=t||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Qa(JSON.stringify(e)),Qa(JSON.stringify(o)),""].join(".")}function be(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(be())}function bM(){var n;let t=(n=mu())===null||n===void 0?void 0:n.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function pu(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function iE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function rE(){let n=be();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function sE(){return!bM()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xa(){try{return typeof indexedDB=="object"}catch{return!1}}function gu(){return new Promise((n,t)=>{try{let e=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),e||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{e=!1},r.onerror=()=>{var s;t(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(e){t(e)}})}function oE(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var _M="FirebaseError",Ae=class n extends Error{constructor(t,e,i){super(e),this.code=t,this.customData=i,this.name=_M,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,un.prototype.create)}},un=class{constructor(t,e,i){this.service=t,this.serviceName=e,this.errors=i}create(t,...e){let i=e[0]||{},r=`${this.service}/${t}`,s=this.errors[t],o=s?yM(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new Ae(r,a,i)}};function yM(n,t){return n.replace(vM,(e,i)=>{let r=t[i];return r!=null?String(r):`<${i}?>`})}var vM=/\{\$([^}]+)}/g;function aE(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}function vi(n,t){if(n===t)return!0;let e=Object.keys(n),i=Object.keys(t);for(let r of e){if(!i.includes(r))return!1;let s=n[r],o=t[r];if(XI(s)&&XI(o)){if(!vi(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!e.includes(r))return!1;return!0}function XI(n){return n!==null&&typeof n=="object"}function Hs(n){let t=[];for(let[e,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{t.push(encodeURIComponent(e)+"="+encodeURIComponent(r))}):t.push(encodeURIComponent(e)+"="+encodeURIComponent(i));return t.length?"&"+t.join("&"):""}function cE(n,t){let e=new Dp(n,t);return e.subscribe.bind(e)}var Dp=class{constructor(t,e){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(()=>{t(this)}).catch(i=>{this.error(i)})}next(t){this.forEachObserver(e=>{e.next(t)})}error(t){this.forEachObserver(e=>{e.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,e,i){let r;if(t===void 0&&e===void 0&&i===void 0)throw new Error("Missing Observer.");wM(t,["next","error","complete"])?r=t:r={next:t,error:e,complete:i},r.next===void 0&&(r.next=Sp),r.error===void 0&&(r.error=Sp),r.complete===void 0&&(r.complete=Sp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let e=0;e<this.observers.length;e++)this.sendOne(e,t)}sendOne(t,e){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{e(this.observers[t])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function wM(n,t){if(typeof n!="object"||n===null)return!1;for(let e of t)if(e in n&&typeof n[e]=="function")return!0;return!1}function Sp(){}var IM=1e3,EM=2,xM=4*60*60*1e3,TM=.5;function Op(n,t=IM,e=EM){let i=t*Math.pow(e,n),r=Math.round(TM*i*(Math.random()-.5)*2);return Math.min(xM,i+r)}function le(n){return n&&n._delegate?n._delegate:n}var ve=class{constructor(t,e,i){this.name=t,this.instanceFactory=e,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};var Br="[DEFAULT]";var Np=class{constructor(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){let e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){let i=new fu;if(this.instancesDeferred.set(e,i),this.isInitialized(e)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:e});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(e).promise}getImmediate(t){var e;let i=this.normalizeInstanceIdentifier(t?.identifier),r=(e=t?.optional)!==null&&e!==void 0?e:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(SM(t))try{this.getOrInitializeService({instanceIdentifier:Br})}catch{}for(let[e,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(e);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(t=Br){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}delete(){return x(this,null,function*(){let t=Array.from(this.instances.values());yield Promise.all([...t.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...t.filter(e=>"_delete"in e).map(e=>e._delete())])})}isComponentSet(){return this.component!=null}isInitialized(t=Br){return this.instances.has(t)}getOptions(t=Br){return this.instancesOptions.get(t)||{}}initialize(t={}){let{options:e={}}=t,i=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:e});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(t,e){var i;let r=this.normalizeInstanceIdentifier(e),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(t),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&t(o,r),()=>{s.delete(t)}}invokeOnInitCallbacks(t,e){let i=this.onInitCallbacks.get(e);if(i)for(let r of i)try{r(t,e)}catch{}}getOrInitializeService({instanceIdentifier:t,options:e={}}){let i=this.instances.get(t);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:AM(t),options:e}),this.instances.set(t,i),this.instancesOptions.set(t,e),this.invokeOnInitCallbacks(i,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,i)}catch{}return i||null}normalizeInstanceIdentifier(t=Br){return this.component?this.component.multipleInstances?t:Br:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function AM(n){return n===Br?void 0:n}function SM(n){return n.instantiationMode==="EAGER"}var bu=class{constructor(t){this.name=t,this.providers=new Map}addComponent(t){let e=this.getProvider(t.name);if(e.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);e.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);let e=new Np(t,this);return this.providers.set(t,e),e}getProviders(){return Array.from(this.providers.values())}};var CM=[],ht=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ht||{}),DM={debug:ht.DEBUG,verbose:ht.VERBOSE,info:ht.INFO,warn:ht.WARN,error:ht.ERROR,silent:ht.SILENT},RM=ht.INFO,kM={[ht.DEBUG]:"log",[ht.VERBOSE]:"log",[ht.INFO]:"info",[ht.WARN]:"warn",[ht.ERROR]:"error"},PM=(n,t,...e)=>{if(t<n.logLevel)return;let i=new Date().toISOString(),r=kM[t];if(r)console[r](`[${i}]  ${n.name}:`,...e);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)},zn=class{constructor(t){this.name=t,this._logLevel=RM,this._logHandler=PM,this._userLogHandler=null,CM.push(this)}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ht))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?DM[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ht.DEBUG,...t),this._logHandler(this,ht.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ht.VERBOSE,...t),this._logHandler(this,ht.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ht.INFO,...t),this._logHandler(this,ht.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ht.WARN,...t),this._logHandler(this,ht.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ht.ERROR,...t),this._logHandler(this,ht.ERROR,...t)}};var MM=(n,t)=>t.some(e=>n instanceof e),lE,uE;function OM(){return lE||(lE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NM(){return uE||(uE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var dE=new WeakMap,Lp=new WeakMap,hE=new WeakMap,Fp=new WeakMap,Up=new WeakMap;function FM(n){let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{e(qn(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return t.then(e=>{e instanceof IDBCursor&&dE.set(e,n)}).catch(()=>{}),Up.set(t,n),t}function LM(n){if(Lp.has(n))return;let t=new Promise((e,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Lp.set(n,t)}var Vp={get(n,t,e){if(n instanceof IDBTransaction){if(t==="done")return Lp.get(n);if(t==="objectStoreNames")return n.objectStoreNames||hE.get(n);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return qn(n[t])},set(n,t,e){return n[t]=e,!0},has(n,t){return n instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in n}};function fE(n){Vp=n(Vp)}function VM(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...e){let i=n.call(_u(this),t,...e);return hE.set(i,t.sort?t.sort():[t]),qn(i)}:NM().includes(n)?function(...t){return n.apply(_u(this),t),qn(dE.get(this))}:function(...t){return qn(n.apply(_u(this),t))}}function UM(n){return typeof n=="function"?VM(n):(n instanceof IDBTransaction&&LM(n),MM(n,OM())?new Proxy(n,Vp):n)}function qn(n){if(n instanceof IDBRequest)return FM(n);if(Fp.has(n))return Fp.get(n);let t=UM(n);return t!==n&&(Fp.set(n,t),Up.set(t,n)),t}var _u=n=>Up.get(n);function yu(n,t,{blocked:e,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,t),a=qn(o);return i&&o.addEventListener("upgradeneeded",c=>{i(qn(o.result),c.oldVersion,c.newVersion,qn(o.transaction),c)}),e&&o.addEventListener("blocked",c=>e(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var jM=["get","getKey","getAll","getAllKeys","count"],BM=["put","add","delete","clear"],jp=new Map;function mE(n,t){if(!(n instanceof IDBDatabase&&!(t in n)&&typeof t=="string"))return;if(jp.get(t))return jp.get(t);let e=t.replace(/FromIndex$/,""),i=t!==e,r=BM.includes(e);if(!(e in(i?IDBIndex:IDBObjectStore).prototype)||!(r||jM.includes(e)))return;let s=function(o,...a){return x(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[e](...a),r&&c.done]))[0]})};return jp.set(t,s),s}fE(n=>Rt($({},n),{get:(t,e,i)=>mE(t,e)||n.get(t,e,i),has:(t,e)=>!!mE(t,e)||n.has(t,e)}));var zp=class{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(zM(e)){let i=e.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(e=>e).join(" ")}};function zM(n){let t=n.getComponent();return t?.type==="VERSION"}var qp="@firebase/app",pE="0.10.8";var zr=new zn("@firebase/app"),qM="@firebase/app-compat",WM="@firebase/analytics-compat",$M="@firebase/analytics",HM="@firebase/app-check-compat",GM="@firebase/app-check",KM="@firebase/auth",YM="@firebase/auth-compat",QM="@firebase/database",XM="@firebase/database-compat",JM="@firebase/functions",ZM="@firebase/functions-compat",tO="@firebase/installations",eO="@firebase/installations-compat",nO="@firebase/messaging",iO="@firebase/messaging-compat",rO="@firebase/performance",sO="@firebase/performance-compat",oO="@firebase/remote-config",aO="@firebase/remote-config-compat",cO="@firebase/storage",lO="@firebase/storage-compat",uO="@firebase/firestore",dO="@firebase/vertexai-preview",hO="@firebase/firestore-compat",fO="firebase",mO="10.12.5";var Wp="[DEFAULT]",pO={[qp]:"fire-core",[qM]:"fire-core-compat",[$M]:"fire-analytics",[WM]:"fire-analytics-compat",[GM]:"fire-app-check",[HM]:"fire-app-check-compat",[KM]:"fire-auth",[YM]:"fire-auth-compat",[QM]:"fire-rtdb",[XM]:"fire-rtdb-compat",[JM]:"fire-fn",[ZM]:"fire-fn-compat",[tO]:"fire-iid",[eO]:"fire-iid-compat",[nO]:"fire-fcm",[iO]:"fire-fcm-compat",[rO]:"fire-perf",[sO]:"fire-perf-compat",[oO]:"fire-rc",[aO]:"fire-rc-compat",[cO]:"fire-gcs",[lO]:"fire-gcs-compat",[uO]:"fire-fst",[hO]:"fire-fst-compat",[dO]:"fire-vertex","fire-js":"fire-js",[fO]:"fire-js-all"};var vu=new Map,gO=new Map,$p=new Map;function gE(n,t){try{n.container.addComponent(t)}catch(e){zr.debug(`Component ${t.name} failed to register with FirebaseApp ${n.name}`,e)}}function Ke(n){let t=n.name;if($p.has(t))return zr.debug(`There were multiple attempts to register component ${t}.`),!1;$p.set(t,n);for(let e of vu.values())gE(e,n);for(let e of gO.values())gE(e,n);return!0}function Mn(n,t){let e=n.container.getProvider("heartbeat").getImmediate({optional:!0});return e&&e.triggerHeartbeat(),n.container.getProvider(t)}function Wn(n){return n.settings!==void 0}var bO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tr=new un("app","Firebase",bO);var Hp=class{constructor(t,e,i){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},e),this._name=e.name,this._automaticDataCollectionEnabled=e.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ve("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw tr.create("app-deleted",{appName:this._name})}};var er=mO;function Yp(n,t={}){let e=n;typeof t!="object"&&(t={name:t});let i=Object.assign({name:Wp,automaticDataCollectionEnabled:!1},t),r=i.name;if(typeof r!="string"||!r)throw tr.create("bad-app-name",{appName:String(r)});if(e||(e=Pp()),!e)throw tr.create("no-options");let s=vu.get(r);if(s){if(vi(e,s.options)&&vi(i,s.config))return s;throw tr.create("duplicate-app",{appName:r})}let o=new bu(r);for(let c of $p.values())o.addComponent(c);let a=new Hp(e,i,o);return vu.set(r,a),a}function qr(n=Wp){let t=vu.get(n);if(!t&&n===Wp&&Pp())return Yp();if(!t)throw tr.create("no-app",{appName:n});return t}function Se(n,t,e){var i;let r=(i=pO[n])!==null&&i!==void 0?i:n;e&&(r+=`-${e}`);let s=r.match(/\s|\//),o=t.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${t}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zr.warn(a.join(" "));return}Ke(new ve(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}var _O="firebase-heartbeat-database",yO=1,Ja="firebase-heartbeat-store",Bp=null;function vE(){return Bp||(Bp=yu(_O,yO,{upgrade:(n,t)=>{switch(t){case 0:try{n.createObjectStore(Ja)}catch(e){console.warn(e)}}}}).catch(n=>{throw tr.create("idb-open",{originalErrorMessage:n.message})})),Bp}function vO(n){return x(this,null,function*(){try{let e=(yield vE()).transaction(Ja),i=yield e.objectStore(Ja).get(wE(n));return yield e.done,i}catch(t){if(t instanceof Ae)zr.warn(t.message);else{let e=tr.create("idb-get",{originalErrorMessage:t?.message});zr.warn(e.message)}}})}function bE(n,t){return x(this,null,function*(){try{let i=(yield vE()).transaction(Ja,"readwrite");yield i.objectStore(Ja).put(t,wE(n)),yield i.done}catch(e){if(e instanceof Ae)zr.warn(e.message);else{let i=tr.create("idb-set",{originalErrorMessage:e?.message});zr.warn(i.message)}}})}function wE(n){return`${n.name}!${n.options.appId}`}var wO=1024,IO=30*24*60*60*1e3,Gp=class{constructor(t){this.container=t,this._heartbeatsCache=null;let e=this.container.getProvider("app").getImmediate();this._storage=new Kp(e),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return x(this,null,function*(){var t,e;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=_E();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=IO}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return x(this,null,function*(){var t;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=_E(),{heartbeatsToSend:i,unsentEntries:r}=EO(this._heartbeatsCache.heartbeats),s=Qa(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function _E(){return new Date().toISOString().substring(0,10)}function EO(n,t=wO){let e=[],i=n.slice();for(let r of n){let s=e.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),yE(e)>t){s.dates.pop();break}}else if(e.push({agent:r.agent,dates:[r.date]}),yE(e)>t){e.pop();break}i=i.slice(1)}return{heartbeatsToSend:e,unsentEntries:i}}var Kp=class{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return x(this,null,function*(){return Xa()?gu().then(()=>!0).catch(()=>!1):!1})}read(){return x(this,null,function*(){if(yield this._canUseIndexedDBPromise){let e=yield vO(this.app);return e?.heartbeats?e:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(t){return x(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return})}add(t){return x(this,null,function*(){var e;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return bE(this.app,{lastSentHeartbeatDate:(e=t.lastSentHeartbeatDate)!==null&&e!==void 0?e:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return})}};function yE(n){return Qa(JSON.stringify({version:2,heartbeats:n})).length}function xO(n){Ke(new ve("platform-logger",t=>new zp(t),"PRIVATE")),Ke(new ve("heartbeat",t=>new Gp(t),"PRIVATE")),Se(qp,pE,n),Se(qp,pE,"esm2017"),Se("fire-js","")}xO("");var TO="firebase",AO="10.12.5";Se(TO,AO,"app");var xE="@firebase/installations",Zp="0.6.8";var TE=1e4,AE=`w:${Zp}`,SE="FIS_v2",SO="https://firebaseinstallations.googleapis.com/v1",CO=60*60*1e3,DO="installations",RO="Installations";var kO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},$r=new un(DO,RO,kO);function CE(n){return n instanceof Ae&&n.code.includes("request-failed")}function DE({projectId:n}){return`${SO}/projects/${n}/installations`}function RE(n){return{token:n.token,requestStatus:2,expiresIn:MO(n.expiresIn),creationTime:Date.now()}}function kE(n,t){return x(this,null,function*(){let i=(yield t.json()).error;return $r.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function PE({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function PO(n,{refreshToken:t}){let e=PE(n);return e.append("Authorization",OO(t)),e}function ME(n){return x(this,null,function*(){let t=yield n();return t.status>=500&&t.status<600?n():t})}function MO(n){return Number(n.replace("s","000"))}function OO(n){return`${SE} ${n}`}function NO(i,r){return x(this,arguments,function*({appConfig:n,heartbeatServiceProvider:t},{fid:e}){let s=DE(n),o=PE(n),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let c={fid:e,authVersion:SE,appId:n.appId,sdkVersion:AE},l={method:"POST",headers:o,body:JSON.stringify(c)},d=yield ME(()=>fetch(s,l));if(d.ok){let h=yield d.json();return{fid:h.fid||e,registrationStatus:2,refreshToken:h.refreshToken,authToken:RE(h.authToken)}}else throw yield kE("Create Installation",d)})}function OE(n){return new Promise(t=>{setTimeout(t,n)})}function FO(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var LO=/^[cdef][\w-]{21}$/,Jp="";function VO(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let e=UO(n);return LO.test(e)?e:Jp}catch{return Jp}}function UO(n){return FO(n).substr(0,22)}function Iu(n){return`${n.appName}!${n.appId}`}var NE=new Map;function FE(n,t){let e=Iu(n);LE(e,t),jO(e,t)}function LE(n,t){let e=NE.get(n);if(e)for(let i of e)i(t)}function jO(n,t){let e=BO();e&&e.postMessage({key:n,fid:t}),zO()}var Wr=null;function BO(){return!Wr&&"BroadcastChannel"in self&&(Wr=new BroadcastChannel("[Firebase] FID Change"),Wr.onmessage=n=>{LE(n.data.key,n.data.fid)}),Wr}function zO(){NE.size===0&&Wr&&(Wr.close(),Wr=null)}var qO="firebase-installations-database",WO=1,Hr="firebase-installations-store",Qp=null;function tg(){return Qp||(Qp=yu(qO,WO,{upgrade:(n,t)=>{switch(t){case 0:n.createObjectStore(Hr)}}})),Qp}function wu(n,t){return x(this,null,function*(){let e=Iu(n),r=(yield tg()).transaction(Hr,"readwrite"),s=r.objectStore(Hr),o=yield s.get(e);return yield s.put(t,e),yield r.done,(!o||o.fid!==t.fid)&&FE(n,t.fid),t})}function VE(n){return x(this,null,function*(){let t=Iu(n),i=(yield tg()).transaction(Hr,"readwrite");yield i.objectStore(Hr).delete(t),yield i.done})}function Eu(n,t){return x(this,null,function*(){let e=Iu(n),r=(yield tg()).transaction(Hr,"readwrite"),s=r.objectStore(Hr),o=yield s.get(e),a=t(o);return a===void 0?yield s.delete(e):yield s.put(a,e),yield r.done,a&&(!o||o.fid!==a.fid)&&FE(n,a.fid),a})}function eg(n){return x(this,null,function*(){let t,e=yield Eu(n.appConfig,i=>{let r=$O(i),s=HO(n,r);return t=s.registrationPromise,s.installationEntry});return e.fid===Jp?{installationEntry:yield t}:{installationEntry:e,registrationPromise:t}})}function $O(n){let t=n||{fid:VO(),registrationStatus:0};return UE(t)}function HO(n,t){if(t.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject($r.create("app-offline"));return{installationEntry:t,registrationPromise:r}}let e={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=GO(n,e);return{installationEntry:e,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:KO(n)}:{installationEntry:t}}function GO(n,t){return x(this,null,function*(){try{let e=yield NO(n,t);return wu(n.appConfig,e)}catch(e){throw CE(e)&&e.customData.serverCode===409?yield VE(n.appConfig):yield wu(n.appConfig,{fid:t.fid,registrationStatus:0}),e}})}function KO(n){return x(this,null,function*(){let t=yield IE(n.appConfig);for(;t.registrationStatus===1;)yield OE(100),t=yield IE(n.appConfig);if(t.registrationStatus===0){let{installationEntry:e,registrationPromise:i}=yield eg(n);return i||e}return t})}function IE(n){return Eu(n,t=>{if(!t)throw $r.create("installation-not-found");return UE(t)})}function UE(n){return YO(n)?{fid:n.fid,registrationStatus:0}:n}function YO(n){return n.registrationStatus===1&&n.registrationTime+TE<Date.now()}function QO(i,r){return x(this,arguments,function*({appConfig:n,heartbeatServiceProvider:t},e){let s=XO(n,e),o=PO(n,e),a=t.getImmediate({optional:!0});if(a){let h=yield a.getHeartbeatsHeader();h&&o.append("x-firebase-client",h)}let c={installation:{sdkVersion:AE,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},d=yield ME(()=>fetch(s,l));if(d.ok){let h=yield d.json();return RE(h)}else throw yield kE("Generate Auth Token",d)})}function XO(n,{fid:t}){return`${DE(n)}/${t}/authTokens:generate`}function ng(n,t=!1){return x(this,null,function*(){let e,i=yield Eu(n.appConfig,s=>{if(!jE(s))throw $r.create("not-registered");let o=s.authToken;if(!t&&tN(o))return s;if(o.requestStatus===1)return e=JO(n,t),s;{if(!navigator.onLine)throw $r.create("app-offline");let a=nN(s);return e=ZO(n,a),a}});return e?yield e:i.authToken})}function JO(n,t){return x(this,null,function*(){let e=yield EE(n.appConfig);for(;e.authToken.requestStatus===1;)yield OE(100),e=yield EE(n.appConfig);let i=e.authToken;return i.requestStatus===0?ng(n,t):i})}function EE(n){return Eu(n,t=>{if(!jE(t))throw $r.create("not-registered");let e=t.authToken;return iN(e)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}function ZO(n,t){return x(this,null,function*(){try{let e=yield QO(n,t),i=Object.assign(Object.assign({},t),{authToken:e});return yield wu(n.appConfig,i),e}catch(e){if(CE(e)&&(e.customData.serverCode===401||e.customData.serverCode===404))yield VE(n.appConfig);else{let i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});yield wu(n.appConfig,i)}throw e}})}function jE(n){return n!==void 0&&n.registrationStatus===2}function tN(n){return n.requestStatus===2&&!eN(n)}function eN(n){let t=Date.now();return t<n.creationTime||n.creationTime+n.expiresIn<t+CO}function nN(n){let t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:t})}function iN(n){return n.requestStatus===1&&n.requestTime+TE<Date.now()}function rN(n){return x(this,null,function*(){let t=n,{installationEntry:e,registrationPromise:i}=yield eg(t);return i?i.catch(console.error):ng(t).catch(console.error),e.fid})}function sN(n,t=!1){return x(this,null,function*(){let e=n;return yield oN(e),(yield ng(e,t)).token})}function oN(n){return x(this,null,function*(){let{registrationPromise:t}=yield eg(n);t&&(yield t)})}function aN(n){if(!n||!n.options)throw Xp("App Configuration");if(!n.name)throw Xp("App Name");let t=["projectId","apiKey","appId"];for(let e of t)if(!n.options[e])throw Xp(e);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Xp(n){return $r.create("missing-app-config-values",{valueName:n})}var BE="installations",cN="installations-internal",lN=n=>{let t=n.getProvider("app").getImmediate(),e=aN(t),i=Mn(t,"heartbeat");return{app:t,appConfig:e,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},uN=n=>{let t=n.getProvider("app").getImmediate(),e=Mn(t,BE).getImmediate();return{getId:()=>rN(e),getToken:r=>sN(e,r)}};function dN(){Ke(new ve(BE,lN,"PUBLIC")),Ke(new ve(cN,uN,"PRIVATE"))}dN();Se(xE,Zp);Se(xE,Zp,"esm2017");var xu="analytics",hN="firebase_id",fN="origin",mN=60*1e3,pN="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",lg="https://www.googletagmanager.com/gtag/js";var Ye=new zn("@firebase/analytics");var gN={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},dn=new un("analytics","Analytics",gN);function bN(n){if(!n.startsWith(lg)){let t=dn.create("invalid-gtag-resource",{gtagURL:n});return Ye.warn(t.message),""}return n}function KE(n){return Promise.all(n.map(t=>t.catch(e=>e)))}function _N(n,t){let e;return window.trustedTypes&&(e=window.trustedTypes.createPolicy(n,t)),e}function yN(n,t){let e=_N("firebase-js-sdk-policy",{createScriptURL:bN}),i=document.createElement("script"),r=`${lg}?l=${n}&id=${t}`;i.src=e?e?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function vN(n){let t=[];return Array.isArray(window[n])?t=window[n]:window[n]=t,t}function wN(n,t,e,i,r,s){return x(this,null,function*(){let o=i[r];try{if(o)yield t[o];else{let c=(yield KE(e)).find(l=>l.measurementId===r);c&&(yield t[c.appId])}}catch(a){Ye.error(a)}n("config",r,s)})}function IN(n,t,e,i,r){return x(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let a=yield KE(e);for(let c of o){let l=a.find(h=>h.measurementId===c),d=l&&t[l.appId];if(d)s.push(d);else{s=[];break}}}s.length===0&&(s=Object.values(t)),yield Promise.all(s),n("event",i,r||{})}catch(s){Ye.error(s)}})}function EN(n,t,e,i){function r(s,...o){return x(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield IN(n,t,e,a,c)}else if(s==="config"){let[a,c]=o;yield wN(n,t,e,i,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){Ye.error(a)}})}return r}function xN(n,t,e,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=EN(s,n,t,e),{gtagCore:s,wrappedGtag:window[r]}}function TN(n){let t=window.document.getElementsByTagName("script");for(let e of Object.values(t))if(e.src&&e.src.includes(lg)&&e.src.includes(n))return e;return null}var AN=30,SN=1e3,rg=class{constructor(t={},e=SN){this.throttleMetadata=t,this.intervalMillis=e}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,e){this.throttleMetadata[t]=e}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}},YE=new rg;function CN(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function DN(n){return x(this,null,function*(){var t;let{appId:e,apiKey:i}=n,r={method:"GET",headers:CN(i)},s=pN.replace("{app-id}",e),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((t=c.error)===null||t===void 0)&&t.message&&(a=c.error.message)}catch{}throw dn.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function RN(i){return x(this,arguments,function*(n,t=YE,e){let{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw dn.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw dn.create("no-api-key")}let a=t.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new sg;return setTimeout(()=>x(this,null,function*(){c.abort()}),e!==void 0?e:mN),QE({appId:r,apiKey:s,measurementId:o},a,c,t)})}function QE(s,o,a){return x(this,arguments,function*(n,{throttleEndTimeMillis:t,backoffCount:e},i,r=YE){var c;let{appId:l,measurementId:d}=n;try{yield kN(i,t)}catch(h){if(d)return Ye.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${h?.message}]`),{appId:l,measurementId:d};throw h}try{let h=yield DN(n);return r.deleteThrottleMetadata(l),h}catch(h){let m=h;if(!PN(m)){if(r.deleteThrottleMetadata(l),d)return Ye.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${d} provided in the "measurementId" field in the local Firebase config. [${m?.message}]`),{appId:l,measurementId:d};throw h}let g=Number((c=m?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Op(e,r.intervalMillis,AN):Op(e,r.intervalMillis),y={throttleEndTimeMillis:Date.now()+g,backoffCount:e+1};return r.setThrottleMetadata(l,y),Ye.debug(`Calling attemptFetch again in ${g} millis`),QE(n,y,i,r)}})}function kN(n,t){return new Promise((e,i)=>{let r=Math.max(t-Date.now(),0),s=setTimeout(e,r);n.addEventListener(()=>{clearTimeout(s),i(dn.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function PN(n){if(!(n instanceof Ae)||!n.customData)return!1;let t=Number(n.customData.httpStatus);return t===429||t===500||t===503||t===504}var sg=class{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}};var og;function MN(n,t,e,i,r){return x(this,null,function*(){if(r&&r.global){n("event",e,i);return}else{let s=yield t,o=Object.assign(Object.assign({},i),{send_to:s});n("event",e,o)}})}var ag;function ON(n){ag=n}function NN(n){og=n}function FN(){return x(this,null,function*(){if(Xa())try{yield gu()}catch(n){return Ye.warn(dn.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ye.warn(dn.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function LN(n,t,e,i,r,s,o){return x(this,null,function*(){var a;let c=RN(n);c.then(g=>{e[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Ye.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ye.error(g)),t.push(c);let l=FN().then(g=>{if(g)return i.getId()}),[d,h]=yield Promise.all([c,l]);TN(s)||yN(s,d.measurementId),ag&&(r("consent","default",ag),ON(void 0)),r("js",new Date);let m=(a=o?.config)!==null&&a!==void 0?a:{};return m[fN]="firebase",m.update=!0,h!=null&&(m[hN]=h),r("config",d.measurementId,m),og&&(r("set",og),NN(void 0)),d.measurementId})}var cg=class{constructor(t){this.app=t}_delete(){return delete Za[this.app.options.appId],Promise.resolve()}},Za={},zE=[],qE={},ig="dataLayer",VN="gtag",WE,XE,$E=!1;function UN(){let n=[];if(pu()&&n.push("This is a browser extension environment."),oE()||n.push("Cookies are not available."),n.length>0){let t=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),e=dn.create("invalid-analytics-context",{errorInfo:t});Ye.warn(e.message)}}function jN(n,t,e){UN();let i=n.options.appId;if(!i)throw dn.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ye.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw dn.create("no-api-key");if(Za[i]!=null)throw dn.create("already-exists",{id:i});if(!$E){vN(ig);let{wrappedGtag:s,gtagCore:o}=xN(Za,zE,qE,ig,VN);XE=s,WE=o,$E=!0}return Za[i]=LN(n,zE,qE,t,WE,ig,e),new cg(n)}function JE(n=qr()){n=le(n);let t=Mn(n,xu);return t.isInitialized()?t.getImmediate():BN(n)}function BN(n,t={}){let e=Mn(n,xu);if(e.isInitialized()){let r=e.getImmediate();if(vi(t,e.getOptions()))return r;throw dn.create("already-initialized")}return e.initialize({options:t})}function zN(n,t,e,i){n=le(n),MN(XE,Za[n.app.options.appId],t,e,i).catch(r=>Ye.error(r))}var HE="@firebase/analytics",GE="0.10.7";function qN(){Ke(new ve(xu,(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return jN(i,r,e)},"PUBLIC")),Ke(new ve("analytics-internal",n,"PRIVATE")),Se(HE,GE),Se(HE,GE,"esm2017");function n(t){try{let e=t.getProvider(xu).getImmediate();return{logEvent:(i,r,s)=>zN(e,i,r,s)}}catch(e){throw dn.create("interop-component-reg-failed",{reason:e})}}}qN();var ZE=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},tx={};var nr,ug;(function(){var n;function t(E,w){function I(){}I.prototype=w.prototype,E.D=w.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(A,S,D){for(var T=Array(arguments.length-2),qt=2;qt<arguments.length;qt++)T[qt-2]=arguments[qt];return w.prototype[S].apply(A,T)}}function e(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(i,e),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,w,I){I||(I=0);var A=Array(16);if(typeof w=="string")for(var S=0;16>S;++S)A[S]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(S=0;16>S;++S)A[S]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=E.g[0],I=E.g[1],S=E.g[2];var D=E.g[3],T=w+(D^I&(S^D))+A[0]+3614090360&4294967295;w=I+(T<<7&4294967295|T>>>25),T=D+(S^w&(I^S))+A[1]+3905402710&4294967295,D=w+(T<<12&4294967295|T>>>20),T=S+(I^D&(w^I))+A[2]+606105819&4294967295,S=D+(T<<17&4294967295|T>>>15),T=I+(w^S&(D^w))+A[3]+3250441966&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(D^I&(S^D))+A[4]+4118548399&4294967295,w=I+(T<<7&4294967295|T>>>25),T=D+(S^w&(I^S))+A[5]+1200080426&4294967295,D=w+(T<<12&4294967295|T>>>20),T=S+(I^D&(w^I))+A[6]+2821735955&4294967295,S=D+(T<<17&4294967295|T>>>15),T=I+(w^S&(D^w))+A[7]+4249261313&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(D^I&(S^D))+A[8]+1770035416&4294967295,w=I+(T<<7&4294967295|T>>>25),T=D+(S^w&(I^S))+A[9]+2336552879&4294967295,D=w+(T<<12&4294967295|T>>>20),T=S+(I^D&(w^I))+A[10]+4294925233&4294967295,S=D+(T<<17&4294967295|T>>>15),T=I+(w^S&(D^w))+A[11]+2304563134&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(D^I&(S^D))+A[12]+1804603682&4294967295,w=I+(T<<7&4294967295|T>>>25),T=D+(S^w&(I^S))+A[13]+4254626195&4294967295,D=w+(T<<12&4294967295|T>>>20),T=S+(I^D&(w^I))+A[14]+2792965006&4294967295,S=D+(T<<17&4294967295|T>>>15),T=I+(w^S&(D^w))+A[15]+1236535329&4294967295,I=S+(T<<22&4294967295|T>>>10),T=w+(S^D&(I^S))+A[1]+4129170786&4294967295,w=I+(T<<5&4294967295|T>>>27),T=D+(I^S&(w^I))+A[6]+3225465664&4294967295,D=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(D^w))+A[11]+643717713&4294967295,S=D+(T<<14&4294967295|T>>>18),T=I+(D^w&(S^D))+A[0]+3921069994&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(S^D&(I^S))+A[5]+3593408605&4294967295,w=I+(T<<5&4294967295|T>>>27),T=D+(I^S&(w^I))+A[10]+38016083&4294967295,D=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(D^w))+A[15]+3634488961&4294967295,S=D+(T<<14&4294967295|T>>>18),T=I+(D^w&(S^D))+A[4]+3889429448&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(S^D&(I^S))+A[9]+568446438&4294967295,w=I+(T<<5&4294967295|T>>>27),T=D+(I^S&(w^I))+A[14]+3275163606&4294967295,D=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(D^w))+A[3]+4107603335&4294967295,S=D+(T<<14&4294967295|T>>>18),T=I+(D^w&(S^D))+A[8]+1163531501&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(S^D&(I^S))+A[13]+2850285829&4294967295,w=I+(T<<5&4294967295|T>>>27),T=D+(I^S&(w^I))+A[2]+4243563512&4294967295,D=w+(T<<9&4294967295|T>>>23),T=S+(w^I&(D^w))+A[7]+1735328473&4294967295,S=D+(T<<14&4294967295|T>>>18),T=I+(D^w&(S^D))+A[12]+2368359562&4294967295,I=S+(T<<20&4294967295|T>>>12),T=w+(I^S^D)+A[5]+4294588738&4294967295,w=I+(T<<4&4294967295|T>>>28),T=D+(w^I^S)+A[8]+2272392833&4294967295,D=w+(T<<11&4294967295|T>>>21),T=S+(D^w^I)+A[11]+1839030562&4294967295,S=D+(T<<16&4294967295|T>>>16),T=I+(S^D^w)+A[14]+4259657740&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(I^S^D)+A[1]+2763975236&4294967295,w=I+(T<<4&4294967295|T>>>28),T=D+(w^I^S)+A[4]+1272893353&4294967295,D=w+(T<<11&4294967295|T>>>21),T=S+(D^w^I)+A[7]+4139469664&4294967295,S=D+(T<<16&4294967295|T>>>16),T=I+(S^D^w)+A[10]+3200236656&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(I^S^D)+A[13]+681279174&4294967295,w=I+(T<<4&4294967295|T>>>28),T=D+(w^I^S)+A[0]+3936430074&4294967295,D=w+(T<<11&4294967295|T>>>21),T=S+(D^w^I)+A[3]+3572445317&4294967295,S=D+(T<<16&4294967295|T>>>16),T=I+(S^D^w)+A[6]+76029189&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(I^S^D)+A[9]+3654602809&4294967295,w=I+(T<<4&4294967295|T>>>28),T=D+(w^I^S)+A[12]+3873151461&4294967295,D=w+(T<<11&4294967295|T>>>21),T=S+(D^w^I)+A[15]+530742520&4294967295,S=D+(T<<16&4294967295|T>>>16),T=I+(S^D^w)+A[2]+3299628645&4294967295,I=S+(T<<23&4294967295|T>>>9),T=w+(S^(I|~D))+A[0]+4096336452&4294967295,w=I+(T<<6&4294967295|T>>>26),T=D+(I^(w|~S))+A[7]+1126891415&4294967295,D=w+(T<<10&4294967295|T>>>22),T=S+(w^(D|~I))+A[14]+2878612391&4294967295,S=D+(T<<15&4294967295|T>>>17),T=I+(D^(S|~w))+A[5]+4237533241&4294967295,I=S+(T<<21&4294967295|T>>>11),T=w+(S^(I|~D))+A[12]+1700485571&4294967295,w=I+(T<<6&4294967295|T>>>26),T=D+(I^(w|~S))+A[3]+2399980690&4294967295,D=w+(T<<10&4294967295|T>>>22),T=S+(w^(D|~I))+A[10]+4293915773&4294967295,S=D+(T<<15&4294967295|T>>>17),T=I+(D^(S|~w))+A[1]+2240044497&4294967295,I=S+(T<<21&4294967295|T>>>11),T=w+(S^(I|~D))+A[8]+1873313359&4294967295,w=I+(T<<6&4294967295|T>>>26),T=D+(I^(w|~S))+A[15]+4264355552&4294967295,D=w+(T<<10&4294967295|T>>>22),T=S+(w^(D|~I))+A[6]+2734768916&4294967295,S=D+(T<<15&4294967295|T>>>17),T=I+(D^(S|~w))+A[13]+1309151649&4294967295,I=S+(T<<21&4294967295|T>>>11),T=w+(S^(I|~D))+A[4]+4149444226&4294967295,w=I+(T<<6&4294967295|T>>>26),T=D+(I^(w|~S))+A[11]+3174756917&4294967295,D=w+(T<<10&4294967295|T>>>22),T=S+(w^(D|~I))+A[2]+718787259&4294967295,S=D+(T<<15&4294967295|T>>>17),T=I+(D^(S|~w))+A[9]+3951481745&4294967295,E.g[0]=E.g[0]+w&4294967295,E.g[1]=E.g[1]+(S+(T<<21&4294967295|T>>>11))&4294967295,E.g[2]=E.g[2]+S&4294967295,E.g[3]=E.g[3]+D&4294967295}i.prototype.u=function(E,w){w===void 0&&(w=E.length);for(var I=w-this.blockSize,A=this.B,S=this.h,D=0;D<w;){if(S==0)for(;D<=I;)r(this,E,D),D+=this.blockSize;if(typeof E=="string"){for(;D<w;)if(A[S++]=E.charCodeAt(D++),S==this.blockSize){r(this,A),S=0;break}}else for(;D<w;)if(A[S++]=E[D++],S==this.blockSize){r(this,A),S=0;break}}this.h=S,this.o+=w},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var w=1;w<E.length-8;++w)E[w]=0;var I=8*this.o;for(w=E.length-8;w<E.length;++w)E[w]=I&255,I/=256;for(this.u(E),E=Array(16),w=I=0;4>w;++w)for(var A=0;32>A;A+=8)E[I++]=this.g[w]>>>A&255;return E};function s(E,w){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=w(E)}function o(E,w){this.h=w;for(var I=[],A=!0,S=E.length-1;0<=S;S--){var D=E[S]|0;A&&D==w||(I[S]=D,A=!1)}this.g=I}var a={};function c(E){return-128<=E&&128>E?s(E,function(w){return new o([w|0],0>w?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return h;if(0>E)return v(l(-E));for(var w=[],I=1,A=0;E>=I;A++)w[A]=E/I|0,I*=4294967296;return new o(w,0)}function d(E,w){if(E.length==0)throw Error("number format error: empty string");if(w=w||10,2>w||36<w)throw Error("radix out of range: "+w);if(E.charAt(0)=="-")return v(d(E.substring(1),w));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(w,8)),A=h,S=0;S<E.length;S+=8){var D=Math.min(8,E.length-S),T=parseInt(E.substring(S,S+D),w);8>D?(D=l(Math.pow(w,D)),A=A.j(D).add(l(T))):(A=A.j(I),A=A.add(l(T)))}return A}var h=c(0),m=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(b(this))return-v(this).m();for(var E=0,w=1,I=0;I<this.g.length;I++){var A=this.i(I);E+=(0<=A?A:4294967296+A)*w,w*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(y(this))return"0";if(b(this))return"-"+v(this).toString(E);for(var w=l(Math.pow(E,6)),I=this,A="";;){var S=V(I,w).g;I=C(I,S.j(w));var D=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=S,y(I))return D+A;for(;6>D.length;)D="0"+D;A=D+A}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function y(E){if(E.h!=0)return!1;for(var w=0;w<E.g.length;w++)if(E.g[w]!=0)return!1;return!0}function b(E){return E.h==-1}n.l=function(E){return E=C(this,E),b(E)?-1:y(E)?0:1};function v(E){for(var w=E.g.length,I=[],A=0;A<w;A++)I[A]=~E.g[A];return new o(I,~E.h).add(m)}n.abs=function(){return b(this)?v(this):this},n.add=function(E){for(var w=Math.max(this.g.length,E.g.length),I=[],A=0,S=0;S<=w;S++){var D=A+(this.i(S)&65535)+(E.i(S)&65535),T=(D>>>16)+(this.i(S)>>>16)+(E.i(S)>>>16);A=T>>>16,D&=65535,T&=65535,I[S]=T<<16|D}return new o(I,I[I.length-1]&-2147483648?-1:0)};function C(E,w){return E.add(v(w))}n.j=function(E){if(y(this)||y(E))return h;if(b(this))return b(E)?v(this).j(v(E)):v(v(this).j(E));if(b(E))return v(this.j(v(E)));if(0>this.l(g)&&0>E.l(g))return l(this.m()*E.m());for(var w=this.g.length+E.g.length,I=[],A=0;A<2*w;A++)I[A]=0;for(A=0;A<this.g.length;A++)for(var S=0;S<E.g.length;S++){var D=this.i(A)>>>16,T=this.i(A)&65535,qt=E.i(S)>>>16,pt=E.i(S)&65535;I[2*A+2*S]+=T*pt,R(I,2*A+2*S),I[2*A+2*S+1]+=D*pt,R(I,2*A+2*S+1),I[2*A+2*S+1]+=T*qt,R(I,2*A+2*S+1),I[2*A+2*S+2]+=D*qt,R(I,2*A+2*S+2)}for(A=0;A<w;A++)I[A]=I[2*A+1]<<16|I[2*A];for(A=w;A<2*w;A++)I[A]=0;return new o(I,0)};function R(E,w){for(;(E[w]&65535)!=E[w];)E[w+1]+=E[w]>>>16,E[w]&=65535,w++}function P(E,w){this.g=E,this.h=w}function V(E,w){if(y(w))throw Error("division by zero");if(y(E))return new P(h,h);if(b(E))return w=V(v(E),w),new P(v(w.g),v(w.h));if(b(w))return w=V(E,v(w)),new P(v(w.g),w.h);if(30<E.g.length){if(b(E)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var I=m,A=w;0>=A.l(E);)I=F(I),A=F(A);var S=L(I,1),D=L(A,1);for(A=L(A,2),I=L(I,2);!y(A);){var T=D.add(A);0>=T.l(E)&&(S=S.add(I),D=T),A=L(A,1),I=L(I,1)}return w=C(E,S.j(w)),new P(S,w)}for(S=h;0<=E.l(w);){for(I=Math.max(1,Math.floor(E.m()/w.m())),A=Math.ceil(Math.log(I)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),D=l(I),T=D.j(w);b(T)||0<T.l(E);)I-=A,D=l(I),T=D.j(w);y(D)&&(D=m),S=S.add(D),E=C(E,T)}return new P(S,E)}n.A=function(E){return V(this,E).h},n.and=function(E){for(var w=Math.max(this.g.length,E.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)&E.i(A);return new o(I,this.h&E.h)},n.or=function(E){for(var w=Math.max(this.g.length,E.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)|E.i(A);return new o(I,this.h|E.h)},n.xor=function(E){for(var w=Math.max(this.g.length,E.g.length),I=[],A=0;A<w;A++)I[A]=this.i(A)^E.i(A);return new o(I,this.h^E.h)};function F(E){for(var w=E.g.length+1,I=[],A=0;A<w;A++)I[A]=E.i(A)<<1|E.i(A-1)>>>31;return new o(I,E.h)}function L(E,w){var I=w>>5;w%=32;for(var A=E.g.length-I,S=[],D=0;D<A;D++)S[D]=0<w?E.i(D+I)>>>w|E.i(D+I+1)<<32-w:E.i(D+I);return new o(S,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,ug=tx.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=d,nr=tx.Integer=o}).apply(typeof ZE<"u"?ZE:typeof self<"u"?self:typeof window<"u"?window:{});var Tu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},wi={};var dg,hg,Gs,fg,tc,Au,mg,pg,gg;(function(){var n,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,p){return u==Array.prototype||u==Object.prototype||(u[f]=p.value),u};function e(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Tu=="object"&&Tu];for(var f=0;f<u.length;++f){var p=u[f];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var i=e(this);function r(u,f){if(f)t:{var p=i;u=u.split(".");for(var _=0;_<u.length-1;_++){var k=u[_];if(!(k in p))break t;p=p[k]}u=u[u.length-1],_=p[u],f=f(_),f!=_&&f!=null&&t(p,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var p=0,_=!1,k={next:function(){if(!_&&p<u.length){var M=p++;return{value:f(M,u[M]),done:!1}}return _=!0,{done:!0,value:void 0}}};return k[Symbol.iterator]=function(){return k},k}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,p){return p})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function d(u,f,p){return u.call.apply(u.bind,arguments)}function h(u,f,p){if(!u)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var k=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(k,_),u.apply(f,k)}}return function(){return u.apply(f,arguments)}}function m(u,f,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:h,m.apply(null,arguments)}function g(u,f){var p=Array.prototype.slice.call(arguments,1);return function(){var _=p.slice();return _.push.apply(_,arguments),u.apply(this,_)}}function y(u,f){function p(){}p.prototype=f.prototype,u.aa=f.prototype,u.prototype=new p,u.prototype.constructor=u,u.Qb=function(_,k,M){for(var W=Array(arguments.length-2),Pt=2;Pt<arguments.length;Pt++)W[Pt-2]=arguments[Pt];return f.prototype[k].apply(_,W)}}function b(u){let f=u.length;if(0<f){let p=Array(f);for(let _=0;_<f;_++)p[_]=u[_];return p}return[]}function v(u,f){for(let p=1;p<arguments.length;p++){let _=arguments[p];if(c(_)){let k=u.length||0,M=_.length||0;u.length=k+M;for(let W=0;W<M;W++)u[k+W]=_[W]}else u.push(_)}}class C{constructor(f,p){this.i=f,this.j=p,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function R(u){return/^[\s\xa0]*$/.test(u)}function P(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var F=P().indexOf("Gecko")!=-1&&!(P().toLowerCase().indexOf("webkit")!=-1&&P().indexOf("Edge")==-1)&&!(P().indexOf("Trident")!=-1||P().indexOf("MSIE")!=-1)&&P().indexOf("Edge")==-1;function L(u,f,p){for(let _ in u)f.call(p,u[_],_,u)}function E(u,f){for(let p in u)f.call(void 0,u[p],p,u)}function w(u){let f={};for(let p in u)f[p]=u[p];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(u,f){let p,_;for(let k=1;k<arguments.length;k++){_=arguments[k];for(p in _)u[p]=_[p];for(let M=0;M<I.length;M++)p=I[M],Object.prototype.hasOwnProperty.call(_,p)&&(u[p]=_[p])}}function S(u){var f=1;u=u.split(":");let p=[];for(;0<f&&u.length;)p.push(u.shift()),f--;return u.length&&p.push(u.join(":")),p}function D(u){a.setTimeout(()=>{throw u},0)}function T(){var u=ue;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class qt{constructor(){this.h=this.g=null}add(f,p){let _=pt.get();_.set(f,p),this.h?this.h.next=_:this.g=_,this.h=_}}var pt=new C(()=>new Lt,u=>u.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(f,p){this.h=f,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let kt,Ee=!1,ue=new qt,li=()=>{let u=a.Promise.resolve(void 0);kt=()=>{u.then(ws)}};var ws=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(p){D(p)}var f=pt;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}Ee=!1};function Be(){this.s=this.s,this.C=this.C}Be.prototype.s=!1,Be.prototype.ma=function(){this.s||(this.s=!0,this.N())},Be.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Yt(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Yt.prototype.h=function(){this.defaultPrevented=!0};var ui=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let p=()=>{};a.addEventListener("test",p,f),a.removeEventListener("test",p,f)}catch{}return u}();function An(u,f){if(Yt.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var p=this.type=u.type,_=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(F){t:{try{V(f.nodeName);var k=!0;break t}catch{}k=!1}k||(f=null)}}else p=="mouseover"?f=u.fromElement:p=="mouseout"&&(f=u.toElement);this.relatedTarget=f,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:di[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&An.aa.h.call(this)}}y(An,Yt);var di={2:"touch",3:"pen",4:"mouse"};An.prototype.h=function(){An.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ea="closure_listenable_"+(1e6*Math.random()|0),PR=0;function MR(u,f,p,_,k){this.listener=u,this.proxy=null,this.src=f,this.type=p,this.capture=!!_,this.ha=k,this.key=++PR,this.da=this.fa=!1}function dl(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function hl(u){this.src=u,this.g={},this.h=0}hl.prototype.add=function(u,f,p,_,k){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var W=Df(u,f,_,k);return-1<W?(f=u[W],p||(f.fa=!1)):(f=new MR(f,this.src,M,!!_,k),f.fa=p,u.push(f)),f};function Cf(u,f){var p=f.type;if(p in u.g){var _=u.g[p],k=Array.prototype.indexOf.call(_,f,void 0),M;(M=0<=k)&&Array.prototype.splice.call(_,k,1),M&&(dl(f),u.g[p].length==0&&(delete u.g[p],u.h--))}}function Df(u,f,p,_){for(var k=0;k<u.length;++k){var M=u[k];if(!M.da&&M.listener==f&&M.capture==!!p&&M.ha==_)return k}return-1}var Rf="closure_lm_"+(1e6*Math.random()|0),kf={};function Sv(u,f,p,_,k){if(_&&_.once)return Dv(u,f,p,_,k);if(Array.isArray(f)){for(var M=0;M<f.length;M++)Sv(u,f[M],p,_,k);return null}return p=Nf(p),u&&u[ea]?u.K(f,p,l(_)?!!_.capture:!!_,k):Cv(u,f,p,!1,_,k)}function Cv(u,f,p,_,k,M){if(!f)throw Error("Invalid event type");var W=l(k)?!!k.capture:!!k,Pt=Mf(u);if(Pt||(u[Rf]=Pt=new hl(u)),p=Pt.add(f,p,_,W,M),p.proxy)return p;if(_=OR(),p.proxy=_,_.src=u,_.listener=p,u.addEventListener)ui||(k=W),k===void 0&&(k=!1),u.addEventListener(f.toString(),_,k);else if(u.attachEvent)u.attachEvent(kv(f.toString()),_);else if(u.addListener&&u.removeListener)u.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return p}function OR(){function u(p){return f.call(u.src,u.listener,p)}let f=NR;return u}function Dv(u,f,p,_,k){if(Array.isArray(f)){for(var M=0;M<f.length;M++)Dv(u,f[M],p,_,k);return null}return p=Nf(p),u&&u[ea]?u.L(f,p,l(_)?!!_.capture:!!_,k):Cv(u,f,p,!0,_,k)}function Rv(u,f,p,_,k){if(Array.isArray(f))for(var M=0;M<f.length;M++)Rv(u,f[M],p,_,k);else _=l(_)?!!_.capture:!!_,p=Nf(p),u&&u[ea]?(u=u.i,f=String(f).toString(),f in u.g&&(M=u.g[f],p=Df(M,p,_,k),-1<p&&(dl(M[p]),Array.prototype.splice.call(M,p,1),M.length==0&&(delete u.g[f],u.h--)))):u&&(u=Mf(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Df(f,p,_,k)),(p=-1<u?f[u]:null)&&Pf(p))}function Pf(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[ea])Cf(f.i,u);else{var p=u.type,_=u.proxy;f.removeEventListener?f.removeEventListener(p,_,u.capture):f.detachEvent?f.detachEvent(kv(p),_):f.addListener&&f.removeListener&&f.removeListener(_),(p=Mf(f))?(Cf(p,u),p.h==0&&(p.src=null,f[Rf]=null)):dl(u)}}}function kv(u){return u in kf?kf[u]:kf[u]="on"+u}function NR(u,f){if(u.da)u=!0;else{f=new An(f,this);var p=u.listener,_=u.ha||u.src;u.fa&&Pf(u),u=p.call(_,f)}return u}function Mf(u){return u=u[Rf],u instanceof hl?u:null}var Of="__closure_events_fn_"+(1e9*Math.random()>>>0);function Nf(u){return typeof u=="function"?u:(u[Of]||(u[Of]=function(f){return u.handleEvent(f)}),u[Of])}function Pe(){Be.call(this),this.i=new hl(this),this.M=this,this.F=null}y(Pe,Be),Pe.prototype[ea]=!0,Pe.prototype.removeEventListener=function(u,f,p,_){Rv(this,u,f,p,_)};function ze(u,f){var p,_=u.F;if(_)for(p=[];_;_=_.F)p.push(_);if(u=u.M,_=f.type||f,typeof f=="string")f=new Yt(f,u);else if(f instanceof Yt)f.target=f.target||u;else{var k=f;f=new Yt(_,u),A(f,k)}if(k=!0,p)for(var M=p.length-1;0<=M;M--){var W=f.g=p[M];k=fl(W,_,!0,f)&&k}if(W=f.g=u,k=fl(W,_,!0,f)&&k,k=fl(W,_,!1,f)&&k,p)for(M=0;M<p.length;M++)W=f.g=p[M],k=fl(W,_,!1,f)&&k}Pe.prototype.N=function(){if(Pe.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var p=u.g[f],_=0;_<p.length;_++)dl(p[_]);delete u.g[f],u.h--}}this.F=null},Pe.prototype.K=function(u,f,p,_){return this.i.add(String(u),f,!1,p,_)},Pe.prototype.L=function(u,f,p,_){return this.i.add(String(u),f,!0,p,_)};function fl(u,f,p,_){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var k=!0,M=0;M<f.length;++M){var W=f[M];if(W&&!W.da&&W.capture==p){var Pt=W.listener,xe=W.ha||W.src;W.fa&&Cf(u.i,W),k=Pt.call(xe,_)!==!1&&k}}return k&&!_.defaultPrevented}function Pv(u,f,p){if(typeof u=="function")p&&(u=m(u,p));else if(u&&typeof u.handleEvent=="function")u=m(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function Mv(u){u.g=Pv(()=>{u.g=null,u.i&&(u.i=!1,Mv(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class FR extends Be{constructor(f,p){super(),this.m=f,this.l=p,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:Mv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function na(u){Be.call(this),this.h=u,this.g={}}y(na,Be);var Ov=[];function Nv(u){L(u.g,function(f,p){this.g.hasOwnProperty(p)&&Pf(f)},u),u.g={}}na.prototype.N=function(){na.aa.N.call(this),Nv(this)},na.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ff=a.JSON.stringify,LR=a.JSON.parse,VR=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Lf(){}Lf.prototype.h=null;function Fv(u){return u.h||(u.h=u.i())}function Lv(){}var ia={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Vf(){Yt.call(this,"d")}y(Vf,Yt);function Uf(){Yt.call(this,"c")}y(Uf,Yt);var Ir={},Vv=null;function ml(){return Vv=Vv||new Pe}Ir.La="serverreachability";function Uv(u){Yt.call(this,Ir.La,u)}y(Uv,Yt);function ra(u){let f=ml();ze(f,new Uv(f))}Ir.STAT_EVENT="statevent";function jv(u,f){Yt.call(this,Ir.STAT_EVENT,u),this.stat=f}y(jv,Yt);function qe(u){let f=ml();ze(f,new jv(f,u))}Ir.Ma="timingevent";function Bv(u,f){Yt.call(this,Ir.Ma,u),this.size=f}y(Bv,Yt);function sa(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function oa(){this.g=!0}oa.prototype.xa=function(){this.g=!1};function UR(u,f,p,_,k,M){u.info(function(){if(u.g)if(M)for(var W="",Pt=M.split("&"),xe=0;xe<Pt.length;xe++){var vt=Pt[xe].split("=");if(1<vt.length){var Me=vt[0];vt=vt[1];var Oe=Me.split("_");W=2<=Oe.length&&Oe[1]=="type"?W+(Me+"="+vt+"&"):W+(Me+"=redacted&")}}else W=null;else W=M;return"XMLHTTP REQ ("+_+") [attempt "+k+"]: "+f+`
`+p+`
`+W})}function jR(u,f,p,_,k,M,W){u.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+k+"]: "+f+`
`+p+`
`+M+" "+W})}function Is(u,f,p,_){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+zR(u,p)+(_?" "+_:"")})}function BR(u,f){u.info(function(){return"TIMEOUT: "+f})}oa.prototype.info=function(){};function zR(u,f){if(!u.g)return f;if(!f)return null;try{var p=JSON.parse(f);if(p){for(u=0;u<p.length;u++)if(Array.isArray(p[u])){var _=p[u];if(!(2>_.length)){var k=_[1];if(Array.isArray(k)&&!(1>k.length)){var M=k[0];if(M!="noop"&&M!="stop"&&M!="close")for(var W=1;W<k.length;W++)k[W]=""}}}}return Ff(p)}catch{return f}}var pl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},zv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},jf;function gl(){}y(gl,Lf),gl.prototype.g=function(){return new XMLHttpRequest},gl.prototype.i=function(){return{}},jf=new gl;function Ui(u,f,p,_){this.j=u,this.i=f,this.l=p,this.R=_||1,this.U=new na(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new qv}function qv(){this.i=null,this.g="",this.h=!1}var Wv={},Bf={};function zf(u,f,p){u.L=1,u.v=vl(hi(f)),u.m=p,u.P=!0,$v(u,null)}function $v(u,f){u.F=Date.now(),bl(u),u.A=hi(u.v);var p=u.A,_=u.R;Array.isArray(_)||(_=[String(_)]),s0(p.i,"t",_),u.C=0,p=u.j.J,u.h=new qv,u.g=E0(u.j,p?f:null,!u.m),0<u.O&&(u.M=new FR(m(u.Y,u,u.g),u.O)),f=u.U,p=u.g,_=u.ca;var k="readystatechange";Array.isArray(k)||(k&&(Ov[0]=k.toString()),k=Ov);for(var M=0;M<k.length;M++){var W=Sv(p,k[M],_||f.handleEvent,!1,f.h||f);if(!W)break;f.g[W.key]=W}f=u.H?w(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),ra(),UR(u.i,u.u,u.A,u.l,u.R,u.m)}Ui.prototype.ca=function(u){u=u.target;let f=this.M;f&&fi(u)==3?f.j():this.Y(u)},Ui.prototype.Y=function(u){try{if(u==this.g)t:{let Oe=fi(this.g);var f=this.g.Ba();let Ts=this.g.Z();if(!(3>Oe)&&(Oe!=3||this.g&&(this.h.h||this.g.oa()||h0(this.g)))){this.J||Oe!=4||f==7||(f==8||0>=Ts?ra(3):ra(2)),qf(this);var p=this.g.Z();this.X=p;e:if(Hv(this)){var _=h0(this.g);u="";var k=_.length,M=fi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Er(this),aa(this);var W="";break e}this.h.i=new a.TextDecoder}for(f=0;f<k;f++)this.h.h=!0,u+=this.h.i.decode(_[f],{stream:!(M&&f==k-1)});_.length=0,this.h.g+=u,this.C=0,W=this.h.g}else W=this.g.oa();if(this.o=p==200,jR(this.i,this.u,this.A,this.l,this.R,Oe,p),this.o){if(this.T&&!this.K){e:{if(this.g){var Pt,xe=this.g;if((Pt=xe.g?xe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Pt)){var vt=Pt;break e}}vt=null}if(p=vt)Is(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Wf(this,p);else{this.o=!1,this.s=3,qe(12),Er(this),aa(this);break t}}if(this.P){p=!0;let Sn;for(;!this.J&&this.C<W.length;)if(Sn=qR(this,W),Sn==Bf){Oe==4&&(this.s=4,qe(14),p=!1),Is(this.i,this.l,null,"[Incomplete Response]");break}else if(Sn==Wv){this.s=4,qe(15),Is(this.i,this.l,W,"[Invalid Chunk]"),p=!1;break}else Is(this.i,this.l,Sn,null),Wf(this,Sn);if(Hv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Oe!=4||W.length!=0||this.h.h||(this.s=1,qe(16),p=!1),this.o=this.o&&p,!p)Is(this.i,this.l,W,"[Invalid Chunked Response]"),Er(this),aa(this);else if(0<W.length&&!this.W){this.W=!0;var Me=this.j;Me.g==this&&Me.ba&&!Me.M&&(Me.j.info("Great, no buffering proxy detected. Bytes received: "+W.length),Qf(Me),Me.M=!0,qe(11))}}else Is(this.i,this.l,W,null),Wf(this,W);Oe==4&&Er(this),this.o&&!this.J&&(Oe==4?y0(this.j,this):(this.o=!1,bl(this)))}else ok(this.g),p==400&&0<W.indexOf("Unknown SID")?(this.s=3,qe(12)):(this.s=0,qe(13)),Er(this),aa(this)}}}catch{}finally{}};function Hv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function qR(u,f){var p=u.C,_=f.indexOf(`
`,p);return _==-1?Bf:(p=Number(f.substring(p,_)),isNaN(p)?Wv:(_+=1,_+p>f.length?Bf:(f=f.slice(_,_+p),u.C=_+p,f)))}Ui.prototype.cancel=function(){this.J=!0,Er(this)};function bl(u){u.S=Date.now()+u.I,Gv(u,u.I)}function Gv(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=sa(m(u.ba,u),f)}function qf(u){u.B&&(a.clearTimeout(u.B),u.B=null)}Ui.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(BR(this.i,this.A),this.L!=2&&(ra(),qe(17)),Er(this),this.s=2,aa(this)):Gv(this,this.S-u)};function aa(u){u.j.G==0||u.J||y0(u.j,u)}function Er(u){qf(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Nv(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function Wf(u,f){try{var p=u.j;if(p.G!=0&&(p.g==u||$f(p.h,u))){if(!u.K&&$f(p.h,u)&&p.G==3){try{var _=p.Da.g.parse(f)}catch{_=null}if(Array.isArray(_)&&_.length==3){var k=_;if(k[0]==0){t:if(!p.u){if(p.g)if(p.g.F+3e3<u.F)Tl(p),El(p);else break t;Yf(p),qe(18)}}else p.za=k[1],0<p.za-p.T&&37500>k[2]&&p.F&&p.v==0&&!p.C&&(p.C=sa(m(p.Za,p),6e3));if(1>=Qv(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else Tr(p,11)}else if((u.K||p.g==u)&&Tl(p),!R(f))for(k=p.Da.g.parse(f),f=0;f<k.length;f++){let vt=k[f];if(p.T=vt[0],vt=vt[1],p.G==2)if(vt[0]=="c"){p.K=vt[1],p.ia=vt[2];let Me=vt[3];Me!=null&&(p.la=Me,p.j.info("VER="+p.la));let Oe=vt[4];Oe!=null&&(p.Aa=Oe,p.j.info("SVER="+p.Aa));let Ts=vt[5];Ts!=null&&typeof Ts=="number"&&0<Ts&&(_=1.5*Ts,p.L=_,p.j.info("backChannelRequestTimeoutMs_="+_)),_=p;let Sn=u.g;if(Sn){let Sl=Sn.g?Sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Sl){var M=_.h;M.g||Sl.indexOf("spdy")==-1&&Sl.indexOf("quic")==-1&&Sl.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&(Hf(M,M.h),M.h=null))}if(_.D){let Xf=Sn.g?Sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Xf&&(_.ya=Xf,zt(_.I,_.D,Xf))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-u.F,p.j.info("Handshake RTT: "+p.R+"ms")),_=p;var W=u;if(_.qa=I0(_,_.J?_.ia:null,_.W),W.K){Xv(_.h,W);var Pt=W,xe=_.L;xe&&(Pt.I=xe),Pt.B&&(qf(Pt),bl(Pt)),_.g=W}else b0(_);0<p.i.length&&xl(p)}else vt[0]!="stop"&&vt[0]!="close"||Tr(p,7);else p.G==3&&(vt[0]=="stop"||vt[0]=="close"?vt[0]=="stop"?Tr(p,7):Kf(p):vt[0]!="noop"&&p.l&&p.l.ta(vt),p.v=0)}}ra(4)}catch{}}var WR=class{constructor(u,f){this.g=u,this.map=f}};function Kv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Yv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Qv(u){return u.h?1:u.g?u.g.size:0}function $f(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function Hf(u,f){u.g?u.g.add(f):u.h=f}function Xv(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Kv.prototype.cancel=function(){if(this.i=Jv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Jv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let p of u.g.values())f=f.concat(p.D);return f}return b(u.i)}function $R(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],p=u.length,_=0;_<p;_++)f.push(u[_]);return f}f=[],p=0;for(_ in u)f[p++]=u[_];return f}function HR(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var p=0;p<u;p++)f.push(p);return f}f=[],p=0;for(let _ in u)f[p++]=_;return f}}}function Zv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var p=HR(u),_=$R(u),k=_.length,M=0;M<k;M++)f.call(void 0,_[M],p&&p[M],u)}var t0=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GR(u,f){if(u){u=u.split("&");for(var p=0;p<u.length;p++){var _=u[p].indexOf("="),k=null;if(0<=_){var M=u[p].substring(0,_);k=u[p].substring(_+1)}else M=u[p];f(M,k?decodeURIComponent(k.replace(/\+/g," ")):"")}}}function xr(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof xr){this.h=u.h,_l(this,u.j),this.o=u.o,this.g=u.g,yl(this,u.s),this.l=u.l;var f=u.i,p=new ua;p.i=f.i,f.g&&(p.g=new Map(f.g),p.h=f.h),e0(this,p),this.m=u.m}else u&&(f=String(u).match(t0))?(this.h=!1,_l(this,f[1]||"",!0),this.o=ca(f[2]||""),this.g=ca(f[3]||"",!0),yl(this,f[4]),this.l=ca(f[5]||"",!0),e0(this,f[6]||"",!0),this.m=ca(f[7]||"")):(this.h=!1,this.i=new ua(null,this.h))}xr.prototype.toString=function(){var u=[],f=this.j;f&&u.push(la(f,n0,!0),":");var p=this.g;return(p||f=="file")&&(u.push("//"),(f=this.o)&&u.push(la(f,n0,!0),"@"),u.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&u.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&u.push("/"),u.push(la(p,p.charAt(0)=="/"?QR:YR,!0))),(p=this.i.toString())&&u.push("?",p),(p=this.m)&&u.push("#",la(p,JR)),u.join("")};function hi(u){return new xr(u)}function _l(u,f,p){u.j=p?ca(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function yl(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function e0(u,f,p){f instanceof ua?(u.i=f,ZR(u.i,u.h)):(p||(f=la(f,XR)),u.i=new ua(f,u.h))}function zt(u,f,p){u.i.set(f,p)}function vl(u){return zt(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function ca(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function la(u,f,p){return typeof u=="string"?(u=encodeURI(u).replace(f,KR),p&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function KR(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var n0=/[#\/\?@]/g,YR=/[#\?:]/g,QR=/[#\?]/g,XR=/[#\?@]/g,JR=/#/g;function ua(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function ji(u){u.g||(u.g=new Map,u.h=0,u.i&&GR(u.i,function(f,p){u.add(decodeURIComponent(f.replace(/\+/g," ")),p)}))}n=ua.prototype,n.add=function(u,f){ji(this),this.i=null,u=Es(this,u);var p=this.g.get(u);return p||this.g.set(u,p=[]),p.push(f),this.h+=1,this};function i0(u,f){ji(u),f=Es(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function r0(u,f){return ji(u),f=Es(u,f),u.g.has(f)}n.forEach=function(u,f){ji(this),this.g.forEach(function(p,_){p.forEach(function(k){u.call(f,k,_,this)},this)},this)},n.na=function(){ji(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),p=[];for(let _=0;_<f.length;_++){let k=u[_];for(let M=0;M<k.length;M++)p.push(f[_])}return p},n.V=function(u){ji(this);let f=[];if(typeof u=="string")r0(this,u)&&(f=f.concat(this.g.get(Es(this,u))));else{u=Array.from(this.g.values());for(let p=0;p<u.length;p++)f=f.concat(u[p])}return f},n.set=function(u,f){return ji(this),this.i=null,u=Es(this,u),r0(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function s0(u,f,p){i0(u,f),0<p.length&&(u.i=null,u.g.set(Es(u,f),b(p)),u.h+=p.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var p=0;p<f.length;p++){var _=f[p];let M=encodeURIComponent(String(_)),W=this.V(_);for(_=0;_<W.length;_++){var k=M;W[_]!==""&&(k+="="+encodeURIComponent(String(W[_]))),u.push(k)}}return this.i=u.join("&")};function Es(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function ZR(u,f){f&&!u.j&&(ji(u),u.i=null,u.g.forEach(function(p,_){var k=_.toLowerCase();_!=k&&(i0(this,_),s0(this,k,p))},u)),u.j=f}function tk(u,f){let p=new oa;if(a.Image){let _=new Image;_.onload=g(Bi,p,"TestLoadImage: loaded",!0,f,_),_.onerror=g(Bi,p,"TestLoadImage: error",!1,f,_),_.onabort=g(Bi,p,"TestLoadImage: abort",!1,f,_),_.ontimeout=g(Bi,p,"TestLoadImage: timeout",!1,f,_),a.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=u}else f(!1)}function ek(u,f){let p=new oa,_=new AbortController,k=setTimeout(()=>{_.abort(),Bi(p,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:_.signal}).then(M=>{clearTimeout(k),M.ok?Bi(p,"TestPingServer: ok",!0,f):Bi(p,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(k),Bi(p,"TestPingServer: error",!1,f)})}function Bi(u,f,p,_,k){try{k&&(k.onload=null,k.onerror=null,k.onabort=null,k.ontimeout=null),_(p)}catch{}}function nk(){this.g=new VR}function ik(u,f,p){let _=p||"";try{Zv(u,function(k,M){let W=k;l(k)&&(W=Ff(k)),f.push(_+M+"="+encodeURIComponent(W))})}catch(k){throw f.push(_+"type="+encodeURIComponent("_badmap")),k}}function da(u){this.l=u.Ub||null,this.j=u.eb||!1}y(da,Lf),da.prototype.g=function(){return new wl(this.l,this.j)},da.prototype.i=function(u){return function(){return u}}({});function wl(u,f){Pe.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}y(wl,Pe),n=wl.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,fa(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ha(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,fa(this)),this.g&&(this.readyState=3,fa(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;o0(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function o0(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?ha(this):fa(this),this.readyState==3&&o0(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,ha(this))},n.Qa=function(u){this.g&&(this.response=u,ha(this))},n.ga=function(){this.g&&ha(this)};function ha(u){u.readyState=4,u.l=null,u.j=null,u.v=null,fa(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var p=f.next();!p.done;)p=p.value,u.push(p[0]+": "+p[1]),p=f.next();return u.join(`\r
`)};function fa(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(wl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function a0(u){let f="";return L(u,function(p,_){f+=_,f+=":",f+=p,f+=`\r
`}),f}function Gf(u,f,p){t:{for(_ in p){var _=!1;break t}_=!0}_||(p=a0(p),typeof u=="string"?p!=null&&encodeURIComponent(String(p)):zt(u,f,p))}function Qt(u){Pe.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}y(Qt,Pe);var rk=/^https?$/i,sk=["POST","PUT"];n=Qt.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,p,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():jf.g(),this.v=this.o?Fv(this.o):Fv(jf),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){c0(this,M);return}if(u=p||"",p=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var k in _)p.set(k,_[k]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(let M of _.keys())p.set(M,_.get(M));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(p.keys()).find(M=>M.toLowerCase()=="content-type"),k=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(sk,f,void 0))||_||k||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,W]of p)this.g.setRequestHeader(M,W);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{d0(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){c0(this,M)}};function c0(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,l0(u),Il(u)}function l0(u){u.A||(u.A=!0,ze(u,"complete"),ze(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,ze(this,"complete"),ze(this,"abort"),Il(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Il(this,!0)),Qt.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?u0(this):this.bb())},n.bb=function(){u0(this)};function u0(u){if(u.h&&typeof o<"u"&&(!u.v[1]||fi(u)!=4||u.Z()!=2)){if(u.u&&fi(u)==4)Pv(u.Ea,0,u);else if(ze(u,"readystatechange"),fi(u)==4){u.h=!1;try{let W=u.Z();t:switch(W){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break t;default:f=!1}var p;if(!(p=f)){var _;if(_=W===0){var k=String(u.D).match(t0)[1]||null;!k&&a.self&&a.self.location&&(k=a.self.location.protocol.slice(0,-1)),_=!rk.test(k?k.toLowerCase():"")}p=_}if(p)ze(u,"complete"),ze(u,"success");else{u.m=6;try{var M=2<fi(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",l0(u)}}finally{Il(u)}}}}function Il(u,f){if(u.g){d0(u);let p=u.g,_=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||ze(u,"ready");try{p.onreadystatechange=_}catch{}}}function d0(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function fi(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<fi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),LR(f)}};function h0(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function ok(u){let f={};u=(u.g&&2<=fi(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<u.length;_++){if(R(u[_]))continue;var p=S(u[_]);let k=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();let M=f[k]||[];f[k]=M,M.push(p)}E(f,function(_){return _.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ma(u,f,p){return p&&p.internalChannelParams&&p.internalChannelParams[u]||f}function f0(u){this.Aa=0,this.i=[],this.j=new oa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ma("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ma("baseRetryDelayMs",5e3,u),this.cb=ma("retryDelaySeedMs",1e4,u),this.Wa=ma("forwardChannelMaxRetries",2,u),this.wa=ma("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Kv(u&&u.concurrentRequestLimit),this.Da=new nk,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=f0.prototype,n.la=8,n.G=1,n.connect=function(u,f,p,_){qe(0),this.W=u,this.H=f||{},p&&_!==void 0&&(this.H.OSID=p,this.H.OAID=_),this.F=this.X,this.I=I0(this,null,this.W),xl(this)};function Kf(u){if(m0(u),u.G==3){var f=u.U++,p=hi(u.I);if(zt(p,"SID",u.K),zt(p,"RID",f),zt(p,"TYPE","terminate"),pa(u,p),f=new Ui(u,u.j,f),f.L=2,f.v=vl(hi(p)),p=!1,a.navigator&&a.navigator.sendBeacon)try{p=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!p&&a.Image&&(new Image().src=f.v,p=!0),p||(f.g=E0(f.j,null),f.g.ea(f.v)),f.F=Date.now(),bl(f)}w0(u)}function El(u){u.g&&(Qf(u),u.g.cancel(),u.g=null)}function m0(u){El(u),u.u&&(a.clearTimeout(u.u),u.u=null),Tl(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function xl(u){if(!Yv(u.h)&&!u.s){u.s=!0;var f=u.Ga;kt||li(),Ee||(kt(),Ee=!0),ue.add(f,u),u.B=0}}function ak(u,f){return Qv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=sa(m(u.Ga,u,f),v0(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let k=new Ui(this,this.j,u),M=this.o;if(this.S&&(M?(M=w(M),A(M,this.S)):M=this.S),this.m!==null||this.O||(k.H=M,M=null),this.P)t:{for(var f=0,p=0;p<this.i.length;p++){e:{var _=this.i[p];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break e}_=void 0}if(_===void 0)break;if(f+=_,4096<f){f=p;break t}if(f===4096||p===this.i.length-1){f=p+1;break t}}f=1e3}else f=1e3;f=g0(this,k,f),p=hi(this.I),zt(p,"RID",u),zt(p,"CVER",22),this.D&&zt(p,"X-HTTP-Session-Id",this.D),pa(this,p),M&&(this.O?f="headers="+encodeURIComponent(String(a0(M)))+"&"+f:this.m&&Gf(p,this.m,M)),Hf(this.h,k),this.Ua&&zt(p,"TYPE","init"),this.P?(zt(p,"$req",f),zt(p,"SID","null"),k.T=!0,zf(k,p,null)):zf(k,p,f),this.G=2}}else this.G==3&&(u?p0(this,u):this.i.length==0||Yv(this.h)||p0(this))};function p0(u,f){var p;f?p=f.l:p=u.U++;let _=hi(u.I);zt(_,"SID",u.K),zt(_,"RID",p),zt(_,"AID",u.T),pa(u,_),u.m&&u.o&&Gf(_,u.m,u.o),p=new Ui(u,u.j,p,u.B+1),u.m===null&&(p.H=u.o),f&&(u.i=f.D.concat(u.i)),f=g0(u,p,1e3),p.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),Hf(u.h,p),zf(p,_,f)}function pa(u,f){u.H&&L(u.H,function(p,_){zt(f,_,p)}),u.l&&Zv({},function(p,_){zt(f,_,p)})}function g0(u,f,p){p=Math.min(u.i.length,p);var _=u.l?m(u.l.Na,u.l,u):null;t:{var k=u.i;let M=-1;for(;;){let W=["count="+p];M==-1?0<p?(M=k[0].g,W.push("ofs="+M)):M=0:W.push("ofs="+M);let Pt=!0;for(let xe=0;xe<p;xe++){let vt=k[xe].g,Me=k[xe].map;if(vt-=M,0>vt)M=Math.max(0,k[xe].g-100),Pt=!1;else try{ik(Me,W,"req"+vt+"_")}catch{_&&_(Me)}}if(Pt){_=W.join("&");break t}}}return u=u.i.splice(0,p),f.D=u,_}function b0(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;kt||li(),Ee||(kt(),Ee=!0),ue.add(f,u),u.v=0}}function Yf(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=sa(m(u.Fa,u),v0(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,_0(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=sa(m(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,qe(10),El(this),_0(this))};function Qf(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function _0(u){u.g=new Ui(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=hi(u.qa);zt(f,"RID","rpc"),zt(f,"SID",u.K),zt(f,"AID",u.T),zt(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&zt(f,"TO",u.ja),zt(f,"TYPE","xmlhttp"),pa(u,f),u.m&&u.o&&Gf(f,u.m,u.o),u.L&&(u.g.I=u.L);var p=u.g;u=u.ia,p.L=1,p.v=vl(hi(f)),p.m=null,p.P=!0,$v(p,u)}n.Za=function(){this.C!=null&&(this.C=null,El(this),Yf(this),qe(19))};function Tl(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function y0(u,f){var p=null;if(u.g==f){Tl(u),Qf(u),u.g=null;var _=2}else if($f(u.h,f))p=f.D,Xv(u.h,f),_=1;else return;if(u.G!=0){if(f.o)if(_==1){p=f.m?f.m.length:0,f=Date.now()-f.F;var k=u.B;_=ml(),ze(_,new Bv(_,p)),xl(u)}else b0(u);else if(k=f.s,k==3||k==0&&0<f.X||!(_==1&&ak(u,f)||_==2&&Yf(u)))switch(p&&0<p.length&&(f=u.h,f.i=f.i.concat(p)),k){case 1:Tr(u,5);break;case 4:Tr(u,10);break;case 3:Tr(u,6);break;default:Tr(u,2)}}}function v0(u,f){let p=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(p*=2),p*f}function Tr(u,f){if(u.j.info("Error code "+f),f==2){var p=m(u.fb,u),_=u.Xa;let k=!_;_=new xr(_||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||_l(_,"https"),vl(_),k?tk(_.toString(),p):ek(_.toString(),p)}else qe(2);u.G=0,u.l&&u.l.sa(f),w0(u),m0(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),qe(2)):(this.j.info("Failed to ping google.com"),qe(1))};function w0(u){if(u.G=0,u.ka=[],u.l){let f=Jv(u.h);(f.length!=0||u.i.length!=0)&&(v(u.ka,f),v(u.ka,u.i),u.h.i.length=0,b(u.i),u.i.length=0),u.l.ra()}}function I0(u,f,p){var _=p instanceof xr?hi(p):new xr(p);if(_.g!="")f&&(_.g=f+"."+_.g),yl(_,_.s);else{var k=a.location;_=k.protocol,f=f?f+"."+k.hostname:k.hostname,k=+k.port;var M=new xr(null);_&&_l(M,_),f&&(M.g=f),k&&yl(M,k),p&&(M.l=p),_=M}return p=u.D,f=u.ya,p&&f&&zt(_,p,f),zt(_,"VER",u.la),pa(u,_),_}function E0(u,f,p){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new Qt(new da({eb:p})):new Qt(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function x0(){}n=x0.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Al(){}Al.prototype.g=function(u,f){return new nn(u,f)};function nn(u,f){Pe.call(this),this.g=new f0(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!R(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new xs(this)}y(nn,Pe),nn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},nn.prototype.close=function(){Kf(this.g)},nn.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var p={};p.__data__=u,u=p}else this.u&&(p={},p.__data__=Ff(u),u=p);f.i.push(new WR(f.Ya++,u)),f.G==3&&xl(f)},nn.prototype.N=function(){this.g.l=null,delete this.j,Kf(this.g),delete this.g,nn.aa.N.call(this)};function T0(u){Vf.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){t:{for(let p in f){u=p;break t}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}y(T0,Vf);function A0(){Uf.call(this),this.status=1}y(A0,Uf);function xs(u){this.g=u}y(xs,x0),xs.prototype.ua=function(){ze(this.g,"a")},xs.prototype.ta=function(u){ze(this.g,new T0(u))},xs.prototype.sa=function(u){ze(this.g,new A0)},xs.prototype.ra=function(){ze(this.g,"b")},Al.prototype.createWebChannel=Al.prototype.g,nn.prototype.send=nn.prototype.o,nn.prototype.open=nn.prototype.m,nn.prototype.close=nn.prototype.close,gg=wi.createWebChannelTransport=function(){return new Al},pg=wi.getStatEventTarget=function(){return ml()},mg=wi.Event=Ir,Au=wi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},pl.NO_ERROR=0,pl.TIMEOUT=8,pl.HTTP_ERROR=6,tc=wi.ErrorCode=pl,zv.COMPLETE="complete",fg=wi.EventType=zv,Lv.EventType=ia,ia.OPEN="a",ia.CLOSE="b",ia.ERROR="c",ia.MESSAGE="d",Pe.prototype.listen=Pe.prototype.K,Gs=wi.WebChannel=Lv,hg=wi.FetchXmlHttpFactory=da,Qt.prototype.listenOnce=Qt.prototype.L,Qt.prototype.getLastError=Qt.prototype.Ka,Qt.prototype.getLastErrorCode=Qt.prototype.Ba,Qt.prototype.getStatus=Qt.prototype.Z,Qt.prototype.getResponseJson=Qt.prototype.Oa,Qt.prototype.getResponseText=Qt.prototype.oa,Qt.prototype.send=Qt.prototype.ea,Qt.prototype.setWithCredentials=Qt.prototype.Ha,dg=wi.XhrIo=Qt}).apply(typeof Tu<"u"?Tu:typeof self<"u"?self:typeof window<"u"?window:{});var ex="@firebase/firestore";var we=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};we.UNAUTHENTICATED=new we(null),we.GOOGLE_CREDENTIALS=new we("google-credentials-uid"),we.FIRST_PARTY=new we("first-party-uid"),we.MOCK_USER=new we("mock-user");var go="10.12.5";var Yr=new zn("@firebase/firestore");function ec(){return Yr.logLevel}function Y(n,...t){if(Yr.logLevel<=ht.DEBUG){let e=t.map(r_);Yr.debug(`Firestore (${go}): ${n}`,...e)}}function Ei(n,...t){if(Yr.logLevel<=ht.ERROR){let e=t.map(r_);Yr.error(`Firestore (${go}): ${n}`,...e)}}function eo(n,...t){if(Yr.logLevel<=ht.WARN){let e=t.map(r_);Yr.warn(`Firestore (${go}): ${n}`,...e)}}function r_(n){if(typeof n=="string")return n;try{return function(e){return JSON.stringify(e)}(n)}catch{return n}}function nt(n="Unexpected state"){let t=`FIRESTORE (${go}) INTERNAL ASSERTION FAILED: `+n;throw Ei(t),new Error(t)}function Nt(n,t){n||nt()}function rt(n,t){return n}var U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},G=class extends Ae{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Hn=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var ku=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},wg=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(we.UNAUTHENTICATED))}shutdown(){}},Ig=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},Eg=class{constructor(t){this.t=t,this.currentUser=we.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,e){let i=this.i,r=c=>this.i!==i?(i=this.i,e(c)):Promise.resolve(),s=new Hn;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Hn,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;t.enqueueRetryable(()=>x(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{Y("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(Y("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Hn)}},0),o()}getToken(){let t=this.i,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(i=>this.i!==t?(Y("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Nt(typeof i.accessToken=="string"),new ku(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let t=this.auth&&this.auth.getUid();return Nt(t===null||typeof t=="string"),new we(t)}},xg=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i,this.type="FirstParty",this.user=we.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Tg=class{constructor(t,e,i){this.l=t,this.h=e,this.P=i}getToken(){return Promise.resolve(new xg(this.l,this.h,this.P))}start(t,e){t.enqueueRetryable(()=>e(we.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Ag=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Sg=class{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,e){let i=s=>{s.error!=null&&Y("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,Y("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>i(s))};let r=s=>{Y("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):Y("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Nt(typeof e.token=="string"),this.R=e.token,new Ag(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function WN(n){let t=typeof self<"u"&&(self.crypto||self.msCrypto),e=new Uint8Array(n);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(e);else for(let i=0;i<n;i++)e[i]=Math.floor(256*Math.random());return e}var Pu=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,i="";for(;i.length<20;){let r=WN(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<e&&(i+=t.charAt(r[s]%t.length))}return i}};function Et(n,t){return n<t?-1:n>t?1:0}function no(n,t,e){return n.length===t.length&&n.every((i,r)=>e(i,t[r]))}var Ce=class n{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return n.fromMillis(Date.now())}static fromDate(t){return n.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),i=Math.floor(1e6*(t-1e3*e));return new n(e,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Et(this.nanoseconds,t.nanoseconds):Et(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var at=class n{constructor(t){this.timestamp=t}static fromTimestamp(t){return new n(t)}static min(){return new n(new Ce(0,0))}static max(){return new n(new Ce(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Mu=class n{constructor(t,e,i){e===void 0?e=0:e>t.length&&nt(),i===void 0?i=t.length-e:i>t.length-e&&nt(),this.segments=t,this.offset=e,this.len=i}get length(){return this.len}isEqual(t){return n.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof n?t.forEach(i=>{e.push(i)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,i=this.limit();e<i;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let i=Math.min(t.length,e.length);for(let r=0;r<i;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},Ht=class n extends Mu{construct(t,e,i){return new n(t,e,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let i of t){if(i.indexOf("//")>=0)throw new G(U.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);e.push(...i.split("/").filter(r=>r.length>0))}return new n(e)}static emptyPath(){return new n([])}},$N=/^[_a-zA-Z][_a-zA-Z0-9]*$/,fn=class n extends Mu{construct(t,e,i){return new n(t,e,i)}static isValidIdentifier(t){return $N.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(t){let e=[],i="",r=0,s=()=>{if(i.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(i),i=""},o=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new G(U.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let c=t[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new G(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new G(U.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new n(e)}static emptyPath(){return new n([])}};var Z=class n{constructor(t){this.path=t}static fromPath(t){return new n(Ht.fromString(t))}static fromName(t){return new n(Ht.fromString(t).popFirst(5))}static empty(){return new n(Ht.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Ht.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return Ht.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new n(new Ht(t.slice()))}};var Cg=class{constructor(t,e,i,r){this.indexId=t,this.collectionGroup=e,this.fields=i,this.indexState=r}};Cg.UNKNOWN_ID=-1;function HN(n,t){let e=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=at.fromTimestamp(i===1e9?new Ce(e+1,0):new Ce(e,i));return new Qr(r,Z.empty(),t)}function GN(n){return new Qr(n.readTime,n.key,-1)}var Qr=class n{constructor(t,e,i){this.readTime=t,this.documentKey=e,this.largestBatchId=i}static min(){return new n(at.min(),Z.empty(),-1)}static max(){return new n(at.max(),Z.empty(),-1)}};function KN(n,t){let e=n.readTime.compareTo(t.readTime);return e!==0?e:(e=Z.comparator(n.documentKey,t.documentKey),e!==0?e:Et(n.largestBatchId,t.largestBatchId))}var YN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Dg=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function wc(n){return x(this,null,function*(){if(n.code!==U.FAILED_PRECONDITION||n.message!==YN)throw n;Y("LocalStore","Unexpectedly lost primary lease")})}var q=class n{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(i,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof n?e:n.resolve(e)}catch(e){return n.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):n.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):n.reject(e)}static resolve(t){return new n((e,i)=>{e(t)})}static reject(t){return new n((e,i)=>{i(t)})}static waitFor(t){return new n((e,i)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},c=>i(c))}),o=!0,s===r&&e()})}static or(t){let e=n.resolve(!1);for(let i of t)e=e.next(r=>r?n.resolve(r):i());return e}static forEach(t,e){let i=[];return t.forEach((r,s)=>{i.push(e.call(this,r,s))}),this.waitFor(i)}static mapArray(t,e){return new n((i,r)=>{let s=t.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;e(t[l]).next(d=>{o[l]=d,++a,a===s&&i(o)},d=>r(d))}})}static doWhile(t,e){return new n((i,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):i()};s()})}};function QN(n){let t=n.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}function Ic(n){return n.name==="IndexedDbTransactionError"}var Mx=(()=>{class n{constructor(e,i){this.previousValue=e,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.se&&this.se(e),e}}return n.oe=-1,n})();function sd(n){return n==null}function ac(n){return n===0&&1/n==-1/0}function XN(n){return typeof n=="number"&&Number.isInteger(n)&&!ac(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var JN=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],B3=[...JN,"documentOverlays"],ZN=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tF=ZN,eF=[...tF,"indexConfiguration","indexState","indexEntries"];var z3=[...eF,"globals"];function nx(n){let t=0;for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t++;return t}function rs(n,t){for(let e in n)Object.prototype.hasOwnProperty.call(n,e)&&t(e,n[e])}function Ox(n){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t))return!1;return!0}var re=class n{constructor(t,e){this.comparator=t,this.root=e||Gn.EMPTY}insert(t,e){return new n(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,Gn.BLACK,null,null))}remove(t){return new n(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Gn.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let i=this.comparator(t,e.key);if(i===0)return e.value;i<0?e=e.left:i>0&&(e=e.right)}return null}indexOf(t){let e=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(t,i.key);if(r===0)return e+i.left.size;r<0?i=i.left:(e+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,i)=>(t(e,i),!1))}toString(){let t=[];return this.inorderTraversal((e,i)=>(t.push(`${e}:${i}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Xs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Xs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Xs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Xs(this.root,t,this.comparator,!0)}},Xs=class{constructor(t,e,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?i(t.key,e):1,e&&r&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},Gn=class n{constructor(t,e,i,r,s){this.key=t,this.value=e,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,e,i,r,s){return new n(t??this.key,e??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,e,i){let r=this,s=i(t,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(t,e,i),null):s===0?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,e){let i,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),e(t,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){let t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){let t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){let t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)}checkMaxDepth(){let t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();let t=this.left.check();if(t!==this.right.check())throw nt();return t+(this.isRed()?0:1)}};Gn.EMPTY=null,Gn.RED=!0,Gn.BLACK=!1;Gn.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(t,e,i,r,s){return this}insert(t,e,i){return new Gn(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Ve=class n{constructor(t){this.comparator=t,this.data=new re(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,i)=>(t(e),!1))}forEachInRange(t,e){let i=this.data.getIteratorFrom(t[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let i;for(i=e!==void 0?this.data.getIteratorFrom(e):this.data.getIterator();i.hasNext();)if(!t(i.getNext().key))return}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ou(this.data.getIterator())}getIteratorFrom(t){return new Ou(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(i=>{e=e.add(i)}),e}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.data.getIterator(),i=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new n(this.comparator);return e.data=t,e}},Ou=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var vn=class n{constructor(t){this.fields=t,t.sort(fn.comparator)}static empty(){return new n([])}unionWith(t){let e=new Ve(fn.comparator);for(let i of this.fields)e=e.add(i);for(let i of t)e=e.add(i);return new n(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return no(this.fields,t.fields,(e,i)=>e.isEqual(i))}};var Nu=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ue=class n{constructor(t){this.binaryString=t}static fromBase64String(t){let e=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Nu("Invalid base64 string: "+s):s}}(t);return new n(e)}static fromUint8Array(t){let e=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(t);return new n(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(e){return btoa(e)}(this.binaryString)}toUint8Array(){return function(e){let i=new Uint8Array(e.length);for(let r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Et(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};Ue.EMPTY_BYTE_STRING=new Ue("");var nF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xi(n){if(Nt(!!n),typeof n=="string"){let t=0,e=nF.exec(n);if(Nt(!!e),e[1]){let r=e[1];r=(r+"000000000").substr(0,9),t=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:ie(n.seconds),nanos:ie(n.nanos)}}function ie(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function rr(n){return typeof n=="string"?Ue.fromBase64String(n):Ue.fromUint8Array(n)}function s_(n){var t,e;return((e=(((t=n?.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||e===void 0?void 0:e.stringValue)==="server_timestamp"}function o_(n){let t=n.mapValue.fields.__previous_value__;return s_(t)?o_(t):t}function cc(n){let t=xi(n.mapValue.fields.__local_write_time__.timestampValue);return new Ce(t.seconds,t.nanos)}var Rg=class{constructor(t,e,i,r,s,o,a,c,l){this.databaseId=t,this.appId=e,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Fu=class n{constructor(t,e){this.projectId=t,this.database=e||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof n&&t.projectId===this.projectId&&t.database===this.database}};var Su={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Xr(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?s_(n)?4:Nx(n)?9007199254740991:10:nt()}function Qn(n,t){if(n===t)return!0;let e=Xr(n);if(e!==Xr(t))return!1;switch(e){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===t.booleanValue;case 4:return cc(n).isEqual(cc(t));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=xi(r.timestampValue),a=xi(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,t);case 5:return n.stringValue===t.stringValue;case 6:return function(r,s){return rr(r.bytesValue).isEqual(rr(s.bytesValue))}(n,t);case 7:return n.referenceValue===t.referenceValue;case 8:return function(r,s){return ie(r.geoPointValue.latitude)===ie(s.geoPointValue.latitude)&&ie(r.geoPointValue.longitude)===ie(s.geoPointValue.longitude)}(n,t);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ie(r.integerValue)===ie(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ie(r.doubleValue),a=ie(s.doubleValue);return o===a?ac(o)===ac(a):isNaN(o)&&isNaN(a)}return!1}(n,t);case 9:return no(n.arrayValue.values||[],t.arrayValue.values||[],Qn);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(nx(o)!==nx(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Qn(o[c],a[c])))return!1;return!0}(n,t);default:return nt()}}function lc(n,t){return(n.values||[]).find(e=>Qn(e,t))!==void 0}function io(n,t){if(n===t)return 0;let e=Xr(n),i=Xr(t);if(e!==i)return Et(e,i);switch(e){case 0:case 9007199254740991:return 0;case 1:return Et(n.booleanValue,t.booleanValue);case 2:return function(s,o){let a=ie(s.integerValue||s.doubleValue),c=ie(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,t);case 3:return ix(n.timestampValue,t.timestampValue);case 4:return ix(cc(n),cc(t));case 5:return Et(n.stringValue,t.stringValue);case 6:return function(s,o){let a=rr(s),c=rr(o);return a.compareTo(c)}(n.bytesValue,t.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let d=Et(a[l],c[l]);if(d!==0)return d}return Et(a.length,c.length)}(n.referenceValue,t.referenceValue);case 8:return function(s,o){let a=Et(ie(s.latitude),ie(o.latitude));return a!==0?a:Et(ie(s.longitude),ie(o.longitude))}(n.geoPointValue,t.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let d=io(a[l],c[l]);if(d)return d}return Et(a.length,c.length)}(n.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===Su.mapValue&&o===Su.mapValue)return 0;if(s===Su.mapValue)return 1;if(o===Su.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},d=Object.keys(l);c.sort(),d.sort();for(let h=0;h<c.length&&h<d.length;++h){let m=Et(c[h],d[h]);if(m!==0)return m;let g=io(a[c[h]],l[d[h]]);if(g!==0)return g}return Et(c.length,d.length)}(n.mapValue,t.mapValue);default:throw nt()}}function ix(n,t){if(typeof n=="string"&&typeof t=="string"&&n.length===t.length)return Et(n,t);let e=xi(n),i=xi(t),r=Et(e.seconds,i.seconds);return r!==0?r:Et(e.nanos,i.nanos)}function ro(n){return kg(n)}function kg(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(e){let i=xi(e);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(e){return rr(e).toBase64()}(n.bytesValue):"referenceValue"in n?function(e){return Z.fromName(e).toString()}(n.referenceValue):"geoPointValue"in n?function(e){return`geo(${e.latitude},${e.longitude})`}(n.geoPointValue):"arrayValue"in n?function(e){let i="[",r=!0;for(let s of e.values||[])r?r=!1:i+=",",i+=kg(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(e){let i=Object.keys(e.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${kg(e.fields[o])}`;return r+"}"}(n.mapValue):nt()}function rx(n,t){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${t.path.canonicalString()}`}}function Pg(n){return!!n&&"integerValue"in n}function a_(n){return!!n&&"arrayValue"in n}function sx(n){return!!n&&"nullValue"in n}function ox(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Du(n){return!!n&&"mapValue"in n}function ic(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let t={mapValue:{fields:{}}};return rs(n.mapValue.fields,(e,i)=>t.mapValue.fields[e]=ic(i)),t}if(n.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(n.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ic(n.arrayValue.values[e]);return t}return Object.assign({},n)}function Nx(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var hn=class n{constructor(t){this.value=t}static empty(){return new n({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let i=0;i<t.length-1;++i)if(e=(e.mapValue.fields||{})[t.get(i)],!Du(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=ic(e)}setAll(t){let e=fn.emptyPath(),i={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){let c=this.getFieldsMap(e);this.applyChanges(c,i,r),i={},r=[],e=a.popLast()}o?i[a.lastSegment()]=ic(o):r.push(a.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,i,r)}delete(t){let e=this.field(t.popLast());Du(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Qn(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let i=0;i<t.length;++i){let r=e.mapValue.fields[t.get(i)];Du(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(i)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,i){rs(e,(r,s)=>t[r]=s);for(let r of i)delete t[r]}clone(){return new n(ic(this.value))}};function Fx(n){let t=[];return rs(n.fields,(e,i)=>{let r=new fn([e]);if(Du(i)){let s=Fx(i.mapValue).fields;if(s.length===0)t.push(r);else for(let o of s)t.push(r.child(o))}else t.push(r)}),new vn(t)}var On=class n{constructor(t,e,i,r,s,o,a){this.key=t,this.documentType=e,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new n(t,0,at.min(),at.min(),at.min(),hn.empty(),0)}static newFoundDocument(t,e,i,r){return new n(t,1,e,at.min(),i,r,0)}static newNoDocument(t,e){return new n(t,2,e,at.min(),at.min(),hn.empty(),0)}static newUnknownDocument(t,e){return new n(t,3,e,at.min(),at.min(),hn.empty(),2)}convertToFoundDocument(t,e){return!this.createTime.isEqual(at.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=hn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=hn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=at.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof n&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var so=class{constructor(t,e){this.position=t,this.inclusive=e}};function ax(n,t,e){let i=0;for(let r=0;r<n.position.length;r++){let s=t[r],o=n.position[r];if(s.field.isKeyField()?i=Z.comparator(Z.fromName(o.referenceValue),e.key):i=io(o,e.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function cx(n,t){if(n===null)return t===null;if(t===null||n.inclusive!==t.inclusive||n.position.length!==t.position.length)return!1;for(let e=0;e<n.position.length;e++)if(!Qn(n.position[e],t.position[e]))return!1;return!0}var oo=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function iF(n,t){return n.dir===t.dir&&n.field.isEqual(t.field)}var Lu=class{},pe=class n extends Lu{constructor(t,e,i){super(),this.field=t,this.op=e,this.value=i}static create(t,e,i){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,i):new Og(t,e,i):e==="array-contains"?new Lg(t,i):e==="in"?new Vg(t,i):e==="not-in"?new Ug(t,i):e==="array-contains-any"?new jg(t,i):new n(t,e,i)}static createKeyFieldInFilter(t,e,i){return e==="in"?new Ng(t,i):new Fg(t,i)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(io(e,this.value)):e!==null&&Xr(this.value)===Xr(e)&&this.matchesComparison(io(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Nn=class n extends Lu{constructor(t,e){super(),this.filters=t,this.op=e,this.ae=null}static create(t,e){return new n(t,e)}matches(t){return Lx(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Lx(n){return n.op==="and"}function Vx(n){return rF(n)&&Lx(n)}function rF(n){for(let t of n.filters)if(t instanceof Nn)return!1;return!0}function Mg(n){if(n instanceof pe)return n.field.canonicalString()+n.op.toString()+ro(n.value);if(Vx(n))return n.filters.map(t=>Mg(t)).join(",");{let t=n.filters.map(e=>Mg(e)).join(",");return`${n.op}(${t})`}}function Ux(n,t){return n instanceof pe?function(i,r){return r instanceof pe&&i.op===r.op&&i.field.isEqual(r.field)&&Qn(i.value,r.value)}(n,t):n instanceof Nn?function(i,r){return r instanceof Nn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Ux(o,r.filters[a]),!0):!1}(n,t):void nt()}function jx(n){return n instanceof pe?function(e){return`${e.field.canonicalString()} ${e.op} ${ro(e.value)}`}(n):n instanceof Nn?function(e){return e.op.toString()+" {"+e.getFilters().map(jx).join(" ,")+"}"}(n):"Filter"}var Og=class extends pe{constructor(t,e,i){super(t,e,i),this.key=Z.fromName(i.referenceValue)}matches(t){let e=Z.comparator(t.key,this.key);return this.matchesComparison(e)}},Ng=class extends pe{constructor(t,e){super(t,"in",e),this.keys=Bx("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},Fg=class extends pe{constructor(t,e){super(t,"not-in",e),this.keys=Bx("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function Bx(n,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(i=>Z.fromName(i.referenceValue))}var Lg=class extends pe{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return a_(e)&&lc(e.arrayValue,this.value)}},Vg=class extends pe{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&lc(this.value.arrayValue,e)}},Ug=class extends pe{constructor(t,e){super(t,"not-in",e)}matches(t){if(lc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!lc(this.value.arrayValue,e)}},jg=class extends pe{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!(!a_(e)||!e.arrayValue.values)&&e.arrayValue.values.some(i=>lc(this.value.arrayValue,i))}};var Bg=class{constructor(t,e=null,i=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function lx(n,t=null,e=[],i=[],r=null,s=null,o=null){return new Bg(n,t,e,i,r,s,o)}function c_(n){let t=rt(n);if(t.ue===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(i=>Mg(i)).join(","),e+="|ob:",e+=t.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),sd(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(i=>ro(i)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(i=>ro(i)).join(",")),t.ue=e}return t.ue}function l_(n,t){if(n.limit!==t.limit||n.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<n.orderBy.length;e++)if(!iF(n.orderBy[e],t.orderBy[e]))return!1;if(n.filters.length!==t.filters.length)return!1;for(let e=0;e<n.filters.length;e++)if(!Ux(n.filters[e],t.filters[e]))return!1;return n.collectionGroup===t.collectionGroup&&!!n.path.isEqual(t.path)&&!!cx(n.startAt,t.startAt)&&cx(n.endAt,t.endAt)}function zg(n){return Z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var Jr=class{constructor(t,e=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function sF(n,t,e,i,r,s,o,a){return new Jr(n,t,e,i,r,s,o,a)}function zx(n){return new Jr(n)}function ux(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function qx(n){return n.collectionGroup!==null}function rc(n){let t=rt(n);if(t.ce===null){t.ce=[];let e=new Set;for(let s of t.explicitOrderBy)t.ce.push(s),e.add(s.field.canonicalString());let i=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ve(fn.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{e.has(s.canonicalString())||s.isKeyField()||t.ce.push(new oo(s,i))}),e.has(fn.keyField().canonicalString())||t.ce.push(new oo(fn.keyField(),i))}return t.ce}function Kn(n){let t=rt(n);return t.le||(t.le=oF(t,rc(n))),t.le}function oF(n,t){if(n.limitType==="F")return lx(n.path,n.collectionGroup,t,n.filters,n.limit,n.startAt,n.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new oo(r.field,s)});let e=n.endAt?new so(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new so(n.startAt.position,n.startAt.inclusive):null;return lx(n.path,n.collectionGroup,t,n.filters,n.limit,e,i)}}function qg(n,t){let e=n.filters.concat([t]);return new Jr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),e,n.limit,n.limitType,n.startAt,n.endAt)}function Wg(n,t,e){return new Jr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),t,e,n.startAt,n.endAt)}function od(n,t){return l_(Kn(n),Kn(t))&&n.limitType===t.limitType}function Wx(n){return`${c_(Kn(n))}|lt:${n.limitType}`}function Ks(n){return`Query(target=${function(e){let i=e.path.canonicalString();return e.collectionGroup!==null&&(i+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(i+=`, filters: [${e.filters.map(r=>jx(r)).join(", ")}]`),sd(e.limit)||(i+=", limit: "+e.limit),e.orderBy.length>0&&(i+=`, orderBy: [${e.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),e.startAt&&(i+=", startAt: ",i+=e.startAt.inclusive?"b:":"a:",i+=e.startAt.position.map(r=>ro(r)).join(",")),e.endAt&&(i+=", endAt: ",i+=e.endAt.inclusive?"a:":"b:",i+=e.endAt.position.map(r=>ro(r)).join(",")),`Target(${i})`}(Kn(n))}; limitType=${n.limitType})`}function ad(n,t){return t.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,t)&&function(i,r){for(let s of rc(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,t)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,t)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=ax(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,rc(i),r)||i.endAt&&!function(o,a,c){let l=ax(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,rc(i),r))}(n,t)}function aF(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function $x(n){return(t,e)=>{let i=!1;for(let r of rc(n)){let s=cF(r,t,e);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function cF(n,t,e){let i=n.field.isKeyField()?Z.comparator(t.key,e.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?io(c,l):nt()}(n.field,t,e);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return nt()}}var sr=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let i=this.mapKeyFn(t),r=this.inner[i];if(r===void 0)return this.inner[i]=[[t,e]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return void(r[s]=[t,e]);r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),i=this.inner[e];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],t))return i.length===1?delete this.inner[e]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(t){rs(this.inner,(e,i)=>{for(let[r,s]of i)t(r,s)})}isEmpty(){return Ox(this.inner)}size(){return this.innerSize}};var lF=new re(Z.comparator);function Ti(){return lF}var Hx=new re(Z.comparator);function nc(...n){let t=Hx;for(let e of n)t=t.insert(e.key,e);return t}function Gx(n){let t=Hx;return n.forEach((e,i)=>t=t.insert(e,i.overlayedDocument)),t}function Gr(){return sc()}function Kx(){return sc()}function sc(){return new sr(n=>n.toString(),(n,t)=>n.isEqual(t))}var uF=new re(Z.comparator),dF=new Ve(Z.comparator);function ft(...n){let t=dF;for(let e of n)t=t.add(e);return t}var hF=new Ve(Et);function fF(){return hF}function Yx(n,t){if(n.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ac(t)?"-0":t}}function Qx(n){return{integerValue:""+n}}function mF(n,t){return XN(t)?Qx(t):Yx(n,t)}var ao=class{constructor(){this._=void 0}};function pF(n,t,e){return n instanceof co?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&s_(s)&&(s=o_(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(e,t):n instanceof Zr?Jx(n,t):n instanceof ts?Zx(n,t):function(r,s){let o=Xx(r,s),a=dx(o)+dx(r.Pe);return Pg(o)&&Pg(r.Pe)?Qx(a):Yx(r.serializer,a)}(n,t)}function gF(n,t,e){return n instanceof Zr?Jx(n,t):n instanceof ts?Zx(n,t):e}function Xx(n,t){return n instanceof lo?function(i){return Pg(i)||function(s){return!!s&&"doubleValue"in s}(i)}(t)?t:{integerValue:0}:null}var co=class extends ao{},Zr=class extends ao{constructor(t){super(),this.elements=t}};function Jx(n,t){let e=tT(t);for(let i of n.elements)e.some(r=>Qn(r,i))||e.push(i);return{arrayValue:{values:e}}}var ts=class extends ao{constructor(t){super(),this.elements=t}};function Zx(n,t){let e=tT(t);for(let i of n.elements)e=e.filter(r=>!Qn(r,i));return{arrayValue:{values:e}}}var lo=class extends ao{constructor(t,e){super(),this.serializer=t,this.Pe=e}};function dx(n){return ie(n.integerValue||n.doubleValue)}function tT(n){return a_(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function bF(n,t){return n.field.isEqual(t.field)&&function(i,r){return i instanceof Zr&&r instanceof Zr||i instanceof ts&&r instanceof ts?no(i.elements,r.elements,Qn):i instanceof lo&&r instanceof lo?Qn(i.Pe,r.Pe):i instanceof co&&r instanceof co}(n.transform,t.transform)}var $g=class{constructor(t,e){this.version=t,this.transformResults=e}},Ii=class n{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new n}static exists(t){return new n(void 0,t)}static updateTime(t){return new n(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Ru(n,t){return n.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(n.updateTime):n.exists===void 0||n.exists===t.isFoundDocument()}var uo=class{};function eT(n,t){if(!n.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return n.isNoDocument()?new uc(n.key,Ii.none()):new es(n.key,n.data,Ii.none());{let e=n.data,i=hn.empty(),r=new Ve(fn.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Xn(n.key,i,new vn(r.toArray()),Ii.none())}}function _F(n,t,e){n instanceof es?function(r,s,o){let a=r.value.clone(),c=fx(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,t,e):n instanceof Xn?function(r,s,o){if(!Ru(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=fx(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(nT(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,t,e):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,e)}function oc(n,t,e,i){return n instanceof es?function(s,o,a,c){if(!Ru(s.precondition,o))return a;let l=s.value.clone(),d=mx(s.fieldTransforms,c,o);return l.setAll(d),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,t,e,i):n instanceof Xn?function(s,o,a,c){if(!Ru(s.precondition,o))return a;let l=mx(s.fieldTransforms,c,o),d=o.data;return d.setAll(nT(s)),d.setAll(l),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(h=>h.field))}(n,t,e,i):function(s,o,a){return Ru(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,t,e)}function yF(n,t){let e=null;for(let i of n.fieldTransforms){let r=t.data.field(i.field),s=Xx(i.transform,r||null);s!=null&&(e===null&&(e=hn.empty()),e.set(i.field,s))}return e||null}function hx(n,t){return n.type===t.type&&!!n.key.isEqual(t.key)&&!!n.precondition.isEqual(t.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&no(i,r,(s,o)=>bF(s,o))}(n.fieldTransforms,t.fieldTransforms)&&(n.type===0?n.value.isEqual(t.value):n.type!==1||n.data.isEqual(t.data)&&n.fieldMask.isEqual(t.fieldMask))}var es=class extends uo{constructor(t,e,i,r=[]){super(),this.key=t,this.value=e,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},Xn=class extends uo{constructor(t,e,i,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function nT(n){let t=new Map;return n.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let i=n.data.field(e);t.set(e,i)}}),t}function fx(n,t,e){let i=new Map;Nt(n.length===e.length);for(let r=0;r<e.length;r++){let s=n[r],o=s.transform,a=t.data.field(s.field);i.set(s.field,gF(o,a,e[r]))}return i}function mx(n,t,e){let i=new Map;for(let r of n){let s=r.transform,o=e.data.field(r.field);i.set(r.field,pF(s,o,t))}return i}var uc=class extends uo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Hg=class extends uo{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Gg=class{constructor(t,e,i,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(t,e){let i=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(t.key)&&_F(s,t,i[r])}}applyToLocalView(t,e){for(let i of this.baseMutations)i.key.isEqual(t.key)&&(e=oc(i,t,e,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(t.key)&&(e=oc(i,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let i=Kx();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;let c=eT(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(at.min())}),i}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),ft())}isEqual(t){return this.batchId===t.batchId&&no(this.mutations,t.mutations,(e,i)=>hx(e,i))&&no(this.baseMutations,t.baseMutations,(e,i)=>hx(e,i))}},Kg=class n{constructor(t,e,i,r){this.batch=t,this.commitVersion=e,this.mutationResults=i,this.docVersions=r}static from(t,e,i){Nt(t.mutations.length===i.length);let r=function(){return uF}(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(t,e,i,r)}};var Yg=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Qg=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var fe,gt;function vF(n){switch(n){default:return nt();case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0}}function iT(n){if(n===void 0)return Ei("GRPC error has no .code"),U.UNKNOWN;switch(n){case fe.OK:return U.OK;case fe.CANCELLED:return U.CANCELLED;case fe.UNKNOWN:return U.UNKNOWN;case fe.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case fe.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case fe.INTERNAL:return U.INTERNAL;case fe.UNAVAILABLE:return U.UNAVAILABLE;case fe.UNAUTHENTICATED:return U.UNAUTHENTICATED;case fe.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case fe.NOT_FOUND:return U.NOT_FOUND;case fe.ALREADY_EXISTS:return U.ALREADY_EXISTS;case fe.PERMISSION_DENIED:return U.PERMISSION_DENIED;case fe.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case fe.ABORTED:return U.ABORTED;case fe.OUT_OF_RANGE:return U.OUT_OF_RANGE;case fe.UNIMPLEMENTED:return U.UNIMPLEMENTED;case fe.DATA_LOSS:return U.DATA_LOSS;default:return nt()}}(gt=fe||(fe={}))[gt.OK=0]="OK",gt[gt.CANCELLED=1]="CANCELLED",gt[gt.UNKNOWN=2]="UNKNOWN",gt[gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",gt[gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",gt[gt.NOT_FOUND=5]="NOT_FOUND",gt[gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",gt[gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",gt[gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",gt[gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",gt[gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",gt[gt.ABORTED=10]="ABORTED",gt[gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",gt[gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",gt[gt.INTERNAL=13]="INTERNAL",gt[gt.UNAVAILABLE=14]="UNAVAILABLE",gt[gt.DATA_LOSS=15]="DATA_LOSS";var px=null;function wF(){return new TextEncoder}var IF=new nr([4294967295,4294967295],0);function gx(n){let t=wF().encode(n),e=new ug;return e.update(t),new Uint8Array(e.digest())}function bx(n){let t=new DataView(n.buffer),e=t.getUint32(0,!0),i=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new nr([e,i],0),new nr([r,s],0)]}var Xg=class n{constructor(t,e,i){if(this.bitmap=t,this.padding=e,this.hashCount=i,e<0||e>=8)throw new Kr(`Invalid padding: ${e}`);if(i<0)throw new Kr(`Invalid hash count: ${i}`);if(t.length>0&&this.hashCount===0)throw new Kr(`Invalid hash count: ${i}`);if(t.length===0&&e!==0)throw new Kr(`Invalid padding when bitmap length is 0: ${e}`);this.Ie=8*t.length-e,this.Te=nr.fromNumber(this.Ie)}Ee(t,e,i){let r=t.add(e.multiply(nr.fromNumber(i)));return r.compare(IF)===1&&(r=new nr([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;let e=gx(t),[i,r]=bx(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(t,e,i){let r=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new n(s,r,e);return i.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;let e=gx(t),[i,r]=bx(e);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(t){let e=Math.floor(t/8),i=t%8;this.bitmap[e]|=1<<i}},Kr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Vu=class n{constructor(t,e,i,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,i){let r=new Map;return r.set(t,dc.createSynthesizedTargetChangeForCurrentChange(t,e,i)),new n(at.min(),r,new re(Et),Ti(),ft())}},dc=class n{constructor(t,e,i,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,i){return new n(i,e,ft(),ft(),ft())}};var Zs=class{constructor(t,e,i,r){this.Re=t,this.removedTargetIds=e,this.key=i,this.Ve=r}},Uu=class{constructor(t,e){this.targetId=t,this.me=e}},ju=class{constructor(t,e,i=Ue.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=i,this.cause=r}},Bu=class{constructor(){this.fe=0,this.ge=yx(),this.pe=Ue.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=ft(),e=ft(),i=ft();return this.ge.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:i=i.add(r);break;default:nt()}}),new dc(this.pe,this.ye,t,e,i)}ve(){this.we=!1,this.ge=yx()}Fe(t,e){this.we=!0,this.ge=this.ge.insert(t,e)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Nt(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Jg=class{constructor(t){this.Le=t,this.Be=new Map,this.ke=Ti(),this.qe=_x(),this.Qe=new re(Et)}Ke(t){for(let e of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(e,t.Ve):this.Ue(e,t.key,t.Ve);for(let e of t.removedTargetIds)this.Ue(e,t.key,t.Ve)}We(t){this.forEachTarget(t,e=>{let i=this.Ge(e);switch(t.state){case 0:this.ze(e)&&i.De(t.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(t.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(e);break;case 3:this.ze(e)&&(i.Ne(),i.De(t.resumeToken));break;case 4:this.ze(e)&&(this.je(e),i.De(t.resumeToken));break;default:nt()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.Be.forEach((i,r)=>{this.ze(r)&&e(r)})}He(t){let e=t.targetId,i=t.me.count,r=this.Je(e);if(r){let s=r.target;if(zg(s))if(i===0){let o=new Z(s.path);this.Ue(e,o,On.newNoDocument(o,at.min()))}else Nt(i===1);else{let o=this.Ye(e);if(o!==i){let a=this.Ze(t),c=a?this.Xe(a,t,o):1;if(c!==0){this.je(e);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(e,l)}px?.et(function(d,h,m,g,y){var b,v,C,R,P,V;let F={localCacheCount:d,existenceFilterCount:h.count,databaseId:m.database,projectId:m.projectId},L=h.unchangedNames;return L&&(F.bloomFilter={applied:y===0,hashCount:(b=L?.hashCount)!==null&&b!==void 0?b:0,bitmapLength:(R=(C=(v=L?.bits)===null||v===void 0?void 0:v.bitmap)===null||C===void 0?void 0:C.length)!==null&&R!==void 0?R:0,padding:(V=(P=L?.bits)===null||P===void 0?void 0:P.padding)!==null&&V!==void 0?V:0,mightContain:E=>{var w;return(w=g?.mightContain(E))!==null&&w!==void 0&&w}}),F}(o,t.me,this.Le.tt(),a,c))}}}}Ze(t){let e=t.me.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=e,o,a;try{o=rr(i).toUint8Array()}catch(c){if(c instanceof Nu)return eo("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Xg(o,r,s)}catch(c){return eo(c instanceof Kr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(t,e,i){return e.me.count===i-this.nt(t,e.targetId)?0:2}nt(t,e){let i=this.Le.getRemoteKeysForTarget(e),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(e,s,null),r++)}),r}rt(t){let e=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&zg(a.target)){let c=new Z(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,On.newNoDocument(c,t))}s.be&&(e.set(o,s.Ce()),s.ve())}});let i=ft();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));let r=new Vu(t,e,this.Qe,this.ke,i);return this.ke=Ti(),this.qe=_x(),this.Qe=new re(Et),r}$e(t,e){if(!this.ze(t))return;let i=this.it(t,e.key)?2:0;this.Ge(t).Fe(e.key,i),this.ke=this.ke.insert(e.key,e),this.qe=this.qe.insert(e.key,this.st(e.key).add(t))}Ue(t,e,i){if(!this.ze(t))return;let r=this.Ge(t);this.it(t,e)?r.Fe(e,1):r.Me(e),this.qe=this.qe.insert(e,this.st(e).delete(t)),i&&(this.ke=this.ke.insert(e,i))}removeTarget(t){this.Be.delete(t)}Ye(t){let e=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let e=this.Be.get(t);return e||(e=new Bu,this.Be.set(t,e)),e}st(t){let e=this.qe.get(t);return e||(e=new Ve(Et),this.qe=this.qe.insert(t,e)),e}ze(t){let e=this.Je(t)!==null;return e||Y("WatchChangeAggregator","Detected inactive target",t),e}Je(t){let e=this.Be.get(t);return e&&e.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Bu),this.Le.getRemoteKeysForTarget(t).forEach(e=>{this.Ue(t,e,null)})}it(t,e){return this.Le.getRemoteKeysForTarget(t).has(e)}};function _x(){return new re(Z.comparator)}function yx(){return new re(Z.comparator)}var EF={asc:"ASCENDING",desc:"DESCENDING"},xF={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},TF={and:"AND",or:"OR"},Zg=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function tb(n,t){return n.useProto3Json||sd(t)?t:{value:t}}function zu(n,t){return n.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function rT(n,t){return n.useProto3Json?t.toBase64():t.toUint8Array()}function AF(n,t){return zu(n,t.toTimestamp())}function Yn(n){return Nt(!!n),at.fromTimestamp(function(e){let i=xi(e);return new Ce(i.seconds,i.nanos)}(n))}function u_(n,t){return eb(n,t).canonicalString()}function eb(n,t){let e=function(r){return new Ht(["projects",r.projectId,"databases",r.database])}(n).child("documents");return t===void 0?e:e.child(t)}function sT(n){let t=Ht.fromString(n);return Nt(uT(t)),t}function nb(n,t){return u_(n.databaseId,t.path)}function bg(n,t){let e=sT(t);if(e.get(1)!==n.databaseId.projectId)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+n.databaseId.projectId);if(e.get(3)!==n.databaseId.database)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+n.databaseId.database);return new Z(aT(e))}function oT(n,t){return u_(n.databaseId,t)}function SF(n){let t=sT(n);return t.length===4?Ht.emptyPath():aT(t)}function ib(n){return new Ht(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function aT(n){return Nt(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function vx(n,t,e){return{name:nb(n,t),fields:e.value.mapValue.fields}}function CF(n,t){let e;if("targetChange"in t){t.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:nt()}(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=function(l,d){return l.useProto3Json?(Nt(d===void 0||typeof d=="string"),Ue.fromBase64String(d||"")):(Nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array),Ue.fromUint8Array(d||new Uint8Array))}(n,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){let d=l.code===void 0?U.UNKNOWN:iT(l.code);return new G(d,l.message||"")}(o);e=new ju(i,r,s,a||null)}else if("documentChange"in t){t.documentChange;let i=t.documentChange;i.document,i.document.name,i.document.updateTime;let r=bg(n,i.document.name),s=Yn(i.document.updateTime),o=i.document.createTime?Yn(i.document.createTime):at.min(),a=new hn({mapValue:{fields:i.document.fields}}),c=On.newFoundDocument(r,s,o,a),l=i.targetIds||[],d=i.removedTargetIds||[];e=new Zs(l,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;let i=t.documentDelete;i.document;let r=bg(n,i.document),s=i.readTime?Yn(i.readTime):at.min(),o=On.newNoDocument(r,s),a=i.removedTargetIds||[];e=new Zs([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let i=t.documentRemove;i.document;let r=bg(n,i.document),s=i.removedTargetIds||[];e=new Zs([],s,r,null)}else{if(!("filter"in t))return nt();{t.filter;let i=t.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Qg(r,s),a=i.targetId;e=new Uu(a,o)}}return e}function DF(n,t){let e;if(t instanceof es)e={update:vx(n,t.key,t.value)};else if(t instanceof uc)e={delete:nb(n,t.key)};else if(t instanceof Xn)e={update:vx(n,t.key,t.data),updateMask:VF(t.fieldMask)};else{if(!(t instanceof Hg))return nt();e={verify:nb(n,t.key)}}return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof co)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Zr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof ts)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof lo)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw nt()}(0,i))),t.precondition.isNone||(e.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:AF(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:nt()}(n,t.precondition)),e}function RF(n,t){return n&&n.length>0?(Nt(t!==void 0),n.map(e=>function(r,s){let o=r.updateTime?Yn(r.updateTime):Yn(s);return o.isEqual(at.min())&&(o=Yn(s)),new $g(o,r.transformResults||[])}(e,t))):[]}function kF(n,t){return{documents:[oT(n,t.path)]}}function PF(n,t){let e={structuredQuery:{}},i=t.path,r;t.collectionGroup!==null?(r=i,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=i.popLast(),e.structuredQuery.from=[{collectionId:i.lastSegment()}]),e.parent=oT(n,r);let s=function(l){if(l.length!==0)return lT(Nn.create(l,"and"))}(t.filters);s&&(e.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(d=>function(m){return{field:Ys(m.field),direction:NF(m.dir)}}(d))}(t.orderBy);o&&(e.structuredQuery.orderBy=o);let a=tb(n,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(e.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:e,parent:r}}function MF(n){let t=SF(n.parent),e=n.structuredQuery,i=e.from?e.from.length:0,r=null;if(i>0){Nt(i===1);let d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];e.where&&(s=function(h){let m=cT(h);return m instanceof Nn&&Vx(m)?m.getFilters():[m]}(e.where));let o=[];e.orderBy&&(o=function(h){return h.map(m=>function(y){return new oo(Qs(y.field),function(v){switch(v){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(m))}(e.orderBy));let a=null;e.limit&&(a=function(h){let m;return m=typeof h=="object"?h.value:h,sd(m)?null:m}(e.limit));let c=null;e.startAt&&(c=function(h){let m=!!h.before,g=h.values||[];return new so(g,m)}(e.startAt));let l=null;return e.endAt&&(l=function(h){let m=!h.before,g=h.values||[];return new so(g,m)}(e.endAt)),sF(t,r,o,s,a,"F",c,l)}function OF(n,t){let e=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt()}}(t.purpose);return e==null?null:{"goog-listen-tags":e}}function cT(n){return n.unaryFilter!==void 0?function(e){switch(e.unaryFilter.op){case"IS_NAN":let i=Qs(e.unaryFilter.field);return pe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=Qs(e.unaryFilter.field);return pe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=Qs(e.unaryFilter.field);return pe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=Qs(e.unaryFilter.field);return pe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):n.fieldFilter!==void 0?function(e){return pe.create(Qs(e.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(e.fieldFilter.op),e.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(e){return Nn.create(e.compositeFilter.filters.map(i=>cT(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return nt()}}(e.compositeFilter.op))}(n):nt()}function NF(n){return EF[n]}function FF(n){return xF[n]}function LF(n){return TF[n]}function Ys(n){return{fieldPath:n.canonicalString()}}function Qs(n){return fn.fromServerFormat(n.fieldPath)}function lT(n){return n instanceof pe?function(e){if(e.op==="=="){if(ox(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NAN"}};if(sx(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NULL"}}}else if(e.op==="!="){if(ox(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NOT_NAN"}};if(sx(e.value))return{unaryFilter:{field:Ys(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(e.field),op:FF(e.op),value:e.value}}}(n):n instanceof Nn?function(e){let i=e.getFilters().map(r=>lT(r));return i.length===1?i[0]:{compositeFilter:{op:LF(e.op),filters:i}}}(n):nt()}function VF(n){let t=[];return n.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function uT(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var hc=class n{constructor(t,e,i,r,s=at.min(),o=at.min(),a=Ue.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=e,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(t){return new n(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var rb=class{constructor(t){this.ct=t}};function UF(n){let t=MF({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wg(t,t.limit,"L"):t}var qu=class{constructor(){}It(t,e){this.Tt(t,e),e.Et()}Tt(t,e){if("nullValue"in t)this.dt(e,5);else if("booleanValue"in t)this.dt(e,10),e.At(t.booleanValue?1:0);else if("integerValue"in t)this.dt(e,15),e.At(ie(t.integerValue));else if("doubleValue"in t){let i=ie(t.doubleValue);isNaN(i)?this.dt(e,13):(this.dt(e,15),ac(i)?e.At(0):e.At(i))}else if("timestampValue"in t){let i=t.timestampValue;this.dt(e,20),typeof i=="string"&&(i=xi(i)),e.Rt(`${i.seconds||""}`),e.At(i.nanos||0)}else if("stringValue"in t)this.Vt(t.stringValue,e),this.ft(e);else if("bytesValue"in t)this.dt(e,30),e.gt(rr(t.bytesValue)),this.ft(e);else if("referenceValue"in t)this.yt(t.referenceValue,e);else if("geoPointValue"in t){let i=t.geoPointValue;this.dt(e,45),e.At(i.latitude||0),e.At(i.longitude||0)}else"mapValue"in t?Nx(t)?this.dt(e,Number.MAX_SAFE_INTEGER):(this.wt(t.mapValue,e),this.ft(e)):"arrayValue"in t?(this.St(t.arrayValue,e),this.ft(e)):nt()}Vt(t,e){this.dt(e,25),this.bt(t,e)}bt(t,e){e.Rt(t)}wt(t,e){let i=t.fields||{};this.dt(e,55);for(let r of Object.keys(i))this.Vt(r,e),this.Tt(i[r],e)}St(t,e){let i=t.values||[];this.dt(e,50);for(let r of i)this.Tt(r,e)}yt(t,e){this.dt(e,37),Z.fromName(t).path.forEach(i=>{this.dt(e,60),this.bt(i,e)})}dt(t,e){t.At(e)}ft(t){t.At(2)}};qu.Dt=new qu;var sb=class{constructor(){this.an=new ob}addToCollectionParentIndex(t,e){return this.an.add(e),q.resolve()}getCollectionParents(t,e){return q.resolve(this.an.getEntries(e))}addFieldIndex(t,e){return q.resolve()}deleteFieldIndex(t,e){return q.resolve()}deleteAllFieldIndexes(t){return q.resolve()}createTargetIndexes(t,e){return q.resolve()}getDocumentsMatchingTarget(t,e){return q.resolve(null)}getIndexType(t,e){return q.resolve(0)}getFieldIndexes(t,e){return q.resolve([])}getNextCollectionGroupToUpdate(t){return q.resolve(null)}getMinOffset(t,e){return q.resolve(Qr.min())}getMinOffsetFromCollectionGroup(t,e){return q.resolve(Qr.min())}updateCollectionGroup(t,e,i){return q.resolve()}updateIndexEntries(t,e){return q.resolve()}},ob=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e]||new Ve(Ht.comparator),s=!r.has(i);return this.index[e]=r.add(i),s}has(t){let e=t.lastSegment(),i=t.popLast(),r=this.index[e];return r&&r.has(i)}getEntries(t){return(this.index[t]||new Ve(Ht.comparator)).toArray()}};var W3=new Uint8Array(0);var $n=class n{constructor(t,e,i){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=i}static withCacheSize(t){return new n(t,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};$n.DEFAULT_COLLECTION_PERCENTILE=10,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$n.DEFAULT=new $n(41943040,$n.DEFAULT_COLLECTION_PERCENTILE,$n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$n.DISABLED=new $n(-1,0,0);var fc=class n{constructor(t){this.Nn=t}next(){return this.Nn+=2,this.Nn}static Ln(){return new n(0)}static Bn(){return new n(-1)}};var ab=class{constructor(){this.changes=new sr(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,On.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let i=this.changes.get(e);return i!==void 0?q.resolve(i):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var cb=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var lb=class{constructor(t,e,i,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=i,this.indexManager=r}getDocument(t,e){let i=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(i=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(i!==null&&oc(i.mutation,r,vn.empty(),Ce.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.getLocalViewOfDocuments(t,i,ft()).next(()=>i))}getLocalViewOfDocuments(t,e,i=ft()){let r=Gr();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,i).next(s=>{let o=nc();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let i=Gr();return this.populateOverlays(t,i,e).next(()=>this.computeViews(t,e,i,ft()))}populateOverlays(t,e,i){let r=[];return i.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,i,r){let s=Ti(),o=sc(),a=function(){return sc()}();return e.forEach((c,l)=>{let d=i.get(l.key);r.has(l.key)&&(d===void 0||d.mutation instanceof Xn)?s=s.insert(l.key,l):d!==void 0?(o.set(l.key,d.mutation.getFieldMask()),oc(d.mutation,l,d.mutation.getFieldMask(),Ce.now())):o.set(l.key,vn.empty())}),this.recalculateAndSaveOverlays(t,s).next(c=>(c.forEach((l,d)=>o.set(l,d)),e.forEach((l,d)=>{var h;return a.set(l,new cb(d,(h=o.get(l))!==null&&h!==void 0?h:null))}),a))}recalculateAndSaveOverlays(t,e){let i=sc(),r=new re((o,a)=>o-a),s=ft();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=e.get(c);if(l===null)return;let d=i.get(c)||vn.empty();d=a.applyToLocalView(l,d),i.set(c,d);let h=(r.get(a.batchId)||ft()).add(c);r=r.insert(a.batchId,h)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,d=c.value,h=Kx();d.forEach(m=>{if(!s.has(m)){let g=eT(e.get(m),i.get(m));g!==null&&h.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,h))}return q.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(i=>this.recalculateAndSaveOverlays(t,i))}getDocumentsMatchingQuery(t,e,i,r){return function(o){return Z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):qx(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,i,r):this.getDocumentsMatchingCollectionQuery(t,e,i,r)}getNextDocuments(t,e,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,i.largestBatchId,r-s.size):q.resolve(Gr()),a=-1,c=s;return o.next(l=>q.forEach(l,(d,h)=>(a<h.largestBatchId&&(a=h.largestBatchId),s.get(d)?q.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,c,l,ft())).next(d=>({batchId:a,changes:Gx(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new Z(e)).next(i=>{let r=nc();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,i,r){let s=e.collectionGroup,o=nc();return this.indexManager.getCollectionParents(t,s).next(a=>q.forEach(a,c=>{let l=function(h,m){return new Jr(m,null,h.explicitOrderBy.slice(),h.filters.slice(),h.limit,h.limitType,h.startAt,h.endAt)}(e,c.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,i,r).next(d=>{d.forEach((h,m)=>{o=o.insert(h,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,i,s,r))).next(o=>{s.forEach((c,l)=>{let d=l.getKey();o.get(d)===null&&(o=o.insert(d,On.newInvalidDocument(d)))});let a=nc();return o.forEach((c,l)=>{let d=s.get(c);d!==void 0&&oc(d.mutation,l,vn.empty(),Ce.now()),ad(e,l)&&(a=a.insert(c,l))}),a})}};var ub=class{constructor(t){this.serializer=t,this.lr=new Map,this.hr=new Map}getBundleMetadata(t,e){return q.resolve(this.lr.get(e))}saveBundleMetadata(t,e){return this.lr.set(e.id,function(r){return{id:r.id,version:r.version,createTime:Yn(r.createTime)}}(e)),q.resolve()}getNamedQuery(t,e){return q.resolve(this.hr.get(e))}saveNamedQuery(t,e){return this.hr.set(e.name,function(r){return{name:r.name,query:UF(r.bundledQuery),readTime:Yn(r.readTime)}}(e)),q.resolve()}};var db=class{constructor(){this.overlays=new re(Z.comparator),this.Pr=new Map}getOverlay(t,e){return q.resolve(this.overlays.get(e))}getOverlays(t,e){let i=Gr();return q.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(t,e,i){return i.forEach((r,s)=>{this.ht(t,e,s)}),q.resolve()}removeOverlaysForBatchId(t,e,i){let r=this.Pr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(i)),q.resolve()}getOverlaysForCollection(t,e,i){let r=Gr(),s=e.length+1,o=new Z(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!e.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return q.resolve(r)}getOverlaysForCollectionGroup(t,e,i,r){let s=new re((l,d)=>l-d),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===e&&l.largestBatchId>i){let d=s.get(l.largestBatchId);d===null&&(d=Gr(),s=s.insert(l.largestBatchId,d)),d.set(l.getKey(),l)}}let a=Gr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,d)=>a.set(l,d)),!(a.size()>=r)););return q.resolve(a)}ht(t,e,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Pr.get(r.largestBatchId).delete(i.key);this.Pr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Yg(e,i));let s=this.Pr.get(e);s===void 0&&(s=ft(),this.Pr.set(e,s)),this.Pr.set(e,s.add(i.key))}};var hb=class{constructor(){this.sessionToken=Ue.EMPTY_BYTE_STRING}getSessionToken(t){return q.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,q.resolve()}};var mc=class{constructor(){this.Ir=new Ve(me.Tr),this.Er=new Ve(me.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(t,e){let i=new me(t,e);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(t,e){t.forEach(i=>this.addReference(i,e))}removeReference(t,e){this.Rr(new me(t,e))}Vr(t,e){t.forEach(i=>this.removeReference(i,e))}mr(t){let e=new Z(new Ht([])),i=new me(e,t),r=new me(e,t+1),s=[];return this.Er.forEachInRange([i,r],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(t=>this.Rr(t))}Rr(t){this.Ir=this.Ir.delete(t),this.Er=this.Er.delete(t)}pr(t){let e=new Z(new Ht([])),i=new me(e,t),r=new me(e,t+1),s=ft();return this.Er.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new me(t,0),i=this.Ir.firstAfterOrEqual(e);return i!==null&&t.isEqual(i.key)}},me=class{constructor(t,e){this.key=t,this.yr=e}static Tr(t,e){return Z.comparator(t.key,e.key)||Et(t.yr,e.yr)}static dr(t,e){return Et(t.yr,e.yr)||Z.comparator(t.key,e.key)}};var fb=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.wr=1,this.Sr=new Ve(me.Tr)}checkEmpty(t){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,i,r){let s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Gg(s,e,i,r);this.mutationQueue.push(o);for(let a of r)this.Sr=this.Sr.add(new me(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(t,e){return q.resolve(this.br(e))}getNextMutationBatchAfterBatchId(t,e){let i=e+1,r=this.Dr(i),s=r<0?0:r;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(t){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let i=new me(e,0),r=new me(e,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([i,r],o=>{let a=this.br(o.yr);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let i=new Ve(Et);return e.forEach(r=>{let s=new me(r,0),o=new me(r,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{i=i.add(a.yr)})}),q.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(t,e){let i=e.path,r=i.length+1,s=i;Z.isDocumentKey(s)||(s=s.child(""));let o=new me(new Z(s),0),a=new Ve(Et);return this.Sr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.yr)),!0)},o),q.resolve(this.Cr(a))}Cr(t){let e=[];return t.forEach(i=>{let r=this.br(i);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){Nt(this.vr(e.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return q.forEach(e.mutations,r=>{let s=new me(r.key,e.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,r.key)}).next(()=>{this.Sr=i})}xn(t){}containsKey(t,e){let i=new me(e,0),r=this.Sr.firstAfterOrEqual(i);return q.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,q.resolve()}vr(t,e){return this.Dr(t)}Dr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}br(t){let e=this.Dr(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};var mb=class{constructor(t){this.Fr=t,this.docs=function(){return new re(Z.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let i=e.key,r=this.docs.get(i),s=r?r.size:0,o=this.Fr(e);return this.docs=this.docs.insert(i,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,i.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let i=this.docs.get(e);return q.resolve(i?i.document.mutableCopy():On.newInvalidDocument(e))}getEntries(t,e){let i=Ti();return e.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():On.newInvalidDocument(r))}),q.resolve(i)}getDocumentsMatchingQuery(t,e,i,r){let s=Ti(),o=e.path,a=new Z(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:d}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||KN(GN(d),i)<=0||(r.has(d.key)||ad(e,d))&&(s=s.insert(d.key,d.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(t,e,i,r){nt()}Mr(t,e){return q.forEach(this.docs,i=>e(i))}newChangeBuffer(t){return new pb(this)}getSize(t){return q.resolve(this.size)}},pb=class extends ab{constructor(t){super(),this.ur=t}applyChanges(t){let e=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?e.push(this.ur.addEntry(t,r)):this.ur.removeEntry(i)}),q.waitFor(e)}getFromCache(t,e){return this.ur.getEntry(t,e)}getAllFromCache(t,e){return this.ur.getEntries(t,e)}};var gb=class{constructor(t){this.persistence=t,this.Or=new sr(e=>c_(e),l_),this.lastRemoteSnapshotVersion=at.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new mc,this.targetCount=0,this.Br=fc.Ln()}forEachTarget(t,e){return this.Or.forEach((i,r)=>e(r)),q.resolve()}getLastRemoteSnapshotVersion(t){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return q.resolve(this.Nr)}allocateTargetId(t){return this.highestTargetId=this.Br.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(t,e,i){return i&&(this.lastRemoteSnapshotVersion=i),e>this.Nr&&(this.Nr=e),q.resolve()}Qn(t){this.Or.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.Br=new fc(e),this.highestTargetId=e),t.sequenceNumber>this.Nr&&(this.Nr=t.sequenceNumber)}addTargetData(t,e){return this.Qn(e),this.targetCount+=1,q.resolve()}updateTargetData(t,e){return this.Qn(e),q.resolve()}removeTargetData(t,e){return this.Or.delete(e.target),this.Lr.mr(e.targetId),this.targetCount-=1,q.resolve()}removeTargets(t,e,i){let r=0,s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=e&&i.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),q.waitFor(s).next(()=>r)}getTargetCount(t){return q.resolve(this.targetCount)}getTargetData(t,e){let i=this.Or.get(e)||null;return q.resolve(i)}addMatchingKeys(t,e,i){return this.Lr.Ar(e,i),q.resolve()}removeMatchingKeys(t,e,i){this.Lr.Vr(e,i);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.Lr.mr(e),q.resolve()}getMatchingKeysForTargetId(t,e){let i=this.Lr.pr(e);return q.resolve(i)}containsKey(t,e){return q.resolve(this.Lr.containsKey(e))}};var bb=class{constructor(t,e){this.kr={},this.overlays={},this.qr=new Mx(0),this.Qr=!1,this.Qr=!0,this.Kr=new hb,this.referenceDelegate=t(this),this.$r=new gb(this),this.indexManager=new sb,this.remoteDocumentCache=function(r){return new mb(r)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new rb(e),this.Wr=new ub(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new db,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let i=this.kr[t.toKey()];return i||(i=new fb(e,this.referenceDelegate),this.kr[t.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(t,e,i){Y("MemoryPersistence","Starting transaction:",t);let r=new _b(this.qr.next());return this.referenceDelegate.Gr(),i(r).next(s=>this.referenceDelegate.zr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}jr(t,e){return q.or(Object.values(this.kr).map(i=>()=>i.containsKey(t,e)))}},_b=class extends Dg{constructor(t){super(),this.currentSequenceNumber=t}},yb=class n{constructor(t){this.persistence=t,this.Hr=new mc,this.Jr=null}static Yr(t){return new n(t)}get Zr(){if(this.Jr)return this.Jr;throw nt()}addReference(t,e,i){return this.Hr.addReference(i,e),this.Zr.delete(i.toString()),q.resolve()}removeReference(t,e,i){return this.Hr.removeReference(i,e),this.Zr.add(i.toString()),q.resolve()}markPotentiallyOrphaned(t,e){return this.Zr.add(e.toString()),q.resolve()}removeTarget(t,e){this.Hr.mr(e.targetId).forEach(r=>this.Zr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(t,e.targetId).next(r=>{r.forEach(s=>this.Zr.add(s.toString()))}).next(()=>i.removeTargetData(t,e))}Gr(){this.Jr=new Set}zr(t){let e=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.Zr,i=>{let r=Z.fromPath(i);return this.Xr(t,r).next(s=>{s||e.removeEntry(r,at.min())})}).next(()=>(this.Jr=null,e.apply(t)))}updateLimboDocument(t,e){return this.Xr(t,e).next(i=>{i?this.Zr.delete(e.toString()):this.Zr.add(e.toString())})}Ur(t){return 0}Xr(t,e){return q.or([()=>q.resolve(this.Hr.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.jr(t,e)])}};var vb=class n{constructor(t,e,i,r){this.targetId=t,this.fromCache=e,this.Ki=i,this.$i=r}static Ui(t,e){let i=ft(),r=ft();for(let s of e.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(t,e.fromCache,i,r)}};var wb=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var Ib=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return sE()?8:QN(be())>0?6:4}()}initialize(t,e){this.Hi=t,this.indexManager=e,this.Wi=!0}getDocumentsMatchingQuery(t,e,i,r){let s={result:null};return this.Ji(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(t,e,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new wb;return this.Zi(t,e,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(t,e,o,a.size)})}).next(()=>s.result)}Xi(t,e,i,r){return i.documentReadCount<this.zi?(ec()<=ht.DEBUG&&Y("QueryEngine","SDK will not create cache indexes for query:",Ks(e),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),q.resolve()):(ec()<=ht.DEBUG&&Y("QueryEngine","Query:",Ks(e),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ji*r?(ec()<=ht.DEBUG&&Y("QueryEngine","The SDK decides to create cache indexes for query:",Ks(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kn(e))):q.resolve())}Ji(t,e){if(ux(e))return q.resolve(null);let i=Kn(e);return this.indexManager.getIndexType(t,i).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Wg(e,null,"F"),i=Kn(e)),this.indexManager.getDocumentsMatchingTarget(t,i).next(s=>{let o=ft(...s);return this.Hi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,i).next(c=>{let l=this.es(e,a);return this.ts(e,l,o,c.readTime)?this.Ji(t,Wg(e,null,"F")):this.ns(t,l,e,c)}))})))}Yi(t,e,i,r){return ux(e)||r.isEqual(at.min())?q.resolve(null):this.Hi.getDocuments(t,i).next(s=>{let o=this.es(e,s);return this.ts(e,o,i,r)?q.resolve(null):(ec()<=ht.DEBUG&&Y("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Ks(e)),this.ns(t,o,e,HN(r,-1)).next(a=>a))})}es(t,e){let i=new Ve($x(t));return e.forEach((r,s)=>{ad(t,s)&&(i=i.add(s))}),i}ts(t,e,i,r){if(t.limit===null)return!1;if(i.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Zi(t,e,i){return ec()<=ht.DEBUG&&Y("QueryEngine","Using full collection scan to execute query:",Ks(e)),this.Hi.getDocumentsMatchingQuery(t,e,Qr.min(),i)}ns(t,e,i,r){return this.Hi.getDocumentsMatchingQuery(t,i,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Eb=class{constructor(t,e,i,r){this.persistence=t,this.rs=e,this.serializer=r,this.ss=new re(Et),this.os=new sr(s=>c_(s),l_),this._s=new Map,this.us=t.getRemoteDocumentCache(),this.$r=t.getTargetCache(),this.Wr=t.getBundleCache(),this.cs(i)}cs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new lb(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.ss))}};function jF(n,t,e,i){return new Eb(n,t,e,i)}function dT(n,t){return x(this,null,function*(){let e=rt(n);return yield e.persistence.runTransaction("Handle user change","readonly",i=>{let r;return e.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,e.cs(t),e.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=ft();for(let l of r){o.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}for(let l of s){a.push(l.batchId);for(let d of l.mutations)c=c.add(d.key)}return e.localDocuments.getDocuments(i,c).next(l=>({ls:l,removedBatchIds:o,addedBatchIds:a}))})})})}function BF(n,t){let e=rt(n);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=t.batch.keys(),s=e.us.newChangeBuffer({trackRemovals:!0});return function(a,c,l,d){let h=l.batch,m=h.keys(),g=q.resolve();return m.forEach(y=>{g=g.next(()=>d.getEntry(c,y)).next(b=>{let v=l.docVersions.get(y);Nt(v!==null),b.version.compareTo(v)<0&&(h.applyToRemoteDocument(b,l),b.isValidDocument()&&(b.setReadTime(l.commitVersion),d.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,h))}(e,i,t,s).next(()=>s.apply(i)).next(()=>e.mutationQueue.performConsistencyCheck(i)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(i,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=ft();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(t))).next(()=>e.localDocuments.getDocuments(i,r))})}function hT(n){let t=rt(n);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.$r.getLastRemoteSnapshotVersion(e))}function zF(n,t){let e=rt(n),i=t.snapshotVersion,r=e.ss;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.us.newChangeBuffer({trackRemovals:!0});r=e.ss;let a=[];t.targetChanges.forEach((d,h)=>{let m=r.get(h);if(!m)return;a.push(e.$r.removeMatchingKeys(s,d.removedDocuments,h).next(()=>e.$r.addMatchingKeys(s,d.addedDocuments,h)));let g=m.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(h)!==null?g=g.withResumeToken(Ue.EMPTY_BYTE_STRING,at.min()).withLastLimboFreeSnapshotVersion(at.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,i)),r=r.insert(h,g),function(b,v,C){return b.resumeToken.approximateByteSize()===0||v.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0}(m,g,d)&&a.push(e.$r.updateTargetData(s,g))});let c=Ti(),l=ft();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(qF(s,o,t.documentUpdates).next(d=>{c=d.hs,l=d.Ps})),!i.isEqual(at.min())){let d=e.$r.getLastRemoteSnapshotVersion(s).next(h=>e.$r.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(d)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(e.ss=r,s))}function qF(n,t,e){let i=ft(),r=ft();return e.forEach(s=>i=i.add(s)),t.getEntries(n,i).next(s=>{let o=Ti();return e.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(at.min())?(t.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(c),o=o.insert(a,c)):Y("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{hs:o,Ps:r}})}function WF(n,t){let e=rt(n);return e.persistence.runTransaction("Get next mutation batch","readonly",i=>(t===void 0&&(t=-1),e.mutationQueue.getNextMutationBatchAfterBatchId(i,t)))}function $F(n,t){let e=rt(n);return e.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return e.$r.getTargetData(i,t).next(s=>s?(r=s,q.resolve(r)):e.$r.allocateTargetId(i).next(o=>(r=new hc(t,o,"TargetPurposeListen",i.currentSequenceNumber),e.$r.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=e.ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.ss=e.ss.insert(i.targetId,i),e.os.set(t,i.targetId)),i})}function xb(n,t,e){return x(this,null,function*(){let i=rt(n),r=i.ss.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Ic(o))throw o;Y("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}i.ss=i.ss.remove(t),i.os.delete(r.target)})}function wx(n,t,e){let i=rt(n),r=at.min(),s=ft();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,d){let h=rt(c),m=h.os.get(d);return m!==void 0?q.resolve(h.ss.get(m)):h.$r.getTargetData(l,d)}(i,o,Kn(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.rs.getDocumentsMatchingQuery(o,t,e?r:at.min(),e?s:ft())).next(a=>(HF(i,aF(t),a),{documents:a,Is:s})))}function HF(n,t,e){let i=n._s.get(t)||at.min();e.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n._s.set(t,i)}var Wu=class{constructor(){this.activeTargetIds=fF()}Vs(t){this.activeTargetIds=this.activeTargetIds.add(t)}fs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Rs(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}};var Tb=class{constructor(){this.io=new Wu,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,i){}addLocalQueryTarget(t){return this.io.Vs(t),this.so[t]||"not-current"}updateQueryState(t,e,i){this.so[t]=e}removeLocalQueryTarget(t){this.io.fs(t)}isLocalQueryTarget(t){return this.io.activeTargetIds.has(t)}clearQueryState(t){delete this.so[t]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(t){return this.io.activeTargetIds.has(t)}start(){return this.io=new Wu,Promise.resolve()}handleUserChange(t,e,i){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var Ab=class{oo(t){}shutdown(){}};var $u=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(t){this.lo.push(t)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){Y("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let t of this.lo)t(0)}co(){Y("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let t of this.lo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Cu=null;function _g(){return Cu===null?Cu=function(){return 268435456+Math.round(2147483648*Math.random())}():Cu++,"0x"+Cu.toString(16)}var GF={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Sb=class{constructor(t){this.Po=t.Po,this.Io=t.Io}To(t){this.Eo=t}Ao(t){this.Ro=t}Vo(t){this.mo=t}onMessage(t){this.fo=t}close(){this.Io()}send(t){this.Po(t)}po(){this.Eo()}yo(){this.Ro()}wo(t){this.mo(t)}So(t){this.fo(t)}};var Le="WebChannelConnection",Cb=class extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let i=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+e.host,this.Do=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get vo(){return!1}Fo(e,i,r,s,o){let a=_g(),c=this.Mo(e,i.toUriEncodedString());Y("RestConnection",`Sending RPC '${e}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(l,s,o),this.Oo(e,c,l,r).then(d=>(Y("RestConnection",`Received RPC '${e}' ${a}: `,d),d),d=>{throw eo("RestConnection",`RPC '${e}' ${a} failed with error: `,d,"url: ",c,"request:",r),d})}No(e,i,r,s,o,a){return this.Fo(e,i,r,s,o)}xo(e,i,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+go}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>e[o]=s),r&&r.headers.forEach((s,o)=>e[o]=s)}Mo(e,i){let r=GF[e];return`${this.bo}/v1/${i}:${r}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Oo(t,e,i,r){let s=_g();return new Promise((o,a)=>{let c=new dg;c.setWithCredentials(!0),c.listenOnce(fg.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case tc.NO_ERROR:let d=c.getResponseJson();Y(Le,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(d)),o(d);break;case tc.TIMEOUT:Y(Le,`RPC '${t}' ${s} timed out`),a(new G(U.DEADLINE_EXCEEDED,"Request time out"));break;case tc.HTTP_ERROR:let h=c.getStatus();if(Y(Le,`RPC '${t}' ${s} failed with status:`,h,"response text:",c.getResponseText()),h>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);let g=m?.error;if(g&&g.status&&g.message){let y=function(v){let C=v.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(C)>=0?C:U.UNKNOWN}(g.status);a(new G(y,g.message))}else a(new G(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new G(U.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Y(Le,`RPC '${t}' ${s} completed.`)}});let l=JSON.stringify(r);Y(Le,`RPC '${t}' ${s} sending request:`,r),c.send(e,"POST",l,i,15)})}Lo(t,e,i){let r=_g(),s=[this.bo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=gg(),a=pg(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new hg({})),this.xo(c.initMessageHeaders,e,i),c.encodeInitMessageHeaders=!0;let d=s.join("");Y(Le,`Creating RPC '${t}' stream ${r}: ${d}`,c);let h=o.createWebChannel(d,c),m=!1,g=!1,y=new Sb({Po:v=>{g?Y(Le,`Not sending because RPC '${t}' stream ${r} is closed:`,v):(m||(Y(Le,`Opening RPC '${t}' stream ${r} transport.`),h.open(),m=!0),Y(Le,`RPC '${t}' stream ${r} sending:`,v),h.send(v))},Io:()=>h.close()}),b=(v,C,R)=>{v.listen(C,P=>{try{R(P)}catch(V){setTimeout(()=>{throw V},0)}})};return b(h,Gs.EventType.OPEN,()=>{g||(Y(Le,`RPC '${t}' stream ${r} transport opened.`),y.po())}),b(h,Gs.EventType.CLOSE,()=>{g||(g=!0,Y(Le,`RPC '${t}' stream ${r} transport closed`),y.wo())}),b(h,Gs.EventType.ERROR,v=>{g||(g=!0,eo(Le,`RPC '${t}' stream ${r} transport errored:`,v),y.wo(new G(U.UNAVAILABLE,"The operation could not be completed")))}),b(h,Gs.EventType.MESSAGE,v=>{var C;if(!g){let R=v.data[0];Nt(!!R);let P=R,V=P.error||((C=P[0])===null||C===void 0?void 0:C.error);if(V){Y(Le,`RPC '${t}' stream ${r} received error:`,V);let F=V.status,L=function(I){let A=fe[I];if(A!==void 0)return iT(A)}(F),E=V.message;L===void 0&&(L=U.INTERNAL,E="Unknown error status: "+F+" with message "+V.message),g=!0,y.wo(new G(L,E)),h.close()}else Y(Le,`RPC '${t}' stream ${r} received:`,R),y.So(R)}}),b(a,mg.STAT_EVENT,v=>{v.stat===Au.PROXY?Y(Le,`RPC '${t}' stream ${r} detected buffering proxy`):v.stat===Au.NOPROXY&&Y(Le,`RPC '${t}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{y.yo()},0),y}};function yg(){return typeof document<"u"?document:null}function cd(n){return new Zg(n,!0)}var Hu=class{constructor(t,e,i=1e3,r=1.5,s=6e4){this.ai=t,this.timerId=e,this.Bo=i,this.ko=r,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(t){this.cancel();let e=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),r=Math.max(0,e-i);r>0&&Y("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${e} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,()=>(this.$o=Date.now(),t())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var Gu=class{constructor(t,e,i,r,s,o,a,c){this.ai=t,this.jo=i,this.Ho=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new Hu(t,e)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return x(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(t){this.a_(),this.stream.send(t)}o_(){return x(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(t,e){return x(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,t!==4?this.e_.reset():e&&e.code===U.RESOURCE_EXHAUSTED?(Ei(e.toString()),Ei("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):e&&e.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.Vo(e)})}c_(){}auth(){this.state=1;let t=this.l_(this.Jo),e=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Jo===e&&this.h_(i,r)},i=>{t(()=>{let r=new G(U.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(r)})})}h_(t,e){let i=this.l_(this.Jo);this.stream=this.I_(t,e),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(r=>{i(()=>this.P_(r))}),this.stream.onMessage(r=>{i(()=>++this.Xo==1?this.T_(r):this.onNext(r))})}r_(){this.state=5,this.e_.Wo(()=>x(this,null,function*(){this.state=0,this.start()}))}P_(t){return Y("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}l_(t){return e=>{this.ai.enqueueAndForget(()=>this.Jo===t?e():(Y("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Db=class extends Gu{constructor(t,e,i,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}I_(t,e){return this.connection.Lo("Listen",t,e)}T_(t){return this.onNext(t)}onNext(t){this.e_.reset();let e=CF(this.serializer,t),i=function(s){if(!("targetChange"in s))return at.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?at.min():o.readTime?Yn(o.readTime):at.min()}(t);return this.listener.E_(e,i)}d_(t){let e={};e.database=ib(this.serializer),e.addTarget=function(s,o){let a,c=o.target;if(a=zg(c)?{documents:kF(s,c)}:{query:PF(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=rT(s,o.resumeToken);let l=tb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(at.min())>0){a.readTime=zu(s,o.snapshotVersion.toTimestamp());let l=tb(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);let i=OF(this.serializer,t);i&&(e.labels=i),this.__(e)}A_(t){let e={};e.database=ib(this.serializer),e.removeTarget=t,this.__(e)}},Rb=class extends Gu{constructor(t,e,i,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,i,r,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(t,e){return this.connection.Lo("Write",t,e)}T_(t){return Nt(!!t.streamToken),this.lastStreamToken=t.streamToken,Nt(!t.writeResults||t.writeResults.length===0),this.listener.m_()}onNext(t){Nt(!!t.streamToken),this.lastStreamToken=t.streamToken,this.e_.reset();let e=RF(t.writeResults,t.commitTime),i=Yn(t.commitTime);return this.listener.f_(i,e)}g_(){let t={};t.database=ib(this.serializer),this.__(t)}V_(t){let e={streamToken:this.lastStreamToken,writes:t.map(i=>DF(this.serializer,i))};this.__(e)}};var kb=class extends class{}{constructor(t,e,i,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=i,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(t,e,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(t,eb(e,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(U.UNKNOWN,s.toString())})}No(t,e,i,r,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(t,eb(e,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(U.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},Pb=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(t){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.C_("Offline")))}set(t){this.M_(),this.w_=0,t==="Online"&&(this.b_=!1),this.C_(t)}C_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}v_(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Ei(e),this.b_=!1):Y("OnlineStateTracker",e)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var Mb=class{constructor(t,e,i,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{i.enqueueAndForget(()=>x(this,null,function*(){ss(this)&&(Y("RemoteStore","Restarting streams for network reachability change."),yield function(c){return x(this,null,function*(){let l=rt(c);l.N_.add(4),yield Ec(l),l.k_.set("Unknown"),l.N_.delete(4),yield ld(l)})}(this))}))}),this.k_=new Pb(i,r)}};function ld(n){return x(this,null,function*(){if(ss(n))for(let t of n.L_)yield t(!0)})}function Ec(n){return x(this,null,function*(){for(let t of n.L_)yield t(!1)})}function fT(n,t){let e=rt(n);e.O_.has(t.targetId)||(e.O_.set(t.targetId,t),m_(e)?f_(e):bo(e).n_()&&h_(e,t))}function d_(n,t){let e=rt(n),i=bo(e);e.O_.delete(t),i.n_()&&mT(e,t),e.O_.size===0&&(i.n_()?i.s_():ss(e)&&e.k_.set("Unknown"))}function h_(n,t){if(n.q_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(at.min())>0){let e=n.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}bo(n).d_(t)}function mT(n,t){n.q_.xe(t),bo(n).A_(t)}function f_(n){n.q_=new Jg({getRemoteKeysForTarget:t=>n.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>n.O_.get(t)||null,tt:()=>n.datastore.serializer.databaseId}),bo(n).start(),n.k_.D_()}function m_(n){return ss(n)&&!bo(n).t_()&&n.O_.size>0}function ss(n){return rt(n).N_.size===0}function pT(n){n.q_=void 0}function KF(n){return x(this,null,function*(){n.k_.set("Online")})}function YF(n){return x(this,null,function*(){n.O_.forEach((t,e)=>{h_(n,t)})})}function QF(n,t){return x(this,null,function*(){pT(n),m_(n)?(n.k_.F_(t),f_(n)):n.k_.set("Unknown")})}function XF(n,t,e){return x(this,null,function*(){if(n.k_.set("Online"),t instanceof ju&&t.state===2&&t.cause)try{yield function(r,s){return x(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.O_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.O_.delete(a),r.q_.removeTarget(a))})}(n,t)}catch(i){Y("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),i),yield Ku(n,i)}else if(t instanceof Zs?n.q_.Ke(t):t instanceof Uu?n.q_.He(t):n.q_.We(t),!e.isEqual(at.min()))try{let i=yield hT(n.localStore);e.compareTo(i)>=0&&(yield function(s,o){let a=s.q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let d=s.O_.get(l);d&&s.O_.set(l,d.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let d=s.O_.get(c);if(!d)return;s.O_.set(c,d.withResumeToken(Ue.EMPTY_BYTE_STRING,d.snapshotVersion)),mT(s,c);let h=new hc(d.target,c,l,d.sequenceNumber);h_(s,h)}),s.remoteSyncer.applyRemoteEvent(a)}(n,e))}catch(i){Y("RemoteStore","Failed to raise snapshot:",i),yield Ku(n,i)}})}function Ku(n,t,e){return x(this,null,function*(){if(!Ic(t))throw t;n.N_.add(1),yield Ec(n),n.k_.set("Offline"),e||(e=()=>hT(n.localStore)),n.asyncQueue.enqueueRetryable(()=>x(this,null,function*(){Y("RemoteStore","Retrying IndexedDB access"),yield e(),n.N_.delete(1),yield ld(n)}))})}function gT(n,t){return t().catch(e=>Ku(n,e,t))}function ud(n){return x(this,null,function*(){let t=rt(n),e=or(t),i=t.x_.length>0?t.x_[t.x_.length-1].batchId:-1;for(;JF(t);)try{let r=yield WF(t.localStore,i);if(r===null){t.x_.length===0&&e.s_();break}i=r.batchId,ZF(t,r)}catch(r){yield Ku(t,r)}bT(t)&&_T(t)})}function JF(n){return ss(n)&&n.x_.length<10}function ZF(n,t){n.x_.push(t);let e=or(n);e.n_()&&e.R_&&e.V_(t.mutations)}function bT(n){return ss(n)&&!or(n).t_()&&n.x_.length>0}function _T(n){or(n).start()}function tL(n){return x(this,null,function*(){or(n).g_()})}function eL(n){return x(this,null,function*(){let t=or(n);for(let e of n.x_)t.V_(e.mutations)})}function nL(n,t,e){return x(this,null,function*(){let i=n.x_.shift(),r=Kg.from(i,t,e);yield gT(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield ud(n)})}function iL(n,t){return x(this,null,function*(){t&&or(n).R_&&(yield function(i,r){return x(this,null,function*(){if(function(o){return vF(o)&&o!==U.ABORTED}(r.code)){let s=i.x_.shift();or(i).i_(),yield gT(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield ud(i)}})}(n,t)),bT(n)&&_T(n)})}function Ix(n,t){return x(this,null,function*(){let e=rt(n);e.asyncQueue.verifyOperationInProgress(),Y("RemoteStore","RemoteStore received new credentials");let i=ss(e);e.N_.add(3),yield Ec(e),i&&e.k_.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.N_.delete(3),yield ld(e)})}function rL(n,t){return x(this,null,function*(){let e=rt(n);t?(e.N_.delete(2),yield ld(e)):t||(e.N_.add(2),yield Ec(e),e.k_.set("Unknown"))})}function bo(n){return n.Q_||(n.Q_=function(e,i,r){let s=rt(e);return s.y_(),new Db(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:KF.bind(null,n),Ao:YF.bind(null,n),Vo:QF.bind(null,n),E_:XF.bind(null,n)}),n.L_.push(t=>x(this,null,function*(){t?(n.Q_.i_(),m_(n)?f_(n):n.k_.set("Unknown")):(yield n.Q_.stop(),pT(n))}))),n.Q_}function or(n){return n.K_||(n.K_=function(e,i,r){let s=rt(e);return s.y_(),new Rb(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:tL.bind(null,n),Vo:iL.bind(null,n),m_:eL.bind(null,n),f_:nL.bind(null,n)}),n.L_.push(t=>x(this,null,function*(){t?(n.K_.i_(),yield ud(n)):(yield n.K_.stop(),n.x_.length>0&&(Y("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))}))),n.K_}var Ob=class n{constructor(t,e,i,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Hn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,i,r,s){let o=Date.now()+i,a=new n(t,e,o,r,s);return a.start(i),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(U.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function p_(n,t){if(Ei("AsyncQueue",`${t}: ${n}`),Ic(n))return new G(U.UNAVAILABLE,`${t}: ${n}`);throw n}var Yu=class n{constructor(t){this.comparator=t?(e,i)=>t(e,i)||Z.comparator(e.key,i.key):(e,i)=>Z.comparator(e.key,i.key),this.keyedMap=nc(),this.sortedSet=new re(this.comparator)}static emptySet(t){return new n(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,i)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof n)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),i=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let i=new n;return i.comparator=this.comparator,i.keyedMap=t,i.sortedSet=e,i}};var Qu=class{constructor(){this.U_=new re(Z.comparator)}track(t){let e=t.doc.key,i=this.U_.get(e);i?t.type!==0&&i.type===3?this.U_=this.U_.insert(e,t):t.type===3&&i.type!==1?this.U_=this.U_.insert(e,{type:i.type,doc:t.doc}):t.type===2&&i.type===2?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):t.type===2&&i.type===0?this.U_=this.U_.insert(e,{type:0,doc:t.doc}):t.type===1&&i.type===0?this.U_=this.U_.remove(e):t.type===1&&i.type===2?this.U_=this.U_.insert(e,{type:1,doc:i.doc}):t.type===0&&i.type===1?this.U_=this.U_.insert(e,{type:2,doc:t.doc}):nt():this.U_=this.U_.insert(e,t)}W_(){let t=[];return this.U_.inorderTraversal((e,i)=>{t.push(i)}),t}},ho=class n{constructor(t,e,i,r,s,o,a,c,l){this.query=t,this.docs=e,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(t,e,i,r,s){let o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new n(t,e,Yu.emptySet(e),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&od(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;let e=this.docChanges,i=t.docChanges;if(e.length!==i.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==i[r].type||!e[r].doc.isEqual(i[r].doc))return!1;return!0}};var Nb=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(t=>t.H_())}},Fb=class{constructor(){this.queries=Ex(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(e,i){let r=rt(e),s=r.queries;r.queries=Ex(),s.forEach((o,a)=>{for(let c of a.z_)c.onError(i)})})(this,new G(U.ABORTED,"Firestore shutting down"))}};function Ex(){return new sr(n=>Wx(n),od)}function sL(n,t){return x(this,null,function*(){let e=rt(n),i=3,r=t.query,s=e.queries.get(r);s?!s.j_()&&t.H_()&&(i=2):(s=new Nb,i=t.H_()?0:1);try{switch(i){case 0:s.G_=yield e.onListen(r,!0);break;case 1:s.G_=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r)}}catch(o){let a=p_(o,`Initialization of query '${Ks(t.query)}' failed`);return void t.onError(a)}e.queries.set(r,s),s.z_.push(t),t.Y_(e.onlineState),s.G_&&t.Z_(s.G_)&&g_(e)})}function oL(n,t){return x(this,null,function*(){let e=rt(n),i=t.query,r=3,s=e.queries.get(i);if(s){let o=s.z_.indexOf(t);o>=0&&(s.z_.splice(o,1),s.z_.length===0?r=t.H_()?0:1:!s.j_()&&t.H_()&&(r=2))}switch(r){case 0:return e.queries.delete(i),e.onUnlisten(i,!0);case 1:return e.queries.delete(i),e.onUnlisten(i,!1);case 2:return e.onLastRemoteStoreUnlisten(i);default:return}})}function aL(n,t){let e=rt(n),i=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let a of o.z_)a.Z_(r)&&(i=!0);o.G_=r}}i&&g_(e)}function cL(n,t,e){let i=rt(n),r=i.queries.get(t);if(r)for(let s of r.z_)s.onError(e);i.queries.delete(t)}function g_(n){n.J_.forEach(t=>{t.next()})}var Lb,xx;(xx=Lb||(Lb={})).X_="default",xx.Cache="cache";var Vb=class{constructor(t,e,i){this.query=t,this.ea=e,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(t){if(!this.options.includeMetadataChanges){let i=[];for(let r of t.docChanges)r.type!==3&&i.push(r);t=new ho(t.query,t.docs,t.oldDocs,i,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.ta?this.ra(t)&&(this.ea.next(t),e=!0):this.ia(t,this.onlineState)&&(this.sa(t),e=!0),this.na=t,e}onError(t){this.ea.error(t)}Y_(t){this.onlineState=t;let e=!1;return this.na&&!this.ta&&this.ia(this.na,t)&&(this.sa(this.na),e=!0),e}ia(t,e){if(!t.fromCache||!this.H_())return!0;let i=e!=="Offline";return(!this.options.oa||!i)&&(!t.docs.isEmpty()||t.hasCachedResults||e==="Offline")}ra(t){if(t.docChanges.length>0)return!0;let e=this.na&&this.na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&this.options.includeMetadataChanges===!0}sa(t){t=ho.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ta=!0,this.ea.next(t)}H_(){return this.options.source!==Lb.Cache}};var Xu=class{constructor(t){this.key=t}},Ju=class{constructor(t){this.key=t}},Ub=class{constructor(t,e){this.query=t,this.Ia=e,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=ft(),this.mutatedKeys=ft(),this.da=$x(t),this.Aa=new Yu(this.da)}get Ra(){return this.Ia}Va(t,e){let i=e?e.ma:new Qu,r=e?e.Aa:this.Aa,s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,h)=>{let m=r.get(d),g=ad(this.query,h)?h:null,y=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),v=!1;m&&g?m.data.isEqual(g.data)?y!==b&&(i.track({type:3,doc:g}),v=!0):this.fa(m,g)||(i.track({type:2,doc:g}),v=!0,(c&&this.da(g,c)>0||l&&this.da(g,l)<0)&&(a=!0)):!m&&g?(i.track({type:0,doc:g}),v=!0):m&&!g&&(i.track({type:1,doc:m}),v=!0,(c||l)&&(a=!0)),v&&(g?(o=o.add(g),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),i.track({type:1,doc:d})}return{Aa:o,ma:i,ts:a,mutatedKeys:s}}fa(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,i,r){let s=this.Aa;this.Aa=t.Aa,this.mutatedKeys=t.mutatedKeys;let o=t.ma.W_();o.sort((d,h)=>function(g,y){let b=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return b(g)-b(y)}(d.type,h.type)||this.da(d.doc,h.doc)),this.ga(i),r=r!=null&&r;let a=e&&!r?this.pa():[],c=this.Ea.size===0&&this.current&&!r?1:0,l=c!==this.Ta;return this.Ta=c,o.length!==0||l?{snapshot:new ho(this.query,t.Aa,s,o,t.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Qu,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(t){return!this.Ia.has(t)&&!!this.Aa.has(t)&&!this.Aa.get(t).hasLocalMutations}ga(t){t&&(t.addedDocuments.forEach(e=>this.Ia=this.Ia.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this.Ia=this.Ia.delete(e)),this.current=t.current)}pa(){if(!this.current)return[];let t=this.Ea;this.Ea=ft(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});let e=[];return t.forEach(i=>{this.Ea.has(i)||e.push(new Ju(i))}),this.Ea.forEach(i=>{t.has(i)||e.push(new Xu(i))}),e}Sa(t){this.Ia=t.Is,this.Ea=ft();let e=this.Va(t.documents);return this.applyChanges(e,!0)}ba(){return ho.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},jb=class{constructor(t,e,i){this.query=t,this.targetId=e,this.view=i}},Bb=class{constructor(t){this.key=t,this.Da=!1}},zb=class{constructor(t,e,i,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new sr(a=>Wx(a),od),this.Fa=new Map,this.Ma=new Set,this.xa=new re(Z.comparator),this.Oa=new Map,this.Na=new mc,this.La={},this.Ba=new Map,this.ka=fc.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function lL(n,t,e=!0){return x(this,null,function*(){let i=xT(n),r,s=i.va.get(t);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ba()):r=yield yT(i,t,e,!0),r})}function uL(n,t){return x(this,null,function*(){let e=xT(n);yield yT(e,t,!0,!1)})}function yT(n,t,e,i){return x(this,null,function*(){let r=yield $F(n.localStore,Kn(t)),s=r.targetId,o=e?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield dL(n,t,s,o==="current",r.resumeToken)),n.isPrimaryClient&&e&&fT(n.remoteStore,r),a})}function dL(n,t,e,i,r){return x(this,null,function*(){n.Qa=(h,m,g)=>function(b,v,C,R){return x(this,null,function*(){let P=v.view.Va(C);P.ts&&(P=yield wx(b.localStore,v.query,!1).then(({documents:E})=>v.view.Va(E,P)));let V=R&&R.targetChanges.get(v.targetId),F=R&&R.targetMismatches.get(v.targetId)!=null,L=v.view.applyChanges(P,b.isPrimaryClient,V,F);return Ax(b,v.targetId,L.ya),L.snapshot})}(n,h,m,g);let s=yield wx(n.localStore,t,!0),o=new Ub(t,s.Is),a=o.Va(s.documents),c=dc.createSynthesizedTargetChangeForCurrentChange(e,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);Ax(n,e,l.ya);let d=new jb(t,e,o);return n.va.set(t,d),n.Fa.has(e)?n.Fa.get(e).push(t):n.Fa.set(e,[t]),l.snapshot})}function hL(n,t,e){return x(this,null,function*(){let i=rt(n),r=i.va.get(t),s=i.Fa.get(r.targetId);if(s.length>1)return i.Fa.set(r.targetId,s.filter(o=>!od(o,t))),void i.va.delete(t);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield xb(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),e&&d_(i.remoteStore,r.targetId),qb(i,r.targetId)}).catch(wc))):(qb(i,r.targetId),yield xb(i.localStore,r.targetId,!0))})}function fL(n,t){return x(this,null,function*(){let e=rt(n),i=e.va.get(t),r=e.Fa.get(i.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(i.targetId),d_(e.remoteStore,i.targetId))})}function mL(n,t,e){return x(this,null,function*(){let i=wL(n);try{let r=yield function(o,a){let c=rt(o),l=Ce.now(),d=a.reduce((g,y)=>g.add(y.key),ft()),h,m;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let y=Ti(),b=ft();return c.us.getEntries(g,d).next(v=>{y=v,y.forEach((C,R)=>{R.isValidDocument()||(b=b.add(C))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,y)).next(v=>{h=v;let C=[];for(let R of a){let P=yF(R,h.get(R.key).overlayedDocument);P!=null&&C.push(new Xn(R.key,P,Fx(P.value.mapValue),Ii.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,C,a)}).next(v=>{m=v;let C=v.applyToLocalDocumentSet(h,b);return c.documentOverlayCache.saveOverlays(g,v.batchId,C)})}).then(()=>({batchId:m.batchId,changes:Gx(h)}))}(i.localStore,t);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.La[o.currentUser.toKey()];l||(l=new re(Et)),l=l.insert(a,c),o.La[o.currentUser.toKey()]=l}(i,r.batchId,e),yield xc(i,r.changes),yield ud(i.remoteStore)}catch(r){let s=p_(r,"Failed to persist write");e.reject(s)}})}function vT(n,t){return x(this,null,function*(){let e=rt(n);try{let i=yield zF(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.Oa.get(s);o&&(Nt(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Da=!0:r.modifiedDocuments.size>0?Nt(o.Da):r.removedDocuments.size>0&&(Nt(o.Da),o.Da=!1))}),yield xc(e,i,t)}catch(i){yield wc(i)}})}function Tx(n,t,e){let i=rt(n);if(i.isPrimaryClient&&e===0||!i.isPrimaryClient&&e===1){let r=[];i.va.forEach((s,o)=>{let a=o.view.Y_(t);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=rt(o);c.onlineState=a;let l=!1;c.queries.forEach((d,h)=>{for(let m of h.z_)m.Y_(a)&&(l=!0)}),l&&g_(c)}(i.eventManager,t),r.length&&i.Ca.E_(r),i.onlineState=t,i.isPrimaryClient&&i.sharedClientState.setOnlineState(t)}}function pL(n,t,e){return x(this,null,function*(){let i=rt(n);i.sharedClientState.updateQueryState(t,"rejected",e);let r=i.Oa.get(t),s=r&&r.key;if(s){let o=new re(Z.comparator);o=o.insert(s,On.newNoDocument(s,at.min()));let a=ft().add(s),c=new Vu(at.min(),new Map,new re(Et),o,a);yield vT(i,c),i.xa=i.xa.remove(s),i.Oa.delete(t),b_(i)}else yield xb(i.localStore,t,!1).then(()=>qb(i,t,e)).catch(wc)})}function gL(n,t){return x(this,null,function*(){let e=rt(n),i=t.batch.batchId;try{let r=yield BF(e.localStore,t);IT(e,i,null),wT(e,i),e.sharedClientState.updateMutationState(i,"acknowledged"),yield xc(e,r)}catch(r){yield wc(r)}})}function bL(n,t,e){return x(this,null,function*(){let i=rt(n);try{let r=yield function(o,a){let c=rt(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let d;return c.mutationQueue.lookupMutationBatch(l,a).next(h=>(Nt(h!==null),d=h.keys(),c.mutationQueue.removeMutationBatch(l,h))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,d,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,d)).next(()=>c.localDocuments.getDocuments(l,d))})}(i.localStore,t);IT(i,t,e),wT(i,t),i.sharedClientState.updateMutationState(t,"rejected",e),yield xc(i,r)}catch(r){yield wc(r)}})}function wT(n,t){(n.Ba.get(t)||[]).forEach(e=>{e.resolve()}),n.Ba.delete(t)}function IT(n,t,e){let i=rt(n),r=i.La[i.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),i.La[i.currentUser.toKey()]=r}}function qb(n,t,e=null){n.sharedClientState.removeLocalQueryTarget(t);for(let i of n.Fa.get(t))n.va.delete(i),e&&n.Ca.Ka(i,e);n.Fa.delete(t),n.isPrimaryClient&&n.Na.mr(t).forEach(i=>{n.Na.containsKey(i)||ET(n,i)})}function ET(n,t){n.Ma.delete(t.path.canonicalString());let e=n.xa.get(t);e!==null&&(d_(n.remoteStore,e),n.xa=n.xa.remove(t),n.Oa.delete(e),b_(n))}function Ax(n,t,e){for(let i of e)i instanceof Xu?(n.Na.addReference(i.key,t),_L(n,i)):i instanceof Ju?(Y("SyncEngine","Document no longer in limbo: "+i.key),n.Na.removeReference(i.key,t),n.Na.containsKey(i.key)||ET(n,i.key)):nt()}function _L(n,t){let e=t.key,i=e.path.canonicalString();n.xa.get(e)||n.Ma.has(i)||(Y("SyncEngine","New document in limbo: "+e),n.Ma.add(i),b_(n))}function b_(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){let t=n.Ma.values().next().value;n.Ma.delete(t);let e=new Z(Ht.fromString(t)),i=n.ka.next();n.Oa.set(i,new Bb(e)),n.xa=n.xa.insert(e,i),fT(n.remoteStore,new hc(Kn(zx(e.path)),i,"TargetPurposeLimboResolution",Mx.oe))}}function xc(n,t,e){return x(this,null,function*(){let i=rt(n),r=[],s=[],o=[];i.va.isEmpty()||(i.va.forEach((a,c)=>{o.push(i.Qa(c,t,e).then(l=>{var d;if((l||e)&&i.isPrimaryClient){let h=l?!l.fromCache:(d=e?.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;i.sharedClientState.updateQueryState(c.targetId,h?"current":"not-current")}if(l){r.push(l);let h=vb.Ui(c.targetId,l);s.push(h)}}))}),yield Promise.all(o),i.Ca.E_(r),yield function(c,l){return x(this,null,function*(){let d=rt(c);try{yield d.persistence.runTransaction("notifyLocalViewChanges","readwrite",h=>q.forEach(l,m=>q.forEach(m.Ki,g=>d.persistence.referenceDelegate.addReference(h,m.targetId,g)).next(()=>q.forEach(m.$i,g=>d.persistence.referenceDelegate.removeReference(h,m.targetId,g)))))}catch(h){if(!Ic(h))throw h;Y("LocalStore","Failed to update sequence numbers: "+h)}for(let h of l){let m=h.targetId;if(!h.fromCache){let g=d.ss.get(m),y=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(y);d.ss=d.ss.insert(m,b)}}})}(i.localStore,s))})}function yL(n,t){return x(this,null,function*(){let e=rt(n);if(!e.currentUser.isEqual(t)){Y("SyncEngine","User change. New user:",t.toKey());let i=yield dT(e.localStore,t);e.currentUser=t,function(s,o){s.Ba.forEach(a=>{a.forEach(c=>{c.reject(new G(U.CANCELLED,o))})}),s.Ba.clear()}(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,i.removedBatchIds,i.addedBatchIds),yield xc(e,i.ls)}})}function vL(n,t){let e=rt(n),i=e.Oa.get(t);if(i&&i.Da)return ft().add(i.key);{let r=ft(),s=e.Fa.get(t);if(!s)return r;for(let o of s){let a=e.va.get(o);r=r.unionWith(a.view.Ra)}return r}}function xT(n){let t=rt(n);return t.remoteStore.remoteSyncer.applyRemoteEvent=vT.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vL.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=pL.bind(null,t),t.Ca.E_=aL.bind(null,t.eventManager),t.Ca.Ka=cL.bind(null,t.eventManager),t}function wL(n){let t=rt(n);return t.remoteStore.remoteSyncer.applySuccessfulWrite=gL.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=bL.bind(null,t),t}var Zu=class{constructor(){this.synchronizeTabs=!1}initialize(t){return x(this,null,function*(){this.serializer=cd(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),yield this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)})}createGarbageCollectionScheduler(t,e){return null}createIndexBackfillerScheduler(t,e){return null}createLocalStore(t){return jF(this.persistence,new Ib,t.initialUser,this.serializer)}createPersistence(t){return new bb(yb.Yr,this.serializer)}createSharedClientState(t){return new Tb}terminate(){return x(this,null,function*(){var t,e;(t=this.gcScheduler)===null||t===void 0||t.stop(),(e=this.indexBackfillerScheduler)===null||e===void 0||e.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var Wb=class{initialize(t,e){return x(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>Tx(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=yL.bind(null,this.syncEngine),yield rL(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Fb}()}createDatastore(t){let e=cd(t.databaseInfo.databaseId),i=function(s){return new Cb(s)}(t.databaseInfo);return function(s,o,a,c){return new kb(s,o,a,c)}(t.authCredentials,t.appCheckCredentials,i,e)}createRemoteStore(t){return function(i,r,s,o,a){return new Mb(i,r,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,e=>Tx(this.syncEngine,e,0),function(){return $u.D()?new $u:new Ab}())}createSyncEngine(t,e){return function(r,s,o,a,c,l,d){let h=new zb(r,s,o,a,c,l);return d&&(h.qa=!0),h}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)}terminate(){return x(this,null,function*(){var t,e;yield function(r){return x(this,null,function*(){let s=rt(r);Y("RemoteStore","RemoteStore shutting down."),s.N_.add(5),yield Ec(s),s.B_.shutdown(),s.k_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(e=this.eventManager)===null||e===void 0||e.terminate()})}};var $b=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Wa(this.observer.next,t)}error(t){this.observer.error?this.Wa(this.observer.error,t):Ei("Uncaught Error in snapshot listener:",t.toString())}Ga(){this.muted=!0}Wa(t,e){this.muted||setTimeout(()=>{this.muted||t(e)},0)}};var Hb=class{constructor(t,e,i,r){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=i,this.databaseInfo=r,this.user=we.UNAUTHENTICATED,this.clientId=Pu.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>x(this,null,function*(){Y("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(Y("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Hn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>x(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let i=p_(e,"Failed to shutdown persistence");t.reject(i)}})),t.promise}};function vg(n,t){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),Y("FirestoreClient","Initializing OfflineComponentProvider");let e=n.configuration;yield t.initialize(e);let i=e.initialUser;n.setCredentialChangeListener(r=>x(this,null,function*(){i.isEqual(r)||(yield dT(t.localStore,r),i=r)})),t.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=t})}function Sx(n,t){return x(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let e=yield EL(n);Y("FirestoreClient","Initializing OnlineComponentProvider"),yield t.initialize(e,n.configuration),n.setCredentialChangeListener(i=>Ix(t.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>Ix(t.remoteStore,r)),n._onlineComponents=t})}function IL(n){return n.name==="FirebaseError"?n.code===U.FAILED_PRECONDITION||n.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function EL(n){return x(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Y("FirestoreClient","Using user provided OfflineComponentProvider");try{yield vg(n,n._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!IL(e))throw e;eo("Error using user provided cache. Falling back to memory cache: "+e),yield vg(n,new Zu)}}else Y("FirestoreClient","Using default OfflineComponentProvider"),yield vg(n,new Zu);return n._offlineComponents})}function TT(n){return x(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(Y("FirestoreClient","Using user provided OnlineComponentProvider"),yield Sx(n,n._uninitializedComponentsProvider._online)):(Y("FirestoreClient","Using default OnlineComponentProvider"),yield Sx(n,new Wb))),n._onlineComponents})}function xL(n){return TT(n).then(t=>t.syncEngine)}function TL(n){return x(this,null,function*(){let t=yield TT(n),e=t.eventManager;return e.onListen=lL.bind(null,t.syncEngine),e.onUnlisten=hL.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=uL.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=fL.bind(null,t.syncEngine),e})}function AL(n,t,e={}){let i=new Hn;return n.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return function(s,o,a,c,l){let d=new $b({next:m=>{o.enqueueAndForget(()=>oL(s,h)),m.fromCache&&c.source==="server"?l.reject(new G(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),h=new Vb(a,d,{includeMetadataChanges:!0,oa:!0});return sL(s,h)}(yield TL(n),n.asyncQueue,t,e,i)})),i.promise}function AT(n){let t={};return n.timeoutSeconds!==void 0&&(t.timeoutSeconds=n.timeoutSeconds),t}var Cx=new Map;function ST(n,t,e){if(!e)throw new G(U.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${t}.`)}function SL(n,t,e,i){if(t===!0&&i===!0)throw new G(U.INVALID_ARGUMENT,`${n} and ${e} cannot be used together.`)}function Dx(n){if(!Z.isDocumentKey(n))throw new G(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Rx(n){if(Z.isDocumentKey(n))throw new G(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function dd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let t=function(i){return i.constructor?i.constructor.name:null}(n);return t?`a custom ${t} object`:"an object"}}return typeof n=="function"?"a function":nt()}function ns(n,t){if("_delegate"in n&&(n=n._delegate),!(n instanceof t)){if(t.name===n.constructor.name)throw new G(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=dd(n);throw new G(U.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return n}var td=class{constructor(t){var e,i;if(t.host===void 0){if(t.ssl!==void 0)throw new G(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(e=t.ssl)===null||e===void 0||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new G(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}SL("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=AT((i=t.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}},fo=class{constructor(t,e,i,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new td({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new G(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new td(t),t.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new wg;switch(i.type){case"firstParty":return new Tg(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new G(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){let i=Cx.get(e);i&&(Y("ComponentProvider","Removing Datastore"),Cx.delete(e),i.terminate())}(this),Promise.resolve()}};function CL(n,t,e,i={}){var r;let s=(n=ns(n,fo))._getSettings(),o=`${t}:${e}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&eo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=we.MOCK_USER;else{a=eE(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new G(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new we(l)}n._authCredentials=new Ig(new ku(a,c))}}var mo=class n{constructor(t,e,i){this.converter=e,this._query=i,this.type="query",this.firestore=t}withConverter(t){return new n(this.firestore,t,this._query)}},mn=class n{constructor(t,e,i){this.converter=e,this._key=i,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ir(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new n(this.firestore,t,this._key)}},ir=class n extends mo{constructor(t,e,i){super(t,e,zx(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new mn(this.firestore,null,new Z(t))}withConverter(t){return new n(this.firestore,t,this._path)}};function wn(n,t,...e){if(n=le(n),ST("collection","path",t),n instanceof fo){let i=Ht.fromString(t,...e);return Rx(i),new ir(n,null,i)}{if(!(n instanceof mn||n instanceof ir))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ht.fromString(t,...e));return Rx(i),new ir(n.firestore,null,i)}}function DL(n,t,...e){if(n=le(n),arguments.length===1&&(t=Pu.newId()),ST("doc","path",t),n instanceof fo){let i=Ht.fromString(t,...e);return Dx(i),new mn(n,null,new Z(i))}{if(!(n instanceof mn||n instanceof ir))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Ht.fromString(t,...e));return Dx(i),new mn(n.firestore,n instanceof ir?n.converter:null,new Z(i))}}var Gb=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new Hu(this,"async_queue_retry"),this.Tu=()=>{let e=yg();e&&Y("AsyncQueue","Visibility state changed to "+e.visibilityState),this.e_.zo()};let t=yg();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Eu(),this.du(t)}enterRestrictedMode(t){if(!this.uu){this.uu=!0,this.Pu=t||!1;let e=yg();e&&typeof e.removeEventListener=="function"&&e.removeEventListener("visibilitychange",this.Tu)}}enqueue(t){if(this.Eu(),this.uu)return new Promise(()=>{});let e=new Hn;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.au.push(t),this.Au()))}Au(){return x(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(t){if(!Ic(t))throw t;Y("AsyncQueue","Operation failed with retryable error: "+t)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(t){let e=this._u.then(()=>(this.hu=!0,t().catch(i=>{this.lu=i,this.hu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Ei("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.hu=!1,i))));return this._u=e,e}enqueueAfterDelay(t,e,i){this.Eu(),this.Iu.indexOf(t)>-1&&(e=0);let r=Ob.createAndSchedule(this,t,e,i,s=>this.Ru(s));return this.cu.push(r),r}Eu(){this.lu&&nt()}verifyOperationInProgress(){}Vu(){return x(this,null,function*(){let t;do t=this._u,yield t;while(t!==this._u)})}mu(t){for(let e of this.cu)if(e.timerId===t)return!0;return!1}fu(t){return this.Vu().then(()=>{this.cu.sort((e,i)=>e.targetTimeMs-i.targetTimeMs);for(let e of this.cu)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.Vu()})}gu(t){this.Iu.push(t)}Ru(t){let e=this.cu.indexOf(t);this.cu.splice(e,1)}};var is=class extends fo{constructor(t,e,i,r){super(t,e,i,r),this.type="firestore",this._queue=function(){return new Gb}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||RT(this),this._firestoreClient.terminate()}};function CT(n,t){let e=typeof n=="object"?n:qr(),i=typeof n=="string"?n:t||"(default)",r=Mn(e,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=tE("firestore");s&&CL(r,...s)}return r}function DT(n){return n._firestoreClient||RT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function RT(n){var t,e,i;let r=n._freezeSettings(),s=function(a,c,l,d){return new Rg(a,c,l,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,AT(d.experimentalLongPollingOptions),d.useFetchStreams)}(n._databaseId,((t=n._app)===null||t===void 0?void 0:t.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new Hb(n._authCredentials,n._appCheckCredentials,n._queue,s),!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var pc=class n{constructor(t){this._byteString=t}static fromBase64String(t){try{return new n(Ue.fromBase64String(t))}catch(e){throw new G(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new n(Ue.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var po=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new G(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fn(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var gc=class{constructor(t){this._methodName=t}};var bc=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new G(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new G(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Et(this._lat,t._lat)||Et(this._long,t._long)}};var RL=/^__.*__$/,Kb=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return this.fieldMask!==null?new Xn(t,this.data,this.fieldMask,e,this.fieldTransforms):new es(t,this.data,e,this.fieldTransforms)}},ed=class{constructor(t,e,i){this.data=t,this.fieldMask=e,this.fieldTransforms=i}toMutation(t,e){return new Xn(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function kT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}var Yb=class n{constructor(t,e,i,r,s,o){this.settings=t,this.databaseId=e,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(t){return new n(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.wu({path:i,bu:!1});return r.Du(t),r}Cu(t){var e;let i=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.wu({path:i,bu:!1});return r.pu(),r}vu(t){return this.wu({path:void 0,bu:!0})}Fu(t){return id(t,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}pu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Du(this.path.get(t))}Du(t){if(t.length===0)throw this.Fu("Document fields must not be empty");if(kT(this.yu)&&RL.test(t))throw this.Fu('Document fields cannot begin and end with "__"')}},Qb=class{constructor(t,e,i){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=i||cd(t)}Ou(t,e,i,r=!1){return new Yb({yu:t,methodName:e,xu:i,path:fn.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function __(n){let t=n._freezeSettings(),e=cd(n._databaseId);return new Qb(n._databaseId,!!t.ignoreUndefinedProperties,e)}function kL(n,t,e,i,r,s={}){let o=n.Ou(s.merge||s.mergeFields?2:0,t,e,r);y_("Data must be an object, but it was:",o,i);let a=PT(i,o),c,l;if(s.merge)c=new vn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let h of s.mergeFields){let m=Xb(t,h,e);if(!o.contains(m))throw new G(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);OT(d,m)||d.push(m)}c=new vn(d),l=o.fieldTransforms.filter(h=>c.covers(h.field))}else c=null,l=o.fieldTransforms;return new Kb(new hn(a),c,l)}var nd=class n extends gc{_toFieldTransform(t){if(t.yu!==2)throw t.yu===1?t.Fu(`${this._methodName}() can only appear at the top level of your update data`):t.Fu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof n}};function PL(n,t,e,i){let r=n.Ou(1,t,e);y_("Data must be an object, but it was:",r,i);let s=[],o=hn.empty();rs(i,(c,l)=>{let d=v_(t,c,e);l=le(l);let h=r.Cu(d);if(l instanceof nd)s.push(d);else{let m=Tc(l,h);m!=null&&(s.push(d),o.set(d,m))}});let a=new vn(s);return new ed(o,a,r.fieldTransforms)}function ML(n,t,e,i,r,s){let o=n.Ou(1,t,e),a=[Xb(t,i,e)],c=[r];if(s.length%2!=0)throw new G(U.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(Xb(t,s[m])),c.push(s[m+1]);let l=[],d=hn.empty();for(let m=a.length-1;m>=0;--m)if(!OT(l,a[m])){let g=a[m],y=c[m];y=le(y);let b=o.Cu(g);if(y instanceof nd)l.push(g);else{let v=Tc(y,b);v!=null&&(l.push(g),d.set(g,v))}}let h=new vn(l);return new ed(d,h,o.fieldTransforms)}function OL(n,t,e,i=!1){return Tc(e,n.Ou(i?4:3,t))}function Tc(n,t){if(MT(n=le(n)))return y_("Unsupported field value:",t,n),PT(n,t);if(n instanceof gc)return function(i,r){if(!kT(r.yu))throw r.Fu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,t),null;if(n===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),n instanceof Array){if(t.settings.bu&&t.yu!==4)throw t.Fu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=Tc(a,r.vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,t)}return function(i,r){if((i=le(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return mF(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=Ce.fromDate(i);return{timestampValue:zu(r.serializer,s)}}if(i instanceof Ce){let s=new Ce(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:zu(r.serializer,s)}}if(i instanceof bc)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof pc)return{bytesValue:rT(r.serializer,i._byteString)};if(i instanceof mn){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:u_(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Fu(`Unsupported field value: ${dd(i)}`)}(n,t)}function PT(n,t){let e={};return Ox(n)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):rs(n,(i,r)=>{let s=Tc(r,t.Su(i));s!=null&&(e[i]=s)}),{mapValue:{fields:e}}}function MT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ce||n instanceof bc||n instanceof pc||n instanceof mn||n instanceof gc)}function y_(n,t,e){if(!MT(e)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(e)){let i=dd(e);throw i==="an object"?t.Fu(n+" a custom object"):t.Fu(n+" "+i)}}function Xb(n,t,e){if((t=le(t))instanceof po)return t._internalPath;if(typeof t=="string")return v_(n,t);throw id("Field path arguments must be of type string or ",n,!1,void 0,e)}var NL=new RegExp("[~\\*/\\[\\]]");function v_(n,t,e){if(t.search(NL)>=0)throw id(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,e);try{return new po(...t.split("."))._internalPath}catch{throw id(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,e)}}function id(n,t,e,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new G(U.INVALID_ARGUMENT,a+n+c)}function OT(n,t){return n.some(e=>e.isEqual(t))}var rd=class{constructor(t,e,i,r,s){this._firestore=t,this._userDataWriter=e,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let t=new Jb(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){let e=this._document.data.field(w_("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},Jb=class extends rd{data(){return super.data()}};function w_(n,t){return typeof t=="string"?v_(n,t):t instanceof po?t._internalPath:t._delegate._internalPath}function FL(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new G(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _c=class{},Zb=class extends _c{};function Jn(n,t,...e){let i=[];t instanceof _c&&i.push(t),i=i.concat(e),function(s){let o=s.filter(c=>c instanceof vc).length,a=s.filter(c=>c instanceof yc).length;if(o>1||o>0&&a>0)throw new G(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var yc=class n extends Zb{constructor(t,e,i){super(),this._field=t,this._op=e,this._value=i,this.type="where"}static _create(t,e,i){return new n(t,e,i)}_apply(t){let e=this._parse(t);return FT(t._query,e),new mo(t.firestore,t.converter,qg(t._query,e))}_parse(t){let e=__(t.firestore);return function(s,o,a,c,l,d,h){let m;if(l.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Px(h,d);let g=[];for(let y of h)g.push(kx(c,s,y));m={arrayValue:{values:g}}}else m=kx(c,s,h)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Px(h,d),m=OL(a,o,h,d==="in"||d==="not-in");return pe.create(l,d,m)}(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function Ie(n,t,e){let i=t,r=w_("where",n);return yc._create(r,i,e)}var vc=class n extends _c{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new n(t,e)}_parse(t){let e=this._queryConstraints.map(i=>i._parse(t)).filter(i=>i.getFilters().length>0);return e.length===1?e[0]:Nn.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)FT(o,c),o=qg(o,c)}(t._query,e),new mo(t.firestore,t.converter,qg(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function NT(...n){return n.forEach(t=>LL("and",t)),vc._create("and",n)}function kx(n,t,e){if(typeof(e=le(e))=="string"){if(e==="")throw new G(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!qx(t)&&e.indexOf("/")!==-1)throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let i=t.path.child(Ht.fromString(e));if(!Z.isDocumentKey(i))throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return rx(n,new Z(i))}if(e instanceof mn)return rx(n,e._key);throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${dd(e)}.`)}function Px(n,t){if(!Array.isArray(n)||n.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function FT(n,t){let e=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(e!==null)throw e===t.op?new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function LL(n,t){if(!(t instanceof yc||t instanceof vc))throw new G(U.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var t_=class{convertValue(t,e="none"){switch(Xr(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ie(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(rr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw nt()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let i={};return rs(t,(r,s)=>{i[r]=this.convertValue(s,e)}),i}convertGeoPoint(t){return new bc(ie(t.latitude),ie(t.longitude))}convertArray(t,e){return(t.values||[]).map(i=>this.convertValue(i,e))}convertServerTimestamp(t,e){switch(e){case"previous":let i=o_(t);return i==null?null:this.convertValue(i,e);case"estimate":return this.convertTimestamp(cc(t));default:return null}}convertTimestamp(t){let e=xi(t);return new Ce(e.seconds,e.nanos)}convertDocumentKey(t,e){let i=Ht.fromString(t);Nt(uT(i));let r=new Fu(i.get(1),i.get(3)),s=new Z(i.popFirst(5));return r.isEqual(e)||Ei(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function VL(n,t,e){let i;return i=n?e&&(e.merge||e.mergeFields)?n.toFirestore(t,e):n.toFirestore(t):t,i}var Js=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},e_=class extends rd{constructor(t,e,i,r,s,o){super(t,e,i,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){let e=new to(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,e={}){if(this._document){let i=this._document.data.field(w_("DocumentSnapshot.get",t));if(i!==null)return this._userDataWriter.convertValue(i,e.serverTimestamps)}}},to=class extends e_{data(t={}){return super.data(t)}},n_=class{constructor(t,e,i,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new Js(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(i=>{t.call(e,new to(this._firestore,this._userDataWriter,i.key,i,new Js(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new G(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new to(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Js(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new to(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Js(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,d=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:UL(a.type),doc:c,oldIndex:l,newIndex:d}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function UL(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}var i_=class extends t_{constructor(t){super(),this.firestore=t}convertBytes(t){return new pc(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new mn(this.firestore,null,e)}};function Zn(n){n=ns(n,mo);let t=ns(n.firestore,is),e=DT(t),i=new i_(t);return FL(n._query),AL(e,n._query).then(r=>new n_(t,i,n,r))}function LT(n,t,e,...i){n=ns(n,mn);let r=ns(n.firestore,is),s=__(r),o;return o=typeof(t=le(t))=="string"||t instanceof po?ML(s,"updateDoc",n._key,t,e,i):PL(s,"updateDoc",n._key,t),E_(r,[o.toMutation(n._key,Ii.exists(!0))])}function VT(n){return E_(ns(n.firestore,is),[new uc(n._key,Ii.none())])}function I_(n,t){let e=ns(n.firestore,is),i=DL(n),r=VL(n.converter,t);return E_(e,[kL(__(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Ii.exists(!1))]).then(()=>i)}function E_(n,t){return function(i,r){let s=new Hn;return i.asyncQueue.enqueueAndForget(()=>x(this,null,function*(){return mL(yield xL(i),r,s)})),s.promise}(DT(n),t)}(function(t,e=!0){(function(r){go=r})(er),Ke(new ve("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new is(new Eg(i.getProvider("auth-internal")),new Sg(i.getProvider("app-check-internal")),function(l,d){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new G(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(l.options.projectId,d)}(o,r),o);return s=Object.assign({useFetchStreams:e},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Se(ex,"4.6.5",t),Se(ex,"4.6.5","esm2017")})();function ZT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var tA=ZT,eA=new un("auth","Firebase",ZT());var bd=new zn("@firebase/auth");function jL(n,...t){bd.logLevel<=ht.WARN&&bd.warn(`Auth (${er}): ${n}`,...t)}function fd(n,...t){bd.logLevel<=ht.ERROR&&bd.error(`Auth (${er}): ${n}`,...t)}function ei(n,...t){throw B_(n,...t)}function Fn(n,...t){return B_(n,...t)}function j_(n,t,e){let i=Object.assign(Object.assign({},tA()),{[t]:e});return new un("auth","Firebase",i).create(t,{appName:n.name})}function os(n){return j_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BL(n,t,e){let i=e;if(!(t instanceof i))throw i.name!==t.constructor.name&&ei(n,"argument-error"),j_(n,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function B_(n,...t){if(typeof n!="string"){let e=t[0],i=[...t.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(e,...i)}return eA.create(n,...t)}function it(n,t,...e){if(!n)throw B_(t,...e)}function Ai(n){let t="INTERNAL ASSERTION FAILED: "+n;throw fd(t),new Error(t)}function Ci(n,t){n||Ai(t)}function A_(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function zL(){return UT()==="http:"||UT()==="https:"}function UT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function qL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(zL()||pu()||"connection"in navigator)?navigator.onLine:!0}function WL(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var as=class{constructor(t,e){this.shortDelay=t,this.longDelay=e,Ci(e>t,"Short delay should be less than long delay!"),this.isMobile=nE()||iE()}get(){return qL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function z_(n,t){Ci(n.emulator,"Emulator should always be set here");let{url:e}=n.emulator;return t?`${e}${t.startsWith("/")?t.slice(1):t}`:e}var _d=class{static initialize(t,e,i){this.fetchImpl=t,e&&(this.headersImpl=e),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ai("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ai("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ai("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var $L={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var HL=new as(3e4,6e4);function q_(n,t){return n.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:n.tenantId}):t}function vo(s,o,a,c){return x(this,arguments,function*(n,t,e,i,r={}){return nA(n,r,()=>x(this,null,function*(){let l={},d={};i&&(t==="GET"?d=i:l={body:JSON.stringify(i)});let h=Hs(Object.assign({key:n.config.apiKey},d)).slice(1),m=yield n._getAdditionalHeaders();return m["Content-Type"]="application/json",n.languageCode&&(m["X-Firebase-Locale"]=n.languageCode),_d.fetch()(iA(n,n.config.apiHost,e,h),Object.assign({method:t,headers:m,referrerPolicy:"no-referrer"},l))}))})}function nA(n,t,e){return x(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},$L),t);try{let r=new S_(n),s=yield Promise.race([e(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw hd(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw hd(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw hd(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw hd(n,"user-disabled",o);let d=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw j_(n,d,l);ei(n,d)}}catch(r){if(r instanceof Ae)throw r;ei(n,"network-request-failed",{message:String(r)})}})}function GL(s,o,a,c){return x(this,arguments,function*(n,t,e,i,r={}){let l=yield vo(n,t,e,i,r);return"mfaPendingCredential"in l&&ei(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function iA(n,t,e,i){let r=`${t}${e}?${i}`;return n.config.emulator?z_(n.config,r):`${n.config.apiScheme}://${r}`}var S_=class{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((e,i)=>{this.timer=setTimeout(()=>i(Fn(this.auth,"network-request-failed")),HL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function hd(n,t,e){let i={appName:n.name};e.email&&(i.email=e.email),e.phoneNumber&&(i.phoneNumber=e.phoneNumber);let r=Fn(n,t,i);return r.customData._tokenResponse=e,r}function KL(n,t){return x(this,null,function*(){return vo(n,"POST","/v1/accounts:delete",t)})}function rA(n,t){return x(this,null,function*(){return vo(n,"POST","/v1/accounts:lookup",t)})}function Ac(n){if(n)try{let t=new Date(Number(n));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}function sA(n,t=!1){return x(this,null,function*(){let e=le(n),i=yield e.getIdToken(t),r=W_(i);it(r&&r.exp&&r.auth_time&&r.iat,e.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Ac(x_(r.auth_time)),issuedAtTime:Ac(x_(r.iat)),expirationTime:Ac(x_(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function x_(n){return Number(n)*1e3}function W_(n){let[t,e,i]=n.split(".");if(t===void 0||e===void 0||i===void 0)return fd("JWT malformed, contained fewer than 3 sections"),null;try{let r=Rp(e);return r?JSON.parse(r):(fd("Failed to decode base64 JWT payload"),null)}catch(r){return fd("Caught error parsing JWT payload as JSON",r?.toString()),null}}function jT(n){let t=W_(n);return it(t,"internal-error"),it(typeof t.exp<"u","internal-error"),it(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}function Cc(n,t,e=!1){return x(this,null,function*(){if(e)return t;try{return yield t}catch(i){throw i instanceof Ae&&YL(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function YL({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var C_=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var e;if(t){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((e=this.user.stsTokenManager.expirationTime)!==null&&e!==void 0?e:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(t=!1){if(!this.isRunning)return;let e=this.getInterval(t);this.timerId=setTimeout(()=>x(this,null,function*(){yield this.iteration()}),e)}iteration(){return x(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(t){t?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Dc=class{constructor(t,e){this.createdAt=t,this.lastLoginAt=e,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ac(this.lastLoginAt),this.creationTime=Ac(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function yd(n){return x(this,null,function*(){var t;let e=n.auth,i=yield n.getIdToken(),r=yield Cc(n,rA(e,{idToken:i}));it(r?.users.length,e,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?aA(s.providerUserInfo):[],a=QL(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,d=c?l:!1,h={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Dc(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(n,h)})}function oA(n){return x(this,null,function*(){let t=le(n);yield yd(t),yield t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)})}function QL(n,t){return[...n.filter(i=>!t.some(r=>r.providerId===i.providerId)),...t]}function aA(n){return n.map(t=>{var{providerId:e}=t,i=Cl(t,["providerId"]);return{providerId:e,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function XL(n,t){return x(this,null,function*(){let e=yield nA(n,{},()=>x(this,null,function*(){let i=Hs({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=iA(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",_d.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:e.access_token,expiresIn:e.expires_in,refreshToken:e.refresh_token}})}function JL(n,t){return x(this,null,function*(){return vo(n,"POST","/v2/accounts:revokeToken",q_(n,t))})}var Sc=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){it(t.idToken,"internal-error"),it(typeof t.idToken<"u","internal-error"),it(typeof t.refreshToken<"u","internal-error");let e="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):jT(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,e)}updateFromIdToken(t){it(t.length!==0,"internal-error");let e=jT(t);this.updateTokensAndExpiration(t,null,e)}getToken(t,e=!1){return x(this,null,function*(){return!e&&this.accessToken&&!this.isExpired?this.accessToken:(it(this.refreshToken,t,"user-token-expired"),this.refreshToken?(yield this.refresh(t,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(t,e){return x(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield XL(t,e);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(t,e,i){this.refreshToken=e||null,this.accessToken=t||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(t,e){let{refreshToken:i,accessToken:r,expirationTime:s}=e,o=new n;return i&&(it(typeof i=="string","internal-error",{appName:t}),o.refreshToken=i),r&&(it(typeof r=="string","internal-error",{appName:t}),o.accessToken=r),s&&(it(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Ai("not implemented")}};function ar(n,t){it(typeof n=="string"||typeof n>"u","internal-error",{appName:t})}var yo=class n{constructor(t){var{uid:e,auth:i,stsTokenManager:r}=t,s=Cl(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new C_(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Dc(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(t){return x(this,null,function*(){let e=yield Cc(this,this.stsTokenManager.getToken(this.auth,t));return it(e,this.auth,"internal-error"),this.accessToken!==e&&(this.accessToken=e,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),e})}getIdTokenResult(t){return sA(this,t)}reload(){return oA(this)}_assign(t){this!==t&&(it(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(e=>Object.assign({},e)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){let e=new n(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return e.metadata._copy(this.metadata),e}_onReload(t){it(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(t,e=!1){return x(this,null,function*(){let i=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),i=!0),e&&(yield yd(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return x(this,null,function*(){if(Wn(this.auth.app))return Promise.reject(os(this.auth));let t=yield this.getIdToken();return yield Cc(this,KL(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,e){var i,r,s,o,a,c,l,d;let h=(i=e.displayName)!==null&&i!==void 0?i:void 0,m=(r=e.email)!==null&&r!==void 0?r:void 0,g=(s=e.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=e.photoURL)!==null&&o!==void 0?o:void 0,b=(a=e.tenantId)!==null&&a!==void 0?a:void 0,v=(c=e._redirectEventId)!==null&&c!==void 0?c:void 0,C=(l=e.createdAt)!==null&&l!==void 0?l:void 0,R=(d=e.lastLoginAt)!==null&&d!==void 0?d:void 0,{uid:P,emailVerified:V,isAnonymous:F,providerData:L,stsTokenManager:E}=e;it(P&&E,t,"internal-error");let w=Sc.fromJSON(this.name,E);it(typeof P=="string",t,"internal-error"),ar(h,t.name),ar(m,t.name),it(typeof V=="boolean",t,"internal-error"),it(typeof F=="boolean",t,"internal-error"),ar(g,t.name),ar(y,t.name),ar(b,t.name),ar(v,t.name),ar(C,t.name),ar(R,t.name);let I=new n({uid:P,auth:t,email:m,emailVerified:V,displayName:h,isAnonymous:F,photoURL:y,phoneNumber:g,tenantId:b,stsTokenManager:w,createdAt:C,lastLoginAt:R});return L&&Array.isArray(L)&&(I.providerData=L.map(A=>Object.assign({},A))),v&&(I._redirectEventId=v),I}static _fromIdTokenResponse(t,e,i=!1){return x(this,null,function*(){let r=new Sc;r.updateFromServerResponse(e);let s=new n({uid:e.localId,auth:t,stsTokenManager:r,isAnonymous:i});return yield yd(s),s})}static _fromGetAccountInfoResponse(t,e,i){return x(this,null,function*(){let r=e.users[0];it(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?aA(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Sc;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Dc(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var BT=new Map;function Si(n){Ci(n instanceof Function,"Expected a class definition");let t=BT.get(n);return t?(Ci(t instanceof n,"Instance stored in cache mismatched with class"),t):(t=new n,BT.set(n,t),t)}var ZL=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return x(this,null,function*(){return!0})}_set(e,i){return x(this,null,function*(){this.storage[e]=i})}_get(e){return x(this,null,function*(){let i=this.storage[e];return i===void 0?null:i})}_remove(e){return x(this,null,function*(){delete this.storage[e]})}_addListener(e,i){}_removeListener(e,i){}}return n.type="NONE",n})(),D_=ZL;function md(n,t,e){return`firebase:${n}:${t}:${e}`}var vd=class n{constructor(t,e,i){this.persistence=t,this.auth=e,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=md(this.userKey,r.apiKey,s),this.fullPersistenceKey=md("persistence",r.apiKey,s),this.boundEventHandler=e._onStorageEvent.bind(e),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}getCurrentUser(){return x(this,null,function*(){let t=yield this.persistence._get(this.fullUserKey);return t?yo._fromJSON(this.auth,t):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(t){return x(this,null,function*(){if(this.persistence===t)return;let e=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=t,e)return this.setCurrentUser(e)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(t,e,i="authUser"){return x(this,null,function*(){if(!e.length)return new n(Si(D_),t,i);let r=(yield Promise.all(e.map(l=>x(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||Si(D_),o=md(i,t.config.apiKey,t.name),a=null;for(let l of e)try{let d=yield l._get(o);if(d){let h=yo._fromJSON(t,d);l!==s&&(a=h),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,t,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(e.map(l=>x(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,t,i))})}};function zT(n){let t=n.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(uA(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(cA(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(hA(t))return"Blackberry";if(fA(t))return"Webos";if($_(t))return"Safari";if((t.includes("chrome/")||lA(t))&&!t.includes("edge/"))return"Chrome";if(dA(t))return"Android";{let e=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(e);if(i?.length===2)return i[1]}return"Other"}function cA(n=be()){return/firefox\//i.test(n)}function $_(n=be()){let t=n.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lA(n=be()){return/crios\//i.test(n)}function uA(n=be()){return/iemobile/i.test(n)}function dA(n=be()){return/android/i.test(n)}function hA(n=be()){return/blackberry/i.test(n)}function fA(n=be()){return/webos/i.test(n)}function Dd(n=be()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function tV(n=be()){var t;return Dd(n)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function eV(){return rE()&&document.documentMode===10}function mA(n=be()){return Dd(n)||dA(n)||fA(n)||hA(n)||/windows phone/i.test(n)||uA(n)}function nV(){try{return!!(window&&window!==window.top)}catch{return!1}}function pA(n,t=[]){let e;switch(n){case"Browser":e=zT(be());break;case"Worker":e=`${zT(be())}-${n}`;break;default:e=n}let i=t.length?t.join(","):"FirebaseCore-web";return`${e}/JsCore/${er}/${i}`}var R_=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,e){let i=s=>new Promise((o,a)=>{try{let c=t(s);o(c)}catch(c){a(c)}});i.onAbort=e,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(t){return x(this,null,function*(){if(this.auth.currentUser===t)return;let e=[];try{for(let i of this.queue)yield i(t),i.onAbort&&e.push(i.onAbort)}catch(i){e.reverse();for(let r of e)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function iV(e){return x(this,arguments,function*(n,t={}){return vo(n,"GET","/v2/passwordPolicy",q_(n,t))})}var rV=6,k_=class{constructor(t){var e,i,r,s;let o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(e=o.minPasswordLength)!==null&&e!==void 0?e:rV,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=t.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var e,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,c),this.validatePasswordCharacterOptions(t,c),c.isValid&&(c.isValid=(e=c.meetsMinPasswordLength)!==null&&e!==void 0?e:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(t,e){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(e.meetsMinPasswordLength=t.length>=i),r&&(e.meetsMaxPasswordLength=t.length<=r)}validatePasswordCharacterOptions(t,e){this.updatePasswordCharacterOptionsStatuses(e,!1,!1,!1,!1);let i;for(let r=0;r<t.length;r++)i=t.charAt(r),this.updatePasswordCharacterOptionsStatuses(e,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(t,e,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=e)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};var P_=class{constructor(t,e,i,r){this.app=t,this.heartbeatServiceProvider=e,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new wd(this),this.idTokenSubscription=new wd(this),this.beforeStateQueue=new R_(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eA,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(t,e){return e&&(this._popupRedirectResolver=Si(e)),this._initializationPromise=this.queue(()=>x(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield vd.create(this,t),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(e),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return x(this,null,function*(){if(this._deleted)return;let t=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(t,!0)}})}initializeCurrentUserFromIdToken(t){return x(this,null,function*(){try{let e=yield rA(this,{idToken:t}),i=yield yo._fromGetAccountInfoResponse(this,e,t);yield this.directlySetCurrentUser(i)}catch(e){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",e),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(t){return x(this,null,function*(){var e;if(Wn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(t&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(e=this.redirectUser)===null||e===void 0?void 0:e._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(t);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return it(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(t){return x(this,null,function*(){let e=null;try{e=yield this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{yield this._setRedirectUser(null)}return e})}reloadAndSetCurrentUserOrClear(t){return x(this,null,function*(){try{yield yd(t)}catch(e){if(e?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)})}useDeviceLanguage(){this.languageCode=WL()}_delete(){return x(this,null,function*(){this._deleted=!0})}updateCurrentUser(t){return x(this,null,function*(){if(Wn(this.app))return Promise.reject(os(this));let e=t?le(t):null;return e&&it(e.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(e&&e._clone(this))})}_updateCurrentUser(t,e=!1){return x(this,null,function*(){if(!this._deleted)return t&&it(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),e||(yield this.beforeStateQueue.runMiddleware(t)),this.queue(()=>x(this,null,function*(){yield this.directlySetCurrentUser(t),this.notifyAuthListeners()}))})}signOut(){return x(this,null,function*(){return Wn(this.app)?Promise.reject(os(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(t){return Wn(this.app)?Promise.reject(os(this)):this.queue(()=>x(this,null,function*(){yield this.assertedPersistence.setPersistence(Si(t))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(t){return x(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let e=this._getPasswordPolicyInternal();return e.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):e.validatePassword(t)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return x(this,null,function*(){let t=yield iV(this),e=new k_(t);this.tenantId===null?this._projectPasswordPolicy=e:this._tenantPasswordPolicies[this.tenantId]=e})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new un("auth","Firebase",t())}onAuthStateChanged(t,e,i){return this.registerStateListener(this.authStateSubscription,t,e,i)}beforeAuthStateChanged(t,e){return this.beforeStateQueue.pushCallback(t,e)}onIdTokenChanged(t,e,i){return this.registerStateListener(this.idTokenSubscription,t,e,i)}authStateReady(){return new Promise((t,e)=>{if(this.currentUser)t();else{let i=this.onAuthStateChanged(()=>{i(),t()},e)}})}revokeAccessToken(t){return x(this,null,function*(){if(this.currentUser){let e=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:e};this.tenantId!=null&&(i.tenantId=this.tenantId),yield JL(this,i)}})}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}_setRedirectUser(t,e){return x(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(e);return t===null?i.removeCurrentUser():i.setCurrentUser(t)})}getOrInitRedirectPersistenceManager(t){return x(this,null,function*(){if(!this.redirectPersistenceManager){let e=t&&Si(t)||this._popupRedirectResolver;it(e,this,"argument-error"),this.redirectPersistenceManager=yield vd.create(this,[Si(e._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(t){return x(this,null,function*(){var e,i;return this._isInitialized&&(yield this.queue(()=>x(this,null,function*(){}))),((e=this._currentUser)===null||e===void 0?void 0:e._redirectEventId)===t?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===t?this.redirectUser:null})}_persistUserIfCurrent(t){return x(this,null,function*(){if(t===this.currentUser)return this.queue(()=>x(this,null,function*(){return this.directlySetCurrentUser(t)}))})}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,e;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(e=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&e!==void 0?e:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,e,i,r){if(this._deleted)return()=>{};let s=typeof e=="function"?e:e.next.bind(e),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(it(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof e=="function"){let c=t.addObserver(e,i,r);return()=>{o=!0,c()}}else{let c=t.addObserver(e);return()=>{o=!0,c()}}}directlySetCurrentUser(t){return x(this,null,function*(){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?yield this.assertedPersistence.setCurrentUser(t):yield this.assertedPersistence.removeCurrentUser()})}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return it(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=pA(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return x(this,null,function*(){var t;let e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader();i&&(e["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e})}_getAppCheckToken(){return x(this,null,function*(){var t;let e=yield(t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken();return e?.error&&jL(`Error while retrieving App Check token: ${e.error}`),e?.token})}};function Rd(n){return le(n)}var wd=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=cE(e=>this.observer=e)}get next(){return it(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var H_={loadJS(){return x(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sV(n){H_=n}function oV(n){return H_.loadJS(n)}function aV(){return H_.gapiScript}function gA(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function bA(n,t){let e=Mn(n,"auth");if(e.isInitialized()){let r=e.getImmediate(),s=e.getOptions();if(vi(s,t??{}))return r;ei(r,"already-initialized")}return e.initialize({options:t})}function cV(n,t){let e=t?.persistence||[],i=(Array.isArray(e)?e:[e]).map(Si);t?.errorMap&&n._updateErrorMap(t.errorMap),n._initializeWithPersistence(i,t?.popupRedirectResolver)}function _A(n,t,e){let i=Rd(n);it(i._canInitEmulator,i,"emulator-config-failed"),it(/^https?:\/\//.test(t),i,"invalid-emulator-scheme");let r=!!e?.disableWarnings,s=yA(t),{host:o,port:a}=lV(t),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||uV()}function yA(n){let t=n.indexOf(":");return t<0?"":n.substr(0,t+1)}function lV(n){let t=yA(n),e=/(\/\/)?([^?#/]+)/.exec(n.substr(t.length));if(!e)return{host:"",port:null};let i=e[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:qT(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:qT(o)}}}function qT(n){if(!n)return null;let t=Number(n);return isNaN(t)?null:t}function uV(){function n(){let t=document.createElement("p"),e=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",e.position="fixed",e.width="100%",e.backgroundColor="#ffffff",e.border=".1em solid #000000",e.color="#b50000",e.bottom="0px",e.left="0px",e.margin="0px",e.zIndex="10000",e.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Rc=class{constructor(t,e){this.providerId=t,this.signInMethod=e}toJSON(){return Ai("not implemented")}_getIdTokenResponse(t){return Ai("not implemented")}_linkToIdToken(t,e){return Ai("not implemented")}_getReauthenticationResolver(t){return Ai("not implemented")}};function _o(n,t){return x(this,null,function*(){return GL(n,"POST","/v1/accounts:signInWithIdp",q_(n,t))})}var dV="http://localhost",Id=class n extends Rc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){let e=new n(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(e.idToken=t.idToken),t.accessToken&&(e.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(e.nonce=t.nonce),t.pendingToken&&(e.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(e.accessToken=t.oauthToken,e.secret=t.oauthTokenSecret):ei("argument-error"),e}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){let e=typeof t=="string"?JSON.parse(t):t,{providerId:i,signInMethod:r}=e,s=Cl(e,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){let e=this.buildRequest();return _o(t,e)}_linkToIdToken(t,e){let i=this.buildRequest();return i.idToken=e,_o(t,i)}_getReauthenticationResolver(t){let e=this.buildRequest();return e.autoCreate=!1,_o(t,e)}buildRequest(){let t={requestUri:dV,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{let e={};this.idToken&&(e.id_token=this.idToken),this.accessToken&&(e.access_token=this.accessToken),this.secret&&(e.oauth_token_secret=this.secret),e.providerId=this.providerId,this.nonce&&!this.pendingToken&&(e.nonce=this.nonce),t.postBody=Hs(e)}return t}};var kc=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};var Ed=class extends kc{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};var G_=(()=>{class n extends Ed{constructor(){super("google.com"),this.addScope("profile")}static credential(e,i){return Id._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:i})}static credentialFromResult(e){return n.credentialFromTaggedObject(e)}static credentialFromError(e){return n.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;let{oauthIdToken:i,oauthAccessToken:r}=e;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Pc=class n{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static _fromIdTokenResponse(t,e,i,r=!1){return x(this,null,function*(){let s=yield yo._fromIdTokenResponse(t,i,r),o=WT(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:e})})}static _forOperation(t,e,i){return x(this,null,function*(){yield t._updateTokensIfNecessary(i,!0);let r=WT(i);return new n({user:t,providerId:r,_tokenResponse:i,operationType:e})})}};function WT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var M_=class n extends Ae{constructor(t,e,i,r){var s;super(e.code,e.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:e.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(t,e,i,r){return new n(t,e,i,r)}};function vA(n,t,e,i){return(t==="reauthenticate"?e._getReauthenticationResolver(n):e._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?M_._fromErrorAndOperation(n,s,t,i):s})}function hV(n,t,e=!1){return x(this,null,function*(){let i=yield Cc(n,t._linkToIdToken(n.auth,yield n.getIdToken()),e);return Pc._forOperation(n,"link",i)})}function fV(n,t,e=!1){return x(this,null,function*(){let{auth:i}=n;if(Wn(i.app))return Promise.reject(os(i));let r="reauthenticate";try{let s=yield Cc(n,vA(i,r,t,n),e);it(s.idToken,i,"internal-error");let o=W_(s.idToken);it(o,i,"internal-error");let{sub:a}=o;return it(n.uid===a,i,"user-mismatch"),Pc._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&ei(i,"user-mismatch"),s}})}function mV(n,t,e=!1){return x(this,null,function*(){if(Wn(n.app))return Promise.reject(os(n));let i="signIn",r=yield vA(n,i,t),s=yield Pc._fromIdTokenResponse(n,i,r);return e||(yield n._updateCurrentUser(s.user)),s})}function wA(n,t,e,i){return le(n).onIdTokenChanged(t,e,i)}function IA(n,t,e){return le(n).beforeAuthStateChanged(t,e)}function K_(n){return le(n).signOut()}var xd="__sak";var Td=class{constructor(t,e){this.storageRetriever=t,this.type=e}_isAvailable(){try{return this.storage?(this.storage.setItem(xd,"1"),this.storage.removeItem(xd),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,e){return this.storage.setItem(t,JSON.stringify(e)),Promise.resolve()}_get(t){let e=this.storage.getItem(t);return Promise.resolve(e?JSON.parse(e):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};function pV(){let n=be();return $_(n)||Dd(n)}var gV=1e3,bV=10,_V=(()=>{class n extends Td{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,i)=>this.onStorageEvent(e,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=pV()&&nV(),this.fallbackToPolling=mA(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&e(i,s,r)}}onStorageEvent(e,i=!1){if(!e.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=e.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(e.newValue!==a)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);eV()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,bV):s()}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:i,newValue:r}),!0)})},gV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(e,i){return x(this,null,function*(){yield zi(n.prototype,this,"_set").call(this,e,i),this.localCache[e]=JSON.stringify(i)})}_get(e){return x(this,null,function*(){let i=yield zi(n.prototype,this,"_get").call(this,e);return this.localCache[e]=JSON.stringify(i),i})}_remove(e){return x(this,null,function*(){yield zi(n.prototype,this,"_remove").call(this,e),delete this.localCache[e]})}}return n.type="LOCAL",n})(),EA=_V;var yV=(()=>{class n extends Td{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,i){}_removeListener(e,i){}}return n.type="SESSION",n})(),Y_=yV;function vV(n){return Promise.all(n.map(t=>x(this,null,function*(){try{return{fulfilled:!0,value:yield t}}catch(e){return{fulfilled:!1,reason:e}}})))}var wV=(()=>{class n{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){let i=this.receivers.find(s=>s.isListeningto(e));if(i)return i;let r=new n(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}handleEvent(e){return x(this,null,function*(){let i=e,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(d=>x(this,null,function*(){return d(i.origin,o)})),l=yield vV(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(e,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(i)}_unsubscribe(e,i){this.handlersMap[e]&&i&&this.handlersMap[e].delete(i),(!i||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function Q_(n="",t=10){let e="";for(let i=0;i<t;i++)e+=Math.floor(Math.random()*10);return n+e}var O_=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}_send(t,e,i=50){return x(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=Q_("",20);r.port1.start();let d=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(h){let m=h;if(m.data.eventId===l)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:e},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function ti(){return window}function IV(n){ti().location.href=n}function xA(){return typeof ti().WorkerGlobalScope<"u"&&typeof ti().importScripts=="function"}function EV(){return x(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function xV(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function TV(){return xA()?self:null}var TA="firebaseLocalStorageDb",AV=1,Ad="firebaseLocalStorage",AA="fbase_key",cs=class{constructor(t){this.request=t}toPromise(){return new Promise((t,e)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{e(this.request.error)})})}};function kd(n,t){return n.transaction([Ad],t?"readwrite":"readonly").objectStore(Ad)}function SV(){let n=indexedDB.deleteDatabase(TA);return new cs(n).toPromise()}function N_(){let n=indexedDB.open(TA,AV);return new Promise((t,e)=>{n.addEventListener("error",()=>{e(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Ad,{keyPath:AA})}catch(r){e(r)}}),n.addEventListener("success",()=>x(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Ad)?t(i):(i.close(),yield SV(),t(yield N_()))}))})}function $T(n,t,e){return x(this,null,function*(){let i=kd(n,!0).put({[AA]:t,value:e});return new cs(i).toPromise()})}function CV(n,t){return x(this,null,function*(){let e=kd(n,!1).get(t),i=yield new cs(e).toPromise();return i===void 0?null:i.value})}function HT(n,t){let e=kd(n,!0).delete(t);return new cs(e).toPromise()}var DV=800,RV=3,kV=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return x(this,null,function*(){return this.db?this.db:(this.db=yield N_(),this.db)})}_withRetries(e){return x(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield e(r)}catch(r){if(i++>RV)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return x(this,null,function*(){return xA()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return x(this,null,function*(){this.receiver=wV._getInstance(TV()),this.receiver._subscribe("keyChanged",(e,i)=>x(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(e,i)=>x(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return x(this,null,function*(){var e,i;if(this.activeServiceWorker=yield EV(),!this.activeServiceWorker)return;this.sender=new O_(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(e){return x(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||xV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return x(this,null,function*(){try{if(!indexedDB)return!1;let e=yield N_();return yield $T(e,xd,"1"),yield HT(e,xd),!0}catch{}return!1})}_withPendingWrite(e){return x(this,null,function*(){this.pendingWrites++;try{yield e()}finally{this.pendingWrites--}})}_set(e,i){return x(this,null,function*(){return this._withPendingWrite(()=>x(this,null,function*(){return yield this._withRetries(r=>$T(r,e,i)),this.localCache[e]=i,this.notifyServiceWorker(e)}))})}_get(e){return x(this,null,function*(){let i=yield this._withRetries(r=>CV(r,e));return this.localCache[e]=i,i})}_remove(e){return x(this,null,function*(){return this._withPendingWrite(()=>x(this,null,function*(){return yield this._withRetries(i=>HT(i,e)),delete this.localCache[e],this.notifyServiceWorker(e)}))})}_poll(){return x(this,null,function*(){let e=yield this._withRetries(s=>{let o=kd(s,!1).getAll();return new cs(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(e.length!==0)for(let{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(e,i){this.localCache[e]=i;let r=this.listeners[e];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>x(this,null,function*(){return this._poll()}),DV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(i)}_removeListener(e,i){this.listeners[e]&&(this.listeners[e].delete(i),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),SA=kV;var r9=gA("rcb"),s9=new as(3e4,6e4);function CA(n,t){return t?Si(t):(it(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Mc=class extends Rc{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return _o(t,this._buildIdpRequest())}_linkToIdToken(t,e){return _o(t,this._buildIdpRequest(e))}_getReauthenticationResolver(t){return _o(t,this._buildIdpRequest())}_buildIdpRequest(t){let e={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(e.idToken=t),e}};function PV(n){return mV(n.auth,new Mc(n),n.bypassAuthState)}function MV(n){let{auth:t,user:e}=n;return it(e,t,"internal-error"),fV(e,new Mc(n),n.bypassAuthState)}function OV(n){return x(this,null,function*(){let{auth:t,user:e}=n;return it(e,t,"internal-error"),hV(e,new Mc(n),n.bypassAuthState)})}var Sd=class{constructor(t,e,i,r,s=!1){this.auth=t,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(e)?e:[e]}execute(){return new Promise((t,e)=>x(this,null,function*(){this.pendingPromise={resolve:t,reject:e};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(t){return x(this,null,function*(){let{urlResponse:e,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:e,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return PV;case"linkViaPopup":case"linkViaRedirect":return OV;case"reauthViaPopup":case"reauthViaRedirect":return MV;default:ei(this.auth,"internal-error")}}resolve(t){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Ci(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var NV=new as(2e3,1e4);function X_(n,t,e){return x(this,null,function*(){if(Wn(n.app))return Promise.reject(Fn(n,"operation-not-supported-in-this-environment"));let i=Rd(n);BL(n,t,kc);let r=CA(i,e);return new FV(i,"signInViaPopup",t,r).executeNotNull()})}var FV=(()=>{class n extends Sd{constructor(e,i,r,s,o){super(e,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return x(this,null,function*(){let e=yield this.execute();return it(e,this.auth,"internal-error"),e})}onExecution(){return x(this,null,function*(){Ci(this.filter.length===1,"Popup operations only handle one event");let e=Q_();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let e=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,NV.get())};e()}}n.currentPopupAction=null;return n})(),LV="pendingRedirect",pd=new Map,F_=class n extends Sd{constructor(t,e,i=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],e,void 0,i),this.eventId=null}execute(){return x(this,null,function*(){let t=pd.get(this.auth._key());if(!t){try{let i=(yield VV(this.resolver,this.auth))?yield zi(n.prototype,this,"execute").call(this):null;t=()=>Promise.resolve(i)}catch(e){t=()=>Promise.reject(e)}pd.set(this.auth._key(),t)}return this.bypassAuthState||pd.set(this.auth._key(),()=>Promise.resolve(null)),t()})}onAuthEvent(t){return x(this,null,function*(){if(t.type==="signInViaRedirect")return zi(n.prototype,this,"onAuthEvent").call(this,t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){let e=yield this.auth._redirectUserForId(t.eventId);if(e)return this.user=e,zi(n.prototype,this,"onAuthEvent").call(this,t);this.resolve(null)}})}onExecution(){return x(this,null,function*(){})}cleanUp(){}};function VV(n,t){return x(this,null,function*(){let e=BV(t),i=jV(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(e))==="true";return yield i._remove(e),r})}function UV(n,t){pd.set(n._key(),t)}function jV(n){return Si(n._redirectPersistence)}function BV(n){return md(LV,n.config.apiKey,n.name)}function zV(n,t,e=!1){return x(this,null,function*(){if(Wn(n.app))return Promise.reject(os(n));let i=Rd(n),r=CA(i,t),o=yield new F_(i,r,e).execute();return o&&!e&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,t)),o})}var qV=10*60*1e3,L_=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let e=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(t,i)&&(e=!0,this.sendToConsumer(t,i),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!WV(t)||(this.hasHandledPotentialRedirect=!0,e||(this.queuedRedirectEvent=t,e=!0)),e}sendToConsumer(t,e){var i;if(t.error&&!DA(t)){let r=((i=t.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";e.onError(Fn(this.auth,r))}else e.onAuthEvent(t)}isEventForConsumer(t,e){let i=e.eventId===null||!!t.eventId&&t.eventId===e.eventId;return e.filter.includes(t.type)&&i}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=qV&&this.cachedEventUids.clear(),this.cachedEventUids.has(GT(t))}saveEventToCache(t){this.cachedEventUids.add(GT(t)),this.lastProcessedEventTime=Date.now()}};function GT(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(t=>t).join("-")}function DA({type:n,error:t}){return n==="unknown"&&t?.code==="auth/no-auth-event"}function WV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return DA(n);default:return!1}}function $V(e){return x(this,arguments,function*(n,t={}){return vo(n,"GET","/v1/projects",t)})}var HV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,GV=/^https?/;function KV(n){return x(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:t}=yield $V(n);for(let e of t)try{if(YV(e))return}catch{}ei(n,"unauthorized-domain")})}function YV(n){let t=A_(),{protocol:e,hostname:i}=new URL(t);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?e==="chrome-extension:"&&n.replace("chrome-extension://","")===t.replace("chrome-extension://",""):e==="chrome-extension:"&&o.hostname===i}if(!GV.test(e))return!1;if(HV.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var QV=new as(3e4,6e4);function KT(){let n=ti().___jsl;if(n?.H){for(let t of Object.keys(n.H))if(n.H[t].r=n.H[t].r||[],n.H[t].L=n.H[t].L||[],n.H[t].r=[...n.H[t].L],n.CP)for(let e=0;e<n.CP.length;e++)n.CP[e]=null}}function XV(n){return new Promise((t,e)=>{var i,r,s;function o(){KT(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{KT(),e(Fn(n,"network-request-failed"))},timeout:QV.get()})}if(!((r=(i=ti().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)t(gapi.iframes.getContext());else if(!((s=ti().gapi)===null||s===void 0)&&s.load)o();else{let a=gA("iframefcb");return ti()[a]=()=>{gapi.load?o():e(Fn(n,"network-request-failed"))},oV(`${aV()}?onload=${a}`).catch(c=>e(c))}}).catch(t=>{throw gd=null,t})}var gd=null;function JV(n){return gd=gd||XV(n),gd}var ZV=new as(5e3,15e3),t2="__/auth/iframe",e2="emulator/auth/iframe",n2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},i2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function r2(n){let t=n.config;it(t.authDomain,n,"auth-domain-config-required");let e=t.emulator?z_(t,e2):`https://${n.config.authDomain}/${t2}`,i={apiKey:t.apiKey,appName:n.name,v:er},r=i2.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${e}?${Hs(i).slice(1)}`}function s2(n){return x(this,null,function*(){let t=yield JV(n),e=ti().gapi;return it(e,n,"internal-error"),t.open({where:document.body,url:r2(n),messageHandlersFilter:e.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:n2,dontclear:!0},i=>new Promise((r,s)=>x(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Fn(n,"network-request-failed"),a=ti().setTimeout(()=>{s(o)},ZV.get());function c(){ti().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var o2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},a2=500,c2=600,l2="_blank",u2="http://localhost",Cd=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function d2(n,t,e,i=a2,r=c2){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},o2),{width:i.toString(),height:r.toString(),top:s,left:o}),l=be().toLowerCase();e&&(a=lA(l)?l2:e),cA(l)&&(t=t||u2,c.scrollbars="yes");let d=Object.entries(c).reduce((m,[g,y])=>`${m}${g}=${y},`,"");if(tV(l)&&a!=="_self")return h2(t||"",a),new Cd(null);let h=window.open(t||"",a,d);it(h,n,"popup-blocked");try{h.focus()}catch{}return new Cd(h)}function h2(n,t){let e=document.createElement("a");e.href=n,e.target=t;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),e.dispatchEvent(i)}var f2="__/auth/handler",m2="emulator/auth/handler",p2=encodeURIComponent("fac");function YT(n,t,e,i,r,s){return x(this,null,function*(){it(n.config.authDomain,n,"auth-domain-config-required"),it(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:e,redirectUrl:i,v:er,eventId:r};if(t instanceof kc){t.setDefaultLanguage(n.languageCode),o.providerId=t.providerId||"",aE(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(let[d,h]of Object.entries(s||{}))o[d]=h}if(t instanceof Ed){let d=t.getScopes().filter(h=>h!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let d of Object.keys(a))a[d]===void 0&&delete a[d];let c=yield n._getAppCheckToken(),l=c?`#${p2}=${encodeURIComponent(c)}`:"";return`${g2(n)}?${Hs(a).slice(1)}${l}`})}function g2({config:n}){return n.emulator?z_(n,m2):`https://${n.authDomain}/${f2}`}var T_="webStorageSupport",V_=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Y_,this._completeRedirectFn=zV,this._overrideRedirectResult=UV}_openPopup(t,e,i,r){return x(this,null,function*(){var s;Ci((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield YT(t,e,i,A_(),r);return d2(t,o,Q_())})}_openRedirect(t,e,i,r){return x(this,null,function*(){yield this._originValidation(t);let s=yield YT(t,e,i,A_(),r);return IV(s),new Promise(()=>{})})}_initialize(t){let e=t._key();if(this.eventManagers[e]){let{manager:r,promise:s}=this.eventManagers[e];return r?Promise.resolve(r):(Ci(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(t);return this.eventManagers[e]={promise:i},i.catch(()=>{delete this.eventManagers[e]}),i}initAndGetManager(t){return x(this,null,function*(){let e=yield s2(t),i=new L_(t);return e.register("authEvent",r=>(it(r?.authEvent,t,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:i},this.iframes[t._key()]=e,i})}_isIframeWebStorageSupported(t,e){this.iframes[t._key()].send(T_,{type:T_},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[T_];o!==void 0&&e(!!o),ei(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){let e=t._key();return this.originValidationPromises[e]||(this.originValidationPromises[e]=KV(t)),this.originValidationPromises[e]}get _shouldInitProactively(){return mA()||$_()||Dd()}},RA=V_;var QT="@firebase/auth",XT="1.7.6";var U_=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}getToken(t){return x(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(t)}:null})}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;let e=this.auth.onIdTokenChanged(i=>{t(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(t,e),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();let e=this.internalListeners.get(t);e&&(this.internalListeners.delete(t),e(),this.updateProactiveRefresh())}assertAuthConfigured(){it(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function b2(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function _2(n){Ke(new ve("auth",(t,{options:e})=>{let i=t.getProvider("app").getImmediate(),r=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;it(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:pA(n)},l=new P_(i,r,s,c);return cV(l,e),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,e,i)=>{t.getProvider("auth-internal").initialize()})),Ke(new ve("auth-internal",t=>{let e=Rd(t.getProvider("auth").getImmediate());return(i=>new U_(i))(e)},"PRIVATE").setInstantiationMode("EXPLICIT")),Se(QT,XT,b2(n)),Se(QT,XT,"esm2017")}var y2=5*60,v2=Mp("authIdTokenMaxAge")||y2,JT=null,w2=n=>t=>x(void 0,null,function*(){let e=t&&(yield t.getIdTokenResult()),i=e&&(new Date().getTime()-Date.parse(e.issuedAtTime))/1e3;if(i&&i>v2)return;let r=e?.token;JT!==r&&(JT=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function J_(n=qr()){let t=Mn(n,"auth");if(t.isInitialized())return t.getImmediate();let e=bA(n,{popupRedirectResolver:RA,persistence:[SA,EA,Y_]}),i=Mp("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=w2(s.toString());IA(e,o,()=>o(e.currentUser)),wA(e,a=>o(a))}}let r=kp("auth");return r&&_A(e,`http://${r}`),e}function I2(){var n,t;return(t=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&t!==void 0?t:document}sV({loadJS(n){return new Promise((t,e)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=t,i.onerror=r=>{let s=Fn("internal-error");s.customData=r,e(s)},i.type="text/javascript",i.charset="UTF-8",I2().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});_2("Browser");var E2={apiKey:"AIzaSyBuS1gDyDbKr5is5s-hytKtVzEj6C8yFEo",authDomain:"r210-840cd.firebaseapp.com",databaseURL:"https://r210-840cd-default-rtdb.firebaseio.com",projectId:"r210-840cd",storageBucket:"r210-840cd.appspot.com",messagingSenderId:"707797710533",appId:"1:707797710533:web:0e4158a28a89476e40e2ac",measurementId:"G-6HDH51CCC0"},PA=Yp(E2),M6=JE(PA),Pd=CT(PA),x2=new G_,Z_=J_(),kA="LaserPower",wo="LaserPowerPermission";Z_.languageCode="it";var Qe=(()=>{let t=class t{constructor(){this._user=null,this._loginInfo={user:null,permissions:null},this.is_loading=!1,this.FireBaseKeyName=kA,console.log("new FirebaseAccessService")}get_db(){return Pd}get_user(){return this._user}get_loginInfo(){return this._loginInfo}set_loginInfo(i){this._loginInfo=i}getNewPermission(){return{email:"",desc:"",isAdministrator:1}}getNewPowerData(){return{id:null,basepower:null,workpower:null,workStructure:null,beamExpander:null,lens:null,slit:null,doe:null,wavePlate:null,lambda:null,atDate:null,brandKey:"",brandvalue0_Laser:null,brandvalue1_rate:null,brandvalue2_atten:null,email:null,displayname:null}}addData(i){return x(this,null,function*(){try{let r=yield I_(wn(Pd,kA),{basepower:i.basepower,workpower:i.workpower,workStructure:i.workStructure,beamExpander:i.beamExpander,lens:i.lens,slit:i.slit,doe:i.doe,wavePlate:i.wavePlate,lambda:i.lambda,atDate:i.atDate,brandKey:i.brandKey,brandvalue0_Laser:i.brandvalue0_Laser,brandvalue1_rate:i.brandvalue1_rate,brandvalue2_atten:i.brandvalue2_atten,email:i.email,displayname:i.displayname});console.log("Document written with ID: ",r.id)}catch(r){console.error("Error adding document: ",r)}})}auth(){return x(this,null,function*(){return X_(Z_,x2)})}signOut(){return x(this,null,function*(){console.log("signOut"),yield K_(Z_),console.log("done")})}setPermission(i){return x(this,null,function*(){this.is_loading=!0;try{let r=yield I_(wn(Pd,wo),{email:i.email,desc:i.desc,isAdministrator:i.isAdministrator})}catch{}finally{this.is_loading=!1}})}getPermission(i){return x(this,null,function*(){let r=Jn(wn(Pd,wo),Ie("email","==",i)),s=yield Zn(r),o=null;return s.forEach(a=>{o={email:a.data().email,desc:a.data().desc,isAdministrator:a.data().isAdministrator}}),this._loginInfo.permissions=o,o})}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function T2(n,t){n&1&&(O(0,"mat-icon"),B(1,"person"),N())}function A2(n,t){if(n&1&&yt(0,"img",3),n&2){let e=te();tw("src",e.gUser==null||e.gUser.user==null||e.gUser.user.user==null?null:e.gUser.user.user.photoURL,H0)}}function S2(n,t){n&1&&(O(0,"a"),B(1,"\u767B\u5165"),N())}function C2(n,t){n&1&&(O(0,"a"),B(1,"\u767B\u51FA"),N())}function D2(n,t){n&1&&yt(0,"a")}var MA=(()=>{let t=class t{constructor(i){this.permission_reg=null,this.gUser=null,this.photourl="",this.fire=i}login(){this.gUser==null?(this.fire.is_loading=!0,this.fire.auth().then(i=>{console.log(i.user.uid),this.gUser={user:i,permissions:null},this.fire.getPermission(this.gUser?.user?.user.email??"").then(r=>{console.log(r),this.gUser!=null&&r!=null?(this.gUser.permissions=r,this.fire.set_loginInfo(this.gUser),console.log("getPermission success")):(console.log("getPermission failed"),this.permission_reg={email:this.gUser?.user?.user.email??"",desc:this.gUser?.user?.user?.displayName??"",isAdministrator:0},this.gUser?.permissions==null,this.fire.set_loginInfo(this.gUser??{user:null,permissions:null}))}).finally(()=>{this.fire.is_loading=!1})}).catch(i=>{this.fire.is_loading=!1})):this.fire.signOut().then(()=>{this.gUser=null,this.fire.set_loginInfo({user:null,permissions:null})}).catch(i=>{console.log(i),alert("\u767B\u51FA\u5931\u6557"+i)})}isNotEmpty(){return this.gUser!=null}onSubmit(){console.log(this.permission_reg)}};t.\u0275fac=function(r){return new(r||t)(Q(Qe))},t.\u0275cmp=Jt({type:t,selectors:[["app-login"]],standalone:!0,features:[ee],decls:9,vars:6,consts:[["mat-fab","","extended","",3,"click"],[4,"ngIf"],["class","avatar","alt","login/logout",3,"src",4,"ngIf"],["alt","login/logout",1,"avatar",3,"src"]],template:function(r,s){r&1&&(O(0,"div")(1,"button",0),Ot("click",function(){return s.login()}),Ct(2,T2,2,0,"mat-icon",1),O(3,"div"),Ct(4,A2,1,1,"img",2),B(5),Ct(6,S2,2,0,"a",1)(7,C2,2,0,"a",1),N()()(),Ct(8,D2,1,0,"a",1)),r&2&&(j(2),H("ngIf",!s.isNotEmpty()),j(2),H("ngIf",s.isNotEmpty()),j(),Fe(" ",s.gUser==null||s.gUser.user==null||s.gUser.user.user==null?null:s.gUser.user.user.displayName," "),j(),H("ngIf",!s.isNotEmpty()),j(),H("ngIf",s.isNotEmpty()),j(),H("ngIf",s.permission_reg!=null&&(s.gUser==null?null:s.gUser.permissions)==null))},dependencies:[QI,YI,KI,on,Ki,$I,WI],styles:[".avatar[_ngcontent-%COMP%]{width:30px;height:30px;margin:10px;border-radius:50%;object-fit:cover}"]});let n=t;return n})();var qA=(()=>{let t=class t{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};t.\u0275fac=function(r){return new(r||t)(Q(Mr),Q(ye))},t.\u0275dir=Vt({type:t});let n=t;return n})(),Lc=(()=>{let t=class t extends qA{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275dir=Vt({type:t,features:[He]});let n=t;return n})(),Ao=new Tt("");var R2={provide:Ao,useExisting:pi(()=>cr),multi:!0};function k2(){let n=Ps()?Ps().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var P2=new Tt(""),cr=(()=>{let t=class t extends qA{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!k2())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};t.\u0275fac=function(r){return new(r||t)(Q(Mr),Q(ye),Q(P2,8))},t.\u0275dir=Vt({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&Ot("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[sn([R2]),He]});let n=t;return n})();function M2(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var ey=new Tt(""),WA=new Tt("");function O2(n){return M2(n.value)?{required:!0}:null}function OA(n){return null}function $A(n){return n!=null}function HA(n){return Ul(n)?$e(n):n}function GA(n){let t={};return n.forEach(e=>{t=e!=null?$($({},t),e):t}),Object.keys(t).length===0?null:t}function KA(n,t){return t.map(e=>e(n))}function N2(n){return!n.validate}function YA(n){return n.map(t=>N2(t)?t:e=>t.validate(e))}function F2(n){if(!n)return null;let t=n.filter($A);return t.length==0?null:function(e){return GA(KA(e,t))}}function ny(n){return n!=null?F2(YA(n)):null}function L2(n){if(!n)return null;let t=n.filter($A);return t.length==0?null:function(e){let i=KA(e,t).map(HA);return Rl(i).pipe(ot(GA))}}function iy(n){return n!=null?L2(YA(n)):null}function NA(n,t){return n===null?[t]:Array.isArray(n)?[...n,t]:[n,t]}function V2(n){return n._rawValidators}function U2(n){return n._rawAsyncValidators}function ty(n){return n?Array.isArray(n)?n:[n]:[]}function Nd(n,t){return Array.isArray(n)?n.includes(t):n===t}function FA(n,t){let e=ty(t);return ty(n).forEach(r=>{Nd(e,r)||e.push(r)}),e}function LA(n,t){return ty(t).filter(e=>!Nd(n,e))}var Fd=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=ny(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=iy(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},xo=class extends Fd{get formDirective(){return null}get path(){return null}},To=class extends Fd{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Ld=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},j2={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},eG=Rt($({},j2),{"[class.ng-submitted]":"isSubmitted"}),So=(()=>{let t=class t extends Ld{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(Q(To,2))},t.\u0275dir=Vt({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Rn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[He]});let n=t;return n})(),jd=(()=>{let t=class t extends Ld{constructor(i){super(i)}};t.\u0275fac=function(r){return new(r||t)(Q(xo,10))},t.\u0275dir=Vt({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Rn("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[He]});let n=t;return n})();var Oc="VALID",Od="INVALID",Eo="PENDING",Nc="DISABLED";function QA(n){return(Bd(n)?n.validators:n)||null}function B2(n){return Array.isArray(n)?ny(n):n||null}function XA(n,t){return(Bd(t)?t.asyncValidators:n)||null}function z2(n){return Array.isArray(n)?iy(n):n||null}function Bd(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function q2(n,t,e){let i=n.controls;if(!(t?Object.keys(i):i).length)throw new Mt(1e3,"");if(!i[e])throw new Mt(1001,"")}function W2(n,t,e){n._forEachChild((i,r)=>{if(e[r]===void 0)throw new Mt(1002,"")})}var Vd=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Oc}get invalid(){return this.status===Od}get pending(){return this.status==Eo}get disabled(){return this.status===Nc}get enabled(){return this.status!==Nc}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(FA(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(FA(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(LA(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(LA(t,this._rawAsyncValidators))}hasValidator(t){return Nd(this._rawValidators,t)}hasAsyncValidator(t){return Nd(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Eo,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Nc,this.errors=null,this._forEachChild(i=>{i.disable(Rt($({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Rt($({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Oc,this._forEachChild(i=>{i.enable(Rt($({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Rt($({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Oc||this.status===Eo)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Nc:Oc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Eo,this._hasOwnPendingAsyncValidator=!0;let e=HA(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((i,r)=>i&&i._find(r),this)}getError(t,e){let i=e?this.get(e):this;return i&&i.errors?i.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new bn,this.statusChanges=new bn}_calculateStatus(){return this._allControlsDisabled()?Nc:this.errors?Od:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Eo)?Eo:this._anyControlsHaveStatus(Od)?Od:Oc}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){Bd(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=B2(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=z2(this._rawAsyncValidators)}},Ud=class extends Vd{constructor(t,e,i){super(QA(e),XA(i,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,i={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,i={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){W2(this,!0,t),Object.keys(t).forEach(i=>{q2(this,!0,i),this.controls[i].setValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(i=>{let r=this.controls[i];r&&r.patchValue(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((i,r)=>{i.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,i)=>(t[i]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,i)=>i._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let i=this.controls[e];i&&t(i,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,i]of Object.entries(this.controls))if(this.contains(e)&&t(i))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,i,r)=>((i.enabled||this.disabled)&&(e[r]=i.value),e))}_reduceChildren(t,e){let i=t;return this._forEachChild((r,s)=>{i=e(i,r,s)}),i}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var zd=new Tt("CallSetDisabledState",{providedIn:"root",factory:()=>qd}),qd="always";function $2(n,t){return[...t.path,n]}function JA(n,t,e=qd){ZA(n,t),t.valueAccessor.writeValue(n.value),(n.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(n.disabled),G2(n,t),Y2(n,t),K2(n,t),H2(n,t)}function VA(n,t){n.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function H2(n,t){if(t.valueAccessor.setDisabledState){let e=i=>{t.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(e),t._registerOnDestroy(()=>{n._unregisterOnDisabledChange(e)})}}function ZA(n,t){let e=V2(n);t.validator!==null?n.setValidators(NA(e,t.validator)):typeof e=="function"&&n.setValidators([e]);let i=U2(n);t.asyncValidator!==null?n.setAsyncValidators(NA(i,t.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();VA(t._rawValidators,r),VA(t._rawAsyncValidators,r)}function G2(n,t){t.valueAccessor.registerOnChange(e=>{n._pendingValue=e,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&tS(n,t)})}function K2(n,t){t.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&tS(n,t),n.updateOn!=="submit"&&n.markAsTouched()})}function tS(n,t){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function Y2(n,t){let e=(i,r)=>{t.valueAccessor.writeValue(i),r&&t.viewToModelUpdate(i)};n.registerOnChange(e),t._registerOnDestroy(()=>{n._unregisterOnChange(e)})}function Q2(n,t){n==null,ZA(n,t)}function X2(n,t){if(!n.hasOwnProperty("model"))return!1;let e=n.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function J2(n){return Object.getPrototypeOf(n.constructor)===Lc}function Z2(n,t){n._syncPendingControls(),t.forEach(e=>{let i=e.control;i.updateOn==="submit"&&i._pendingChange&&(e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function tU(n,t){if(!t)return null;Array.isArray(t);let e,i,r;return t.forEach(s=>{s.constructor===cr?e=s:J2(s)?i=s:r=s}),r||i||e||null}var eU={provide:xo,useExisting:pi(()=>Vc)},Fc=Promise.resolve(),Vc=(()=>{let t=class t extends xo{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new bn,this.form=new Ud({},ny(i),iy(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){Fc.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),JA(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){Fc.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){Fc.then(()=>{let r=this._findContainer(i.path),s=new Ud({});Q2(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){Fc.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){Fc.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,Z2(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};t.\u0275fac=function(r){return new(r||t)(Q(ey,10),Q(WA,10),Q(zd,8))},t.\u0275dir=Vt({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&Ot("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[Wt.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[sn([eU]),He]});let n=t;return n})();function UA(n,t){let e=n.indexOf(t);e>-1&&n.splice(e,1)}function jA(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var nU=class extends Vd{constructor(t=null,e,i){super(QA(e),XA(i,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Bd(e)&&(e.nonNullable||e.initialValueIsDefault)&&(jA(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){UA(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){UA(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){jA(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var iU={provide:To,useExisting:pi(()=>ls)},BA=Promise.resolve(),ls=(()=>{let t=class t extends To{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new nU,this._registered=!1,this.name="",this.update=new bn,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=tU(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),X2(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){JA(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){BA.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&Ge(r);BA.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?$2(i,this._parent):[i]}};t.\u0275fac=function(r){return new(r||t)(Q(xo,9),Q(ey,10),Q(WA,10),Q(Ao,10),Q(ks,8),Q(zd,8))},t.\u0275dir=Vt({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Wt.None,"disabled","isDisabled"],model:[Wt.None,"ngModel","model"],options:[Wt.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sn([iU]),He,Ss]});let n=t;return n})(),Wd=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Vt({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=t;return n})(),rU={provide:Ao,useExisting:pi(()=>ry),multi:!0},ry=(()=>{let t=class t extends Lc{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275dir=Vt({type:t,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&Ot("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[sn([rU]),He]});let n=t;return n})(),sU={provide:Ao,useExisting:pi(()=>sy),multi:!0};var oU=(()=>{let t=class t{constructor(){this._accessors=[]}add(i,r){this._accessors.push([i,r])}remove(i){for(let r=this._accessors.length-1;r>=0;--r)if(this._accessors[r][1]===i){this._accessors.splice(r,1);return}}select(i){this._accessors.forEach(r=>{this._isSameGroup(r,i)&&r[1]!==i&&r[1].fireUncheck(i.value)})}_isSameGroup(i,r){return i[0].control?i[0]._parent===r._control._parent&&i[1].name===r.name:!1}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})(),sy=(()=>{let t=class t extends Lc{constructor(i,r,s,o){super(i,r),this._registry=s,this._injector=o,this.setDisabledStateFired=!1,this.onChange=()=>{},this.callSetDisabledState=J(zd,{optional:!0})??qd}ngOnInit(){this._control=this._injector.get(To),this._checkName(),this._registry.add(this._control,this)}ngOnDestroy(){this._registry.remove(this)}writeValue(i){this._state=i===this.value,this.setProperty("checked",this._state)}registerOnChange(i){this._fn=i,this.onChange=()=>{i(this.value),this._registry.select(this)}}setDisabledState(i){(this.setDisabledStateFired||i||this.callSetDisabledState==="whenDisabledForLegacyCode")&&this.setProperty("disabled",i),this.setDisabledStateFired=!0}fireUncheck(i){this.writeValue(i)}_checkName(){this.name&&this.formControlName&&(this.name,this.formControlName),!this.name&&this.formControlName&&(this.name=this.formControlName)}};t.\u0275fac=function(r){return new(r||t)(Q(Mr),Q(ye),Q(oU),Q(Ml))},t.\u0275dir=Vt({type:t,selectors:[["input","type","radio","formControlName",""],["input","type","radio","formControl",""],["input","type","radio","ngModel",""]],hostBindings:function(r,s){r&1&&Ot("change",function(){return s.onChange()})("blur",function(){return s.onTouched()})},inputs:{name:"name",formControlName:"formControlName",value:"value"},features:[sn([sU]),He]});let n=t;return n})();var aU={provide:Ao,useExisting:pi(()=>$d),multi:!0};function eS(n,t){return n==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function cU(n){return n.split(":")[0]}var $d=(()=>{let t=class t extends Lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=eS(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=cU(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275dir=Vt({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&Ot("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([aU]),He]});let n=t;return n})(),nS=(()=>{let t=class t{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(eS(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(r){return new(r||t)(Q(ye),Q(Mr),Q($d,9))},t.\u0275dir=Vt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=t;return n})(),lU={provide:Ao,useExisting:pi(()=>iS),multi:!0};function zA(n,t){return n==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${n}: ${t}`.slice(0,50))}function uU(n){return n.split(":")[0]}var iS=(()=>{let t=class t extends Lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],d=this._getOptionValue(l.value);s.push(d)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let d=this._getOptionValue(l.value);s.push(d)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=uU(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275dir=Vt({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&Ot("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[sn([lU]),He]});let n=t;return n})(),rS=(()=>{let t=class t{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(zA(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(zA(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};t.\u0275fac=function(r){return new(r||t)(Q(ye),Q(Mr),Q(iS,9))},t.\u0275dir=Vt({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=t;return n})();var dU=(()=>{let t=class t{constructor(){this._validator=OA}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):OA,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};t.\u0275fac=function(r){return new(r||t)},t.\u0275dir=Vt({type:t,features:[Ss]});let n=t;return n})();var hU={provide:ey,useExisting:pi(()=>oy),multi:!0};var oy=(()=>{let t=class t extends dU{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=Ge,this.createValidator=i=>O2}enabled(i){return i}};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=gi(t)))(s||t)}})(),t.\u0275dir=Vt({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&bi("required",s._enabled?"":null)},inputs:{required:"required"},features:[sn([hU]),He]});let n=t;return n})();var fU=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({});let n=t;return n})();var Co=(()=>{let t=class t{static withConfig(i){return{ngModule:t,providers:[{provide:zd,useValue:i.callSetDisabledState??qd}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=he({type:t}),t.\u0275inj=de({imports:[fU]});let n=t;return n})();function mU(n,t){n&1&&(O(0,"th",2),B(1,"\u5DE5\u4F5C\u7D50\u69CB"),N())}function pU(n,t){n&1&&(O(0,"th",2),B(1,"\u54C1\u724C"),N())}function gU(n,t){n&1&&(O(0,"th",2),B(1,"doe"),N())}function bU(n,t){n&1&&(O(0,"th",2),B(1,"\u93E1\u7D44"),N())}function _U(n,t){n&1&&(O(0,"th",2),B(1,"\u72F9\u7E2B"),N())}function yU(n,t){n&1&&(O(0,"th",2),B(1,"wave plate"),N())}function vU(n,t){n&1&&(O(0,"th",2),B(1,"\u8A18\u9304\u4EBA"),N())}function wU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.workStructure)}}function IU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.brandKey)}}function EU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.doe)}}function xU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.lens)}}function TU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.slit)}}function AU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.wavePlate)}}function SU(n,t){if(n&1&&(O(0,"td"),B(1),N()),n&2){let e=te().$implicit;j(),Ne(e.displayname)}}function CU(n,t){if(n&1&&(O(0,"tr")(1,"th",6),B(2),N(),O(3,"td"),B(4),N(),O(5,"td"),B(6),N(),O(7,"td"),B(8),N(),O(9,"td"),B(10),nw(11,"number"),N(),O(12,"td"),B(13),N(),Ct(14,wU,2,1,"td",7)(15,IU,2,1,"td",7)(16,EU,2,1,"td",7)(17,xU,2,1,"td",7)(18,TU,2,1,"td",7)(19,AU,2,1,"td",7)(20,SU,2,1,"td",7),N()),n&2){let e=t.$implicit,i=t.index,r=te();j(2),Ne(i),j(2),Ne(e.atDate),j(2),Ne(e.basepower),j(2),Ne(e.workpower),j(2),Fe(" ",iw(11,13,e.basepower*100/e.workpower,"1.2-2")," "),j(3),Ne(e.lambda),j(),H("ngIf",!r.isNarrow),j(),H("ngIf",!r.isNarrow),j(),H("ngIf",!r.isNarrow),j(),H("ngIf",!r.isNarrow),j(),H("ngIf",!r.isNarrow),j(),H("ngIf",!r.isNarrow),j(),H("ngIf",!r.isNarrow)}}var sS=1190,oS=(()=>{let t=class t{constructor(){this.source=[],this.isNarrow=!1}ngOnInit(){this.isNarrow=window.innerWidth<sS}onResize(i){this.isNarrow=i.target.innerWidth<sS}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Jt({type:t,selectors:[["app-result-table"]],hostBindings:function(r,s){r&1&&Ot("resize",function(a){return s.onResize(a)},!1,G0)},inputs:{source:"source"},standalone:!0,features:[ee],decls:25,vars:8,consts:[[1,"div-container"],[1,"table"],["scope","col"],["scope","col",4,"ngIf"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["scope","row"],[4,"ngIf"]],template:function(r,s){r&1&&(O(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),B(5,"\uFF03"),N(),O(6,"th",2),B(7,"\u65E5\u671F"),N(),O(8,"th",2),B(9,"[\u57FA]\u529F\u7387(W)"),N(),O(10,"th",2),B(11,"[\u5DE5]\u529F\u73872(W)"),N(),O(12,"th",2),B(13,"\u7A7F\u900F\u7387(%)"),N(),O(14,"th",2),B(15,"\u6CE2\u9577(nm)"),N(),Ct(16,mU,2,0,"th",3)(17,pU,2,0,"th",3)(18,gU,2,0,"th",3)(19,bU,2,0,"th",3)(20,_U,2,0,"th",3)(21,yU,2,0,"th",3)(22,vU,2,0,"th",3),N()(),O(23,"tbody",4),Ct(24,CU,21,16,"tr",5),N()()()),r&2&&(j(16),H("ngIf",!s.isNarrow),j(),H("ngIf",!s.isNarrow),j(),H("ngIf",!s.isNarrow),j(),H("ngIf",!s.isNarrow),j(),H("ngIf",!s.isNarrow),j(),H("ngIf",!s.isNarrow),j(),H("ngIf",!s.isNarrow),j(2),H("ngForOf",s.source))},dependencies:[on,Ms,Ki,fw],styles:[".div-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]});let n=t;return n})();function Bc(n){return n+.5|0}var lr=(n,t,e)=>Math.max(Math.min(n,e),t);function Uc(n){return lr(Bc(n*2.55),0,255)}function ur(n){return lr(Bc(n*255),0,255)}function Di(n){return lr(Bc(n/2.55)/100,0,1)}function aS(n){return lr(Bc(n*100),0,100)}var In={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ly=[..."0123456789ABCDEF"],DU=n=>ly[n&15],RU=n=>ly[(n&240)>>4]+ly[n&15],Hd=n=>(n&240)>>4===(n&15),kU=n=>Hd(n.r)&&Hd(n.g)&&Hd(n.b)&&Hd(n.a);function PU(n){var t=n.length,e;return n[0]==="#"&&(t===4||t===5?e={r:255&In[n[1]]*17,g:255&In[n[2]]*17,b:255&In[n[3]]*17,a:t===5?In[n[4]]*17:255}:(t===7||t===9)&&(e={r:In[n[1]]<<4|In[n[2]],g:In[n[3]]<<4|In[n[4]],b:In[n[5]]<<4|In[n[6]],a:t===9?In[n[7]]<<4|In[n[8]]:255})),e}var MU=(n,t)=>n<255?t(n):"";function OU(n){var t=kU(n)?DU:RU;return n?"#"+t(n.r)+t(n.g)+t(n.b)+MU(n.a,t):void 0}var NU=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function dS(n,t,e){let i=t*Math.min(e,1-e),r=(s,o=(s+n/30)%12)=>e-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function FU(n,t,e){let i=(r,s=(r+n/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function LU(n,t,e){let i=dS(n,1,.5),r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)i[r]*=1-t-e,i[r]+=t;return i}function VU(n,t,e,i,r){return n===r?(t-e)/i+(t<e?6:0):t===r?(e-n)/i+2:(n-t)/i+4}function uy(n){let e=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(e,i,r),o=Math.min(e,i,r),a=(s+o)/2,c,l,d;return s!==o&&(d=s-o,l=a>.5?d/(2-s-o):d/(s+o),c=VU(e,i,r,d,s),c=c*60+.5),[c|0,l||0,a]}function dy(n,t,e,i){return(Array.isArray(t)?n(t[0],t[1],t[2]):n(t,e,i)).map(ur)}function hy(n,t,e){return dy(dS,n,t,e)}function UU(n,t,e){return dy(LU,n,t,e)}function jU(n,t,e){return dy(FU,n,t,e)}function hS(n){return(n%360+360)%360}function BU(n){let t=NU.exec(n),e=255,i;if(!t)return;t[5]!==i&&(e=t[6]?Uc(+t[5]):ur(+t[5]));let r=hS(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?i=UU(r,s,o):t[1]==="hsv"?i=jU(r,s,o):i=hy(r,s,o),{r:i[0],g:i[1],b:i[2],a:e}}function zU(n,t){var e=uy(n);e[0]=hS(e[0]+t),e=hy(e),n.r=e[0],n.g=e[1],n.b=e[2]}function qU(n){if(!n)return;let t=uy(n),e=t[0],i=aS(t[1]),r=aS(t[2]);return n.a<255?`hsla(${e}, ${i}%, ${r}%, ${Di(n.a)})`:`hsl(${e}, ${i}%, ${r}%)`}var cS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function WU(){let n={},t=Object.keys(lS),e=Object.keys(cS),i,r,s,o,a;for(i=0;i<t.length;i++){for(o=a=t[i],r=0;r<e.length;r++)s=e[r],a=a.replace(s,cS[s]);s=parseInt(lS[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Gd;function $U(n){Gd||(Gd=WU(),Gd.transparent=[0,0,0,0]);let t=Gd[n.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var HU=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function GU(n){let t=HU.exec(n),e=255,i,r,s;if(t){if(t[7]!==i){let o=+t[7];e=t[8]?Uc(o):lr(o*255,0,255)}return i=+t[1],r=+t[3],s=+t[5],i=255&(t[2]?Uc(i):lr(i,0,255)),r=255&(t[4]?Uc(r):lr(r,0,255)),s=255&(t[6]?Uc(s):lr(s,0,255)),{r:i,g:r,b:s,a:e}}}function KU(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${Di(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var cy=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,Do=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function YU(n,t,e){let i=Do(Di(n.r)),r=Do(Di(n.g)),s=Do(Di(n.b));return{r:ur(cy(i+e*(Do(Di(t.r))-i))),g:ur(cy(r+e*(Do(Di(t.g))-r))),b:ur(cy(s+e*(Do(Di(t.b))-s))),a:n.a+e*(t.a-n.a)}}function Kd(n,t,e){if(n){let i=uy(n);i[t]=Math.max(0,Math.min(i[t]+i[t]*e,t===0?360:1)),i=hy(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function fS(n,t){return n&&Object.assign(t||{},n)}function uS(n){var t={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(t={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(t.a=ur(n[3]))):(t=fS(n,{r:0,g:0,b:0,a:1}),t.a=ur(t.a)),t}function QU(n){return n.charAt(0)==="r"?GU(n):BU(n)}var jc=class n{constructor(t){if(t instanceof n)return t;let e=typeof t,i;e==="object"?i=uS(t):e==="string"&&(i=PU(t)||$U(t)||QU(t)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var t=fS(this._rgb);return t&&(t.a=Di(t.a)),t}set rgb(t){this._rgb=uS(t)}rgbString(){return this._valid?KU(this._rgb):void 0}hexString(){return this._valid?OU(this._rgb):void 0}hslString(){return this._valid?qU(this._rgb):void 0}mix(t,e){if(t){let i=this.rgb,r=t.rgb,s,o=e===s?.5:e,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(t,e){return t&&(this._rgb=YU(this._rgb,t._rgb,e)),this}clone(){return new n(this.rgb)}alpha(t){return this._rgb.a=ur(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=Bc(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Kd(this._rgb,2,t),this}darken(t){return Kd(this._rgb,2,-t),this}saturate(t){return Kd(this._rgb,1,t),this}desaturate(t){return Kd(this._rgb,1,-t),this}rotate(t){return zU(this._rgb,t),this}};function ri(){}var xS=(()=>{let n=0;return()=>n++})();function bt(n){return n===null||typeof n>"u"}function Ut(n){if(Array.isArray&&Array.isArray(n))return!0;let t=Object.prototype.toString.call(n);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function dt(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Gt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Je(n,t){return Gt(n)?n:t}function st(n,t){return typeof n>"u"?t:n}var TS=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/t,gy=(n,t)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*t:+n;function Ft(n,t,e){if(n&&typeof n.call=="function")return n.apply(e,t)}function St(n,t,e,i){let r,s,o;if(Ut(n))if(s=n.length,i)for(r=s-1;r>=0;r--)t.call(e,n[r],r);else for(r=0;r<s;r++)t.call(e,n[r],r);else if(dt(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)t.call(e,n[o[r]],o[r])}function Wc(n,t){let e,i,r,s;if(!n||!t||n.length!==t.length)return!1;for(e=0,i=n.length;e<i;++e)if(r=n[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Jd(n){if(Ut(n))return n.map(Jd);if(dt(n)){let t=Object.create(null),e=Object.keys(n),i=e.length,r=0;for(;r<i;++r)t[e[r]]=Jd(n[e[r]]);return t}return n}function AS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function XU(n,t,e,i){if(!AS(n))return;let r=t[n],s=e[n];dt(r)&&dt(s)?ko(r,s,i):t[n]=Jd(s)}function ko(n,t,e){let i=Ut(t)?t:[t],r=i.length;if(!dt(n))return n;e=e||{};let s=e.merger||XU,o;for(let a=0;a<r;++a){if(o=i[a],!dt(o))continue;let c=Object.keys(o);for(let l=0,d=c.length;l<d;++l)s(c[l],n,o,e)}return n}function Mo(n,t){return ko(n,t,{merger:JU})}function JU(n,t,e){if(!AS(n))return;let i=t[n],r=e[n];dt(i)&&dt(r)?Mo(i,r):Object.prototype.hasOwnProperty.call(t,n)||(t[n]=Jd(r))}var mS={"":n=>n,x:n=>n.x,y:n=>n.y};function ZU(n){let t=n.split("."),e=[],i="";for(let r of t)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(e.push(i),i="");return e}function tj(n){let t=ZU(n);return e=>{for(let i of t){if(i==="")break;e=e&&e[i]}return e}}function Pi(n,t){return(mS[t]||(mS[t]=tj(t)))(n)}function nh(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Oo=n=>typeof n<"u",Ri=n=>typeof n=="function",by=(n,t)=>{if(n.size!==t.size)return!1;for(let e of n)if(!t.has(e))return!1;return!0};function SS(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var jt=Math.PI,Bt=2*jt,ej=Bt+jt,Zd=Number.POSITIVE_INFINITY,nj=jt/180,se=jt/2,us=jt/4,pS=jt*2/3,ki=Math.log10,Ln=Math.sign;function No(n,t,e){return Math.abs(n-t)<e}function _y(n){let t=Math.round(n);n=No(n,t,n/1e3)?t:n;let e=Math.pow(10,Math.floor(ki(n))),i=n/e;return(i<=1?1:i<=2?2:i<=5?5:10)*e}function CS(n){let t=[],e=Math.sqrt(n),i;for(i=1;i<e;i++)n%i===0&&(t.push(i),t.push(n/i));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function fs(n){return!isNaN(parseFloat(n))&&isFinite(n)}function DS(n,t){let e=Math.round(n);return e-t<=n&&e+t>=n}function yy(n,t,e){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function En(n){return n*(jt/180)}function ih(n){return n*(180/jt)}function vy(n){if(!Gt(n))return;let t=1,e=0;for(;Math.round(n*t)/t!==n;)t*=10,e++;return e}function wy(n,t){let e=t.x-n.x,i=t.y-n.y,r=Math.sqrt(e*e+i*i),s=Math.atan2(i,e);return s<-.5*jt&&(s+=Bt),{angle:s,distance:r}}function th(n,t){return Math.sqrt(Math.pow(t.x-n.x,2)+Math.pow(t.y-n.y,2))}function ij(n,t){return(n-t+ej)%Bt-jt}function Xe(n){return(n%Bt+Bt)%Bt}function Fo(n,t,e,i){let r=Xe(n),s=Xe(t),o=Xe(e),a=Xe(s-r),c=Xe(o-r),l=Xe(r-s),d=Xe(r-o);return r===s||r===o||i&&s===o||a>c&&l<d}function _e(n,t,e){return Math.max(t,Math.min(e,n))}function RS(n){return _e(n,-32768,32767)}function si(n,t,e,i=1e-6){return n>=Math.min(t,e)-i&&n<=Math.max(t,e)+i}function rh(n,t,e){e=e||(o=>n[o]<t);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,e(s)?r=s:i=s;return{lo:r,hi:i}}var ni=(n,t,e,i)=>rh(n,e,i?r=>{let s=n[r][t];return s<e||s===e&&n[r+1][t]===e}:r=>n[r][t]<e),kS=(n,t,e)=>rh(n,e,i=>n[i][t]>=e);function PS(n,t,e){let i=0,r=n.length;for(;i<r&&n[i]<t;)i++;for(;r>i&&n[r-1]>e;)r--;return i>0||r<n.length?n.slice(i,r):n}var MS=["push","pop","shift","splice","unshift"];function OS(n,t){if(n._chartjs){n._chartjs.listeners.push(t);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),MS.forEach(e=>{let i="_onData"+nh(e),r=n[e];Object.defineProperty(n,e,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function Iy(n,t){let e=n._chartjs;if(!e)return;let i=e.listeners,r=i.indexOf(t);r!==-1&&i.splice(r,1),!(i.length>0)&&(MS.forEach(s=>{delete n[s]}),delete n._chartjs)}function Ey(n){let t=new Set(n);return t.size===n.length?n:Array.from(t)}var xy=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function Ty(n,t){let e=[],i=!1;return function(...r){e=r,i||(i=!0,xy.call(window,()=>{i=!1,n.apply(t,e)}))}}function NS(n,t){let e;return function(...i){return t?(clearTimeout(e),e=setTimeout(n,t,i)):n.apply(this,i),t}}var sh=n=>n==="start"?"left":n==="end"?"right":"center",De=(n,t,e)=>n==="start"?t:n==="end"?e:(t+e)/2,FS=(n,t,e,i)=>n===(i?"left":"right")?e:n==="center"?(t+e)/2:t;function Ay(n,t,e){let i=t.length,r=0,s=i;if(n._sorted){let{iScale:o,_parsed:a}=n,c=o.axis,{min:l,max:d,minDefined:h,maxDefined:m}=o.getUserBounds();h&&(r=_e(Math.min(ni(a,c,l).lo,e?i:ni(t,c,o.getPixelForValue(l)).lo),0,i-1)),m?s=_e(Math.max(ni(a,o.axis,d,!0).hi+1,e?0:ni(t,c,o.getPixelForValue(d),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function Sy(n){let{xScale:t,yScale:e,_scaleRanges:i}=n,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==t.min||i.xmax!==t.max||i.ymin!==e.min||i.ymax!==e.max;return Object.assign(i,r),s}var Yd=n=>n===0||n===1,gS=(n,t,e)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-t)*Bt/e)),bS=(n,t,e)=>Math.pow(2,-10*n)*Math.sin((n-t)*Bt/e)+1,Ro={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*se)+1,easeOutSine:n=>Math.sin(n*se),easeInOutSine:n=>-.5*(Math.cos(jt*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Yd(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Yd(n)?n:gS(n,.075,.3),easeOutElastic:n=>Yd(n)?n:bS(n,.075,.3),easeInOutElastic(n){return Yd(n)?n:n<.5?.5*gS(n*2,.1125,.45):.5+.5*bS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let t=1.70158;return(n/=.5)<1?.5*(n*n*(((t*=1.525)+1)*n-t)):.5*((n-=2)*n*(((t*=1.525)+1)*n+t)+2)},easeInBounce:n=>1-Ro.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ro.easeInBounce(n*2)*.5:Ro.easeOutBounce(n*2-1)*.5+.5};function Cy(n){if(n&&typeof n=="object"){let t=n.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function Dy(n){return Cy(n)?n:new jc(n)}function fy(n){return Cy(n)?n:new jc(n).saturate(.5).darken(.1).hexString()}var rj=["x","y","borderWidth","radius","tension"],sj=["color","borderColor","backgroundColor"];function oj(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),n.set("animations",{colors:{type:"color",properties:sj},numbers:{type:"number",properties:rj}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function aj(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var _S=new Map;function cj(n,t){t=t||{};let e=n+JSON.stringify(t),i=_S.get(e);return i||(i=new Intl.NumberFormat(n,t),_S.set(e,i)),i}function Lo(n,t,e){return cj(t,e).format(n)}var LS={values(n){return Ut(n)?n:""+n},numeric(n,t,e){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(e.length>1){let l=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=lj(n,e)}let o=ki(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Lo(n,i,c)},logarithmic(n,t,e){if(n===0)return"0";let i=e[t].significand||n/Math.pow(10,Math.floor(ki(n)));return[1,2,3,5,10,15].includes(i)||t>.8*e.length?LS.numeric.call(this,n,t,e):""}};function lj(n,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&n!==Math.floor(n)&&(e=n-Math.floor(n)),e}var $c={formatters:LS};function uj(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:$c.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var hr=Object.create(null),oh=Object.create(null);function zc(n,t){if(!t)return n;let e=t.split(".");for(let i=0,r=e.length;i<r;++i){let s=e[i];n=n[s]||(n[s]=Object.create(null))}return n}function my(n,t,e){return typeof t=="string"?ko(zc(n,t),e):ko(zc(n,""),t)}var py=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>fy(r.backgroundColor),this.hoverBorderColor=(i,r)=>fy(r.borderColor),this.hoverColor=(i,r)=>fy(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return my(this,t,e)}get(t){return zc(this,t)}describe(t,e){return my(oh,t,e)}override(t,e){return my(hr,t,e)}route(t,e,i,r){let s=zc(this,t),o=zc(this,i),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let c=this[a],l=o[r];return dt(c)?Object.assign({},l,c):st(c,l)},set(c){this[a]=c}}})}apply(t){t.forEach(e=>e(this))}},Kt=new py({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[oj,aj,uj]);function dj(n){return!n||bt(n.size)||bt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function qc(n,t,e,i,r){let s=t[r];return s||(s=t[r]=n.measureText(r).width,e.push(r)),s>i&&(i=s),i}function VS(n,t,e,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==t&&(r=i.data={},s=i.garbageCollect=[],i.font=t),n.save(),n.font=t;let o=0,a=e.length,c,l,d,h,m;for(c=0;c<a;c++)if(h=e[c],h!=null&&!Ut(h))o=qc(n,r,s,o,h);else if(Ut(h))for(l=0,d=h.length;l<d;l++)m=h[l],m!=null&&!Ut(m)&&(o=qc(n,r,s,o,m));n.restore();let g=s.length/2;if(g>e.length){for(c=0;c<g;c++)delete r[s[c]];s.splice(0,g)}return o}function fr(n,t,e){let i=n.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*i)/i+r}function Ry(n,t){!t&&!n||(t=t||n.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,n.width,n.height),t.restore())}function ah(n,t,e,i){ky(n,t,e,i,null)}function ky(n,t,e,i,r){let s,o,a,c,l,d,h,m,g=t.pointStyle,y=t.rotation,b=t.radius,v=(y||0)*nj;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(e,i),n.rotate(v),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(b)||b<=0)){switch(n.beginPath(),g){default:r?n.ellipse(e,i,r/2,b,0,0,Bt):n.arc(e,i,b,0,Bt),n.closePath();break;case"triangle":d=r?r/2:b,n.moveTo(e+Math.sin(v)*d,i-Math.cos(v)*b),v+=pS,n.lineTo(e+Math.sin(v)*d,i-Math.cos(v)*b),v+=pS,n.lineTo(e+Math.sin(v)*d,i-Math.cos(v)*b),n.closePath();break;case"rectRounded":l=b*.516,c=b-l,o=Math.cos(v+us)*c,h=Math.cos(v+us)*(r?r/2-l:c),a=Math.sin(v+us)*c,m=Math.sin(v+us)*(r?r/2-l:c),n.arc(e-h,i-a,l,v-jt,v-se),n.arc(e+m,i-o,l,v-se,v),n.arc(e+h,i+a,l,v,v+se),n.arc(e-m,i+o,l,v+se,v+jt),n.closePath();break;case"rect":if(!y){c=Math.SQRT1_2*b,d=r?r/2:c,n.rect(e-d,i-c,2*d,2*c);break}v+=us;case"rectRot":h=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,m=Math.sin(v)*(r?r/2:b),n.moveTo(e-h,i-a),n.lineTo(e+m,i-o),n.lineTo(e+h,i+a),n.lineTo(e-m,i+o),n.closePath();break;case"crossRot":v+=us;case"cross":h=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,m=Math.sin(v)*(r?r/2:b),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"star":h=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,m=Math.sin(v)*(r?r/2:b),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o),v+=us,h=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,m=Math.sin(v)*(r?r/2:b),n.moveTo(e-h,i-a),n.lineTo(e+h,i+a),n.moveTo(e+m,i-o),n.lineTo(e-m,i+o);break;case"line":o=r?r/2:Math.cos(v)*b,a=Math.sin(v)*b,n.moveTo(e-o,i-a),n.lineTo(e+o,i+a);break;case"dash":n.moveTo(e,i),n.lineTo(e+Math.cos(v)*(r?r/2:b),i+Math.sin(v)*b);break;case!1:n.closePath();break}n.fill(),t.borderWidth>0&&n.stroke()}}function ii(n,t,e){return e=e||.5,!t||n&&n.x>t.left-e&&n.x<t.right+e&&n.y>t.top-e&&n.y<t.bottom+e}function Hc(n,t){n.save(),n.beginPath(),n.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),n.clip()}function Gc(n){n.restore()}function US(n,t,e,i,r){if(!t)return n.lineTo(e.x,e.y);if(r==="middle"){let s=(t.x+e.x)/2;n.lineTo(s,t.y),n.lineTo(s,e.y)}else r==="after"!=!!i?n.lineTo(t.x,e.y):n.lineTo(e.x,t.y);n.lineTo(e.x,e.y)}function jS(n,t,e,i){if(!t)return n.lineTo(e.x,e.y);n.bezierCurveTo(i?t.cp1x:t.cp2x,i?t.cp1y:t.cp2y,i?e.cp2x:e.cp1x,i?e.cp2y:e.cp1y,e.x,e.y)}function hj(n,t){t.translation&&n.translate(t.translation[0],t.translation[1]),bt(t.rotation)||n.rotate(t.rotation),t.color&&(n.fillStyle=t.color),t.textAlign&&(n.textAlign=t.textAlign),t.textBaseline&&(n.textBaseline=t.textBaseline)}function fj(n,t,e,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,c=e-s.actualBoundingBoxAscent,l=e+s.actualBoundingBoxDescent,d=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,d),n.lineTo(a,d),n.stroke()}}function mj(n,t){let e=n.fillStyle;n.fillStyle=t.color,n.fillRect(t.left,t.top,t.width,t.height),n.fillStyle=e}function mr(n,t,e,i,r,s={}){let o=Ut(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,hj(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&mj(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),bt(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,e,i,s.maxWidth)),n.fillText(l,e,i,s.maxWidth),fj(n,e,i,l,s),i+=Number(r.lineHeight);n.restore()}function Vo(n,t){let{x:e,y:i,w:r,h:s,radius:o}=t;n.arc(e+o.topLeft,i+o.topLeft,o.topLeft,1.5*jt,jt,!0),n.lineTo(e,i+s-o.bottomLeft),n.arc(e+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,jt,se,!0),n.lineTo(e+r-o.bottomRight,i+s),n.arc(e+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,se,0,!0),n.lineTo(e+r,i+o.topRight),n.arc(e+r-o.topRight,i+o.topRight,o.topRight,0,-se,!0),n.lineTo(e+o.topLeft,i)}var pj=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,gj=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function bj(n,t){let e=(""+n).match(pj);if(!e||e[1]==="normal")return t*1.2;switch(n=+e[2],e[3]){case"px":return n;case"%":n/=100;break}return t*n}var _j=n=>+n||0;function ch(n,t){let e={},i=dt(t),r=i?Object.keys(t):t,s=dt(n)?i?o=>st(n[o],n[t[o]]):o=>n[o]:()=>n;for(let o of r)e[o]=_j(s(o));return e}function Py(n){return ch(n,{top:"y",right:"x",bottom:"y",left:"x"})}function pr(n){return ch(n,["topLeft","topRight","bottomLeft","bottomRight"])}function Re(n){let t=Py(n);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ge(n,t){n=n||{},t=t||Kt.font;let e=st(n.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let i=st(n.style,t.style);i&&!(""+i).match(gj)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:st(n.family,t.family),lineHeight:bj(st(n.lineHeight,t.lineHeight),e),size:e,style:i,weight:st(n.weight,t.weight),string:""};return r.string=dj(r),r}function Uo(n,t,e,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&Ut(a)&&(a=a[e%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function BS(n,t,e){let{min:i,max:r}=n,s=gy(t,(r-i)/2),o=(a,c)=>e&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function Mi(n,t){return Object.assign(Object.create(n),t)}function lh(n,t=[""],e,i,r=()=>n[0]){let s=e||n;typeof i>"u"&&(i=WS("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>lh([a,...n],t,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return zS(a,c,()=>Aj(c,t,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return vS(a).includes(c)},ownKeys(a){return vS(a)},set(a,c,l){let d=a._storage||(a._storage=r());return a[c]=d[c]=l,delete a._keys,!0}})}function hs(n,t,e,i){let r={_cacheable:!1,_proxy:n,_context:t,_subProxy:e,_stack:new Set,_descriptors:My(n,i),setContext:s=>hs(n,s,e,i),override:s=>hs(n.override(s),t,e,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return zS(s,o,()=>vj(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function My(n,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:i=t.indexable,_allKeys:r=t.allKeys}=n;return{allKeys:r,scriptable:e,indexable:i,isScriptable:Ri(e)?e:()=>e,isIndexable:Ri(i)?i:()=>i}}var yj=(n,t)=>n?n+nh(t):t,Oy=(n,t)=>dt(t)&&n!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function zS(n,t,e){if(Object.prototype.hasOwnProperty.call(n,t)||t==="constructor")return n[t];let i=e();return n[t]=i,i}function vj(n,t,e){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[t];return Ri(a)&&o.isScriptable(t)&&(a=wj(t,a,n,e)),Ut(a)&&a.length&&(a=Ij(t,a,n,o.isIndexable)),Oy(t,a)&&(a=hs(a,r,s&&s[t],o)),a}function wj(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=t(s,o||i);return a.delete(n),Oy(n,c)&&(c=Ny(r._scopes,r,n,c)),c}function Ij(n,t,e,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&i(n))return t[s.index%t.length];if(dt(t[0])){let c=t,l=r._scopes.filter(d=>d!==c);t=[];for(let d of c){let h=Ny(l,r,n,d);t.push(hs(h,s,o&&o[n],a))}}return t}function qS(n,t,e){return Ri(n)?n(t,e):n}var Ej=(n,t)=>n===!0?t:typeof n=="string"?Pi(t,n):void 0;function xj(n,t,e,i,r){for(let s of t){let o=Ej(e,s);if(o){n.add(o);let a=qS(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==i)return a}else if(o===!1&&typeof i<"u"&&e!==i)return null}return!1}function Ny(n,t,e,i){let r=t._rootScopes,s=qS(t._fallback,e,i),o=[...n,...r],a=new Set;a.add(i);let c=yS(a,o,e,s||e,i);return c===null||typeof s<"u"&&s!==e&&(c=yS(a,o,s,c,i),c===null)?!1:lh(Array.from(a),[""],r,s,()=>Tj(t,e,i))}function yS(n,t,e,i,r){for(;e;)e=xj(n,t,e,i,r);return e}function Tj(n,t,e){let i=n._getTarget();t in i||(i[t]={});let r=i[t];return Ut(r)&&dt(e)?e:r||{}}function Aj(n,t,e,i){let r;for(let s of t)if(r=WS(yj(s,n),e),typeof r<"u")return Oy(n,r)?Ny(e,i,n,r):r}function WS(n,t){for(let e of t){if(!e)continue;let i=e[n];if(typeof i<"u")return i}}function vS(n){let t=n._keys;return t||(t=n._keys=Sj(n._scopes)),t}function Sj(n){let t=new Set;for(let e of n)for(let i of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(i);return Array.from(t)}function Fy(n,t,e,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,c,l,d;for(a=0,c=i;a<c;++a)l=a+e,d=t[l],o[a]={r:r.parse(Pi(d,s),l)};return o}var Cj=Number.EPSILON||1e-14,Po=(n,t)=>t<n.length&&!n[t].skip&&n[t],$S=n=>n==="x"?"y":"x";function Dj(n,t,e,i){let r=n.skip?t:n,s=t,o=e.skip?t:e,a=th(s,r),c=th(o,s),l=a/(a+c),d=c/(a+c);l=isNaN(l)?0:l,d=isNaN(d)?0:d;let h=i*l,m=i*d;return{previous:{x:s.x-h*(o.x-r.x),y:s.y-h*(o.y-r.y)},next:{x:s.x+m*(o.x-r.x),y:s.y+m*(o.y-r.y)}}}function Rj(n,t,e){let i=n.length,r,s,o,a,c,l=Po(n,0);for(let d=0;d<i-1;++d)if(c=l,l=Po(n,d+1),!(!c||!l)){if(No(t[d],0,Cj)){e[d]=e[d+1]=0;continue}r=e[d]/t[d],s=e[d+1]/t[d],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[d]=r*o*t[d],e[d+1]=s*o*t[d])}}function kj(n,t,e="x"){let i=$S(e),r=n.length,s,o,a,c=Po(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=Po(n,l+1),!a)continue;let d=a[e],h=a[i];o&&(s=(d-o[e])/3,a[`cp1${e}`]=d-s,a[`cp1${i}`]=h-s*t[l]),c&&(s=(c[e]-d)/3,a[`cp2${e}`]=d+s,a[`cp2${i}`]=h+s*t[l])}}function Pj(n,t="x"){let e=$S(t),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=Po(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=Po(n,o+1),!!c){if(l){let d=l[t]-c[t];r[o]=d!==0?(l[e]-c[e])/d:0}s[o]=a?l?Ln(r[o-1])!==Ln(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}Rj(n,r,s),kj(n,s,t)}function Qd(n,t,e){return Math.max(Math.min(n,e),t)}function Mj(n,t){let e,i,r,s,o,a=ii(n[0],t);for(e=0,i=n.length;e<i;++e)o=s,s=a,a=e<i-1&&ii(n[e+1],t),s&&(r=n[e],o&&(r.cp1x=Qd(r.cp1x,t.left,t.right),r.cp1y=Qd(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=Qd(r.cp2x,t.left,t.right),r.cp2y=Qd(r.cp2y,t.top,t.bottom)))}function HS(n,t,e,i,r){let s,o,a,c;if(t.spanGaps&&(n=n.filter(l=>!l.skip)),t.cubicInterpolationMode==="monotone")Pj(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=Dj(l,a,n[Math.min(s+1,o-(i?0:1))%o],t.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}t.capBezierPoints&&Mj(n,e)}function uh(){return typeof window<"u"&&typeof document<"u"}function dh(n){let t=n.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function eh(n,t,e){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*t.parentNode[e])):i=n,i}var hh=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function Oj(n,t){return hh(n).getPropertyValue(t)}var Nj=["top","right","bottom","left"];function ds(n,t,e){let i={};e=e?"-"+e:"";for(let r=0;r<4;r++){let s=Nj[r];i[s]=parseFloat(n[t+"-"+s+e])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var Fj=(n,t,e)=>(n>0||t>0)&&(!e||!e.shadowRoot);function Lj(n,t){let e=n.touches,i=e&&e.length?e[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(Fj(r,s,n.target))a=r,c=s;else{let l=t.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function gr(n,t){if("native"in n)return n;let{canvas:e,currentDevicePixelRatio:i}=t,r=hh(e),s=r.boxSizing==="border-box",o=ds(r,"padding"),a=ds(r,"border","width"),{x:c,y:l,box:d}=Lj(n,e),h=o.left+(d&&a.left),m=o.top+(d&&a.top),{width:g,height:y}=t;return s&&(g-=o.width+a.width,y-=o.height+a.height),{x:Math.round((c-h)/g*e.width/i),y:Math.round((l-m)/y*e.height/i)}}function Vj(n,t,e){let i,r;if(t===void 0||e===void 0){let s=n&&dh(n);if(!s)t=n.clientWidth,e=n.clientHeight;else{let o=s.getBoundingClientRect(),a=hh(s),c=ds(a,"border","width"),l=ds(a,"padding");t=o.width-l.width-c.width,e=o.height-l.height-c.height,i=eh(a.maxWidth,s,"clientWidth"),r=eh(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:i||Zd,maxHeight:r||Zd}}var Xd=n=>Math.round(n*10)/10;function GS(n,t,e,i){let r=hh(n),s=ds(r,"margin"),o=eh(r.maxWidth,n,"clientWidth")||Zd,a=eh(r.maxHeight,n,"clientHeight")||Zd,c=Vj(n,t,e),{width:l,height:d}=c;if(r.boxSizing==="content-box"){let m=ds(r,"border","width"),g=ds(r,"padding");l-=g.width+m.width,d-=g.height+m.height}return l=Math.max(0,l-s.width),d=Math.max(0,i?l/i:d-s.height),l=Xd(Math.min(l,o,c.maxWidth)),d=Xd(Math.min(d,a,c.maxHeight)),l&&!d&&(d=Xd(l/2)),(t!==void 0||e!==void 0)&&i&&c.height&&d>c.height&&(d=c.height,l=Xd(Math.floor(d*i))),{width:l,height:d}}function Ly(n,t,e){let i=t||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var KS=function(){let n=!1;try{let t={get passive(){return n=!0,!1}};uh()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return n}();function Vy(n,t){let e=Oj(n,t),i=e&&e.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function dr(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:n.y+e*(t.y-n.y)}}function YS(n,t,e,i){return{x:n.x+e*(t.x-n.x),y:i==="middle"?e<.5?n.y:t.y:i==="after"?e<1?n.y:t.y:e>0?t.y:n.y}}function QS(n,t,e,i){let r={x:n.cp2x,y:n.cp2y},s={x:t.cp1x,y:t.cp1y},o=dr(n,r,e),a=dr(r,s,e),c=dr(s,t,e),l=dr(o,a,e),d=dr(a,c,e);return dr(l,d,e)}var Uj=function(n,t){return{x(e){return n+n+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,i){return e-i},leftForLtr(e,i){return e-i}}},jj=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,t){return n+t},leftForLtr(n,t){return n}}};function ms(n,t,e){return n?Uj(t,e):jj()}function Uy(n,t){let e,i;(t==="ltr"||t==="rtl")&&(e=n.canvas.style,i=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),n.prevTextDirection=i)}function jy(n,t){t!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",t[0],t[1]))}function XS(n){return n==="angle"?{between:Fo,compare:ij,normalize:Xe}:{between:si,compare:(t,e)=>t-e,normalize:t=>t}}function wS({start:n,end:t,count:e,loop:i,style:r}){return{start:n%e,end:t%e,loop:i&&(t-n+1)%e===0,style:r}}function Bj(n,t,e){let{property:i,start:r,end:s}=e,{between:o,normalize:a}=XS(i),c=t.length,{start:l,end:d,loop:h}=n,m,g;if(h){for(l+=c,d+=c,m=0,g=c;m<g&&o(a(t[l%c][i]),r,s);++m)l--,d--;l%=c,d%=c}return d<l&&(d+=c),{start:l,end:d,loop:h,style:n.style}}function By(n,t,e){if(!e)return[n];let{property:i,start:r,end:s}=e,o=t.length,{compare:a,between:c,normalize:l}=XS(i),{start:d,end:h,loop:m,style:g}=Bj(n,t,e),y=[],b=!1,v=null,C,R,P,V=()=>c(r,P,C)&&a(r,P)!==0,F=()=>a(s,C)===0||c(s,P,C),L=()=>b||V(),E=()=>!b||F();for(let w=d,I=d;w<=h;++w)R=t[w%o],!R.skip&&(C=l(R[i]),C!==P&&(b=c(C,r,s),v===null&&L()&&(v=a(C,r)===0?w:I),v!==null&&E()&&(y.push(wS({start:v,end:w,loop:m,count:o,style:g})),v=null),I=w,P=C));return v!==null&&y.push(wS({start:v,end:h,loop:m,count:o,style:g})),y}function zy(n,t){let e=[],i=n.segments;for(let r=0;r<i.length;r++){let s=By(i[r],n.points,t);s.length&&e.push(...s)}return e}function zj(n,t,e,i){let r=0,s=t-1;if(e&&!i)for(;r<t&&!n[r].skip;)r++;for(;r<t&&n[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&n[s%t].skip;)s--;return s%=t,{start:r,end:s}}function qj(n,t,e,i){let r=n.length,s=[],o=t,a=n[t],c;for(c=t+1;c<=e;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:t%r,end:(c-1)%r,loop:i}),t=o=l.stop?c:null):(o=c,a.skip&&(t=c)),a=l}return o!==null&&s.push({start:t%r,end:o%r,loop:i}),s}function JS(n,t){let e=n.points,i=n.options.spanGaps,r=e.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=zj(e,r,s,i);if(i===!0)return IS(n,[{start:o,end:a,loop:s}],e,t);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return IS(n,qj(e,o,c,l),e,t)}function IS(n,t,e,i){return!i||!i.setContext||!e?t:Wj(n,t,e,i)}function Wj(n,t,e,i){let r=n._chart.getContext(),s=ES(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=e.length,l=[],d=s,h=t[0].start,m=h;function g(y,b,v,C){let R=a?-1:1;if(y!==b){for(y+=c;e[y%c].skip;)y-=R;for(;e[b%c].skip;)b+=R;y%c!==b%c&&(l.push({start:y%c,end:b%c,loop:v,style:C}),d=C,h=b%c)}}for(let y of t){h=a?h:y.start;let b=e[h%c],v;for(m=h+1;m<=y.end;m++){let C=e[m%c];v=ES(i.setContext(Mi(r,{type:"segment",p0:b,p1:C,p0DataIndex:(m-1)%c,p1DataIndex:m%c,datasetIndex:o}))),$j(v,d)&&g(h,m-1,y.loop,d),b=C,d=v}h<m-1&&g(h,m-1,y.loop,d)}return l}function ES(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function $j(n,t){if(!t)return!1;let e=[],i=function(r,s){return Cy(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(t,i)}var Jy=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,i,r){let s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(i-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=xy.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,t,"progress")),s.length||(i.running=!1,this._notify(r,i,t,"complete"),i.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,i=e.get(t);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,i)),i}listen(t,e,i){this._getAnims(t).listeners[e].push(i)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let i=e.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},Oi=new Jy,ZS="transparent",Hj={boolean(n,t,e){return e>.5?t:n},color(n,t,e){let i=Dy(n||ZS),r=i.valid&&Dy(t||ZS);return r&&r.valid?r.mix(i,e).hexString():t},number(n,t,e){return n+(t-n)*e}},Zy=class{constructor(t,e,i,r){let s=e[i];r=Uo([t.to,r,s,t.from]);let o=Uo([t.from,s,r]);this._active=!0,this._fn=t.fn||Hj[t.type||typeof o],this._easing=Ro[t.easing]||Ro.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Uo([t.to,e,r,t.from]),this._from=Uo([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||e<i),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}c=e/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,i)=>{t.push({res:e,rej:i})})}_notify(t){let e=t?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][e]()}},Ih=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!dt(t))return;let e=Object.keys(Kt.animation),i=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!dt(s))return;let o={};for(let a of e)o[a]=s[a];(Ut(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(t,e){let i=e.options,r=Kj(t,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&Gj(t.options.$animations,i).then(()=>{t.options=i},()=>{}),s}_createAnimations(t,e){let i=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(t,e));continue}let d=e[l],h=s[l],m=i.get(l);if(h)if(m&&h.active()){h.update(m,d,a);continue}else h.cancel();if(!m||!m.duration){t[l]=d;continue}s[l]=h=new Zy(m,t,l,d),r.push(h)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let i=this._createAnimations(t,e);if(i.length)return Oi.add(this._chart,i),!0}};function Gj(n,t){let e=[],i=Object.keys(t);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function Kj(n,t){if(!t)return;let e=n.options;if(!e){n.options=t;return}return e.$shared&&(n.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function tC(n,t){let e=n&&n.options||{},i=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:i?s:r,end:i?r:s}}function Yj(n,t,e){if(e===!1)return!1;let i=tC(n,e),r=tC(t,e);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function Qj(n){let t,e,i,r;return dt(n)?(t=n.top,e=n.right,i=n.bottom,r=n.left):t=e=i=r=n,{top:t,right:e,bottom:i,left:r,disabled:n===!1}}function tD(n,t){let e=[],i=n._getSortedDatasetMetas(t),r,s;for(r=0,s=i.length;r<s;++r)e.push(i[r].index);return e}function eC(n,t,e,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(t!==null){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===e){if(i.all)continue;break}l=n.values[c],Gt(l)&&(s||t===0||Ln(t)===Ln(l))&&(t+=l)}return t}}function Xj(n,t){let{iScale:e,vScale:i}=t,r=e.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,d;for(c=0,l=o.length;c<l;++c)d=o[c],a[c]={[r]:d,[s]:n[d]};return a}function nC(n,t){let e=n&&n.options.stacked;return e||e===void 0&&t.stack!==void 0}function Jj(n,t,e){return`${n.id}.${t.id}.${e.stack||e.type}`}function Zj(n){let{min:t,max:e,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function tB(n,t,e){let i=n[t]||(n[t]={});return i[e]||(i[e]={})}function iC(n,t,e,i){for(let r of t.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function rC(n,t){let{chart:e,_cachedMeta:i}=n,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,d=Jj(s,o,i),h=t.length,m;for(let g=0;g<h;++g){let y=t[g],{[c]:b,[l]:v}=y,C=y._stacks||(y._stacks={});m=C[l]=tB(r,d,b),m[a]=v,m._top=iC(m,o,!0,i.type),m._bottom=iC(m,o,!1,i.type);let R=m._visualValues||(m._visualValues={});R[a]=v}}function qy(n,t){let e=n.scales;return Object.keys(e).filter(i=>e[i].axis===t).shift()}function eB(n,t){return Mi(n,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function nB(n,t,e){return Mi(n,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Kc(n,t){let e=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){t=t||n._parsed;for(let r of t){let s=r._stacks;if(!s||s[i]===void 0||s[i][e]===void 0)return;delete s[i][e],s[i]._visualValues!==void 0&&s[i]._visualValues[e]!==void 0&&delete s[i]._visualValues[e]}}}var Wy=n=>n==="reset"||n==="none",sC=(n,t)=>t?n:Object.assign({},n),iB=(n,t,e)=>n&&!t.hidden&&t._stacked&&{keys:tD(e,!0),values:null},_r=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,i){this.chart=e,this._ctx=e.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=nC(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Kc(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(m,g,y,b)=>m==="x"?g:m==="r"?b:y,o=i.xAxisID=st(r.xAxisID,qy(e,"x")),a=i.yAxisID=st(r.yAxisID,qy(e,"y")),c=i.rAxisID=st(r.rAxisID,qy(e,"r")),l=i.indexAxis,d=i.iAxisID=s(l,o,a,c),h=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(d),i.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let i=this._cachedMeta;return e===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&Iy(this._data,this),e._stacked&&Kc(e)}_dataCheck(){let e=this.getDataset(),i=e.data||(e.data=[]),r=this._data;if(dt(i)){let s=this._cachedMeta;this._data=Xj(i,s)}else if(r!==i){if(r){Iy(r,this);let s=this._cachedMeta;Kc(s),s._parsed=[]}i&&Object.isExtensible(i)&&OS(i,this),this._syncList=[],this._data=i}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=nC(i.vScale,i),i.stack!==r.stack&&(s=!0,Kc(i),i.stack=r.stack),this._resyncElements(e),(s||o!==i._stacked)&&rC(this,i._parsed)}configure(){let e=this.chart.config,i=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),i,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=e===0&&i===s.length?!0:r._sorted,d=e>0&&r._parsed[e-1],h,m,g;if(this._parsing===!1)r._parsed=s,r._sorted=!0,g=s;else{Ut(s[e])?g=this.parseArrayData(r,s,e,i):dt(s[e])?g=this.parseObjectData(r,s,e,i):g=this.parsePrimitiveData(r,s,e,i);let y=()=>m[c]===null||d&&m[c]<d[c];for(h=0;h<i;++h)r._parsed[h+e]=m=g[h],l&&(y()&&(l=!1),d=m);r._sorted=l}a&&rC(this,g)}parsePrimitiveData(e,i,r,s){let{iScale:o,vScale:a}=e,c=o.axis,l=a.axis,d=o.getLabels(),h=o===a,m=new Array(s),g,y,b;for(g=0,y=s;g<y;++g)b=g+r,m[g]={[c]:h||o.parse(d[b],b),[l]:a.parse(i[b],b)};return m}parseArrayData(e,i,r,s){let{xScale:o,yScale:a}=e,c=new Array(s),l,d,h,m;for(l=0,d=s;l<d;++l)h=l+r,m=i[h],c[l]={x:o.parse(m[0],h),y:a.parse(m[1],h)};return c}parseObjectData(e,i,r,s){let{xScale:o,yScale:a}=e,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=new Array(s),h,m,g,y;for(h=0,m=s;h<m;++h)g=h+r,y=i[g],d[h]={x:o.parse(Pi(y,c),g),y:a.parse(Pi(y,l),g)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,i,r){let s=this.chart,o=this._cachedMeta,a=i[e.axis],c={keys:tD(s,!0),values:i._stacks[e.axis]._visualValues};return eC(c,a,o.index,{mode:r})}updateRangeFromParsed(e,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=eC(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,c=this._getOtherScale(e),l=iB(i,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:m}=Zj(c),g,y;function b(){y=s[g];let v=y[c.axis];return!Gt(y[e.axis])||h>v||m<v}for(g=0;g<a&&!(!b()&&(this.updateRangeFromParsed(d,e,y,l),o));++g);if(o){for(g=a-1;g>=0;--g)if(!b()){this.updateRangeFromParsed(d,e,y,l);break}}return d}getAllParsedValues(e){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][e.axis],Gt(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){let i=this._cachedMeta;this.update(e||"default"),i._clip=Qj(st(this.options.clip,Yj(i.xScale,i.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,d=this.options.drawActiveElementsOnTop,h;for(r.dataset&&r.dataset.draw(e,o,c,l),h=c;h<c+l;++h){let m=s[h];m.hidden||(m.active&&d?a.push(m):m.draw(e,o))}for(h=0;h<a.length;++h)a[h].draw(e,o)}getStyle(e,i){let r=i?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,i,r){let s=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=nB(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=eB(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,i){return this._resolveElementOptions(this.dataElementType.id,i,e)}_resolveElementOptions(e,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=e+"-"+i,c=o[a],l=this.enableOptionSharing&&Oo(r);if(c)return sC(c,l);let d=this.chart.config,h=d.datasetElementScopeKeys(this._type,e),m=s?[`${e}Hover`,"hover",e,""]:[e,""],g=d.getOptionScopes(this.getDataset(),h),y=Object.keys(Kt.elements[e]),b=()=>this.getContext(r,s,i),v=d.resolveNamedOptions(g,y,b,m);return v.$shared&&(v.$shared=l,o[a]=Object.freeze(sC(v,l))),v}_resolveAnimations(e,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let h=this.chart.config,m=h.datasetAnimationScopeKeys(this._type,i),g=h.getOptionScopes(this.getDataset(),m);l=h.createResolver(g,this.getContext(e,r,i))}let d=new Ih(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,i){return!i||Wy(e)||this.chart._animationsDisabled}_getSharedOptions(e,i){let r=this.resolveDataElementOptions(e,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(e,i,r,s){Wy(s)?Object.assign(e,r):this._resolveAnimations(i,s).update(e,r)}updateSharedOptions(e,i,r){e&&!Wy(i)&&this._resolveAnimations(void 0,i).update(e,r)}_setStyle(e,i,r,s){e.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,i,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,i,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let i=this._data,r=this._cachedMeta.data;for(let[c,l,d]of this._syncList)this[c](l,d);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,i,r=!0){let s=this._cachedMeta,o=s.data,a=e+i,c,l=d=>{for(d.length+=i,c=d.length-1;c>=a;c--)d[c]=d[c-i]};for(l(o),c=e;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(e,i),r&&this.updateElements(o,e,i,"reset")}updateElements(e,i,r,s){}_removeElements(e,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(e,i);r._stacked&&Kc(r,s)}r.data.splice(e,i)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[i,r,s]=e;this[i](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,i){i&&this._sync(["_removeElements",e,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function rB(n,t){if(!n._cache.$bar){let e=n.getMatchingVisibleMetas(t),i=[];for(let r=0,s=e.length;r<s;r++)i=i.concat(e[r].controller.getAllParsedValues(n));n._cache.$bar=Ey(i.sort((r,s)=>r-s))}return n._cache.$bar}function sB(n){let t=n.iScale,e=rB(t,n.type),i=t._length,r,s,o,a,c=()=>{o===32767||o===-32768||(Oo(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),c();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),c();return i}function oB(n,t,e,i){let r=e.barThickness,s,o;return bt(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:t.pixels[n]-s/2}}function aB(n,t,e,i){let r=t.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:e.barPercentage,start:l}}function cB(n,t,e,i){let r=e.parse(n[0],i),s=e.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),t[e.axis]=l,t._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function eD(n,t,e,i){return Ut(n)?cB(n,t,e,i):t[e.axis]=e.parse(n,i),t}function oC(n,t,e,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,d,h,m;for(l=e,d=e+i;l<d;++l)m=t[l],h={},h[r.axis]=a||r.parse(o[l],l),c.push(eD(m,h,s,l));return c}function $y(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function lB(n,t,e){return n!==0?Ln(n):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function uB(n){let t,e,i,r,s;return n.horizontal?(t=n.base>n.x,e="left",i="right"):(t=n.base<n.y,e="bottom",i="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:i,reverse:t,top:r,bottom:s}}function dB(n,t,e,i){let r=t.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:d}=uB(n);r==="middle"&&e&&(n.enableBorderRadius=!0,(e._top||0)===i?r=l:(e._bottom||0)===i?r=d:(s[aC(d,o,a,c)]=!0,r=l)),s[aC(r,o,a,c)]=!0,n.borderSkipped=s}function aC(n,t,e,i){return i?(n=hB(n,t,e),n=cC(n,e,t)):n=cC(n,t,e),n}function hB(n,t,e){return n===t?e:n===e?t:n}function cC(n,t,e){return n==="start"?t:n==="end"?e:n}function fB(n,{inflateAmount:t},e){n.inflateAmount=t==="auto"?e===1?.33:0:t}var mB=(()=>{class n extends _r{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,i,r,s){return oC(e,i,r,s)}parseArrayData(e,i,r,s){return oC(e,i,r,s)}parseObjectData(e,i,r,s){let{iScale:o,vScale:a}=e,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,d=o.axis==="x"?c:l,h=a.axis==="x"?c:l,m=[],g,y,b,v;for(g=r,y=r+s;g<y;++g)v=i[g],b={},b[o.axis]=o.parse(Pi(v,d),g),m.push(eD(Pi(v,h),b,a,g));return m}updateRangeFromParsed(e,i,r,s){super.updateRangeFromParsed(e,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(e),a=o._custom,c=$y(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,e)}updateElements(e,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),d=c.isHorizontal(),h=this._getRuler(),{sharedOptions:m,includeOptions:g}=this._getSharedOptions(i,s);for(let y=i;y<i+r;y++){let b=this.getParsed(y),v=o||bt(b[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(y),C=this._calculateBarIndexPixels(y,h),R=(b._stacks||{})[c.axis],P={horizontal:d,base:v.base,enableBorderRadius:!R||$y(b._custom)||a===R._top||a===R._bottom,x:d?v.head:C.center,y:d?C.center:v.head,height:d?C.size:Math.abs(v.size),width:d?Math.abs(v.size):C.size};g&&(P.options=m||this.resolveDataElementOptions(y,e[y].active?"active":s));let V=P.options||e[y].options;dB(P,V,R,a),fB(P,V,h.ratio),this.updateElement(e[y],y,P,s)}}_getStacks(e,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),o=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],d=h=>{let m=h._parsed.find(y=>y[r.axis]===l),g=m&&m[h.vScale.axis];if(bt(g)||isNaN(g))return!0};for(let h of s)if(!(i!==void 0&&d(h))&&((o===!1||a.indexOf(h.stack)===-1||o===void 0&&h.stack===void 0)&&a.push(h.stack),h.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,i,r){let s=this._getStacks(e,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let e=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=e.barThickness;return{min:c||sB(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:c?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(e),d=l._custom,h=$y(d),m=l[i.axis],g=0,y=r?this.applyStack(i,l,r):m,b,v;y!==m&&(g=y-m,y=m),h&&(m=d.barStart,y=d.barEnd-d.barStart,m!==0&&Ln(m)!==Ln(d.barEnd)&&(g=0),g+=m);let C=!bt(o)&&!h?o:g,R=i.getPixelForValue(C);if(this.chart.getDataVisibility(e)?b=i.getPixelForValue(g+y):b=R,v=b-R,Math.abs(v)<a){v=lB(v,i,c)*a,m===c&&(R-=v/2);let P=i.getPixelForDecimal(0),V=i.getPixelForDecimal(1),F=Math.min(P,V),L=Math.max(P,V);R=Math.max(Math.min(R,L),F),b=R+v,r&&!h&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(b)-i.getValueForPixel(R))}if(R===i.getPixelForValue(c)){let P=Ln(v)*i.getLineWidthForValue(c)/2;R+=P,v-=P}return{size:v,base:R,head:b,center:b+v/2}}_calculateBarIndexPixels(e,i){let r=i.scale,s=this.options,o=s.skipNull,a=st(s.maxBarThickness,1/0),c,l;if(i.grouped){let d=o?this._getStackCount(e):i.stackCount,h=s.barThickness==="flex"?aB(e,i,s,d):oB(e,i,s,d),m=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);c=h.start+h.chunk*m+h.chunk/2,l=Math.min(a,h.chunk*h.ratio)}else c=r.getPixelForValue(this.getParsed(e)[r.axis],e),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let e=this._cachedMeta,i=e.vScale,r=e.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})(),pB=(()=>{class n extends _r{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,i,r,s){let o=super.parsePrimitiveData(e,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,i,r,s){let o=super.parseArrayData(e,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=st(c[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(e,i,r,s){let o=super.parseObjectData(e,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=st(c&&c.r&&+c.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,i=0;for(let r=e.length-1;r>=0;--r)i=Math.max(i,e[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),d=a._custom;return{label:r[e]||"",value:"("+c+", "+l+(d?", "+d:"")+")"}}update(e){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,e)}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(i,s),h=a.axis,m=c.axis;for(let g=i;g<i+r;g++){let y=e[g],b=!o&&this.getParsed(g),v={},C=v[h]=o?a.getPixelForDecimal(.5):a.getPixelForValue(b[h]),R=v[m]=o?c.getBasePixel():c.getPixelForValue(b[m]);v.skip=isNaN(C)||isNaN(R),d&&(v.options=l||this.resolveDataElementOptions(g,y.active?"active":s),o&&(v.options.radius=0)),this.updateElement(y,g,v,s)}}resolveDataElementOptions(e,i){let r=this.getParsed(e),s=super.resolveDataElementOptions(e,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=st(r&&r._custom,o),s}}return n})();function gB(n,t,e){let i=1,r=1,s=0,o=0;if(t<Bt){let a=n,c=a+t,l=Math.cos(a),d=Math.sin(a),h=Math.cos(c),m=Math.sin(c),g=(P,V,F)=>Fo(P,a,c,!0)?1:Math.max(V,V*e,F,F*e),y=(P,V,F)=>Fo(P,a,c,!0)?-1:Math.min(V,V*e,F,F*e),b=g(0,l,h),v=g(se,d,m),C=y(jt,l,h),R=y(jt+se,d,m);i=(b-C)/2,r=(v-R)/2,s=-(b+C)/2,o=-(v+R)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var _v=(()=>{class n extends _r{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{let l=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(e,i){super(e,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=l=>+r[l];if(dt(r[e])){let{key:l="value"}=this._parsing;o=d=>+Pi(r[d],l)}let a,c;for(a=e,c=e+i;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return En(this.options.rotation-90)}_getCircumference(){return En(this.options.circumference)}_getRotationExtents(){let e=Bt,i=-Bt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),i=Math.max(i,o+a)}return{rotation:e,circumference:i-e}}update(e){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(TS(this.options.cutout,c),1),d=this._getRingWeight(this.index),{circumference:h,rotation:m}=this._getRotationExtents(),{ratioX:g,ratioY:y,offsetX:b,offsetY:v}=gB(m,h,l),C=(r.width-a)/g,R=(r.height-a)/y,P=Math.max(Math.min(C,R)/2,0),V=gy(this.options.radius,P),F=Math.max(V*l,0),L=(V-F)/this._getVisibleDatasetWeightTotal();this.offsetX=b*V,this.offsetY=v*V,s.total=this.calculateTotal(),this.outerRadius=V-L*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-L*d,0),this.updateElements(o,0,o.length,e)}_circumference(e,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/Bt)}updateElements(e,i,r,s){let o=s==="reset",a=this.chart,c=a.chartArea,d=a.options.animation,h=(c.left+c.right)/2,m=(c.top+c.bottom)/2,g=o&&d.animateScale,y=g?0:this.innerRadius,b=g?0:this.outerRadius,{sharedOptions:v,includeOptions:C}=this._getSharedOptions(i,s),R=this._getRotation(),P;for(P=0;P<i;++P)R+=this._circumference(P,o);for(P=i;P<i+r;++P){let V=this._circumference(P,o),F=e[P],L={x:h+this.offsetX,y:m+this.offsetY,startAngle:R,endAngle:R+V,circumference:V,outerRadius:b,innerRadius:y};C&&(L.options=v||this.resolveDataElementOptions(P,F.active?"active":s)),R+=V,this.updateElement(F,P,L,s)}}calculateTotal(){let e=this._cachedMeta,i=e.data,r=0,s;for(s=0;s<i.length;s++){let o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){let i=this._cachedMeta.total;return i>0&&!isNaN(e)?Bt*(Math.abs(e)/i):0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Lo(i._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let i=0,r=this.chart,s,o,a,c,l;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,c=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(e){let i=0;for(let r=0,s=e.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(e){let i=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(e){return Math.max(st(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),bB=(()=>{class n extends _r{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=Ay(i,s,a);this._drawStart=c,this._drawCount=l,Sy(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},e),this.updateElements(s,c,l,e)}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:m}=this._getSharedOptions(i,s),g=a.axis,y=c.axis,{spanGaps:b,segment:v}=this.options,C=fs(b)?b:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||s==="none",P=i+r,V=e.length,F=i>0&&this.getParsed(i-1);for(let L=0;L<V;++L){let E=e[L],w=R?E:{};if(L<i||L>=P){w.skip=!0;continue}let I=this.getParsed(L),A=bt(I[y]),S=w[g]=a.getPixelForValue(I[g],L),D=w[y]=o||A?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,I,l):I[y],L);w.skip=isNaN(S)||isNaN(D)||A,w.stop=L>0&&Math.abs(I[g]-F[g])>C,v&&(w.parsed=I,w.raw=d.data[L]),m&&(w.options=h||this.resolveDataElementOptions(L,E.active?"active":s)),R||this.updateElement(E,L,w,s),F=I}}getMaxOverflow(){let e=this._cachedMeta,i=e.dataset,r=i.options&&i.options.borderWidth||0,s=e.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return n})(),nD=(()=>{class n extends _r{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let i=e.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return i.labels.map((o,a)=>{let l=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,i){super(e,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Lo(i._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,i,r,s){return Fy.bind(this)(e,i,r,s)}update(e){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,e)}getMinMax(){let e=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let e=this.chart,i=e.chartArea,r=e.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),c=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(e,i,r,s){let o=s==="reset",a=this.chart,l=a.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,m=d.yCenter,g=d.getIndexAngle(0)-.5*jt,y=g,b,v=360/this.countVisibleElements();for(b=0;b<i;++b)y+=this._computeAngle(b,s,v);for(b=i;b<i+r;b++){let C=e[b],R=y,P=y+this._computeAngle(b,s,v),V=a.getDataVisibility(b)?d.getDistanceFromCenterForValue(this.getParsed(b).r):0;y=P,o&&(l.animateScale&&(V=0),l.animateRotate&&(R=P=g));let F={x:h,y:m,innerRadius:0,outerRadius:V,startAngle:R,endAngle:P,options:this.resolveDataElementOptions(b,C.active?"active":s)};this.updateElement(C,b,F,s)}}countVisibleElements(){let e=this._cachedMeta,i=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(e,i,r){return this.chart.getDataVisibility(e)?En(this.resolveDataElementOptions(e,i).angle||r):0}}return n})(),_B=(()=>{class n extends _v{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),yB=(()=>{class n extends _r{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let i=this._cachedMeta.vScale,r=this.getParsed(e);return{label:i.getLabels()[e],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(e,i,r,s){return Fy.bind(this)(e,i,r,s)}update(e){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,c,e)}this.updateElements(s,0,s.length,e)}updateElements(e,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=i;c<i+r;c++){let l=e[c],d=this.resolveDataElementOptions(c,l.active?"active":s),h=o.getPointPositionForValue(c,this.getParsed(c).r),m=a?o.xCenter:h.x,g=a?o.yCenter:h.y,y={x:m,y:g,angle:h.angle,skip:isNaN(m)||isNaN(g),options:d};this.updateElement(l,c,y,s)}}}return n})(),vB=(()=>{class n extends _r{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(e),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+c+", "+l+")"}}update(e){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=Ay(i,r,s);if(this._drawStart=o,this._drawCount=a,Sy(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=r;let d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:d},e)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(i,s),m=this.getSharedOptions(h),g=this.includeOptions(s,m),y=a.axis,b=c.axis,{spanGaps:v,segment:C}=this.options,R=fs(v)?v:Number.POSITIVE_INFINITY,P=this.chart._animationsDisabled||o||s==="none",V=i>0&&this.getParsed(i-1);for(let F=i;F<i+r;++F){let L=e[F],E=this.getParsed(F),w=P?L:{},I=bt(E[b]),A=w[y]=a.getPixelForValue(E[y],F),S=w[b]=o||I?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,E,l):E[b],F);w.skip=isNaN(A)||isNaN(S)||I,w.stop=F>0&&Math.abs(E[y]-V[y])>R,C&&(w.parsed=E,w.raw=d.data[F]),g&&(w.options=m||this.resolveDataElementOptions(F,L.active?"active":s)),P||this.updateElement(L,F,w,s),V=E}this.updateSharedOptions(m,s,h)}getMaxOverflow(){let e=this._cachedMeta,i=e.data||[];if(!this.options.showLine){let c=0;for(let l=i.length-1;l>=0;--l)c=Math.max(c,i[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),wB=Object.freeze({__proto__:null,BarController:mB,BubbleController:pB,DoughnutController:_v,LineController:bB,PieController:_B,PolarAreaController:nD,RadarController:yB,ScatterController:vB});function ps(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var tv=class n{static override(t){Object.assign(n.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return ps()}parse(){return ps()}format(){return ps()}add(){return ps()}diff(){return ps()}startOf(){return ps()}endOf(){return ps()}},yv={_date:tv};function IB(n,t,e,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&t===a.axis&&t!=="r"&&o&&s.length){let c=a._reversePixels?kS:ni;if(i){if(r._sharedOptions){let l=s[0],d=typeof l.getRange=="function"&&l.getRange(t);if(d){let h=c(s,t,e-d),m=c(s,t,e+d);return{lo:h.lo,hi:m.hi}}}}else return c(s,t,e)}return{lo:0,hi:s.length-1}}function sl(n,t,e,i,r){let s=n.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,c=s.length;a<c;++a){let{index:l,data:d}=s[a],{lo:h,hi:m}=IB(s[a],t,o,r);for(let g=h;g<=m;++g){let y=d[g];y.skip||i(y,l,g)}}}function EB(n){let t=n.indexOf("x")!==-1,e=n.indexOf("y")!==-1;return function(i,r){let s=t?Math.abs(i.x-r.x):0,o=e?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function Hy(n,t,e,i,r){let s=[];return!r&&!n.isPointInArea(t)||sl(n,e,t,function(a,c,l){!r&&!ii(a,n.chartArea,0)||a.inRange(t.x,t.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function xB(n,t,e,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:d}=o.getProps(["startAngle","endAngle"],i),{angle:h}=wy(o,{x:t.x,y:t.y});Fo(h,l,d)&&r.push({element:o,datasetIndex:a,index:c})}return sl(n,e,t,s),r}function TB(n,t,e,i,r,s){let o=[],a=EB(e),c=Number.POSITIVE_INFINITY;function l(d,h,m){let g=d.inRange(t.x,t.y,r);if(i&&!g)return;let y=d.getCenterPoint(r);if(!(!!s||n.isPointInArea(y))&&!g)return;let v=a(t,y);v<c?(o=[{element:d,datasetIndex:h,index:m}],c=v):v===c&&o.push({element:d,datasetIndex:h,index:m})}return sl(n,e,t,l),o}function Gy(n,t,e,i,r,s){return!s&&!n.isPointInArea(t)?[]:e==="r"&&!i?xB(n,t,e,r):TB(n,t,e,i,r,s)}function lC(n,t,e,i,r){let s=[],o=e==="x"?"inXRange":"inYRange",a=!1;return sl(n,e,t,(c,l,d)=>{c[o]&&c[o](t[e],r)&&(s.push({element:c,datasetIndex:l,index:d}),a=a||c.inRange(t.x,t.y,r))}),i&&!a?[]:s}var AB={evaluateInteractionItems:sl,modes:{index(n,t,e,i){let r=gr(t,n),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?Hy(n,r,s,i,o):Gy(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let d=a[0].index,h=l.data[d];h&&!h.skip&&c.push({element:h,datasetIndex:l.index,index:d})}),c):[]},dataset(n,t,e,i){let r=gr(t,n),s=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?Hy(n,r,s,i,o):Gy(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let d=0;d<l.length;++d)a.push({element:l[d],datasetIndex:c,index:d})}return a},point(n,t,e,i){let r=gr(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Hy(n,r,s,i,o)},nearest(n,t,e,i){let r=gr(t,n),s=e.axis||"xy",o=e.includeInvisible||!1;return Gy(n,r,s,e.intersect,i,o)},x(n,t,e,i){let r=gr(t,n);return lC(n,r,"x",e.intersect,i)},y(n,t,e,i){let r=gr(t,n);return lC(n,r,"y",e.intersect,i)}}},iD=["left","top","right","bottom"];function Yc(n,t){return n.filter(e=>e.pos===t)}function uC(n,t){return n.filter(e=>iD.indexOf(e.pos)===-1&&e.box.axis===t)}function Qc(n,t){return n.sort((e,i)=>{let r=t?i:e,s=t?e:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function SB(n){let t=[],e,i,r,s,o,a;for(e=0,i=(n||[]).length;e<i;++e)r=n[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function CB(n){let t={};for(let e of n){let{stack:i,pos:r,stackWeight:s}=e;if(!i||!iD.includes(r))continue;let o=t[i]||(t[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function DB(n,t){let e=CB(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=t,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=e[a.stack],d=l&&a.stackWeight/l.weight;a.horizontal?(a.width=d?d*i:c&&t.availableWidth,a.height=r):(a.width=i,a.height=d?d*r:c&&t.availableHeight)}return e}function RB(n){let t=SB(n),e=Qc(t.filter(l=>l.box.fullSize),!0),i=Qc(Yc(t,"left"),!0),r=Qc(Yc(t,"right")),s=Qc(Yc(t,"top"),!0),o=Qc(Yc(t,"bottom")),a=uC(t,"x"),c=uC(t,"y");return{fullSize:e,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:Yc(t,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function dC(n,t,e,i){return Math.max(n[e],t[e])+Math.max(n[i],t[i])}function rD(n,t){n.top=Math.max(n.top,t.top),n.left=Math.max(n.left,t.left),n.bottom=Math.max(n.bottom,t.bottom),n.right=Math.max(n.right,t.right)}function kB(n,t,e,i){let{pos:r,box:s}=e,o=n.maxPadding;if(!dt(r)){e.size&&(n[r]-=e.size);let h=i[e.stack]||{size:0,count:1};h.size=Math.max(h.size,e.horizontal?s.height:s.width),e.size=h.size/h.count,n[r]+=e.size}s.getPadding&&rD(o,s.getPadding());let a=Math.max(0,t.outerWidth-dC(o,n,"left","right")),c=Math.max(0,t.outerHeight-dC(o,n,"top","bottom")),l=a!==n.w,d=c!==n.h;return n.w=a,n.h=c,e.horizontal?{same:l,other:d}:{same:d,other:l}}function PB(n){let t=n.maxPadding;function e(i){let r=Math.max(t[i]-n[i],0);return n[i]+=r,r}n.y+=e("top"),n.x+=e("left"),e("right"),e("bottom")}function MB(n,t){let e=t.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return i(n?["left","right"]:["top","bottom"])}function Zc(n,t,e,i){let r=[],s,o,a,c,l,d;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||t.w,a.height||t.h,MB(a.horizontal,t));let{same:h,other:m}=kB(t,e,a,i);l|=h&&r.length,d=d||m,c.fullSize||r.push(a)}return l&&Zc(r,t,e,i)||d}function fh(n,t,e,i,r){n.top=e,n.left=t,n.right=t+i,n.bottom=e+r,n.width=i,n.height=r}function hC(n,t,e,i){let r=e.padding,{x:s,y:o}=t;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/l.weight||1;if(a.horizontal){let h=t.w*d,m=l.size||c.height;Oo(l.start)&&(o=l.start),c.fullSize?fh(c,r.left,o,e.outerWidth-r.right-r.left,m):fh(c,t.left+l.placed,o,h,m),l.start=o,l.placed+=h,o=c.bottom}else{let h=t.h*d,m=l.size||c.width;Oo(l.start)&&(s=l.start),c.fullSize?fh(c,s,r.top,m,e.outerHeight-r.bottom-r.top):fh(c,s,t.top+l.placed,m,h),l.start=s,l.placed+=h,s=c.right}}t.x=s,t.y=o}var je={addBox(n,t){n.boxes||(n.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},n.boxes.push(t)},removeBox(n,t){let e=n.boxes?n.boxes.indexOf(t):-1;e!==-1&&n.boxes.splice(e,1)},configure(n,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(n,t,e,i){if(!n)return;let r=Re(n.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=RB(n.boxes),c=a.vertical,l=a.horizontal;St(n.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let d=c.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),m=Object.assign({},r);rD(m,Re(i));let g=Object.assign({maxPadding:m,w:s,h:o,x:r.left,y:r.top},r),y=DB(c.concat(l),h);Zc(a.fullSize,g,h,y),Zc(c,g,h,y),Zc(l,g,h,y)&&Zc(c,g,h,y),PB(g),hC(a.leftAndTop,g,h,y),g.x+=g.w,g.y+=g.h,hC(a.rightAndBottom,g,h,y),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},St(a.chartArea,b=>{let v=b.box;Object.assign(v,n.chartArea),v.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},Eh=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,i){}removeEventListener(t,e,i){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,i,r){return e=Math.max(0,e||t.width),i=i||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):i)}}isAttached(t){return!0}updateConfig(t){}},ev=class extends Eh{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},vh="$chartjs",OB={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fC=n=>n===null||n==="";function NB(n,t){let e=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[vh]={initial:{height:i,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",fC(r)){let s=Vy(n,"width");s!==void 0&&(n.width=s)}if(fC(i))if(n.style.height==="")n.height=n.width/(t||2);else{let s=Vy(n,"height");s!==void 0&&(n.height=s)}return n}var sD=KS?{passive:!0}:!1;function FB(n,t,e){n&&n.addEventListener(t,e,sD)}function LB(n,t,e){n&&n.canvas&&n.canvas.removeEventListener(t,e,sD)}function VB(n,t){let e=OB[n.type]||n.type,{x:i,y:r}=gr(n,t);return{type:e,chart:t,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function xh(n,t){for(let e of n)if(e===t||e.contains(t))return!0}function UB(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||xh(a.addedNodes,i),o=o&&!xh(a.removedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function jB(n,t,e){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||xh(a.removedNodes,i),o=o&&!xh(a.addedNodes,i);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var el=new Map,mC=0;function oD(){let n=window.devicePixelRatio;n!==mC&&(mC=n,el.forEach((t,e)=>{e.currentDevicePixelRatio!==n&&t()}))}function BB(n,t){el.size||window.addEventListener("resize",oD),el.set(n,t)}function zB(n){el.delete(n),el.size||window.removeEventListener("resize",oD)}function qB(n,t,e){let i=n.canvas,r=i&&dh(i);if(!r)return;let s=Ty((a,c)=>{let l=r.clientWidth;e(a,c),l<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,d=c.contentRect.height;l===0&&d===0||s(l,d)});return o.observe(r),BB(n,s),o}function Ky(n,t,e){e&&e.disconnect(),t==="resize"&&zB(n)}function WB(n,t,e){let i=n.canvas,r=Ty(s=>{n.ctx!==null&&e(VB(s,n))},n);return FB(i,t,r),r}var nv=class extends Eh{acquireContext(t,e){let i=t&&t.getContext&&t.getContext("2d");return i&&i.canvas===t?(NB(t,e),i):null}releaseContext(t){let e=t.canvas;if(!e[vh])return!1;let i=e[vh].initial;["height","width"].forEach(s=>{let o=i[s];bt(o)?e.removeAttribute(s):e.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[vh],!0}addEventListener(t,e,i){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),o={attach:UB,detach:jB,resize:qB}[e]||WB;r[e]=o(t,e,i)}removeEventListener(t,e){let i=t.$proxies||(t.$proxies={}),r=i[e];if(!r)return;({attach:Ky,detach:Ky,resize:Ky}[e]||LB)(t,e,r),i[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,i,r){return GS(t,e,i,r)}isAttached(t){let e=t&&dh(t);return!!(e&&e.isConnected)}};function $B(n){return!uh()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?ev:nv}var Vn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}hasValue(){return fs(this.x)&&fs(this.y)}getProps(t,e){let i=this.$animations;if(!e||!i)return this;let r={};return t.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function HB(n,t){let e=n.options.ticks,i=GB(n),r=Math.min(e.maxTicksLimit||i,i),s=e.major.enabled?YB(t):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return QB(t,l,s,o/r),l;let d=KB(s,t,r);if(o>0){let h,m,g=o>1?Math.round((c-a)/(o-1)):null;for(mh(t,l,d,bt(g)?0:a-g,a),h=0,m=o-1;h<m;h++)mh(t,l,d,s[h],s[h+1]);return mh(t,l,d,c,bt(g)?t.length:c+g),l}return mh(t,l,d),l}function GB(n){let t=n.options.offset,e=n._tickSize(),i=n._length/e+(t?0:1),r=n._maxLength/e;return Math.floor(Math.min(i,r))}function KB(n,t,e){let i=XB(n),r=t.length/e;if(!i)return Math.max(r,1);let s=CS(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function YB(n){let t=[],e,i;for(e=0,i=n.length;e<i;e++)n[e].major&&t.push(e);return t}function QB(n,t,e,i){let r=0,s=e[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(t.push(n[o]),r++,s=e[r*i])}function mh(n,t,e,i,r){let s=st(i,0),o=Math.min(st(r,n.length),n.length),a=0,c,l,d;for(e=Math.ceil(e),r&&(c=r-i,e=c/Math.floor(c/e)),d=s;d<0;)a++,d=Math.round(s+a*e);for(l=Math.max(s,0);l<o;l++)l===d&&(t.push(n[l]),a++,d=Math.round(s+a*e))}function XB(n){let t=n.length,e,i;if(t<2)return!1;for(i=n[0],e=1;e<t;++e)if(n[e]-n[e-1]!==i)return!1;return i}var JB=n=>n==="left"?"right":n==="right"?"left":n,pC=(n,t,e)=>t==="top"||t==="left"?n[t]+e:n[t]-e,gC=(n,t)=>Math.min(t||n,n);function bC(n,t){let e=[],i=n.length/t,r=n.length,s=0;for(;s<r;s+=i)e.push(n[Math.floor(s)]);return e}function ZB(n,t,e){let i=n.ticks.length,r=Math.min(t,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(e&&(i===1?l=Math.max(c-s,o-c):t===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<t?l:-l,c<s-a||c>o+a)))return c}function tz(n,t){St(n,e=>{let i=e.gc,r=i.length/2,s;if(r>t){for(s=0;s<r;++s)delete e.data[i[s]];i.splice(0,r)}})}function Xc(n){return n.drawTicks?n.tickLength:0}function _C(n,t){if(!n.display)return 0;let e=ge(n.font,t),i=Re(n.padding);return(Ut(n.text)?n.text.length:1)*e.lineHeight+i.height}function ez(n,t){return Mi(n,{scale:t,type:"scale"})}function nz(n,t,e){return Mi(n,{tick:e,index:t,type:"tick"})}function iz(n,t,e){let i=sh(n);return(e&&t!=="right"||!e&&t==="right")&&(i=JB(i)),i}function rz(n,t,e,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:d}=c,h=0,m,g,y,b=o-r,v=a-s;if(n.isHorizontal()){if(g=De(i,s,a),dt(e)){let C=Object.keys(e)[0],R=e[C];y=d[C].getPixelForValue(R)+b-t}else e==="center"?y=(l.bottom+l.top)/2+b-t:y=pC(n,e,t);m=a-s}else{if(dt(e)){let C=Object.keys(e)[0],R=e[C];g=d[C].getPixelForValue(R)-v+t}else e==="center"?g=(l.left+l.right)/2-v+t:g=pC(n,e,t);y=De(i,o,r),h=e==="left"?-se:se}return{titleX:g,titleY:y,maxWidth:m,rotation:h}}var bs=class n extends Vn{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:i,_suggestedMax:r}=this;return t=Je(t,Number.POSITIVE_INFINITY),e=Je(e,Number.NEGATIVE_INFINITY),i=Je(i,Number.POSITIVE_INFINITY),r=Je(r,Number.NEGATIVE_INFINITY),{min:Je(t,i),max:Je(e,r),minDefined:Gt(t),maxDefined:Gt(e)}}getMinMax(t){let{min:e,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(i=Math.max(i,o.max));return e=s&&e>i?i:e,i=r&&e>i?e:i,{min:Je(e,Je(i,e)),max:Je(i,Je(e,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ft(this.options.beforeUpdate,[this])}update(t,e,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=BS(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?bC(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HB(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,i;this.isHorizontal()?(e=this.left,i=this.right):(e=this.top,i=this.bottom,t=!t),this._startPixel=e,this._endPixel=i,this._reversePixels=t,this._length=i-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ft(this.options.afterUpdate,[this])}beforeSetDimensions(){Ft(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ft(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Ft(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ft(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,i,r,s;for(i=0,r=t.length;i<r;i++)s=t[i],s.label=Ft(e.callback,[s.value,i,t],this)}afterTickToLabelConversion(){Ft(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ft(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,i=gC(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation,o=r,a,c,l;if(!this._isVisible()||!e.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let d=this._getLabelSizes(),h=d.widest.width,m=d.highest.height,g=_e(this.chart.width-h,0,this.maxWidth);a=t.offset?this.maxWidth/i:g/(i-1),h+6>a&&(a=g/(i-(t.offset?.5:1)),c=this.maxHeight-Xc(t.grid)-e.padding-_C(t.title,this.chart.options.font),l=Math.sqrt(h*h+m*m),o=ih(Math.min(Math.asin(_e((d.highest.height+6)/a,-1,1)),Math.asin(_e(c/l,-1,1))-Math.asin(_e(m/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ft(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ft(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=_C(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=Xc(s)+c):(t.height=this.maxHeight,t.width=Xc(s)+c),i.display&&this.ticks.length){let{first:l,last:d,widest:h,highest:m}=this._getLabelSizes(),g=i.padding*2,y=En(this.labelRotation),b=Math.cos(y),v=Math.sin(y);if(a){let C=i.mirror?0:v*h.width+b*m.height;t.height=Math.min(this.maxHeight,t.height+C+g)}else{let C=i.mirror?0:b*h.width+v*m.height;t.width=Math.min(this.maxWidth,t.width+C+g)}this._calculatePadding(l,d,v,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1),m=0,g=0;c?l?(m=r*t.width,g=i*e.height):(m=i*t.height,g=r*e.width):s==="start"?g=e.width:s==="end"?m=t.width:s!=="inner"&&(m=t.width/2,g=e.width/2),this.paddingLeft=Math.max((m-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((g-h+o)*this.width/(this.width-h),0)}else{let d=e.height/2,h=t.height/2;s==="start"?(d=0,h=t.height):s==="end"&&(d=e.height,h=0),this.paddingTop=d+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ft(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,i;for(e=0,i=t.length;e<i;e++)bt(t[e].label)&&(t.splice(e,1),i--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,i=this.ticks;e<i.length&&(i=bC(i,e)),this._labelSizes=t=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(e/gC(e,i)),l=0,d=0,h,m,g,y,b,v,C,R,P,V,F;for(h=0;h<e;h+=c){if(y=t[h].label,b=this._resolveTickFontOptions(h),r.font=v=b.string,C=s[v]=s[v]||{data:{},gc:[]},R=b.lineHeight,P=V=0,!bt(y)&&!Ut(y))P=qc(r,C.data,C.gc,P,y),V=R;else if(Ut(y))for(m=0,g=y.length;m<g;++m)F=y[m],!bt(F)&&!Ut(F)&&(P=qc(r,C.data,C.gc,P,F),V+=R);o.push(P),a.push(V),l=Math.max(P,l),d=Math.max(V,d)}tz(s,e);let L=o.indexOf(l),E=a.indexOf(d),w=I=>({width:o[I]||0,height:a[I]||0});return{first:w(0),last:w(e-1),widest:w(L),highest:w(E),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return RS(this._alignToPixels?fr(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let i=e[t];return i.$context||(i.$context=nz(this.getContext(),t,i))}return this.$context||(this.$context=ez(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=En(this.labelRotation),i=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),h=this.ticks.length+(c?1:0),m=Xc(s),g=[],y=a.setContext(this.getContext()),b=y.display?y.width:0,v=b/2,C=function(Lt){return fr(i,Lt,b)},R,P,V,F,L,E,w,I,A,S,D,T;if(o==="top")R=C(this.bottom),E=this.bottom-m,I=R-v,S=C(t.top)+v,T=t.bottom;else if(o==="bottom")R=C(this.top),S=t.top,T=C(t.bottom)-v,E=R+v,I=this.top+m;else if(o==="left")R=C(this.right),L=this.right-m,w=R-v,A=C(t.left)+v,D=t.right;else if(o==="right")R=C(this.left),A=t.left,D=C(t.right)-v,L=R+v,w=this.left+m;else if(e==="x"){if(o==="center")R=C((t.top+t.bottom)/2+.5);else if(dt(o)){let Lt=Object.keys(o)[0],kt=o[Lt];R=C(this.chart.scales[Lt].getPixelForValue(kt))}S=t.top,T=t.bottom,E=R+v,I=E+m}else if(e==="y"){if(o==="center")R=C((t.left+t.right)/2);else if(dt(o)){let Lt=Object.keys(o)[0],kt=o[Lt];R=C(this.chart.scales[Lt].getPixelForValue(kt))}L=R-v,w=L-m,A=t.left,D=t.right}let qt=st(r.ticks.maxTicksLimit,h),pt=Math.max(1,Math.ceil(h/qt));for(P=0;P<h;P+=pt){let Lt=this.getContext(P),kt=s.setContext(Lt),Ee=a.setContext(Lt),ue=kt.lineWidth,li=kt.color,ws=Ee.dash||[],Be=Ee.dashOffset,Yt=kt.tickWidth,ui=kt.tickColor,An=kt.tickBorderDash||[],di=kt.tickBorderDashOffset;V=ZB(this,P,c),V!==void 0&&(F=fr(i,V,ue),l?L=w=A=D=F:E=I=S=T=F,g.push({tx1:L,ty1:E,tx2:w,ty2:I,x1:A,y1:S,x2:D,y2:T,width:ue,color:li,borderDash:ws,borderDashOffset:Be,tickWidth:Yt,tickColor:ui,tickBorderDash:An,tickBorderDashOffset:di}))}return this._ticksLength=h,this._borderValue=R,g}_computeLabelItems(t){let e=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:d,mirror:h}=s,m=Xc(i.grid),g=m+d,y=h?-d:g,b=-En(this.labelRotation),v=[],C,R,P,V,F,L,E,w,I,A,S,D,T="middle";if(r==="top")L=this.bottom-y,E=this._getXAxisLabelAlignment();else if(r==="bottom")L=this.top+y,E=this._getXAxisLabelAlignment();else if(r==="left"){let pt=this._getYAxisLabelAlignment(m);E=pt.textAlign,F=pt.x}else if(r==="right"){let pt=this._getYAxisLabelAlignment(m);E=pt.textAlign,F=pt.x}else if(e==="x"){if(r==="center")L=(t.top+t.bottom)/2+g;else if(dt(r)){let pt=Object.keys(r)[0],Lt=r[pt];L=this.chart.scales[pt].getPixelForValue(Lt)+g}E=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")F=(t.left+t.right)/2-g;else if(dt(r)){let pt=Object.keys(r)[0],Lt=r[pt];F=this.chart.scales[pt].getPixelForValue(Lt)}E=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(c==="start"?T="top":c==="end"&&(T="bottom"));let qt=this._getLabelSizes();for(C=0,R=a.length;C<R;++C){P=a[C],V=P.label;let pt=s.setContext(this.getContext(C));w=this.getPixelForTick(C)+s.labelOffset,I=this._resolveTickFontOptions(C),A=I.lineHeight,S=Ut(V)?V.length:1;let Lt=S/2,kt=pt.color,Ee=pt.textStrokeColor,ue=pt.textStrokeWidth,li=E;o?(F=w,E==="inner"&&(C===R-1?li=this.options.reverse?"left":"right":C===0?li=this.options.reverse?"right":"left":li="center"),r==="top"?l==="near"||b!==0?D=-S*A+A/2:l==="center"?D=-qt.highest.height/2-Lt*A+A:D=-qt.highest.height+A/2:l==="near"||b!==0?D=A/2:l==="center"?D=qt.highest.height/2-Lt*A:D=qt.highest.height-S*A,h&&(D*=-1),b!==0&&!pt.showLabelBackdrop&&(F+=A/2*Math.sin(b))):(L=w,D=(1-S)*A/2);let ws;if(pt.showLabelBackdrop){let Be=Re(pt.backdropPadding),Yt=qt.heights[C],ui=qt.widths[C],An=D-Be.top,di=0-Be.left;switch(T){case"middle":An-=Yt/2;break;case"bottom":An-=Yt;break}switch(E){case"center":di-=ui/2;break;case"right":di-=ui;break;case"inner":C===R-1?di-=ui:C>0&&(di-=ui/2);break}ws={left:di,top:An,width:ui+Be.width,height:Yt+Be.height,color:pt.backdropColor}}v.push({label:V,font:I,textOffset:D,options:{rotation:b,color:kt,strokeColor:Ee,strokeWidth:ue,textAlign:li,textBaseline:T,translation:[F,L],backdrop:ws}})}return v}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-En(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,c=o.widest.width,l,d;return e==="left"?r?(d=this.right+s,i==="near"?l="left":i==="center"?(l="center",d+=c/2):(l="right",d+=c)):(d=this.right-a,i==="near"?l="right":i==="center"?(l="center",d-=c/2):(l="left",d=this.left)):e==="right"?r?(d=this.left+s,i==="near"?l="right":i==="center"?(l="center",d-=c/2):(l="left",d-=c)):(d=this.left+a,i==="near"?l="left":i==="center"?(l="center",d+=c/2):(l="right",d=this.right)):l="right",{textAlign:l,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:i,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(i,r,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){let e=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,a=(c,l,d)=>{!d.width||!d.color||(i.save(),i.lineWidth=d.width,i.strokeStyle=d.color,i.setLineDash(d.borderDash||[]),i.lineDashOffset=d.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){let c=r[s];e.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),e.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,d,h,m;this.isHorizontal()?(l=fr(t,this.left,o)-o/2,d=fr(t,this.right,a)+a/2,h=m=c):(h=fr(t,this.top,o)-o/2,m=fr(t,this.bottom,a)+a/2,l=d=c),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(l,h),e.lineTo(d,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&Hc(i,r);let s=this.getLabelItems(t);for(let o of s){let a=o.options,c=o.font,l=o.label,d=o.textOffset;mr(i,l,0,d,c,a)}r&&Gc(i)}drawTitle(){let{ctx:t,options:{position:e,title:i,reverse:r}}=this;if(!i.display)return;let s=ge(i.font),o=Re(i.padding),a=i.align,c=s.lineHeight/2;e==="bottom"||e==="center"||dt(e)?(c+=o.bottom,Ut(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:d,maxWidth:h,rotation:m}=rz(this,c,e,a);mr(t,i.text,0,0,s,{color:i.color,maxWidth:h,rotation:m,textAlign:iz(a,e,r),textBaseline:"middle",translation:[l,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,i=st(t.grid&&t.grid.z,-1),r=st(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=e.length;s<o;++s){let a=e[s];a[i]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return ge(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Bo=class{constructor(t,e,i){this.type=t,this.scope=e,this.override=i,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),i;az(e)&&(i=this.register(e));let r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,sz(t,o,i),this.override&&Kt.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,i=t.id,r=this.scope;i in e&&delete e[i],r&&i in Kt[r]&&(delete Kt[r][i],this.override&&delete hr[i])}};function sz(n,t,e){let i=ko(Object.create(null),[e?Kt.get(e):{},Kt.get(t),n.defaults]);Kt.set(t,i),n.defaultRoutes&&oz(t,n.defaultRoutes),n.descriptors&&Kt.describe(t,n.descriptors)}function oz(n,t){Object.keys(t).forEach(e=>{let i=e.split("."),r=i.pop(),s=[n].concat(i).join("."),o=t[e].split("."),a=o.pop(),c=o.join(".");Kt.route(s,r,c,a)})}function az(n){return"id"in n&&"defaults"in n}var iv=class{constructor(){this.controllers=new Bo(_r,"datasets",!0),this.elements=new Bo(Vn,"elements"),this.plugins=new Bo(Object,"plugins"),this.scales=new Bo(bs,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,i){[...e].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):St(r,o=>{let a=i||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,i){let r=nh(t);Ft(i["before"+r],[],i),e[t](i),Ft(i["after"+r],[],i)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let i=this._typedRegistries[e];if(i.isForType(t))return i}return this.plugins}_get(t,e,i){let r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+i+".");return r}},ai=new iv,rv=class{constructor(){this._init=[]}notify(t,e,i,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,i);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,i,r){r=r||{};for(let s of t){let o=s.plugin,a=o[i],c=[e,r,s.options];if(Ft(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){bt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let i=t&&t.config,r=st(i.options&&i.options.plugins,{}),s=cz(i);return r===!1&&!e?[]:uz(t,s,r,e)}_notifyStateChanges(t){let e=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(e,i),t,"stop"),this._notify(r(i,e),t,"start")}};function cz(n){let t={},e=[],i=Object.keys(ai.plugins.items);for(let s=0;s<i.length;s++)e.push(ai.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function lz(n,t){return!t&&n===!1?null:n===!0?{}:n}function uz(n,{plugins:t,localIds:e},i,r){let s=[],o=n.getContext();for(let a of t){let c=a.id,l=lz(i[c],r);l!==null&&s.push({plugin:a,options:dz(n.config,{plugin:a,local:e[c]},l,o)})}return s}function dz(n,{plugin:t,local:e},i,r){let s=n.pluginScopeKeys(t),o=n.getOptionScopes(i,s);return e&&t.defaults&&o.push(t.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function sv(n,t){let e=Kt.datasets[n]||{};return((t.datasets||{})[n]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function hz(n,t){let e=n;return n==="_index_"?e=t:n==="_value_"&&(e=t==="x"?"y":"x"),e}function fz(n,t){return n===t?"_index_":"_value_"}function yC(n){if(n==="x"||n==="y"||n==="r")return n}function mz(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ov(n,...t){if(yC(n))return n;for(let e of t){let i=e.axis||mz(e.position)||n.length>1&&yC(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function vC(n,t,e){if(e[t+"AxisID"]===n)return{axis:t}}function pz(n,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(e.length)return vC(n,"x",e[0])||vC(n,"y",e[0])}return{}}function gz(n,t){let e=hr[n.type]||{scales:{}},i=t.scales||{},r=sv(n.type,t),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!dt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=ov(o,a,pz(o,n),Kt.scales[a.type]),l=fz(c,r),d=e.scales||{};s[o]=Mo(Object.create(null),[{axis:c},a,d[c],d[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||sv(a,t),d=(hr[a]||{}).scales||{};Object.keys(d).forEach(h=>{let m=hz(h,c),g=o[m+"AxisID"]||m;s[g]=s[g]||Object.create(null),Mo(s[g],[{axis:m},i[g],d[h]])})}),Object.keys(s).forEach(o=>{let a=s[o];Mo(a,[Kt.scales[a.type],Kt.scale])}),s}function aD(n){let t=n.options||(n.options={});t.plugins=st(t.plugins,{}),t.scales=gz(n,t)}function cD(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function bz(n){return n=n||{},n.data=cD(n.data),aD(n),n}var wC=new Map,lD=new Set;function ph(n,t){let e=wC.get(n);return e||(e=t(),wC.set(n,e),lD.add(e)),e}var Jc=(n,t,e)=>{let i=Pi(t,e);i!==void 0&&n.add(i)},av=class{constructor(t){this._config=bz(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=cD(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),aD(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return ph(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return ph(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return ph(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,i=this.type;return ph(`${i}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let i=this._scopeCache,r=i.get(t);return(!r||e)&&(r=new Map,i.set(t,r)),r}getOptionScopes(t,e,i){let{options:r,type:s}=this,o=this._cachedScopes(t,i),a=o.get(e);if(a)return a;let c=new Set;e.forEach(d=>{t&&(c.add(t),d.forEach(h=>Jc(c,t,h))),d.forEach(h=>Jc(c,r,h)),d.forEach(h=>Jc(c,hr[s]||{},h)),d.forEach(h=>Jc(c,Kt,h)),d.forEach(h=>Jc(c,oh,h))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),lD.has(e)&&o.set(e,l),l}chartOptionScopes(){let{options:t,type:e}=this;return[t,hr[e]||{},Kt.datasets[e]||{},{type:e},Kt,oh]}resolveNamedOptions(t,e,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=IC(this._resolverCache,t,r),c=o;if(yz(o,e)){s.$shared=!1,i=Ri(i)?i():i;let l=this.createResolver(t,i,a);c=hs(o,i,l)}for(let l of e)s[l]=c[l];return s}createResolver(t,e,i=[""],r){let{resolver:s}=IC(this._resolverCache,t,i);return dt(e)?hs(s,e,void 0,r):s}};function IC(n,t,e){let i=n.get(t);i||(i=new Map,n.set(t,i));let r=e.join(),s=i.get(r);return s||(s={resolver:lh(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var _z=n=>dt(n)&&Object.getOwnPropertyNames(n).some(t=>Ri(n[t]));function yz(n,t){let{isScriptable:e,isIndexable:i}=My(n);for(let r of t){let s=e(r),o=i(r),a=(o||s)&&n[r];if(s&&(Ri(a)||_z(a))||o&&Ut(a))return!0}return!1}var vz="4.4.4",wz=["top","bottom","left","right","chartArea"];function EC(n,t){return n==="top"||n==="bottom"||wz.indexOf(n)===-1&&t==="x"}function xC(n,t){return function(e,i){return e[n]===i[n]?e[t]-i[t]:e[n]-i[n]}}function TC(n){let t=n.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Ft(e&&e.onComplete,[n],t)}function Iz(n){let t=n.chart,e=t.options.animation;Ft(e&&e.onProgress,[n],t)}function uD(n){return uh()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var wh={},AC=n=>{let t=uD(n);return Object.values(wh).filter(e=>e.canvas===t).pop()};function Ez(n,t,e){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=t){let o=n[r];delete n[r],(e>0||s>t)&&(n[s+e]=o)}}}function xz(n,t,e,i){return!e||n.type==="mouseout"?null:i?t:n}function gh(n,t,e){return n.options.clip?n[e]:t[e]}function Tz(n,t){let{xScale:e,yScale:i}=n;return e&&i?{left:gh(e,t,"left"),right:gh(e,t,"right"),top:gh(i,t,"top"),bottom:gh(i,t,"bottom")}:t}var qo=(()=>{class n{static defaults=Kt;static instances=wh;static overrides=hr;static registry=ai;static version=vz;static getChart=AC;static register(...e){ai.add(...e),SC()}static unregister(...e){ai.remove(...e),SC()}constructor(e,i){let r=this.config=new av(i),s=uD(e),o=AC(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||$B(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,d=l&&l.height,h=l&&l.width;if(this.id=xS(),this.ctx=c,this.canvas=l,this.width=h,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new rv,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=NS(m=>this.update(m),a.resizeDelay||0),this._dataChanges=[],wh[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Oi.listen(this,"complete",TC),Oi.listen(this,"progress",Iz),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return bt(e)?i&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ai}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Ly(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Ry(this.canvas,this.ctx),this}stop(){return Oi.stop(this),this}resize(e,i){Oi.running(this)?this._resizeBeforeDraw={width:e,height:i}:this._resize(e,i)}_resize(e,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,Ly(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Ft(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};St(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let e=this.options,i=e.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=ov(a,c),d=l==="r",h=l==="x";return{options:c,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),St(o,a=>{let c=a.options,l=c.id,d=ov(l,c),h=st(c.type,a.dtype);(c.position===void 0||EC(c.position,d)!==EC(a.dposition))&&(c.position=a.dposition),s[l]=!0;let m=null;if(l in r&&r[l].type===h)m=r[l];else{let g=ai.getScale(h);m=new g({id:l,type:h,ctx:this.ctx,chart:this}),r[m.id]=m}m.init(c,e)}),St(s,(a,c)=>{a||delete r[c]}),St(r,a=>{je.configure(this,a,a.options),je.addBox(this,a)})}_updateMetasets(){let e=this._metasets,i=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);e.splice(i,r-i)}this._sortedMetasets=e.slice(0).sort(xC("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:i}}=this;e.length>i.length&&delete this._stacks,e.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||sv(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=ai.getController(c),{datasetElementType:d,dataElementType:h}=Kt.datasets[c];Object.assign(l,{dataElementType:ai.getElement(h),datasetElementType:d&&ai.getElement(d)}),a.controller=new l(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){St(this.data.datasets,(e,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,h=this.data.datasets.length;d<h;d++){let{controller:m}=this.getDatasetMeta(d),g=!s&&o.indexOf(m)===-1;m.buildOrUpdateElements(g),a=Math.max(+m.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||St(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(xC("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){St(this.scales,e=>{je.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!by(i,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;Ez(e,s,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!by(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;je.update(this,this.width,this.height,e);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],St(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,Ri(e)?e({datasetIndex:i}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,i){let r=this.getDatasetMeta(e),s={meta:r,index:e,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Oi.has(this)?this.attached&&!Oi.running(this)&&Oi.start(this):(this.draw(),TC({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(e=0;e<i.length&&i[e].z<=0;++e)i[e].draw(this.chartArea);for(this._drawDatasets();e<i.length;++e)i[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i)this._drawDataset(e[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let i=this.ctx,r=e._clip,s=!r.disabled,o=Tz(e,this.chartArea),a={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&Hc(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),e.controller.draw(),s&&Gc(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(e){return ii(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,i,r,s){let o=AB.modes[i];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){let i=this.data.datasets[e],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:e,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Mi(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let i=this.data.datasets[e];if(!i)return!1;let r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(e,i){let r=this.getDatasetMeta(e);r.hidden=!i}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);Oo(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===e?s:void 0))}hide(e,i){this._updateVisibility(e,i,!1)}show(e,i){this._updateVisibility(e,i,!0)}_destroyDatasetMeta(e){let i=this._metasets[e];i&&i.controller&&i.controller._destroy(),delete this._metasets[e]}_stop(){let e,i;for(this.stop(),Oi.remove(this),e=0,i=this.data.datasets.length;e<i;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:i}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Ry(e,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete wh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),e[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};St(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,i=this.platform,r=(l,d)=>{i.addEventListener(this,l,d),e[l]=d},s=(l,d)=>{e[l]&&(i.removeEventListener(this,l,d),delete e[l])},o=(l,d)=>{this.canvas&&this.resize(l,d)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){St(this._listeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._listeners={},St(this._responsiveListeners,(e,i)=>{this.platform.removeEventListener(this,i,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=e.length;c<l;++c){a=e[c];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let i=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!Wc(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(e,i,r){return this._plugins.notify(this,e,i,r)}isPluginEnabled(e){return this._plugins._cache.filter(i=>i.plugin.id===e).length===1}_updateHoverStyles(e,i,r){let s=this.options.hover,o=(l,d)=>l.filter(h=>!d.some(m=>h.datasetIndex===m.datasetIndex&&h.index===m.index)),a=o(i,e),c=r?e:o(e,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(e,i){let r={event:e,replay:i,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(e,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(e,s,r,a),l=SS(e),d=xz(e,this._lastEvent,r,l);r&&(this._lastEvent=null,Ft(o.onHover,[e,c,this],this),l&&Ft(o.onClick,[e,c,this],this));let h=!Wc(c,s);return(h||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=d,h}_getActiveElements(e,i,r,s){if(e.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}return n})();function SC(){return St(qo.instances,n=>n._plugins.invalidate())}function Az(n,t,e){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=t,l=r/a;n.beginPath(),n.arc(s,o,a,i-l,e+l),c>r?(l=r/c,n.arc(s,o,c,e+l,i-l,!0)):n.arc(s,o,r,e+se,i-se),n.closePath(),n.clip()}function Sz(n){return ch(n,["outerStart","outerEnd","innerStart","innerEnd"])}function Cz(n,t,e,i){let r=Sz(n.options.borderRadius),s=(e-t)/2,o=Math.min(s,i*t/2),a=c=>{let l=(e-Math.min(s,c))*i/2;return _e(c,0,Math.min(s,l))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:_e(r.innerStart,0,o),innerEnd:_e(r.innerEnd,0,o)}}function jo(n,t,e,i){return{x:e+n*Math.cos(t),y:i+n*Math.sin(t)}}function Th(n,t,e,i,r,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:d}=t,h=Math.max(t.outerRadius+i+e-l,0),m=d>0?d+i+e+l:0,g=0,y=r-c;if(i){let pt=d>0?d-i:0,Lt=h>0?h-i:0,kt=(pt+Lt)/2,Ee=kt!==0?y*kt/(kt+i):y;g=(y-Ee)/2}let b=Math.max(.001,y*h-e/jt)/h,v=(y-b)/2,C=c+v+g,R=r-v-g,{outerStart:P,outerEnd:V,innerStart:F,innerEnd:L}=Cz(t,m,h,R-C),E=h-P,w=h-V,I=C+P/E,A=R-V/w,S=m+F,D=m+L,T=C+F/S,qt=R-L/D;if(n.beginPath(),s){let pt=(I+A)/2;if(n.arc(o,a,h,I,pt),n.arc(o,a,h,pt,A),V>0){let ue=jo(w,A,o,a);n.arc(ue.x,ue.y,V,A,R+se)}let Lt=jo(D,R,o,a);if(n.lineTo(Lt.x,Lt.y),L>0){let ue=jo(D,qt,o,a);n.arc(ue.x,ue.y,L,R+se,qt+Math.PI)}let kt=(R-L/m+(C+F/m))/2;if(n.arc(o,a,m,R-L/m,kt,!0),n.arc(o,a,m,kt,C+F/m,!0),F>0){let ue=jo(S,T,o,a);n.arc(ue.x,ue.y,F,T+Math.PI,C-se)}let Ee=jo(E,C,o,a);if(n.lineTo(Ee.x,Ee.y),P>0){let ue=jo(E,I,o,a);n.arc(ue.x,ue.y,P,C-se,I)}}else{n.moveTo(o,a);let pt=Math.cos(I)*h+o,Lt=Math.sin(I)*h+a;n.lineTo(pt,Lt);let kt=Math.cos(A)*h+o,Ee=Math.sin(A)*h+a;n.lineTo(kt,Ee)}n.closePath()}function Dz(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a}=t,c=t.endAngle;if(s){Th(n,t,e,i,c,r);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%Bt||Bt))}return Th(n,t,e,i,c,r),n.fill(),c}function Rz(n,t,e,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:c}=t,{borderWidth:l,borderJoinStyle:d,borderDash:h,borderDashOffset:m}=c,g=c.borderAlign==="inner";if(!l)return;n.setLineDash(h||[]),n.lineDashOffset=m,g?(n.lineWidth=l*2,n.lineJoin=d||"round"):(n.lineWidth=l,n.lineJoin=d||"bevel");let y=t.endAngle;if(s){Th(n,t,e,i,y,r);for(let b=0;b<s;++b)n.stroke();isNaN(a)||(y=o+(a%Bt||Bt))}g&&Az(n,t,y),s||(Th(n,t,e,i,y,r),n.stroke())}var cv=class extends Vn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=wy(r,{x:t,y:e}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:d,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),m=(this.options.spacing+this.options.borderWidth)/2,g=st(h,c-a),y=Fo(s,a,c)&&a!==c,b=g>=Bt||y,v=si(o,l+m,d+m);return b&&v}getCenterPoint(t){let{x:e,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:c,spacing:l}=this.options,d=(r+s)/2,h=(o+a+l+c)/2;return{x:e+Math.cos(d)*h,y:i+Math.sin(d)*h}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:i}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=i>Bt?Math.floor(i/Bt):0,i===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);let c=1-Math.sin(Math.min(jt,i||0)),l=r*c;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,Dz(t,this,l,s,o),Rz(t,this,l,s,o),t.restore()}};function dD(n,t,e=t){n.lineCap=st(e.borderCapStyle,t.borderCapStyle),n.setLineDash(st(e.borderDash,t.borderDash)),n.lineDashOffset=st(e.borderDashOffset,t.borderDashOffset),n.lineJoin=st(e.borderJoinStyle,t.borderJoinStyle),n.lineWidth=st(e.borderWidth,t.borderWidth),n.strokeStyle=st(e.borderColor,t.borderColor)}function kz(n,t,e){n.lineTo(e.x,e.y)}function Pz(n){return n.stepped?US:n.tension||n.cubicInterpolationMode==="monotone"?jS:kz}function hD(n,t,e={}){let i=n.length,{start:r=0,end:s=i-1}=e,{start:o,end:a}=t,c=Math.max(r,o),l=Math.min(s,a),d=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:t.loop,ilen:l<c&&!d?i+l-c:l-c}}function Mz(n,t,e,i){let{points:r,options:s}=t,{count:o,start:a,loop:c,ilen:l}=hD(r,e,i),d=Pz(s),{move:h=!0,reverse:m}=i||{},g,y,b;for(g=0;g<=l;++g)y=r[(a+(m?l-g:g))%o],!y.skip&&(h?(n.moveTo(y.x,y.y),h=!1):d(n,b,y,m,s.stepped),b=y);return c&&(y=r[(a+(m?l:0))%o],d(n,b,y,m,s.stepped)),!!c}function Oz(n,t,e,i){let r=t.points,{count:s,start:o,ilen:a}=hD(r,e,i),{move:c=!0,reverse:l}=i||{},d=0,h=0,m,g,y,b,v,C,R=V=>(o+(l?a-V:V))%s,P=()=>{b!==v&&(n.lineTo(d,v),n.lineTo(d,b),n.lineTo(d,C))};for(c&&(g=r[R(0)],n.moveTo(g.x,g.y)),m=0;m<=a;++m){if(g=r[R(m)],g.skip)continue;let V=g.x,F=g.y,L=V|0;L===y?(F<b?b=F:F>v&&(v=F),d=(h*d+V)/++h):(P(),n.lineTo(V,F),y=L,h=0,b=v=F),C=F}P()}function lv(n){let t=n.options,e=t.borderDash&&t.borderDash.length;return!n._decimated&&!n._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Oz:Mz}function Nz(n){return n.stepped?YS:n.tension||n.cubicInterpolationMode==="monotone"?QS:dr}function Fz(n,t,e,i){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,i)&&r.closePath()),dD(n,t.options),n.stroke(r)}function Lz(n,t,e,i){let{segments:r,options:s}=t,o=lv(t);for(let a of r)dD(n,s,a.style),n.beginPath(),o(n,t,a,{start:e,end:e+i-1})&&n.closePath(),n.stroke()}var Vz=typeof Path2D=="function";function Uz(n,t,e,i){Vz&&!t.options.segment?Fz(n,t,e,i):Lz(n,t,e,i)}var Wo=(()=>{class n extends Vn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;HS(this._points,r,e,s,i),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JS(this,this.options.segment))}first(){let e=this.segments,i=this.points;return e.length&&i[e[0].start]}last(){let e=this.segments,i=this.points,r=e.length;return r&&i[e[r-1].end]}interpolate(e,i){let r=this.options,s=e[i],o=this.points,a=zy(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=Nz(r),d,h;for(d=0,h=a.length;d<h;++d){let{start:m,end:g}=a[d],y=o[m],b=o[g];if(y===b){c.push(y);continue}let v=Math.abs((s-y[i])/(b[i]-y[i])),C=l(y,b,v,r.stepped);C[i]=e[i],c.push(C)}return c.length===1?c[0]:c}pathSegment(e,i,r){return lv(this)(e,this,i,r)}path(e,i,r){let s=this.segments,o=lv(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(e,this,c,{start:i,end:i+r-1});return!!a}draw(e,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),Uz(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function CC(n,t,e,i){let r=n.options,{[e]:s}=n.getProps([e],i);return Math.abs(t-s)<r.radius+r.hitRadius}var vv=(()=>{class n extends Vn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,i){return CC(this,e,"x",i)}inYRange(e,i){return CC(this,e,"y",i)}getCenterPoint(e){let{x:i,y:r}=this.getProps(["x","y"],e);return{x:i,y:r}}size(e){e=e||this.options||{};let i=e.radius||0;i=Math.max(i,i&&e.hoverRadius||0);let r=i&&e.borderWidth||0;return(i+r)*2}draw(e,i){let r=this.options;this.skip||r.radius<.1||!ii(this,i,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,ah(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return n})();function fD(n,t){let{x:e,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],t),a,c,l,d,h;return n.horizontal?(h=o/2,a=Math.min(e,r),c=Math.max(e,r),l=i-h,d=i+h):(h=s/2,a=e-h,c=e+h,l=Math.min(i,r),d=Math.max(i,r)),{left:a,top:l,right:c,bottom:d}}function br(n,t,e,i){return n?0:_e(t,e,i)}function jz(n,t,e){let i=n.options.borderWidth,r=n.borderSkipped,s=Py(i);return{t:br(r.top,s.top,0,e),r:br(r.right,s.right,0,t),b:br(r.bottom,s.bottom,0,e),l:br(r.left,s.left,0,t)}}function Bz(n,t,e){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=pr(r),o=Math.min(t,e),a=n.borderSkipped,c=i||dt(r);return{topLeft:br(!c||a.top||a.left,s.topLeft,0,o),topRight:br(!c||a.top||a.right,s.topRight,0,o),bottomLeft:br(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:br(!c||a.bottom||a.right,s.bottomRight,0,o)}}function zz(n){let t=fD(n),e=t.right-t.left,i=t.bottom-t.top,r=jz(n,e/2,i/2),s=Bz(n,e/2,i/2);return{outer:{x:t.left,y:t.top,w:e,h:i,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function Yy(n,t,e,i){let r=t===null,s=e===null,a=n&&!(r&&s)&&fD(n,i);return a&&(r||si(t,a.left,a.right))&&(s||si(e,a.top,a.bottom))}function qz(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Wz(n,t){n.rect(t.x,t.y,t.w,t.h)}function Qy(n,t,e={}){let i=n.x!==e.x?-t:0,r=n.y!==e.y?-t:0,s=(n.x+n.w!==e.x+e.w?t:0)-i,o=(n.y+n.h!==e.y+e.h?t:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var uv=class extends Vn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=zz(this),a=qz(o.radius)?Vo:Wz;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,Qy(o,e,s)),t.clip(),a(t,Qy(s,-e,o)),t.fillStyle=i,t.fill("evenodd")),t.beginPath(),a(t,Qy(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,i){return Yy(this,t,e,i)}inXRange(t,e){return Yy(this,t,null,e)}inYRange(t,e){return Yy(this,null,t,e)}getCenterPoint(t){let{x:e,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?i:(i+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},$z=Object.freeze({__proto__:null,ArcElement:cv,BarElement:uv,LineElement:Wo,PointElement:vv}),dv=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],DC=dv.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function mD(n){return dv[n%dv.length]}function pD(n){return DC[n%DC.length]}function Hz(n,t){return n.borderColor=mD(t),n.backgroundColor=pD(t),++t}function Gz(n,t){return n.backgroundColor=n.data.map(()=>mD(t++)),t}function Kz(n,t){return n.backgroundColor=n.data.map(()=>pD(t++)),t}function Yz(n){let t=0;return(e,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof _v?t=Gz(e,t):r instanceof nD?t=Kz(e,t):r&&(t=Hz(e,t))}}function RC(n){let t;for(t in n)if(n[t].borderColor||n[t].backgroundColor)return!0;return!1}function Qz(n){return n&&(n.borderColor||n.backgroundColor)}var Xz={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,t,e){if(!e.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!e.forceOverride&&(RC(i)||Qz(r)||s&&RC(s)))return;let o=Yz(n);i.forEach(o)}};function Jz(n,t,e,i,r){let s=r.samples||i;if(s>=e)return n.slice(t,t+e);let o=[],a=(e-2)/(s-2),c=0,l=t+e-1,d=t,h,m,g,y,b;for(o[c++]=n[d],h=0;h<s-2;h++){let v=0,C=0,R,P=Math.floor((h+1)*a)+1+t,V=Math.min(Math.floor((h+2)*a)+1,e)+t,F=V-P;for(R=P;R<V;R++)v+=n[R].x,C+=n[R].y;v/=F,C/=F;let L=Math.floor(h*a)+1+t,E=Math.min(Math.floor((h+1)*a)+1,e)+t,{x:w,y:I}=n[d];for(g=y=-1,R=L;R<E;R++)y=.5*Math.abs((w-v)*(n[R].y-I)-(w-n[R].x)*(C-I)),y>g&&(g=y,m=n[R],b=R);o[c++]=m,d=b}return o[c++]=n[l],o}function Zz(n,t,e,i){let r=0,s=0,o,a,c,l,d,h,m,g,y,b,v=[],C=t+e-1,R=n[t].x,V=n[C].x-R;for(o=t;o<t+e;++o){a=n[o],c=(a.x-R)/V*i,l=a.y;let F=c|0;if(F===d)l<y?(y=l,h=o):l>b&&(b=l,m=o),r=(s*r+a.x)/++s;else{let L=o-1;if(!bt(h)&&!bt(m)){let E=Math.min(h,m),w=Math.max(h,m);E!==g&&E!==L&&v.push(Rt($({},n[E]),{x:r})),w!==g&&w!==L&&v.push(Rt($({},n[w]),{x:r}))}o>0&&L!==g&&v.push(n[L]),v.push(a),d=F,s=0,y=b=l,h=m=g=o}}return v}function gD(n){if(n._decimated){let t=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function kC(n){n.data.datasets.forEach(t=>{gD(t)})}function t4(n,t){let e=t.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(i=_e(ni(t,s.axis,o).lo,0,e-1)),l?r=_e(ni(t,s.axis,a).hi+1,i,e)-i:r=e-i,{start:i,count:r}}var e4={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,t,e)=>{if(!e.enabled){kC(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,c=n.getDatasetMeta(s),l=o||r.data;if(Uo([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let d=n.scales[c.xAxisID];if(d.type!=="linear"&&d.type!=="time"||n.options.parsing)return;let{start:h,count:m}=t4(c,l),g=e.threshold||4*i;if(m<=g){gD(r);return}bt(o)&&(r._data=l,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let y;switch(e.algorithm){case"lttb":y=Jz(l,h,m,i,e);break;case"min-max":y=Zz(l,h,m,i);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=y})},destroy(n){kC(n)}};function n4(n,t,e){let i=n.segments,r=n.points,s=t.points,o=[];for(let a of i){let{start:c,end:l}=a;l=wv(c,l,r);let d=hv(e,r[c],r[l],a.loop);if(!t.segments){o.push({source:a,target:d,start:r[c],end:r[l]});continue}let h=zy(t,d);for(let m of h){let g=hv(e,s[m.start],s[m.end],m.loop),y=By(a,r,g);for(let b of y)o.push({source:b,target:m,start:{[e]:PC(d,g,"start",Math.max)},end:{[e]:PC(d,g,"end",Math.min)}})}}return o}function hv(n,t,e,i){if(i)return;let r=t[n],s=e[n];return n==="angle"&&(r=Xe(r),s=Xe(s)),{property:n,start:r,end:s}}function i4(n,t){let{x:e=null,y:i=null}=n||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=wv(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):e!==null&&(s.push({x:e,y:c.y}),s.push({x:e,y:l.y}))}),s}function wv(n,t,e){for(;t>n;t--){let i=e[t];if(!isNaN(i.x)&&!isNaN(i.y))break}return t}function PC(n,t,e,i){return n&&t?i(n[e],t[e]):n?n[e]:t?t[e]:0}function bD(n,t){let e=[],i=!1;return Ut(n)?(i=!0,e=n):e=i4(n,t),e.length?new Wo({points:e,options:{tension:0},_loop:i,_fullLoop:i}):null}function MC(n){return n&&n.fill!==!1}function r4(n,t,e){let r=n[t].fill,s=[t],o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Gt(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function s4(n,t,e){let i=l4(n);if(dt(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Gt(r)&&Math.floor(r)===r?o4(i[0],t,r,e):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function o4(n,t,e,i){return(n==="-"||n==="+")&&(e=t+e),e===t||e<0||e>=i?!1:e}function a4(n,t){let e=null;return n==="start"?e=t.bottom:n==="end"?e=t.top:dt(n)?e=t.getPixelForValue(n.value):t.getBasePixel&&(e=t.getBasePixel()),e}function c4(n,t,e){let i;return n==="start"?i=e:n==="end"?i=t.options.reverse?t.min:t.max:dt(n)?i=n.value:i=t.getBaseValue(),i}function l4(n){let t=n.options,e=t.fill,i=st(e&&e.target,e);return i===void 0&&(i=!!t.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function u4(n){let{scale:t,index:e,line:i}=n,r=[],s=i.segments,o=i.points,a=d4(t,e);a.push(bD({x:null,y:t.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let d=l.start;d<=l.end;d++)h4(r,o[d],a)}return new Wo({points:r,options:{}})}function d4(n,t){let e=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function h4(n,t,e){let i=[];for(let r=0;r<e.length;r++){let s=e[r],{first:o,last:a,point:c}=f4(s,t,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function f4(n,t,e){let i=n.interpolate(t,e);if(!i)return{};let r=i[e],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let d=s[l],h=o[d.start][e],m=o[d.end][e];if(si(r,h,m)){a=r===h,c=r===m;break}}return{first:a,last:c,point:i}}var Ah=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,i){let{x:r,y:s,radius:o}=this;return e=e||{start:0,end:Bt},t.arc(r,s,o,e.end,e.start,!0),!i.bounds}interpolate(t){let{x:e,y:i,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function m4(n){let{chart:t,fill:e,line:i}=n;if(Gt(e))return p4(t,e);if(e==="stack")return u4(n);if(e==="shape")return!0;let r=g4(n);return r instanceof Ah?r:bD(r,i)}function p4(n,t){let e=n.getDatasetMeta(t);return e&&n.isDatasetVisible(t)?e.dataset:null}function g4(n){return(n.scale||{}).getPointPositionForValue?_4(n):b4(n)}function b4(n){let{scale:t={},fill:e}=n,i=a4(e,t);if(Gt(i)){let r=t.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function _4(n){let{scale:t,fill:e}=n,i=t.options,r=t.getLabels().length,s=i.reverse?t.max:t.min,o=c4(e,t,s),a=[];if(i.grid.circular){let c=t.getPointPositionForValue(0,s);return new Ah({x:c.x,y:c.y,radius:t.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(t.getPointPositionForValue(c,o));return a}function Xy(n,t,e){let i=m4(t),{line:r,scale:s,axis:o}=t,a=r.options,c=a.fill,l=a.backgroundColor,{above:d=l,below:h=l}=c||{};i&&r.points.length&&(Hc(n,e),y4(n,{line:r,target:i,above:d,below:h,area:e,scale:s,axis:o}),Gc(n))}function y4(n,t){let{line:e,target:i,above:r,below:s,area:o,scale:a}=t,c=e._loop?"angle":t.axis;n.save(),c==="x"&&s!==r&&(OC(n,i,o.top),NC(n,{line:e,target:i,color:r,scale:a,property:c}),n.restore(),n.save(),OC(n,i,o.bottom)),NC(n,{line:e,target:i,color:s,scale:a,property:c}),n.restore()}function OC(n,t,e){let{segments:i,points:r}=t,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,d=r[c],h=r[wv(c,l,r)];s?(n.moveTo(d.x,d.y),s=!1):(n.lineTo(d.x,e),n.lineTo(d.x,d.y)),o=!!t.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(h.x,e)}n.lineTo(t.first().x,e),n.closePath(),n.clip()}function NC(n,t){let{line:e,target:i,property:r,color:s,scale:o}=t,a=n4(e,i,r);for(let{source:c,target:l,start:d,end:h}of a){let{style:{backgroundColor:m=s}={}}=c,g=i!==!0;n.save(),n.fillStyle=m,v4(n,o,g&&hv(r,d,h)),n.beginPath();let y=!!e.pathSegment(n,c),b;if(g){y?n.closePath():FC(n,i,h,r);let v=!!i.pathSegment(n,l,{move:y,reverse:!0});b=y&&v,b||FC(n,i,d,r)}n.closePath(),n.fill(b?"evenodd":"nonzero"),n.restore()}}function v4(n,t,e){let{top:i,bottom:r}=t.chart.chartArea,{property:s,start:o,end:a}=e||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function FC(n,t,e,i){let r=t.interpolate(e,i);r&&n.lineTo(r.x,r.y)}var w4={id:"filler",afterDatasetsUpdate(n,t,e){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof Wo&&(c={visible:n.isDatasetVisible(o),index:o,fill:s4(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=r4(r,o,e.propagate))},beforeDraw(n,t,e){let i=e.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&Xy(n.ctx,a,s))}},beforeDatasetsDraw(n,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;MC(s)&&Xy(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,t,e){let i=t.meta.$filler;!MC(i)||e.drawTime!=="beforeDatasetDraw"||Xy(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},LC=(n,t)=>{let{boxHeight:e=t,boxWidth:i=t}=n;return n.usePointStyle&&(e=Math.min(e,t),i=n.pointStyleWidth||Math.min(i,t)),{boxWidth:i,boxHeight:e,itemHeight:Math.max(t,e)}},I4=(n,t)=>n!==null&&t!==null&&n.datasetIndex===t.datasetIndex&&n.index===t.index,Sh=class extends Vn{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,i){this.maxWidth=t,this.maxHeight=e,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Ft(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(i=>t.filter(i,this.chart.data))),t.sort&&(e=e.sort((i,r)=>t.sort(i,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let i=t.labels,r=ge(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=LC(i,s),l,d;e.font=r.string,this.isHorizontal()?(l=this.maxWidth,d=this._fitRows(o,s,a,c)+10):(d=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],d=r+a,h=t;s.textAlign="left",s.textBaseline="middle";let m=-1,g=-d;return this.legendItems.forEach((y,b)=>{let v=i+e/2+s.measureText(y.text).width;(b===0||l[l.length-1]+v+2*a>o)&&(h+=d,l[l.length-(b>0?0:1)]=0,g+=d,m++),c[b]={left:0,top:g,row:m,width:v,height:r},l[l.length-1]+=v+a}),h}_fitCols(t,e,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],d=o-t,h=a,m=0,g=0,y=0,b=0;return this.legendItems.forEach((v,C)=>{let{itemWidth:R,itemHeight:P}=E4(i,e,s,v,r);C>0&&g+P+2*a>d&&(h+=m+a,l.push({width:m,height:g}),y+=m+a,b++,m=g=0),c[C]={left:y,top:g,col:b,width:R,height:P},m=Math.max(m,R),g+=P+a}),h+=m,l.push({width:m,height:g}),h}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:i,labels:{padding:r},rtl:s}}=this,o=ms(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=De(i,this.left+r,this.right-this.lineWidths[a]);for(let l of e)a!==l.row&&(a=l.row,c=De(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+t+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=De(i,this.top+t+r,this.bottom-this.columnSizes[a].height);for(let l of e)l.col!==a&&(a=l.col,c=De(i,this.top+t+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;Hc(t,this),this._draw(),Gc(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:i,ctx:r}=this,{align:s,labels:o}=t,a=Kt.color,c=ms(t.rtl,this.left,this.width),l=ge(o.font),{padding:d}=o,h=l.size,m=h/2,g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:y,boxHeight:b,itemHeight:v}=LC(o,h),C=function(L,E,w){if(isNaN(y)||y<=0||isNaN(b)||b<0)return;r.save();let I=st(w.lineWidth,1);if(r.fillStyle=st(w.fillStyle,a),r.lineCap=st(w.lineCap,"butt"),r.lineDashOffset=st(w.lineDashOffset,0),r.lineJoin=st(w.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=st(w.strokeStyle,a),r.setLineDash(st(w.lineDash,[])),o.usePointStyle){let A={radius:b*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:I},S=c.xPlus(L,y/2),D=E+m;ky(r,A,S,D,o.pointStyleWidth&&y)}else{let A=E+Math.max((h-b)/2,0),S=c.leftForLtr(L,y),D=pr(w.borderRadius);r.beginPath(),Object.values(D).some(T=>T!==0)?Vo(r,{x:S,y:A,w:y,h:b,radius:D}):r.rect(S,A,y,b),r.fill(),I!==0&&r.stroke()}r.restore()},R=function(L,E,w){mr(r,w.text,L,E+v/2,l,{strikethrough:w.hidden,textAlign:c.textAlign(w.textAlign)})},P=this.isHorizontal(),V=this._computeTitleHeight();P?g={x:De(s,this.left+d,this.right-i[0]),y:this.top+d+V,line:0}:g={x:this.left+d,y:De(s,this.top+V+d,this.bottom-e[0].height),line:0},Uy(this.ctx,t.textDirection);let F=v+d;this.legendItems.forEach((L,E)=>{r.strokeStyle=L.fontColor,r.fillStyle=L.fontColor;let w=r.measureText(L.text).width,I=c.textAlign(L.textAlign||(L.textAlign=o.textAlign)),A=y+m+w,S=g.x,D=g.y;c.setWidth(this.width),P?E>0&&S+A+d>this.right&&(D=g.y+=F,g.line++,S=g.x=De(s,this.left+d,this.right-i[g.line])):E>0&&D+F>this.bottom&&(S=g.x=S+e[g.line].width+d,g.line++,D=g.y=De(s,this.top+V+d,this.bottom-e[g.line].height));let T=c.x(S);if(C(T,D,L),S=FS(I,S+y+m,P?S+A:this.right,t.rtl),R(c.x(S),D,L),P)g.x+=A+d;else if(typeof L.text!="string"){let qt=l.lineHeight;g.y+=_D(L,qt)+d}else g.y+=F}),jy(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,i=ge(e.font),r=Re(e.padding);if(!e.display)return;let s=ms(t.rtl,this.left,this.width),o=this.ctx,a=e.position,c=i.size/2,l=r.top+c,d,h=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),d=this.top+l,h=De(t.align,h,this.right-m);else{let y=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);d=l+De(t.align,this.top,this.bottom-y-t.labels.padding-this._computeTitleHeight())}let g=De(a,h,h+m);o.textAlign=s.textAlign(sh(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=i.string,mr(o,e.text,g,d,i)}_computeTitleHeight(){let t=this.options.title,e=ge(t.font),i=Re(t.padding);return t.display?e.lineHeight+i.height:0}_getLegendItemAt(t,e){let i,r,s;if(si(t,this.left,this.right)&&si(e,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],si(t,r.left,r.left+r.width)&&si(e,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(t){let e=this.options;if(!A4(t.type,e))return;let i=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let r=this._hoveredItem,s=I4(r,i);r&&!s&&Ft(e.onLeave,[t,r,this],this),this._hoveredItem=i,i&&!s&&Ft(e.onHover,[t,i,this],this)}else i&&Ft(e.onClick,[t,i,this],this)}};function E4(n,t,e,i,r){let s=x4(i,n,t,e),o=T4(r,i,t.lineHeight);return{itemWidth:s,itemHeight:o}}function x4(n,t,e,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+i.measureText(r).width}function T4(n,t,e){let i=n;return typeof t.text!="string"&&(i=_D(t,e)),i}function _D(n,t){let e=n.text?n.text.length:0;return t*e}function A4(n,t){return!!((n==="mousemove"||n==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(n==="click"||n==="mouseup"))}var S4={id:"legend",_element:Sh,start(n,t,e){let i=n.legend=new Sh({ctx:n.ctx,options:e,chart:n});je.configure(n,i,e),je.addBox(n,i)},stop(n){je.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,t,e){let i=n.legend;je.configure(n,i,e),i.options=e},afterUpdate(n){let t=n.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(n,t){t.replay||n.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,t,e){let i=t.datasetIndex,r=e.chart;r.isDatasetVisible(i)?(r.hide(i),t.hidden=!0):(r.show(i),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let t=n.data.datasets,{labels:{usePointStyle:e,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(e?0:void 0),d=Re(l.borderWidth);return{text:t[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},nl=class extends Vn{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=Ut(i.text)?i.text.length:1;this._padding=Re(i.padding);let s=r*ge(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,d,h;return this.isHorizontal()?(d=De(a,i,s),h=e+t,l=s-i):(o.position==="left"?(d=i+t,h=De(a,r,e),c=jt*-.5):(d=s-t,h=De(a,e,r),c=jt*.5),l=r-e),{titleX:d,titleY:h,maxWidth:l,rotation:c}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let i=ge(e.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);mr(t,e.text,0,0,i,{color:e.color,maxWidth:c,rotation:l,textAlign:sh(e.align),textBaseline:"middle",translation:[o,a]})}};function C4(n,t){let e=new nl({ctx:n.ctx,options:t,chart:n});je.configure(n,e,t),je.addBox(n,e),n.titleBlock=e}var Iv={id:"title",_element:nl,start(n,t,e){C4(n,e)},stop(n){let t=n.titleBlock;je.removeBox(n,t),delete n.titleBlock},beforeUpdate(n,t,e){let i=n.titleBlock;je.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},bh=new WeakMap,D4={id:"subtitle",start(n,t,e){let i=new nl({ctx:n.ctx,options:e,chart:n});je.configure(n,i,e),je.addBox(n,i),bh.set(n,i)},stop(n){je.removeBox(n,bh.get(n)),bh.delete(n)},beforeUpdate(n,t,e){let i=bh.get(n);je.configure(n,i,e),i.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},tl={average(n){if(!n.length)return!1;let t,e,i=new Set,r=0,s=0;for(t=0,e=n.length;t<e;++t){let a=n[t].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,t){if(!n.length)return!1;let e=t.x,i=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),d=th(t,l);d<r&&(r=d,a=c)}}if(a){let c=a.tooltipPosition();e=c.x,i=c.y}return{x:e,y:i}}};function oi(n,t){return t&&(Ut(t)?Array.prototype.push.apply(n,t):n.push(t)),n}function Ni(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function R4(n,t){let{element:e,datasetIndex:i,index:r}=t,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:e}}function VC(n,t){let e=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=t,c=ge(t.bodyFont),l=ge(t.titleFont),d=ge(t.footerFont),h=s.length,m=r.length,g=i.length,y=Re(t.padding),b=y.height,v=0,C=i.reduce((V,F)=>V+F.before.length+F.lines.length+F.after.length,0);if(C+=n.beforeBody.length+n.afterBody.length,h&&(b+=h*l.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),C){let V=t.displayColors?Math.max(a,c.lineHeight):c.lineHeight;b+=g*V+(C-g)*c.lineHeight+(C-1)*t.bodySpacing}m&&(b+=t.footerMarginTop+m*d.lineHeight+(m-1)*t.footerSpacing);let R=0,P=function(V){v=Math.max(v,e.measureText(V).width+R)};return e.save(),e.font=l.string,St(n.title,P),e.font=c.string,St(n.beforeBody.concat(n.afterBody),P),R=t.displayColors?o+2+t.boxPadding:0,St(i,V=>{St(V.before,P),St(V.lines,P),St(V.after,P)}),R=0,e.font=d.string,St(n.footer,P),e.restore(),v+=y.width,{width:v,height:b}}function k4(n,t){let{y:e,height:i}=t;return e<i/2?"top":e>n.height-i/2?"bottom":"center"}function P4(n,t,e,i){let{x:r,width:s}=i,o=e.caretSize+e.caretPadding;if(n==="left"&&r+s+o>t.width||n==="right"&&r-s-o<0)return!0}function M4(n,t,e,i){let{x:r,width:s}=e,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),P4(l,n,t,e)&&(l="center"),l}function UC(n,t,e){let i=e.yAlign||t.yAlign||k4(n,e);return{xAlign:e.xAlign||t.xAlign||M4(n,t,e,i),yAlign:i}}function O4(n,t){let{x:e,width:i}=n;return t==="right"?e-=i:t==="center"&&(e-=i/2),e}function N4(n,t,e){let{y:i,height:r}=n;return t==="top"?i+=e:t==="bottom"?i-=r+e:i-=r/2,i}function jC(n,t,e,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=e,l=r+s,{topLeft:d,topRight:h,bottomLeft:m,bottomRight:g}=pr(o),y=O4(t,a),b=N4(t,c,l);return c==="center"?a==="left"?y+=l:a==="right"&&(y-=l):a==="left"?y-=Math.max(d,m)+r:a==="right"&&(y+=Math.max(h,g)+r),{x:_e(y,0,i.width-t.width),y:_e(b,0,i.height-t.height)}}function _h(n,t,e){let i=Re(e.padding);return t==="center"?n.x+n.width/2:t==="right"?n.x+n.width-i.right:n.x+i.left}function BC(n){return oi([],Ni(n))}function F4(n,t,e){return Mi(n,{tooltip:t,tooltipItems:e,type:"tooltip"})}function zC(n,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?n.override(e):n}var yD={beforeTitle:ri,title(n){if(n.length>0){let t=n[0],e=t.chart.data.labels,i=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(i>0&&t.dataIndex<i)return e[t.dataIndex]}return""},afterTitle:ri,beforeBody:ri,beforeLabel:ri,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let t=n.dataset.label||"";t&&(t+=": ");let e=n.formattedValue;return bt(e)||(t+=e),t},labelColor(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let e=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:ri,afterBody:ri,beforeFooter:ri,footer:ri,afterFooter:ri};function Ze(n,t,e,i){let r=n[t].call(e,i);return typeof r>"u"?yD[t].call(e,i):r}var qC=(()=>{class n extends Vn{static positioners=tl;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new Ih(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=F4(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,i){let{callbacks:r}=i,s=Ze(r,"beforeTitle",this,e),o=Ze(r,"title",this,e),a=Ze(r,"afterTitle",this,e),c=[];return c=oi(c,Ni(s)),c=oi(c,Ni(o)),c=oi(c,Ni(a)),c}getBeforeBody(e,i){return BC(Ze(i.callbacks,"beforeBody",this,e))}getBody(e,i){let{callbacks:r}=i,s=[];return St(e,o=>{let a={before:[],lines:[],after:[]},c=zC(r,o);oi(a.before,Ni(Ze(c,"beforeLabel",this,o))),oi(a.lines,Ze(c,"label",this,o)),oi(a.after,Ni(Ze(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,i){return BC(Ze(i.callbacks,"afterBody",this,e))}getFooter(e,i){let{callbacks:r}=i,s=Ze(r,"beforeFooter",this,e),o=Ze(r,"footer",this,e),a=Ze(r,"afterFooter",this,e),c=[];return c=oi(c,Ni(s)),c=oi(c,Ni(o)),c=oi(c,Ni(a)),c}_createItems(e){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,d;for(l=0,d=i.length;l<d;++l)c.push(R4(this.chart,i[l]));return e.filter&&(c=c.filter((h,m,g)=>e.filter(h,m,g,r))),e.itemSort&&(c=c.sort((h,m)=>e.itemSort(h,m,r))),St(c,h=>{let m=zC(e.callbacks,h);s.push(Ze(m,"labelColor",this,h)),o.push(Ze(m,"labelPointStyle",this,h)),a.push(Ze(m,"labelTextColor",this,h))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(e,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=tl[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=VC(this,r),d=Object.assign({},c,l),h=UC(this.chart,r,d),m=jC(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,o={opacity:1,x:m.x,y:m.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(e,i,r,s){let o=this.getCaretPosition(e,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(e,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:m}=pr(c),{x:g,y}=e,{width:b,height:v}=i,C,R,P,V,F,L;return o==="center"?(F=y+v/2,s==="left"?(C=g,R=C-a,V=F+a,L=F-a):(C=g+b,R=C+a,V=F-a,L=F+a),P=C):(s==="left"?R=g+Math.max(l,h)+a:s==="right"?R=g+b-Math.max(d,m)-a:R=this.caretX,o==="top"?(V=y,F=V-a,C=R-a,P=R+a):(V=y+v,F=V+a,C=R+a,P=R-a),L=V),{x1:C,x2:R,x3:P,y1:V,y2:F,y3:L}}drawTitle(e,i,r){let s=this.title,o=s.length,a,c,l;if(o){let d=ms(r.rtl,this.x,this.width);for(e.x=_h(this,r.titleAlign,r),i.textAlign=d.textAlign(r.titleAlign),i.textBaseline="middle",a=ge(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+c,l+1===o&&(e.y+=r.titleMarginBottom-c)}}_drawColorBox(e,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:d}=o,h=ge(o.bodyFont),m=_h(this,"left",o),g=s.x(m),y=l<h.lineHeight?(h.lineHeight-l)/2:0,b=i.y+y;if(o.usePointStyle){let v={radius:Math.min(d,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},C=s.leftForLtr(g,d)+d/2,R=b+l/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,ah(e,v,C,R),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,ah(e,v,C,R)}else{e.lineWidth=dt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let v=s.leftForLtr(g,d),C=s.leftForLtr(s.xPlus(g,1),d-2),R=pr(a.borderRadius);Object.values(R).some(P=>P!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,Vo(e,{x:v,y:b,w:d,h:l,radius:R}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),Vo(e,{x:C,y:b+1,w:d-2,h:l-2,radius:R}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,b,d,l),e.strokeRect(v,b,d,l),e.fillStyle=a.backgroundColor,e.fillRect(C,b+1,d-2,l-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:d,boxPadding:h}=r,m=ge(r.bodyFont),g=m.lineHeight,y=0,b=ms(r.rtl,this.x,this.width),v=function(I){i.fillText(I,b.x(e.x+y),e.y+g/2),e.y+=g+o},C=b.textAlign(a),R,P,V,F,L,E,w;for(i.textAlign=a,i.textBaseline="middle",i.font=m.string,e.x=_h(this,C,r),i.fillStyle=r.bodyColor,St(this.beforeBody,v),y=c&&C!=="right"?a==="center"?d/2+h:d+2+h:0,F=0,E=s.length;F<E;++F){for(R=s[F],P=this.labelTextColors[F],i.fillStyle=P,St(R.before,v),V=R.lines,c&&V.length&&(this._drawColorBox(i,e,F,b,r),g=Math.max(m.lineHeight,l)),L=0,w=V.length;L<w;++L)v(V[L]),g=m.lineHeight;St(R.after,v)}y=0,g=m.lineHeight,St(this.afterBody,v),e.y-=o}drawFooter(e,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=ms(r.rtl,this.x,this.width);for(e.x=_h(this,r.footerAlign,r),e.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=ge(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=e,{width:d,height:h}=r,{topLeft:m,topRight:g,bottomLeft:y,bottomRight:b}=pr(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+m,l),a==="top"&&this.drawCaret(e,i,r,s),i.lineTo(c+d-g,l),i.quadraticCurveTo(c+d,l,c+d,l+g),a==="center"&&o==="right"&&this.drawCaret(e,i,r,s),i.lineTo(c+d,l+h-b),i.quadraticCurveTo(c+d,l+h,c+d-b,l+h),a==="bottom"&&this.drawCaret(e,i,r,s),i.lineTo(c+y,l+h),i.quadraticCurveTo(c,l+h,c,l+h-y),a==="center"&&o==="left"&&this.drawCaret(e,i,r,s),i.lineTo(c,l+m),i.quadraticCurveTo(c,l,c+m,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(e){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=tl[e.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=VC(this,e),l=Object.assign({},a,this._size),d=UC(i,e,l),h=jC(e,l,d,i);(s._to!==h.x||o._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(e){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=Re(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,i),Uy(e,i.textDirection),o.y+=a.top,this.drawTitle(o,e,i),this.drawBody(o,e,i),this.drawFooter(o,e,i),jy(e,i.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,i){let r=this._active,s=e.map(({datasetIndex:c,index:l})=>{let d=this.chart.getDatasetMeta(c);if(!d)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:d.data[l],index:l}}),o=!Wc(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(e,o,i,r),c=this._positionChanged(a,e),l=i||!Wc(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,i))),l}_getActiveElements(e,i,r,s){let o=this.options;if(e.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,i){let{caretX:r,caretY:s,options:o}=this,a=tl[o.position].call(this,e,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),Ev={id:"tooltip",_element:qC,positioners:tl,afterInit(n,t,e){e&&(n.tooltip=new qC({chart:n,options:e}))},beforeUpdate(n,t,e){n.tooltip&&n.tooltip.initialize(e)},reset(n,t,e){n.tooltip&&n.tooltip.initialize(e)},afterDraw(n){let t=n.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(n.notifyPlugins("beforeTooltipDraw",Rt($({},e),{cancelable:!0}))===!1)return;t.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",e)}},afterEvent(n,t){if(n.tooltip){let e=t.replay;n.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,t)=>t.bodyFont.size,boxWidth:(n,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:yD},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},L4=Object.freeze({__proto__:null,Colors:Xz,Decimation:e4,Filler:w4,Legend:S4,SubTitle:D4,Title:Iv,Tooltip:Ev}),V4=(n,t,e,i)=>(typeof t=="string"?(e=n.push(t)-1,i.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function U4(n,t,e,i){let r=n.indexOf(t);if(r===-1)return V4(n,t,e,i);let s=n.lastIndexOf(t);return r!==s?e:r}var j4=(n,t)=>n===null?null:_e(Math.round(n),0,t);function WC(n){let t=this.getLabels();return n>=0&&n<t.length?t[n]:n}var xv=(()=>{class n extends bs{static id="category";static defaults={ticks:{callback:WC}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,i){if(bt(e))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===e?i:U4(r,e,st(i,e),this._addedLabels),j4(i,r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let e=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=e===0&&i===o.length-1?o:o.slice(e,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=i;a++)s.push({value:a});return s}getLabelForValue(e){return WC.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let i=this.ticks;return e<0||e>i.length-1?null:this.getPixelForValue(i[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function B4(n,t){let e=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:d,maxDigits:h,includeBounds:m}=n,g=s||1,y=d-1,{min:b,max:v}=t,C=!bt(o),R=!bt(a),P=!bt(l),V=(v-b)/(h+1),F=_y((v-b)/y/g)*g,L,E,w,I;if(F<1e-14&&!C&&!R)return[{value:b},{value:v}];I=Math.ceil(v/F)-Math.floor(b/F),I>y&&(F=_y(I*F/y/g)*g),bt(c)||(L=Math.pow(10,c),F=Math.ceil(F*L)/L),r==="ticks"?(E=Math.floor(b/F)*F,w=Math.ceil(v/F)*F):(E=b,w=v),C&&R&&s&&DS((a-o)/s,F/1e3)?(I=Math.round(Math.min((a-o)/F,d)),F=(a-o)/I,E=o,w=a):P?(E=C?o:E,w=R?a:w,I=l-1,F=(w-E)/I):(I=(w-E)/F,No(I,Math.round(I),F/1e3)?I=Math.round(I):I=Math.ceil(I));let A=Math.max(vy(F),vy(E));L=Math.pow(10,bt(c)?A:c),E=Math.round(E*L)/L,w=Math.round(w*L)/L;let S=0;for(C&&(m&&E!==o?(e.push({value:o}),E<o&&S++,No(Math.round((E+S*F)*L)/L,o,$C(o,V,n))&&S++):E<o&&S++);S<I;++S){let D=Math.round((E+S*F)*L)/L;if(R&&D>a)break;e.push({value:D})}return R&&m&&w!==a?e.length&&No(e[e.length-1].value,a,$C(a,V,n))?e[e.length-1].value=a:e.push({value:a}):(!R||w===a)&&e.push({value:w}),e}function $C(n,t,{horizontal:e,minRotation:i}){let r=En(i),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+n).length;return Math.min(t/s,o)}var zo=class extends bs{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return bt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=e?r:c,a=c=>s=i?s:c;if(t){let c=Ln(r),l=Ln(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),t||o(r-c)}this.min=r,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:i}=t,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=B4(r,s);return t.bounds==="ticks"&&yy(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,i=this.max;if(super.configure(),this.options.offset&&t.length){let r=(i-e)/Math.max(t.length-1,1)/2;e-=r,i+=r}this._startValue=e,this._endValue=i,this._valueRange=i-e}getLabelForValue(t){return Lo(t,this.chart.options.locale,this.options.ticks.format)}},il=class extends zo{static id="linear";static defaults={ticks:{callback:$c.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Gt(t)?t:0,this.max=Gt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,i=En(this.options.ticks.minRotation),r=(t?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},rl=n=>Math.floor(ki(n)),gs=(n,t)=>Math.pow(10,rl(n)+t);function HC(n){return n/Math.pow(10,rl(n))===1}function GC(n,t,e){let i=Math.pow(10,e),r=Math.floor(n/i);return Math.ceil(t/i)-r}function z4(n,t){let e=t-n,i=rl(e);for(;GC(n,t,i)>10;)i++;for(;GC(n,t,i)<10;)i--;return Math.min(i,rl(n))}function q4(n,{min:t,max:e}){t=Je(n.min,t);let i=[],r=rl(t),s=z4(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((t-c)*o)/o,d=Math.floor((t-c)/a/10)*a*10,h=Math.floor((l-d)/Math.pow(10,s)),m=Je(n.min,Math.round((c+d+h*Math.pow(10,s))*o)/o);for(;m<e;)i.push({value:m,major:HC(m),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(s++,h=2,o=s>=0?1:o),m=Math.round((c+d+h*Math.pow(10,s))*o)/o;let g=Je(n.max,m);return i.push({value:g,major:HC(g),significand:h}),i}var fv=class extends bs{static id="logarithmic";static defaults={ticks:{callback:$c.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let i=zo.prototype.parse.apply(this,[t,e]);if(i===0){this._zero=!0;return}return Gt(i)&&i>0?i:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=Gt(t)?Math.max(0,t):null,this.max=Gt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Gt(this._userMin)&&(this.min=t===gs(this.min,0)?gs(this.min,-1):gs(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=t?i:a,o=a=>r=e?r:a;i===r&&(i<=0?(s(1),o(10)):(s(gs(i,-1)),o(gs(r,1)))),i<=0&&s(gs(r,-1)),r<=0&&o(gs(i,1)),this.min=i,this.max=r}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},i=q4(e,this);return t.bounds==="ticks"&&yy(i,this,"value"),t.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(t){return t===void 0?"0":Lo(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=ki(t),this._valueRange=ki(this.max)-ki(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(ki(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function mv(n){let t=n.ticks;if(t.display&&n.display){let e=Re(t.backdropPadding);return st(t.font&&t.font.size,Kt.font.size)+e.height}return 0}function W4(n,t,e){return e=Ut(e)?e:[e],{w:VS(n,t.string,e),h:e.length*t.lineHeight}}function KC(n,t,e,i,r){return n===i||n===r?{start:t-e/2,end:t+e/2}:n<i||n>r?{start:t-e,end:t}:{start:t,end:t+e}}function $4(n){let t={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},e=Object.assign({},t),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?jt/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let d=n.getPointPosition(c,n.drawingArea+r[c],a),h=ge(l.font),m=W4(n.ctx,h,n._pointLabels[c]);i[c]=m;let g=Xe(n.getIndexAngle(c)+a),y=Math.round(ih(g)),b=KC(y,d.x,m.w,0,180),v=KC(y,d.y,m.h,90,270);H4(e,t,g,b,v)}n.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),n._pointLabelItems=Y4(n,i,r)}function H4(n,t,e,i,r){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,c=0;i.start<t.l?(a=(t.l-i.start)/s,n.l=Math.min(n.l,t.l-a)):i.end>t.r&&(a=(i.end-t.r)/s,n.r=Math.max(n.r,t.r+a)),r.start<t.t?(c=(t.t-r.start)/o,n.t=Math.min(n.t,t.t-c)):r.end>t.b&&(c=(r.end-t.b)/o,n.b=Math.max(n.b,t.b+c))}function G4(n,t,e){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,c=n.getPointPosition(t,i+r+o,s),l=Math.round(ih(Xe(c.angle+se))),d=J4(c.y,a.h,l),h=Q4(l),m=X4(c.x,a.w,h);return{visible:!0,x:c.x,y:d,textAlign:h,left:m,top:d,right:m+a.w,bottom:d+a.h}}function K4(n,t){if(!t)return!0;let{left:e,top:i,right:r,bottom:s}=n;return!(ii({x:e,y:i},t)||ii({x:e,y:s},t)||ii({x:r,y:i},t)||ii({x:r,y:s},t))}function Y4(n,t,e){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:mv(s)/2,additionalAngle:o?jt/r:0},l;for(let d=0;d<r;d++){c.padding=e[d],c.size=t[d];let h=G4(n,d,c);i.push(h),a==="auto"&&(h.visible=K4(h,l),h.visible&&(l=h))}return i}function Q4(n){return n===0||n===180?"center":n<180?"left":"right"}function X4(n,t,e){return e==="right"?n-=t:e==="center"&&(n-=t/2),n}function J4(n,t,e){return e===90||e===270?n-=t/2:(e>270||e<90)&&(n-=t),n}function Z4(n,t,e){let{left:i,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!bt(a)){let c=pr(t.borderRadius),l=Re(t.backdropPadding);n.fillStyle=a;let d=i-l.left,h=r-l.top,m=s-i+l.width,g=o-r+l.height;Object.values(c).some(y=>y!==0)?(n.beginPath(),Vo(n,{x:d,y:h,w:m,h:g,radius:c}),n.fill()):n.fillRect(d,h,m,g)}}function t5(n,t){let{ctx:e,options:{pointLabels:i}}=n;for(let r=t-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));Z4(e,o,s);let a=ge(o.font),{x:c,y:l,textAlign:d}=s;mr(e,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function vD(n,t,e,i){let{ctx:r}=n;if(e)r.arc(n.xCenter,n.yCenter,t,0,Bt);else{let s=n.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function e5(n,t,e,i,r){let s=n.ctx,o=t.circular,{color:a,lineWidth:c}=t;!o&&!i||!a||!c||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),vD(n,e,o,i),s.closePath(),s.stroke(),s.restore())}function n5(n,t,e){return Mi(n,{label:e,index:t,type:"pointLabel"})}var pv=class extends zo{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:$c.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=Re(mv(this.options)/2),e=this.width=this.maxWidth-t.width,i=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+i/2+t.top),this.drawingArea=Math.floor(Math.min(e,i)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=Gt(t)&&!isNaN(t)?t:0,this.max=Gt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/mv(this.options))}generateTickLabels(t){zo.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,i)=>{let r=Ft(this.options.pointLabels.callback,[e,i],this);return r||r===0?r:""}).filter((e,i)=>this.chart.getDataVisibility(i))}fit(){let t=this.options;t.display&&t.pointLabels.display?$4(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,i,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,i,r))}getIndexAngle(t){let e=Bt/(this._pointLabels.length||1),i=this.options.startAngle||0;return Xe(t*e+En(i))}getDistanceFromCenterForValue(t){if(bt(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(bt(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let i=e[t];return n5(this.getContext(),t,i)}}getPointPosition(t,e,i=0){let r=this.getIndexAngle(t)-se+i;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:i,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let i=this.ctx;i.save(),i.beginPath(),vD(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),i.closePath(),i.fillStyle=t,i.fill(),i.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:i,grid:r,border:s}=e,o=this._pointLabels.length,a,c,l;if(e.pointLabels.display&&t5(this,o),r.display&&this.ticks.forEach((d,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(d.value);let m=this.getContext(h),g=r.setContext(m),y=s.setContext(m);e5(this,g,c,o,y)}}),i.display){for(t.save(),a=o-1;a>=0;a--){let d=i.setContext(this.getPointLabelContext(a)),{color:h,lineWidth:m}=d;!m||!h||(t.lineWidth=m,t.strokeStyle=h,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,c=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),l=this.getPointPosition(a,c),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,i=e.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!e.reverse)return;let l=i.setContext(this.getContext(c)),d=ge(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){t.font=d.string,o=t.measureText(a.label).width,t.fillStyle=l.backdropColor;let h=Re(l.backdropPadding);t.fillRect(-o/2-h.left,-s-d.size/2-h.top,o+h.width,d.size+h.height)}mr(t,a.label,0,-s,d,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),t.restore()}drawTitle(){}},Ch={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},tn=Object.keys(Ch);function YC(n,t){return n-t}function QC(n,t){if(bt(t))return null;let e=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=t;return typeof i=="function"&&(o=i(o)),Gt(o)||(o=typeof i=="string"?e.parse(o,i):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(fs(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function XC(n,t,e,i){let r=tn.length;for(let s=tn.indexOf(n);s<r-1;++s){let o=Ch[tn[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=i)return tn[s]}return tn[r-1]}function i5(n,t,e,i,r){for(let s=tn.length-1;s>=tn.indexOf(e);s--){let o=tn[s];if(Ch[o].common&&n._adapter.diff(r,i,o)>=t-1)return o}return tn[e?tn.indexOf(e):0]}function r5(n){for(let t=tn.indexOf(n)+1,e=tn.length;t<e;++t)if(Ch[tn[t]].common)return tn[t]}function JC(n,t,e){if(!e)n[t]=!0;else if(e.length){let{lo:i,hi:r}=rh(e,t),s=e[i]>=t?e[i]:e[r];n[s]=!0}}function s5(n,t,e,i){let r=n._adapter,s=+r.startOf(t[0].value,i),o=t[t.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=e[a],c>=0&&(t[c].major=!0);return t}function ZC(n,t,e){let i=[],r={},s=t.length,o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,i.push({value:a,major:!1});return s===0||!e?i:s5(n,i,r,e)}var gv=(()=>{class n extends bs{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,i={}){let r=e.time||(e.time={}),s=this._adapter=new yv._date(e.adapters.date);s.init(i),Mo(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=i.normalized}parse(e,i){return e===void 0?null:QC(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,i=this._adapter,r=e.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!c&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!c)&&(l(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Gt(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Gt(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(i=e[0],r=e[e.length-1]),{min:i,max:r}}buildTicks(){let e=this.options,i=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=PS(s,o,a);return this._unit=i.unit||(r.autoSkip?XC(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):i5(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:r5(this._unit),this.initOffsets(s),e.reverse&&c.reverse(),ZC(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let i=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?i=1-s:i=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;i=_e(i,0,a),r=_e(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let e=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||XC(o.minUnit,i,r,this._getLabelCapacity(i)),c=st(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,d=fs(l)||l===!0,h={},m=i,g,y;if(d&&(m=+e.startOf(m,"isoWeek",l)),m=+e.startOf(m,d?"day":a),e.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let b=s.ticks.source==="data"&&this.getDataTimestamps();for(g=m,y=0;g<r;g=+e.add(g,c,a),y++)JC(h,g,b);return(g===r||s.bounds==="ticks"||y===1)&&JC(h,g,b),Object.keys(h).sort(YC).map(v=>+v)}getLabelForValue(e){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(e,r.tooltipFormat):i.format(e,r.displayFormats.datetime)}format(e,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return Ft(a,[e,i,r],this);let c=o.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&c[l],m=d&&c[d],g=r[i],y=d&&m&&g&&g.major;return this._adapter.format(e,s||(y?m:h))}generateTickLabels(e){let i,r,s;for(i=0,r=e.length;i<r;++i)s=e[i],s.label=this._tickFormatFunction(s.value,i,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let i=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(e){let i=this._offsets,r=this.getDecimalForPixel(e)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let i=this.options.ticks,r=this.ctx.measureText(e).width,s=En(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(e){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(e,0,ZC(this,[e],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let e=this._cache.data||[],i,r;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)e=e.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],i,r;if(e.length)return e;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)e.push(QC(this,s[i]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Ey(e.sort(YC))}}return n})();function yh(n,t,e){let i=0,r=n.length-1,s,o,a,c;e?(t>=n[i].pos&&t<=n[r].pos&&({lo:i,hi:r}=ni(n,"pos",t)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(t>=n[i].time&&t<=n[r].time&&({lo:i,hi:r}=ni(n,"time",t)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(t-s)/l:a}var bv=class extends gv{static id="timeseries";static defaults=gv.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=yh(e,this.min),this._tableRange=yh(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:i}=this,r=[],s=[],o,a,c,l,d;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=i&&r.push(l);if(r.length<2)return[{time:e,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],c=r[o-1],l=r[o],Math.round((d+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let t=this.min,e=this.max,i=super.getDataTimestamps();return(!i.includes(t)||!i.length)&&i.splice(0,0,t),(!i.includes(e)||i.length===1)&&i.push(e),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),i=this.getLabelTimestamps();return e.length&&i.length?t=this.normalize(e.concat(i)):t=e.length?e:i,t=this._cache.all=t,t}getDecimalForValue(t){return(yh(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return yh(this._table,i*this._tableRange+this._minPos,!0)}},o5=Object.freeze({__proto__:null,CategoryScale:xv,LinearScale:il,LogarithmicScale:fv,RadialLinearScale:pv,TimeScale:gv,TimeSeriesScale:bv}),wD=[wB,$z,L4,o5];function z(n){let t=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&t==="[object Date]"?new n.constructor(+n):typeof n=="number"||t==="[object Number]"||typeof n=="string"||t==="[object String]"?new Date(n):new Date(NaN)}function ut(n,t){return n instanceof Date?new n.constructor(t):new Date(t)}function yr(n,t){let e=z(n);return isNaN(t)?ut(n,NaN):(t&&e.setDate(e.getDate()+t),e)}function $o(n,t){let e=z(n);if(isNaN(t))return ut(n,NaN);if(!t)return e;let i=e.getDate(),r=ut(n,e.getTime());r.setMonth(e.getMonth()+t+1,0);let s=r.getDate();return i>=s?r:(e.setFullYear(r.getFullYear(),r.getMonth(),i),e)}function vr(n,t){let e=+z(n);return ut(n,e+t)}var a5=Math.pow(10,8)*24*60*60*1e3,EG=-a5,Dh=6048e5,ID=864e5,Fi=6e4,Li=36e5,ED=1e3;var c5=3600;var xD=c5*24,xG=xD*7,l5=xD*365.2425,u5=l5/12,TG=u5*3;function TD(n,t){return vr(n,t*Li)}var d5={};function en(){return d5}function ke(n,t){let e=en(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=z(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function Un(n){return ke(n,{weekStartsOn:1})}function Rh(n){let t=z(n),e=t.getFullYear(),i=ut(n,0);i.setFullYear(e+1,0,4),i.setHours(0,0,0,0);let r=Un(i),s=ut(n,0);s.setFullYear(e,0,4),s.setHours(0,0,0,0);let o=Un(s);return t.getTime()>=r.getTime()?e+1:t.getTime()>=o.getTime()?e:e-1}function ol(n){let t=z(n);return t.setHours(0,0,0,0),t}function _s(n){let t=z(n),e=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return e.setUTCFullYear(t.getFullYear()),+n-+e}function kh(n,t){let e=ol(n),i=ol(t),r=+e-_s(e),s=+i-_s(i);return Math.round((r-s)/ID)}function AD(n){let t=Rh(n),e=ut(n,0);return e.setFullYear(t,0,4),e.setHours(0,0,0,0),Un(e)}function SD(n,t){return vr(n,t*Fi)}function CD(n,t){let e=t*3;return $o(n,e)}function DD(n,t){return vr(n,t*1e3)}function RD(n,t){let e=t*7;return yr(n,e)}function kD(n,t){return $o(n,t*12)}function ys(n,t){let e=z(n),i=z(t),r=e.getTime()-i.getTime();return r<0?-1:r>0?1:r}function PD(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function Ph(n){if(!PD(n)&&typeof n!="number")return!1;let t=z(n);return!isNaN(Number(t))}function MD(n,t){let e=z(n),i=z(t),r=e.getFullYear()-i.getFullYear(),s=e.getMonth()-i.getMonth();return r*12+s}function OD(n,t){let e=z(n),i=z(t);return e.getFullYear()-i.getFullYear()}function Mh(n,t){let e=z(n),i=z(t),r=ND(e,i),s=Math.abs(kh(e,i));e.setDate(e.getDate()-r*s);let o=+(ND(e,i)===-r),a=r*(s-o);return a===0?0:a}function ND(n,t){let e=n.getFullYear()-t.getFullYear()||n.getMonth()-t.getMonth()||n.getDate()-t.getDate()||n.getHours()-t.getHours()||n.getMinutes()-t.getMinutes()||n.getSeconds()-t.getSeconds()||n.getMilliseconds()-t.getMilliseconds();return e<0?-1:e>0?1:e}function ci(n){return t=>{let i=(n?Math[n]:Math.trunc)(t);return i===0?0:i}}function wr(n,t){return+z(n)-+z(t)}function FD(n,t,e){let i=wr(n,t)/Li;return ci(e?.roundingMethod)(i)}function LD(n,t,e){let i=wr(n,t)/Fi;return ci(e?.roundingMethod)(i)}function Oh(n){let t=z(n);return t.setHours(23,59,59,999),t}function Nh(n){let t=z(n),e=t.getMonth();return t.setFullYear(t.getFullYear(),e+1,0),t.setHours(23,59,59,999),t}function VD(n){let t=z(n);return+Oh(t)==+Nh(t)}function Fh(n,t){let e=z(n),i=z(t),r=ys(e,i),s=Math.abs(MD(e,i)),o;if(s<1)o=0;else{e.getMonth()===1&&e.getDate()>27&&e.setDate(30),e.setMonth(e.getMonth()-r*s);let a=ys(e,i)===-r;VD(z(n))&&s===1&&ys(n,i)===1&&(a=!1),o=r*(s-Number(a))}return o===0?0:o}function UD(n,t,e){let i=Fh(n,t)/3;return ci(e?.roundingMethod)(i)}function jD(n,t,e){let i=wr(n,t)/1e3;return ci(e?.roundingMethod)(i)}function BD(n,t,e){let i=Mh(n,t)/7;return ci(e?.roundingMethod)(i)}function zD(n,t){let e=z(n),i=z(t),r=ys(e,i),s=Math.abs(OD(e,i));e.setFullYear(1584),i.setFullYear(1584);let o=ys(e,i)===-r,a=r*(s-+o);return a===0?0:a}function qD(n){let t=z(n);return t.setSeconds(0,0),t}function WD(n){let t=z(n),e=t.getMonth(),i=e-e%3;return t.setMonth(i,1),t.setHours(0,0,0,0),t}function $D(n){let t=z(n);return t.setDate(1),t.setHours(0,0,0,0),t}function HD(n){let t=z(n),e=t.getFullYear();return t.setFullYear(e+1,0,0),t.setHours(23,59,59,999),t}function Lh(n){let t=z(n),e=ut(n,0);return e.setFullYear(t.getFullYear(),0,1),e.setHours(0,0,0,0),e}function GD(n){let t=z(n);return t.setMinutes(59,59,999),t}function KD(n,t){let e=en(),i=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??e.weekStartsOn??e.locale?.options?.weekStartsOn??0,r=z(n),s=r.getDay(),o=(s<i?-7:0)+6-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function YD(n){let t=z(n);return t.setSeconds(59,999),t}function QD(n){let t=z(n),e=t.getMonth(),i=e-e%3+3;return t.setMonth(i,0),t.setHours(23,59,59,999),t}function XD(n){let t=z(n);return t.setMilliseconds(999),t}var h5={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JD=(n,t,e)=>{let i,r=h5[n];return typeof r=="string"?i=r:t===1?i=r.one:i=r.other.replace("{{count}}",t.toString()),e?.addSuffix?e.comparison&&e.comparison>0?"in "+i:i+" ago":i};function Vh(n){return(t={})=>{let e=t.width?String(t.width):n.defaultWidth;return n.formats[e]||n.formats[n.defaultWidth]}}var f5={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},m5={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},p5={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZD={date:Vh({formats:f5,defaultWidth:"full"}),time:Vh({formats:m5,defaultWidth:"full"}),dateTime:Vh({formats:p5,defaultWidth:"full"})};var g5={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},tR=(n,t,e,i)=>g5[n];function Ho(n){return(t,e)=>{let i=e?.context?String(e.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let o=n.defaultFormattingWidth||n.defaultWidth,a=e?.width?String(e.width):o;r=n.formattingValues[a]||n.formattingValues[o]}else{let o=n.defaultWidth,a=e?.width?String(e.width):n.defaultWidth;r=n.values[a]||n.values[o]}let s=n.argumentCallback?n.argumentCallback(t):t;return r[s]}}var b5={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},_5={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},y5={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},v5={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},w5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},I5={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},E5=(n,t)=>{let e=Number(n),i=e%100;if(i>20||i<10)switch(i%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd"}return e+"th"},eR={ordinalNumber:E5,era:Ho({values:b5,defaultWidth:"wide"}),quarter:Ho({values:_5,defaultWidth:"wide",argumentCallback:n=>n-1}),month:Ho({values:y5,defaultWidth:"wide"}),day:Ho({values:v5,defaultWidth:"wide"}),dayPeriod:Ho({values:w5,defaultWidth:"wide",formattingValues:I5,defaultFormattingWidth:"wide"})};function Go(n){return(t,e={})=>{let i=e.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],s=t.match(r);if(!s)return null;let o=s[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?T5(a,h=>h.test(o)):x5(a,h=>h.test(o)),l;l=n.valueCallback?n.valueCallback(c):c,l=e.valueCallback?e.valueCallback(l):l;let d=t.slice(o.length);return{value:l,rest:d}}}function x5(n,t){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e)&&t(n[e]))return e}function T5(n,t){for(let e=0;e<n.length;e++)if(t(n[e]))return e}function nR(n){return(t,e={})=>{let i=t.match(n.matchPattern);if(!i)return null;let r=i[0],s=t.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=e.valueCallback?e.valueCallback(o):o;let a=t.slice(r.length);return{value:o,rest:a}}}var A5=/^(\d+)(th|st|nd|rd)?/i,S5=/\d+/i,C5={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},D5={any:[/^b/i,/^(a|c)/i]},R5={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},k5={any:[/1/i,/2/i,/3/i,/4/i]},P5={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},M5={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},O5={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},N5={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},F5={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},L5={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iR={ordinalNumber:nR({matchPattern:A5,parsePattern:S5,valueCallback:n=>parseInt(n,10)}),era:Go({matchPatterns:C5,defaultMatchWidth:"wide",parsePatterns:D5,defaultParseWidth:"any"}),quarter:Go({matchPatterns:R5,defaultMatchWidth:"wide",parsePatterns:k5,defaultParseWidth:"any",valueCallback:n=>n+1}),month:Go({matchPatterns:P5,defaultMatchWidth:"wide",parsePatterns:M5,defaultParseWidth:"any"}),day:Go({matchPatterns:O5,defaultMatchWidth:"wide",parsePatterns:N5,defaultParseWidth:"any"}),dayPeriod:Go({matchPatterns:F5,defaultMatchWidth:"any",parsePatterns:L5,defaultParseWidth:"any"})};var al={code:"en-US",formatDistance:JD,formatLong:ZD,formatRelative:tR,localize:eR,match:iR,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rR(n){let t=z(n);return kh(t,Lh(t))+1}function Uh(n){let t=z(n),e=+Un(t)-+AD(t);return Math.round(e/Dh)+1}function Ko(n,t){let e=z(n),i=e.getFullYear(),r=en(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=ut(n,0);o.setFullYear(i+1,0,s),o.setHours(0,0,0,0);let a=ke(o,t),c=ut(n,0);c.setFullYear(i,0,s),c.setHours(0,0,0,0);let l=ke(c,t);return e.getTime()>=a.getTime()?i+1:e.getTime()>=l.getTime()?i:i-1}function sR(n,t){let e=en(),i=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??e.firstWeekContainsDate??e.locale?.options?.firstWeekContainsDate??1,r=Ko(n,t),s=ut(n,0);return s.setFullYear(r,0,i),s.setHours(0,0,0,0),ke(s,t)}function jh(n,t){let e=z(n),i=+ke(e,t)-+sR(e,t);return Math.round(i/Dh)+1}function xt(n,t){let e=n<0?"-":"",i=Math.abs(n).toString().padStart(t,"0");return e+i}var Vi={y(n,t){let e=n.getFullYear(),i=e>0?e:1-e;return xt(t==="yy"?i%100:i,t.length)},M(n,t){let e=n.getMonth();return t==="M"?String(e+1):xt(e+1,2)},d(n,t){return xt(n.getDate(),t.length)},a(n,t){let e=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.toUpperCase();case"aaa":return e;case"aaaaa":return e[0];case"aaaa":default:return e==="am"?"a.m.":"p.m."}},h(n,t){return xt(n.getHours()%12||12,t.length)},H(n,t){return xt(n.getHours(),t.length)},m(n,t){return xt(n.getMinutes(),t.length)},s(n,t){return xt(n.getSeconds(),t.length)},S(n,t){let e=t.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,e-3));return xt(r,t.length)}};var Yo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Tv={G:function(n,t,e){let i=n.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return e.era(i,{width:"abbreviated"});case"GGGGG":return e.era(i,{width:"narrow"});case"GGGG":default:return e.era(i,{width:"wide"})}},y:function(n,t,e){if(t==="yo"){let i=n.getFullYear(),r=i>0?i:1-i;return e.ordinalNumber(r,{unit:"year"})}return Vi.y(n,t)},Y:function(n,t,e,i){let r=Ko(n,i),s=r>0?r:1-r;if(t==="YY"){let o=s%100;return xt(o,2)}return t==="Yo"?e.ordinalNumber(s,{unit:"year"}):xt(s,t.length)},R:function(n,t){let e=Rh(n);return xt(e,t.length)},u:function(n,t){let e=n.getFullYear();return xt(e,t.length)},Q:function(n,t,e){let i=Math.ceil((n.getMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return xt(i,2);case"Qo":return e.ordinalNumber(i,{unit:"quarter"});case"QQQ":return e.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return e.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return e.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,e){let i=Math.ceil((n.getMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return xt(i,2);case"qo":return e.ordinalNumber(i,{unit:"quarter"});case"qqq":return e.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return e.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return e.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,e){let i=n.getMonth();switch(t){case"M":case"MM":return Vi.M(n,t);case"Mo":return e.ordinalNumber(i+1,{unit:"month"});case"MMM":return e.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return e.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return e.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,e){let i=n.getMonth();switch(t){case"L":return String(i+1);case"LL":return xt(i+1,2);case"Lo":return e.ordinalNumber(i+1,{unit:"month"});case"LLL":return e.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return e.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return e.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,e,i){let r=jh(n,i);return t==="wo"?e.ordinalNumber(r,{unit:"week"}):xt(r,t.length)},I:function(n,t,e){let i=Uh(n);return t==="Io"?e.ordinalNumber(i,{unit:"week"}):xt(i,t.length)},d:function(n,t,e){return t==="do"?e.ordinalNumber(n.getDate(),{unit:"date"}):Vi.d(n,t)},D:function(n,t,e){let i=rR(n);return t==="Do"?e.ordinalNumber(i,{unit:"dayOfYear"}):xt(i,t.length)},E:function(n,t,e){let i=n.getDay();switch(t){case"E":case"EE":case"EEE":return e.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return e.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return e.day(i,{width:"short",context:"formatting"});case"EEEE":default:return e.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,e,i){let r=n.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return xt(s,2);case"eo":return e.ordinalNumber(s,{unit:"day"});case"eee":return e.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return e.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return e.day(r,{width:"short",context:"formatting"});case"eeee":default:return e.day(r,{width:"wide",context:"formatting"})}},c:function(n,t,e,i){let r=n.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return xt(s,t.length);case"co":return e.ordinalNumber(s,{unit:"day"});case"ccc":return e.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return e.day(r,{width:"narrow",context:"standalone"});case"cccccc":return e.day(r,{width:"short",context:"standalone"});case"cccc":default:return e.day(r,{width:"wide",context:"standalone"})}},i:function(n,t,e){let i=n.getDay(),r=i===0?7:i;switch(t){case"i":return String(r);case"ii":return xt(r,t.length);case"io":return e.ordinalNumber(r,{unit:"day"});case"iii":return e.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return e.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return e.day(i,{width:"short",context:"formatting"});case"iiii":default:return e.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,e){let r=n.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,t,e){let i=n.getHours(),r;switch(i===12?r=Yo.noon:i===0?r=Yo.midnight:r=i/12>=1?"pm":"am",t){case"b":case"bb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,t,e){let i=n.getHours(),r;switch(i>=17?r=Yo.evening:i>=12?r=Yo.afternoon:i>=4?r=Yo.morning:r=Yo.night,t){case"B":case"BB":case"BBB":return e.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return e.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return e.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,t,e){if(t==="ho"){let i=n.getHours()%12;return i===0&&(i=12),e.ordinalNumber(i,{unit:"hour"})}return Vi.h(n,t)},H:function(n,t,e){return t==="Ho"?e.ordinalNumber(n.getHours(),{unit:"hour"}):Vi.H(n,t)},K:function(n,t,e){let i=n.getHours()%12;return t==="Ko"?e.ordinalNumber(i,{unit:"hour"}):xt(i,t.length)},k:function(n,t,e){let i=n.getHours();return i===0&&(i=24),t==="ko"?e.ordinalNumber(i,{unit:"hour"}):xt(i,t.length)},m:function(n,t,e){return t==="mo"?e.ordinalNumber(n.getMinutes(),{unit:"minute"}):Vi.m(n,t)},s:function(n,t,e){return t==="so"?e.ordinalNumber(n.getSeconds(),{unit:"second"}):Vi.s(n,t)},S:function(n,t){return Vi.S(n,t)},X:function(n,t,e){let i=n.getTimezoneOffset();if(i===0)return"Z";switch(t){case"X":return aR(i);case"XXXX":case"XX":return vs(i);case"XXXXX":case"XXX":default:return vs(i,":")}},x:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"x":return aR(i);case"xxxx":case"xx":return vs(i);case"xxxxx":case"xxx":default:return vs(i,":")}},O:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+oR(i,":");case"OOOO":default:return"GMT"+vs(i,":")}},z:function(n,t,e){let i=n.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+oR(i,":");case"zzzz":default:return"GMT"+vs(i,":")}},t:function(n,t,e){let i=Math.trunc(n.getTime()/1e3);return xt(i,t.length)},T:function(n,t,e){let i=n.getTime();return xt(i,t.length)}};function oR(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),s=i%60;return s===0?e+String(r):e+String(r)+t+xt(s,2)}function aR(n,t){return n%60===0?(n>0?"-":"+")+xt(Math.abs(n)/60,2):vs(n,t)}function vs(n,t=""){let e=n>0?"-":"+",i=Math.abs(n),r=xt(Math.trunc(i/60),2),s=xt(i%60,2);return e+r+t+s}var cR=(n,t)=>{switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},lR=(n,t)=>{switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},V5=(n,t)=>{let e=n.match(/(P+)(p+)?/)||[],i=e[1],r=e[2];if(!r)return cR(n,t);let s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",cR(i,t)).replace("{{time}}",lR(r,t))},cl={p:lR,P:V5};var U5=/^D+$/,j5=/^Y+$/,B5=["D","DD","YY","YYYY"];function Bh(n){return U5.test(n)}function zh(n){return j5.test(n)}function ll(n,t,e){let i=z5(n,t,e);if(console.warn(i),B5.includes(n))throw new RangeError(i)}function z5(n,t,e){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${t}\`) for formatting ${i} to the input \`${e}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var q5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,W5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,$5=/^'([^]*?)'?$/,H5=/''/g,G5=/[a-zA-Z]/;function uR(n,t,e){let i=en(),r=e?.locale??i.locale??al,s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=z(n);if(!Ph(a))throw new RangeError("Invalid time value");let c=t.match(W5).map(d=>{let h=d[0];if(h==="p"||h==="P"){let m=cl[h];return m(d,r.formatLong)}return d}).join("").match(q5).map(d=>{if(d==="''")return{isToken:!1,value:"'"};let h=d[0];if(h==="'")return{isToken:!1,value:K5(d)};if(Tv[h])return{isToken:!0,value:d};if(h.match(G5))throw new RangeError("Format string contains an unescaped latin alphabet character `"+h+"`");return{isToken:!1,value:d}});r.localize.preprocessor&&(c=r.localize.preprocessor(a,c));let l={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return c.map(d=>{if(!d.isToken)return d.value;let h=d.value;(!e?.useAdditionalWeekYearTokens&&zh(h)||!e?.useAdditionalDayOfYearTokens&&Bh(h))&&ll(h,t,String(n));let m=Tv[h[0]];return m(a,h,r.localize,l)}).join("")}function K5(n){let t=n.match($5);return t?t[1].replace(H5,"'"):n}function dR(){return Object.assign({},en())}function hR(n){let e=z(n).getDay();return e===0&&(e=7),e}function fR(n,t){let e=t instanceof Date?ut(t,0):new t(0);return e.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),e.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e}var Y5=10,qh=class{subPriority=0;validate(t,e){return!0}},Wh=class extends qh{constructor(t,e,i,r,s){super(),this.value=t,this.validateValue=e,this.setValue=i,this.priority=r,s&&(this.subPriority=s)}validate(t,e){return this.validateValue(t,this.value,e)}set(t,e,i){return this.setValue(t,e,this.value,i)}},$h=class extends qh{priority=Y5;subPriority=-1;set(t,e){return e.timestampIsSet?t:ut(t,fR(t,Date))}};var K=class{run(t,e,i,r){let s=this.parse(t,e,i,r);return s?{setter:new Wh(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(t,e,i){return!0}};var Hh=class extends K{priority=140;parse(t,e,i){switch(e){case"G":case"GG":case"GGG":return i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"});case"GGGGG":return i.era(t,{width:"narrow"});case"GGGG":default:return i.era(t,{width:"wide"})||i.era(t,{width:"abbreviated"})||i.era(t,{width:"narrow"})}}set(t,e,i){return e.era=i,t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["R","u","t","T"]};var _t={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},xn={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Dt(n,t){return n&&{value:t(n.value),rest:n.rest}}function mt(n,t){let e=t.match(n);return e?{value:parseInt(e[0],10),rest:t.slice(e[0].length)}:null}function Tn(n,t){let e=t.match(n);if(!e)return null;if(e[0]==="Z")return{value:0,rest:t.slice(1)};let i=e[1]==="+"?1:-1,r=e[2]?parseInt(e[2],10):0,s=e[3]?parseInt(e[3],10):0,o=e[5]?parseInt(e[5],10):0;return{value:i*(r*Li+s*Fi+o*ED),rest:t.slice(e[0].length)}}function Gh(n){return mt(_t.anyDigitsSigned,n)}function ct(n,t){switch(n){case 1:return mt(_t.singleDigit,t);case 2:return mt(_t.twoDigits,t);case 3:return mt(_t.threeDigits,t);case 4:return mt(_t.fourDigits,t);default:return mt(new RegExp("^\\d{1,"+n+"}"),t)}}function Qo(n,t){switch(n){case 1:return mt(_t.singleDigitSigned,t);case 2:return mt(_t.twoDigitsSigned,t);case 3:return mt(_t.threeDigitsSigned,t);case 4:return mt(_t.fourDigitsSigned,t);default:return mt(new RegExp("^-?\\d{1,"+n+"}"),t)}}function Xo(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Kh(n,t){let e=t>0,i=e?t:1-t,r;if(i<=50)r=n||100;else{let s=i+50,o=Math.trunc(s/100)*100,a=n>=s%100;r=n+o-(a?100:0)}return e?r:1-r}function Yh(n){return n%400===0||n%4===0&&n%100!==0}var Qh=class extends K{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(t,e,i){let r=s=>({year:s,isTwoDigitYear:e==="yy"});switch(e){case"y":return Dt(ct(4,t),r);case"yo":return Dt(i.ordinalNumber(t,{unit:"year"}),r);default:return Dt(ct(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i){let r=t.getFullYear();if(i.isTwoDigitYear){let o=Kh(i.year,r);return t.setFullYear(o,0,1),t.setHours(0,0,0,0),t}let s=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(s,0,1),t.setHours(0,0,0,0),t}};var Xh=class extends K{priority=130;parse(t,e,i){let r=s=>({year:s,isTwoDigitYear:e==="YY"});switch(e){case"Y":return Dt(ct(4,t),r);case"Yo":return Dt(i.ordinalNumber(t,{unit:"year"}),r);default:return Dt(ct(e.length,t),r)}}validate(t,e){return e.isTwoDigitYear||e.year>0}set(t,e,i,r){let s=Ko(t,r);if(i.isTwoDigitYear){let a=Kh(i.year,s);return t.setFullYear(a,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),ke(t,r)}let o=!("era"in e)||e.era===1?i.year:1-i.year;return t.setFullYear(o,0,r.firstWeekContainsDate),t.setHours(0,0,0,0),ke(t,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]};var Jh=class extends K{priority=130;parse(t,e){return e==="R"?Qo(4,t):Qo(e.length,t)}set(t,e,i){let r=ut(t,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),Un(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]};var Zh=class extends K{priority=130;parse(t,e){return e==="u"?Qo(4,t):Qo(e.length,t)}set(t,e,i){return t.setFullYear(i,0,1),t.setHours(0,0,0,0),t}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]};var tf=class extends K{priority=120;parse(t,e,i){switch(e){case"Q":case"QQ":return ct(e.length,t);case"Qo":return i.ordinalNumber(t,{unit:"quarter"});case"QQQ":return i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(t,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(t,{width:"wide",context:"formatting"})||i.quarter(t,{width:"abbreviated",context:"formatting"})||i.quarter(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]};var ef=class extends K{priority=120;parse(t,e,i){switch(e){case"q":case"qq":return ct(e.length,t);case"qo":return i.ordinalNumber(t,{unit:"quarter"});case"qqq":return i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(t,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(t,{width:"wide",context:"standalone"})||i.quarter(t,{width:"abbreviated",context:"standalone"})||i.quarter(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=1&&e<=4}set(t,e,i){return t.setMonth((i-1)*3,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]};var nf=class extends K{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(t,e,i){let r=s=>s-1;switch(e){case"M":return Dt(mt(_t.month,t),r);case"MM":return Dt(ct(2,t),r);case"Mo":return Dt(i.ordinalNumber(t,{unit:"month"}),r);case"MMM":return i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(t,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(t,{width:"wide",context:"formatting"})||i.month(t,{width:"abbreviated",context:"formatting"})||i.month(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}};var rf=class extends K{priority=110;parse(t,e,i){let r=s=>s-1;switch(e){case"L":return Dt(mt(_t.month,t),r);case"LL":return Dt(ct(2,t),r);case"Lo":return Dt(i.ordinalNumber(t,{unit:"month"}),r);case"LLL":return i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(t,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(t,{width:"wide",context:"standalone"})||i.month(t,{width:"abbreviated",context:"standalone"})||i.month(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.setMonth(i,1),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]};function mR(n,t,e){let i=z(n),r=jh(i,e)-t;return i.setDate(i.getDate()-r*7),i}var sf=class extends K{priority=100;parse(t,e,i){switch(e){case"w":return mt(_t.week,t);case"wo":return i.ordinalNumber(t,{unit:"week"});default:return ct(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i,r){return ke(mR(t,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]};function pR(n,t){let e=z(n),i=Uh(e)-t;return e.setDate(e.getDate()-i*7),e}var of=class extends K{priority=100;parse(t,e,i){switch(e){case"I":return mt(_t.week,t);case"Io":return i.ordinalNumber(t,{unit:"week"});default:return ct(e.length,t)}}validate(t,e){return e>=1&&e<=53}set(t,e,i){return Un(pR(t,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]};var Q5=[31,28,31,30,31,30,31,31,30,31,30,31],X5=[31,29,31,30,31,30,31,31,30,31,30,31],af=class extends K{priority=90;subPriority=1;parse(t,e,i){switch(e){case"d":return mt(_t.date,t);case"do":return i.ordinalNumber(t,{unit:"date"});default:return ct(e.length,t)}}validate(t,e){let i=t.getFullYear(),r=Yh(i),s=t.getMonth();return r?e>=1&&e<=X5[s]:e>=1&&e<=Q5[s]}set(t,e,i){return t.setDate(i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]};var cf=class extends K{priority=90;subpriority=1;parse(t,e,i){switch(e){case"D":case"DD":return mt(_t.dayOfYear,t);case"Do":return i.ordinalNumber(t,{unit:"date"});default:return ct(e.length,t)}}validate(t,e){let i=t.getFullYear();return Yh(i)?e>=1&&e<=366:e>=1&&e<=365}set(t,e,i){return t.setMonth(0,i),t.setHours(0,0,0,0),t}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]};function Jo(n,t,e){let i=en(),r=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=z(n),o=s.getDay(),c=(t%7+7)%7,l=7-r,d=t<0||t>6?t-(o+l)%7:(c+l)%7-(o+l)%7;return yr(s,d)}var lf=class extends K{priority=90;parse(t,e,i){switch(e){case"E":case"EE":case"EEE":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(t,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Jo(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["D","i","e","c","t","T"]};var uf=class extends K{priority=90;parse(t,e,i,r){let s=o=>{let a=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+a};switch(e){case"e":case"ee":return Dt(ct(e.length,t),s);case"eo":return Dt(i.ordinalNumber(t,{unit:"day"}),s);case"eee":return i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeeee":return i.day(t,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Jo(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]};var df=class extends K{priority=90;parse(t,e,i,r){let s=o=>{let a=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+a};switch(e){case"c":case"cc":return Dt(ct(e.length,t),s);case"co":return Dt(i.ordinalNumber(t,{unit:"day"}),s);case"ccc":return i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"ccccc":return i.day(t,{width:"narrow",context:"standalone"});case"cccccc":return i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(t,{width:"wide",context:"standalone"})||i.day(t,{width:"abbreviated",context:"standalone"})||i.day(t,{width:"short",context:"standalone"})||i.day(t,{width:"narrow",context:"standalone"})}}validate(t,e){return e>=0&&e<=6}set(t,e,i,r){return t=Jo(t,i,r),t.setHours(0,0,0,0),t}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]};function gR(n,t){let e=z(n),i=hR(e),r=t-i;return yr(e,r)}var hf=class extends K{priority=90;parse(t,e,i){let r=s=>s===0?7:s;switch(e){case"i":case"ii":return ct(e.length,t);case"io":return i.ordinalNumber(t,{unit:"day"});case"iii":return Dt(i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiii":return Dt(i.day(t,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Dt(i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Dt(i.day(t,{width:"wide",context:"formatting"})||i.day(t,{width:"abbreviated",context:"formatting"})||i.day(t,{width:"short",context:"formatting"})||i.day(t,{width:"narrow",context:"formatting"}),r)}}validate(t,e){return e>=1&&e<=7}set(t,e,i){return t=gR(t,i),t.setHours(0,0,0,0),t}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]};var ff=class extends K{priority=80;parse(t,e,i){switch(e){case"a":case"aa":case"aaa":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(Xo(i),0,0,0),t}incompatibleTokens=["b","B","H","k","t","T"]};var mf=class extends K{priority=80;parse(t,e,i){switch(e){case"b":case"bb":case"bbb":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(Xo(i),0,0,0),t}incompatibleTokens=["a","B","H","k","t","T"]};var pf=class extends K{priority=80;parse(t,e,i){switch(e){case"B":case"BB":case"BBB":return i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(t,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(t,{width:"wide",context:"formatting"})||i.dayPeriod(t,{width:"abbreviated",context:"formatting"})||i.dayPeriod(t,{width:"narrow",context:"formatting"})}}set(t,e,i){return t.setHours(Xo(i),0,0,0),t}incompatibleTokens=["a","b","t","T"]};var gf=class extends K{priority=70;parse(t,e,i){switch(e){case"h":return mt(_t.hour12h,t);case"ho":return i.ordinalNumber(t,{unit:"hour"});default:return ct(e.length,t)}}validate(t,e){return e>=1&&e<=12}set(t,e,i){let r=t.getHours()>=12;return r&&i<12?t.setHours(i+12,0,0,0):!r&&i===12?t.setHours(0,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["H","K","k","t","T"]};var bf=class extends K{priority=70;parse(t,e,i){switch(e){case"H":return mt(_t.hour23h,t);case"Ho":return i.ordinalNumber(t,{unit:"hour"});default:return ct(e.length,t)}}validate(t,e){return e>=0&&e<=23}set(t,e,i){return t.setHours(i,0,0,0),t}incompatibleTokens=["a","b","h","K","k","t","T"]};var _f=class extends K{priority=70;parse(t,e,i){switch(e){case"K":return mt(_t.hour11h,t);case"Ko":return i.ordinalNumber(t,{unit:"hour"});default:return ct(e.length,t)}}validate(t,e){return e>=0&&e<=11}set(t,e,i){return t.getHours()>=12&&i<12?t.setHours(i+12,0,0,0):t.setHours(i,0,0,0),t}incompatibleTokens=["h","H","k","t","T"]};var yf=class extends K{priority=70;parse(t,e,i){switch(e){case"k":return mt(_t.hour24h,t);case"ko":return i.ordinalNumber(t,{unit:"hour"});default:return ct(e.length,t)}}validate(t,e){return e>=1&&e<=24}set(t,e,i){let r=i<=24?i%24:i;return t.setHours(r,0,0,0),t}incompatibleTokens=["a","b","h","H","K","t","T"]};var vf=class extends K{priority=60;parse(t,e,i){switch(e){case"m":return mt(_t.minute,t);case"mo":return i.ordinalNumber(t,{unit:"minute"});default:return ct(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setMinutes(i,0,0),t}incompatibleTokens=["t","T"]};var wf=class extends K{priority=50;parse(t,e,i){switch(e){case"s":return mt(_t.second,t);case"so":return i.ordinalNumber(t,{unit:"second"});default:return ct(e.length,t)}}validate(t,e){return e>=0&&e<=59}set(t,e,i){return t.setSeconds(i,0),t}incompatibleTokens=["t","T"]};var If=class extends K{priority=30;parse(t,e){let i=r=>Math.trunc(r*Math.pow(10,-e.length+3));return Dt(ct(e.length,t),i)}set(t,e,i){return t.setMilliseconds(i),t}incompatibleTokens=["t","T"]};var Ef=class extends K{priority=10;parse(t,e){switch(e){case"X":return Tn(xn.basicOptionalMinutes,t);case"XX":return Tn(xn.basic,t);case"XXXX":return Tn(xn.basicOptionalSeconds,t);case"XXXXX":return Tn(xn.extendedOptionalSeconds,t);case"XXX":default:return Tn(xn.extended,t)}}set(t,e,i){return e.timestampIsSet?t:ut(t,t.getTime()-_s(t)-i)}incompatibleTokens=["t","T","x"]};var xf=class extends K{priority=10;parse(t,e){switch(e){case"x":return Tn(xn.basicOptionalMinutes,t);case"xx":return Tn(xn.basic,t);case"xxxx":return Tn(xn.basicOptionalSeconds,t);case"xxxxx":return Tn(xn.extendedOptionalSeconds,t);case"xxx":default:return Tn(xn.extended,t)}}set(t,e,i){return e.timestampIsSet?t:ut(t,t.getTime()-_s(t)-i)}incompatibleTokens=["t","T","X"]};var Tf=class extends K{priority=40;parse(t){return Gh(t)}set(t,e,i){return[ut(t,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"};var Af=class extends K{priority=20;parse(t){return Gh(t)}set(t,e,i){return[ut(t,i),{timestampIsSet:!0}]}incompatibleTokens="*"};var bR={G:new Hh,y:new Qh,Y:new Xh,R:new Jh,u:new Zh,Q:new tf,q:new ef,M:new nf,L:new rf,w:new sf,I:new of,d:new af,D:new cf,E:new lf,e:new uf,c:new df,i:new hf,a:new ff,b:new mf,B:new pf,h:new gf,H:new bf,K:new _f,k:new yf,m:new vf,s:new wf,S:new If,X:new Ef,x:new xf,t:new Tf,T:new Af};var J5=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Z5=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,tq=/^'([^]*?)'?$/,eq=/''/g,nq=/\S/,iq=/[a-zA-Z]/;function _R(n,t,e,i){let r=dR(),s=i?.locale??r.locale??al,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(t==="")return n===""?z(e):ut(e,NaN);let c={firstWeekContainsDate:o,weekStartsOn:a,locale:s},l=[new $h],d=t.match(Z5).map(b=>{let v=b[0];if(v in cl){let C=cl[v];return C(b,s.formatLong)}return b}).join("").match(J5),h=[];for(let b of d){!i?.useAdditionalWeekYearTokens&&zh(b)&&ll(b,t,n),!i?.useAdditionalDayOfYearTokens&&Bh(b)&&ll(b,t,n);let v=b[0],C=bR[v];if(C){let{incompatibleTokens:R}=C;if(Array.isArray(R)){let V=h.find(F=>R.includes(F.token)||F.token===v);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${b}\` at the same time`)}else if(C.incompatibleTokens==="*"&&h.length>0)throw new RangeError(`The format string mustn't contain \`${b}\` and any other token at the same time`);h.push({token:v,fullToken:b});let P=C.run(n,b,s.match,c);if(!P)return ut(e,NaN);l.push(P.setter),n=P.rest}else{if(v.match(iq))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if(b==="''"?b="'":v==="'"&&(b=rq(b)),n.indexOf(b)===0)n=n.slice(b.length);else return ut(e,NaN)}}if(n.length>0&&nq.test(n))return ut(e,NaN);let m=l.map(b=>b.priority).sort((b,v)=>v-b).filter((b,v,C)=>C.indexOf(b)===v).map(b=>l.filter(v=>v.priority===b).sort((v,C)=>C.subPriority-v.subPriority)).map(b=>b[0]),g=z(e);if(isNaN(g.getTime()))return ut(e,NaN);let y={};for(let b of m){if(!b.validate(g,c))return ut(e,NaN);let v=b.set(g,y,c);Array.isArray(v)?(g=v[0],Object.assign(y,v[1])):g=v}return ut(e,g)}function rq(n){return n.match(tq)[1].replace(eq,"'")}function yR(n){let t=z(n);return t.setMinutes(0,0,0),t}function vR(n){let t=z(n);return t.setMilliseconds(0),t}function wR(n,t){let e=t?.additionalDigits??2,i=cq(n),r;if(i.date){let c=lq(i.date,e);r=uq(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let s=r.getTime(),o=0,a;if(i.time&&(o=dq(i.time),isNaN(o)))return new Date(NaN);if(i.timezone){if(a=hq(i.timezone),isNaN(a))return new Date(NaN)}else{let c=new Date(s+o),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return new Date(s+o+a)}var Sf={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},sq=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,oq=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,aq=/^([+-])(\d{2})(?::?(\d{2}))?$/;function cq(n){let t={},e=n.split(Sf.dateTimeDelimiter),i;if(e.length>2)return t;if(/:/.test(e[0])?i=e[0]:(t.date=e[0],i=e[1],Sf.timeZoneDelimiter.test(t.date)&&(t.date=n.split(Sf.timeZoneDelimiter)[0],i=n.substr(t.date.length,n.length))),i){let r=Sf.timezone.exec(i);r?(t.time=i.replace(r[1],""),t.timezone=r[1]):t.time=i}return t}function lq(n,t){let e=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),i=n.match(e);if(!i)return{year:NaN,restDateString:""};let r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?r:s*100,restDateString:n.slice((i[1]||i[2]).length)}}function uq(n,t){if(t===null)return new Date(NaN);let e=n.match(sq);if(!e)return new Date(NaN);let i=!!e[4],r=ul(e[1]),s=ul(e[2])-1,o=ul(e[3]),a=ul(e[4]),c=ul(e[5])-1;if(i)return bq(t,a,c)?fq(t,a,c):new Date(NaN);{let l=new Date(0);return!pq(t,s,o)||!gq(t,r)?new Date(NaN):(l.setUTCFullYear(t,s,Math.max(r,o)),l)}}function ul(n){return n?parseInt(n):1}function dq(n){let t=n.match(oq);if(!t)return NaN;let e=Av(t[1]),i=Av(t[2]),r=Av(t[3]);return _q(e,i,r)?e*Li+i*Fi+r*1e3:NaN}function Av(n){return n&&parseFloat(n.replace(",","."))||0}function hq(n){if(n==="Z")return 0;let t=n.match(aq);if(!t)return 0;let e=t[1]==="+"?-1:1,i=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return yq(i,r)?e*(i*Li+r*Fi):NaN}function fq(n,t,e){let i=new Date(0);i.setUTCFullYear(n,0,4);let r=i.getUTCDay()||7,s=(t-1)*7+e+1-r;return i.setUTCDate(i.getUTCDate()+s),i}var mq=[31,null,31,30,31,30,31,31,30,31,30,31];function IR(n){return n%400===0||n%4===0&&n%100!==0}function pq(n,t,e){return t>=0&&t<=11&&e>=1&&e<=(mq[t]||(IR(n)?29:28))}function gq(n,t){return t>=1&&t<=(IR(n)?366:365)}function bq(n,t,e){return t>=1&&t<=53&&e>=0&&e<=6}function _q(n,t,e){return n===24?t===0&&e===0:e>=0&&e<60&&t>=0&&t<60&&n>=0&&n<25}function yq(n,t){return t>=0&&t<=59}var vq={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};yv._date.override({_id:"date-fns",formats:function(){return vq},parse:function(n,t){if(n===null||typeof n>"u")return null;let e=typeof n;return e==="number"||n instanceof Date?n=z(n):e==="string"&&(typeof t=="string"?n=_R(n,t,new Date,this.options):n=wR(n,this.options)),Ph(n)?n.getTime():null},format:function(n,t){return uR(n,t,this.options)},add:function(n,t,e){switch(e){case"millisecond":return vr(n,t);case"second":return DD(n,t);case"minute":return SD(n,t);case"hour":return TD(n,t);case"day":return yr(n,t);case"week":return RD(n,t);case"month":return $o(n,t);case"quarter":return CD(n,t);case"year":return kD(n,t);default:return n}},diff:function(n,t,e){switch(e){case"millisecond":return wr(n,t);case"second":return jD(n,t);case"minute":return LD(n,t);case"hour":return FD(n,t);case"day":return Mh(n,t);case"week":return BD(n,t);case"month":return Fh(n,t);case"quarter":return UD(n,t);case"year":return zD(n,t);default:return 0}},startOf:function(n,t,e){switch(t){case"second":return vR(n);case"minute":return qD(n);case"hour":return yR(n);case"day":return ol(n);case"week":return ke(n);case"isoWeek":return ke(n,{weekStartsOn:+e});case"month":return $D(n);case"quarter":return WD(n);case"year":return Lh(n);default:return n}},endOf:function(n,t){switch(t){case"second":return XD(n);case"minute":return YD(n);case"hour":return GD(n);case"day":return Oh(n);case"week":return KD(n);case"month":return Nh(n);case"quarter":return QD(n);case"year":return HD(n);default:return n}}});qo.register(...wD);var Zo=(n,t)=>n.p0.skip||n.p1.skip?t:void 0,ta={CHART_COLORS:{red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(231,233,237)"}},wq=[{label:"\u57FA\u790E\u529F\u7387",data:[],fill:!1,borderColor:ta.CHART_COLORS.orange,backgroundColor:ta.CHART_COLORS.orange,tension:.2,segment:{borderColor:n=>Zo(n,"rgb(255,255,255,0.2)"),borderDash:n=>Zo(n,[6,6])},spanGaps:!0},{label:"\u52A0\u5DE5\u9762\u529F\u7387",data:[],fill:!1,borderColor:ta.CHART_COLORS.red,backgroundColor:ta.CHART_COLORS.red,tension:.2,segment:{borderColor:n=>Zo(n,"rgb(255,255,255,0.2)"),borderDash:n=>Zo(n,[6,6])},spanGaps:!0},{label:"\u6BD4\u4F8B",data:[],fill:!1,yAxisID:"y1",borderColor:ta.CHART_COLORS.green,backgroundColor:ta.CHART_COLORS.green,tension:.2,segment:{borderColor:n=>Zo(n,"rgb(255,255,255,0.2)"),borderDash:n=>Zo(n,[6,6])},spanGaps:!0}],ER={type:"line",data:{labels:[],datasets:wq},options:{animation:!1,responsive:!0,scales:{y:{type:"linear",display:!0,position:"left"},y1:{position:"right",type:"linear",display:!0},x:{type:"time",time:{unit:"day"}}},plugins:{title:{display:!0,text:"\u6BD4\u4F8B = \u5DE5\u4F5C\u9762\u529F\u7387 / \u57FA\u790E\u529F\u7387"}}}};var xR=(()=>{let t=class t{set source2(i){this._source2=i,this.labels=i.map(r=>(console.log(new Date(r.atDate??"").getTime()),new Date(r.atDate??"").getTime())),this.source_1=i.map(r=>r.basepower),this.source_2=i.map(r=>r.workpower),this.source_3=i.map(r=>r.workpower==null||r.basepower==null?null:r.workpower/r.basepower),this.update()}get source2(){return this._source2}constructor(){this.chart=void 0,this.labels=[],this.source_1=[],this.source_2=[],this.source_3=[],this._source2=[],qo.register(Wo,vv,il,Iv,Ev,xv)}ngOnInit(){this.initializeChart()}initializeChart(){let i=document.getElementById("myChart");i&&(this.chart=new qo(i,ER),this.update())}update(){this.chart&&(this.chart.data.labels=this.labels,this.chart.data.datasets[0].data=this.source_1,this.chart.data.datasets[1].data=this.source_2,this.chart.data.datasets[2].data=this.source_3,this.chart.update())}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=Jt({type:t,selectors:[["app-result-chart"]],inputs:{source2:"source2"},standalone:!0,features:[ee],decls:1,vars:0,consts:[["id","myChart",2,"min-width","400px"]],template:function(r,s){r&1&&yt(0,"canvas",0)},styles:["#myChart[_ngcontent-%COMP%]{height:50vh;width:100%}"]});let n=t;return n})();var TR=(()=>{let t=class t{constructor(i){this.fire=i}convertData(i){return{id:i.id,basepower:i.data().basepower,workpower:i.data().workpower,workStructure:i.data().workStructure,beamExpander:i.data().beamExpander,lens:i.data().lens,slit:i.data().slit,doe:i.data().doe,wavePlate:i.data().wavePlate,lambda:i.data().lambda,atDate:i.data().atDate,brandKey:i.data().brandKey,brandvalue0_Laser:i.data().brandvalue0_Laser,brandvalue1_rate:i.data().brandvalue1_rate,brandvalue2_atten:i.data().brandvalue2_atten,email:i.data().email,displayname:i.data().displayname}}getAllData(){return x(this,null,function*(){let i=[],r=Jn(wn(this.fire.get_db(),this.fire.FireBaseKeyName)),s=yield Zn(r);return console.log(s),s.forEach(o=>{i.push(this.convertData(o))}),i.sort((o,a)=>new Date(o.atDate??"").getTime()-new Date(a.atDate??"").getTime()),i})}getSpecData(i){return x(this,null,function*(){let r=[],s=Jn(wn(this.fire.get_db(),this.fire.FireBaseKeyName),NT(Ie("brandKey","==",i.brandKey),Ie("beamExpander","==",i.beamExpander),Ie("lens","==",i.lens),Ie("slit","==",i.slit),Ie("doe","==",i.doe),Ie("wavePlate","==",i.wavePlate),Ie("lambda","==",i.lambda),Ie("brandvalue0_Laser","==",i.brandvalue0_Laser),Ie("brandvalue1_rate","==",i.brandvalue1_rate),Ie("brandvalue2_atten","==",i.brandvalue2_atten),Ie("workStructure","==",i.workStructure)));return(yield Zn(s)).forEach(a=>{console.log(a),r.push(this.convertData(a))}),r.sort((a,c)=>new Date(a.atDate??"").getTime()-new Date(c.atDate??"").getTime()),r})}getUserData(i){return x(this,null,function*(){let r=[],s=Jn(wn(this.fire.get_db(),this.fire.FireBaseKeyName),Ie("email","==",i));return(yield Zn(s)).forEach(a=>{r.push(this.convertData(a))}),r.sort((a,c)=>new Date(a.atDate??"").getTime()-new Date(c.atDate??"").getTime()),r})}};t.\u0275fac=function(r){return new(r||t)(X(Qe))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();var Eq=()=>({updateOn:"change"});function xq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Tq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Aq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Sq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Cq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Dq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Rq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function kq(n,t){if(n&1&&(O(0,"option",43),B(1),N()),n&2){let e=t.$implicit;H("value",e),j(),Fe(" ",e," ")}}function Pq(n,t){n&1&&(O(0,"div",46),yt(1,"div",47),O(2,"span",48),B(3,"Loading..."),N()())}function Mq(n,t){if(n&1){let e=_i();yt(0,"app-result-chart",49),O(1,"div",50)(2,"div",51)(3,"button",52),om(),O(4,"svg",53),yt(5,"path",54),N()()(),am(),O(6,"div",55)(7,"button",56),Ot("click",function(){wt(e);let r=te(2);return It(r.download_data())}),om(),O(8,"svg",57),yt(9,"path",58)(10,"path",59),N()()()(),am(),O(11,"div")(12,"div",60),yt(13,"app-result-table",61),N()()}if(n&2){let e=te(2);H("source2",e.recieve_data),j(13),H("source",e.recieve_data)}}function Oq(n,t){if(n&1&&(O(0,"div"),yt(1,"hr",20),O(2,"div",44),Ct(3,Pq,4,0,"div",45)(4,Mq,14,2,"ng-template",null,1,Ta),N()()),n&2){let e=xa(5),i=te();j(3),H("ngIf",i.is_loading)("ngIfElse",e)}}var AR=(()=>{let t=class t{constructor(i,r){this.recieve_data=[],this.is_TableShow=!1,this.is_loading=!1,this.brands2={},this.keys_brands2=Object.keys(this.brands2),this.lambdas=["1030","515","343","258"],this.workStructureList=["\u76F4\u5BEB","Scanner"],this.beamExpanderList=["x(\u7121)","VRE13","VEX13"],this.slitList=["x(\u7121)"],this.lensList=["F 70 telecentric","F 100 telecentric","F 160 telecentric","F 103 telecentric Ronar-Simith","F 254 telecentric Ronar-Simith","Mitutoyo NIR 5X","Mitutoyo NIR 10X","Mitutoyo NIR 20X","Mitutoyo NIR 50X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 20X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 50X","OLYMPUS IR \u4FEE\u50CF\u5DEE 50X"],this.doeList=["X(\u7121)","\u5E73\u9802","M shape"],this.wavePlateList=["X(\u7121)","\u03BB2","\u03BB/4"],this.fire=i,this.getData=r,this.data=this.fire.getNewPowerData()}ngOnInit(){this.brands2["LC 80W"]=["S1",100,80],this.brands2.EKSPLA=["S2",200,100],this.brands2.Litlit=["S2",100,100],this.brands2["LC 40W"]=["S3",100,80],this.keys_brands2=Object.keys(this.brands2),this.data.brandKey=this.keys_brands2[0],this.data.lambda=this.lambdas[0],this.data.workStructure=this.workStructureList[0],this.data.beamExpander=this.beamExpanderList[0],this.data.slit=this.slitList[0],this.data.lens=this.lensList[0],this.data.doe=this.doeList[0],this.data.wavePlate=this.wavePlateList[0],this.data.atDate=new Date().toISOString().split("T")[0]}data_complete(){return this.data.brandvalue0_Laser=this.brands2[this.data.brandKey][0],this.data.brandvalue1_rate=this.brands2[this.data.brandKey][1],this.data.brandvalue2_atten=this.brands2[this.data.brandKey][2],this.data.email=this.fire.get_loginInfo()?.user?.user.email??null,this.data.displayname=this.fire.get_loginInfo()?.user?.user.displayName??null,this.data.basepower!=null&&this.data.workpower!=null&&this.data.workStructure!=null&&this.data.beamExpander!=null&&this.data.lens!=null&&this.data.slit!=null&&this.data.doe!=null&&this.data.wavePlate!=null&&this.data.lambda!=null&&this.data.atDate!=null&&this.data.brandKey!=null&&this.data.brandvalue0_Laser!=null&&this.data.brandvalue1_rate!=null&&this.data.brandvalue2_atten!=null}onGetDataClose(){this.recieve_data=[],console.log("onClose"),this.is_TableShow=!1}onGetDataStructure(){this.recieve_data=[],this.is_loading=!0,this.data_complete(),console.log(this.data),this.getData.getSpecData(this.data).then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}onGetDataUser(){this.recieve_data=[],this.is_loading=!0,this.data_complete(),console.log(this.data.email),this.getData.getUserData(this.data.email).then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}onGetDataAll(){this.recieve_data=[],this.is_loading=!0,this.getData.getAllData().then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}convertToCSV(i){let r=Object.keys(i[0]).join(","),s=i.map(o=>Object.values(o).join(","));return`${r}
${s.join(`
`)}`}download_data(){let i=this.convertToCSV(this.recieve_data),r="data:text/csv;charset=utf-8,"+encodeURIComponent(i),s=document.createElement("a");s.href=r,s.download="recieve_data.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}onSubmit(){console.log(this.data_complete()),console.log("brands2\u7684key:",this.data),this.fire.addData(this.data)}};t.\u0275fac=function(r){return new(r||t)(Q(Qe),Q(TR))},t.\u0275cmp=Jt({type:t,selectors:[["app-inputdata"]],standalone:!0,features:[ee],decls:100,vars:25,consts:[["form","ngForm"],["elseBlock",""],[1,"container"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"text-center"],[1,"blockquote"],[1,"row","g-3"],[1,"col-md-12"],["for","brandKey",1,"form-label"],["id","brandKey","name","brandKey","required","",1,"form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["for","laser",1,"form-label"],["type","text","id","laser","disabled","true",1,"form-control",3,"value"],["for","rate",1,"form-label"],["type","text","id","rate","disabled","true",1,"form-control",3,"value"],["for","attenuator",1,"form-label"],["type","text","id","attenuator","disabled","true",1,"form-control",3,"value"],["for","lambda",1,"form-label"],["id","lambda","name","lambda","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"my-4"],["for","workStructure",1,"form-label"],["id","workStructure","name","workStructure","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","beamExpander",1,"form-label"],["id","beamExpander","name","beamExpander","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","slit",1,"form-label"],["id","slit","name","slit","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","lens",1,"form-label"],["id","lens","name","lens","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","doe",1,"form-label"],["id","doe","name","doe","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","wavePlate",1,"form-label"],["id","wavePlate","name","wavePlate","required","",1,"form-select",3,"ngModelChange","ngModel"],["role","group","aria-label","Small button group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-primary",3,"click"],[4,"ngIf"],["for","basepower",1,"form-label"],["type","number","id","basepower","name","basepower","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","workpower","name","workpower","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["for","atDate",1,"form-label"],["type","date","id","atDate","name","atDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"],[3,"value"],[1,"border","border-primary"],["class","div-loading",4,"ngIf","ngIfElse"],[1,"div-loading"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,""],[3,"source2"],[1,"row","align-items-start"],["data-bs-toggle","collapse","data-bs-placement","top","title","\u5C55\u793A/\u6536\u7E2E\u8A73\u7D30\u8868\u683C",1,"col-md-1"],["type","button","aria-label","Close","data-bs-toggle","collapse","data-bs-placement","top","title","\u5C55\u793A/\u6536\u7E2E\u8A73\u7D30\u8868\u683C","data-bs-target","#collapseWidthExample","aria-expanded","false","aria-controls","collapseWidthExample",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-table"],["d","M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 2h-4v3h4zm0 4h-4v3h4zm0 4h-4v3h3a1 1 0 0 0 1-1zm-5 3v-3H6v3zm-5 0v-3H1v2a1 1 0 0 0 1 1zm-4-4h4V8H1zm0-4h4V4H1zm5-3v3h4V4zm4 4H6v3h4z"],[1,"col-md-1"],["type","button","data-bs-toggle","tooltip","data-bs-placement","top","title","\u8CC7\u6599\u4E0B\u8F09[.csv]",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"],["id","collapseWidthExample",1,"collapse"],[3,"source"]],template:function(r,s){if(r&1){let o=_i();O(0,"div",2)(1,"form",3,0),Ot("ngSubmit",function(){return wt(o),It(s.onSubmit())}),O(3,"figure",4)(4,"blockquote",5)(5,"p"),B(6,"\u96F7\u5C04"),N()()(),O(7,"div",6)(8,"div",7)(9,"label",8),B(10,"\u54C1\u724C"),N(),O(11,"select",9),ce("ngModelChange",function(c){return wt(o),ae(s.data.brandKey,c)||(s.data.brandKey=c),It(c)}),Ct(12,xq,2,2,"option",10),N()(),O(13,"div",11)(14,"label",12),B(15,"\u8A2D\u5099"),N(),yt(16,"input",13),N(),O(17,"div",11)(18,"label",14),B(19,"\u91CD\u8907\u7387(kHz)"),N(),yt(20,"input",15),N(),O(21,"div",11)(22,"label",16),B(23,"attenuator(%)"),N(),yt(24,"input",17),N(),O(25,"div",7)(26,"label",18),B(27,"\u6CE2\u9577(nm)"),N(),O(28,"select",19),ce("ngModelChange",function(c){return wt(o),ae(s.data.lambda,c)||(s.data.lambda=c),It(c)}),Ct(29,Tq,2,2,"option",10),N()()(),yt(30,"hr",20),O(31,"figure",4)(32,"blockquote",5)(33,"p"),B(34,"\u5149\u8DEF\u67B6\u69CB"),N()()(),O(35,"div",6)(36,"div",7)(37,"label",21),B(38,"\u52A0\u5DE5\u7CFB\u7D71"),N(),O(39,"select",22),ce("ngModelChange",function(c){return wt(o),ae(s.data.workStructure,c)||(s.data.workStructure=c),It(c)}),Ct(40,Aq,2,2,"option",10),N()(),O(41,"div",7)(42,"label",23),B(43,"\u64F4\u675F\u93E1"),N(),O(44,"select",24),ce("ngModelChange",function(c){return wt(o),ae(s.data.beamExpander,c)||(s.data.beamExpander=c),It(c)}),Ct(45,Sq,2,2,"option",10),N()(),O(46,"div",7)(47,"label",25),B(48,"\u72F9\u7E2B"),N(),O(49,"select",26),ce("ngModelChange",function(c){return wt(o),ae(s.data.slit,c)||(s.data.slit=c),It(c)}),Ct(50,Cq,2,2,"option",10),N()(),O(51,"div",7)(52,"label",27),B(53,"\u93E1\u982D"),N(),O(54,"select",28),ce("ngModelChange",function(c){return wt(o),ae(s.data.lens,c)||(s.data.lens=c),It(c)}),Ct(55,Dq,2,2,"option",10),N()(),O(56,"div",7)(57,"label",29),B(58,"DOE"),N(),O(59,"select",30),ce("ngModelChange",function(c){return wt(o),ae(s.data.doe,c)||(s.data.doe=c),It(c)}),Ct(60,Rq,2,2,"option",10),N()(),O(61,"div",7)(62,"label",31),B(63,"DOE"),N(),O(64,"select",32),ce("ngModelChange",function(c){return wt(o),ae(s.data.wavePlate,c)||(s.data.wavePlate=c),It(c)}),Ct(65,kq,2,2,"option",10),N()()(),yt(66,"hr",20),O(67,"div",6)(68,"div",33)(69,"button",34),Ot("click",function(){return wt(o),It(s.onGetDataClose())}),B(70," \u95DC\u9589 "),N(),O(71,"button",34),Ot("click",function(){return wt(o),It(s.onGetDataStructure())}),B(72," \u4F9D\u67B6\u69CB "),N(),O(73,"button",34),Ot("click",function(){return wt(o),It(s.onGetDataUser())}),B(74," \u4F9D\u672C\u4EBA "),N(),O(75,"button",34),Ot("click",function(){return wt(o),It(s.onGetDataAll())}),B(76," \u5168\u90E8 "),N()()(),Ct(77,Oq,6,2,"div",35),yt(78,"hr",20),O(79,"figure",4)(80,"blockquote",5)(81,"p"),B(82,"\u91CF\u6E2C\u7D00\u9304"),N()()(),O(83,"div",6)(84,"div",7)(85,"label",36),B(86,"\u57FA\u983B\u5149\u96F7\u5C04\u529F\u7387(w)"),N(),O(87,"input",37),ce("ngModelChange",function(c){return wt(o),ae(s.data.basepower,c)||(s.data.basepower=c),It(c)}),N()(),O(88,"div",7)(89,"label",36),B(90,"\u52A0\u5DE5\u9762\u529F\u7387(w)"),N(),O(91,"input",38),ce("ngModelChange",function(c){return wt(o),ae(s.data.workpower,c)||(s.data.workpower=c),It(c)}),N()(),O(92,"div",39)(93,"label",40),B(94,"\u65E5\u671F"),N(),O(95,"input",41),ce("ngModelChange",function(c){return wt(o),ae(s.data.atDate,c)||(s.data.atDate=c),It(c)}),N()()(),yt(96,"hr",20),O(97,"div",6)(98,"button",42),B(99," \u78BA\u8A8D\u9001\u51FA "),N()()()()}r&2&&(j(11),oe("ngModel",s.data.brandKey),H("ngModelOptions",ew(24,Eq)),j(),H("ngForOf",s.keys_brands2),j(4),H("value",s.brands2[s.data.brandKey][0]),j(4),H("value",s.brands2[s.data.brandKey][1]),j(4),H("value",s.brands2[s.data.brandKey][2]),j(4),oe("ngModel",s.data.lambda),j(),H("ngForOf",s.lambdas),j(10),oe("ngModel",s.data.workStructure),j(),H("ngForOf",s.workStructureList),j(4),oe("ngModel",s.data.beamExpander),j(),H("ngForOf",s.beamExpanderList),j(4),oe("ngModel",s.data.slit),j(),H("ngForOf",s.slitList),j(4),oe("ngModel",s.data.lens),j(),H("ngForOf",s.lensList),j(4),oe("ngModel",s.data.doe),j(),H("ngForOf",s.doeList),j(4),oe("ngModel",s.data.wavePlate),j(),H("ngForOf",s.wavePlateList),j(12),H("ngIf",s.is_TableShow),j(10),oe("ngModel",s.data.basepower),j(4),oe("ngModel",s.data.workpower),j(4),oe("ngModel",s.data.atDate))},dependencies:[Co,Wd,nS,rS,cr,ry,$d,So,jd,oy,ls,Vc,on,Ms,Ki,oS,xR],styles:[".div-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:50%;left:50%}.custom-tooltip[_ngcontent-%COMP%]{--bs-tooltip-bg: var(--bd-violet-bg);--bs-tooltip-color: var(--bs-white)}"]});let n=t;return n})();var SR=(()=>{let t=class t{constructor(i){this.user=null,this.fire=i,this.perm_data=this.fire.getNewPermission()}ngOnInit(){this.user=this.fire.get_loginInfo(),this.perm_data.email=this.user?.user?.user.email??""}onSubmit(){console.log(this.perm_data),this.fire.setPermission(this.perm_data).then(i=>{console.log(i)}),this.fire.getPermission(this.perm_data.email).then(i=>{console.log(i)})}};t.\u0275fac=function(r){return new(r||t)(Q(Qe))},t.\u0275cmp=Jt({type:t,selectors:[["app-regist"]],standalone:!0,features:[ee],decls:12,vars:2,consts:[["form","ngForm"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"col-md-4"],["for","desc",1,"form-label"],["type","text","id","desc","name","desc",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"col-auto"],["id","detail",1,"form-text"],[1,"row","g-3"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"]],template:function(r,s){if(r&1){let o=_i();O(0,"form",1,0),Ot("ngSubmit",function(){return wt(o),It(s.onSubmit())}),O(2,"div",2)(3,"label",3),B(4,"\u5DE5\u865F\u6216\u540D\u7A31"),N(),O(5,"input",4),ce("ngModelChange",function(c){return wt(o),ae(s.perm_data.desc,c)||(s.perm_data.desc=c),It(c)}),N(),O(6,"div",5)(7,"span",6),B(8," \u8ACB\u5DE5\u865F\u6216\u540D\u7A31\u4EE5\u8A3B\u518A,\u82E5\u7121\u5DE5\u865F\u8ACB\u8F38\u5165\u8DB3\u4F9B\u7BA1\u7406\u8005\u8FA8\u8B58\u7684\u540D\u7A31 "),N()()(),O(9,"div",7)(10,"button",8),B(11,"\u78BA\u8A8D\u9001\u51FA"),N()()()}r&2&&(j(5),oe("ngModel",s.perm_data.desc),H("placeholder",s.user==null||s.user.user==null||s.user.user.user==null?null:s.user.user.user.displayName))},dependencies:[Co,Wd,cr,So,jd,ls,Vc]});let n=t;return n})();var CR=(()=>{let t=class t{constructor(i){this.firebase=i}getAllPermission(){return x(this,null,function*(){let i=Jn(wn(this.firebase.get_db(),wo)),r=yield Zn(i),s=[];return r.forEach(o=>{let a=null;a={email:o.data().email,desc:o.data().desc,isAdministrator:o.data().isAdministrator},s.push(a)}),s})}deletePermission(i){return x(this,null,function*(){let r=Jn(wn(this.firebase.get_db(),wo),Ie("email","==",i));(yield Zn(r)).forEach(o=>x(this,null,function*(){yield VT(o.ref)}))})}updatePermission(i){return x(this,null,function*(){try{let r=Jn(wn(this.firebase.get_db(),wo),Ie("email","==",i.email));(yield Zn(r)).forEach(o=>x(this,null,function*(){yield LT(o.ref,{desc:i.desc,isAdministrator:i.isAdministrator})}))}catch{}})}};t.\u0275fac=function(r){return new(r||t)(X(Qe))},t.\u0275prov=et({token:t,factory:t.\u0275fac,providedIn:"root"});let n=t;return n})();function Fq(n,t){if(n&1){let e=_i();O(0,"tr")(1,"th",5),B(2),N(),O(3,"th")(4,"input",6),ce("ngModelChange",function(r){let s=wt(e).$implicit;return ae(s.desc,r)||(s.desc=r),It(r)}),N()(),O(5,"th",7),B(6),N(),O(7,"th")(8,"div",8)(9,"input",9),ce("ngModelChange",function(r){let s=wt(e).$implicit;return ae(s.isAdministrator,r)||(s.isAdministrator=r),It(r)}),N(),O(10,"label",10),B(11,"\u7BA1\u7406\u8005"),N(),O(12,"input",11),ce("ngModelChange",function(r){let s=wt(e).$implicit;return ae(s.isAdministrator,r)||(s.isAdministrator=r),It(r)}),N(),O(13,"label",10),B(14,"\u4E00\u822C\u4F7F\u7528\u8005"),N(),O(15,"input",11),ce("ngModelChange",function(r){let s=wt(e).$implicit;return ae(s.isAdministrator,r)||(s.isAdministrator=r),It(r)}),N(),O(16,"label",10),B(17,"\u8A3B\u518A\u4E2D"),N(),O(18,"input",11),ce("ngModelChange",function(r){let s=wt(e).$implicit;return ae(s.isAdministrator,r)||(s.isAdministrator=r),It(r)}),N(),O(19,"label",10),B(20,"\u5C01\u9396"),N(),O(21,"input",11),ce("ngModelChange",function(r){let s=wt(e).$implicit;return ae(s.isAdministrator,r)||(s.isAdministrator=r),It(r)}),N(),O(22,"label",12),B(23,"\u522A\u9664"),N()()(),O(24,"th")(25,"button",13),Ot("click",function(){let r=wt(e).$implicit,s=te();return It(s.update(r))}),B(26,"\u78BA\u8A8D\u4E0A\u50B3"),N()()()}if(n&2){let e=t.$implicit,i=t.index;j(2),Ne(i),j(2),oe("ngModel",e.desc),j(2),Ne(e.email),j(3),kn("id","",e.email," -0"),H("name","option"+i.toString()),oe("ngModel",e.isAdministrator),H("value",3),j(),kn("for","",e.email," -0"),j(2),kn("id","",e.email," -1"),H("name","option"+i.toString()),oe("ngModel",e.isAdministrator),H("value",2),j(),kn("for","",e.email," -1"),j(2),kn("id","",e.email," -2"),H("name","option"+i.toString()),oe("ngModel",e.isAdministrator),H("value",1),j(),kn("for","",e.email," -2"),j(2),kn("id","",e.email," -3"),H("name","option"+i.toString()),oe("ngModel",e.isAdministrator),H("value",0),j(),kn("for","",e.email," -3"),j(2),kn("id","",e.email," -4"),H("name","option"+i.toString()),oe("ngModel",e.isAdministrator),H("value",-1),j(),kn("for","",e.email," -4")}}var DR=(()=>{let t=class t{constructor(i){this.source=[],this.superuserService=i}ngOnInit(){this.superuserService.getAllPermission().then(i=>{this.source=i})}update(i){i.isAdministrator<0?this.superuserService.deletePermission(i.email).then(()=>{console.log("delete success")}):this.superuserService.updatePermission(i).then(()=>{console.log("update success")})}};t.\u0275fac=function(r){return new(r||t)(Q(CR))},t.\u0275cmp=Jt({type:t,selectors:[["app-permission-form"]],standalone:!0,features:[ee],decls:16,vars:1,consts:[[1,"div-container"],[1,"table"],["scope","col"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["scope","row"],[1,"form-control",2,"padding","10px","align-content","center","vertical-align","middle",3,"ngModelChange","ngModel"],[1,"h6"],["role","group","aria-label","Basic radio toggle button group",1,"btn-group","btn-group-sm"],["type","radio",1,"btn-check",3,"ngModelChange","name","id","ngModel","value"],[1,"btn","btn-outline-primary",3,"for"],["type","radio",1,"btn-check",3,"ngModelChange","name","ngModel","value","id"],[1,"btn","btn-outline-danger",3,"for"],[1,"btn","btn-dark",3,"click"]],template:function(r,s){r&1&&(O(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),B(5,"\uFF03"),N(),O(6,"th",2),B(7,"\u540D\u7A31"),N(),O(8,"th",2),B(9,"email"),N(),O(10,"th",2),B(11,"\u6B0A\u9650"),N(),O(12,"th",2),B(13,"\u522A\u9664"),N()()(),O(14,"tbody",3),Ct(15,Fq,27,38,"tr",4),N()()()),r&2&&(j(15),H("ngForOf",s.source))},dependencies:[on,Ms,Co,cr,sy,So,ls]});let n=t;return n})();var Lq=n=>({"div-blur-disable":n}),RR=n=>({active:n});function Vq(n,t){n&1&&(O(0,"div",18)(1,"div",19)(2,"span",20),B(3,"Loading..."),N()()())}function Uq(n,t){n&1&&(O(0,"button",21),yt(1,"span",22),N())}function jq(n,t){n&1&&(O(0,"div"),yt(1,"app-regist"),N())}function Bq(n,t){n&1&&(O(0,"div"),B(1,"Good morning!"),N())}function zq(n,t){if(n&1&&(O(0,"div")(1,"figure",26)(2,"blockquote",27)(3,"p"),B(4,"\u5DF2\u8A3B\u518A,\u8ACB\u7B49\u5F85\u7BA1\u7406\u4EBA\u54E1\u8A31\u53EF"),N()(),O(5,"figcaption",28),B(6),N()()()),n&2){let e,i=te(2);j(6),Fe(" \u8A3B\u518A\u540D\u7A31: ",(e=i.fire.get_loginInfo().permissions)==null?null:e.desc," ")}}function qq(n,t){n&1&&(O(0,"div"),yt(1,"app-permission-form"),N())}function Wq(n,t){n&1&&yt(0,"app-inputdata")}function $q(n,t){if(n&1&&(O(0,"div"),Ct(1,qq,2,0,"div",17)(2,Wq,1,0,"ng-template",null,1,Ta),N()),n&2){let e=xa(3),i=te(2);j(),H("ngIf",i.isPermissionPage)("ngIfElse",e)}}function Hq(n,t){if(n&1&&(O(0,"div")(1,"div",23),Ct(2,jq,2,0,"div",24)(3,Bq,2,0,"div",24)(4,zq,7,1,"div",24)(5,$q,4,2,"div",25),N()()),n&2){let e=te();j(),H("ngSwitch",e.permissionInfo()),j(),H("ngSwitchCase",void 0),j(),H("ngSwitchCase",0),j(),H("ngSwitchCase",1)}}function Gq(n,t){n&1&&(O(0,"figure",26)(1,"blockquote",27)(2,"p"),B(3,"\u8ACB\u767B\u5165"),N()(),O(4,"figcaption",28),B(5,"\u767B\u5165\u60A8\u7684google\u5E33\u865F"),N()())}var kR=(()=>{let t=class t{userInfo(){return this.fire.get_loginInfo().user!=null}permissionInfo(){return this.fire.get_loginInfo()?.permissions?.isAdministrator}constructor(i){this.isPermissionPage=!1,this.title="P20240815",this.fire=i}ngOnInit(){this.fire.is_loading=!1}get_isLoading(){return this.fire.is_loading}onClickPermission(){this.isPermissionPage=!0}onClickForm(){this.isPermissionPage=!1}};t.\u0275fac=function(r){return new(r||t)(Q(Qe))},t.\u0275cmp=Jt({type:t,selectors:[["app-root"]],standalone:!0,features:[sn([Qe]),ee],decls:25,vars:13,consts:[["notLoggedIn",""],["notPermissionPage",""],["class","div-loading",4,"ngIf"],[3,"ngClass"],[1,"navbar","navbar-dark","bg-dark","border-bottom","border-body"],[1,"container-fluid"],[1,"navbar-brand"],["class","navbar-toggler","type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar","aria-label","Toggle navigation",4,"ngIf"],["tabindex","-1","id","offcanvasDarkNavbar","aria-labelledby","offcanvasDarkNavbarLabel",1,"offcanvas","offcanvas-end","text-bg-dark"],[1,"offcanvas-header"],["id","offcanvasDarkNavbarLabel",1,"offcanvas-title"],["type","button","data-bs-dismiss","offcanvas","aria-label","Close",1,"btn-close","btn-close-white"],[1,"offcanvas-body"],[1,"navbar-nav","justify-content-end","flex-grow-1","pe-3"],[1,"nav-item",3,"click"],["aria-current","page",1,"nav-link",3,"ngClass"],[1,"nav-link",3,"ngClass"],[4,"ngIf","ngIfElse"],[1,"div-loading"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,"visually-hidden"],["type","button","data-bs-toggle","offcanvas","data-bs-target","#offcanvasDarkNavbar","aria-controls","offcanvasDarkNavbar","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngSwitchDefault"],[1,"text-center"],[1,"blockquote"],[1,"blockquote-footer"]],template:function(r,s){if(r&1){let o=_i();Ct(0,Vq,4,0,"div",2),O(1,"div",3)(2,"div")(3,"nav",4)(4,"div",5)(5,"a",6),yt(6,"app-login"),N(),Ct(7,Uq,2,0,"button",7),O(8,"div",8)(9,"div",9)(10,"h5",10),B(11," \u7BA1\u7406\u8005\u9078\u55AE "),N(),yt(12,"button",11),N(),O(13,"div",12)(14,"ul",13)(15,"li",14),Ot("click",function(){return wt(o),It(s.onClickPermission())}),O(16,"a",15),B(17," \u4F7F\u7528\u8005\u7BA1\u7406 "),N()(),O(18,"li",14),Ot("click",function(){return wt(o),It(s.onClickForm())}),O(19,"a",16),B(20,"\u529F\u7387\u7D00\u9304\u8207\u67E5\u770B"),N()()()()()()()(),Ct(21,Hq,6,4,"div",17)(22,Gq,6,0,"ng-template",null,0,Ta),yt(24,"router-outlet"),N()}if(r&2){let o,a=xa(23);H("ngIf",s.get_isLoading()),j(),H("ngClass",Ll(7,Lq,s.fire.is_loading)),j(6),H("ngIf",((o=s.permissionInfo())!==null&&o!==void 0?o:0)>=3),j(9),H("ngClass",Ll(9,RR,s.isPermissionPage)),j(3),H("ngClass",Ll(11,RR,!s.isPermissionPage)),j(2),H("ngIf",s.userInfo())("ngIfElse",a)}},dependencies:[AR,SR,ap,on,lw,Ki,uw,dw,hw,MA,DR],styles:['@charset "UTF-8";.div-blur-disable[_ngcontent-%COMP%]{pointer-events:none;opacity:.3;filter:blur(3px)}.div-loading[_ngcontent-%COMP%]{position:absolute;display:flex;justify-content:center;align-items:flex-start;top:50%;left:50%}']});let n=t;return n})();kw(kR,bI).catch(n=>console.error(n));
