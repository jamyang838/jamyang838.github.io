import{$ as ko,$a as df,A as qr,Aa as Qr,Ab as jc,B as er,Ba as Dw,Bb as zc,Ca as Rw,Cb as Gw,D as tf,Da as Pw,Db as pf,E as Wr,Ea as kw,Eb as mf,F as ww,Fa as Mw,Fb as Fo,Ga as Ow,Gb as Kw,H as Po,Ha as Nw,Hb as qc,I as wi,Ia as nr,Ib as Jr,J as nf,Jb as Yw,K as bw,Ka as Vw,Kb as Qw,L as Iw,La as Vo,Lb as cn,Ma as W,Mb as Wc,Na as Ie,Nb as Xw,O as Ew,P as sn,Pb as $c,Q as Tw,Qa as Lw,Qb as Hc,R as lt,Ra as Xr,S as Ne,T as bi,Ta as Gn,U as ye,Ua as Fw,Ub as Jw,V as $r,Va as on,Vb as Uo,W as Sw,Wb as Zw,X as et,Xa as Uw,Y as rf,Ya as Bw,Yb as gf,Z as Re,Za as jw,Zb as eb,_ as oe,_a as At,a as H,aa as Hr,ab as ee,b as xe,ba as yn,bb as ff,ca as Gr,d as yi,da as tt,db as B,e as S,ea as sf,eb as j,f as pw,fa as xw,fb as nt,g as mw,ga as Mo,gb as Lo,ha as tr,hb as it,i as Xd,ia as Oo,ib as jt,j as Jd,ja as $e,k as Zi,ka as He,l as Kt,la as of,m as _i,ma as af,mb as zw,n as Bc,na as Hn,nb as G,o as Dt,ob as zt,p as Z,pa as cf,pb as an,q as Ro,qa as lf,qb as Rt,r as gw,ra as Kr,rb as Pt,s as yw,sa as _n,sb as kt,t as ge,ta as Aw,tb as Ii,u as Zd,ua as uf,ub as vn,v as Yt,va as Cw,vb as qw,w as _w,wa as No,x as ef,xb as Ww,y as vw,ya as hf,yb as $w,z as vi,za as Yr,zb as Hw}from"./chunk-PUOJ2KNZ.js";var _f=class{};var Zr=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var vf=class{encodeKey(e){return tb(e)}encodeValue(e){return tb(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function nD(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,a]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],c=t.get(o)||[];c.push(a),t.set(o,c)}),t}var iD=/%(\d[a-f0-9])/gi,rD={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function tb(n){return encodeURIComponent(n).replace(iD,(e,t)=>rD[t]??e)}function Gc(n){return`${n}`}var Ei=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new vf,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=nD(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Gc):[Gc(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Gc(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Gc(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var wf=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function sD(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function nb(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ib(n){return typeof Blob<"u"&&n instanceof Blob}function rb(n){return typeof FormData<"u"&&n instanceof FormData}function oD(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Bo=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(sD(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Zr,this.context??=new wf,!this.params)this.params=new Ei,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let a=t.indexOf("?"),c=a===-1?"?":a<t.length-1?"&":"";this.urlWithParams=t+c+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||nb(this.body)||ib(this.body)||rb(this.body)||oD(this.body)?this.body:this.body instanceof Ei?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||rb(this.body)?null:ib(this.body)?this.body.type||null:nb(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ei?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,a=e.withCredentials??this.withCredentials,c=e.reportProgress??this.reportProgress,l=e.headers||this.headers,h=e.params||this.params,d=e.context??this.context;return e.setHeaders!==void 0&&(l=Object.keys(e.setHeaders).reduce((p,g)=>p.set(g,e.setHeaders[g]),l)),e.setParams&&(h=Object.keys(e.setParams).reduce((p,g)=>p.set(g,e.setParams[g]),h)),new n(t,i,o,{params:h,headers:l,context:d,reportProgress:c,responseType:r,withCredentials:a,transferCache:s})}},sb=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(sb||{}),bf=class{constructor(e,t=ob.Ok,i="OK"){this.headers=e.headers||new Zr,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var If=class n extends bf{constructor(e={}){super(e),this.type=sb.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var ob=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(ob||{});function yf(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var Hz=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Bo)o=i;else{let l;s.headers instanceof Zr?l=s.headers:l=new Zr(s.headers);let h;s.params&&(s.params instanceof Ei?h=s.params:h=new Ei({fromObject:s.params})),o=new Bo(i,r,s.body!==void 0?s.body:null,{headers:l,context:s.context,params:h,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let a=Z(o).pipe(er(l=>this.handler.handle(l)));if(i instanceof Bo||s.observe==="events")return a;let c=a.pipe(vi(l=>l instanceof If));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(ge(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return c.pipe(ge(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return c.pipe(ge(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return c.pipe(ge(l=>l.body))}case"response":return c;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Ei().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,yf(s,r))}post(i,r,s={}){return this.request("POST",i,yf(s,r))}put(i,r,s={}){return this.request("PUT",i,yf(s,r))}};e.\u0275fac=function(r){return new(r||e)(Re(_f))},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})();var Sf=class extends Qw{constructor(){super(...arguments),this.supportsDOMEvents=!0}},xf=class n extends Sf{static makeCurrent(){Yw(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=lD();return t==null?null:uD(t)}resetBaseElement(){jo=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Xw(document.cookie,e)}},jo=null;function lD(){return jo=jo||document.querySelector("base"),jo?jo.getAttribute("href"):null}function uD(n){return new URL(n,document.baseURI).pathname}var hD=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})(),Af=new et(""),hb=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new Ne(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(Re(Af),Re(Gn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})(),Kc=class{constructor(e){this._doc=e}},Ef="ng-app-id",db=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=gf(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Ef}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Ef),o;{let a=this.doc.createElement("style");return this.nonce&&a.setAttribute("nonce",this.nonce),a.textContent=r,this.platformIsServer&&a.setAttribute(Ef,this.appId),i.appendChild(a),a}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,a=o.get(r)?.elements;a?a.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(Re(cn),Re(uf),Re(hf,8),Re(No))},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})(),Tf={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Df=/%COMP%/g,fb="%COMP%",dD=`_nghost-${fb}`,fD=`_ngcontent-${fb}`,pD=!0,mD=new et("",{providedIn:"root",factory:()=>pD});function gD(n){return fD.replace(Df,n)}function yD(n){return dD.replace(Df,n)}function pb(n,e){return e.map(t=>t.replace(Df,n))}var ab=(()=>{let e=class e{constructor(i,r,s,o,a,c,l,h=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=a,this.platformId=c,this.ngZone=l,this.nonce=h,this.rendererByCompId=new Map,this.platformIsServer=gf(c),this.defaultRenderer=new zo(i,a,l,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===ko.ShadowDom&&(r=xe(H({},r),{encapsulation:ko.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof Yc?s.applyToHost(i):s instanceof qo&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let a=this.doc,c=this.ngZone,l=this.eventManager,h=this.sharedStylesHost,d=this.removeStylesOnCompDestroy,p=this.platformIsServer;switch(r.encapsulation){case ko.Emulated:o=new Yc(l,h,r,this.appId,d,a,c,p);break;case ko.ShadowDom:return new Cf(l,h,i,r,a,c,this.nonce,p);default:o=new qo(l,h,r,d,a,c,p);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(Re(hb),Re(db),Re(uf),Re(mD),Re(cn),Re(No),Re(Gn),Re(hf))},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})(),zo=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Tf[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(cb(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(cb(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new Ne(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Tf[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Tf[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Vo.DashCase|Vo.Important)?e.style.setProperty(t,i,r&Vo.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Vo.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Jr().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function cb(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var Cf=class extends zo{constructor(e,t,i,r,s,o,a,c){super(e,s,o,c),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let l=pb(r.id,r.styles);for(let h of l){let d=document.createElement("style");a&&d.setAttribute("nonce",a),d.textContent=h,this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},qo=class extends zo{constructor(e,t,i,r,s,o,a,c){super(e,s,o,a),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=c?pb(c,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Yc=class extends qo{constructor(e,t,i,r,s,o,a,c){let l=r+"-"+i.id;super(e,t,i,s,o,a,c,l),this.contentAttr=gD(l),this.hostAttr=yD(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},_D=(()=>{let e=class e extends Kc{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(Re(cn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})(),lb=["alt","control","meta","shift"],vD={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},wD={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},bD=(()=>{let e=class e extends Kc{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),a=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Jr().onAndCancel(i,o.domEventName,a))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),a="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),a="code."),lb.forEach(h=>{let d=r.indexOf(h);d>-1&&(r.splice(d,1),a+=h+".")}),a+=o,r.length!=0||o.length===0)return null;let l={};return l.domEventName=s,l.fullKey=a,l}static matchEventFullKeyCode(i,r){let s=vD[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),lb.forEach(a=>{if(a!==s){let c=wD[a];c(i)&&(o+=a+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(Re(cn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac});let n=e;return n})();function mq(n,e){return Kw(H({rootComponent:n},ID(e)))}function ID(n){return{appProviders:[...AD,...n?.providers??[]],platformProviders:xD}}function ED(){xf.makeCurrent()}function TD(){return new lf}function SD(){return Aw(document),document}var xD=[{provide:No,useValue:Zw},{provide:Cw,useValue:ED,multi:!0},{provide:cn,useFactory:SD,deps:[]}];var AD=[{provide:xw,useValue:"root"},{provide:lf,useFactory:TD,deps:[]},{provide:Af,useClass:_D,multi:!0,deps:[cn,Gn,No]},{provide:Af,useClass:bD,multi:!0,deps:[cn]},ab,db,hb,{provide:Lw,useExisting:ab},{provide:eb,useClass:hD,deps:[]},[]];var mb=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(Re(cn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var CD=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=Re(DD),s},providedIn:"root"});let n=e;return n})(),DD=(()=>{let e=class e extends CD{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case nr.NONE:return r;case nr.HTML:return Qr(r,"HTML")?Yr(r):Nw(this._doc,String(r)).toString();case nr.STYLE:return Qr(r,"Style")?Yr(r):r;case nr.SCRIPT:if(Qr(r,"Script"))return Yr(r);throw new Ne(5200,!1);case nr.URL:return Qr(r,"URL")?Yr(r):Ow(String(r));case nr.RESOURCE_URL:if(Qr(r,"ResourceURL"))return Yr(r);throw new Ne(5201,!1);default:throw new Ne(5202,!1)}}bypassSecurityTrustHtml(i){return Dw(i)}bypassSecurityTrustStyle(i){return Rw(i)}bypassSecurityTrustScript(i){return Pw(i)}bypassSecurityTrustUrl(i){return kw(i)}bypassSecurityTrustResourceUrl(i){return Mw(i)}};e.\u0275fac=function(r){return new(r||e)(Re(cn))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var re="primary",ra=Symbol("RouteTitle"),Of=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function rs(n){return new Of(n)}function PD(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],a=n[s];if(o.startsWith(":"))r[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function kD(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!wn(n[t],e[t]))return!1;return!0}function wn(n,e){let t=n?Nf(n):void 0,i=e?Nf(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!bb(n[r],e[r]))return!1;return!0}function Nf(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function bb(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Ib(n){return n.length>0?n[n.length-1]:null}function xi(n){return gw(n)?n:zc(n)?Dt(Promise.resolve(n)):Z(n)}var MD={exact:Tb,subset:Sb},Eb={exact:OD,subset:ND,ignored:()=>!0};function gb(n,e,t){return MD[t.paths](n.root,e.root,t.matrixParams)&&Eb[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function OD(n,e){return wn(n,e)}function Tb(n,e,t){if(!rr(n.segments,e.segments)||!Jc(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!Tb(n.children[i],e.children[i],t))return!1;return!0}function ND(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>bb(n[t],e[t]))}function Sb(n,e,t){return xb(n,e,e.segments,t)}function xb(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!rr(r,t)||e.hasChildren()||!Jc(r,t,i))}else if(n.segments.length===t.length){if(!rr(n.segments,t)||!Jc(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Sb(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!rr(n.segments,r)||!Jc(n.segments,r,i)||!n.children[re]?!1:xb(n.children[re],e,s,i)}}function Jc(n,e,t){return e.every((i,r)=>Eb[t](n[r].parameters,i.parameters))}var Ti=class{constructor(e=new we([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){return FD.serialize(this)}},we=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Zc(this)}},ir=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=rs(this.parameters),this._parameterMap}toString(){return Cb(this)}};function VD(n,e){return rr(n,e)&&n.every((t,i)=>wn(t.parameters,e[i].parameters))}function rr(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function LD(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===re&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==re&&(t=t.concat(e(r,i)))}),t}var ap=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:()=>new tl,providedIn:"root"});let n=e;return n})(),tl=class{parse(e){let t=new Lf(e);return new Ti(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Wo(e.root,!0)}`,i=jD(e.queryParams),r=typeof e.fragment=="string"?`#${UD(e.fragment)}`:"";return`${t}${i}${r}`}},FD=new tl;function Zc(n){return n.segments.map(e=>Cb(e)).join("/")}function Wo(n,e){if(!n.hasChildren())return Zc(n);if(e){let t=n.children[re]?Wo(n.children[re],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==re&&i.push(`${r}:${Wo(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=LD(n,(i,r)=>r===re?[Wo(n.children[re],!1)]:[`${r}:${Wo(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[re]!=null?`${Zc(n)}/${t[0]}`:`${Zc(n)}/(${t.join("//")})`}}function Ab(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Qc(n){return Ab(n).replace(/%3B/gi,";")}function UD(n){return encodeURI(n)}function Vf(n){return Ab(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function el(n){return decodeURIComponent(n)}function yb(n){return el(n.replace(/\+/g,"%20"))}function Cb(n){return`${Vf(n.path)}${BD(n.parameters)}`}function BD(n){return Object.entries(n).map(([e,t])=>`;${Vf(e)}=${Vf(t)}`).join("")}function jD(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${Qc(t)}=${Qc(r)}`).join("&"):`${Qc(t)}=${Qc(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var zD=/^[^\/()?;#]+/;function Rf(n){let e=n.match(zD);return e?e[0]:""}var qD=/^[^\/()?;=#]+/;function WD(n){let e=n.match(qD);return e?e[0]:""}var $D=/^[^=?&#]+/;function HD(n){let e=n.match($D);return e?e[0]:""}var GD=/^[^&#]+/;function KD(n){let e=n.match(GD);return e?e[0]:""}var Lf=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new we([],{}):new we([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[re]=new we(e,t)),i}parseSegment(){let e=Rf(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ne(4009,!1);return this.capture(e),new ir(el(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=WD(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=Rf(this.remaining);r&&(i=r,this.capture(i))}e[el(t)]=el(i)}parseQueryParam(e){let t=HD(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=KD(this.remaining);o&&(i=o,this.capture(i))}let r=yb(t),s=yb(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=Rf(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new Ne(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=re);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[re]:new we([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ne(4011,!1)}};function Db(n){return n.segments.length>0?new we([],{[re]:n}):n}function Rb(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=Rb(r);if(i===re&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))e[o]=a;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new we(n.segments,e);return YD(t)}function YD(n){if(n.numberOfChildren===1&&n.children[re]){let e=n.children[re];return new we(n.segments.concat(e.segments),e.children)}return n}function ss(n){return n instanceof Ti}function QD(n,e,t=null,i=null){let r=Pb(n);return kb(r,e,t,i)}function Pb(n){let e;function t(s){let o={};for(let c of s.children){let l=t(c);o[c.outlet]=l}let a=new we(s.url,o);return s===n&&(e=a),a}let i=t(n.root),r=Db(i);return e??r}function kb(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Pf(r,r,r,t,i);let s=XD(e);if(s.toRoot())return Pf(r,r,new we([],{}),t,i);let o=JD(s,r,n),a=o.processChildren?Go(o.segmentGroup,o.index,s.commands):Ob(o.segmentGroup,o.index,s.commands);return Pf(r,o.segmentGroup,a,t,i)}function nl(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Qo(n){return typeof n=="object"&&n!=null&&n.outlets}function Pf(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([c,l])=>{s[c]=Array.isArray(l)?l.map(h=>`${h}`):`${l}`});let o;n===e?o=t:o=Mb(n,e,t);let a=Db(Rb(o));return new Ti(a,s,r)}function Mb(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Mb(s,e,t)}),new we(n.segments,i)}var il=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&nl(i[0]))throw new Ne(4003,!1);let r=i.find(Qo);if(r&&r!==Ib(i))throw new Ne(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function XD(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new il(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([c,l])=>{a[c]=typeof l=="string"?l.split("/"):l}),[...r,{outlets:a}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((a,c)=>{c==0&&a==="."||(c==0&&a===""?t=!0:a===".."?e++:a!=""&&r.push(a))}),r):[...r,s]},[]);return new il(t,e,i)}var ns=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function JD(n,e,t){if(n.isAbsolute)return new ns(e,!0,0);if(!t)return new ns(e,!1,NaN);if(t.parent===null)return new ns(t,!0,0);let i=nl(n.commands[0])?0:1,r=t.segments.length-1+i;return ZD(t,r,n.numberOfDoubleDots)}function ZD(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new Ne(4005,!1);r=i.segments.length}return new ns(i,!1,r-s)}function eR(n){return Qo(n[0])?n[0].outlets:{[re]:n}}function Ob(n,e,t){if(n??=new we([],{}),n.segments.length===0&&n.hasChildren())return Go(n,e,t);let i=tR(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new we(n.segments.slice(0,i.pathIndex),{});return s.children[re]=new we(n.segments.slice(i.pathIndex),n.children),Go(s,0,r)}else return i.match&&r.length===0?new we(n.segments,{}):i.match&&!n.hasChildren()?Ff(n,e,t):i.match?Go(n,0,r):Ff(n,e,t)}function Go(n,e,t){if(t.length===0)return new we(n.segments,{});{let i=eR(t),r={};if(Object.keys(i).some(s=>s!==re)&&n.children[re]&&n.numberOfChildren===1&&n.children[re].segments.length===0){let s=Go(n.children[re],e,t);return new we(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=Ob(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new we(n.segments,r)}}function tR(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],a=t[i];if(Qo(a))break;let c=`${a}`,l=i<t.length-1?t[i+1]:null;if(r>0&&c===void 0)break;if(c&&l&&typeof l=="object"&&l.outlets===void 0){if(!vb(c,l,o))return s;i+=2}else{if(!vb(c,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Ff(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(Qo(s)){let c=nR(s.outlets);return new we(i,c)}if(r===0&&nl(t[0])){let c=n.segments[e];i.push(new ir(c.path,_b(t[0]))),r++;continue}let o=Qo(s)?s.outlets[re]:`${s}`,a=r<t.length-1?t[r+1]:null;o&&a&&nl(a)?(i.push(new ir(o,_b(a))),r+=2):(i.push(new ir(o,{})),r++)}return new we(i,{})}function nR(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Ff(new we([],{}),0,i))}),e}function _b(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function vb(n,e,t){return n==t.path&&wn(e,t.parameters)}var Ko="imperative",ut=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(ut||{}),Qt=class{constructor(e,t){this.id=e,this.url=t}},Xo=class extends Qt{constructor(e,t,i="imperative",r=null){super(e,t),this.type=ut.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},sr=class extends Qt{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=ut.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Wt=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(Wt||{}),Uf=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Uf||{}),Si=class extends Qt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ut.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},or=class extends Qt{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=ut.NavigationSkipped}},Jo=class extends Qt{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=ut.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},rl=class extends Qt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Bf=class extends Qt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},jf=class extends Qt{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=ut.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},zf=class extends Qt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},qf=class extends Qt{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=ut.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wf=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},$f=class{constructor(e){this.route=e,this.type=ut.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Hf=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Gf=class{constructor(e){this.snapshot=e,this.type=ut.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Kf=class{constructor(e){this.snapshot=e,this.type=ut.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Yf=class{constructor(e){this.snapshot=e,this.type=ut.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var Zo=class{},ea=class{constructor(e){this.url=e}};var Qf=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ul,this.attachRef=null}},ul=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new Qf,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),sl=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=Xf(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=Xf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=Jf(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return Jf(e,this._root).map(t=>t.value)}};function Xf(n,e){if(n===e.value)return e;for(let t of e.children){let i=Xf(n,t);if(i)return i}return null}function Jf(n,e){if(n===e.value)return[e];for(let t of e.children){let i=Jf(n,t);if(i.length)return i.unshift(e),i}return[]}var qt=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ts(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ol=class extends sl{constructor(e,t){super(e),this.snapshot=t,lp(this,e)}toString(){return this.snapshot.toString()}};function Nb(n){let e=iR(n),t=new Kt([new ir("",{})]),i=new Kt({}),r=new Kt({}),s=new Kt({}),o=new Kt(""),a=new os(t,i,s,o,r,re,n,e.root);return a.snapshot=e.root,new ol(new qt(a,[]),e)}function iR(n){let e={},t={},i={},r="",s=new ta([],e,i,r,t,re,n,null,{});return new al("",new qt(s,[]))}var os=class{constructor(e,t,i,r,s,o,a,c){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(ge(l=>l[ra]))??Z(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(ge(e=>rs(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(ge(e=>rs(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function cp(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:H(H({},e.params),n.params),data:H(H({},e.data),n.data),resolve:H(H(H(H({},n.data),e.data),r?.data),n._resolvedData)}:i={params:H({},n.params),data:H({},n.data),resolve:H(H({},n.data),n._resolvedData??{})},r&&Lb(r)&&(i.resolve[ra]=r.title),i}var ta=class{get title(){return this.data?.[ra]}constructor(e,t,i,r,s,o,a,c,l){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=a,this.routeConfig=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=rs(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=rs(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},al=class extends sl{constructor(e,t){super(t),this.url=e,lp(this,t)}toString(){return Vb(this._root)}};function lp(n,e){e.value._routerState=n,e.children.forEach(t=>lp(n,t))}function Vb(n){let e=n.children.length>0?` { ${n.children.map(Vb).join(", ")} } `:"";return`${n.value}${e}`}function kf(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,wn(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),wn(e.params,t.params)||n.paramsSubject.next(t.params),kD(e.url,t.url)||n.urlSubject.next(t.url),wn(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function Zf(n,e){let t=wn(n.params,e.params)&&VD(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||Zf(n.parent,e.parent))}function Lb(n){return typeof n.title=="string"||n.title===null}var rR=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=re,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=oe(ul),this.location=oe(Fw),this.changeDetector=oe(Fo),this.environmentInjector=oe(Mo),this.inputBinder=oe(up,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ne(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ne(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ne(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new Ne(4013,!1);this._activatedRoute=i;let s=this.location,a=i.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,l=new ep(i,c,s.injector);this.activated=s.createComponent(a,{index:s.length,injector:l,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=tt({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Oo]});let n=e;return n})(),ep=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===os?this.route:e===ul?this.childContexts:this.parent.get(e,t)}},up=new et("");function sR(n,e,t){let i=na(n,e._root,t?t._root:void 0);return new ol(i,e)}function na(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=oR(n,e,t);return new qt(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(a=>na(n,a)),o}}let i=aR(e.value),r=e.children.map(s=>na(n,s));return new qt(i,r)}}function oR(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return na(n,i,r);return na(n,i)})}function aR(n){return new os(new Kt(n.url),new Kt(n.params),new Kt(n.queryParams),new Kt(n.fragment),new Kt(n.data),n.outlet,n.component,n)}var Fb="ngNavigationCancelingError";function Ub(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=ss(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Bb(!1,Wt.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Bb(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Fb]=!0,t.cancellationCode=e,t}function cR(n){return jb(n)&&ss(n.url)}function jb(n){return!!n&&n[Fb]}var lR=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=yn({type:e,selectors:[["ng-component"]],standalone:!0,features:[vn],decls:1,vars:0,template:function(r,s){r&1&&nt(0,"router-outlet")},dependencies:[rR],encapsulation:2});let n=e;return n})();function uR(n,e){return n.providers&&!n._injector&&(n._injector=Bw(n.providers,e,`Route: ${n.path}`)),n._injector??e}function hp(n){let e=n.children&&n.children.map(hp),t=e?xe(H({},n),{children:e}):H({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==re&&(t.component=lR),t}function bn(n){return n.outlet||re}function hR(n,e){let t=n.filter(i=>bn(i)===e);return t.push(...n.filter(i=>bn(i)!==e)),t}function sa(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var dR=(n,e,t,i)=>ge(r=>(new tp(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),tp=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),kf(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ts(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ts(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),a=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:a})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ts(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ts(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new Yf(s.value.snapshot))}),e.children.length&&this.forwardEvent(new Gf(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(kf(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let a=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),kf(a.route.value),this.activateChildRoutes(e,null,o.children)}else{let a=sa(r.snapshot);o.attachRef=null,o.route=r,o.injector=a,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},cl=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},is=class{constructor(e,t){this.component=e,this.route=t}};function fR(n,e,t){let i=n._root,r=e?e._root:null;return $o(i,r,t,[i.value])}function pR(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function cs(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Sw(n)?n:e.get(n):i}function $o(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ts(e);return n.children.forEach(o=>{mR(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Yo(a,t.getContext(o),r)),r}function mR(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,a=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let c=gR(o,s,s.routeConfig.runGuardsAndResolvers);c?r.canActivateChecks.push(new cl(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?$o(n,e,a?a.children:null,i,r):$o(n,e,t,i,r),c&&a&&a.outlet&&a.outlet.isActivated&&r.canDeactivateChecks.push(new is(a.outlet.component,o))}else o&&Yo(e,a,r),r.canActivateChecks.push(new cl(i)),s.component?$o(n,null,a?a.children:null,i,r):$o(n,null,t,i,r);return r}function gR(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!rr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!rr(n.url,e.url)||!wn(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Zf(n,e)||!wn(n.queryParams,e.queryParams);case"paramsChange":default:return!Zf(n,e)}}function Yo(n,e,t){let i=ts(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?Yo(o,e.children.getContext(s),t):Yo(o,null,t):Yo(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new is(e.outlet.component,r)):t.canDeactivateChecks.push(new is(null,r)):t.canDeactivateChecks.push(new is(null,r))}function oa(n){return typeof n=="function"}function yR(n){return typeof n=="boolean"}function _R(n){return n&&oa(n.canLoad)}function vR(n){return n&&oa(n.canActivate)}function wR(n){return n&&oa(n.canActivateChild)}function bR(n){return n&&oa(n.canDeactivate)}function IR(n){return n&&oa(n.canMatch)}function zb(n){return n instanceof yw||n?.name==="EmptyError"}var Xc=Symbol("INITIAL_VALUE");function as(){return sn(n=>Zd(n.map(e=>e.pipe(Wr(1),Ew(Xc)))).pipe(ge(e=>{for(let t of e)if(t!==!0){if(t===Xc)return Xc;if(t===!1||t instanceof Ti)return t}return!0}),vi(e=>e!==Xc),Wr(1)))}function ER(n,e){return Yt(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?Z(xe(H({},t),{guardsResult:!0})):TR(o,i,r,n).pipe(Yt(a=>a&&yR(a)?SR(i,s,n,e):Z(a)),ge(a=>xe(H({},t),{guardsResult:a})))})}function TR(n,e,t,i){return Dt(n).pipe(Yt(r=>RR(r.component,r.route,t,e,i)),wi(r=>r!==!0,!0))}function SR(n,e,t,i){return Dt(e).pipe(er(r=>_w(AR(r.route.parent,i),xR(r.route,i),DR(n,r.path,t),CR(n,r.route,t))),wi(r=>r!==!0,!0))}function xR(n,e){return n!==null&&e&&e(new Kf(n)),Z(!0)}function AR(n,e){return n!==null&&e&&e(new Hf(n)),Z(!0)}function CR(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return Z(!0);let r=i.map(s=>ef(()=>{let o=sa(e)??t,a=cs(s,o),c=vR(a)?a.canActivate(e,n):tr(o,()=>a(e,n));return xi(c).pipe(wi())}));return Z(r).pipe(as())}function DR(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>pR(o)).filter(o=>o!==null).map(o=>ef(()=>{let a=o.guards.map(c=>{let l=sa(o.node)??t,h=cs(c,l),d=wR(h)?h.canActivateChild(i,n):tr(l,()=>h(i,n));return xi(d).pipe(wi())});return Z(a).pipe(as())}));return Z(s).pipe(as())}function RR(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return Z(!0);let o=s.map(a=>{let c=sa(e)??r,l=cs(a,c),h=bR(l)?l.canDeactivate(n,e,t,i):tr(c,()=>l(n,e,t,i));return xi(h).pipe(wi())});return Z(o).pipe(as())}function PR(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return Z(!0);let s=r.map(o=>{let a=cs(o,n),c=_R(a)?a.canLoad(e,t):tr(n,()=>a(e,t));return xi(c)});return Z(s).pipe(as(),qb(i))}function qb(n){return mw(lt(e=>{if(ss(e))throw Ub(n,e)}),ge(e=>e===!0))}function kR(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return Z(!0);let s=r.map(o=>{let a=cs(o,n),c=IR(a)?a.canMatch(e,t):tr(n,()=>a(e,t));return xi(c)});return Z(s).pipe(as(),qb(i))}var ia=class{constructor(e){this.segmentGroup=e||null}},ll=class extends Error{constructor(e){super(),this.urlTree=e}};function es(n){return Ro(new ia(n))}function MR(n){return Ro(new Ne(4e3,!1))}function OR(n){return Ro(Bb(!1,Wt.GuardRejected))}var np=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return Z(i);if(r.numberOfChildren>1||!r.children[re])return MR(e.redirectTo);r=r.children[re]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new ll(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new Ti(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);i[r]=t[a]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([a,c])=>{o[a]=this.createSegmentGroup(e,c,i,r)}),new we(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new Ne(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},ip={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function NR(n,e,t,i,r){let s=dp(n,e,t);return s.matched?(i=uR(e,i),kR(i,e,t,r).pipe(ge(o=>o===!0?s:H({},ip)))):Z(s)}function dp(n,e,t){if(e.path==="**")return VR(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?H({},ip):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||PD)(t,n,e);if(!r)return H({},ip);let s={};Object.entries(r.posParams??{}).forEach(([a,c])=>{s[a]=c.path});let o=r.consumed.length>0?H(H({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function VR(n){return{matched:!0,parameters:n.length>0?Ib(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function wb(n,e,t,i){return t.length>0&&UR(n,t,i)?{segmentGroup:new we(e,FR(i,new we(t,n.children))),slicedSegments:[]}:t.length===0&&BR(n,t,i)?{segmentGroup:new we(n.segments,LR(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new we(n.segments,n.children),slicedSegments:t}}function LR(n,e,t,i){let r={};for(let s of t)if(hl(n,e,s)&&!i[bn(s)]){let o=new we([],{});r[bn(s)]=o}return H(H({},i),r)}function FR(n,e){let t={};t[re]=e;for(let i of n)if(i.path===""&&bn(i)!==re){let r=new we([],{});t[bn(i)]=r}return t}function UR(n,e,t){return t.some(i=>hl(n,e,i)&&bn(i)!==re)}function BR(n,e,t){return t.some(i=>hl(n,e,i))}function hl(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function jR(n,e,t,i){return bn(n)!==i&&(i===re||!hl(e,t,n))?!1:dp(e,n,t).matched}function zR(n,e,t){return e.length===0&&!n.children[t]}var rp=class{};function qR(n,e,t,i,r,s,o="emptyOnly"){return new sp(n,e,t,i,r,o,s).recognize()}var WR=31,sp=class{constructor(e,t,i,r,s,o,a){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new np(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ne(4002,`'${e.segmentGroup}'`)}recognize(){let e=wb(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(ge(t=>{let i=new ta([],Object.freeze({}),Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,{},re,this.rootComponentType,null,{}),r=new qt(i,t),s=new al("",r),o=QD(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,re).pipe(qr(i=>{if(i instanceof ll)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof ia?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=cp(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(ge(s=>s instanceof qt?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return Dt(r).pipe(er(s=>{let o=i.children[s],a=hR(t,s);return this.processSegmentGroup(e,a,o,s)}),Iw((s,o)=>(s.push(...o),s)),tf(null),bw(),Yt(s=>{if(s===null)return es(i);let o=Wb(s);return $R(o),Z(o)}))}processSegment(e,t,i,r,s,o){return Dt(t).pipe(er(a=>this.processSegmentAgainstRoute(a._injector??e,t,a,i,r,s,o).pipe(qr(c=>{if(c instanceof ia)return Z(null);throw c}))),wi(a=>!!a),qr(a=>{if(zb(a))return zR(i,r,s)?Z(new rp):es(i);throw a}))}processSegmentAgainstRoute(e,t,i,r,s,o,a){return jR(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):es(r):es(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:a,consumedSegments:c,positionalParamSegments:l,remainingSegments:h}=dp(t,r,s);if(!a)return es(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>WR&&(this.allowRedirects=!1));let d=this.applyRedirects.applyRedirectCommands(c,r.redirectTo,l);return this.applyRedirects.lineralizeSegments(r,d).pipe(Yt(p=>this.processSegment(e,i,t,p.concat(h),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o=NR(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),o.pipe(sn(a=>a.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(sn(({routes:c})=>{let l=i._loadedInjector??e,{consumedSegments:h,remainingSegments:d,parameters:p}=a,g=new ta(h,p,Object.freeze(H({},this.urlTree.queryParams)),this.urlTree.fragment,GR(i),bn(i),i.component??i._loadedComponent??null,i,KR(i)),{segmentGroup:b,slicedSegments:_}=wb(t,h,d,c);if(_.length===0&&b.hasChildren())return this.processChildren(l,c,b).pipe(ge(D=>D===null?null:new qt(g,D)));if(c.length===0&&_.length===0)return Z(new qt(g,[]));let w=bn(i)===s;return this.processSegment(l,c,b,_,w?re:s,!0).pipe(ge(D=>new qt(g,D instanceof qt?[D]:[])))}))):es(t)))}getChildConfig(e,t,i){return t.children?Z({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?Z({routes:t._loadedRoutes,injector:t._loadedInjector}):PR(e,t,i,this.urlSerializer).pipe(Yt(r=>r?this.configLoader.loadChildren(e,t).pipe(lt(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):OR(t))):Z({routes:[],injector:e})}};function $R(n){n.sort((e,t)=>e.value.outlet===re?-1:t.value.outlet===re?1:e.value.outlet.localeCompare(t.value.outlet))}function HR(n){let e=n.value.routeConfig;return e&&e.path===""}function Wb(n){let e=[],t=new Set;for(let i of n){if(!HR(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Wb(i.children);e.push(new qt(i.value,r))}return e.filter(i=>!t.has(i))}function GR(n){return n.data||{}}function KR(n){return n.resolve||{}}function YR(n,e,t,i,r,s){return Yt(o=>qR(n,e,t,i,o.extractedUrl,r,s).pipe(ge(({state:a,tree:c})=>xe(H({},o),{targetSnapshot:a,urlAfterRedirects:c}))))}function QR(n,e){return Yt(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return Z(t);let s=new Set(r.map(c=>c.route)),o=new Set;for(let c of s)if(!o.has(c))for(let l of $b(c))o.add(l);let a=0;return Dt(o).pipe(er(c=>s.has(c)?XR(c,i,n,e):(c.data=cp(c,c.parent,n).resolve,Z(void 0))),lt(()=>a++),nf(1),Yt(c=>a===o.size?Z(t):_i))})}function $b(n){let e=n.children.map(t=>$b(t)).flat();return[n,...e]}function XR(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!Lb(r)&&(s[ra]=r.title),JR(s,n,e,i).pipe(ge(o=>(n._resolvedData=o,n.data=cp(n,n.parent,t).resolve,null)))}function JR(n,e,t,i){let r=Nf(n);if(r.length===0)return Z({});let s={};return Dt(r).pipe(Yt(o=>ZR(n[o],e,t,i).pipe(wi(),lt(a=>{s[o]=a}))),nf(1),ww(s),qr(o=>zb(o)?_i:Ro(o)))}function ZR(n,e,t,i){let r=sa(e)??i,s=cs(n,r),o=s.resolve?s.resolve(e,t):tr(r,()=>s(e,t));return xi(o)}function Mf(n){return sn(e=>{let t=n(e);return t?Dt(t).pipe(ge(()=>e)):Z(e)})}var Hb=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===re);return r}getResolvedTitleForRoute(i){return i.data[ra]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:()=>oe(eP),providedIn:"root"});let n=e;return n})(),eP=(()=>{let e=class e extends Hb{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(Re(mb))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),fp=new et("",{providedIn:"root",factory:()=>({})}),pp=new et(""),tP=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=oe(mf)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return Z(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=xi(i.loadComponent()).pipe(ge(Gb),lt(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Po(()=>{this.componentLoaders.delete(i)})),s=new Jd(r,()=>new Zi).pipe(Xd());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Z({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=nP(r,this.compiler,i,this.onLoadEndListener).pipe(Po(()=>{this.childrenLoaders.delete(r)})),a=new Jd(o,()=>new Zi).pipe(Xd());return this.childrenLoaders.set(r,a),a}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function nP(n,e,t,i){return xi(n.loadChildren()).pipe(ge(Gb),Yt(r=>r instanceof Uw||Array.isArray(r)?Z(r):Dt(e.compileModuleAsync(r))),ge(r=>{i&&i(n);let s,o,a=!1;return Array.isArray(r)?(o=r,a=!0):(s=r.create(t).injector,o=s.get(pp,[],{optional:!0,self:!0}).flat()),{routes:o.map(hp),injector:s}}))}function iP(n){return n&&typeof n=="object"&&"default"in n}function Gb(n){return iP(n)?n.default:n}var mp=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:()=>oe(rP),providedIn:"root"});let n=e;return n})(),rP=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),sP=new et("");var oP=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Zi,this.transitionAbortSubject=new Zi,this.configLoader=oe(tP),this.environmentInjector=oe(Mo),this.urlSerializer=oe(ap),this.rootContexts=oe(ul),this.location=oe(Wc),this.inputBindingEnabled=oe(up,{optional:!0})!==null,this.titleStrategy=oe(Hb),this.options=oe(fp,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=oe(mp),this.createViewTransition=oe(sP,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>Z(void 0),this.rootComponentType=null;let i=s=>this.events.next(new Wf(s)),r=s=>this.events.next(new $f(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(xe(H(H({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new Kt({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Ko,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(vi(o=>o.id!==0),ge(o=>xe(H({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),sn(o=>{let a=!1,c=!1;return Z(o).pipe(sn(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",Wt.SupersededByNewNavigation),_i;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?xe(H({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let h=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),d=l.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!h&&d!=="reload"){let p="";return this.events.next(new or(l.id,this.urlSerializer.serialize(l.rawUrl),p,Uf.IgnoredSameUrlNavigation)),l.resolve(null),_i}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return Z(l).pipe(sn(p=>{let g=this.transitions?.getValue();return this.events.next(new Xo(p.id,this.urlSerializer.serialize(p.extractedUrl),p.source,p.restoredState)),g!==this.transitions?.getValue()?_i:Promise.resolve(p)}),YR(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),lt(p=>{o.targetSnapshot=p.targetSnapshot,o.urlAfterRedirects=p.urlAfterRedirects,this.currentNavigation=xe(H({},this.currentNavigation),{finalUrl:p.urlAfterRedirects});let g=new rl(p.id,this.urlSerializer.serialize(p.extractedUrl),this.urlSerializer.serialize(p.urlAfterRedirects),p.targetSnapshot);this.events.next(g)}));if(h&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:p,extractedUrl:g,source:b,restoredState:_,extras:w}=l,D=new Xo(p,this.urlSerializer.serialize(g),b,_);this.events.next(D);let R=Nb(this.rootComponentType).snapshot;return this.currentTransition=o=xe(H({},l),{targetSnapshot:R,urlAfterRedirects:g,extras:xe(H({},w),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=g,Z(o)}else{let p="";return this.events.next(new or(l.id,this.urlSerializer.serialize(l.extractedUrl),p,Uf.IgnoredByUrlHandlingStrategy)),l.resolve(null),_i}}),lt(l=>{let h=new Bf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),ge(l=>(this.currentTransition=o=xe(H({},l),{guards:fR(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),ER(this.environmentInjector,l=>this.events.next(l)),lt(l=>{if(o.guardsResult=l.guardsResult,ss(l.guardsResult))throw Ub(this.urlSerializer,l.guardsResult);let h=new jf(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),vi(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",Wt.GuardRejected),!1)),Mf(l=>{if(l.guards.canActivateChecks.length)return Z(l).pipe(lt(h=>{let d=new zf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(d)}),sn(h=>{let d=!1;return Z(h).pipe(QR(this.paramsInheritanceStrategy,this.environmentInjector),lt({next:()=>d=!0,complete:()=>{d||this.cancelNavigationTransition(h,"",Wt.NoDataFromResolver)}}))}),lt(h=>{let d=new qf(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(d)}))}),Mf(l=>{let h=d=>{let p=[];d.routeConfig?.loadComponent&&!d.routeConfig._loadedComponent&&p.push(this.configLoader.loadComponent(d.routeConfig).pipe(lt(g=>{d.component=g}),ge(()=>{})));for(let g of d.children)p.push(...h(g));return p};return Zd(h(l.targetSnapshot.root)).pipe(tf(null),Wr(1))}),Mf(()=>this.afterPreactivation()),sn(()=>{let{currentSnapshot:l,targetSnapshot:h}=o,d=this.createViewTransition?.(this.environmentInjector,l.root,h.root);return d?Dt(d).pipe(ge(()=>o)):Z(o)}),ge(l=>{let h=sR(i.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=xe(H({},l),{targetRouterState:h}),this.currentNavigation.targetRouterState=h,o}),lt(()=>{this.events.next(new Zo)}),dR(this.rootContexts,i.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),Wr(1),lt({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new sr(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Tw(this.transitionAbortSubject.pipe(lt(l=>{throw l}))),Po(()=>{!a&&!c&&this.cancelNavigationTransition(o,"",Wt.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),qr(l=>{if(c=!0,jb(l))this.events.next(new Si(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),cR(l)?this.events.next(new ea(l.url)):o.resolve(!1);else{this.events.next(new Jo(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(l))}catch(h){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(h)}}return _i}))}))}cancelNavigationTransition(i,r,s){let o=new Si(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function aP(n){return n!==Ko}var cP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:()=>oe(lP),providedIn:"root"});let n=e;return n})(),op=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},lP=(()=>{let e=class e extends op{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Kb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:()=>oe(uP),providedIn:"root"});let n=e;return n})(),uP=(()=>{let e=class e extends Kb{constructor(){super(...arguments),this.location=oe(Wc),this.urlSerializer=oe(ap),this.options=oe(fp,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=oe(mp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Ti,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Nb(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof Xo)this.stateMemento=this.createStateMemento();else if(i instanceof or)this.rawUrlTree=r.initialUrl;else if(i instanceof rl){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof Zo?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Si&&(i.code===Wt.GuardRejected||i.code===Wt.NoDataFromResolver)?this.restoreHistory(r):i instanceof Jo?this.restoreHistory(r,!0):i instanceof sr&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,a=H(H({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",a)}else{let o=H(H({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ho=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ho||{});function hP(n,e){n.events.pipe(vi(t=>t instanceof sr||t instanceof Si||t instanceof Jo||t instanceof or),ge(t=>t instanceof sr||t instanceof or?Ho.COMPLETE:(t instanceof Si?t.code===Wt.Redirect||t.code===Wt.SupersededByNewNavigation:!1)?Ho.REDIRECTING:Ho.FAILED),vi(t=>t!==Ho.REDIRECTING),Wr(1)).subscribe(()=>{e()})}function dP(n){throw n}var fP={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},pP={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Yb=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=oe(jc),this.stateManager=oe(Kb),this.options=oe(fp,{optional:!0})||{},this.pendingTasks=oe(jw),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=oe(oP),this.urlSerializer=oe(ap),this.location=oe(Wc),this.urlHandlingStrategy=oe(mp),this._events=new Zi,this.errorHandler=this.options.errorHandler||dP,this.navigated=!1,this.routeReuseStrategy=oe(cP),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=oe(pp,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!oe(up,{optional:!0}),this.eventsSubscription=new pw,this.isNgZoneEnabled=oe(Gn)instanceof Gn&&Gn.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Si&&r.code!==Wt.Redirect&&r.code!==Wt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof sr)this.navigated=!0;else if(r instanceof ea){let a=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),c={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||aP(s.source)};this.scheduleNavigation(a,Ko,null,c,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}gP(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ko,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},a=s?.navigationId?s:null;if(s){let l=H({},s);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let c=this.parseUrl(i);this.scheduleNavigation(c,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(hp),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:a,queryParamsHandling:c,preserveFragment:l}=r,h=l?this.currentUrlTree.fragment:a,d=null;switch(c){case"merge":d=H(H({},this.currentUrlTree.queryParams),o);break;case"preserve":d=this.currentUrlTree.queryParams;break;default:d=o||null}d!==null&&(d=this.removeEmptyProps(d));let p;try{let g=s?s.snapshot:this.routerState.snapshot.root;p=Pb(g)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),p=this.currentUrlTree.root}return kb(p,i,d,h??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=ss(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,Ko,null,r)}navigate(i,r={skipLocationChange:!1}){return mP(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=H({},fP):r===!1?s=H({},pP):s=r,ss(i))return gb(this.currentUrlTree,i,s);let o=this.parseUrl(i);return gb(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,a){if(this.disposed)return Promise.resolve(!1);let c,l,h;a?(c=a.resolve,l=a.reject,h=a.promise):h=new Promise((p,g)=>{c=p,l=g});let d=this.pendingTasks.add();return hP(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(d))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:c,reject:l,promise:h,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),h.catch(p=>Promise.reject(p))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function mP(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ne(4008,!1)}function gP(n){return!(n instanceof Zo)&&!(n instanceof ea)}var yP=new et("");function Xq(n,...e){return sf([{provide:pp,multi:!0,useValue:n},[],{provide:os,useFactory:_P,deps:[Yb]},{provide:Gw,multi:!0,useFactory:vP},e.map(t=>t.\u0275providers)])}function _P(n){return n.routerState.root}function vP(){let n=oe(cf);return e=>{let t=n.get(pf);if(e!==t.components[0])return;let i=n.get(Yb),r=n.get(wP);n.get(bP)===1&&i.initialNavigation(),n.get(IP,null,rf.Optional)?.setUpPreloading(),n.get(yP,null,rf.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var wP=new et("",{factory:()=>new Zi}),bP=new et("",{providedIn:"root",factory:()=>1});var IP=new et("");var s0=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(Ie(Xr),Ie(Kr))},e.\u0275dir=tt({type:e});let n=e;return n})(),_l=(()=>{let e=class e extends s0{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275dir=tt({type:e,features:[on]});let n=e;return n})(),ha=new et("");var EP={provide:ha,useExisting:bi(()=>hs),multi:!0};function TP(){let n=Jr()?Jr().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var SP=new et(""),hs=(()=>{let e=class e extends s0{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!TP())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(Ie(Xr),Ie(Kr),Ie(SP,8))},e.\u0275dir=tt({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&it("input",function(a){return s._handleInput(a.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(a){return s._compositionEnd(a.target.value)})},features:[Ii([EP]),on]});let n=e;return n})();function xP(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var yp=new et(""),o0=new et("");function AP(n){return xP(n.value)?{required:!0}:null}function Qb(n){return null}function a0(n){return n!=null}function c0(n){return zc(n)?Dt(n):n}function l0(n){let e={};return n.forEach(t=>{e=t!=null?H(H({},e),t):e}),Object.keys(e).length===0?null:e}function u0(n,e){return e.map(t=>t(n))}function CP(n){return!n.validate}function h0(n){return n.map(e=>CP(e)?e:t=>e.validate(t))}function DP(n){if(!n)return null;let e=n.filter(a0);return e.length==0?null:function(t){return l0(u0(t,e))}}function _p(n){return n!=null?DP(h0(n)):null}function RP(n){if(!n)return null;let e=n.filter(a0);return e.length==0?null:function(t){let i=u0(t,e).map(c0);return vw(i).pipe(ge(l0))}}function vp(n){return n!=null?RP(h0(n)):null}function Xb(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function PP(n){return n._rawValidators}function kP(n){return n._rawAsyncValidators}function gp(n){return n?Array.isArray(n)?n:[n]:[]}function fl(n,e){return Array.isArray(n)?n.includes(e):n===e}function Jb(n,e){let t=gp(e);return gp(n).forEach(r=>{fl(t,r)||t.push(r)}),t}function Zb(n,e){return gp(e).filter(t=>!fl(n,t))}var pl=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=_p(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=vp(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},us=class extends pl{get formDirective(){return null}get path(){return null}},ua=class extends pl{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ml=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},MP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},m4=xe(H({},MP),{"[class.ng-submitted]":"isSubmitted"}),vl=(()=>{let e=class e extends ml{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Ie(ua,2))},e.\u0275dir=tt({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&ff("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[on]});let n=e;return n})(),wl=(()=>{let e=class e extends ml{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(Ie(us,10))},e.\u0275dir=tt({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&ff("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[on]});let n=e;return n})();var aa="VALID",dl="INVALID",ls="PENDING",ca="DISABLED";function d0(n){return(bl(n)?n.validators:n)||null}function OP(n){return Array.isArray(n)?_p(n):n||null}function f0(n,e){return(bl(e)?e.asyncValidators:n)||null}function NP(n){return Array.isArray(n)?vp(n):n||null}function bl(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function VP(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new Ne(1e3,"");if(!i[t])throw new Ne(1001,"")}function LP(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new Ne(1002,"")})}var gl=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===aa}get invalid(){return this.status===dl}get pending(){return this.status==ls}get disabled(){return this.status===ca}get enabled(){return this.status!==ca}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(Jb(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Jb(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Zb(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Zb(e,this._rawAsyncValidators))}hasValidator(e){return fl(this._rawValidators,e)}hasAsyncValidator(e){return fl(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ls,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ca,this.errors=null,this._forEachChild(i=>{i.disable(xe(H({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(xe(H({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=aa,this._forEachChild(i=>{i.enable(xe(H({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(xe(H({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===aa||this.status===ls)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ca:aa}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ls,this._hasOwnPendingAsyncValidator=!0;let t=c0(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new _n,this.statusChanges=new _n}_calculateStatus(){return this._allControlsDisabled()?ca:this.errors?dl:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ls)?ls:this._anyControlsHaveStatus(dl)?dl:aa}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){bl(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=OP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=NP(this._rawAsyncValidators)}},yl=class extends gl{constructor(e,t,i){super(d0(t),f0(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){LP(this,!0,e),Object.keys(e).forEach(i=>{VP(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var wp=new et("CallSetDisabledState",{providedIn:"root",factory:()=>bp}),bp="always";function FP(n,e){return[...e.path,n]}function p0(n,e,t=bp){m0(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),BP(n,e),zP(n,e),jP(n,e),UP(n,e)}function e0(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function UP(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function m0(n,e){let t=PP(n);e.validator!==null?n.setValidators(Xb(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=kP(n);e.asyncValidator!==null?n.setAsyncValidators(Xb(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();e0(e._rawValidators,r),e0(e._rawAsyncValidators,r)}function BP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&g0(n,e)})}function jP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&g0(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function g0(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function zP(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function qP(n,e){n==null,m0(n,e)}function WP(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function $P(n){return Object.getPrototypeOf(n.constructor)===_l}function HP(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function GP(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===hs?t=s:$P(s)?i=s:r=s}),r||i||t||null}var KP={provide:us,useExisting:bi(()=>da)},la=Promise.resolve(),da=(()=>{let e=class e extends us{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new _n,this.form=new yl({},_p(i),vp(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){la.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),p0(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){la.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){la.then(()=>{let r=this._findContainer(i.path),s=new yl({});qP(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){la.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){la.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,HP(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(Ie(yp,10),Ie(o0,10),Ie(wp,8))},e.\u0275dir=tt({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&it("submit",function(a){return s.onSubmit(a)})("reset",function(){return s.onReset()})},inputs:{options:[Hr.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Ii([KP]),on]});let n=e;return n})();function t0(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function n0(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var YP=class extends gl{constructor(e=null,t,i){super(d0(t),f0(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),bl(t)&&(t.nonNullable||t.initialValueIsDefault)&&(n0(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){t0(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){t0(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){n0(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var QP={provide:ua,useExisting:bi(()=>fa)},i0=Promise.resolve(),fa=(()=>{let e=class e extends ua{constructor(i,r,s,o,a,c){super(),this._changeDetectorRef=a,this.callSetDisabledState=c,this.control=new YP,this._registered=!1,this.name="",this.update=new _n,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=GP(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),WP(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){p0(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){i0.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&qc(r);i0.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?FP(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(Ie(us,9),Ie(yp,10),Ie(o0,10),Ie(ha,10),Ie(Fo,8),Ie(wp,8))},e.\u0275dir=tt({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[Hr.None,"disabled","isDisabled"],model:[Hr.None,"ngModel","model"],options:[Hr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Ii([QP]),on,Oo]});let n=e;return n})(),Il=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=tt({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),XP={provide:ha,useExisting:bi(()=>Ip),multi:!0},Ip=(()=>{let e=class e extends _l{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275dir=tt({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&it("input",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},features:[Ii([XP]),on]});let n=e;return n})();var JP={provide:ha,useExisting:bi(()=>El),multi:!0};function y0(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function ZP(n){return n.split(":")[0]}var El=(()=>{let e=class e extends _l{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=y0(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=ZP(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275dir=tt({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&it("change",function(a){return s.onChange(a.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ii([JP]),on]});let n=e;return n})(),_0=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(y0(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Ie(Kr),Ie(Xr),Ie(El,9))},e.\u0275dir=tt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),ek={provide:ha,useExisting:bi(()=>v0),multi:!0};function r0(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function tk(n){return n.split(":")[0]}var v0=(()=>{let e=class e extends _l{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,a)=>{o._setSelected(s.indexOf(a.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let a=o;for(let c=0;c<a.length;c++){let l=a[c],h=this._getOptionValue(l.value);s.push(h)}}else{let a=r.options;for(let c=0;c<a.length;c++){let l=a[c];if(l.selected){let h=this._getOptionValue(l.value);s.push(h)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=tk(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275dir=tt({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&it("change",function(a){return s.onChange(a.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Ii([ek]),on]});let n=e;return n})(),w0=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(r0(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(r0(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(Ie(Kr),Ie(Xr),Ie(v0,9))},e.\u0275dir=tt({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var nk=(()=>{let e=class e{constructor(){this._validator=Qb}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Qb,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=tt({type:e,features:[Oo]});let n=e;return n})();var ik={provide:yp,useExisting:bi(()=>Ep),multi:!0};var Ep=(()=>{let e=class e extends nk{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=qc,this.createValidator=i=>AP}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=Hn(e)))(s||e)}})(),e.\u0275dir=tt({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&df("required",s._enabled?"":null)},inputs:{required:"required"},features:[Ii([ik]),on]});let n=e;return n})();var rk=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Gr({type:e}),e.\u0275inj=$r({});let n=e;return n})();var Tl=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:wp,useValue:i.callSetDisabledState??bp}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Gr({type:e}),e.\u0275inj=$r({imports:[rk]});let n=e;return n})();var E0=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},sk=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],a=n[t++],c=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(c>>10)),e[i++]=String.fromCharCode(56320+(c&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},T0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,a=o?n[r+1]:0,c=r+2<n.length,l=c?n[r+2]:0,h=s>>2,d=(s&3)<<4|a>>4,p=(a&15)<<2|l>>6,g=l&63;c||(g=64,o||(p=64)),i.push(t[h],t[d],t[p],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(E0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):sk(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;let l=r<n.length?t[n.charAt(r)]:64;++r;let d=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||l==null||d==null)throw new Sp;let p=s<<2|a>>4;if(i.push(p),l!==64){let g=a<<4&240|l>>2;if(i.push(g),d!==64){let b=l<<6&192|d;i.push(b)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Sp=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ok=function(n){let e=E0(n);return T0.encodeByteArray(e,!0)},pa=function(n){return ok(n).replace(/\./g,"")},Ap=function(n){try{return T0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function ak(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var ck=()=>ak().__FIREBASE_DEFAULTS__,lk=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},uk=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Ap(n[1]);return e&&JSON.parse(e)},xl=()=>{try{return ck()||lk()||uk()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Cp=n=>{var e,t;return(t=(e=xl())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},S0=n=>{let e=Cp(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Dp=()=>{var n;return(n=xl())===null||n===void 0?void 0:n.config},Rp=n=>{var e;return(e=xl())===null||e===void 0?void 0:e[`_${n}`]};var Sl=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function x0(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[pa(JSON.stringify(t)),pa(JSON.stringify(o)),""].join(".")}function Je(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function A0(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Je())}function hk(){var n;let e=(n=xl())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Al(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function C0(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function D0(){let n=Je();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function R0(){return!hk()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ma(){try{return typeof indexedDB=="object"}catch{return!1}}function Cl(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function P0(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var dk="FirebaseError",ht=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=dk,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,$t.prototype.create)}},$t=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?fk(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new ht(r,a,i)}};function fk(n,e){return n.replace(pk,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var pk=/\{\$([^}]+)}/g;function k0(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Yn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(I0(s)&&I0(o)){if(!Yn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function I0(n){return n!==null&&typeof n=="object"}function ds(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function M0(n,e){let t=new xp(n,e);return t.subscribe.bind(t)}var xp=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");mk(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=Tp),r.error===void 0&&(r.error=Tp),r.complete===void 0&&(r.complete=Tp);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function mk(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Tp(){}var gk=1e3,yk=2,_k=4*60*60*1e3,vk=.5;function Pp(n,e=gk,t=yk){let i=e*Math.pow(t,n),r=Math.round(vk*i*(Math.random()-.5)*2);return Math.min(_k,i+r)}function rt(n){return n&&n._delegate?n._delegate:n}var st=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var ar="[DEFAULT]";var kp=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new Sl;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bk(e))try{this.getOrInitializeService({instanceIdentifier:ar})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=ar){return this.instances.has(e)}getOptions(e=ar){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:wk(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ar){return this.component?this.component.multipleInstances?e:ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function wk(n){return n===ar?void 0:n}function bk(n){return n.instantiationMode==="EAGER"}var Dl=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new kp(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var Ik=[],ce=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(ce||{}),Ek={debug:ce.DEBUG,verbose:ce.VERBOSE,info:ce.INFO,warn:ce.WARN,error:ce.ERROR,silent:ce.SILENT},Tk=ce.INFO,Sk={[ce.DEBUG]:"log",[ce.VERBOSE]:"log",[ce.INFO]:"info",[ce.WARN]:"warn",[ce.ERROR]:"error"},xk=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=Sk[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},In=class{constructor(e){this.name=e,this._logLevel=Tk,this._logHandler=xk,this._userLogHandler=null,Ik.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ce))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ek[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ce.DEBUG,...e),this._logHandler(this,ce.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ce.VERBOSE,...e),this._logHandler(this,ce.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ce.INFO,...e),this._logHandler(this,ce.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ce.WARN,...e),this._logHandler(this,ce.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ce.ERROR,...e),this._logHandler(this,ce.ERROR,...e)}};var Ak=(n,e)=>e.some(t=>n instanceof t),O0,N0;function Ck(){return O0||(O0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dk(){return N0||(N0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var V0=new WeakMap,Op=new WeakMap,L0=new WeakMap,Mp=new WeakMap,Vp=new WeakMap;function Rk(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(En(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&V0.set(t,n)}).catch(()=>{}),Vp.set(e,n),e}function Pk(n){if(Op.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});Op.set(n,e)}var Np={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Op.get(n);if(e==="objectStoreNames")return n.objectStoreNames||L0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return En(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function F0(n){Np=n(Np)}function kk(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(Rl(this),e,...t);return L0.set(i,e.sort?e.sort():[e]),En(i)}:Dk().includes(n)?function(...e){return n.apply(Rl(this),e),En(V0.get(this))}:function(...e){return En(n.apply(Rl(this),e))}}function Mk(n){return typeof n=="function"?kk(n):(n instanceof IDBTransaction&&Pk(n),Ak(n,Ck())?new Proxy(n,Np):n)}function En(n){if(n instanceof IDBRequest)return Rk(n);if(Mp.has(n))return Mp.get(n);let e=Mk(n);return e!==n&&(Mp.set(n,e),Vp.set(e,n)),e}var Rl=n=>Vp.get(n);function Pl(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),a=En(o);return i&&o.addEventListener("upgradeneeded",c=>{i(En(o.result),c.oldVersion,c.newVersion,En(o.transaction),c)}),t&&o.addEventListener("blocked",c=>t(c.oldVersion,c.newVersion,c)),a.then(c=>{s&&c.addEventListener("close",()=>s()),r&&c.addEventListener("versionchange",l=>r(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}var Ok=["get","getKey","getAll","getAllKeys","count"],Nk=["put","add","delete","clear"],Lp=new Map;function U0(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Lp.get(e))return Lp.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=Nk.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Ok.includes(t)))return;let s=function(o,...a){return S(this,null,function*(){let c=this.transaction(o,r?"readwrite":"readonly"),l=c.store;return i&&(l=l.index(a.shift())),(yield Promise.all([l[t](...a),r&&c.done]))[0]})};return Lp.set(e,s),s}F0(n=>xe(H({},n),{get:(e,t,i)=>U0(e,t)||n.get(e,t,i),has:(e,t)=>!!U0(e,t)||n.has(e,t)}));var Up=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Vk(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function Vk(n){let e=n.getComponent();return e?.type==="VERSION"}var Bp="@firebase/app",B0="0.10.8";var cr=new In("@firebase/app"),Lk="@firebase/app-compat",Fk="@firebase/analytics-compat",Uk="@firebase/analytics",Bk="@firebase/app-check-compat",jk="@firebase/app-check",zk="@firebase/auth",qk="@firebase/auth-compat",Wk="@firebase/database",$k="@firebase/database-compat",Hk="@firebase/functions",Gk="@firebase/functions-compat",Kk="@firebase/installations",Yk="@firebase/installations-compat",Qk="@firebase/messaging",Xk="@firebase/messaging-compat",Jk="@firebase/performance",Zk="@firebase/performance-compat",eM="@firebase/remote-config",tM="@firebase/remote-config-compat",nM="@firebase/storage",iM="@firebase/storage-compat",rM="@firebase/firestore",sM="@firebase/vertexai-preview",oM="@firebase/firestore-compat",aM="firebase",cM="10.12.5";var jp="[DEFAULT]",lM={[Bp]:"fire-core",[Lk]:"fire-core-compat",[Uk]:"fire-analytics",[Fk]:"fire-analytics-compat",[jk]:"fire-app-check",[Bk]:"fire-app-check-compat",[zk]:"fire-auth",[qk]:"fire-auth-compat",[Wk]:"fire-rtdb",[$k]:"fire-rtdb-compat",[Hk]:"fire-fn",[Gk]:"fire-fn-compat",[Kk]:"fire-iid",[Yk]:"fire-iid-compat",[Qk]:"fire-fcm",[Xk]:"fire-fcm-compat",[Jk]:"fire-perf",[Zk]:"fire-perf-compat",[eM]:"fire-rc",[tM]:"fire-rc-compat",[nM]:"fire-gcs",[iM]:"fire-gcs-compat",[rM]:"fire-fst",[oM]:"fire-fst-compat",[sM]:"fire-vertex","fire-js":"fire-js",[aM]:"fire-js-all"};var kl=new Map,uM=new Map,zp=new Map;function j0(n,e){try{n.container.addComponent(e)}catch(t){cr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Mt(n){let e=n.name;if(zp.has(e))return cr.debug(`There were multiple attempts to register component ${e}.`),!1;zp.set(e,n);for(let t of kl.values())j0(t,n);for(let t of uM.values())j0(t,n);return!0}function ln(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function Tn(n){return n.settings!==void 0}var hM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Ai=new $t("app","Firebase",hM);var qp=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new st("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Ai.create("app-deleted",{appName:this._name})}};var Ci=cM;function Hp(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:jp,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Ai.create("bad-app-name",{appName:String(r)});if(t||(t=Dp()),!t)throw Ai.create("no-options");let s=kl.get(r);if(s){if(Yn(t,s.options)&&Yn(i,s.config))return s;throw Ai.create("duplicate-app",{appName:r})}let o=new Dl(r);for(let c of zp.values())o.addComponent(c);let a=new qp(t,i,o);return kl.set(r,a),a}function lr(n=jp){let e=kl.get(n);if(!e&&n===jp&&Dp())return Hp();if(!e)throw Ai.create("no-app",{appName:n});return e}function dt(n,e,t){var i;let r=(i=lM[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),cr.warn(a.join(" "));return}Mt(new st(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var dM="firebase-heartbeat-database",fM=1,ga="firebase-heartbeat-store",Fp=null;function $0(){return Fp||(Fp=Pl(dM,fM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(ga)}catch(t){console.warn(t)}}}}).catch(n=>{throw Ai.create("idb-open",{originalErrorMessage:n.message})})),Fp}function pM(n){return S(this,null,function*(){try{let t=(yield $0()).transaction(ga),i=yield t.objectStore(ga).get(H0(n));return yield t.done,i}catch(e){if(e instanceof ht)cr.warn(e.message);else{let t=Ai.create("idb-get",{originalErrorMessage:e?.message});cr.warn(t.message)}}})}function z0(n,e){return S(this,null,function*(){try{let i=(yield $0()).transaction(ga,"readwrite");yield i.objectStore(ga).put(e,H0(n)),yield i.done}catch(t){if(t instanceof ht)cr.warn(t.message);else{let i=Ai.create("idb-set",{originalErrorMessage:t?.message});cr.warn(i.message)}}})}function H0(n){return`${n.name}!${n.options.appId}`}var mM=1024,gM=30*24*60*60*1e3,Wp=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new $p(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return S(this,null,function*(){var e,t;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=q0();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let a=new Date(o.date).valueOf();return Date.now()-a<=gM}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return S(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=q0(),{heartbeatsToSend:i,unsentEntries:r}=yM(this._heartbeatsCache.heartbeats),s=pa(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function q0(){return new Date().toISOString().substring(0,10)}function yM(n,e=mM){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),W0(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),W0(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var $p=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return ma()?Cl().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield pM(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return z0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return z0(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function W0(n){return pa(JSON.stringify({version:2,heartbeats:n})).length}function _M(n){Mt(new st("platform-logger",e=>new Up(e),"PRIVATE")),Mt(new st("heartbeat",e=>new Wp(e),"PRIVATE")),dt(Bp,B0,n),dt(Bp,B0,"esm2017"),dt("fire-js","")}_M("");var vM="firebase",wM="10.12.5";dt(vM,wM,"app");var Y0="@firebase/installations",Qp="0.6.8";var Q0=1e4,X0=`w:${Qp}`,J0="FIS_v2",bM="https://firebaseinstallations.googleapis.com/v1",IM=60*60*1e3,EM="installations",TM="Installations";var SM={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},hr=new $t(EM,TM,SM);function Z0(n){return n instanceof ht&&n.code.includes("request-failed")}function eI({projectId:n}){return`${bM}/projects/${n}/installations`}function tI(n){return{token:n.token,requestStatus:2,expiresIn:AM(n.expiresIn),creationTime:Date.now()}}function nI(n,e){return S(this,null,function*(){let i=(yield e.json()).error;return hr.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function iI({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function xM(n,{refreshToken:e}){let t=iI(n);return t.append("Authorization",CM(e)),t}function rI(n){return S(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function AM(n){return Number(n.replace("s","000"))}function CM(n){return`${J0} ${n}`}function DM(i,r){return S(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let s=eI(n),o=iI(n),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={fid:t,authVersion:J0,appId:n.appId,sdkVersion:X0},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield rI(()=>fetch(s,l));if(h.ok){let d=yield h.json();return{fid:d.fid||t,registrationStatus:2,refreshToken:d.refreshToken,authToken:tI(d.authToken)}}else throw yield nI("Create Installation",h)})}function sI(n){return new Promise(e=>{setTimeout(e,n)})}function RM(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var PM=/^[cdef][\w-]{21}$/,Yp="";function kM(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=MM(n);return PM.test(t)?t:Yp}catch{return Yp}}function MM(n){return RM(n).substr(0,22)}function Ol(n){return`${n.appName}!${n.appId}`}var oI=new Map;function aI(n,e){let t=Ol(n);cI(t,e),OM(t,e)}function cI(n,e){let t=oI.get(n);if(t)for(let i of t)i(e)}function OM(n,e){let t=NM();t&&t.postMessage({key:n,fid:e}),VM()}var ur=null;function NM(){return!ur&&"BroadcastChannel"in self&&(ur=new BroadcastChannel("[Firebase] FID Change"),ur.onmessage=n=>{cI(n.data.key,n.data.fid)}),ur}function VM(){oI.size===0&&ur&&(ur.close(),ur=null)}var LM="firebase-installations-database",FM=1,dr="firebase-installations-store",Gp=null;function Xp(){return Gp||(Gp=Pl(LM,FM,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(dr)}}})),Gp}function Ml(n,e){return S(this,null,function*(){let t=Ol(n),r=(yield Xp()).transaction(dr,"readwrite"),s=r.objectStore(dr),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&aI(n,e.fid),e})}function lI(n){return S(this,null,function*(){let e=Ol(n),i=(yield Xp()).transaction(dr,"readwrite");yield i.objectStore(dr).delete(e),yield i.done})}function Nl(n,e){return S(this,null,function*(){let t=Ol(n),r=(yield Xp()).transaction(dr,"readwrite"),s=r.objectStore(dr),o=yield s.get(t),a=e(o);return a===void 0?yield s.delete(t):yield s.put(a,t),yield r.done,a&&(!o||o.fid!==a.fid)&&aI(n,a.fid),a})}function Jp(n){return S(this,null,function*(){let e,t=yield Nl(n.appConfig,i=>{let r=UM(i),s=BM(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===Yp?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function UM(n){let e=n||{fid:kM(),registrationStatus:0};return uI(e)}function BM(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(hr.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=jM(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:zM(n)}:{installationEntry:e}}function jM(n,e){return S(this,null,function*(){try{let t=yield DM(n,e);return Ml(n.appConfig,t)}catch(t){throw Z0(t)&&t.customData.serverCode===409?yield lI(n.appConfig):yield Ml(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function zM(n){return S(this,null,function*(){let e=yield G0(n.appConfig);for(;e.registrationStatus===1;)yield sI(100),e=yield G0(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:i}=yield Jp(n);return i||t}return e})}function G0(n){return Nl(n,e=>{if(!e)throw hr.create("installation-not-found");return uI(e)})}function uI(n){return qM(n)?{fid:n.fid,registrationStatus:0}:n}function qM(n){return n.registrationStatus===1&&n.registrationTime+Q0<Date.now()}function WM(i,r){return S(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let s=$M(n,t),o=xM(n,t),a=e.getImmediate({optional:!0});if(a){let d=yield a.getHeartbeatsHeader();d&&o.append("x-firebase-client",d)}let c={installation:{sdkVersion:X0,appId:n.appId}},l={method:"POST",headers:o,body:JSON.stringify(c)},h=yield rI(()=>fetch(s,l));if(h.ok){let d=yield h.json();return tI(d)}else throw yield nI("Generate Auth Token",h)})}function $M(n,{fid:e}){return`${eI(n)}/${e}/authTokens:generate`}function Zp(n,e=!1){return S(this,null,function*(){let t,i=yield Nl(n.appConfig,s=>{if(!hI(s))throw hr.create("not-registered");let o=s.authToken;if(!e&&KM(o))return s;if(o.requestStatus===1)return t=HM(n,e),s;{if(!navigator.onLine)throw hr.create("app-offline");let a=QM(s);return t=GM(n,a),a}});return t?yield t:i.authToken})}function HM(n,e){return S(this,null,function*(){let t=yield K0(n.appConfig);for(;t.authToken.requestStatus===1;)yield sI(100),t=yield K0(n.appConfig);let i=t.authToken;return i.requestStatus===0?Zp(n,e):i})}function K0(n){return Nl(n,e=>{if(!hI(e))throw hr.create("not-registered");let t=e.authToken;return XM(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function GM(n,e){return S(this,null,function*(){try{let t=yield WM(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield Ml(n.appConfig,i),t}catch(t){if(Z0(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield lI(n.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield Ml(n.appConfig,i)}throw t}})}function hI(n){return n!==void 0&&n.registrationStatus===2}function KM(n){return n.requestStatus===2&&!YM(n)}function YM(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+IM}function QM(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function XM(n){return n.requestStatus===1&&n.requestTime+Q0<Date.now()}function JM(n){return S(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:i}=yield Jp(e);return i?i.catch(console.error):Zp(e).catch(console.error),t.fid})}function ZM(n,e=!1){return S(this,null,function*(){let t=n;return yield eO(t),(yield Zp(t,e)).token})}function eO(n){return S(this,null,function*(){let{registrationPromise:e}=yield Jp(n);e&&(yield e)})}function tO(n){if(!n||!n.options)throw Kp("App Configuration");if(!n.name)throw Kp("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw Kp(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function Kp(n){return hr.create("missing-app-config-values",{valueName:n})}var dI="installations",nO="installations-internal",iO=n=>{let e=n.getProvider("app").getImmediate(),t=tO(e),i=ln(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},rO=n=>{let e=n.getProvider("app").getImmediate(),t=ln(e,dI).getImmediate();return{getId:()=>JM(t),getToken:r=>ZM(t,r)}};function sO(){Mt(new st(dI,iO,"PUBLIC")),Mt(new st(nO,rO,"PRIVATE"))}sO();dt(Y0,Qp);dt(Y0,Qp,"esm2017");var Vl="analytics",oO="firebase_id",aO="origin",cO=60*1e3,lO="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",om="https://www.googletagmanager.com/gtag/js";var Ot=new In("@firebase/analytics");var uO={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ht=new $t("analytics","Analytics",uO);function hO(n){if(!n.startsWith(om)){let e=Ht.create("invalid-gtag-resource",{gtagURL:n});return Ot.warn(e.message),""}return n}function vI(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function dO(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function fO(n,e){let t=dO("firebase-js-sdk-policy",{createScriptURL:hO}),i=document.createElement("script"),r=`${om}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function pO(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function mO(n,e,t,i,r,s){return S(this,null,function*(){let o=i[r];try{if(o)yield e[o];else{let c=(yield vI(t)).find(l=>l.measurementId===r);c&&(yield e[c.appId])}}catch(a){Ot.error(a)}n("config",r,s)})}function gO(n,e,t,i,r){return S(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let a=yield vI(t);for(let c of o){let l=a.find(d=>d.measurementId===c),h=l&&e[l.appId];if(h)s.push(h);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){Ot.error(s)}})}function yO(n,e,t,i){function r(s,...o){return S(this,null,function*(){try{if(s==="event"){let[a,c]=o;yield gO(n,e,t,a,c)}else if(s==="config"){let[a,c]=o;yield mO(n,e,t,i,a,c)}else if(s==="consent"){let[a,c]=o;n("consent",a,c)}else if(s==="get"){let[a,c,l]=o;n("get",a,c,l)}else if(s==="set"){let[a]=o;n("set",a)}else n(s,...o)}catch(a){Ot.error(a)}})}return r}function _O(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=yO(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}function vO(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(om)&&t.src.includes(n))return t;return null}var wO=30,bO=1e3,tm=class{constructor(e={},t=bO){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},wI=new tm;function IO(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function EO(n){return S(this,null,function*(){var e;let{appId:t,apiKey:i}=n,r={method:"GET",headers:IO(i)},s=lO.replace("{app-id}",t),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let a="";try{let c=yield o.json();!((e=c.error)===null||e===void 0)&&e.message&&(a=c.error.message)}catch{}throw Ht.create("config-fetch-failed",{httpStatus:o.status,responseMessage:a})}return o.json()})}function TO(i){return S(this,arguments,function*(n,e=wI,t){let{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw Ht.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw Ht.create("no-api-key")}let a=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new nm;return setTimeout(()=>S(this,null,function*(){c.abort()}),t!==void 0?t:cO),bI({appId:r,apiKey:s,measurementId:o},a,c,e)})}function bI(s,o,a){return S(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=wI){var c;let{appId:l,measurementId:h}=n;try{yield SO(i,e)}catch(d){if(h)return Ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${d?.message}]`),{appId:l,measurementId:h};throw d}try{let d=yield EO(n);return r.deleteThrottleMetadata(l),d}catch(d){let p=d;if(!xO(p)){if(r.deleteThrottleMetadata(l),h)return Ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${h} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:l,measurementId:h};throw d}let g=Number((c=p?.customData)===null||c===void 0?void 0:c.httpStatus)===503?Pp(t,r.intervalMillis,wO):Pp(t,r.intervalMillis),b={throttleEndTimeMillis:Date.now()+g,backoffCount:t+1};return r.setThrottleMetadata(l,b),Ot.debug(`Calling attemptFetch again in ${g} millis`),bI(n,b,i,r)}})}function SO(n,e){return new Promise((t,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(Ht.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function xO(n){if(!(n instanceof ht)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var nm=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var im;function AO(n,e,t,i,r){return S(this,null,function*(){if(r&&r.global){n("event",t,i);return}else{let s=yield e,o=Object.assign(Object.assign({},i),{send_to:s});n("event",t,o)}})}var rm;function CO(n){rm=n}function DO(n){im=n}function RO(){return S(this,null,function*(){if(ma())try{yield Cl()}catch(n){return Ot.warn(Ht.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return Ot.warn(Ht.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function PO(n,e,t,i,r,s,o){return S(this,null,function*(){var a;let c=TO(n);c.then(g=>{t[g.measurementId]=g.appId,n.options.measurementId&&g.measurementId!==n.options.measurementId&&Ot.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>Ot.error(g)),e.push(c);let l=RO().then(g=>{if(g)return i.getId()}),[h,d]=yield Promise.all([c,l]);vO(s)||fO(s,h.measurementId),rm&&(r("consent","default",rm),CO(void 0)),r("js",new Date);let p=(a=o?.config)!==null&&a!==void 0?a:{};return p[aO]="firebase",p.update=!0,d!=null&&(p[oO]=d),r("config",h.measurementId,p),im&&(r("set",im),DO(void 0)),h.measurementId})}var sm=class{constructor(e){this.app=e}_delete(){return delete ya[this.app.options.appId],Promise.resolve()}},ya={},fI=[],pI={},em="dataLayer",kO="gtag",mI,II,gI=!1;function MO(){let n=[];if(Al()&&n.push("This is a browser extension environment."),P0()||n.push("Cookies are not available."),n.length>0){let e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=Ht.create("invalid-analytics-context",{errorInfo:e});Ot.warn(t.message)}}function OO(n,e,t){MO();let i=n.options.appId;if(!i)throw Ht.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)Ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ht.create("no-api-key");if(ya[i]!=null)throw Ht.create("already-exists",{id:i});if(!gI){pO(em);let{wrappedGtag:s,gtagCore:o}=_O(ya,fI,pI,em,kO);II=s,mI=o,gI=!0}return ya[i]=PO(n,fI,pI,e,mI,em,t),new sm(n)}function EI(n=lr()){n=rt(n);let e=ln(n,Vl);return e.isInitialized()?e.getImmediate():NO(n)}function NO(n,e={}){let t=ln(n,Vl);if(t.isInitialized()){let r=t.getImmediate();if(Yn(e,t.getOptions()))return r;throw Ht.create("already-initialized")}return t.initialize({options:e})}function VO(n,e,t,i){n=rt(n),AO(II,ya[n.app.options.appId],e,t,i).catch(r=>Ot.error(r))}var yI="@firebase/analytics",_I="0.10.7";function LO(){Mt(new st(Vl,(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return OO(i,r,t)},"PUBLIC")),Mt(new st("analytics-internal",n,"PRIVATE")),dt(yI,_I),dt(yI,_I,"esm2017");function n(e){try{let t=e.getProvider(Vl).getImmediate();return{logEvent:(i,r,s)=>VO(t,i,r,s)}}catch(t){throw Ht.create("interop-component-reg-failed",{reason:t})}}}LO();var TI=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},SI={};var Di,am;(function(){var n;function e(E,v){function I(){}I.prototype=v.prototype,E.D=v.prototype,E.prototype=new I,E.prototype.constructor=E,E.C=function(x,A,C){for(var T=Array(arguments.length-2),Ve=2;Ve<arguments.length;Ve++)T[Ve-2]=arguments[Ve];return v.prototype[A].apply(x,T)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(E,v,I){I||(I=0);var x=Array(16);if(typeof v=="string")for(var A=0;16>A;++A)x[A]=v.charCodeAt(I++)|v.charCodeAt(I++)<<8|v.charCodeAt(I++)<<16|v.charCodeAt(I++)<<24;else for(A=0;16>A;++A)x[A]=v[I++]|v[I++]<<8|v[I++]<<16|v[I++]<<24;v=E.g[0],I=E.g[1],A=E.g[2];var C=E.g[3],T=v+(C^I&(A^C))+x[0]+3614090360&4294967295;v=I+(T<<7&4294967295|T>>>25),T=C+(A^v&(I^A))+x[1]+3905402710&4294967295,C=v+(T<<12&4294967295|T>>>20),T=A+(I^C&(v^I))+x[2]+606105819&4294967295,A=C+(T<<17&4294967295|T>>>15),T=I+(v^A&(C^v))+x[3]+3250441966&4294967295,I=A+(T<<22&4294967295|T>>>10),T=v+(C^I&(A^C))+x[4]+4118548399&4294967295,v=I+(T<<7&4294967295|T>>>25),T=C+(A^v&(I^A))+x[5]+1200080426&4294967295,C=v+(T<<12&4294967295|T>>>20),T=A+(I^C&(v^I))+x[6]+2821735955&4294967295,A=C+(T<<17&4294967295|T>>>15),T=I+(v^A&(C^v))+x[7]+4249261313&4294967295,I=A+(T<<22&4294967295|T>>>10),T=v+(C^I&(A^C))+x[8]+1770035416&4294967295,v=I+(T<<7&4294967295|T>>>25),T=C+(A^v&(I^A))+x[9]+2336552879&4294967295,C=v+(T<<12&4294967295|T>>>20),T=A+(I^C&(v^I))+x[10]+4294925233&4294967295,A=C+(T<<17&4294967295|T>>>15),T=I+(v^A&(C^v))+x[11]+2304563134&4294967295,I=A+(T<<22&4294967295|T>>>10),T=v+(C^I&(A^C))+x[12]+1804603682&4294967295,v=I+(T<<7&4294967295|T>>>25),T=C+(A^v&(I^A))+x[13]+4254626195&4294967295,C=v+(T<<12&4294967295|T>>>20),T=A+(I^C&(v^I))+x[14]+2792965006&4294967295,A=C+(T<<17&4294967295|T>>>15),T=I+(v^A&(C^v))+x[15]+1236535329&4294967295,I=A+(T<<22&4294967295|T>>>10),T=v+(A^C&(I^A))+x[1]+4129170786&4294967295,v=I+(T<<5&4294967295|T>>>27),T=C+(I^A&(v^I))+x[6]+3225465664&4294967295,C=v+(T<<9&4294967295|T>>>23),T=A+(v^I&(C^v))+x[11]+643717713&4294967295,A=C+(T<<14&4294967295|T>>>18),T=I+(C^v&(A^C))+x[0]+3921069994&4294967295,I=A+(T<<20&4294967295|T>>>12),T=v+(A^C&(I^A))+x[5]+3593408605&4294967295,v=I+(T<<5&4294967295|T>>>27),T=C+(I^A&(v^I))+x[10]+38016083&4294967295,C=v+(T<<9&4294967295|T>>>23),T=A+(v^I&(C^v))+x[15]+3634488961&4294967295,A=C+(T<<14&4294967295|T>>>18),T=I+(C^v&(A^C))+x[4]+3889429448&4294967295,I=A+(T<<20&4294967295|T>>>12),T=v+(A^C&(I^A))+x[9]+568446438&4294967295,v=I+(T<<5&4294967295|T>>>27),T=C+(I^A&(v^I))+x[14]+3275163606&4294967295,C=v+(T<<9&4294967295|T>>>23),T=A+(v^I&(C^v))+x[3]+4107603335&4294967295,A=C+(T<<14&4294967295|T>>>18),T=I+(C^v&(A^C))+x[8]+1163531501&4294967295,I=A+(T<<20&4294967295|T>>>12),T=v+(A^C&(I^A))+x[13]+2850285829&4294967295,v=I+(T<<5&4294967295|T>>>27),T=C+(I^A&(v^I))+x[2]+4243563512&4294967295,C=v+(T<<9&4294967295|T>>>23),T=A+(v^I&(C^v))+x[7]+1735328473&4294967295,A=C+(T<<14&4294967295|T>>>18),T=I+(C^v&(A^C))+x[12]+2368359562&4294967295,I=A+(T<<20&4294967295|T>>>12),T=v+(I^A^C)+x[5]+4294588738&4294967295,v=I+(T<<4&4294967295|T>>>28),T=C+(v^I^A)+x[8]+2272392833&4294967295,C=v+(T<<11&4294967295|T>>>21),T=A+(C^v^I)+x[11]+1839030562&4294967295,A=C+(T<<16&4294967295|T>>>16),T=I+(A^C^v)+x[14]+4259657740&4294967295,I=A+(T<<23&4294967295|T>>>9),T=v+(I^A^C)+x[1]+2763975236&4294967295,v=I+(T<<4&4294967295|T>>>28),T=C+(v^I^A)+x[4]+1272893353&4294967295,C=v+(T<<11&4294967295|T>>>21),T=A+(C^v^I)+x[7]+4139469664&4294967295,A=C+(T<<16&4294967295|T>>>16),T=I+(A^C^v)+x[10]+3200236656&4294967295,I=A+(T<<23&4294967295|T>>>9),T=v+(I^A^C)+x[13]+681279174&4294967295,v=I+(T<<4&4294967295|T>>>28),T=C+(v^I^A)+x[0]+3936430074&4294967295,C=v+(T<<11&4294967295|T>>>21),T=A+(C^v^I)+x[3]+3572445317&4294967295,A=C+(T<<16&4294967295|T>>>16),T=I+(A^C^v)+x[6]+76029189&4294967295,I=A+(T<<23&4294967295|T>>>9),T=v+(I^A^C)+x[9]+3654602809&4294967295,v=I+(T<<4&4294967295|T>>>28),T=C+(v^I^A)+x[12]+3873151461&4294967295,C=v+(T<<11&4294967295|T>>>21),T=A+(C^v^I)+x[15]+530742520&4294967295,A=C+(T<<16&4294967295|T>>>16),T=I+(A^C^v)+x[2]+3299628645&4294967295,I=A+(T<<23&4294967295|T>>>9),T=v+(A^(I|~C))+x[0]+4096336452&4294967295,v=I+(T<<6&4294967295|T>>>26),T=C+(I^(v|~A))+x[7]+1126891415&4294967295,C=v+(T<<10&4294967295|T>>>22),T=A+(v^(C|~I))+x[14]+2878612391&4294967295,A=C+(T<<15&4294967295|T>>>17),T=I+(C^(A|~v))+x[5]+4237533241&4294967295,I=A+(T<<21&4294967295|T>>>11),T=v+(A^(I|~C))+x[12]+1700485571&4294967295,v=I+(T<<6&4294967295|T>>>26),T=C+(I^(v|~A))+x[3]+2399980690&4294967295,C=v+(T<<10&4294967295|T>>>22),T=A+(v^(C|~I))+x[10]+4293915773&4294967295,A=C+(T<<15&4294967295|T>>>17),T=I+(C^(A|~v))+x[1]+2240044497&4294967295,I=A+(T<<21&4294967295|T>>>11),T=v+(A^(I|~C))+x[8]+1873313359&4294967295,v=I+(T<<6&4294967295|T>>>26),T=C+(I^(v|~A))+x[15]+4264355552&4294967295,C=v+(T<<10&4294967295|T>>>22),T=A+(v^(C|~I))+x[6]+2734768916&4294967295,A=C+(T<<15&4294967295|T>>>17),T=I+(C^(A|~v))+x[13]+1309151649&4294967295,I=A+(T<<21&4294967295|T>>>11),T=v+(A^(I|~C))+x[4]+4149444226&4294967295,v=I+(T<<6&4294967295|T>>>26),T=C+(I^(v|~A))+x[11]+3174756917&4294967295,C=v+(T<<10&4294967295|T>>>22),T=A+(v^(C|~I))+x[2]+718787259&4294967295,A=C+(T<<15&4294967295|T>>>17),T=I+(C^(A|~v))+x[9]+3951481745&4294967295,E.g[0]=E.g[0]+v&4294967295,E.g[1]=E.g[1]+(A+(T<<21&4294967295|T>>>11))&4294967295,E.g[2]=E.g[2]+A&4294967295,E.g[3]=E.g[3]+C&4294967295}i.prototype.u=function(E,v){v===void 0&&(v=E.length);for(var I=v-this.blockSize,x=this.B,A=this.h,C=0;C<v;){if(A==0)for(;C<=I;)r(this,E,C),C+=this.blockSize;if(typeof E=="string"){for(;C<v;)if(x[A++]=E.charCodeAt(C++),A==this.blockSize){r(this,x),A=0;break}}else for(;C<v;)if(x[A++]=E[C++],A==this.blockSize){r(this,x),A=0;break}}this.h=A,this.o+=v},i.prototype.v=function(){var E=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);E[0]=128;for(var v=1;v<E.length-8;++v)E[v]=0;var I=8*this.o;for(v=E.length-8;v<E.length;++v)E[v]=I&255,I/=256;for(this.u(E),E=Array(16),v=I=0;4>v;++v)for(var x=0;32>x;x+=8)E[I++]=this.g[v]>>>x&255;return E};function s(E,v){var I=a;return Object.prototype.hasOwnProperty.call(I,E)?I[E]:I[E]=v(E)}function o(E,v){this.h=v;for(var I=[],x=!0,A=E.length-1;0<=A;A--){var C=E[A]|0;x&&C==v||(I[A]=C,x=!1)}this.g=I}var a={};function c(E){return-128<=E&&128>E?s(E,function(v){return new o([v|0],0>v?-1:0)}):new o([E|0],0>E?-1:0)}function l(E){if(isNaN(E)||!isFinite(E))return d;if(0>E)return w(l(-E));for(var v=[],I=1,x=0;E>=I;x++)v[x]=E/I|0,I*=4294967296;return new o(v,0)}function h(E,v){if(E.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(E.charAt(0)=="-")return w(h(E.substring(1),v));if(0<=E.indexOf("-"))throw Error('number format error: interior "-" character');for(var I=l(Math.pow(v,8)),x=d,A=0;A<E.length;A+=8){var C=Math.min(8,E.length-A),T=parseInt(E.substring(A,A+C),v);8>C?(C=l(Math.pow(v,C)),x=x.j(C).add(l(T))):(x=x.j(I),x=x.add(l(T)))}return x}var d=c(0),p=c(1),g=c(16777216);n=o.prototype,n.m=function(){if(_(this))return-w(this).m();for(var E=0,v=1,I=0;I<this.g.length;I++){var x=this.i(I);E+=(0<=x?x:4294967296+x)*v,v*=4294967296}return E},n.toString=function(E){if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(b(this))return"0";if(_(this))return"-"+w(this).toString(E);for(var v=l(Math.pow(E,6)),I=this,x="";;){var A=V(I,v).g;I=D(I,A.j(v));var C=((0<I.g.length?I.g[0]:I.h)>>>0).toString(E);if(I=A,b(I))return C+x;for(;6>C.length;)C="0"+C;x=C+x}},n.i=function(E){return 0>E?0:E<this.g.length?this.g[E]:this.h};function b(E){if(E.h!=0)return!1;for(var v=0;v<E.g.length;v++)if(E.g[v]!=0)return!1;return!0}function _(E){return E.h==-1}n.l=function(E){return E=D(this,E),_(E)?-1:b(E)?0:1};function w(E){for(var v=E.g.length,I=[],x=0;x<v;x++)I[x]=~E.g[x];return new o(I,~E.h).add(p)}n.abs=function(){return _(this)?w(this):this},n.add=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],x=0,A=0;A<=v;A++){var C=x+(this.i(A)&65535)+(E.i(A)&65535),T=(C>>>16)+(this.i(A)>>>16)+(E.i(A)>>>16);x=T>>>16,C&=65535,T&=65535,I[A]=T<<16|C}return new o(I,I[I.length-1]&-2147483648?-1:0)};function D(E,v){return E.add(w(v))}n.j=function(E){if(b(this)||b(E))return d;if(_(this))return _(E)?w(this).j(w(E)):w(w(this).j(E));if(_(E))return w(this.j(w(E)));if(0>this.l(g)&&0>E.l(g))return l(this.m()*E.m());for(var v=this.g.length+E.g.length,I=[],x=0;x<2*v;x++)I[x]=0;for(x=0;x<this.g.length;x++)for(var A=0;A<E.g.length;A++){var C=this.i(x)>>>16,T=this.i(x)&65535,Ve=E.i(A)>>>16,he=E.i(A)&65535;I[2*x+2*A]+=T*he,R(I,2*x+2*A),I[2*x+2*A+1]+=C*he,R(I,2*x+2*A+1),I[2*x+2*A+1]+=T*Ve,R(I,2*x+2*A+1),I[2*x+2*A+2]+=C*Ve,R(I,2*x+2*A+2)}for(x=0;x<v;x++)I[x]=I[2*x+1]<<16|I[2*x];for(x=v;x<2*v;x++)I[x]=0;return new o(I,0)};function R(E,v){for(;(E[v]&65535)!=E[v];)E[v+1]+=E[v]>>>16,E[v]&=65535,v++}function k(E,v){this.g=E,this.h=v}function V(E,v){if(b(v))throw Error("division by zero");if(b(E))return new k(d,d);if(_(E))return v=V(w(E),v),new k(w(v.g),w(v.h));if(_(v))return v=V(E,w(v)),new k(w(v.g),v.h);if(30<E.g.length){if(_(E)||_(v))throw Error("slowDivide_ only works with positive integers.");for(var I=p,x=v;0>=x.l(E);)I=O(I),x=O(x);var A=N(I,1),C=N(x,1);for(x=N(x,2),I=N(I,2);!b(x);){var T=C.add(x);0>=T.l(E)&&(A=A.add(I),C=T),x=N(x,1),I=N(I,1)}return v=D(E,A.j(v)),new k(A,v)}for(A=d;0<=E.l(v);){for(I=Math.max(1,Math.floor(E.m()/v.m())),x=Math.ceil(Math.log(I)/Math.LN2),x=48>=x?1:Math.pow(2,x-48),C=l(I),T=C.j(v);_(T)||0<T.l(E);)I-=x,C=l(I),T=C.j(v);b(C)&&(C=p),A=A.add(C),E=D(E,T)}return new k(A,E)}n.A=function(E){return V(this,E).h},n.and=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],x=0;x<v;x++)I[x]=this.i(x)&E.i(x);return new o(I,this.h&E.h)},n.or=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],x=0;x<v;x++)I[x]=this.i(x)|E.i(x);return new o(I,this.h|E.h)},n.xor=function(E){for(var v=Math.max(this.g.length,E.g.length),I=[],x=0;x<v;x++)I[x]=this.i(x)^E.i(x);return new o(I,this.h^E.h)};function O(E){for(var v=E.g.length+1,I=[],x=0;x<v;x++)I[x]=E.i(x)<<1|E.i(x-1)>>>31;return new o(I,E.h)}function N(E,v){var I=v>>5;v%=32;for(var x=E.g.length-I,A=[],C=0;C<x;C++)A[C]=0<v?E.i(C+I)>>>v|E.i(C+I+1)<<32-v:E.i(C+I);return new o(A,E.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,am=SI.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=h,Di=SI.Integer=o}).apply(typeof TI<"u"?TI:typeof self<"u"?self:typeof window<"u"?window:{});var Ll=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Qn={};var cm,lm,fs,um,_a,Fl,hm,dm,fm;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(u,f,m){return u==Array.prototype||u==Object.prototype||(u[f]=m.value),u};function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof Ll=="object"&&Ll];for(var f=0;f<u.length;++f){var m=u[f];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var i=t(this);function r(u,f){if(f)e:{var m=i;u=u.split(".");for(var y=0;y<u.length-1;y++){var P=u[y];if(!(P in m))break e;m=m[P]}u=u[u.length-1],y=m[u],f=f(y),f!=y&&f!=null&&e(m,u,{configurable:!0,writable:!0,value:f})}}function s(u,f){u instanceof String&&(u+="");var m=0,y=!1,P={next:function(){if(!y&&m<u.length){var M=m++;return{value:f(M,u[M]),done:!1}}return y=!0,{done:!0,value:void 0}}};return P[Symbol.iterator]=function(){return P},P}r("Array.prototype.values",function(u){return u||function(){return s(this,function(f,m){return m})}});var o=o||{},a=this||self;function c(u){var f=typeof u;return f=f!="object"?f:u?Array.isArray(u)?"array":f:"null",f=="array"||f=="object"&&typeof u.length=="number"}function l(u){var f=typeof u;return f=="object"&&u!=null||f=="function"}function h(u,f,m){return u.call.apply(u.bind,arguments)}function d(u,f,m){if(!u)throw Error();if(2<arguments.length){var y=Array.prototype.slice.call(arguments,2);return function(){var P=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(P,y),u.apply(f,P)}}return function(){return u.apply(f,arguments)}}function p(u,f,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?h:d,p.apply(null,arguments)}function g(u,f){var m=Array.prototype.slice.call(arguments,1);return function(){var y=m.slice();return y.push.apply(y,arguments),u.apply(this,y)}}function b(u,f){function m(){}m.prototype=f.prototype,u.aa=f.prototype,u.prototype=new m,u.prototype.constructor=u,u.Qb=function(y,P,M){for(var z=Array(arguments.length-2),Se=2;Se<arguments.length;Se++)z[Se-2]=arguments[Se];return f.prototype[P].apply(y,z)}}function _(u){let f=u.length;if(0<f){let m=Array(f);for(let y=0;y<f;y++)m[y]=u[y];return m}return[]}function w(u,f){for(let m=1;m<arguments.length;m++){let y=arguments[m];if(c(y)){let P=u.length||0,M=y.length||0;u.length=P+M;for(let z=0;z<M;z++)u[P+z]=y[z]}else u.push(y)}}class D{constructor(f,m){this.i=f,this.j=m,this.h=0,this.g=null}get(){let f;return 0<this.h?(this.h--,f=this.g,this.g=f.next,f.next=null):f=this.i(),f}}function R(u){return/^[\s\xa0]*$/.test(u)}function k(){var u=a.navigator;return u&&(u=u.userAgent)?u:""}function V(u){return V[" "](u),u}V[" "]=function(){};var O=k().indexOf("Gecko")!=-1&&!(k().toLowerCase().indexOf("webkit")!=-1&&k().indexOf("Edge")==-1)&&!(k().indexOf("Trident")!=-1||k().indexOf("MSIE")!=-1)&&k().indexOf("Edge")==-1;function N(u,f,m){for(let y in u)f.call(m,u[y],y,u)}function E(u,f){for(let m in u)f.call(void 0,u[m],m,u)}function v(u){let f={};for(let m in u)f[m]=u[m];return f}let I="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(u,f){let m,y;for(let P=1;P<arguments.length;P++){y=arguments[P];for(m in y)u[m]=y[m];for(let M=0;M<I.length;M++)m=I[M],Object.prototype.hasOwnProperty.call(y,m)&&(u[m]=y[m])}}function A(u){var f=1;u=u.split(":");let m=[];for(;0<f&&u.length;)m.push(u.shift()),f--;return u.length&&m.push(u.join(":")),m}function C(u){a.setTimeout(()=>{throw u},0)}function T(){var u=Ge;let f=null;return u.g&&(f=u.g,u.g=u.g.next,u.g||(u.h=null),f.next=null),f}class Ve{constructor(){this.h=this.g=null}add(f,m){let y=he.get();y.set(f,m),this.h?this.h.next=y:this.g=y,this.h=y}}var he=new D(()=>new De,u=>u.reset());class De{constructor(){this.next=this.g=this.h=null}set(f,m){this.h=f,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Te,at=!1,Ge=new Ve,jn=()=>{let u=a.Promise.resolve(void 0);Te=()=>{u.then(Fr)}};var Fr=()=>{for(var u;u=T();){try{u.h.call(u.g)}catch(m){C(m)}var f=he;f.j(u),100>f.h&&(f.h++,u.next=f.g,f.g=u)}at=!1};function Tt(){this.s=this.s,this.C=this.C}Tt.prototype.s=!1,Tt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Tt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(u,f){this.type=u,this.g=this.target=f,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var zn=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var u=!1,f=Object.defineProperty({},"passive",{get:function(){u=!0}});try{let m=()=>{};a.addEventListener("test",m,f),a.removeEventListener("test",m,f)}catch{}return u}();function nn(u,f){if(Be.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u){var m=this.type=u.type,y=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;if(this.target=u.target||u.srcElement,this.g=f,f=u.relatedTarget){if(O){e:{try{V(f.nodeName);var P=!0;break e}catch{}P=!1}P||(f=null)}}else m=="mouseover"?f=u.fromElement:m=="mouseout"&&(f=u.toElement);this.relatedTarget=f,y?(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=typeof u.pointerType=="string"?u.pointerType:qn[u.pointerType]||"",this.state=u.state,this.i=u,u.defaultPrevented&&nn.aa.h.call(this)}}b(nn,Be);var qn={2:"touch",3:"pen",4:"mouse"};nn.prototype.h=function(){nn.aa.h.call(this);var u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var mo="closure_listenable_"+(1e6*Math.random()|0),xC=0;function AC(u,f,m,y,P){this.listener=u,this.proxy=null,this.src=f,this.type=m,this.capture=!!y,this.ha=P,this.key=++xC,this.da=this.fa=!1}function Ec(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function Tc(u){this.src=u,this.g={},this.h=0}Tc.prototype.add=function(u,f,m,y,P){var M=u.toString();u=this.g[M],u||(u=this.g[M]=[],this.h++);var z=Cd(u,f,y,P);return-1<z?(f=u[z],m||(f.fa=!1)):(f=new AC(f,this.src,M,!!y,P),f.fa=m,u.push(f)),f};function Ad(u,f){var m=f.type;if(m in u.g){var y=u.g[m],P=Array.prototype.indexOf.call(y,f,void 0),M;(M=0<=P)&&Array.prototype.splice.call(y,P,1),M&&(Ec(f),u.g[m].length==0&&(delete u.g[m],u.h--))}}function Cd(u,f,m,y){for(var P=0;P<u.length;++P){var M=u[P];if(!M.da&&M.listener==f&&M.capture==!!m&&M.ha==y)return P}return-1}var Dd="closure_lm_"+(1e6*Math.random()|0),Rd={};function pv(u,f,m,y,P){if(y&&y.once)return gv(u,f,m,y,P);if(Array.isArray(f)){for(var M=0;M<f.length;M++)pv(u,f[M],m,y,P);return null}return m=Od(m),u&&u[mo]?u.K(f,m,l(y)?!!y.capture:!!y,P):mv(u,f,m,!1,y,P)}function mv(u,f,m,y,P,M){if(!f)throw Error("Invalid event type");var z=l(P)?!!P.capture:!!P,Se=kd(u);if(Se||(u[Dd]=Se=new Tc(u)),m=Se.add(f,m,y,z,M),m.proxy)return m;if(y=CC(),m.proxy=y,y.src=u,y.listener=m,u.addEventListener)zn||(P=z),P===void 0&&(P=!1),u.addEventListener(f.toString(),y,P);else if(u.attachEvent)u.attachEvent(_v(f.toString()),y);else if(u.addListener&&u.removeListener)u.addListener(y);else throw Error("addEventListener and attachEvent are unavailable.");return m}function CC(){function u(m){return f.call(u.src,u.listener,m)}let f=DC;return u}function gv(u,f,m,y,P){if(Array.isArray(f)){for(var M=0;M<f.length;M++)gv(u,f[M],m,y,P);return null}return m=Od(m),u&&u[mo]?u.L(f,m,l(y)?!!y.capture:!!y,P):mv(u,f,m,!0,y,P)}function yv(u,f,m,y,P){if(Array.isArray(f))for(var M=0;M<f.length;M++)yv(u,f[M],m,y,P);else y=l(y)?!!y.capture:!!y,m=Od(m),u&&u[mo]?(u=u.i,f=String(f).toString(),f in u.g&&(M=u.g[f],m=Cd(M,m,y,P),-1<m&&(Ec(M[m]),Array.prototype.splice.call(M,m,1),M.length==0&&(delete u.g[f],u.h--)))):u&&(u=kd(u))&&(f=u.g[f.toString()],u=-1,f&&(u=Cd(f,m,y,P)),(m=-1<u?f[u]:null)&&Pd(m))}function Pd(u){if(typeof u!="number"&&u&&!u.da){var f=u.src;if(f&&f[mo])Ad(f.i,u);else{var m=u.type,y=u.proxy;f.removeEventListener?f.removeEventListener(m,y,u.capture):f.detachEvent?f.detachEvent(_v(m),y):f.addListener&&f.removeListener&&f.removeListener(y),(m=kd(f))?(Ad(m,u),m.h==0&&(m.src=null,f[Dd]=null)):Ec(u)}}}function _v(u){return u in Rd?Rd[u]:Rd[u]="on"+u}function DC(u,f){if(u.da)u=!0;else{f=new nn(f,this);var m=u.listener,y=u.ha||u.src;u.fa&&Pd(u),u=m.call(y,f)}return u}function kd(u){return u=u[Dd],u instanceof Tc?u:null}var Md="__closure_events_fn_"+(1e9*Math.random()>>>0);function Od(u){return typeof u=="function"?u:(u[Md]||(u[Md]=function(f){return u.handleEvent(f)}),u[Md])}function yt(){Tt.call(this),this.i=new Tc(this),this.M=this,this.F=null}b(yt,Tt),yt.prototype[mo]=!0,yt.prototype.removeEventListener=function(u,f,m,y){yv(this,u,f,m,y)};function St(u,f){var m,y=u.F;if(y)for(m=[];y;y=y.F)m.push(y);if(u=u.M,y=f.type||f,typeof f=="string")f=new Be(f,u);else if(f instanceof Be)f.target=f.target||u;else{var P=f;f=new Be(y,u),x(f,P)}if(P=!0,m)for(var M=m.length-1;0<=M;M--){var z=f.g=m[M];P=Sc(z,y,!0,f)&&P}if(z=f.g=u,P=Sc(z,y,!0,f)&&P,P=Sc(z,y,!1,f)&&P,m)for(M=0;M<m.length;M++)z=f.g=m[M],P=Sc(z,y,!1,f)&&P}yt.prototype.N=function(){if(yt.aa.N.call(this),this.i){var u=this.i,f;for(f in u.g){for(var m=u.g[f],y=0;y<m.length;y++)Ec(m[y]);delete u.g[f],u.h--}}this.F=null},yt.prototype.K=function(u,f,m,y){return this.i.add(String(u),f,!1,m,y)},yt.prototype.L=function(u,f,m,y){return this.i.add(String(u),f,!0,m,y)};function Sc(u,f,m,y){if(f=u.i.g[String(f)],!f)return!0;f=f.concat();for(var P=!0,M=0;M<f.length;++M){var z=f[M];if(z&&!z.da&&z.capture==m){var Se=z.listener,ct=z.ha||z.src;z.fa&&Ad(u.i,z),P=Se.call(ct,y)!==!1&&P}}return P&&!y.defaultPrevented}function vv(u,f,m){if(typeof u=="function")m&&(u=p(u,m));else if(u&&typeof u.handleEvent=="function")u=p(u.handleEvent,u);else throw Error("Invalid listener argument");return 2147483647<Number(f)?-1:a.setTimeout(u,f||0)}function wv(u){u.g=vv(()=>{u.g=null,u.i&&(u.i=!1,wv(u))},u.l);let f=u.h;u.h=null,u.m.apply(null,f)}class RC extends Tt{constructor(f,m){super(),this.m=f,this.l=m,this.h=null,this.i=!1,this.g=null}j(f){this.h=arguments,this.g?this.i=!0:wv(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function go(u){Tt.call(this),this.h=u,this.g={}}b(go,Tt);var bv=[];function Iv(u){N(u.g,function(f,m){this.g.hasOwnProperty(m)&&Pd(f)},u),u.g={}}go.prototype.N=function(){go.aa.N.call(this),Iv(this)},go.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nd=a.JSON.stringify,PC=a.JSON.parse,kC=class{stringify(u){return a.JSON.stringify(u,void 0)}parse(u){return a.JSON.parse(u,void 0)}};function Vd(){}Vd.prototype.h=null;function Ev(u){return u.h||(u.h=u.i())}function Tv(){}var yo={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ld(){Be.call(this,"d")}b(Ld,Be);function Fd(){Be.call(this,"c")}b(Fd,Be);var Yi={},Sv=null;function xc(){return Sv=Sv||new yt}Yi.La="serverreachability";function xv(u){Be.call(this,Yi.La,u)}b(xv,Be);function _o(u){let f=xc();St(f,new xv(f))}Yi.STAT_EVENT="statevent";function Av(u,f){Be.call(this,Yi.STAT_EVENT,u),this.stat=f}b(Av,Be);function xt(u){let f=xc();St(f,new Av(f,u))}Yi.Ma="timingevent";function Cv(u,f){Be.call(this,Yi.Ma,u),this.size=f}b(Cv,Be);function vo(u,f){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){u()},f)}function wo(){this.g=!0}wo.prototype.xa=function(){this.g=!1};function MC(u,f,m,y,P,M){u.info(function(){if(u.g)if(M)for(var z="",Se=M.split("&"),ct=0;ct<Se.length;ct++){var me=Se[ct].split("=");if(1<me.length){var _t=me[0];me=me[1];var vt=_t.split("_");z=2<=vt.length&&vt[1]=="type"?z+(_t+"="+me+"&"):z+(_t+"=redacted&")}}else z=null;else z=M;return"XMLHTTP REQ ("+y+") [attempt "+P+"]: "+f+`
`+m+`
`+z})}function OC(u,f,m,y,P,M,z){u.info(function(){return"XMLHTTP RESP ("+y+") [ attempt "+P+"]: "+f+`
`+m+`
`+M+" "+z})}function Ur(u,f,m,y){u.info(function(){return"XMLHTTP TEXT ("+f+"): "+VC(u,m)+(y?" "+y:"")})}function NC(u,f){u.info(function(){return"TIMEOUT: "+f})}wo.prototype.info=function(){};function VC(u,f){if(!u.g)return f;if(!f)return null;try{var m=JSON.parse(f);if(m){for(u=0;u<m.length;u++)if(Array.isArray(m[u])){var y=m[u];if(!(2>y.length)){var P=y[1];if(Array.isArray(P)&&!(1>P.length)){var M=P[0];if(M!="noop"&&M!="stop"&&M!="close")for(var z=1;z<P.length;z++)P[z]=""}}}}return Nd(m)}catch{return f}}var Ac={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Dv={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ud;function Cc(){}b(Cc,Vd),Cc.prototype.g=function(){return new XMLHttpRequest},Cc.prototype.i=function(){return{}},Ud=new Cc;function pi(u,f,m,y){this.j=u,this.i=f,this.l=m,this.R=y||1,this.U=new go(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Rv}function Rv(){this.i=null,this.g="",this.h=!1}var Pv={},Bd={};function jd(u,f,m){u.L=1,u.v=kc(Wn(f)),u.m=m,u.P=!0,kv(u,null)}function kv(u,f){u.F=Date.now(),Dc(u),u.A=Wn(u.v);var m=u.A,y=u.R;Array.isArray(y)||(y=[String(y)]),Hv(m.i,"t",y),u.C=0,m=u.j.J,u.h=new Rv,u.g=uw(u.j,m?f:null,!u.m),0<u.O&&(u.M=new RC(p(u.Y,u,u.g),u.O)),f=u.U,m=u.g,y=u.ca;var P="readystatechange";Array.isArray(P)||(P&&(bv[0]=P.toString()),P=bv);for(var M=0;M<P.length;M++){var z=pv(m,P[M],y||f.handleEvent,!1,f.h||f);if(!z)break;f.g[z.key]=z}f=u.H?v(u.H):{},u.m?(u.u||(u.u="POST"),f["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.A,u.u,u.m,f)):(u.u="GET",u.g.ea(u.A,u.u,null,f)),_o(),MC(u.i,u.u,u.A,u.l,u.R,u.m)}pi.prototype.ca=function(u){u=u.target;let f=this.M;f&&$n(u)==3?f.j():this.Y(u)},pi.prototype.Y=function(u){try{if(u==this.g)e:{let vt=$n(this.g);var f=this.g.Ba();let zr=this.g.Z();if(!(3>vt)&&(vt!=3||this.g&&(this.h.h||this.g.oa()||Zv(this.g)))){this.J||vt!=4||f==7||(f==8||0>=zr?_o(3):_o(2)),zd(this);var m=this.g.Z();this.X=m;t:if(Mv(this)){var y=Zv(this.g);u="";var P=y.length,M=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Qi(this),bo(this);var z="";break t}this.h.i=new a.TextDecoder}for(f=0;f<P;f++)this.h.h=!0,u+=this.h.i.decode(y[f],{stream:!(M&&f==P-1)});y.length=0,this.h.g+=u,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,OC(this.i,this.u,this.A,this.l,this.R,vt,m),this.o){if(this.T&&!this.K){t:{if(this.g){var Se,ct=this.g;if((Se=ct.g?ct.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!R(Se)){var me=Se;break t}}me=null}if(m=me)Ur(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qd(this,m);else{this.o=!1,this.s=3,xt(12),Qi(this),bo(this);break e}}if(this.P){m=!0;let rn;for(;!this.J&&this.C<z.length;)if(rn=LC(this,z),rn==Bd){vt==4&&(this.s=4,xt(14),m=!1),Ur(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==Pv){this.s=4,xt(15),Ur(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Ur(this.i,this.l,rn,null),qd(this,rn);if(Mv(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vt!=4||z.length!=0||this.h.h||(this.s=1,xt(16),m=!1),this.o=this.o&&m,!m)Ur(this.i,this.l,z,"[Invalid Chunked Response]"),Qi(this),bo(this);else if(0<z.length&&!this.W){this.W=!0;var _t=this.j;_t.g==this&&_t.ba&&!_t.M&&(_t.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Yd(_t),_t.M=!0,xt(11))}}else Ur(this.i,this.l,z,null),qd(this,z);vt==4&&Qi(this),this.o&&!this.J&&(vt==4?ow(this.j,this):(this.o=!1,Dc(this)))}else eD(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),Qi(this),bo(this)}}}catch{}finally{}};function Mv(u){return u.g?u.u=="GET"&&u.L!=2&&u.j.Ca:!1}function LC(u,f){var m=u.C,y=f.indexOf(`
`,m);return y==-1?Bd:(m=Number(f.substring(m,y)),isNaN(m)?Pv:(y+=1,y+m>f.length?Bd:(f=f.slice(y,y+m),u.C=y+m,f)))}pi.prototype.cancel=function(){this.J=!0,Qi(this)};function Dc(u){u.S=Date.now()+u.I,Ov(u,u.I)}function Ov(u,f){if(u.B!=null)throw Error("WatchDog timer not null");u.B=vo(p(u.ba,u),f)}function zd(u){u.B&&(a.clearTimeout(u.B),u.B=null)}pi.prototype.ba=function(){this.B=null;let u=Date.now();0<=u-this.S?(NC(this.i,this.A),this.L!=2&&(_o(),xt(17)),Qi(this),this.s=2,bo(this)):Ov(this,this.S-u)};function bo(u){u.j.G==0||u.J||ow(u.j,u)}function Qi(u){zd(u);var f=u.M;f&&typeof f.ma=="function"&&f.ma(),u.M=null,Iv(u.U),u.g&&(f=u.g,u.g=null,f.abort(),f.ma())}function qd(u,f){try{var m=u.j;if(m.G!=0&&(m.g==u||Wd(m.h,u))){if(!u.K&&Wd(m.h,u)&&m.G==3){try{var y=m.Da.g.parse(f)}catch{y=null}if(Array.isArray(y)&&y.length==3){var P=y;if(P[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<u.F)Lc(m),Nc(m);else break e;Kd(m),xt(18)}}else m.za=P[1],0<m.za-m.T&&37500>P[2]&&m.F&&m.v==0&&!m.C&&(m.C=vo(p(m.Za,m),6e3));if(1>=Lv(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else Ji(m,11)}else if((u.K||m.g==u)&&Lc(m),!R(f))for(P=m.Da.g.parse(f),f=0;f<P.length;f++){let me=P[f];if(m.T=me[0],me=me[1],m.G==2)if(me[0]=="c"){m.K=me[1],m.ia=me[2];let _t=me[3];_t!=null&&(m.la=_t,m.j.info("VER="+m.la));let vt=me[4];vt!=null&&(m.Aa=vt,m.j.info("SVER="+m.Aa));let zr=me[5];zr!=null&&typeof zr=="number"&&0<zr&&(y=1.5*zr,m.L=y,m.j.info("backChannelRequestTimeoutMs_="+y)),y=m;let rn=u.g;if(rn){let Uc=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Uc){var M=y.h;M.g||Uc.indexOf("spdy")==-1&&Uc.indexOf("quic")==-1&&Uc.indexOf("h2")==-1||(M.j=M.l,M.g=new Set,M.h&&($d(M,M.h),M.h=null))}if(y.D){let Qd=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Qd&&(y.ya=Qd,Oe(y.I,y.D,Qd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-u.F,m.j.info("Handshake RTT: "+m.R+"ms")),y=m;var z=u;if(y.qa=lw(y,y.J?y.ia:null,y.W),z.K){Fv(y.h,z);var Se=z,ct=y.L;ct&&(Se.I=ct),Se.B&&(zd(Se),Dc(Se)),y.g=z}else rw(y);0<m.i.length&&Vc(m)}else me[0]!="stop"&&me[0]!="close"||Ji(m,7);else m.G==3&&(me[0]=="stop"||me[0]=="close"?me[0]=="stop"?Ji(m,7):Gd(m):me[0]!="noop"&&m.l&&m.l.ta(me),m.v=0)}}_o(4)}catch{}}var FC=class{constructor(u,f){this.g=u,this.map=f}};function Nv(u){this.l=u||10,a.PerformanceNavigationTiming?(u=a.performance.getEntriesByType("navigation"),u=0<u.length&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Vv(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function Lv(u){return u.h?1:u.g?u.g.size:0}function Wd(u,f){return u.h?u.h==f:u.g?u.g.has(f):!1}function $d(u,f){u.g?u.g.add(f):u.h=f}function Fv(u,f){u.h&&u.h==f?u.h=null:u.g&&u.g.has(f)&&u.g.delete(f)}Nv.prototype.cancel=function(){if(this.i=Uv(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let u of this.g.values())u.cancel();this.g.clear()}};function Uv(u){if(u.h!=null)return u.i.concat(u.h.D);if(u.g!=null&&u.g.size!==0){let f=u.i;for(let m of u.g.values())f=f.concat(m.D);return f}return _(u.i)}function UC(u){if(u.V&&typeof u.V=="function")return u.V();if(typeof Map<"u"&&u instanceof Map||typeof Set<"u"&&u instanceof Set)return Array.from(u.values());if(typeof u=="string")return u.split("");if(c(u)){for(var f=[],m=u.length,y=0;y<m;y++)f.push(u[y]);return f}f=[],m=0;for(y in u)f[m++]=u[y];return f}function BC(u){if(u.na&&typeof u.na=="function")return u.na();if(!u.V||typeof u.V!="function"){if(typeof Map<"u"&&u instanceof Map)return Array.from(u.keys());if(!(typeof Set<"u"&&u instanceof Set)){if(c(u)||typeof u=="string"){var f=[];u=u.length;for(var m=0;m<u;m++)f.push(m);return f}f=[],m=0;for(let y in u)f[m++]=y;return f}}}function Bv(u,f){if(u.forEach&&typeof u.forEach=="function")u.forEach(f,void 0);else if(c(u)||typeof u=="string")Array.prototype.forEach.call(u,f,void 0);else for(var m=BC(u),y=UC(u),P=y.length,M=0;M<P;M++)f.call(void 0,y[M],m&&m[M],u)}var jv=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jC(u,f){if(u){u=u.split("&");for(var m=0;m<u.length;m++){var y=u[m].indexOf("="),P=null;if(0<=y){var M=u[m].substring(0,y);P=u[m].substring(y+1)}else M=u[m];f(M,P?decodeURIComponent(P.replace(/\+/g," ")):"")}}}function Xi(u){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,u instanceof Xi){this.h=u.h,Rc(this,u.j),this.o=u.o,this.g=u.g,Pc(this,u.s),this.l=u.l;var f=u.i,m=new To;m.i=f.i,f.g&&(m.g=new Map(f.g),m.h=f.h),zv(this,m),this.m=u.m}else u&&(f=String(u).match(jv))?(this.h=!1,Rc(this,f[1]||"",!0),this.o=Io(f[2]||""),this.g=Io(f[3]||"",!0),Pc(this,f[4]),this.l=Io(f[5]||"",!0),zv(this,f[6]||"",!0),this.m=Io(f[7]||"")):(this.h=!1,this.i=new To(null,this.h))}Xi.prototype.toString=function(){var u=[],f=this.j;f&&u.push(Eo(f,qv,!0),":");var m=this.g;return(m||f=="file")&&(u.push("//"),(f=this.o)&&u.push(Eo(f,qv,!0),"@"),u.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&u.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&u.push("/"),u.push(Eo(m,m.charAt(0)=="/"?WC:qC,!0))),(m=this.i.toString())&&u.push("?",m),(m=this.m)&&u.push("#",Eo(m,HC)),u.join("")};function Wn(u){return new Xi(u)}function Rc(u,f,m){u.j=m?Io(f,!0):f,u.j&&(u.j=u.j.replace(/:$/,""))}function Pc(u,f){if(f){if(f=Number(f),isNaN(f)||0>f)throw Error("Bad port number "+f);u.s=f}else u.s=null}function zv(u,f,m){f instanceof To?(u.i=f,GC(u.i,u.h)):(m||(f=Eo(f,$C)),u.i=new To(f,u.h))}function Oe(u,f,m){u.i.set(f,m)}function kc(u){return Oe(u,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),u}function Io(u,f){return u?f?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function Eo(u,f,m){return typeof u=="string"?(u=encodeURI(u).replace(f,zC),m&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function zC(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var qv=/[#\/\?@]/g,qC=/[#\?:]/g,WC=/[#\?]/g,$C=/[#\?@]/g,HC=/#/g;function To(u,f){this.h=this.g=null,this.i=u||null,this.j=!!f}function mi(u){u.g||(u.g=new Map,u.h=0,u.i&&jC(u.i,function(f,m){u.add(decodeURIComponent(f.replace(/\+/g," ")),m)}))}n=To.prototype,n.add=function(u,f){mi(this),this.i=null,u=Br(this,u);var m=this.g.get(u);return m||this.g.set(u,m=[]),m.push(f),this.h+=1,this};function Wv(u,f){mi(u),f=Br(u,f),u.g.has(f)&&(u.i=null,u.h-=u.g.get(f).length,u.g.delete(f))}function $v(u,f){return mi(u),f=Br(u,f),u.g.has(f)}n.forEach=function(u,f){mi(this),this.g.forEach(function(m,y){m.forEach(function(P){u.call(f,P,y,this)},this)},this)},n.na=function(){mi(this);let u=Array.from(this.g.values()),f=Array.from(this.g.keys()),m=[];for(let y=0;y<f.length;y++){let P=u[y];for(let M=0;M<P.length;M++)m.push(f[y])}return m},n.V=function(u){mi(this);let f=[];if(typeof u=="string")$v(this,u)&&(f=f.concat(this.g.get(Br(this,u))));else{u=Array.from(this.g.values());for(let m=0;m<u.length;m++)f=f.concat(u[m])}return f},n.set=function(u,f){return mi(this),this.i=null,u=Br(this,u),$v(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[f]),this.h+=1,this},n.get=function(u,f){return u?(u=this.V(u),0<u.length?String(u[0]):f):f};function Hv(u,f,m){Wv(u,f),0<m.length&&(u.i=null,u.g.set(Br(u,f),_(m)),u.h+=m.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let u=[],f=Array.from(this.g.keys());for(var m=0;m<f.length;m++){var y=f[m];let M=encodeURIComponent(String(y)),z=this.V(y);for(y=0;y<z.length;y++){var P=M;z[y]!==""&&(P+="="+encodeURIComponent(String(z[y]))),u.push(P)}}return this.i=u.join("&")};function Br(u,f){return f=String(f),u.j&&(f=f.toLowerCase()),f}function GC(u,f){f&&!u.j&&(mi(u),u.i=null,u.g.forEach(function(m,y){var P=y.toLowerCase();y!=P&&(Wv(this,y),Hv(this,P,m))},u)),u.j=f}function KC(u,f){let m=new wo;if(a.Image){let y=new Image;y.onload=g(gi,m,"TestLoadImage: loaded",!0,f,y),y.onerror=g(gi,m,"TestLoadImage: error",!1,f,y),y.onabort=g(gi,m,"TestLoadImage: abort",!1,f,y),y.ontimeout=g(gi,m,"TestLoadImage: timeout",!1,f,y),a.setTimeout(function(){y.ontimeout&&y.ontimeout()},1e4),y.src=u}else f(!1)}function YC(u,f){let m=new wo,y=new AbortController,P=setTimeout(()=>{y.abort(),gi(m,"TestPingServer: timeout",!1,f)},1e4);fetch(u,{signal:y.signal}).then(M=>{clearTimeout(P),M.ok?gi(m,"TestPingServer: ok",!0,f):gi(m,"TestPingServer: server error",!1,f)}).catch(()=>{clearTimeout(P),gi(m,"TestPingServer: error",!1,f)})}function gi(u,f,m,y,P){try{P&&(P.onload=null,P.onerror=null,P.onabort=null,P.ontimeout=null),y(m)}catch{}}function QC(){this.g=new kC}function XC(u,f,m){let y=m||"";try{Bv(u,function(P,M){let z=P;l(P)&&(z=Nd(P)),f.push(y+M+"="+encodeURIComponent(z))})}catch(P){throw f.push(y+"type="+encodeURIComponent("_badmap")),P}}function So(u){this.l=u.Ub||null,this.j=u.eb||!1}b(So,Vd),So.prototype.g=function(){return new Mc(this.l,this.j)},So.prototype.i=function(u){return function(){return u}}({});function Mc(u,f){yt.call(this),this.D=u,this.o=f,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(Mc,yt),n=Mc.prototype,n.open=function(u,f){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=u,this.A=f,this.readyState=1,Ao(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let f={headers:this.u,method:this.B,credentials:this.m,cache:void 0};u&&(f.body=u),(this.D||a).fetch(new Request(this.A,f)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xo(this)),this.readyState=0},n.Sa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ao(this)),this.g&&(this.readyState=3,Ao(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gv(this)}else u.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gv(u){u.j.read().then(u.Pa.bind(u)).catch(u.ga.bind(u))}n.Pa=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var f=u.value?u.value:new Uint8Array(0);(f=this.v.decode(f,{stream:!u.done}))&&(this.response=this.responseText+=f)}u.done?xo(this):Ao(this),this.readyState==3&&Gv(this)}},n.Ra=function(u){this.g&&(this.response=this.responseText=u,xo(this))},n.Qa=function(u){this.g&&(this.response=u,xo(this))},n.ga=function(){this.g&&xo(this)};function xo(u){u.readyState=4,u.l=null,u.j=null,u.v=null,Ao(u)}n.setRequestHeader=function(u,f){this.u.append(u,f)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let u=[],f=this.h.entries();for(var m=f.next();!m.done;)m=m.value,u.push(m[0]+": "+m[1]),m=f.next();return u.join(`\r
`)};function Ao(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(Mc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function Kv(u){let f="";return N(u,function(m,y){f+=y,f+=":",f+=m,f+=`\r
`}),f}function Hd(u,f,m){e:{for(y in m){var y=!1;break e}y=!0}y||(m=Kv(m),typeof u=="string"?m!=null&&encodeURIComponent(String(m)):Oe(u,f,m))}function je(u){yt.call(this),this.headers=new Map,this.o=u||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(je,yt);var JC=/^https?$/i,ZC=["POST","PUT"];n=je.prototype,n.Ha=function(u){this.J=u},n.ea=function(u,f,m,y){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);f=f?f.toUpperCase():"GET",this.D=u,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ud.g(),this.v=this.o?Ev(this.o):Ev(Ud),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(f,String(u),!0),this.B=!1}catch(M){Yv(this,M);return}if(u=m||"",m=new Map(this.headers),y)if(Object.getPrototypeOf(y)===Object.prototype)for(var P in y)m.set(P,y[P]);else if(typeof y.keys=="function"&&typeof y.get=="function")for(let M of y.keys())m.set(M,y.get(M));else throw Error("Unknown input type for opt_headers: "+String(y));y=Array.from(m.keys()).find(M=>M.toLowerCase()=="content-type"),P=a.FormData&&u instanceof a.FormData,!(0<=Array.prototype.indexOf.call(ZC,f,void 0))||y||P||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[M,z]of m)this.g.setRequestHeader(M,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jv(this),this.u=!0,this.g.send(u),this.u=!1}catch(M){Yv(this,M)}};function Yv(u,f){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=f,u.m=5,Qv(u),Oc(u)}function Qv(u){u.A||(u.A=!0,St(u,"complete"),St(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=u||7,St(this,"complete"),St(this,"abort"),Oc(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Oc(this,!0)),je.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Xv(this):this.bb())},n.bb=function(){Xv(this)};function Xv(u){if(u.h&&typeof o<"u"&&(!u.v[1]||$n(u)!=4||u.Z()!=2)){if(u.u&&$n(u)==4)vv(u.Ea,0,u);else if(St(u,"readystatechange"),$n(u)==4){u.h=!1;try{let z=u.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var f=!0;break e;default:f=!1}var m;if(!(m=f)){var y;if(y=z===0){var P=String(u.D).match(jv)[1]||null;!P&&a.self&&a.self.location&&(P=a.self.location.protocol.slice(0,-1)),y=!JC.test(P?P.toLowerCase():"")}m=y}if(m)St(u,"complete"),St(u,"success");else{u.m=6;try{var M=2<$n(u)?u.g.statusText:""}catch{M=""}u.l=M+" ["+u.Z()+"]",Qv(u)}}finally{Oc(u)}}}}function Oc(u,f){if(u.g){Jv(u);let m=u.g,y=u.v[0]?()=>{}:null;u.g=null,u.v=null,f||St(u,"ready");try{m.onreadystatechange=y}catch{}}}function Jv(u){u.I&&(a.clearTimeout(u.I),u.I=null)}n.isActive=function(){return!!this.g};function $n(u){return u.g?u.g.readyState:0}n.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(u){if(this.g){var f=this.g.responseText;return u&&f.indexOf(u)==0&&(f=f.substring(u.length)),PC(f)}};function Zv(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.H){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function eD(u){let f={};u=(u.g&&2<=$n(u)&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let y=0;y<u.length;y++){if(R(u[y]))continue;var m=A(u[y]);let P=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();let M=f[P]||[];f[P]=M,M.push(m)}E(f,function(y){return y.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Co(u,f,m){return m&&m.internalChannelParams&&m.internalChannelParams[u]||f}function ew(u){this.Aa=0,this.i=[],this.j=new wo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Co("failFast",!1,u),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Co("baseRetryDelayMs",5e3,u),this.cb=Co("retryDelaySeedMs",1e4,u),this.Wa=Co("forwardChannelMaxRetries",2,u),this.wa=Co("forwardChannelRequestTimeoutMs",2e4,u),this.pa=u&&u.xmlHttpFactory||void 0,this.Xa=u&&u.Tb||void 0,this.Ca=u&&u.useFetchStreams||!1,this.L=void 0,this.J=u&&u.supportsCrossDomainXhr||!1,this.K="",this.h=new Nv(u&&u.concurrentRequestLimit),this.Da=new QC,this.P=u&&u.fastHandshake||!1,this.O=u&&u.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=u&&u.Rb||!1,u&&u.xa&&this.j.xa(),u&&u.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&u&&u.detectBufferingProxy||!1,this.ja=void 0,u&&u.longPollingTimeout&&0<u.longPollingTimeout&&(this.ja=u.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ew.prototype,n.la=8,n.G=1,n.connect=function(u,f,m,y){xt(0),this.W=u,this.H=f||{},m&&y!==void 0&&(this.H.OSID=m,this.H.OAID=y),this.F=this.X,this.I=lw(this,null,this.W),Vc(this)};function Gd(u){if(tw(u),u.G==3){var f=u.U++,m=Wn(u.I);if(Oe(m,"SID",u.K),Oe(m,"RID",f),Oe(m,"TYPE","terminate"),Do(u,m),f=new pi(u,u.j,f),f.L=2,f.v=kc(Wn(m)),m=!1,a.navigator&&a.navigator.sendBeacon)try{m=a.navigator.sendBeacon(f.v.toString(),"")}catch{}!m&&a.Image&&(new Image().src=f.v,m=!0),m||(f.g=uw(f.j,null),f.g.ea(f.v)),f.F=Date.now(),Dc(f)}cw(u)}function Nc(u){u.g&&(Yd(u),u.g.cancel(),u.g=null)}function tw(u){Nc(u),u.u&&(a.clearTimeout(u.u),u.u=null),Lc(u),u.h.cancel(),u.s&&(typeof u.s=="number"&&a.clearTimeout(u.s),u.s=null)}function Vc(u){if(!Vv(u.h)&&!u.s){u.s=!0;var f=u.Ga;Te||jn(),at||(Te(),at=!0),Ge.add(f,u),u.B=0}}function tD(u,f){return Lv(u.h)>=u.h.j-(u.s?1:0)?!1:u.s?(u.i=f.D.concat(u.i),!0):u.G==1||u.G==2||u.B>=(u.Va?0:u.Wa)?!1:(u.s=vo(p(u.Ga,u,f),aw(u,u.B)),u.B++,!0)}n.Ga=function(u){if(this.s)if(this.s=null,this.G==1){if(!u){this.U=Math.floor(1e5*Math.random()),u=this.U++;let P=new pi(this,this.j,u),M=this.o;if(this.S&&(M?(M=v(M),x(M,this.S)):M=this.S),this.m!==null||this.O||(P.H=M,M=null),this.P)e:{for(var f=0,m=0;m<this.i.length;m++){t:{var y=this.i[m];if("__data__"in y.map&&(y=y.map.__data__,typeof y=="string")){y=y.length;break t}y=void 0}if(y===void 0)break;if(f+=y,4096<f){f=m;break e}if(f===4096||m===this.i.length-1){f=m+1;break e}}f=1e3}else f=1e3;f=iw(this,P,f),m=Wn(this.I),Oe(m,"RID",u),Oe(m,"CVER",22),this.D&&Oe(m,"X-HTTP-Session-Id",this.D),Do(this,m),M&&(this.O?f="headers="+encodeURIComponent(String(Kv(M)))+"&"+f:this.m&&Hd(m,this.m,M)),$d(this.h,P),this.Ua&&Oe(m,"TYPE","init"),this.P?(Oe(m,"$req",f),Oe(m,"SID","null"),P.T=!0,jd(P,m,null)):jd(P,m,f),this.G=2}}else this.G==3&&(u?nw(this,u):this.i.length==0||Vv(this.h)||nw(this))};function nw(u,f){var m;f?m=f.l:m=u.U++;let y=Wn(u.I);Oe(y,"SID",u.K),Oe(y,"RID",m),Oe(y,"AID",u.T),Do(u,y),u.m&&u.o&&Hd(y,u.m,u.o),m=new pi(u,u.j,m,u.B+1),u.m===null&&(m.H=u.o),f&&(u.i=f.D.concat(u.i)),f=iw(u,m,1e3),m.I=Math.round(.5*u.wa)+Math.round(.5*u.wa*Math.random()),$d(u.h,m),jd(m,y,f)}function Do(u,f){u.H&&N(u.H,function(m,y){Oe(f,y,m)}),u.l&&Bv({},function(m,y){Oe(f,y,m)})}function iw(u,f,m){m=Math.min(u.i.length,m);var y=u.l?p(u.l.Na,u.l,u):null;e:{var P=u.i;let M=-1;for(;;){let z=["count="+m];M==-1?0<m?(M=P[0].g,z.push("ofs="+M)):M=0:z.push("ofs="+M);let Se=!0;for(let ct=0;ct<m;ct++){let me=P[ct].g,_t=P[ct].map;if(me-=M,0>me)M=Math.max(0,P[ct].g-100),Se=!1;else try{XC(_t,z,"req"+me+"_")}catch{y&&y(_t)}}if(Se){y=z.join("&");break e}}}return u=u.i.splice(0,m),f.D=u,y}function rw(u){if(!u.g&&!u.u){u.Y=1;var f=u.Fa;Te||jn(),at||(Te(),at=!0),Ge.add(f,u),u.v=0}}function Kd(u){return u.g||u.u||3<=u.v?!1:(u.Y++,u.u=vo(p(u.Fa,u),aw(u,u.v)),u.v++,!0)}n.Fa=function(){if(this.u=null,sw(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var u=2*this.R;this.j.info("BP detection timer enabled: "+u),this.A=vo(p(this.ab,this),u)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),Nc(this),sw(this))};function Yd(u){u.A!=null&&(a.clearTimeout(u.A),u.A=null)}function sw(u){u.g=new pi(u,u.j,"rpc",u.Y),u.m===null&&(u.g.H=u.o),u.g.O=0;var f=Wn(u.qa);Oe(f,"RID","rpc"),Oe(f,"SID",u.K),Oe(f,"AID",u.T),Oe(f,"CI",u.F?"0":"1"),!u.F&&u.ja&&Oe(f,"TO",u.ja),Oe(f,"TYPE","xmlhttp"),Do(u,f),u.m&&u.o&&Hd(f,u.m,u.o),u.L&&(u.g.I=u.L);var m=u.g;u=u.ia,m.L=1,m.v=kc(Wn(f)),m.m=null,m.P=!0,kv(m,u)}n.Za=function(){this.C!=null&&(this.C=null,Nc(this),Kd(this),xt(19))};function Lc(u){u.C!=null&&(a.clearTimeout(u.C),u.C=null)}function ow(u,f){var m=null;if(u.g==f){Lc(u),Yd(u),u.g=null;var y=2}else if(Wd(u.h,f))m=f.D,Fv(u.h,f),y=1;else return;if(u.G!=0){if(f.o)if(y==1){m=f.m?f.m.length:0,f=Date.now()-f.F;var P=u.B;y=xc(),St(y,new Cv(y,m)),Vc(u)}else rw(u);else if(P=f.s,P==3||P==0&&0<f.X||!(y==1&&tD(u,f)||y==2&&Kd(u)))switch(m&&0<m.length&&(f=u.h,f.i=f.i.concat(m)),P){case 1:Ji(u,5);break;case 4:Ji(u,10);break;case 3:Ji(u,6);break;default:Ji(u,2)}}}function aw(u,f){let m=u.Ta+Math.floor(Math.random()*u.cb);return u.isActive()||(m*=2),m*f}function Ji(u,f){if(u.j.info("Error code "+f),f==2){var m=p(u.fb,u),y=u.Xa;let P=!y;y=new Xi(y||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Rc(y,"https"),kc(y),P?KC(y.toString(),m):YC(y.toString(),m)}else xt(2);u.G=0,u.l&&u.l.sa(f),cw(u),tw(u)}n.fb=function(u){u?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function cw(u){if(u.G=0,u.ka=[],u.l){let f=Uv(u.h);(f.length!=0||u.i.length!=0)&&(w(u.ka,f),w(u.ka,u.i),u.h.i.length=0,_(u.i),u.i.length=0),u.l.ra()}}function lw(u,f,m){var y=m instanceof Xi?Wn(m):new Xi(m);if(y.g!="")f&&(y.g=f+"."+y.g),Pc(y,y.s);else{var P=a.location;y=P.protocol,f=f?f+"."+P.hostname:P.hostname,P=+P.port;var M=new Xi(null);y&&Rc(M,y),f&&(M.g=f),P&&Pc(M,P),m&&(M.l=m),y=M}return m=u.D,f=u.ya,m&&f&&Oe(y,m,f),Oe(y,"VER",u.la),Do(u,y),y}function uw(u,f,m){if(f&&!u.J)throw Error("Can't create secondary domain capable XhrIo object.");return f=u.Ca&&!u.pa?new je(new So({eb:m})):new je(u.pa),f.Ha(u.J),f}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function hw(){}n=hw.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Fc(){}Fc.prototype.g=function(u,f){return new Bt(u,f)};function Bt(u,f){yt.call(this),this.g=new ew(f),this.l=u,this.h=f&&f.messageUrlParams||null,u=f&&f.messageHeaders||null,f&&f.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=f&&f.initMessageHeaders||null,f&&f.messageContentType&&(u?u["X-WebChannel-Content-Type"]=f.messageContentType:u={"X-WebChannel-Content-Type":f.messageContentType}),f&&f.va&&(u?u["X-WebChannel-Client-Profile"]=f.va:u={"X-WebChannel-Client-Profile":f.va}),this.g.S=u,(u=f&&f.Sb)&&!R(u)&&(this.g.m=u),this.v=f&&f.supportsCrossDomainXhr||!1,this.u=f&&f.sendRawJson||!1,(f=f&&f.httpSessionIdParam)&&!R(f)&&(this.g.D=f,u=this.h,u!==null&&f in u&&(u=this.h,f in u&&delete u[f])),this.j=new jr(this)}b(Bt,yt),Bt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Bt.prototype.close=function(){Gd(this.g)},Bt.prototype.o=function(u){var f=this.g;if(typeof u=="string"){var m={};m.__data__=u,u=m}else this.u&&(m={},m.__data__=Nd(u),u=m);f.i.push(new FC(f.Ya++,u)),f.G==3&&Vc(f)},Bt.prototype.N=function(){this.g.l=null,delete this.j,Gd(this.g),delete this.g,Bt.aa.N.call(this)};function dw(u){Ld.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var f=u.__sm__;if(f){e:{for(let m in f){u=m;break e}u=void 0}(this.i=u)&&(u=this.i,f=f!==null&&u in f?f[u]:void 0),this.data=f}else this.data=u}b(dw,Ld);function fw(){Fd.call(this),this.status=1}b(fw,Fd);function jr(u){this.g=u}b(jr,hw),jr.prototype.ua=function(){St(this.g,"a")},jr.prototype.ta=function(u){St(this.g,new dw(u))},jr.prototype.sa=function(u){St(this.g,new fw)},jr.prototype.ra=function(){St(this.g,"b")},Fc.prototype.createWebChannel=Fc.prototype.g,Bt.prototype.send=Bt.prototype.o,Bt.prototype.open=Bt.prototype.m,Bt.prototype.close=Bt.prototype.close,fm=Qn.createWebChannelTransport=function(){return new Fc},dm=Qn.getStatEventTarget=function(){return xc()},hm=Qn.Event=Yi,Fl=Qn.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ac.NO_ERROR=0,Ac.TIMEOUT=8,Ac.HTTP_ERROR=6,_a=Qn.ErrorCode=Ac,Dv.COMPLETE="complete",um=Qn.EventType=Dv,Tv.EventType=yo,yo.OPEN="a",yo.CLOSE="b",yo.ERROR="c",yo.MESSAGE="d",yt.prototype.listen=yt.prototype.K,fs=Qn.WebChannel=Tv,lm=Qn.FetchXmlHttpFactory=So,je.prototype.listenOnce=je.prototype.L,je.prototype.getLastError=je.prototype.Ka,je.prototype.getLastErrorCode=je.prototype.Ba,je.prototype.getStatus=je.prototype.Z,je.prototype.getResponseJson=je.prototype.Oa,je.prototype.getResponseText=je.prototype.oa,je.prototype.send=je.prototype.ea,je.prototype.setWithCredentials=je.prototype.Ha,cm=Qn.XhrIo=je}).apply(typeof Ll<"u"?Ll:typeof self<"u"?self:typeof window<"u"?window:{});var xI="@firebase/firestore";var ot=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ot.UNAUTHENTICATED=new ot(null),ot.GOOGLE_CREDENTIALS=new ot("google-credentials-uid"),ot.FIRST_PARTY=new ot("first-party-uid"),ot.MOCK_USER=new ot("mock-user");var Os="10.12.5";var gr=new In("@firebase/firestore");function va(){return gr.logLevel}function K(n,...e){if(gr.logLevel<=ce.DEBUG){let t=e.map(ey);gr.debug(`Firestore (${Os}): ${n}`,...t)}}function Xn(n,...e){if(gr.logLevel<=ce.ERROR){let t=e.map(ey);gr.error(`Firestore (${Os}): ${n}`,...t)}}function bs(n,...e){if(gr.logLevel<=ce.WARN){let t=e.map(ey);gr.warn(`Firestore (${Os}): ${n}`,...t)}}function ey(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function Q(n="Unexpected state"){let e=`FIRESTORE (${Os}) INTERNAL ASSERTION FAILED: `+n;throw Xn(e),new Error(e)}function Ae(n,e){n||Q()}function J(n,e){return n}var L={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},q=class extends ht{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var An=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var ql=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},_m=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ot.UNAUTHENTICATED))}shutdown(){}},vm=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},wm=class{constructor(e){this.t=e,this.currentUser=ot.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=c=>this.i!==i?(i=this.i,t(c)):Promise.resolve(),s=new An;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new An,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let c=s;e.enqueueRetryable(()=>S(this,null,function*(){yield c.promise,yield r(this.currentUser)}))},a=c=>{K("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(c=>a(c)),setTimeout(()=>{if(!this.auth){let c=this.t.getImmediate({optional:!0});c?a(c):(K("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new An)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(K("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(Ae(typeof i.accessToken=="string"),new ql(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new ot(e)}},bm=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=ot.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Im=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new bm(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(ot.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Em=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},Tm=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&K("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,K("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{K("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):K("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Ae(typeof t.token=="string"),this.R=t.token,new Em(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function FO(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Wl=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=FO(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function _e(n,e){return n<e?-1:n>e?1:0}function Is(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var ft=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new q(L.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new q(L.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?_e(this.nanoseconds,e.nanoseconds):_e(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var ne=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new ft(0,0))}static max(){return new n(new ft(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var $l=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&Q(),i===void 0?i=e.length-t:i>e.length-t&&Q(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Le=class n extends $l{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new q(L.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},UO=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Gt=class n extends $l{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return UO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let a=e[r];if(a==="\\"){if(r+1===e.length)throw new q(L.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let c=e[r+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new q(L.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=c,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new q(L.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var Y=class n{constructor(e){this.path=e}static fromPath(e){return new n(Le.fromString(e))}static fromName(e){return new n(Le.fromString(e).popFirst(5))}static empty(){return new n(Le.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Le.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Le.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Le(e.slice()))}};var Sm=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Sm.UNKNOWN_ID=-1;function BO(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=ne.fromTimestamp(i===1e9?new ft(t+1,0):new ft(t,i));return new yr(r,Y.empty(),e)}function jO(n){return new yr(n.readTime,n.key,-1)}var yr=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(ne.min(),Y.empty(),-1)}static max(){return new n(ne.max(),Y.empty(),-1)}};function zO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Y.comparator(n.documentKey,e.documentKey),t!==0?t:_e(n.largestBatchId,e.largestBatchId))}var qO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",xm=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ua(n){return S(this,null,function*(){if(n.code!==L.FAILED_PRECONDITION||n.message!==qO)throw n;K("LocalStore","Unexpectedly lost primary lease")})}var U=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},c=>i(c))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),a=0;for(let c=0;c<s;c++){let l=c;t(e[l]).next(h=>{o[l]=h,++a,a===s&&i(o)},h=>r(h))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function WO(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Ba(n){return n.name==="IndexedDbTransactionError"}var rE=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function _u(n){return n==null}function Sa(n){return n===0&&1/n==-1/0}function $O(n){return typeof n=="number"&&Number.isInteger(n)&&!Sa(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var HO=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],pW=[...HO,"documentOverlays"],GO=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],KO=GO,YO=[...KO,"indexConfiguration","indexState","indexEntries"];var mW=[...YO,"globals"];function AI(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ns(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function sE(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var qe=class n{constructor(e,t){this.comparator=e,this.root=t||Cn.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Cn.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Cn.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ys(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ys(this.root,e,this.comparator,!1)}getReverseIterator(){return new ys(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ys(this.root,e,this.comparator,!0)}},ys=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Cn=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();let e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}};Cn.EMPTY=null,Cn.RED=!0,Cn.BLACK=!1;Cn.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Cn(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var bt=class n{constructor(e){this.comparator=e,this.data=new qe(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Hl(this.data.getIterator())}getIteratorFrom(e){return new Hl(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Hl=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var xn=class n{constructor(e){this.fields=e,e.sort(Gt.comparator)}static empty(){return new n([])}unionWith(e){let t=new bt(Gt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Is(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Gl=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var It=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Gl("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return _e(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};It.EMPTY_BYTE_STRING=new It("");var QO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jn(n){if(Ae(!!n),typeof n=="string"){let e=0,t=QO.exec(n);if(Ae(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ze(n.seconds),nanos:ze(n.nanos)}}function ze(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Pi(n){return typeof n=="string"?It.fromBase64String(n):It.fromUint8Array(n)}function ty(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function ny(n){let e=n.mapValue.fields.__previous_value__;return ty(e)?ny(e):e}function xa(n){let e=Jn(n.mapValue.fields.__local_write_time__.timestampValue);return new ft(e.seconds,e.nanos)}var Am=class{constructor(e,t,i,r,s,o,a,c,l){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=c,this.useFetchStreams=l}},Kl=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ul={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function _r(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?ty(n)?4:oE(n)?9007199254740991:10:Q()}function Pn(n,e){if(n===e)return!0;let t=_r(n);if(t!==_r(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return xa(n).isEqual(xa(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=Jn(r.timestampValue),a=Jn(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Pi(r.bytesValue).isEqual(Pi(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ze(r.geoPointValue.latitude)===ze(s.geoPointValue.latitude)&&ze(r.geoPointValue.longitude)===ze(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ze(r.integerValue)===ze(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=ze(r.doubleValue),a=ze(s.doubleValue);return o===a?Sa(o)===Sa(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Is(n.arrayValue.values||[],e.arrayValue.values||[],Pn);case 10:return function(r,s){let o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(AI(o)!==AI(a))return!1;for(let c in o)if(o.hasOwnProperty(c)&&(a[c]===void 0||!Pn(o[c],a[c])))return!1;return!0}(n,e);default:return Q()}}function Aa(n,e){return(n.values||[]).find(t=>Pn(t,e))!==void 0}function Es(n,e){if(n===e)return 0;let t=_r(n),i=_r(e);if(t!==i)return _e(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return _e(n.booleanValue,e.booleanValue);case 2:return function(s,o){let a=ze(s.integerValue||s.doubleValue),c=ze(o.integerValue||o.doubleValue);return a<c?-1:a>c?1:a===c?0:isNaN(a)?isNaN(c)?0:-1:1}(n,e);case 3:return CI(n.timestampValue,e.timestampValue);case 4:return CI(xa(n),xa(e));case 5:return _e(n.stringValue,e.stringValue);case 6:return function(s,o){let a=Pi(s),c=Pi(o);return a.compareTo(c)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let a=s.split("/"),c=o.split("/");for(let l=0;l<a.length&&l<c.length;l++){let h=_e(a[l],c[l]);if(h!==0)return h}return _e(a.length,c.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let a=_e(ze(s.latitude),ze(o.latitude));return a!==0?a:_e(ze(s.longitude),ze(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let a=s.values||[],c=o.values||[];for(let l=0;l<a.length&&l<c.length;++l){let h=Es(a[l],c[l]);if(h)return h}return _e(a.length,c.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ul.mapValue&&o===Ul.mapValue)return 0;if(s===Ul.mapValue)return 1;if(o===Ul.mapValue)return-1;let a=s.fields||{},c=Object.keys(a),l=o.fields||{},h=Object.keys(l);c.sort(),h.sort();for(let d=0;d<c.length&&d<h.length;++d){let p=_e(c[d],h[d]);if(p!==0)return p;let g=Es(a[c[d]],l[h[d]]);if(g!==0)return g}return _e(c.length,h.length)}(n.mapValue,e.mapValue);default:throw Q()}}function CI(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return _e(n,e);let t=Jn(n),i=Jn(e),r=_e(t.seconds,i.seconds);return r!==0?r:_e(t.nanos,i.nanos)}function Ts(n){return Cm(n)}function Cm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=Jn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Pi(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Y.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Cm(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Cm(t.fields[o])}`;return r+"}"}(n.mapValue):Q()}function DI(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Dm(n){return!!n&&"integerValue"in n}function iy(n){return!!n&&"arrayValue"in n}function RI(n){return!!n&&"nullValue"in n}function PI(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jl(n){return!!n&&"mapValue"in n}function ba(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return Ns(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=ba(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=ba(n.arrayValue.values[t]);return e}return Object.assign({},n)}function oE(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var un=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!jl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=ba(t)}setAll(e){let t=Gt.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){let c=this.getFieldsMap(t);this.applyChanges(c,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=ba(o):r.push(a.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());jl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Pn(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];jl(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Ns(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(ba(this.value))}};function aE(n){let e=[];return Ns(n.fields,(t,i)=>{let r=new Gt([t]);if(jl(i)){let s=aE(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new xn(e)}var hn=class n{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new n(e,0,ne.min(),ne.min(),ne.min(),un.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,ne.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,ne.min(),ne.min(),un.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,ne.min(),ne.min(),un.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ne.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ne.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Ss=class{constructor(e,t){this.position=e,this.inclusive=t}};function kI(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Y.comparator(Y.fromName(o.referenceValue),t.key):i=Es(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function MI(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Pn(n.position[t],e.position[t]))return!1;return!0}var xs=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function XO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Yl=class{},Qe=class n extends Yl{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Pm(e,t,i):t==="array-contains"?new Om(e,i):t==="in"?new Nm(e,i):t==="not-in"?new Vm(e,i):t==="array-contains-any"?new Lm(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new km(e,i):new Mm(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Es(t,this.value)):t!==null&&_r(this.value)===_r(t)&&this.matchesComparison(Es(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},dn=class n extends Yl{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return cE(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function cE(n){return n.op==="and"}function lE(n){return JO(n)&&cE(n)}function JO(n){for(let e of n.filters)if(e instanceof dn)return!1;return!0}function Rm(n){if(n instanceof Qe)return n.field.canonicalString()+n.op.toString()+Ts(n.value);if(lE(n))return n.filters.map(e=>Rm(e)).join(",");{let e=n.filters.map(t=>Rm(t)).join(",");return`${n.op}(${e})`}}function uE(n,e){return n instanceof Qe?function(i,r){return r instanceof Qe&&i.op===r.op&&i.field.isEqual(r.field)&&Pn(i.value,r.value)}(n,e):n instanceof dn?function(i,r){return r instanceof dn&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&uE(o,r.filters[a]),!0):!1}(n,e):void Q()}function hE(n){return n instanceof Qe?function(t){return`${t.field.canonicalString()} ${t.op} ${Ts(t.value)}`}(n):n instanceof dn?function(t){return t.op.toString()+" {"+t.getFilters().map(hE).join(" ,")+"}"}(n):"Filter"}var Pm=class extends Qe{constructor(e,t,i){super(e,t,i),this.key=Y.fromName(i.referenceValue)}matches(e){let t=Y.comparator(e.key,this.key);return this.matchesComparison(t)}},km=class extends Qe{constructor(e,t){super(e,"in",t),this.keys=dE("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Mm=class extends Qe{constructor(e,t){super(e,"not-in",t),this.keys=dE("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function dE(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Y.fromName(i.referenceValue))}var Om=class extends Qe{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return iy(t)&&Aa(t.arrayValue,this.value)}},Nm=class extends Qe{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Aa(this.value.arrayValue,t)}},Vm=class extends Qe{constructor(e,t){super(e,"not-in",t)}matches(e){if(Aa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Aa(this.value.arrayValue,t)}},Lm=class extends Qe{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!iy(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Aa(this.value.arrayValue,i))}};var Fm=class{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}};function OI(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Fm(n,e,t,i,r,s,o)}function ry(n){let e=J(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Rm(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),_u(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Ts(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Ts(i)).join(",")),e.ue=t}return e.ue}function sy(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!XO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!uE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!MI(n.startAt,e.startAt)&&MI(n.endAt,e.endAt)}function Um(n){return Y.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var vr=class{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,c=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function ZO(n,e,t,i,r,s,o,a){return new vr(n,e,t,i,r,s,o,a)}function fE(n){return new vr(n)}function NI(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function pE(n){return n.collectionGroup!==null}function Ia(n){let e=J(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new bt(Gt.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new xs(s,i))}),t.has(Gt.keyField().canonicalString())||e.ce.push(new xs(Gt.keyField(),i))}return e.ce}function Dn(n){let e=J(n);return e.le||(e.le=e1(e,Ia(n))),e.le}function e1(n,e){if(n.limitType==="F")return OI(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new xs(r.field,s)});let t=n.endAt?new Ss(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Ss(n.startAt.position,n.startAt.inclusive):null;return OI(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function Bm(n,e){let t=n.filters.concat([e]);return new vr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function jm(n,e,t){return new vr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function vu(n,e){return sy(Dn(n),Dn(e))&&n.limitType===e.limitType}function mE(n){return`${ry(Dn(n))}|lt:${n.limitType}`}function ps(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>hE(r)).join(", ")}]`),_u(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Ts(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Ts(r)).join(",")),`Target(${i})`}(Dn(n))}; limitType=${n.limitType})`}function wu(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Y.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of Ia(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,c){let l=kI(o,a,c);return o.inclusive?l<=0:l<0}(i.startAt,Ia(i),r)||i.endAt&&!function(o,a,c){let l=kI(o,a,c);return o.inclusive?l>=0:l>0}(i.endAt,Ia(i),r))}(n,e)}function t1(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function gE(n){return(e,t)=>{let i=!1;for(let r of Ia(n)){let s=n1(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function n1(n,e,t){let i=n.field.isKeyField()?Y.comparator(e.key,t.key):function(s,o,a){let c=o.data.field(s),l=a.data.field(s);return c!==null&&l!==null?Es(c,l):Q()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Q()}}var ki=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Ns(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return sE(this.inner)}size(){return this.innerSize}};var i1=new qe(Y.comparator);function Zn(){return i1}var yE=new qe(Y.comparator);function wa(...n){let e=yE;for(let t of n)e=e.insert(t.key,t);return e}function _E(n){let e=yE;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function fr(){return Ea()}function vE(){return Ea()}function Ea(){return new ki(n=>n.toString(),(n,e)=>n.isEqual(e))}var r1=new qe(Y.comparator),s1=new bt(Y.comparator);function le(...n){let e=s1;for(let t of n)e=e.add(t);return e}var o1=new bt(_e);function a1(){return o1}function wE(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sa(e)?"-0":e}}function bE(n){return{integerValue:""+n}}function c1(n,e){return $O(e)?bE(e):wE(n,e)}var As=class{constructor(){this._=void 0}};function l1(n,e,t){return n instanceof Cs?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&ty(s)&&(s=ny(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof wr?EE(n,e):n instanceof br?TE(n,e):function(r,s){let o=IE(r,s),a=VI(o)+VI(r.Pe);return Dm(o)&&Dm(r.Pe)?bE(a):wE(r.serializer,a)}(n,e)}function u1(n,e,t){return n instanceof wr?EE(n,e):n instanceof br?TE(n,e):t}function IE(n,e){return n instanceof Ds?function(i){return Dm(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var Cs=class extends As{},wr=class extends As{constructor(e){super(),this.elements=e}};function EE(n,e){let t=SE(e);for(let i of n.elements)t.some(r=>Pn(r,i))||t.push(i);return{arrayValue:{values:t}}}var br=class extends As{constructor(e){super(),this.elements=e}};function TE(n,e){let t=SE(e);for(let i of n.elements)t=t.filter(r=>!Pn(r,i));return{arrayValue:{values:t}}}var Ds=class extends As{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function VI(n){return ze(n.integerValue||n.doubleValue)}function SE(n){return iy(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function h1(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof wr&&r instanceof wr||i instanceof br&&r instanceof br?Is(i.elements,r.elements,Pn):i instanceof Ds&&r instanceof Ds?Pn(i.Pe,r.Pe):i instanceof Cs&&r instanceof Cs}(n.transform,e.transform)}var zm=class{constructor(e,t){this.version=e,this.transformResults=t}},mr=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function zl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Rs=class{};function xE(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ql(n.key,mr.none()):new Ir(n.key,n.data,mr.none());{let t=n.data,i=un.empty(),r=new bt(Gt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new ei(n.key,i,new xn(r.toArray()),mr.none())}}function d1(n,e,t){n instanceof Ir?function(r,s,o){let a=r.value.clone(),c=FI(r.fieldTransforms,s,o.transformResults);a.setAll(c),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof ei?function(r,s,o){if(!zl(r.precondition,s))return void s.convertToUnknownDocument(o.version);let a=FI(r.fieldTransforms,s,o.transformResults),c=s.data;c.setAll(AE(r)),c.setAll(a),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Ta(n,e,t,i){return n instanceof Ir?function(s,o,a,c){if(!zl(s.precondition,o))return a;let l=s.value.clone(),h=UI(s.fieldTransforms,c,o);return l.setAll(h),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(n,e,t,i):n instanceof ei?function(s,o,a,c){if(!zl(s.precondition,o))return a;let l=UI(s.fieldTransforms,c,o),h=o.data;return h.setAll(AE(s)),h.setAll(l),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(n,e,t,i):function(s,o,a){return zl(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function f1(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=IE(i.transform,r||null);s!=null&&(t===null&&(t=un.empty()),t.set(i.field,s))}return t||null}function LI(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Is(i,r,(s,o)=>h1(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var Ir=class extends Rs{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},ei=class extends Rs{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function AE(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function FI(n,e,t){let i=new Map;Ae(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,u1(o,a,t[r]))}return i}function UI(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,l1(s,o,e))}return i}var Ql=class extends Rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},qm=class extends Rs{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var Wm=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&d1(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=Ta(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=Ta(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=vE();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;let c=xE(o,a);c!==null&&i.set(r.key,c),o.isValidDocument()||o.convertToNoDocument(ne.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),le())}isEqual(e){return this.batchId===e.batchId&&Is(this.mutations,e.mutations,(t,i)=>LI(t,i))&&Is(this.baseMutations,e.baseMutations,(t,i)=>LI(t,i))}},$m=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){Ae(e.mutations.length===i.length);let r=function(){return r1}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var Hm=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Gm=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var Ke,de;function p1(n){switch(n){default:return Q();case L.CANCELLED:case L.UNKNOWN:case L.DEADLINE_EXCEEDED:case L.RESOURCE_EXHAUSTED:case L.INTERNAL:case L.UNAVAILABLE:case L.UNAUTHENTICATED:return!1;case L.INVALID_ARGUMENT:case L.NOT_FOUND:case L.ALREADY_EXISTS:case L.PERMISSION_DENIED:case L.FAILED_PRECONDITION:case L.ABORTED:case L.OUT_OF_RANGE:case L.UNIMPLEMENTED:case L.DATA_LOSS:return!0}}function CE(n){if(n===void 0)return Xn("GRPC error has no .code"),L.UNKNOWN;switch(n){case Ke.OK:return L.OK;case Ke.CANCELLED:return L.CANCELLED;case Ke.UNKNOWN:return L.UNKNOWN;case Ke.DEADLINE_EXCEEDED:return L.DEADLINE_EXCEEDED;case Ke.RESOURCE_EXHAUSTED:return L.RESOURCE_EXHAUSTED;case Ke.INTERNAL:return L.INTERNAL;case Ke.UNAVAILABLE:return L.UNAVAILABLE;case Ke.UNAUTHENTICATED:return L.UNAUTHENTICATED;case Ke.INVALID_ARGUMENT:return L.INVALID_ARGUMENT;case Ke.NOT_FOUND:return L.NOT_FOUND;case Ke.ALREADY_EXISTS:return L.ALREADY_EXISTS;case Ke.PERMISSION_DENIED:return L.PERMISSION_DENIED;case Ke.FAILED_PRECONDITION:return L.FAILED_PRECONDITION;case Ke.ABORTED:return L.ABORTED;case Ke.OUT_OF_RANGE:return L.OUT_OF_RANGE;case Ke.UNIMPLEMENTED:return L.UNIMPLEMENTED;case Ke.DATA_LOSS:return L.DATA_LOSS;default:return Q()}}(de=Ke||(Ke={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";var BI=null;function m1(){return new TextEncoder}var g1=new Di([4294967295,4294967295],0);function jI(n){let e=m1().encode(n),t=new am;return t.update(e),new Uint8Array(t.digest())}function zI(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Di([t,i],0),new Di([r,s],0)]}var Km=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new pr(`Invalid padding: ${t}`);if(i<0)throw new pr(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new pr(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new pr(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Di.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Di.fromNumber(i)));return r.compare(g1)===1&&(r=new Di([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=jI(e),[i,r]=zI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;let t=jI(e),[i,r]=zI(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},pr=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Xl=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Ca.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(ne.min(),r,new qe(_e),Zn(),le())}},Ca=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,le(),le(),le())}};var vs=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Jl=class{constructor(e,t){this.targetId=e,this.me=t}},Zl=class{constructor(e,t,i=It.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},eu=class{constructor(){this.fe=0,this.ge=WI(),this.pe=It.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=le(),t=le(),i=le();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Q()}}),new Ca(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=WI()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,Ae(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},Ym=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=Zn(),this.qe=qI(),this.Qe=new qe(_e)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(Um(s))if(i===0){let o=new Y(s.path);this.Ue(t,o,hn.newNoDocument(o,ne.min()))}else Ae(i===1);else{let o=this.Ye(t);if(o!==i){let a=this.Ze(e),c=a?this.Xe(a,e,o):1;if(c!==0){this.je(t);let l=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,l)}BI?.et(function(h,d,p,g,b){var _,w,D,R,k,V;let O={localCacheCount:h,existenceFilterCount:d.count,databaseId:p.database,projectId:p.projectId},N=d.unchangedNames;return N&&(O.bloomFilter={applied:b===0,hashCount:(_=N?.hashCount)!==null&&_!==void 0?_:0,bitmapLength:(R=(D=(w=N?.bits)===null||w===void 0?void 0:w.bitmap)===null||D===void 0?void 0:D.length)!==null&&R!==void 0?R:0,padding:(V=(k=N?.bits)===null||k===void 0?void 0:k.padding)!==null&&V!==void 0?V:0,mightContain:E=>{var v;return(v=g?.mightContain(E))!==null&&v!==void 0&&v}}),O}(o,e.me,this.Le.tt(),a,c))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,a;try{o=Pi(i).toUint8Array()}catch(c){if(c instanceof Gl)return bs("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{a=new Km(o,r,s)}catch(c){return bs(c instanceof pr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return a.Ie===0?null:a}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let a=this.Je(o);if(a){if(s.current&&Um(a.target)){let c=new Y(a.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,hn.newNoDocument(c,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let i=le();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(c=>{let l=this.Je(c);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new Xl(e,t,this.Qe,this.ke,i);return this.ke=Zn(),this.qe=qI(),this.Qe=new qe(_e),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new eu,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new bt(_e),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||K("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new eu),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function qI(){return new qe(Y.comparator)}function WI(){return new qe(Y.comparator)}var y1={asc:"ASCENDING",desc:"DESCENDING"},_1={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v1={and:"AND",or:"OR"},Qm=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function Xm(n,e){return n.useProto3Json||_u(e)?e:{value:e}}function tu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DE(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function w1(n,e){return tu(n,e.toTimestamp())}function Rn(n){return Ae(!!n),ne.fromTimestamp(function(t){let i=Jn(t);return new ft(i.seconds,i.nanos)}(n))}function oy(n,e){return Jm(n,e).canonicalString()}function Jm(n,e){let t=function(r){return new Le(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function RE(n){let e=Le.fromString(n);return Ae(NE(e)),e}function Zm(n,e){return oy(n.databaseId,e.path)}function pm(n,e){let t=RE(e);if(t.get(1)!==n.databaseId.projectId)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new q(L.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Y(kE(t))}function PE(n,e){return oy(n.databaseId,e)}function b1(n){let e=RE(n);return e.length===4?Le.emptyPath():kE(e)}function eg(n){return new Le(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function kE(n){return Ae(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function $I(n,e,t){return{name:Zm(n,e),fields:t.value.mapValue.fields}}function I1(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(l,h){return l.useProto3Json?(Ae(h===void 0||typeof h=="string"),It.fromBase64String(h||"")):(Ae(h===void 0||h instanceof Buffer||h instanceof Uint8Array),It.fromUint8Array(h||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(l){let h=l.code===void 0?L.UNKNOWN:CE(l.code);return new q(h,l.message||"")}(o);t=new Zl(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=pm(n,i.document.name),s=Rn(i.document.updateTime),o=i.document.createTime?Rn(i.document.createTime):ne.min(),a=new un({mapValue:{fields:i.document.fields}}),c=hn.newFoundDocument(r,s,o,a),l=i.targetIds||[],h=i.removedTargetIds||[];t=new vs(l,h,c.key,c)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=pm(n,i.document),s=i.readTime?Rn(i.readTime):ne.min(),o=hn.newNoDocument(r,s),a=i.removedTargetIds||[];t=new vs([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=pm(n,i.document),s=i.removedTargetIds||[];t=new vs([],s,r,null)}else{if(!("filter"in e))return Q();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new Gm(r,s),a=i.targetId;t=new Jl(a,o)}}return t}function E1(n,e){let t;if(e instanceof Ir)t={update:$I(n,e.key,e.value)};else if(e instanceof Ql)t={delete:Zm(n,e.key)};else if(e instanceof ei)t={update:$I(n,e.key,e.data),updateMask:k1(e.fieldMask)};else{if(!(e instanceof qm))return Q();t={verify:Zm(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let a=o.transform;if(a instanceof Cs)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof wr)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof br)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Ds)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Q()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:w1(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Q()}(n,e.precondition)),t}function T1(n,e){return n&&n.length>0?(Ae(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Rn(r.updateTime):Rn(s);return o.isEqual(ne.min())&&(o=Rn(s)),new zm(o,r.transformResults||[])}(t,e))):[]}function S1(n,e){return{documents:[PE(n,e.path)]}}function x1(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=PE(n,r);let s=function(l){if(l.length!==0)return OE(dn.create(l,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(l){if(l.length!==0)return l.map(h=>function(p){return{field:ms(p.field),direction:D1(p.dir)}}(h))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let a=Xm(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(e.endAt)),{_t:t,parent:r}}function A1(n){let e=b1(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){Ae(i===1);let h=t.from[0];h.allDescendants?r=h.collectionId:e=e.child(h.collectionId)}let s=[];t.where&&(s=function(d){let p=ME(d);return p instanceof dn&&lE(p)?p.getFilters():[p]}(t.where));let o=[];t.orderBy&&(o=function(d){return d.map(p=>function(b){return new xs(gs(b.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(p))}(t.orderBy));let a=null;t.limit&&(a=function(d){let p;return p=typeof d=="object"?d.value:d,_u(p)?null:p}(t.limit));let c=null;t.startAt&&(c=function(d){let p=!!d.before,g=d.values||[];return new Ss(g,p)}(t.startAt));let l=null;return t.endAt&&(l=function(d){let p=!d.before,g=d.values||[];return new Ss(g,p)}(t.endAt)),ZO(e,r,o,s,a,"F",c,l)}function C1(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function ME(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=gs(t.unaryFilter.field);return Qe.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=gs(t.unaryFilter.field);return Qe.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=gs(t.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=gs(t.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(n):n.fieldFilter!==void 0?function(t){return Qe.create(gs(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return dn.create(t.compositeFilter.filters.map(i=>ME(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Q()}}(t.compositeFilter.op))}(n):Q()}function D1(n){return y1[n]}function R1(n){return _1[n]}function P1(n){return v1[n]}function ms(n){return{fieldPath:n.canonicalString()}}function gs(n){return Gt.fromServerFormat(n.fieldPath)}function OE(n){return n instanceof Qe?function(t){if(t.op==="=="){if(PI(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NAN"}};if(RI(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(PI(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NAN"}};if(RI(t.value))return{unaryFilter:{field:ms(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ms(t.field),op:R1(t.op),value:t.value}}}(n):n instanceof dn?function(t){let i=t.getFilters().map(r=>OE(r));return i.length===1?i[0]:{compositeFilter:{op:P1(t.op),filters:i}}}(n):Q()}function k1(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function NE(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Da=class n{constructor(e,t,i,r,s=ne.min(),o=ne.min(),a=It.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=c}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var tg=class{constructor(e){this.ct=e}};function M1(n){let e=A1({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?jm(e,e.limit,"L"):e}var nu=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ze(e.integerValue));else if("doubleValue"in e){let i=ze(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Sa(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=Jn(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Pi(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?oE(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):Q()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}St(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),Y.fromName(e).path.forEach(i=>{this.dt(t,60),this.bt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};nu.Dt=new nu;var ng=class{constructor(){this.an=new ig}addToCollectionParentIndex(e,t){return this.an.add(t),U.resolve()}getCollectionParents(e,t){return U.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return U.resolve()}deleteFieldIndex(e,t){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,t){return U.resolve()}getDocumentsMatchingTarget(e,t){return U.resolve(null)}getIndexType(e,t){return U.resolve(0)}getFieldIndexes(e,t){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,t){return U.resolve(yr.min())}getMinOffsetFromCollectionGroup(e,t){return U.resolve(yr.min())}updateCollectionGroup(e,t,i){return U.resolve()}updateIndexEntries(e,t){return U.resolve()}},ig=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new bt(Le.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new bt(Le.comparator)).toArray()}};var yW=new Uint8Array(0);var Sn=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};Sn.DEFAULT_COLLECTION_PERCENTILE=10,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Sn.DEFAULT=new Sn(41943040,Sn.DEFAULT_COLLECTION_PERCENTILE,Sn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Sn.DISABLED=new Sn(-1,0,0);var Ra=class n{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new n(0)}static Bn(){return new n(-1)}};var rg=class{constructor(){this.changes=new ki(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,hn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?U.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var sg=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var og=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Ta(i.mutation,r,xn.empty(),ft.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,le()).next(()=>i))}getLocalViewOfDocuments(e,t,i=le()){let r=fr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=wa();return s.forEach((a,c)=>{o=o.insert(a,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=fr();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,le()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=Zn(),o=Ea(),a=function(){return Ea()}();return t.forEach((c,l)=>{let h=i.get(l.key);r.has(l.key)&&(h===void 0||h.mutation instanceof ei)?s=s.insert(l.key,l):h!==void 0?(o.set(l.key,h.mutation.getFieldMask()),Ta(h.mutation,l,h.mutation.getFieldMask(),ft.now())):o.set(l.key,xn.empty())}),this.recalculateAndSaveOverlays(e,s).next(c=>(c.forEach((l,h)=>o.set(l,h)),t.forEach((l,h)=>{var d;return a.set(l,new sg(h,(d=o.get(l))!==null&&d!==void 0?d:null))}),a))}recalculateAndSaveOverlays(e,t){let i=Ea(),r=new qe((o,a)=>o-a),s=le();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let a of o)a.keys().forEach(c=>{let l=t.get(c);if(l===null)return;let h=i.get(c)||xn.empty();h=a.applyToLocalView(l,h),i.set(c,h);let d=(r.get(a.batchId)||le()).add(c);r=r.insert(a.batchId,d)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let c=a.getNext(),l=c.key,h=c.value,d=vE();h.forEach(p=>{if(!s.has(p)){let g=xE(t.get(p),i.get(p));g!==null&&d.set(p,g),s=s.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,l,d))}return U.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return Y.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):pE(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):U.resolve(fr()),a=-1,c=s;return o.next(l=>U.forEach(l,(h,d)=>(a<d.largestBatchId&&(a=d.largestBatchId),s.get(h)?U.resolve():this.remoteDocumentCache.getEntry(e,h).next(p=>{c=c.insert(h,p)}))).next(()=>this.populateOverlays(e,l,s)).next(()=>this.computeViews(e,c,l,le())).next(h=>({batchId:a,changes:_E(h)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Y(t)).next(i=>{let r=wa();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=wa();return this.indexManager.getCollectionParents(e,s).next(a=>U.forEach(a,c=>{let l=function(d,p){return new vr(p,null,d.explicitOrderBy.slice(),d.filters.slice(),d.limit,d.limitType,d.startAt,d.endAt)}(t,c.child(s));return this.getDocumentsMatchingCollectionQuery(e,l,i,r).next(h=>{h.forEach((d,p)=>{o=o.insert(d,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((c,l)=>{let h=l.getKey();o.get(h)===null&&(o=o.insert(h,hn.newInvalidDocument(h)))});let a=wa();return o.forEach((c,l)=>{let h=s.get(c);h!==void 0&&Ta(h.mutation,l,xn.empty(),ft.now()),wu(t,l)&&(a=a.insert(c,l))}),a})}};var ag=class{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return U.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Rn(r.createTime)}}(t)),U.resolve()}getNamedQuery(e,t){return U.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,function(r){return{name:r.name,query:M1(r.bundledQuery),readTime:Rn(r.readTime)}}(t)),U.resolve()}};var cg=class{constructor(){this.overlays=new qe(Y.comparator),this.Pr=new Map}getOverlay(e,t){return U.resolve(this.overlays.get(t))}getOverlays(e,t){let i=fr();return U.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),U.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Pr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(i)),U.resolve()}getOverlaysForCollection(e,t,i){let r=fr(),s=t.length+1,o=new Y(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,l=c.getKey();if(!t.isPrefixOf(l.path))break;l.path.length===s&&c.largestBatchId>i&&r.set(c.getKey(),c)}return U.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new qe((l,h)=>l-h),o=this.overlays.getIterator();for(;o.hasNext();){let l=o.getNext().value;if(l.getKey().getCollectionGroup()===t&&l.largestBatchId>i){let h=s.get(l.largestBatchId);h===null&&(h=fr(),s=s.insert(l.largestBatchId,h)),h.set(l.getKey(),l)}}let a=fr(),c=s.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((l,h)=>a.set(l,h)),!(a.size()>=r)););return U.resolve(a)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Pr.get(r.largestBatchId).delete(i.key);this.Pr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Hm(t,i));let s=this.Pr.get(t);s===void 0&&(s=le(),this.Pr.set(t,s)),this.Pr.set(t,s.add(i.key))}};var lg=class{constructor(){this.sessionToken=It.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,U.resolve()}};var Pa=class{constructor(){this.Ir=new bt(Ye.Tr),this.Er=new bt(Ye.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){let i=new Ye(e,t);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Rr(new Ye(e,t))}Vr(e,t){e.forEach(i=>this.removeReference(i,t))}mr(e){let t=new Y(new Le([])),i=new Ye(t,e),r=new Ye(t,e+1),s=[];return this.Er.forEachInRange([i,r],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){let t=new Y(new Le([])),i=new Ye(t,e),r=new Ye(t,e+1),s=le();return this.Er.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new Ye(e,0),i=this.Ir.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},Ye=class{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return Y.comparator(e.key,t.key)||_e(e.yr,t.yr)}static dr(e,t){return _e(e.yr,t.yr)||Y.comparator(e.key,t.key)}};var ug=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new bt(Ye.Tr)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new Wm(s,t,i,r);this.mutationQueue.push(o);for(let a of r)this.Sr=this.Sr.add(new Ye(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,t){return U.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Dr(i),s=r<0?0:r;return U.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new Ye(t,0),r=new Ye(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([i,r],o=>{let a=this.br(o.yr);s.push(a)}),U.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new bt(_e);return t.forEach(r=>{let s=new Ye(r,0),o=new Ye(r,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],a=>{i=i.add(a.yr)})}),U.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;Y.isDocumentKey(s)||(s=s.child(""));let o=new Ye(new Y(s),0),a=new bt(_e);return this.Sr.forEachWhile(c=>{let l=c.key.path;return!!i.isPrefixOf(l)&&(l.length===r&&(a=a.add(c.yr)),!0)},o),U.resolve(this.Cr(a))}Cr(e){let t=[];return e.forEach(i=>{let r=this.br(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){Ae(this.vr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return U.forEach(t.mutations,r=>{let s=new Ye(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Sr=i})}xn(e){}containsKey(e,t){let i=new Ye(t,0),r=this.Sr.firstAfterOrEqual(i);return U.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){let t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var hg=class{constructor(e){this.Fr=e,this.docs=function(){return new qe(Y.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Fr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return U.resolve(i?i.document.mutableCopy():hn.newInvalidDocument(t))}getEntries(e,t){let i=Zn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():hn.newInvalidDocument(r))}),U.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=Zn(),o=t.path,a=new Y(o.child("")),c=this.docs.getIteratorFrom(a);for(;c.hasNext();){let{key:l,value:{document:h}}=c.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||zO(jO(h),i)<=0||(r.has(h.key)||wu(t,h))&&(s=s.insert(h.key,h.mutableCopy()))}return U.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Q()}Mr(e,t){return U.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new dg(this)}getSize(e){return U.resolve(this.size)}},dg=class extends rg{constructor(e){super(),this.ur=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.ur.addEntry(e,r)):this.ur.removeEntry(i)}),U.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}};var fg=class{constructor(e){this.persistence=e,this.Or=new ki(t=>ry(t),sy),this.lastRemoteSnapshotVersion=ne.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Pa,this.targetCount=0,this.Br=Ra.Ln()}forEachTarget(e,t){return this.Or.forEach((i,r)=>t(r)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Nr&&(this.Nr=t),U.resolve()}Qn(e){this.Or.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Br=new Ra(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,U.resolve()}updateTargetData(e,t){return this.Qn(t),U.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Or.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),U.waitFor(s).next(()=>r)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,t){let i=this.Or.get(t)||null;return U.resolve(i)}addMatchingKeys(e,t,i){return this.Lr.Ar(t,i),U.resolve()}removeMatchingKeys(e,t,i){this.Lr.Vr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),U.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),U.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Lr.pr(t);return U.resolve(i)}containsKey(e,t){return U.resolve(this.Lr.containsKey(t))}};var pg=class{constructor(e,t){this.kr={},this.overlays={},this.qr=new rE(0),this.Qr=!1,this.Qr=!0,this.Kr=new lg,this.referenceDelegate=e(this),this.$r=new fg(this),this.indexManager=new ng,this.remoteDocumentCache=function(r){return new hg(r)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new tg(t),this.Wr=new ag(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cg,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.kr[e.toKey()];return i||(i=new ug(t,this.referenceDelegate),this.kr[e.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,i){K("MemoryPersistence","Starting transaction:",e);let r=new mg(this.qr.next());return this.referenceDelegate.Gr(),i(r).next(s=>this.referenceDelegate.zr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}jr(e,t){return U.or(Object.values(this.kr).map(i=>()=>i.containsKey(e,t)))}},mg=class extends xm{constructor(e){super(),this.currentSequenceNumber=e}},gg=class n{constructor(e){this.persistence=e,this.Hr=new Pa,this.Jr=null}static Yr(e){return new n(e)}get Zr(){if(this.Jr)return this.Jr;throw Q()}addReference(e,t,i){return this.Hr.addReference(i,t),this.Zr.delete(i.toString()),U.resolve()}removeReference(e,t,i){return this.Hr.removeReference(i,t),this.Zr.add(i.toString()),U.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),U.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(r=>this.Zr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Zr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Zr,i=>{let r=Y.fromPath(i);return this.Xr(e,r).next(s=>{s||t.removeEntry(r,ne.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(i=>{i?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return U.or([()=>U.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}};var yg=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ki=i,this.$i=r}static Ui(e,t){let i=le(),r=le();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var _g=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var vg=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return R0()?8:WO(Je())>0?6:4}()}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new _g;return this.Zi(e,t,o).next(a=>{if(s.result=a,this.Gi)return this.Xi(e,t,o,a.size)})}).next(()=>s.result)}Xi(e,t,i,r){return i.documentReadCount<this.zi?(va()<=ce.DEBUG&&K("QueryEngine","SDK will not create cache indexes for query:",ps(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),U.resolve()):(va()<=ce.DEBUG&&K("QueryEngine","Query:",ps(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ji*r?(va()<=ce.DEBUG&&K("QueryEngine","The SDK decides to create cache indexes for query:",ps(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Dn(t))):U.resolve())}Ji(e,t){if(NI(t))return U.resolve(null);let i=Dn(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=jm(t,null,"F"),i=Dn(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=le(...s);return this.Hi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(c=>{let l=this.es(t,a);return this.ts(t,l,o,c.readTime)?this.Ji(e,jm(t,null,"F")):this.ns(e,l,t,c)}))})))}Yi(e,t,i,r){return NI(t)||r.isEqual(ne.min())?U.resolve(null):this.Hi.getDocuments(e,i).next(s=>{let o=this.es(t,s);return this.ts(t,o,i,r)?U.resolve(null):(va()<=ce.DEBUG&&K("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ps(t)),this.ns(e,o,t,BO(r,-1)).next(a=>a))})}es(e,t){let i=new bt(gE(e));return t.forEach((r,s)=>{wu(e,s)&&(i=i.add(s))}),i}ts(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Zi(e,t,i){return va()<=ce.DEBUG&&K("QueryEngine","Using full collection scan to execute query:",ps(t)),this.Hi.getDocumentsMatchingQuery(e,t,yr.min(),i)}ns(e,t,i,r){return this.Hi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var wg=class{constructor(e,t,i,r){this.persistence=e,this.rs=t,this.serializer=r,this.ss=new qe(_e),this.os=new ki(s=>ry(s),sy),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(i)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new og(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}};function O1(n,e,t,i){return new wg(n,e,t,i)}function VE(n,e){return S(this,null,function*(){let t=J(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.cs(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],a=[],c=le();for(let l of r){o.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}for(let l of s){a.push(l.batchId);for(let h of l.mutations)c=c.add(h.key)}return t.localDocuments.getDocuments(i,c).next(l=>({ls:l,removedBatchIds:o,addedBatchIds:a}))})})})}function N1(n,e){let t=J(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.us.newChangeBuffer({trackRemovals:!0});return function(a,c,l,h){let d=l.batch,p=d.keys(),g=U.resolve();return p.forEach(b=>{g=g.next(()=>h.getEntry(c,b)).next(_=>{let w=l.docVersions.get(b);Ae(w!==null),_.version.compareTo(w)<0&&(d.applyToRemoteDocument(_,l),_.isValidDocument()&&(_.setReadTime(l.commitVersion),h.addEntry(_)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(c,d))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let c=le();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(c=c.add(a.batch.mutations[l].key));return c}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function LE(n){let e=J(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function V1(n,e){let t=J(n),i=e.snapshotVersion,r=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.us.newChangeBuffer({trackRemovals:!0});r=t.ss;let a=[];e.targetChanges.forEach((h,d)=>{let p=r.get(d);if(!p)return;a.push(t.$r.removeMatchingKeys(s,h.removedDocuments,d).next(()=>t.$r.addMatchingKeys(s,h.addedDocuments,d)));let g=p.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(It.EMPTY_BYTE_STRING,ne.min()).withLastLimboFreeSnapshotVersion(ne.min()):h.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(h.resumeToken,i)),r=r.insert(d,g),function(_,w,D){return _.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-_.snapshotVersion.toMicroseconds()>=3e8?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0}(p,g,h)&&a.push(t.$r.updateTargetData(s,g))});let c=Zn(),l=le();if(e.documentUpdates.forEach(h=>{e.resolvedLimboDocuments.has(h)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,h))}),a.push(L1(s,o,e.documentUpdates).next(h=>{c=h.hs,l=h.Ps})),!i.isEqual(ne.min())){let h=t.$r.getLastRemoteSnapshotVersion(s).next(d=>t.$r.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(h)}return U.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,c,l)).next(()=>c)}).then(s=>(t.ss=r,s))}function L1(n,e,t){let i=le(),r=le();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=Zn();return t.forEach((a,c)=>{let l=s.get(a);c.isFoundDocument()!==l.isFoundDocument()&&(r=r.add(a)),c.isNoDocument()&&c.version.isEqual(ne.min())?(e.removeEntry(a,c.readTime),o=o.insert(a,c)):!l.isValidDocument()||c.version.compareTo(l.version)>0||c.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(c),o=o.insert(a,c)):K("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",c.version)}),{hs:o,Ps:r}})}function F1(n,e){let t=J(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function U1(n,e){let t=J(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.$r.getTargetData(i,e).next(s=>s?(r=s,U.resolve(r)):t.$r.allocateTargetId(i).next(o=>(r=new Da(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.$r.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ss=t.ss.insert(i.targetId,i),t.os.set(e,i.targetId)),i})}function bg(n,e,t){return S(this,null,function*(){let i=J(n),r=i.ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Ba(o))throw o;K("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ss=i.ss.remove(e),i.os.delete(r.target)})}function HI(n,e,t){let i=J(n),r=ne.min(),s=le();return i.persistence.runTransaction("Execute query","readwrite",o=>function(c,l,h){let d=J(c),p=d.os.get(h);return p!==void 0?U.resolve(d.ss.get(p)):d.$r.getTargetData(l,h)}(i,o,Dn(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(o,a.targetId).next(c=>{s=c})}).next(()=>i.rs.getDocumentsMatchingQuery(o,e,t?r:ne.min(),t?s:le())).next(a=>(B1(i,t1(e),a),{documents:a,Is:s})))}function B1(n,e,t){let i=n._s.get(e)||ne.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n._s.set(e,i)}var iu=class{constructor(){this.activeTargetIds=a1()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Ig=class{constructor(){this.io=new iu,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,i){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new iu,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Eg=class{oo(e){}shutdown(){}};var ru=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){K("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.lo)e(0)}co(){K("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Bl=null;function mm(){return Bl===null?Bl=function(){return 268435456+Math.round(2147483648*Math.random())}():Bl++,"0x"+Bl.toString(16)}var j1={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Tg=class{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}};var wt="WebChannelConnection",Sg=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+t.host,this.Do=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get vo(){return!1}Fo(t,i,r,s,o){let a=mm(),c=this.Mo(t,i.toUriEncodedString());K("RestConnection",`Sending RPC '${t}' ${a}:`,c,r);let l={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(l,s,o),this.Oo(t,c,l,r).then(h=>(K("RestConnection",`Received RPC '${t}' ${a}: `,h),h),h=>{throw bs("RestConnection",`RPC '${t}' ${a} failed with error: `,h,"url: ",c,"request:",r),h})}No(t,i,r,s,o,a){return this.Fo(t,i,r,s,o)}xo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Os}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}Mo(t,i){let r=j1[t];return`${this.bo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,i,r){let s=mm();return new Promise((o,a)=>{let c=new cm;c.setWithCredentials(!0),c.listenOnce(um.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case _a.NO_ERROR:let h=c.getResponseJson();K(wt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(h)),o(h);break;case _a.TIMEOUT:K(wt,`RPC '${e}' ${s} timed out`),a(new q(L.DEADLINE_EXCEEDED,"Request time out"));break;case _a.HTTP_ERROR:let d=c.getStatus();if(K(wt,`RPC '${e}' ${s} failed with status:`,d,"response text:",c.getResponseText()),d>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);let g=p?.error;if(g&&g.status&&g.message){let b=function(w){let D=w.toLowerCase().replace(/_/g,"-");return Object.values(L).indexOf(D)>=0?D:L.UNKNOWN}(g.status);a(new q(b,g.message))}else a(new q(L.UNKNOWN,"Server responded with status "+c.getStatus()))}else a(new q(L.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{K(wt,`RPC '${e}' ${s} completed.`)}});let l=JSON.stringify(r);K(wt,`RPC '${e}' ${s} sending request:`,r),c.send(t,"POST",l,i,15)})}Lo(e,t,i){let r=mm(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=fm(),a=dm(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(c.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(c.xmlHttpFactory=new lm({})),this.xo(c.initMessageHeaders,t,i),c.encodeInitMessageHeaders=!0;let h=s.join("");K(wt,`Creating RPC '${e}' stream ${r}: ${h}`,c);let d=o.createWebChannel(h,c),p=!1,g=!1,b=new Tg({Po:w=>{g?K(wt,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(p||(K(wt,`Opening RPC '${e}' stream ${r} transport.`),d.open(),p=!0),K(wt,`RPC '${e}' stream ${r} sending:`,w),d.send(w))},Io:()=>d.close()}),_=(w,D,R)=>{w.listen(D,k=>{try{R(k)}catch(V){setTimeout(()=>{throw V},0)}})};return _(d,fs.EventType.OPEN,()=>{g||(K(wt,`RPC '${e}' stream ${r} transport opened.`),b.po())}),_(d,fs.EventType.CLOSE,()=>{g||(g=!0,K(wt,`RPC '${e}' stream ${r} transport closed`),b.wo())}),_(d,fs.EventType.ERROR,w=>{g||(g=!0,bs(wt,`RPC '${e}' stream ${r} transport errored:`,w),b.wo(new q(L.UNAVAILABLE,"The operation could not be completed")))}),_(d,fs.EventType.MESSAGE,w=>{var D;if(!g){let R=w.data[0];Ae(!!R);let k=R,V=k.error||((D=k[0])===null||D===void 0?void 0:D.error);if(V){K(wt,`RPC '${e}' stream ${r} received error:`,V);let O=V.status,N=function(I){let x=Ke[I];if(x!==void 0)return CE(x)}(O),E=V.message;N===void 0&&(N=L.INTERNAL,E="Unknown error status: "+O+" with message "+V.message),g=!0,b.wo(new q(N,E)),d.close()}else K(wt,`RPC '${e}' stream ${r} received:`,R),b.So(R)}}),_(a,hm.STAT_EVENT,w=>{w.stat===Fl.PROXY?K(wt,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Fl.NOPROXY&&K(wt,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{b.yo()},0),b}};function gm(){return typeof document<"u"?document:null}function bu(n){return new Qm(n,!0)}var su=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ai=e,this.timerId=t,this.Bo=i,this.ko=r,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();let t=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),r=Math.max(0,t-i);r>0&&K("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var ou=class{constructor(e,t,i,r,s,o,a,c){this.ai=e,this.jo=i,this.Ho=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=c,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new su(e,t)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return S(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){return S(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){return S(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():t&&t.code===L.RESOURCE_EXHAUSTED?(Xn(t.toString()),Xn("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):t&&t.code===L.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Vo(t)})}c_(){}auth(){this.state=1;let e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Jo===t&&this.h_(i,r)},i=>{e(()=>{let r=new q(L.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(r)})})}h_(e,t){let i=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(r=>{i(()=>this.P_(r))}),this.stream.onMessage(r=>{i(()=>++this.Xo==1?this.T_(r):this.onNext(r))})}r_(){this.state=5,this.e_.Wo(()=>S(this,null,function*(){this.state=0,this.start()}))}P_(e){return K("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(K("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},xg=class extends ou{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();let t=I1(this.serializer,e),i=function(s){if(!("targetChange"in s))return ne.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?ne.min():o.readTime?Rn(o.readTime):ne.min()}(e);return this.listener.E_(t,i)}d_(e){let t={};t.database=eg(this.serializer),t.addTarget=function(s,o){let a,c=o.target;if(a=Um(c)?{documents:S1(s,c)}:{query:x1(s,c)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DE(s,o.resumeToken);let l=Xm(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(ne.min())>0){a.readTime=tu(s,o.snapshotVersion.toTimestamp());let l=Xm(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,e);let i=C1(this.serializer,e);i&&(t.labels=i),this.__(t)}A_(e){let t={};t.database=eg(this.serializer),t.removeTarget=e,this.__(t)}},Ag=class extends ou{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();let t=T1(e.writeResults,e.commitTime),i=Rn(e.commitTime);return this.listener.f_(i,t)}g_(){let e={};e.database=eg(this.serializer),this.__(e)}V_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>E1(this.serializer,i))};this.__(t)}};var Cg=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,Jm(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new q(L.UNKNOWN,s.toString())})}No(e,t,i,r,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.No(e,Jm(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===L.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new q(L.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},Dg=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(Xn(t),this.b_=!1):K("OnlineStateTracker",t)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var Rg=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{i.enqueueAndForget(()=>S(this,null,function*(){Er(this)&&(K("RemoteStore","Restarting streams for network reachability change."),yield function(c){return S(this,null,function*(){let l=J(c);l.N_.add(4),yield ja(l),l.k_.set("Unknown"),l.N_.delete(4),yield Iu(l)})}(this))}))}),this.k_=new Dg(i,r)}};function Iu(n){return S(this,null,function*(){if(Er(n))for(let e of n.L_)yield e(!0)})}function ja(n){return S(this,null,function*(){for(let e of n.L_)yield e(!1)})}function FE(n,e){let t=J(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),uy(t)?ly(t):Vs(t).n_()&&cy(t,e))}function ay(n,e){let t=J(n),i=Vs(t);t.O_.delete(e),i.n_()&&UE(t,e),t.O_.size===0&&(i.n_()?i.s_():Er(t)&&t.k_.set("Unknown"))}function cy(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ne.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Vs(n).d_(e)}function UE(n,e){n.q_.xe(e),Vs(n).A_(e)}function ly(n){n.q_=new Ym({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),Vs(n).start(),n.k_.D_()}function uy(n){return Er(n)&&!Vs(n).t_()&&n.O_.size>0}function Er(n){return J(n).N_.size===0}function BE(n){n.q_=void 0}function z1(n){return S(this,null,function*(){n.k_.set("Online")})}function q1(n){return S(this,null,function*(){n.O_.forEach((e,t)=>{cy(n,e)})})}function W1(n,e){return S(this,null,function*(){BE(n),uy(n)?(n.k_.F_(e),ly(n)):n.k_.set("Unknown")})}function $1(n,e,t){return S(this,null,function*(){if(n.k_.set("Online"),e instanceof Zl&&e.state===2&&e.cause)try{yield function(r,s){return S(this,null,function*(){let o=s.cause;for(let a of s.targetIds)r.O_.has(a)&&(yield r.remoteSyncer.rejectListen(a,o),r.O_.delete(a),r.q_.removeTarget(a))})}(n,e)}catch(i){K("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield au(n,i)}else if(e instanceof vs?n.q_.Ke(e):e instanceof Jl?n.q_.He(e):n.q_.We(e),!t.isEqual(ne.min()))try{let i=yield LE(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let a=s.q_.rt(o);return a.targetChanges.forEach((c,l)=>{if(c.resumeToken.approximateByteSize()>0){let h=s.O_.get(l);h&&s.O_.set(l,h.withResumeToken(c.resumeToken,o))}}),a.targetMismatches.forEach((c,l)=>{let h=s.O_.get(c);if(!h)return;s.O_.set(c,h.withResumeToken(It.EMPTY_BYTE_STRING,h.snapshotVersion)),UE(s,c);let d=new Da(h.target,c,l,h.sequenceNumber);cy(s,d)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t))}catch(i){K("RemoteStore","Failed to raise snapshot:",i),yield au(n,i)}})}function au(n,e,t){return S(this,null,function*(){if(!Ba(e))throw e;n.N_.add(1),yield ja(n),n.k_.set("Offline"),t||(t=()=>LE(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){K("RemoteStore","Retrying IndexedDB access"),yield t(),n.N_.delete(1),yield Iu(n)}))})}function jE(n,e){return e().catch(t=>au(n,t,e))}function Eu(n){return S(this,null,function*(){let e=J(n),t=Mi(e),i=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;H1(e);)try{let r=yield F1(e.localStore,i);if(r===null){e.x_.length===0&&t.s_();break}i=r.batchId,G1(e,r)}catch(r){yield au(e,r)}zE(e)&&qE(e)})}function H1(n){return Er(n)&&n.x_.length<10}function G1(n,e){n.x_.push(e);let t=Mi(n);t.n_()&&t.R_&&t.V_(e.mutations)}function zE(n){return Er(n)&&!Mi(n).t_()&&n.x_.length>0}function qE(n){Mi(n).start()}function K1(n){return S(this,null,function*(){Mi(n).g_()})}function Y1(n){return S(this,null,function*(){let e=Mi(n);for(let t of n.x_)e.V_(t.mutations)})}function Q1(n,e,t){return S(this,null,function*(){let i=n.x_.shift(),r=$m.from(i,e,t);yield jE(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield Eu(n)})}function X1(n,e){return S(this,null,function*(){e&&Mi(n).R_&&(yield function(i,r){return S(this,null,function*(){if(function(o){return p1(o)&&o!==L.ABORTED}(r.code)){let s=i.x_.shift();Mi(i).i_(),yield jE(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield Eu(i)}})}(n,e)),zE(n)&&qE(n)})}function GI(n,e){return S(this,null,function*(){let t=J(n);t.asyncQueue.verifyOperationInProgress(),K("RemoteStore","RemoteStore received new credentials");let i=Er(t);t.N_.add(3),yield ja(t),i&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield Iu(t)})}function J1(n,e){return S(this,null,function*(){let t=J(n);e?(t.N_.delete(2),yield Iu(t)):e||(t.N_.add(2),yield ja(t),t.k_.set("Unknown"))})}function Vs(n){return n.Q_||(n.Q_=function(t,i,r){let s=J(t);return s.y_(),new xg(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:z1.bind(null,n),Ao:q1.bind(null,n),Vo:W1.bind(null,n),E_:$1.bind(null,n)}),n.L_.push(e=>S(this,null,function*(){e?(n.Q_.i_(),uy(n)?ly(n):n.k_.set("Unknown")):(yield n.Q_.stop(),BE(n))}))),n.Q_}function Mi(n){return n.K_||(n.K_=function(t,i,r){let s=J(t);return s.y_(),new Ag(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:K1.bind(null,n),Vo:X1.bind(null,n),m_:Y1.bind(null,n),f_:Q1.bind(null,n)}),n.L_.push(e=>S(this,null,function*(){e?(n.K_.i_(),yield Eu(n)):(yield n.K_.stop(),n.x_.length>0&&(K("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))}))),n.K_}var Pg=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,a=new n(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new q(L.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function hy(n,e){if(Xn("AsyncQueue",`${e}: ${n}`),Ba(n))return new q(L.UNAVAILABLE,`${e}: ${n}`);throw n}var cu=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||Y.comparator(t.key,i.key):(t,i)=>Y.comparator(t.key,i.key),this.keyedMap=wa(),this.sortedSet=new qe(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var lu=class{constructor(){this.U_=new qe(Y.comparator)}track(e){let t=e.doc.key,i=this.U_.get(t);i?e.type!==0&&i.type===3?this.U_=this.U_.insert(t,e):e.type===3&&i.type!==1?this.U_=this.U_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.U_=this.U_.remove(t):e.type===1&&i.type===2?this.U_=this.U_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):Q():this.U_=this.U_.insert(t,e)}W_(){let e=[];return this.U_.inorderTraversal((t,i)=>{e.push(i)}),e}},Ps=class n{constructor(e,t,i,r,s,o,a,c,l){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=c,this.hasCachedResults=l}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new n(e,t,cu.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&vu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var kg=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}},Mg=class{constructor(){this.queries=KI(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(t,i){let r=J(t),s=r.queries;r.queries=KI(),s.forEach((o,a)=>{for(let c of a.z_)c.onError(i)})})(this,new q(L.ABORTED,"Firestore shutting down"))}};function KI(){return new ki(n=>mE(n),vu)}function Z1(n,e){return S(this,null,function*(){let t=J(n),i=3,r=e.query,s=t.queries.get(r);s?!s.j_()&&e.H_()&&(i=2):(s=new kg,i=e.H_()?0:1);try{switch(i){case 0:s.G_=yield t.onListen(r,!0);break;case 1:s.G_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let a=hy(o,`Initialization of query '${ps(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.z_.push(e),e.Y_(t.onlineState),s.G_&&e.Z_(s.G_)&&dy(t)})}function eN(n,e){return S(this,null,function*(){let t=J(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?r=e.H_()?0:1:!s.j_()&&e.H_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function tN(n,e){let t=J(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let a of o.z_)a.Z_(r)&&(i=!0);o.G_=r}}i&&dy(t)}function nN(n,e,t){let i=J(n),r=i.queries.get(e);if(r)for(let s of r.z_)s.onError(t);i.queries.delete(e)}function dy(n){n.J_.forEach(e=>{e.next()})}var Og,YI;(YI=Og||(Og={})).X_="default",YI.Cache="cache";var Ng=class{constructor(e,t,i){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new Ps(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){if(!e.fromCache||!this.H_())return!0;let i=t!=="Offline";return(!this.options.oa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ra(e){if(e.docChanges.length>0)return!0;let t=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}sa(e){e=Ps.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Og.Cache}};var uu=class{constructor(e){this.key=e}},hu=class{constructor(e){this.key=e}},Vg=class{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=le(),this.mutatedKeys=le(),this.da=gE(e),this.Aa=new cu(this.da)}get Ra(){return this.Ia}Va(e,t){let i=t?t.ma:new lu,r=t?t.Aa:this.Aa,s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1,c=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,l=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((h,d)=>{let p=r.get(h),g=wu(this.query,d)?d:null,b=!!p&&this.mutatedKeys.has(p.key),_=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations),w=!1;p&&g?p.data.isEqual(g.data)?b!==_&&(i.track({type:3,doc:g}),w=!0):this.fa(p,g)||(i.track({type:2,doc:g}),w=!0,(c&&this.da(g,c)>0||l&&this.da(g,l)<0)&&(a=!0)):!p&&g?(i.track({type:0,doc:g}),w=!0):p&&!g&&(i.track({type:1,doc:p}),w=!0,(c||l)&&(a=!0)),w&&(g?(o=o.add(g),s=_?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),i.track({type:1,doc:h})}return{Aa:o,ma:i,ts:a,mutatedKeys:s}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;let o=e.ma.W_();o.sort((h,d)=>function(g,b){let _=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return _(g)-_(b)}(h.type,d.type)||this.da(h.doc,d.doc)),this.ga(i),r=r!=null&&r;let a=t&&!r?this.pa():[],c=this.Ea.size===0&&this.current&&!r?1:0,l=c!==this.Ta;return this.Ta=c,o.length!==0||l?{snapshot:new Ps(this.query,e.Aa,s,o,e.mutatedKeys,c===0,l,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:a}:{ya:a}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new lu,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];let e=this.Ea;this.Ea=le(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});let t=[];return e.forEach(i=>{this.Ea.has(i)||t.push(new hu(i))}),this.Ea.forEach(i=>{e.has(i)||t.push(new uu(i))}),t}Sa(e){this.Ia=e.Is,this.Ea=le();let t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return Ps.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},Lg=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},Fg=class{constructor(e){this.key=e,this.Da=!1}},Ug=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new ki(a=>mE(a),vu),this.Fa=new Map,this.Ma=new Set,this.xa=new qe(Y.comparator),this.Oa=new Map,this.Na=new Pa,this.La={},this.Ba=new Map,this.ka=Ra.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function iN(n,e,t=!0){return S(this,null,function*(){let i=YE(n),r,s=i.va.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ba()):r=yield WE(i,e,t,!0),r})}function rN(n,e){return S(this,null,function*(){let t=YE(n);yield WE(t,e,!0,!1)})}function WE(n,e,t,i){return S(this,null,function*(){let r=yield U1(n.localStore,Dn(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",a;return i&&(a=yield sN(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&FE(n.remoteStore,r),a})}function sN(n,e,t,i,r){return S(this,null,function*(){n.Qa=(d,p,g)=>function(_,w,D,R){return S(this,null,function*(){let k=w.view.Va(D);k.ts&&(k=yield HI(_.localStore,w.query,!1).then(({documents:E})=>w.view.Va(E,k)));let V=R&&R.targetChanges.get(w.targetId),O=R&&R.targetMismatches.get(w.targetId)!=null,N=w.view.applyChanges(k,_.isPrimaryClient,V,O);return XI(_,w.targetId,N.ya),N.snapshot})}(n,d,p,g);let s=yield HI(n.localStore,e,!0),o=new Vg(e,s.Is),a=o.Va(s.documents),c=Ca.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),l=o.applyChanges(a,n.isPrimaryClient,c);XI(n,t,l.ya);let h=new Lg(e,t,o);return n.va.set(e,h),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),l.snapshot})}function oN(n,e,t){return S(this,null,function*(){let i=J(n),r=i.va.get(e),s=i.Fa.get(r.targetId);if(s.length>1)return i.Fa.set(r.targetId,s.filter(o=>!vu(o,e))),void i.va.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield bg(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&ay(i.remoteStore,r.targetId),Bg(i,r.targetId)}).catch(Ua))):(Bg(i,r.targetId),yield bg(i.localStore,r.targetId,!0))})}function aN(n,e){return S(this,null,function*(){let t=J(n),i=t.va.get(e),r=t.Fa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),ay(t.remoteStore,i.targetId))})}function cN(n,e,t){return S(this,null,function*(){let i=mN(n);try{let r=yield function(o,a){let c=J(o),l=ft.now(),h=a.reduce((g,b)=>g.add(b.key),le()),d,p;return c.persistence.runTransaction("Locally write mutations","readwrite",g=>{let b=Zn(),_=le();return c.us.getEntries(g,h).next(w=>{b=w,b.forEach((D,R)=>{R.isValidDocument()||(_=_.add(D))})}).next(()=>c.localDocuments.getOverlayedDocuments(g,b)).next(w=>{d=w;let D=[];for(let R of a){let k=f1(R,d.get(R.key).overlayedDocument);k!=null&&D.push(new ei(R.key,k,aE(k.value.mapValue),mr.exists(!0)))}return c.mutationQueue.addMutationBatch(g,l,D,a)}).next(w=>{p=w;let D=w.applyToLocalDocumentSet(d,_);return c.documentOverlayCache.saveOverlays(g,w.batchId,D)})}).then(()=>({batchId:p.batchId,changes:_E(d)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,c){let l=o.La[o.currentUser.toKey()];l||(l=new qe(_e)),l=l.insert(a,c),o.La[o.currentUser.toKey()]=l}(i,r.batchId,t),yield za(i,r.changes),yield Eu(i.remoteStore)}catch(r){let s=hy(r,"Failed to persist write");t.reject(s)}})}function $E(n,e){return S(this,null,function*(){let t=J(n);try{let i=yield V1(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Oa.get(s);o&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Da=!0:r.modifiedDocuments.size>0?Ae(o.Da):r.removedDocuments.size>0&&(Ae(o.Da),o.Da=!1))}),yield za(t,i,e)}catch(i){yield Ua(i)}})}function QI(n,e,t){let i=J(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.va.forEach((s,o)=>{let a=o.view.Y_(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){let c=J(o);c.onlineState=a;let l=!1;c.queries.forEach((h,d)=>{for(let p of d.z_)p.Y_(a)&&(l=!0)}),l&&dy(c)}(i.eventManager,e),r.length&&i.Ca.E_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function lN(n,e,t){return S(this,null,function*(){let i=J(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Oa.get(e),s=r&&r.key;if(s){let o=new qe(Y.comparator);o=o.insert(s,hn.newNoDocument(s,ne.min()));let a=le().add(s),c=new Xl(ne.min(),new Map,new qe(_e),o,a);yield $E(i,c),i.xa=i.xa.remove(s),i.Oa.delete(e),fy(i)}else yield bg(i.localStore,e,!1).then(()=>Bg(i,e,t)).catch(Ua)})}function uN(n,e){return S(this,null,function*(){let t=J(n),i=e.batch.batchId;try{let r=yield N1(t.localStore,e);GE(t,i,null),HE(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield za(t,r)}catch(r){yield Ua(r)}})}function hN(n,e,t){return S(this,null,function*(){let i=J(n);try{let r=yield function(o,a){let c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let h;return c.mutationQueue.lookupMutationBatch(l,a).next(d=>(Ae(d!==null),h=d.keys(),c.mutationQueue.removeMutationBatch(l,d))).next(()=>c.mutationQueue.performConsistencyCheck(l)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(l,h,a)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,h)).next(()=>c.localDocuments.getDocuments(l,h))})}(i.localStore,e);GE(i,e,t),HE(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield za(i,r)}catch(r){yield Ua(r)}})}function HE(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function GE(n,e,t){let i=J(n),r=i.La[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.La[i.currentUser.toKey()]=r}}function Bg(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Fa.get(e))n.va.delete(i),t&&n.Ca.Ka(i,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(i=>{n.Na.containsKey(i)||KE(n,i)})}function KE(n,e){n.Ma.delete(e.path.canonicalString());let t=n.xa.get(e);t!==null&&(ay(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),fy(n))}function XI(n,e,t){for(let i of t)i instanceof uu?(n.Na.addReference(i.key,e),dN(n,i)):i instanceof hu?(K("SyncEngine","Document no longer in limbo: "+i.key),n.Na.removeReference(i.key,e),n.Na.containsKey(i.key)||KE(n,i.key)):Q()}function dN(n,e){let t=e.key,i=t.path.canonicalString();n.xa.get(t)||n.Ma.has(i)||(K("SyncEngine","New document in limbo: "+t),n.Ma.add(i),fy(n))}function fy(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){let e=n.Ma.values().next().value;n.Ma.delete(e);let t=new Y(Le.fromString(e)),i=n.ka.next();n.Oa.set(i,new Fg(t)),n.xa=n.xa.insert(t,i),FE(n.remoteStore,new Da(Dn(fE(t.path)),i,"TargetPurposeLimboResolution",rE.oe))}}function za(n,e,t){return S(this,null,function*(){let i=J(n),r=[],s=[],o=[];i.va.isEmpty()||(i.va.forEach((a,c)=>{o.push(i.Qa(c,e,t).then(l=>{var h;if((l||t)&&i.isPrimaryClient){let d=l?!l.fromCache:(h=t?.targetChanges.get(c.targetId))===null||h===void 0?void 0:h.current;i.sharedClientState.updateQueryState(c.targetId,d?"current":"not-current")}if(l){r.push(l);let d=yg.Ui(c.targetId,l);s.push(d)}}))}),yield Promise.all(o),i.Ca.E_(r),yield function(c,l){return S(this,null,function*(){let h=J(c);try{yield h.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>U.forEach(l,p=>U.forEach(p.Ki,g=>h.persistence.referenceDelegate.addReference(d,p.targetId,g)).next(()=>U.forEach(p.$i,g=>h.persistence.referenceDelegate.removeReference(d,p.targetId,g)))))}catch(d){if(!Ba(d))throw d;K("LocalStore","Failed to update sequence numbers: "+d)}for(let d of l){let p=d.targetId;if(!d.fromCache){let g=h.ss.get(p),b=g.snapshotVersion,_=g.withLastLimboFreeSnapshotVersion(b);h.ss=h.ss.insert(p,_)}}})}(i.localStore,s))})}function fN(n,e){return S(this,null,function*(){let t=J(n);if(!t.currentUser.isEqual(e)){K("SyncEngine","User change. New user:",e.toKey());let i=yield VE(t.localStore,e);t.currentUser=e,function(s,o){s.Ba.forEach(a=>{a.forEach(c=>{c.reject(new q(L.CANCELLED,o))})}),s.Ba.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield za(t,i.ls)}})}function pN(n,e){let t=J(n),i=t.Oa.get(e);if(i&&i.Da)return le().add(i.key);{let r=le(),s=t.Fa.get(e);if(!s)return r;for(let o of s){let a=t.va.get(o);r=r.unionWith(a.view.Ra)}return r}}function YE(n){let e=J(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=$E.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=pN.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=lN.bind(null,e),e.Ca.E_=tN.bind(null,e.eventManager),e.Ca.Ka=nN.bind(null,e.eventManager),e}function mN(n){let e=J(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=uN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=hN.bind(null,e),e}var du=class{constructor(){this.synchronizeTabs=!1}initialize(e){return S(this,null,function*(){this.serializer=bu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return O1(this.persistence,new vg,e.initialUser,this.serializer)}createPersistence(e){return new pg(gg.Yr,this.serializer)}createSharedClientState(e){return new Ig}terminate(){return S(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var jg=class{initialize(e,t){return S(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>QI(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fN.bind(null,this.syncEngine),yield J1(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Mg}()}createDatastore(e){let t=bu(e.databaseInfo.databaseId),i=function(s){return new Sg(s)}(e.databaseInfo);return function(s,o,a,c){return new Cg(s,o,a,c)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new Rg(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>QI(this.syncEngine,t,0),function(){return ru.D()?new ru:new Eg}())}createSyncEngine(e,t){return function(r,s,o,a,c,l,h){let d=new Ug(r,s,o,a,c,l);return h&&(d.qa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return S(this,null,function*(){var e,t;yield function(r){return S(this,null,function*(){let s=J(r);K("RemoteStore","RemoteStore shutting down."),s.N_.add(5),yield ja(s),s.B_.shutdown(),s.k_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var zg=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):Xn("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var qg=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=ot.UNAUTHENTICATED,this.clientId=Wl.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>S(this,null,function*(){K("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(K("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new q(L.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=hy(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function ym(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),K("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>S(this,null,function*(){i.isEqual(r)||(yield VE(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function JI(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield yN(n);K("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>GI(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>GI(e.remoteStore,r)),n._onlineComponents=e})}function gN(n){return n.name==="FirebaseError"?n.code===L.FAILED_PRECONDITION||n.code===L.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function yN(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){K("FirestoreClient","Using user provided OfflineComponentProvider");try{yield ym(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!gN(t))throw t;bs("Error using user provided cache. Falling back to memory cache: "+t),yield ym(n,new du)}}else K("FirestoreClient","Using default OfflineComponentProvider"),yield ym(n,new du);return n._offlineComponents})}function QE(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(K("FirestoreClient","Using user provided OnlineComponentProvider"),yield JI(n,n._uninitializedComponentsProvider._online)):(K("FirestoreClient","Using default OnlineComponentProvider"),yield JI(n,new jg))),n._onlineComponents})}function _N(n){return QE(n).then(e=>e.syncEngine)}function vN(n){return S(this,null,function*(){let e=yield QE(n),t=e.eventManager;return t.onListen=iN.bind(null,e.syncEngine),t.onUnlisten=oN.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=rN.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=aN.bind(null,e.syncEngine),t})}function wN(n,e,t={}){let i=new An;return n.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return function(s,o,a,c,l){let h=new zg({next:p=>{o.enqueueAndForget(()=>eN(s,d)),p.fromCache&&c.source==="server"?l.reject(new q(L.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(p)},error:p=>l.reject(p)}),d=new Ng(a,h,{includeMetadataChanges:!0,oa:!0});return Z1(s,d)}(yield vN(n),n.asyncQueue,e,t,i)})),i.promise}function XE(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var ZI=new Map;function JE(n,e,t){if(!t)throw new q(L.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function bN(n,e,t,i){if(e===!0&&i===!0)throw new q(L.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function eE(n){if(!Y.isDocumentKey(n))throw new q(L.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function tE(n){if(Y.isDocumentKey(n))throw new q(L.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Tu(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Q()}function fu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new q(L.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Tu(n);throw new q(L.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var pu=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new q(L.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new q(L.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bN("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=XE((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new q(L.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},ks=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pu({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new q(L.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new q(L.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pu(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new _m;switch(i.type){case"firstParty":return new Im(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new q(L.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=ZI.get(t);i&&(K("ComponentProvider","Removing Datastore"),ZI.delete(t),i.terminate())}(this),Promise.resolve()}};function IN(n,e,t,i={}){var r;let s=(n=fu(n,ks))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&bs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,c;if(typeof i.mockUserToken=="string")a=i.mockUserToken,c=ot.MOCK_USER;else{a=x0(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let l=i.mockUserToken.sub||i.mockUserToken.user_id;if(!l)throw new q(L.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ot(l)}n._authCredentials=new vm(new ql(a,c))}}var Ms=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Xt=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ri(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Ri=class n extends Ms{constructor(e,t,i){super(e,t,fE(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Xt(this.firestore,null,new Y(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function Oi(n,e,...t){if(n=rt(n),JE("collection","path",e),n instanceof ks){let i=Le.fromString(e,...t);return tE(i),new Ri(n,null,i)}{if(!(n instanceof Xt||n instanceof Ri))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Le.fromString(e,...t));return tE(i),new Ri(n.firestore,null,i)}}function EN(n,e,...t){if(n=rt(n),arguments.length===1&&(e=Wl.newId()),JE("doc","path",e),n instanceof ks){let i=Le.fromString(e,...t);return eE(i),new Xt(n,null,new Y(i))}{if(!(n instanceof Xt||n instanceof Ri))throw new q(L.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Le.fromString(e,...t));return eE(i),new Xt(n.firestore,n instanceof Ri?n.converter:null,new Y(i))}}var Wg=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new su(this,"async_queue_retry"),this.Tu=()=>{let t=gm();t&&K("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};let e=gm();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;let t=gm();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});let t=new An;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){return S(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!Ba(e))throw e;K("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(e){let t=this._u.then(()=>(this.hu=!0,e().catch(i=>{this.lu=i,this.hu=!1;let r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw Xn("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.hu=!1,i))));return this._u=t,t}enqueueAfterDelay(e,t,i){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);let r=Pg.createAndSchedule(this,e,t,i,s=>this.Ru(s));return this.cu.push(r),r}Eu(){this.lu&&Q()}verifyOperationInProgress(){}Vu(){return S(this,null,function*(){let e;do e=this._u,yield e;while(e!==this._u)})}mu(e){for(let t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.cu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){let t=this.cu.indexOf(e);this.cu.splice(t,1)}};var ka=class extends ks{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new Wg}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||tT(this),this._firestoreClient.terminate()}};function ZE(n,e){let t=typeof n=="object"?n:lr(),i=typeof n=="string"?n:e||"(default)",r=ln(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=S0("firestore");s&&IN(r,...s)}return r}function eT(n){return n._firestoreClient||tT(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function tT(n){var e,t,i;let r=n._freezeSettings(),s=function(a,c,l,h){return new Am(a,c,l,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,XE(h.experimentalLongPollingOptions),h.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new qg(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Ma=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(It.fromBase64String(e))}catch(t){throw new q(L.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(It.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Oa=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new q(L.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Gt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var mu=class{constructor(e){this._methodName=e}};var Na=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new q(L.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new q(L.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return _e(this._lat,e._lat)||_e(this._long,e._long)}};var TN=/^__.*__$/,$g=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new ei(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ir(e,this.data,t,this.fieldTransforms)}};function nT(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}var Hg=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.wu({path:i,bu:!1});return r.Du(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.wu({path:i,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return gu(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(nT(this.yu)&&TN.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}},Gg=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||bu(e)}Ou(e,t,i,r=!1){return new Hg({yu:e,methodName:t,xu:i,path:Gt.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function iT(n){let e=n._freezeSettings(),t=bu(n._databaseId);return new Gg(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SN(n,e,t,i,r,s={}){let o=n.Ou(s.merge||s.mergeFields?2:0,e,t,r);oT("Data must be an object, but it was:",o,i);let a=rT(i,o),c,l;if(s.merge)c=new xn(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){let h=[];for(let d of s.mergeFields){let p=AN(e,d,t);if(!o.contains(p))throw new q(L.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);DN(h,p)||h.push(p)}c=new xn(h),l=o.fieldTransforms.filter(d=>c.covers(d.field))}else c=null,l=o.fieldTransforms;return new $g(new un(a),c,l)}function xN(n,e,t,i=!1){return py(t,n.Ou(i?4:3,e))}function py(n,e){if(sT(n=rt(n)))return oT("Unsupported field value:",e,n),rT(n,e);if(n instanceof mu)return function(i,r){if(!nT(r.yu))throw r.Fu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let a of i){let c=py(a,r.vu(o));c==null&&(c={nullValue:"NULL_VALUE"}),s.push(c),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=rt(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return c1(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=ft.fromDate(i);return{timestampValue:tu(r.serializer,s)}}if(i instanceof ft){let s=new ft(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:tu(r.serializer,s)}}if(i instanceof Na)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Ma)return{bytesValue:DE(r.serializer,i._byteString)};if(i instanceof Xt){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:oy(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Fu(`Unsupported field value: ${Tu(i)}`)}(n,e)}function rT(n,e){let t={};return sE(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ns(n,(i,r)=>{let s=py(r,e.Su(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function sT(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof ft||n instanceof Na||n instanceof Ma||n instanceof Xt||n instanceof mu)}function oT(n,e,t){if(!sT(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Tu(t);throw i==="an object"?e.Fu(n+" a custom object"):e.Fu(n+" "+i)}}function AN(n,e,t){if((e=rt(e))instanceof Oa)return e._internalPath;if(typeof e=="string")return aT(n,e);throw gu("Field path arguments must be of type string or ",n,!1,void 0,t)}var CN=new RegExp("[~\\*/\\[\\]]");function aT(n,e,t){if(e.search(CN)>=0)throw gu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Oa(...e.split("."))._internalPath}catch{throw gu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function gu(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let c="";return(s||o)&&(c+=" (found",s&&(c+=` in field ${i}`),o&&(c+=` in document ${r}`),c+=")"),new q(L.INVALID_ARGUMENT,a+n+c)}function DN(n,e){return n.some(t=>t.isEqual(e))}var yu=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new Kg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(my("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},Kg=class extends yu{data(){return super.data()}};function my(n,e){return typeof e=="string"?aT(n,e):e instanceof Oa?e._internalPath:e._delegate._internalPath}function RN(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new q(L.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Va=class{},Yg=class extends Va{};function Ls(n,e,...t){let i=[];e instanceof Va&&i.push(e),i=i.concat(t),function(s){let o=s.filter(c=>c instanceof Fa).length,a=s.filter(c=>c instanceof La).length;if(o>1||o>0&&a>0)throw new q(L.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(let r of i)n=r._apply(n);return n}var La=class n extends Yg{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new n(e,t,i)}_apply(e){let t=this._parse(e);return lT(e._query,t),new Ms(e.firestore,e.converter,Bm(e._query,t))}_parse(e){let t=iT(e.firestore);return function(s,o,a,c,l,h,d){let p;if(l.isKeyField()){if(h==="array-contains"||h==="array-contains-any")throw new q(L.INVALID_ARGUMENT,`Invalid Query. You can't perform '${h}' queries on documentId().`);if(h==="in"||h==="not-in"){iE(d,h);let g=[];for(let b of d)g.push(nE(c,s,b));p={arrayValue:{values:g}}}else p=nE(c,s,d)}else h!=="in"&&h!=="not-in"&&h!=="array-contains-any"||iE(d,h),p=xN(a,o,d,h==="in"||h==="not-in");return Qe.create(l,h,p)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}};function Ct(n,e,t){let i=e,r=my("where",n);return La._create(r,i,t)}var Fa=class n extends Va{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new n(e,t)}_parse(e){let t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:dn.create(t,this._getOperator())}_apply(e){let t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r,a=s.getFlattenedFilters();for(let c of a)lT(o,c),o=Bm(o,c)}(e._query,t),new Ms(e.firestore,e.converter,Bm(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};function cT(...n){return n.forEach(e=>PN("and",e)),Fa._create("and",n)}function nE(n,e,t){if(typeof(t=rt(t))=="string"){if(t==="")throw new q(L.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!pE(e)&&t.indexOf("/")!==-1)throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);let i=e.path.child(Le.fromString(t));if(!Y.isDocumentKey(i))throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return DI(n,new Y(i))}if(t instanceof Xt)return DI(n,t._key);throw new q(L.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Tu(t)}.`)}function iE(n,e){if(!Array.isArray(n)||n.length===0)throw new q(L.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lT(n,e){let t=function(r,s){for(let o of r)for(let a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new q(L.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function PN(n,e){if(!(e instanceof La||e instanceof Fa))throw new q(L.INVALID_ARGUMENT,`Function ${n}() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'.`)}var Qg=class{convertValue(e,t="none"){switch(_r(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ze(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Pi(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Q()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return Ns(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new Na(ze(e.latitude),ze(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=ny(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(xa(e));default:return null}}convertTimestamp(e){let t=Jn(e);return new ft(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Le.fromString(e);Ae(NE(i));let r=new Kl(i.get(1),i.get(3)),s=new Y(i.popFirst(5));return r.isEqual(t)||Xn(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function kN(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var _s=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},Xg=class extends yu{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new ws(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(my("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},ws=class extends Xg{data(e={}){return super.data(e)}},Jg=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new _s(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new ws(this._firestore,this._userDataWriter,i.key,i,new _s(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new q(L.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{let c=new ws(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _s(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{let c=new ws(r._firestore,r._userDataWriter,a.doc.key,a.doc,new _s(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter),l=-1,h=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),h=o.indexOf(a.doc.key)),{type:MN(a.type),doc:c,oldIndex:l,newIndex:h}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function MN(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}var Zg=class extends Qg{constructor(e){super(),this.firestore=e}convertBytes(e){return new Ma(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Xt(this.firestore,null,t)}};function Fs(n){n=fu(n,Ms);let e=fu(n.firestore,ka),t=eT(e),i=new Zg(e);return RN(n._query),wN(t,n._query).then(r=>new Jg(e,i,n,r))}function gy(n,e){let t=fu(n.firestore,ka),i=EN(n),r=kN(n.converter,e);return ON(t,[SN(iT(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,mr.exists(!1))]).then(()=>i)}function ON(n,e){return function(i,r){let s=new An;return i.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return cN(yield _N(i),r,s)})),s.promise}(eT(n),e)}(function(e,t=!0){(function(r){Os=r})(Ci),Mt(new st("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),a=new ka(new wm(i.getProvider("auth-internal")),new Tm(i.getProvider("app-check-internal")),function(l,h){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new q(L.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Kl(l.options.projectId,h)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),dt(xI,"4.6.5",e),dt(xI,"4.6.5","esm2017")})();function TT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var ST=TT,xT=new $t("auth","Firebase",TT());var Ru=new In("@firebase/auth");function NN(n,...e){Ru.logLevel<=ce.WARN&&Ru.warn(`Auth (${Ci}): ${n}`,...e)}function xu(n,...e){Ru.logLevel<=ce.ERROR&&Ru.error(`Auth (${Ci}): ${n}`,...e)}function Mn(n,...e){throw Oy(n,...e)}function fn(n,...e){return Oy(n,...e)}function My(n,e,t){let i=Object.assign(Object.assign({},ST()),{[e]:t});return new $t("auth","Firebase",i).create(e,{appName:n.name})}function Tr(n){return My(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function VN(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Mn(n,"argument-error"),My(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oy(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return xT.create(n,...e)}function X(n,e,...t){if(!n)throw Oy(e,...t)}function ti(n){let e="INTERNAL ASSERTION FAILED: "+n;throw xu(e),new Error(e)}function ii(n,e){n||ti(e)}function vy(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function LN(){return uT()==="http:"||uT()==="https:"}function uT(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function FN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(LN()||Al()||"connection"in navigator)?navigator.onLine:!0}function UN(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Sr=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ii(t>e,"Short delay should be less than long delay!"),this.isMobile=A0()||C0()}get(){return FN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Ny(n,e){ii(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Pu=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ti("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ti("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ti("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var BN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var jN=new Sr(3e4,6e4);function Vy(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function js(s,o,a,c){return S(this,arguments,function*(n,e,t,i,r={}){return AT(n,r,()=>S(this,null,function*(){let l={},h={};i&&(e==="GET"?h=i:l={body:JSON.stringify(i)});let d=ds(Object.assign({key:n.config.apiKey},h)).slice(1),p=yield n._getAdditionalHeaders();return p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode),Pu.fetch()(CT(n,n.config.apiHost,t,d),Object.assign({method:e,headers:p,referrerPolicy:"no-referrer"},l))}))})}function AT(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},BN),e);try{let r=new wy(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw Su(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let a=s.ok?o.errorMessage:o.error.message,[c,l]=a.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Su(n,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Su(n,"email-already-in-use",o);if(c==="USER_DISABLED")throw Su(n,"user-disabled",o);let h=i[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw My(n,h,l);Mn(n,h)}}catch(r){if(r instanceof ht)throw r;Mn(n,"network-request-failed",{message:String(r)})}})}function zN(s,o,a,c){return S(this,arguments,function*(n,e,t,i,r={}){let l=yield js(n,e,t,i,r);return"mfaPendingCredential"in l&&Mn(n,"multi-factor-auth-required",{_serverResponse:l}),l})}function CT(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Ny(n.config,r):`${n.config.apiScheme}://${r}`}var wy=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(fn(this.auth,"network-request-failed")),jN.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function Su(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=fn(n,e,i);return r.customData._tokenResponse=t,r}function qN(n,e){return S(this,null,function*(){return js(n,"POST","/v1/accounts:delete",e)})}function DT(n,e){return S(this,null,function*(){return js(n,"POST","/v1/accounts:lookup",e)})}function qa(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function RT(n,e=!1){return S(this,null,function*(){let t=rt(n),i=yield t.getIdToken(e),r=Ly(i);X(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:qa(yy(r.auth_time)),issuedAtTime:qa(yy(r.iat)),expirationTime:qa(yy(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function yy(n){return Number(n)*1e3}function Ly(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return xu("JWT malformed, contained fewer than 3 sections"),null;try{let r=Ap(t);return r?JSON.parse(r):(xu("Failed to decode base64 JWT payload"),null)}catch(r){return xu("Caught error parsing JWT payload as JSON",r?.toString()),null}}function hT(n){let e=Ly(n);return X(e,"internal-error"),X(typeof e.exp<"u","internal-error"),X(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function $a(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof ht&&WN(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function WN({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var by=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Ha=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=qa(this.lastLoginAt),this.creationTime=qa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function ku(n){return S(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield $a(n,DT(t,{idToken:i}));X(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?kT(s.providerUserInfo):[],a=$N(n.providerData,o),c=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!a?.length,h=c?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Ha(s.createdAt,s.lastLoginAt),isAnonymous:h};Object.assign(n,d)})}function PT(n){return S(this,null,function*(){let e=rt(n);yield ku(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function $N(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function kT(n){return n.map(e=>{var{providerId:t}=e,i=Bc(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function HN(n,e){return S(this,null,function*(){let t=yield AT(n,{},()=>S(this,null,function*(){let i=ds({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=CT(n,r,"/v1/token",`key=${s}`),a=yield n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",Pu.fetch()(o,{method:"POST",headers:a,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function GN(n,e){return S(this,null,function*(){return js(n,"POST","/v2/accounts:revokeToken",Vy(n,e))})}var Wa=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){X(e.idToken,"internal-error"),X(typeof e.idToken<"u","internal-error"),X(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hT(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){X(e.length!==0,"internal-error");let t=hT(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(X(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield HN(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(X(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(X(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(X(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return ti("not implemented")}};function Ni(n,e){X(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Bs=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=Bc(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new by(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Ha(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield $a(this,this.stsTokenManager.getToken(this.auth,e));return X(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return RT(this,e)}reload(){return PT(this)}_assign(e){this!==e&&(X(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield ku(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(Tn(this.auth.app))return Promise.reject(Tr(this.auth));let e=yield this.getIdToken();return yield $a(this,qN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,c,l,h;let d=(i=t.displayName)!==null&&i!==void 0?i:void 0,p=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,b=(o=t.photoURL)!==null&&o!==void 0?o:void 0,_=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(c=t._redirectEventId)!==null&&c!==void 0?c:void 0,D=(l=t.createdAt)!==null&&l!==void 0?l:void 0,R=(h=t.lastLoginAt)!==null&&h!==void 0?h:void 0,{uid:k,emailVerified:V,isAnonymous:O,providerData:N,stsTokenManager:E}=t;X(k&&E,e,"internal-error");let v=Wa.fromJSON(this.name,E);X(typeof k=="string",e,"internal-error"),Ni(d,e.name),Ni(p,e.name),X(typeof V=="boolean",e,"internal-error"),X(typeof O=="boolean",e,"internal-error"),Ni(g,e.name),Ni(b,e.name),Ni(_,e.name),Ni(w,e.name),Ni(D,e.name),Ni(R,e.name);let I=new n({uid:k,auth:e,email:p,emailVerified:V,displayName:d,isAnonymous:O,photoURL:b,phoneNumber:g,tenantId:_,stsTokenManager:v,createdAt:D,lastLoginAt:R});return N&&Array.isArray(N)&&(I.providerData=N.map(x=>Object.assign({},x))),w&&(I._redirectEventId=w),I}static _fromIdTokenResponse(e,t,i=!1){return S(this,null,function*(){let r=new Wa;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield ku(s),s})}static _fromGetAccountInfoResponse(e,t,i){return S(this,null,function*(){let r=t.users[0];X(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?kT(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Wa;a.updateFromIdToken(i);let c=new n({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Ha(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(c,l),c})}};var dT=new Map;function ni(n){ii(n instanceof Function,"Expected a class definition");let e=dT.get(n);return e?(ii(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,dT.set(n,e),e)}var KN=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,i){return S(this,null,function*(){this.storage[t]=i})}_get(t){return S(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),Iy=KN;function Au(n,e,t){return`firebase:${n}:${e}:${t}`}var Mu=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=Au(this.userKey,r.apiKey,s),this.fullPersistenceKey=Au("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Bs._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return S(this,null,function*(){if(!t.length)return new n(ni(Iy),e,i);let r=(yield Promise.all(t.map(l=>S(this,null,function*(){if(yield l._isAvailable())return l})))).filter(l=>l),s=r[0]||ni(Iy),o=Au(i,e.config.apiKey,e.name),a=null;for(let l of t)try{let h=yield l._get(o);if(h){let d=Bs._fromJSON(e,h);l!==s&&(a=d),s=l;break}}catch{}let c=r.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!c.length?new n(s,e,i):(s=c[0],a&&(yield s._set(o,a.toJSON())),yield Promise.all(t.map(l=>S(this,null,function*(){if(l!==s)try{yield l._remove(o)}catch{}}))),new n(s,e,i))})}};function fT(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(NT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(LT(e))return"Blackberry";if(FT(e))return"Webos";if(Fy(e))return"Safari";if((e.includes("chrome/")||OT(e))&&!e.includes("edge/"))return"Chrome";if(VT(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function MT(n=Je()){return/firefox\//i.test(n)}function Fy(n=Je()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function OT(n=Je()){return/crios\//i.test(n)}function NT(n=Je()){return/iemobile/i.test(n)}function VT(n=Je()){return/android/i.test(n)}function LT(n=Je()){return/blackberry/i.test(n)}function FT(n=Je()){return/webos/i.test(n)}function zu(n=Je()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function YN(n=Je()){var e;return zu(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function QN(){return D0()&&document.documentMode===10}function UT(n=Je()){return zu(n)||VT(n)||FT(n)||LT(n)||/windows phone/i.test(n)||NT(n)}function XN(){try{return!!(window&&window!==window.top)}catch{return!1}}function BT(n,e=[]){let t;switch(n){case"Browser":t=fT(Je());break;case"Worker":t=`${fT(Je())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Ci}/${i}`}var Ey=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,a)=>{try{let c=e(s);o(c)}catch(c){a(c)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function JN(t){return S(this,arguments,function*(n,e={}){return js(n,"GET","/v2/passwordPolicy",Vy(n,e))})}var ZN=6,Ty=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:ZN,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;let c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(t=c.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),c.isValid&&(c.isValid=(i=c.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(r=c.containsLowercaseLetter)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsUppercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(a=c.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),c}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var Sy=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ou(this),this.idTokenSubscription=new Ou(this),this.beforeStateQueue=new Ey(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=ni(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield Mu.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield DT(this,{idToken:e}),i=yield Bs._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(Tn(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,c=yield this.tryRedirectSignIn(e);(!o||o===a)&&c?.user&&(r=c.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return X(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield ku(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=UN()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(Tn(this.app))return Promise.reject(Tr(this));let t=e?rt(e):null;return t&&X(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&X(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return Tn(this.app)?Promise.reject(Tr(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return Tn(this.app)?Promise.reject(Tr(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(ni(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield JN(this),t=new Ty(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new $t("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield GN(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&ni(e)||this._popupRedirectResolver;X(t,this,"argument-error"),this.redirectPersistenceManager=yield Mu.create(this,[ni(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,a=this._isInitialized?Promise.resolve():this._initializationPromise;if(X(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let c=e.addObserver(t,i,r);return()=>{o=!0,c()}}else{let c=e.addObserver(t);return()=>{o=!0,c()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return S(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&NN(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function qu(n){return rt(n)}var Ou=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=M0(t=>this.observer=t)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Uy={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eV(n){Uy=n}function tV(n){return Uy.loadJS(n)}function nV(){return Uy.gapiScript}function jT(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function zT(n,e){let t=ln(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(Yn(s,e??{}))return r;Mn(r,"already-initialized")}return t.initialize({options:e})}function iV(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(ni);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function qT(n,e,t){let i=qu(n);X(i._canInitEmulator,i,"emulator-config-failed"),X(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=WT(e),{host:o,port:a}=rV(e),c=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${c}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||sV()}function WT(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function rV(n){let e=WT(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:pT(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:pT(o)}}}function pT(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function sV(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Ga=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ti("not implemented")}_getIdTokenResponse(e){return ti("not implemented")}_linkToIdToken(e,t){return ti("not implemented")}_getReauthenticationResolver(e){return ti("not implemented")}};function Us(n,e){return S(this,null,function*(){return zN(n,"POST","/v1/accounts:signInWithIdp",Vy(n,e))})}var oV="http://localhost",Nu=class n extends Ga{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Mn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=Bc(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return Us(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,Us(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,Us(e,t)}buildRequest(){let e={requestUri:oV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ds(t)}return e}};var Ka=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var Vu=class extends Ka{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var By=(()=>{class n extends Vu{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return Nu._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var Ya=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return S(this,null,function*(){let s=yield Bs._fromIdTokenResponse(e,i,r),o=mT(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return S(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=mT(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function mT(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var xy=class n extends ht{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function $T(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?xy._fromErrorAndOperation(n,s,e,i):s})}function aV(n,e,t=!1){return S(this,null,function*(){let i=yield $a(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return Ya._forOperation(n,"link",i)})}function cV(n,e,t=!1){return S(this,null,function*(){let{auth:i}=n;if(Tn(i.app))return Promise.reject(Tr(i));let r="reauthenticate";try{let s=yield $a(n,$T(i,r,e,n),t);X(s.idToken,i,"internal-error");let o=Ly(s.idToken);X(o,i,"internal-error");let{sub:a}=o;return X(n.uid===a,i,"user-mismatch"),Ya._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Mn(i,"user-mismatch"),s}})}function lV(n,e,t=!1){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(Tr(n));let i="signIn",r=yield $T(n,i,e),s=yield Ya._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function HT(n,e,t,i){return rt(n).onIdTokenChanged(e,t,i)}function GT(n,e,t){return rt(n).beforeAuthStateChanged(e,t)}function jy(n){return rt(n).signOut()}var Lu="__sak";var Fu=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function uV(){let n=Je();return Fy(n)||zu(n)}var hV=1e3,dV=10,fV=(()=>{class n extends Fu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=uV()&&XN(),this.fallbackToPolling=UT(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((a,c,l)=>{this.notifyListeners(a,l)});return}let r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let a=this.storage.getItem(r);if(t.newValue!==a)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}let s=()=>{let a=this.storage.getItem(r);!i&&this.localCache[r]===a||this.notifyListeners(r,a)},o=this.storage.getItem(r);QN()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,dV):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},hV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return S(this,null,function*(){yield yi(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return S(this,null,function*(){let i=yield yi(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return S(this,null,function*(){yield yi(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),KT=fV;var pV=(()=>{class n extends Fu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),zy=pV;function mV(n){return Promise.all(n.map(e=>S(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var gV=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return S(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,a=this.handlersMap[s];if(!a?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let c=Array.from(a).map(h=>S(this,null,function*(){return h(i.origin,o)})),l=yield mV(c);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:l})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function qy(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Ay=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return S(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,c)=>{let l=qy("",20);r.port1.start();let h=setTimeout(()=>{c(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(d){let p=d;if(p.data.eventId===l)switch(p.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(p.data.response);break;default:clearTimeout(h),clearTimeout(s),c(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function kn(){return window}function yV(n){kn().location.href=n}function YT(){return typeof kn().WorkerGlobalScope<"u"&&typeof kn().importScripts=="function"}function _V(){return S(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function vV(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function wV(){return YT()?self:null}var QT="firebaseLocalStorageDb",bV=1,Uu="firebaseLocalStorage",XT="fbase_key",xr=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Wu(n,e){return n.transaction([Uu],e?"readwrite":"readonly").objectStore(Uu)}function IV(){let n=indexedDB.deleteDatabase(QT);return new xr(n).toPromise()}function Cy(){let n=indexedDB.open(QT,bV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Uu,{keyPath:XT})}catch(r){t(r)}}),n.addEventListener("success",()=>S(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Uu)?e(i):(i.close(),yield IV(),e(yield Cy()))}))})}function gT(n,e,t){return S(this,null,function*(){let i=Wu(n,!0).put({[XT]:e,value:t});return new xr(i).toPromise()})}function EV(n,e){return S(this,null,function*(){let t=Wu(n,!1).get(e),i=yield new xr(t).toPromise();return i===void 0?null:i.value})}function yT(n,e){let t=Wu(n,!0).delete(e);return new xr(t).toPromise()}var TV=800,SV=3,xV=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return S(this,null,function*(){return this.db?this.db:(this.db=yield Cy(),this.db)})}_withRetries(t){return S(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>SV)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return S(this,null,function*(){return YT()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return S(this,null,function*(){this.receiver=gV._getInstance(wV()),this.receiver._subscribe("keyChanged",(t,i)=>S(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>S(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return S(this,null,function*(){var t,i;if(this.activeServiceWorker=yield _V(),!this.activeServiceWorker)return;this.sender=new Ay(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return S(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||vV()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return S(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Cy();return yield gT(t,Lu,"1"),yield yT(t,Lu),!0}catch{}return!1})}_withPendingWrite(t){return S(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(r=>gT(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return S(this,null,function*(){let i=yield this._withRetries(r=>EV(r,t));return this.localCache[t]=i,i})}_remove(t){return S(this,null,function*(){return this._withPendingWrite(()=>S(this,null,function*(){return yield this._withRetries(i=>yT(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return S(this,null,function*(){let t=yield this._withRetries(s=>{let o=Wu(s,!1).getAll();return new xr(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>S(this,null,function*(){return this._poll()}),TV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),JT=xV;var PW=jT("rcb"),kW=new Sr(3e4,6e4);function ZT(n,e){return e?ni(e):(X(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var Qa=class extends Ga{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Us(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Us(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Us(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function AV(n){return lV(n.auth,new Qa(n),n.bypassAuthState)}function CV(n){let{auth:e,user:t}=n;return X(t,e,"internal-error"),cV(t,new Qa(n),n.bypassAuthState)}function DV(n){return S(this,null,function*(){let{auth:e,user:t}=n;return X(t,e,"internal-error"),aV(t,new Qa(n),n.bypassAuthState)})}var Bu=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>S(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return S(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}let c={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(a)(c))}catch(l){this.reject(l)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return AV;case"linkViaPopup":case"linkViaRedirect":return DV;case"reauthViaPopup":case"reauthViaRedirect":return CV;default:Mn(this.auth,"internal-error")}}resolve(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ii(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var RV=new Sr(2e3,1e4);function Wy(n,e,t){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(fn(n,"operation-not-supported-in-this-environment"));let i=qu(n);VN(n,e,Ka);let r=ZT(i,t);return new PV(i,"signInViaPopup",e,r).executeNotNull()})}var PV=(()=>{class n extends Bu{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return S(this,null,function*(){let t=yield this.execute();return X(t,this.auth,"internal-error"),t})}onExecution(){return S(this,null,function*(){ii(this.filter.length===1,"Popup operations only handle one event");let t=qy();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,RV.get())};t()}}n.currentPopupAction=null;return n})(),kV="pendingRedirect",Cu=new Map,Dy=class n extends Bu{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return S(this,null,function*(){let e=Cu.get(this.auth._key());if(!e){try{let i=(yield MV(this.resolver,this.auth))?yield yi(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Cu.set(this.auth._key(),e)}return this.bypassAuthState||Cu.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return S(this,null,function*(){if(e.type==="signInViaRedirect")return yi(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,yi(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return S(this,null,function*(){})}cleanUp(){}};function MV(n,e){return S(this,null,function*(){let t=VV(e),i=NV(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function OV(n,e){Cu.set(n._key(),e)}function NV(n){return ni(n._redirectPersistence)}function VV(n){return Au(kV,n.config.apiKey,n.name)}function LV(n,e,t=!1){return S(this,null,function*(){if(Tn(n.app))return Promise.reject(Tr(n));let i=qu(n),r=ZT(i,e),o=yield new Dy(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var FV=10*60*1e3,Ry=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!UV(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!eS(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(fn(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=FV&&this.cachedEventUids.clear(),this.cachedEventUids.has(_T(e))}saveEventToCache(e){this.cachedEventUids.add(_T(e)),this.lastProcessedEventTime=Date.now()}};function _T(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function eS({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function UV(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return eS(n);default:return!1}}function BV(t){return S(this,arguments,function*(n,e={}){return js(n,"GET","/v1/projects",e)})}var jV=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,zV=/^https?/;function qV(n){return S(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield BV(n);for(let t of e)try{if(WV(t))return}catch{}Mn(n,"unauthorized-domain")})}function WV(n){let e=vy(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!zV.test(t))return!1;if(jV.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var $V=new Sr(3e4,6e4);function vT(){let n=kn().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function HV(n){return new Promise((e,t)=>{var i,r,s;function o(){vT(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{vT(),t(fn(n,"network-request-failed"))},timeout:$V.get()})}if(!((r=(i=kn().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=kn().gapi)===null||s===void 0)&&s.load)o();else{let a=jT("iframefcb");return kn()[a]=()=>{gapi.load?o():t(fn(n,"network-request-failed"))},tV(`${nV()}?onload=${a}`).catch(c=>t(c))}}).catch(e=>{throw Du=null,e})}var Du=null;function GV(n){return Du=Du||HV(n),Du}var KV=new Sr(5e3,15e3),YV="__/auth/iframe",QV="emulator/auth/iframe",XV={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},JV=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ZV(n){let e=n.config;X(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Ny(e,QV):`https://${n.config.authDomain}/${YV}`,i={apiKey:e.apiKey,appName:n.name,v:Ci},r=JV.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ds(i).slice(1)}`}function eL(n){return S(this,null,function*(){let e=yield GV(n),t=kn().gapi;return X(t,n,"internal-error"),e.open({where:document.body,url:ZV(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:XV,dontclear:!0},i=>new Promise((r,s)=>S(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=fn(n,"network-request-failed"),a=kn().setTimeout(()=>{s(o)},KV.get());function c(){kn().clearTimeout(a),r(i)}i.ping(c).then(c,()=>{s(o)})})))})}var tL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},nL=500,iL=600,rL="_blank",sL="http://localhost",ju=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function oL(n,e,t,i=nL,r=iL){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),a="",c=Object.assign(Object.assign({},tL),{width:i.toString(),height:r.toString(),top:s,left:o}),l=Je().toLowerCase();t&&(a=OT(l)?rL:t),MT(l)&&(e=e||sL,c.scrollbars="yes");let h=Object.entries(c).reduce((p,[g,b])=>`${p}${g}=${b},`,"");if(YN(l)&&a!=="_self")return aL(e||"",a),new ju(null);let d=window.open(e||"",a,h);X(d,n,"popup-blocked");try{d.focus()}catch{}return new ju(d)}function aL(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var cL="__/auth/handler",lL="emulator/auth/handler",uL=encodeURIComponent("fac");function wT(n,e,t,i,r,s){return S(this,null,function*(){X(n.config.authDomain,n,"auth-domain-config-required"),X(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Ci,eventId:r};if(e instanceof Ka){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",k0(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[h,d]of Object.entries(s||{}))o[h]=d}if(e instanceof Vu){let h=e.getScopes().filter(d=>d!=="");h.length>0&&(o.scopes=h.join(","))}n.tenantId&&(o.tid=n.tenantId);let a=o;for(let h of Object.keys(a))a[h]===void 0&&delete a[h];let c=yield n._getAppCheckToken(),l=c?`#${uL}=${encodeURIComponent(c)}`:"";return`${hL(n)}?${ds(a).slice(1)}${l}`})}function hL({config:n}){return n.emulator?Ny(n,lL):`https://${n.authDomain}/${cL}`}var _y="webStorageSupport",Py=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=zy,this._completeRedirectFn=LV,this._overrideRedirectResult=OV}_openPopup(e,t,i,r){return S(this,null,function*(){var s;ii((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield wT(e,t,i,vy(),r);return oL(e,o,qy())})}_openRedirect(e,t,i,r){return S(this,null,function*(){yield this._originValidation(e);let s=yield wT(e,t,i,vy(),r);return yV(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(ii(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return S(this,null,function*(){let t=yield eL(e),i=new Ry(e);return t.register("authEvent",r=>(X(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(_y,{type:_y},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[_y];o!==void 0&&t(!!o),Mn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=qV(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return UT()||Fy()||zu()}},tS=Py;var bT="@firebase/auth",IT="1.7.6";var ky=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function dL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function fL(n){Mt(new st("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;X(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let c={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BT(n)},l=new Sy(i,r,s,c);return iV(l,t),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Mt(new st("auth-internal",e=>{let t=qu(e.getProvider("auth").getImmediate());return(i=>new ky(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),dt(bT,IT,dL(n)),dt(bT,IT,"esm2017")}var pL=5*60,mL=Rp("authIdTokenMaxAge")||pL,ET=null,gL=n=>e=>S(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>mL)return;let r=t?.token;ET!==r&&(ET=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function $y(n=lr()){let e=ln(n,"auth");if(e.isInitialized())return e.getImmediate();let t=zT(n,{popupRedirectResolver:tS,persistence:[JT,KT,zy]}),i=Rp("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=gL(s.toString());GT(t,o,()=>o(t.currentUser)),HT(t,a=>o(a))}}let r=Cp("auth");return r&&qT(t,`http://${r}`),t}function yL(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}eV({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=fn("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",yL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});fL("Browser");var _L={apiKey:"AIzaSyBuS1gDyDbKr5is5s-hytKtVzEj6C8yFEo",authDomain:"r210-840cd.firebaseapp.com",databaseURL:"https://r210-840cd-default-rtdb.firebaseio.com",projectId:"r210-840cd",storageBucket:"r210-840cd.appspot.com",messagingSenderId:"707797710533",appId:"1:707797710533:web:0e4158a28a89476e40e2ac",measurementId:"G-6HDH51CCC0"},rS=Hp(_L),o$=EI(rS),$u=ZE(rS),vL=new By,Hy=$y(),nS="LaserPower",iS="LaserPowerPermission";Hy.languageCode="it";var zs=(()=>{let e=class e{constructor(){this._user=null,this._loginInfo={user:null,permissions:null},this.is_loading=!1,this.FireBaseKeyName=nS,console.log("new FirebaseAccessService")}get_db(){return $u}get_user(){return this._user}get_loginInfo(){return this._loginInfo}set_loginInfo(i){this._loginInfo=i}getNewPermission(){return{email:"",desc:"",isAdministrator:0}}getNewPowerData(){return{id:null,basepower:null,workpower:null,workStructure:null,beamExpander:null,lens:null,slit:null,doe:null,wavePlate:null,lambda:null,atDate:null,brandKey:"",brandvalue0_Laser:null,brandvalue1_rate:null,brandvalue2_atten:null,email:null,displayname:null}}addData(i){return S(this,null,function*(){try{let r=yield gy(Oi($u,nS),{basepower:i.basepower,workpower:i.workpower,workStructure:i.workStructure,beamExpander:i.beamExpander,lens:i.lens,slit:i.slit,doe:i.doe,wavePlate:i.wavePlate,lambda:i.lambda,atDate:i.atDate,brandKey:i.brandKey,brandvalue0_Laser:i.brandvalue0_Laser,brandvalue1_rate:i.brandvalue1_rate,brandvalue2_atten:i.brandvalue2_atten,email:i.email,displayname:i.displayname});console.log("Document written with ID: ",r.id)}catch(r){console.error("Error adding document: ",r)}})}auth(){return S(this,null,function*(){return Wy(Hy,vL)})}signOut(){return S(this,null,function*(){console.log("signOut"),yield jy(Hy),console.log("done")})}setPermission(i){return S(this,null,function*(){this.is_loading=!0;try{let r=yield gy(Oi($u,iS),{email:i.email,desc:i.desc,isAdministrator:i.isAdministrator})}catch{}finally{this.is_loading=!1}})}getPermission(i){return S(this,null,function*(){let r=Ls(Oi($u,iS),Ct("email","==",i)),s=yield Fs(r),o=null;return s.forEach(a=>{o={email:a.data().email,desc:a.data().desc,isAdministrator:a.data().isAdministrator}}),this._loginInfo.permissions=o,o})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var l$=(()=>{let e=class e{constructor(i){this.user=null,this.fire=i,this.perm_data=this.fire.getNewPermission()}ngOnInit(){this.user=this.fire.get_loginInfo(),this.perm_data.email=this.user?.user?.user.email??""}onSubmit(){console.log(this.perm_data),this.fire.setPermission(this.perm_data).then(i=>{console.log(i)}),this.fire.getPermission(this.perm_data.email).then(i=>{console.log(i)})}};e.\u0275fac=function(r){return new(r||e)(Ie(zs))},e.\u0275cmp=yn({type:e,selectors:[["app-regist"]],standalone:!0,features:[vn],decls:12,vars:2,consts:[["form","ngForm"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"col-md-4"],["for","desc",1,"form-label"],["type","text","id","desc","name","desc",1,"form-control",3,"ngModelChange","ngModel","placeholder"],[1,"col-auto"],["id","detail",1,"form-text"],[1,"row","g-3"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"]],template:function(r,s){if(r&1){let o=Lo();B(0,"form",1,0),it("ngSubmit",function(){return $e(o),He(s.onSubmit())}),B(2,"div",2)(3,"label",3),G(4,"\u5DE5\u865F\u6216\u540D\u7A31"),j(),B(5,"input",4),kt("ngModelChange",function(c){return $e(o),Pt(s.perm_data.desc,c)||(s.perm_data.desc=c),He(c)}),j(),B(6,"div",5)(7,"span",6),G(8," \u8ACB\u5DE5\u865F\u6216\u540D\u7A31\u4EE5\u8A3B\u518A,\u82E5\u7121\u5DE5\u865F\u8ACB\u8F38\u5165\u8DB3\u4F9B\u7BA1\u7406\u8005\u8FA8\u8B58\u7684\u540D\u7A31 "),j()()(),B(9,"div",7)(10,"button",8),G(11,"\u78BA\u8A8D\u9001\u51FA"),j()()()}r&2&&(W(5),Rt("ngModel",s.perm_data.desc),ee("placeholder",s.user==null||s.user.user==null||s.user.user.user==null?null:s.user.user.user.displayName))},dependencies:[Tl,Il,hs,vl,wl,fa,da]});let n=e;return n})();function bL(n,e){n&1&&(B(0,"th",2),G(1,"\u5DE5\u4F5C\u7D50\u69CB"),j())}function IL(n,e){n&1&&(B(0,"th",2),G(1,"\u54C1\u724C"),j())}function EL(n,e){n&1&&(B(0,"th",2),G(1,"doe"),j())}function TL(n,e){n&1&&(B(0,"th",2),G(1,"\u93E1\u7D44"),j())}function SL(n,e){n&1&&(B(0,"th",2),G(1,"\u72F9\u7E2B"),j())}function xL(n,e){n&1&&(B(0,"th",2),G(1,"wave plate"),j())}function AL(n,e){n&1&&(B(0,"th",2),G(1,"\u8A18\u9304\u4EBA"),j())}function CL(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.workStructure)}}function DL(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.brandKey)}}function RL(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.doe)}}function PL(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.lens)}}function kL(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.slit)}}function ML(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.wavePlate)}}function OL(n,e){if(n&1&&(B(0,"td"),G(1),j()),n&2){let t=jt().$implicit;W(),zt(t.displayname)}}function NL(n,e){if(n&1&&(B(0,"tr")(1,"th",6),G(2),j(),B(3,"td"),G(4),j(),B(5,"td"),G(6),j(),B(7,"td"),G(8),j(),B(9,"td"),G(10),Ww(11,"number"),j(),B(12,"td"),G(13),j(),At(14,CL,2,1,"td",7)(15,DL,2,1,"td",7)(16,RL,2,1,"td",7)(17,PL,2,1,"td",7)(18,kL,2,1,"td",7)(19,ML,2,1,"td",7)(20,OL,2,1,"td",7),j()),n&2){let t=e.$implicit,i=e.index,r=jt();W(2),zt(i),W(2),zt(t.atDate),W(2),zt(t.basepower),W(2),zt(t.workpower),W(2),an(" ",$w(11,13,t.basepower*100/t.workpower,"1.2-2")," "),W(3),zt(t.lambda),W(),ee("ngIf",!r.isNarrow),W(),ee("ngIf",!r.isNarrow),W(),ee("ngIf",!r.isNarrow),W(),ee("ngIf",!r.isNarrow),W(),ee("ngIf",!r.isNarrow),W(),ee("ngIf",!r.isNarrow),W(),ee("ngIf",!r.isNarrow)}}var sS=1190,oS=(()=>{let e=class e{constructor(){this.source=[],this.isNarrow=!1}ngOnInit(){this.isNarrow=window.innerWidth<sS}onResize(i){this.isNarrow=i.target.innerWidth<sS}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=yn({type:e,selectors:[["app-result-table"]],hostBindings:function(r,s){r&1&&it("resize",function(a){return s.onResize(a)},!1,Vw)},inputs:{source:"source"},standalone:!0,features:[vn],decls:25,vars:8,consts:[[1,"div-container"],[1,"table"],["scope","col"],["scope","col",4,"ngIf"],[1,"table-group-divider"],[4,"ngFor","ngForOf"],["scope","row"],[4,"ngIf"]],template:function(r,s){r&1&&(B(0,"div",0)(1,"table",1)(2,"thead")(3,"tr")(4,"th",2),G(5,"\uFF03"),j(),B(6,"th",2),G(7,"\u65E5\u671F"),j(),B(8,"th",2),G(9,"[\u57FA]\u529F\u7387(W)"),j(),B(10,"th",2),G(11,"[\u5DE5]\u529F\u73872(W)"),j(),B(12,"th",2),G(13,"\u7A7F\u900F\u7387(%)"),j(),B(14,"th",2),G(15,"\u6CE2\u9577(nm)"),j(),At(16,bL,2,0,"th",3)(17,IL,2,0,"th",3)(18,EL,2,0,"th",3)(19,TL,2,0,"th",3)(20,SL,2,0,"th",3)(21,xL,2,0,"th",3)(22,AL,2,0,"th",3),j()(),B(23,"tbody",4),At(24,NL,21,16,"tr",5),j()()()),r&2&&(W(16),ee("ngIf",!s.isNarrow),W(),ee("ngIf",!s.isNarrow),W(),ee("ngIf",!s.isNarrow),W(),ee("ngIf",!s.isNarrow),W(),ee("ngIf",!s.isNarrow),W(),ee("ngIf",!s.isNarrow),W(),ee("ngIf",!s.isNarrow),W(2),ee("ngForOf",s.source))},dependencies:[Uo,$c,Hc,Jw],styles:[".div-container[_ngcontent-%COMP%]{max-height:300px;overflow-y:auto}"]});let n=e;return n})();function Za(n){return n+.5|0}var Vi=(n,e,t)=>Math.max(Math.min(n,t),e);function Xa(n){return Vi(Za(n*2.55),0,255)}function Li(n){return Vi(Za(n*255),0,255)}function ri(n){return Vi(Za(n/2.55)/100,0,1)}function aS(n){return Vi(Za(n*100),0,100)}var Jt={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Yy=[..."0123456789ABCDEF"],VL=n=>Yy[n&15],LL=n=>Yy[(n&240)>>4]+Yy[n&15],Hu=n=>(n&240)>>4===(n&15),FL=n=>Hu(n.r)&&Hu(n.g)&&Hu(n.b)&&Hu(n.a);function UL(n){var e=n.length,t;return n[0]==="#"&&(e===4||e===5?t={r:255&Jt[n[1]]*17,g:255&Jt[n[2]]*17,b:255&Jt[n[3]]*17,a:e===5?Jt[n[4]]*17:255}:(e===7||e===9)&&(t={r:Jt[n[1]]<<4|Jt[n[2]],g:Jt[n[3]]<<4|Jt[n[4]],b:Jt[n[5]]<<4|Jt[n[6]],a:e===9?Jt[n[7]]<<4|Jt[n[8]]:255})),t}var BL=(n,e)=>n<255?e(n):"";function jL(n){var e=FL(n)?VL:LL;return n?"#"+e(n.r)+e(n.g)+e(n.b)+BL(n.a,e):void 0}var zL=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hS(n,e,t){let i=e*Math.min(t,1-t),r=(s,o=(s+n/30)%12)=>t-i*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function qL(n,e,t){let i=(r,s=(r+n/60)%6)=>t-t*e*Math.max(Math.min(s,4-s,1),0);return[i(5),i(3),i(1)]}function WL(n,e,t){let i=hS(n,1,.5),r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)i[r]*=1-e-t,i[r]+=e;return i}function $L(n,e,t,i,r){return n===r?(e-t)/i+(e<t?6:0):e===r?(t-n)/i+2:(n-e)/i+4}function Qy(n){let t=n.r/255,i=n.g/255,r=n.b/255,s=Math.max(t,i,r),o=Math.min(t,i,r),a=(s+o)/2,c,l,h;return s!==o&&(h=s-o,l=a>.5?h/(2-s-o):h/(s+o),c=$L(t,i,r,h,s),c=c*60+.5),[c|0,l||0,a]}function Xy(n,e,t,i){return(Array.isArray(e)?n(e[0],e[1],e[2]):n(e,t,i)).map(Li)}function Jy(n,e,t){return Xy(hS,n,e,t)}function HL(n,e,t){return Xy(WL,n,e,t)}function GL(n,e,t){return Xy(qL,n,e,t)}function dS(n){return(n%360+360)%360}function KL(n){let e=zL.exec(n),t=255,i;if(!e)return;e[5]!==i&&(t=e[6]?Xa(+e[5]):Li(+e[5]));let r=dS(+e[2]),s=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?i=HL(r,s,o):e[1]==="hsv"?i=GL(r,s,o):i=Jy(r,s,o),{r:i[0],g:i[1],b:i[2],a:t}}function YL(n,e){var t=Qy(n);t[0]=dS(t[0]+e),t=Jy(t),n.r=t[0],n.g=t[1],n.b=t[2]}function QL(n){if(!n)return;let e=Qy(n),t=e[0],i=aS(e[1]),r=aS(e[2]);return n.a<255?`hsla(${t}, ${i}%, ${r}%, ${ri(n.a)})`:`hsl(${t}, ${i}%, ${r}%)`}var cS={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},lS={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function XL(){let n={},e=Object.keys(lS),t=Object.keys(cS),i,r,s,o,a;for(i=0;i<e.length;i++){for(o=a=e[i],r=0;r<t.length;r++)s=t[r],a=a.replace(s,cS[s]);s=parseInt(lS[o],16),n[a]=[s>>16&255,s>>8&255,s&255]}return n}var Gu;function JL(n){Gu||(Gu=XL(),Gu.transparent=[0,0,0,0]);let e=Gu[n.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}var ZL=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function eF(n){let e=ZL.exec(n),t=255,i,r,s;if(e){if(e[7]!==i){let o=+e[7];t=e[8]?Xa(o):Vi(o*255,0,255)}return i=+e[1],r=+e[3],s=+e[5],i=255&(e[2]?Xa(i):Vi(i,0,255)),r=255&(e[4]?Xa(r):Vi(r,0,255)),s=255&(e[6]?Xa(s):Vi(s,0,255)),{r:i,g:r,b:s,a:t}}}function tF(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${ri(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var Ky=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,qs=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function nF(n,e,t){let i=qs(ri(n.r)),r=qs(ri(n.g)),s=qs(ri(n.b));return{r:Li(Ky(i+t*(qs(ri(e.r))-i))),g:Li(Ky(r+t*(qs(ri(e.g))-r))),b:Li(Ky(s+t*(qs(ri(e.b))-s))),a:n.a+t*(e.a-n.a)}}function Ku(n,e,t){if(n){let i=Qy(n);i[e]=Math.max(0,Math.min(i[e]+i[e]*t,e===0?360:1)),i=Jy(i),n.r=i[0],n.g=i[1],n.b=i[2]}}function fS(n,e){return n&&Object.assign(e||{},n)}function uS(n){var e={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(e={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(e.a=Li(n[3]))):(e=fS(n,{r:0,g:0,b:0,a:1}),e.a=Li(e.a)),e}function iF(n){return n.charAt(0)==="r"?eF(n):KL(n)}var Ja=class n{constructor(e){if(e instanceof n)return e;let t=typeof e,i;t==="object"?i=uS(e):t==="string"&&(i=UL(e)||JL(e)||iF(e)),this._rgb=i,this._valid=!!i}get valid(){return this._valid}get rgb(){var e=fS(this._rgb);return e&&(e.a=ri(e.a)),e}set rgb(e){this._rgb=uS(e)}rgbString(){return this._valid?tF(this._rgb):void 0}hexString(){return this._valid?jL(this._rgb):void 0}hslString(){return this._valid?QL(this._rgb):void 0}mix(e,t){if(e){let i=this.rgb,r=e.rgb,s,o=t===s?.5:t,a=2*o-1,c=i.a-r.a,l=((a*c===-1?a:(a+c)/(1+a*c))+1)/2;s=1-l,i.r=255&l*i.r+s*r.r+.5,i.g=255&l*i.g+s*r.g+.5,i.b=255&l*i.b+s*r.b+.5,i.a=o*i.a+(1-o)*r.a,this.rgb=i}return this}interpolate(e,t){return e&&(this._rgb=nF(this._rgb,e._rgb,t)),this}clone(){return new n(this.rgb)}alpha(e){return this._rgb.a=Li(e),this}clearer(e){let t=this._rgb;return t.a*=1-e,this}greyscale(){let e=this._rgb,t=Za(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){let t=this._rgb;return t.a*=1+e,this}negate(){let e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ku(this._rgb,2,e),this}darken(e){return Ku(this._rgb,2,-e),this}saturate(e){return Ku(this._rgb,1,e),this}desaturate(e){return Ku(this._rgb,1,-e),this}rotate(e){return YL(this._rgb,e),this}};function Vn(){}var TS=(()=>{let n=0;return()=>n++})();function fe(n){return n===null||typeof n>"u"}function Pe(n){if(Array.isArray&&Array.isArray(n))return!0;let e=Object.prototype.toString.call(n);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ae(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function Fe(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function Vt(n,e){return Fe(n)?n:e}function te(n,e){return typeof n>"u"?e:n}var SS=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/e,n_=(n,e)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*e:+n;function Ce(n,e,t){if(n&&typeof n.call=="function")return n.apply(t,e)}function be(n,e,t,i){let r,s,o;if(Pe(n))if(s=n.length,i)for(r=s-1;r>=0;r--)e.call(t,n[r],r);else for(r=0;r<s;r++)e.call(t,n[r],r);else if(ae(n))for(o=Object.keys(n),s=o.length,r=0;r<s;r++)e.call(t,n[o[r]],o[r])}function nc(n,e){let t,i,r,s;if(!n||!e||n.length!==e.length)return!1;for(t=0,i=n.length;t<i;++t)if(r=n[t],s=e[t],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function Ju(n){if(Pe(n))return n.map(Ju);if(ae(n)){let e=Object.create(null),t=Object.keys(n),i=t.length,r=0;for(;r<i;++r)e[t[r]]=Ju(n[t[r]]);return e}return n}function xS(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function rF(n,e,t,i){if(!xS(n))return;let r=e[n],s=t[n];ae(r)&&ae(s)?$s(r,s,i):e[n]=Ju(s)}function $s(n,e,t){let i=Pe(e)?e:[e],r=i.length;if(!ae(n))return n;t=t||{};let s=t.merger||rF,o;for(let a=0;a<r;++a){if(o=i[a],!ae(o))continue;let c=Object.keys(o);for(let l=0,h=c.length;l<h;++l)s(c[l],n,o,t)}return n}function Gs(n,e){return $s(n,e,{merger:sF})}function sF(n,e,t){if(!xS(n))return;let i=e[n],r=t[n];ae(i)&&ae(r)?Gs(i,r):Object.prototype.hasOwnProperty.call(e,n)||(e[n]=Ju(r))}var pS={"":n=>n,x:n=>n.x,y:n=>n.y};function oF(n){let e=n.split("."),t=[],i="";for(let r of e)i+=r,i.endsWith("\\")?i=i.slice(0,-1)+".":(t.push(i),i="");return t}function aF(n){let e=oF(n);return t=>{for(let i of e){if(i==="")break;t=t&&t[i]}return t}}function ai(n,e){return(pS[e]||(pS[e]=aF(e)))(n)}function nh(n){return n.charAt(0).toUpperCase()+n.slice(1)}var Ks=n=>typeof n<"u",si=n=>typeof n=="function",i_=(n,e)=>{if(n.size!==e.size)return!1;for(let t of n)if(!e.has(t))return!1;return!0};function AS(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var ke=Math.PI,Me=2*ke,cF=Me+ke,Zu=Number.POSITIVE_INFINITY,lF=ke/180,We=ke/2,Ar=ke/4,mS=ke*2/3,oi=Math.log10,pn=Math.sign;function Ys(n,e,t){return Math.abs(n-e)<t}function r_(n){let e=Math.round(n);n=Ys(n,e,n/1e3)?e:n;let t=Math.pow(10,Math.floor(oi(n))),i=n/t;return(i<=1?1:i<=2?2:i<=5?5:10)*t}function CS(n){let e=[],t=Math.sqrt(n),i;for(i=1;i<t;i++)n%i===0&&(e.push(i),e.push(n/i));return t===(t|0)&&e.push(t),e.sort((r,s)=>r-s).pop(),e}function Rr(n){return!isNaN(parseFloat(n))&&isFinite(n)}function DS(n,e){let t=Math.round(n);return t-e<=n&&t+e>=n}function s_(n,e,t){let i,r,s;for(i=0,r=n.length;i<r;i++)s=n[i][t],isNaN(s)||(e.min=Math.min(e.min,s),e.max=Math.max(e.max,s))}function Zt(n){return n*(ke/180)}function ih(n){return n*(180/ke)}function o_(n){if(!Fe(n))return;let e=1,t=0;for(;Math.round(n*e)/e!==n;)e*=10,t++;return t}function a_(n,e){let t=e.x-n.x,i=e.y-n.y,r=Math.sqrt(t*t+i*i),s=Math.atan2(i,t);return s<-.5*ke&&(s+=Me),{angle:s,distance:r}}function eh(n,e){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function uF(n,e){return(n-e+cF)%Me-ke}function Nt(n){return(n%Me+Me)%Me}function Qs(n,e,t,i){let r=Nt(n),s=Nt(e),o=Nt(t),a=Nt(s-r),c=Nt(o-r),l=Nt(r-s),h=Nt(r-o);return r===s||r===o||i&&s===o||a>c&&l<h}function Ze(n,e,t){return Math.max(e,Math.min(t,n))}function RS(n){return Ze(n,-32768,32767)}function Ln(n,e,t,i=1e-6){return n>=Math.min(e,t)-i&&n<=Math.max(e,t)+i}function rh(n,e,t){t=t||(o=>n[o]<e);let i=n.length-1,r=0,s;for(;i-r>1;)s=r+i>>1,t(s)?r=s:i=s;return{lo:r,hi:i}}var On=(n,e,t,i)=>rh(n,t,i?r=>{let s=n[r][e];return s<t||s===t&&n[r+1][e]===t}:r=>n[r][e]<t),PS=(n,e,t)=>rh(n,t,i=>n[i][e]>=t);function kS(n,e,t){let i=0,r=n.length;for(;i<r&&n[i]<e;)i++;for(;r>i&&n[r-1]>t;)r--;return i>0||r<n.length?n.slice(i,r):n}var MS=["push","pop","shift","splice","unshift"];function OS(n,e){if(n._chartjs){n._chartjs.listeners.push(e);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),MS.forEach(t=>{let i="_onData"+nh(t),r=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return n._chartjs.listeners.forEach(a=>{typeof a[i]=="function"&&a[i](...s)}),o}})})}function c_(n,e){let t=n._chartjs;if(!t)return;let i=t.listeners,r=i.indexOf(e);r!==-1&&i.splice(r,1),!(i.length>0)&&(MS.forEach(s=>{delete n[s]}),delete n._chartjs)}function l_(n){let e=new Set(n);return e.size===n.length?n:Array.from(e)}var u_=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function h_(n,e){let t=[],i=!1;return function(...r){t=r,i||(i=!0,u_.call(window,()=>{i=!1,n.apply(e,t)}))}}function NS(n,e){let t;return function(...i){return e?(clearTimeout(t),t=setTimeout(n,e,i)):n.apply(this,i),e}}var sh=n=>n==="start"?"left":n==="end"?"right":"center",pt=(n,e,t)=>n==="start"?e:n==="end"?t:(e+t)/2,VS=(n,e,t,i)=>n===(i?"left":"right")?t:n==="center"?(e+t)/2:e;function d_(n,e,t){let i=e.length,r=0,s=i;if(n._sorted){let{iScale:o,_parsed:a}=n,c=o.axis,{min:l,max:h,minDefined:d,maxDefined:p}=o.getUserBounds();d&&(r=Ze(Math.min(On(a,c,l).lo,t?i:On(e,c,o.getPixelForValue(l)).lo),0,i-1)),p?s=Ze(Math.max(On(a,o.axis,h,!0).hi+1,t?0:On(e,c,o.getPixelForValue(h),!0).hi+1),r,i)-r:s=i-r}return{start:r,count:s}}function f_(n){let{xScale:e,yScale:t,_scaleRanges:i}=n,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!i)return n._scaleRanges=r,!0;let s=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==t.min||i.ymax!==t.max;return Object.assign(i,r),s}var Yu=n=>n===0||n===1,gS=(n,e,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-e)*Me/t)),yS=(n,e,t)=>Math.pow(2,-10*n)*Math.sin((n-e)*Me/t)+1,Ws={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*We)+1,easeOutSine:n=>Math.sin(n*We),easeInOutSine:n=>-.5*(Math.cos(ke*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>Yu(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>Yu(n)?n:gS(n,.075,.3),easeOutElastic:n=>Yu(n)?n:yS(n,.075,.3),easeInOutElastic(n){return Yu(n)?n:n<.5?.5*gS(n*2,.1125,.45):.5+.5*yS(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let e=1.70158;return(n/=.5)<1?.5*(n*n*(((e*=1.525)+1)*n-e)):.5*((n-=2)*n*(((e*=1.525)+1)*n+e)+2)},easeInBounce:n=>1-Ws.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ws.easeInBounce(n*2)*.5:Ws.easeOutBounce(n*2-1)*.5+.5};function p_(n){if(n&&typeof n=="object"){let e=n.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function m_(n){return p_(n)?n:new Ja(n)}function Zy(n){return p_(n)?n:new Ja(n).saturate(.5).darken(.1).hexString()}var hF=["x","y","borderWidth","radius","tension"],dF=["color","borderColor","backgroundColor"];function fF(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),n.set("animations",{colors:{type:"color",properties:dF},numbers:{type:"number",properties:hF}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function pF(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var _S=new Map;function mF(n,e){e=e||{};let t=n+JSON.stringify(e),i=_S.get(t);return i||(i=new Intl.NumberFormat(n,e),_S.set(t,i)),i}function Xs(n,e,t){return mF(e,t).format(n)}var LS={values(n){return Pe(n)?n:""+n},numeric(n,e,t){if(n===0)return"0";let i=this.chart.options.locale,r,s=n;if(t.length>1){let l=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(l<1e-4||l>1e15)&&(r="scientific"),s=gF(n,t)}let o=oi(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(c,this.options.ticks.format),Xs(n,i,c)},logarithmic(n,e,t){if(n===0)return"0";let i=t[e].significand||n/Math.pow(10,Math.floor(oi(n)));return[1,2,3,5,10,15].includes(i)||e>.8*t.length?LS.numeric.call(this,n,e,t):""}};function gF(n,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var ic={formatters:LS};function yF(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ic.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}var Ui=Object.create(null),oh=Object.create(null);function ec(n,e){if(!e)return n;let t=e.split(".");for(let i=0,r=t.length;i<r;++i){let s=t[i];n=n[s]||(n[s]=Object.create(null))}return n}function e_(n,e,t){return typeof e=="string"?$s(ec(n,e),t):$s(ec(n,""),e)}var t_=class{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=i=>i.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(i,r)=>Zy(r.backgroundColor),this.hoverBorderColor=(i,r)=>Zy(r.borderColor),this.hoverColor=(i,r)=>Zy(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return e_(this,e,t)}get(e){return ec(this,e)}describe(e,t){return e_(oh,e,t)}override(e,t){return e_(Ui,e,t)}route(e,t,i,r){let s=ec(this,e),o=ec(this,i),a="_"+t;Object.defineProperties(s,{[a]:{value:s[t],writable:!0},[t]:{enumerable:!0,get(){let c=this[a],l=o[r];return ae(c)?Object.assign({},l,c):te(c,l)},set(c){this[a]=c}}})}apply(e){e.forEach(t=>t(this))}},Ue=new t_({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[fF,pF,yF]);function _F(n){return!n||fe(n.size)||fe(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function tc(n,e,t,i,r){let s=e[r];return s||(s=e[r]=n.measureText(r).width,t.push(r)),s>i&&(i=s),i}function FS(n,e,t,i){i=i||{};let r=i.data=i.data||{},s=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(r=i.data={},s=i.garbageCollect=[],i.font=e),n.save(),n.font=e;let o=0,a=t.length,c,l,h,d,p;for(c=0;c<a;c++)if(d=t[c],d!=null&&!Pe(d))o=tc(n,r,s,o,d);else if(Pe(d))for(l=0,h=d.length;l<h;l++)p=d[l],p!=null&&!Pe(p)&&(o=tc(n,r,s,o,p));n.restore();let g=s.length/2;if(g>t.length){for(c=0;c<g;c++)delete r[s[c]];s.splice(0,g)}return o}function Bi(n,e,t){let i=n.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*i)/i+r}function g_(n,e){!e&&!n||(e=e||n.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,n.width,n.height),e.restore())}function ah(n,e,t,i){y_(n,e,t,i,null)}function y_(n,e,t,i,r){let s,o,a,c,l,h,d,p,g=e.pointStyle,b=e.rotation,_=e.radius,w=(b||0)*lF;if(g&&typeof g=="object"&&(s=g.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){n.save(),n.translate(t,i),n.rotate(w),n.drawImage(g,-g.width/2,-g.height/2,g.width,g.height),n.restore();return}if(!(isNaN(_)||_<=0)){switch(n.beginPath(),g){default:r?n.ellipse(t,i,r/2,_,0,0,Me):n.arc(t,i,_,0,Me),n.closePath();break;case"triangle":h=r?r/2:_,n.moveTo(t+Math.sin(w)*h,i-Math.cos(w)*_),w+=mS,n.lineTo(t+Math.sin(w)*h,i-Math.cos(w)*_),w+=mS,n.lineTo(t+Math.sin(w)*h,i-Math.cos(w)*_),n.closePath();break;case"rectRounded":l=_*.516,c=_-l,o=Math.cos(w+Ar)*c,d=Math.cos(w+Ar)*(r?r/2-l:c),a=Math.sin(w+Ar)*c,p=Math.sin(w+Ar)*(r?r/2-l:c),n.arc(t-d,i-a,l,w-ke,w-We),n.arc(t+p,i-o,l,w-We,w),n.arc(t+d,i+a,l,w,w+We),n.arc(t-p,i+o,l,w+We,w+ke),n.closePath();break;case"rect":if(!b){c=Math.SQRT1_2*_,h=r?r/2:c,n.rect(t-h,i-c,2*h,2*c);break}w+=Ar;case"rectRot":d=Math.cos(w)*(r?r/2:_),o=Math.cos(w)*_,a=Math.sin(w)*_,p=Math.sin(w)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+p,i-o),n.lineTo(t+d,i+a),n.lineTo(t-p,i+o),n.closePath();break;case"crossRot":w+=Ar;case"cross":d=Math.cos(w)*(r?r/2:_),o=Math.cos(w)*_,a=Math.sin(w)*_,p=Math.sin(w)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+p,i-o),n.lineTo(t-p,i+o);break;case"star":d=Math.cos(w)*(r?r/2:_),o=Math.cos(w)*_,a=Math.sin(w)*_,p=Math.sin(w)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+p,i-o),n.lineTo(t-p,i+o),w+=Ar,d=Math.cos(w)*(r?r/2:_),o=Math.cos(w)*_,a=Math.sin(w)*_,p=Math.sin(w)*(r?r/2:_),n.moveTo(t-d,i-a),n.lineTo(t+d,i+a),n.moveTo(t+p,i-o),n.lineTo(t-p,i+o);break;case"line":o=r?r/2:Math.cos(w)*_,a=Math.sin(w)*_,n.moveTo(t-o,i-a),n.lineTo(t+o,i+a);break;case"dash":n.moveTo(t,i),n.lineTo(t+Math.cos(w)*(r?r/2:_),i+Math.sin(w)*_);break;case!1:n.closePath();break}n.fill(),e.borderWidth>0&&n.stroke()}}function Nn(n,e,t){return t=t||.5,!e||n&&n.x>e.left-t&&n.x<e.right+t&&n.y>e.top-t&&n.y<e.bottom+t}function rc(n,e){n.save(),n.beginPath(),n.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),n.clip()}function sc(n){n.restore()}function US(n,e,t,i,r){if(!e)return n.lineTo(t.x,t.y);if(r==="middle"){let s=(e.x+t.x)/2;n.lineTo(s,e.y),n.lineTo(s,t.y)}else r==="after"!=!!i?n.lineTo(e.x,t.y):n.lineTo(t.x,e.y);n.lineTo(t.x,t.y)}function BS(n,e,t,i){if(!e)return n.lineTo(t.x,t.y);n.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?t.cp2x:t.cp1x,i?t.cp2y:t.cp1y,t.x,t.y)}function vF(n,e){e.translation&&n.translate(e.translation[0],e.translation[1]),fe(e.rotation)||n.rotate(e.rotation),e.color&&(n.fillStyle=e.color),e.textAlign&&(n.textAlign=e.textAlign),e.textBaseline&&(n.textBaseline=e.textBaseline)}function wF(n,e,t,i,r){if(r.strikethrough||r.underline){let s=n.measureText(i),o=e-s.actualBoundingBoxLeft,a=e+s.actualBoundingBoxRight,c=t-s.actualBoundingBoxAscent,l=t+s.actualBoundingBoxDescent,h=r.strikethrough?(c+l)/2:l;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=r.decorationWidth||2,n.moveTo(o,h),n.lineTo(a,h),n.stroke()}}function bF(n,e){let t=n.fillStyle;n.fillStyle=e.color,n.fillRect(e.left,e.top,e.width,e.height),n.fillStyle=t}function ji(n,e,t,i,r,s={}){let o=Pe(e)?e:[e],a=s.strokeWidth>0&&s.strokeColor!=="",c,l;for(n.save(),n.font=r.string,vF(n,s),c=0;c<o.length;++c)l=o[c],s.backdrop&&bF(n,s.backdrop),a&&(s.strokeColor&&(n.strokeStyle=s.strokeColor),fe(s.strokeWidth)||(n.lineWidth=s.strokeWidth),n.strokeText(l,t,i,s.maxWidth)),n.fillText(l,t,i,s.maxWidth),wF(n,t,i,l,s),i+=Number(r.lineHeight);n.restore()}function Js(n,e){let{x:t,y:i,w:r,h:s,radius:o}=e;n.arc(t+o.topLeft,i+o.topLeft,o.topLeft,1.5*ke,ke,!0),n.lineTo(t,i+s-o.bottomLeft),n.arc(t+o.bottomLeft,i+s-o.bottomLeft,o.bottomLeft,ke,We,!0),n.lineTo(t+r-o.bottomRight,i+s),n.arc(t+r-o.bottomRight,i+s-o.bottomRight,o.bottomRight,We,0,!0),n.lineTo(t+r,i+o.topRight),n.arc(t+r-o.topRight,i+o.topRight,o.topRight,0,-We,!0),n.lineTo(t+o.topLeft,i)}var IF=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,EF=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function TF(n,e){let t=(""+n).match(IF);if(!t||t[1]==="normal")return e*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return e*n}var SF=n=>+n||0;function ch(n,e){let t={},i=ae(e),r=i?Object.keys(e):e,s=ae(n)?i?o=>te(n[o],n[e[o]]):o=>n[o]:()=>n;for(let o of r)t[o]=SF(s(o));return t}function __(n){return ch(n,{top:"y",right:"x",bottom:"y",left:"x"})}function zi(n){return ch(n,["topLeft","topRight","bottomLeft","bottomRight"])}function mt(n){let e=__(n);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Xe(n,e){n=n||{},e=e||Ue.font;let t=te(n.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let i=te(n.style,e.style);i&&!(""+i).match(EF)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);let r={family:te(n.family,e.family),lineHeight:TF(te(n.lineHeight,e.lineHeight),t),size:t,style:i,weight:te(n.weight,e.weight),string:""};return r.string=_F(r),r}function Zs(n,e,t,i){let r=!0,s,o,a;for(s=0,o=n.length;s<o;++s)if(a=n[s],a!==void 0&&(e!==void 0&&typeof a=="function"&&(a=a(e),r=!1),t!==void 0&&Pe(a)&&(a=a[t%a.length],r=!1),a!==void 0))return i&&!r&&(i.cacheable=!1),a}function jS(n,e,t){let{min:i,max:r}=n,s=n_(e,(r-i)/2),o=(a,c)=>t&&a===0?0:a+c;return{min:o(i,-Math.abs(s)),max:o(r,s)}}function ci(n,e){return Object.assign(Object.create(n),e)}function lh(n,e=[""],t,i,r=()=>n[0]){let s=t||n;typeof i>"u"&&(i=WS("_fallback",n));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:s,_fallback:i,_getTarget:r,override:a=>lh([a,...n],e,s,i)};return new Proxy(o,{deleteProperty(a,c){return delete a[c],delete a._keys,delete n[0][c],!0},get(a,c){return zS(a,c,()=>MF(c,e,n,a))},getOwnPropertyDescriptor(a,c){return Reflect.getOwnPropertyDescriptor(a._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(a,c){return wS(a).includes(c)},ownKeys(a){return wS(a)},set(a,c,l){let h=a._storage||(a._storage=r());return a[c]=h[c]=l,delete a._keys,!0}})}function Dr(n,e,t,i){let r={_cacheable:!1,_proxy:n,_context:e,_subProxy:t,_stack:new Set,_descriptors:v_(n,i),setContext:s=>Dr(n,s,t,i),override:s=>Dr(n.override(s),e,t,i)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete n[o],!0},get(s,o,a){return zS(s,o,()=>AF(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(n,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,o)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(s,o){return Reflect.has(n,o)},ownKeys(){return Reflect.ownKeys(n)},set(s,o,a){return n[o]=a,delete s[o],!0}})}function v_(n,e={scriptable:!0,indexable:!0}){let{_scriptable:t=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=n;return{allKeys:r,scriptable:t,indexable:i,isScriptable:si(t)?t:()=>t,isIndexable:si(i)?i:()=>i}}var xF=(n,e)=>n?n+nh(e):e,w_=(n,e)=>ae(e)&&n!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function zS(n,e,t){if(Object.prototype.hasOwnProperty.call(n,e)||e==="constructor")return n[e];let i=t();return n[e]=i,i}function AF(n,e,t){let{_proxy:i,_context:r,_subProxy:s,_descriptors:o}=n,a=i[e];return si(a)&&o.isScriptable(e)&&(a=CF(e,a,n,t)),Pe(a)&&a.length&&(a=DF(e,a,n,o.isIndexable)),w_(e,a)&&(a=Dr(a,r,s&&s[e],o)),a}function CF(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=t;if(a.has(n))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+n);a.add(n);let c=e(s,o||i);return a.delete(n),w_(n,c)&&(c=b_(r._scopes,r,n,c)),c}function DF(n,e,t,i){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=t;if(typeof s.index<"u"&&i(n))return e[s.index%e.length];if(ae(e[0])){let c=e,l=r._scopes.filter(h=>h!==c);e=[];for(let h of c){let d=b_(l,r,n,h);e.push(Dr(d,s,o&&o[n],a))}}return e}function qS(n,e,t){return si(n)?n(e,t):n}var RF=(n,e)=>n===!0?e:typeof n=="string"?ai(e,n):void 0;function PF(n,e,t,i,r){for(let s of e){let o=RF(t,s);if(o){n.add(o);let a=qS(o._fallback,t,r);if(typeof a<"u"&&a!==t&&a!==i)return a}else if(o===!1&&typeof i<"u"&&t!==i)return null}return!1}function b_(n,e,t,i){let r=e._rootScopes,s=qS(e._fallback,t,i),o=[...n,...r],a=new Set;a.add(i);let c=vS(a,o,t,s||t,i);return c===null||typeof s<"u"&&s!==t&&(c=vS(a,o,s,c,i),c===null)?!1:lh(Array.from(a),[""],r,s,()=>kF(e,t,i))}function vS(n,e,t,i,r){for(;t;)t=PF(n,e,t,i,r);return t}function kF(n,e,t){let i=n._getTarget();e in i||(i[e]={});let r=i[e];return Pe(r)&&ae(t)?t:r||{}}function MF(n,e,t,i){let r;for(let s of e)if(r=WS(xF(s,n),t),typeof r<"u")return w_(n,r)?b_(t,i,n,r):r}function WS(n,e){for(let t of e){if(!t)continue;let i=t[n];if(typeof i<"u")return i}}function wS(n){let e=n._keys;return e||(e=n._keys=OF(n._scopes)),e}function OF(n){let e=new Set;for(let t of n)for(let i of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(i);return Array.from(e)}function I_(n,e,t,i){let{iScale:r}=n,{key:s="r"}=this._parsing,o=new Array(i),a,c,l,h;for(a=0,c=i;a<c;++a)l=a+t,h=e[l],o[a]={r:r.parse(ai(h,s),l)};return o}var NF=Number.EPSILON||1e-14,Hs=(n,e)=>e<n.length&&!n[e].skip&&n[e],$S=n=>n==="x"?"y":"x";function VF(n,e,t,i){let r=n.skip?e:n,s=e,o=t.skip?e:t,a=eh(s,r),c=eh(o,s),l=a/(a+c),h=c/(a+c);l=isNaN(l)?0:l,h=isNaN(h)?0:h;let d=i*l,p=i*h;return{previous:{x:s.x-d*(o.x-r.x),y:s.y-d*(o.y-r.y)},next:{x:s.x+p*(o.x-r.x),y:s.y+p*(o.y-r.y)}}}function LF(n,e,t){let i=n.length,r,s,o,a,c,l=Hs(n,0);for(let h=0;h<i-1;++h)if(c=l,l=Hs(n,h+1),!(!c||!l)){if(Ys(e[h],0,NF)){t[h]=t[h+1]=0;continue}r=t[h]/e[h],s=t[h+1]/e[h],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),t[h]=r*o*e[h],t[h+1]=s*o*e[h])}}function FF(n,e,t="x"){let i=$S(t),r=n.length,s,o,a,c=Hs(n,0);for(let l=0;l<r;++l){if(o=a,a=c,c=Hs(n,l+1),!a)continue;let h=a[t],d=a[i];o&&(s=(h-o[t])/3,a[`cp1${t}`]=h-s,a[`cp1${i}`]=d-s*e[l]),c&&(s=(c[t]-h)/3,a[`cp2${t}`]=h+s,a[`cp2${i}`]=d+s*e[l])}}function UF(n,e="x"){let t=$S(e),i=n.length,r=Array(i).fill(0),s=Array(i),o,a,c,l=Hs(n,0);for(o=0;o<i;++o)if(a=c,c=l,l=Hs(n,o+1),!!c){if(l){let h=l[e]-c[e];r[o]=h!==0?(l[t]-c[t])/h:0}s[o]=a?l?pn(r[o-1])!==pn(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}LF(n,r,s),FF(n,s,e)}function Qu(n,e,t){return Math.max(Math.min(n,t),e)}function BF(n,e){let t,i,r,s,o,a=Nn(n[0],e);for(t=0,i=n.length;t<i;++t)o=s,s=a,a=t<i-1&&Nn(n[t+1],e),s&&(r=n[t],o&&(r.cp1x=Qu(r.cp1x,e.left,e.right),r.cp1y=Qu(r.cp1y,e.top,e.bottom)),a&&(r.cp2x=Qu(r.cp2x,e.left,e.right),r.cp2y=Qu(r.cp2y,e.top,e.bottom)))}function HS(n,e,t,i,r){let s,o,a,c;if(e.spanGaps&&(n=n.filter(l=>!l.skip)),e.cubicInterpolationMode==="monotone")UF(n,r);else{let l=i?n[n.length-1]:n[0];for(s=0,o=n.length;s<o;++s)a=n[s],c=VF(l,a,n[Math.min(s+1,o-(i?0:1))%o],e.tension),a.cp1x=c.previous.x,a.cp1y=c.previous.y,a.cp2x=c.next.x,a.cp2y=c.next.y,l=a}e.capBezierPoints&&BF(n,t)}function uh(){return typeof window<"u"&&typeof document<"u"}function hh(n){let e=n.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function th(n,e,t){let i;return typeof n=="string"?(i=parseInt(n,10),n.indexOf("%")!==-1&&(i=i/100*e.parentNode[t])):i=n,i}var dh=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function jF(n,e){return dh(n).getPropertyValue(e)}var zF=["top","right","bottom","left"];function Cr(n,e,t){let i={};t=t?"-"+t:"";for(let r=0;r<4;r++){let s=zF[r];i[s]=parseFloat(n[e+"-"+s+t])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}var qF=(n,e,t)=>(n>0||e>0)&&(!t||!t.shadowRoot);function WF(n,e){let t=n.touches,i=t&&t.length?t[0]:n,{offsetX:r,offsetY:s}=i,o=!1,a,c;if(qF(r,s,n.target))a=r,c=s;else{let l=e.getBoundingClientRect();a=i.clientX-l.left,c=i.clientY-l.top,o=!0}return{x:a,y:c,box:o}}function qi(n,e){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:i}=e,r=dh(t),s=r.boxSizing==="border-box",o=Cr(r,"padding"),a=Cr(r,"border","width"),{x:c,y:l,box:h}=WF(n,t),d=o.left+(h&&a.left),p=o.top+(h&&a.top),{width:g,height:b}=e;return s&&(g-=o.width+a.width,b-=o.height+a.height),{x:Math.round((c-d)/g*t.width/i),y:Math.round((l-p)/b*t.height/i)}}function $F(n,e,t){let i,r;if(e===void 0||t===void 0){let s=n&&hh(n);if(!s)e=n.clientWidth,t=n.clientHeight;else{let o=s.getBoundingClientRect(),a=dh(s),c=Cr(a,"border","width"),l=Cr(a,"padding");e=o.width-l.width-c.width,t=o.height-l.height-c.height,i=th(a.maxWidth,s,"clientWidth"),r=th(a.maxHeight,s,"clientHeight")}}return{width:e,height:t,maxWidth:i||Zu,maxHeight:r||Zu}}var Xu=n=>Math.round(n*10)/10;function GS(n,e,t,i){let r=dh(n),s=Cr(r,"margin"),o=th(r.maxWidth,n,"clientWidth")||Zu,a=th(r.maxHeight,n,"clientHeight")||Zu,c=$F(n,e,t),{width:l,height:h}=c;if(r.boxSizing==="content-box"){let p=Cr(r,"border","width"),g=Cr(r,"padding");l-=g.width+p.width,h-=g.height+p.height}return l=Math.max(0,l-s.width),h=Math.max(0,i?l/i:h-s.height),l=Xu(Math.min(l,o,c.maxWidth)),h=Xu(Math.min(h,a,c.maxHeight)),l&&!h&&(h=Xu(l/2)),(e!==void 0||t!==void 0)&&i&&c.height&&h>c.height&&(h=c.height,l=Xu(Math.floor(h*i))),{width:l,height:h}}function E_(n,e,t){let i=e||1,r=Math.floor(n.height*i),s=Math.floor(n.width*i);n.height=Math.floor(n.height),n.width=Math.floor(n.width);let o=n.canvas;return o.style&&(t||!o.style.height&&!o.style.width)&&(o.style.height=`${n.height}px`,o.style.width=`${n.width}px`),n.currentDevicePixelRatio!==i||o.height!==r||o.width!==s?(n.currentDevicePixelRatio=i,o.height=r,o.width=s,n.ctx.setTransform(i,0,0,i,0,0),!0):!1}var KS=function(){let n=!1;try{let e={get passive(){return n=!0,!1}};uh()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return n}();function T_(n,e){let t=jF(n,e),i=t&&t.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function Fi(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:n.y+t*(e.y-n.y)}}function YS(n,e,t,i){return{x:n.x+t*(e.x-n.x),y:i==="middle"?t<.5?n.y:e.y:i==="after"?t<1?n.y:e.y:t>0?e.y:n.y}}function QS(n,e,t,i){let r={x:n.cp2x,y:n.cp2y},s={x:e.cp1x,y:e.cp1y},o=Fi(n,r,t),a=Fi(r,s,t),c=Fi(s,e,t),l=Fi(o,a,t),h=Fi(a,c,t);return Fi(l,h,t)}var HF=function(n,e){return{x(t){return n+n+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,i){return t-i},leftForLtr(t,i){return t-i}}},GF=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,e){return n+e},leftForLtr(n,e){return n}}};function Pr(n,e,t){return n?HF(e,t):GF()}function S_(n,e){let t,i;(e==="ltr"||e==="rtl")&&(t=n.canvas.style,i=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),n.prevTextDirection=i)}function x_(n,e){e!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",e[0],e[1]))}function XS(n){return n==="angle"?{between:Qs,compare:uF,normalize:Nt}:{between:Ln,compare:(e,t)=>e-t,normalize:e=>e}}function bS({start:n,end:e,count:t,loop:i,style:r}){return{start:n%t,end:e%t,loop:i&&(e-n+1)%t===0,style:r}}function KF(n,e,t){let{property:i,start:r,end:s}=t,{between:o,normalize:a}=XS(i),c=e.length,{start:l,end:h,loop:d}=n,p,g;if(d){for(l+=c,h+=c,p=0,g=c;p<g&&o(a(e[l%c][i]),r,s);++p)l--,h--;l%=c,h%=c}return h<l&&(h+=c),{start:l,end:h,loop:d,style:n.style}}function A_(n,e,t){if(!t)return[n];let{property:i,start:r,end:s}=t,o=e.length,{compare:a,between:c,normalize:l}=XS(i),{start:h,end:d,loop:p,style:g}=KF(n,e,t),b=[],_=!1,w=null,D,R,k,V=()=>c(r,k,D)&&a(r,k)!==0,O=()=>a(s,D)===0||c(s,k,D),N=()=>_||V(),E=()=>!_||O();for(let v=h,I=h;v<=d;++v)R=e[v%o],!R.skip&&(D=l(R[i]),D!==k&&(_=c(D,r,s),w===null&&N()&&(w=a(D,r)===0?v:I),w!==null&&E()&&(b.push(bS({start:w,end:v,loop:p,count:o,style:g})),w=null),I=v,k=D));return w!==null&&b.push(bS({start:w,end:d,loop:p,count:o,style:g})),b}function C_(n,e){let t=[],i=n.segments;for(let r=0;r<i.length;r++){let s=A_(i[r],n.points,e);s.length&&t.push(...s)}return t}function YF(n,e,t,i){let r=0,s=e-1;if(t&&!i)for(;r<e&&!n[r].skip;)r++;for(;r<e&&n[r].skip;)r++;for(r%=e,t&&(s+=r);s>r&&n[s%e].skip;)s--;return s%=e,{start:r,end:s}}function QF(n,e,t,i){let r=n.length,s=[],o=e,a=n[e],c;for(c=e+1;c<=t;++c){let l=n[c%r];l.skip||l.stop?a.skip||(i=!1,s.push({start:e%r,end:(c-1)%r,loop:i}),e=o=l.stop?c:null):(o=c,a.skip&&(e=c)),a=l}return o!==null&&s.push({start:e%r,end:o%r,loop:i}),s}function JS(n,e){let t=n.points,i=n.options.spanGaps,r=t.length;if(!r)return[];let s=!!n._loop,{start:o,end:a}=YF(t,r,s,i);if(i===!0)return IS(n,[{start:o,end:a,loop:s}],t,e);let c=a<o?a+r:a,l=!!n._fullLoop&&o===0&&a===r-1;return IS(n,QF(t,o,c,l),t,e)}function IS(n,e,t,i){return!i||!i.setContext||!t?e:XF(n,e,t,i)}function XF(n,e,t,i){let r=n._chart.getContext(),s=ES(n.options),{_datasetIndex:o,options:{spanGaps:a}}=n,c=t.length,l=[],h=s,d=e[0].start,p=d;function g(b,_,w,D){let R=a?-1:1;if(b!==_){for(b+=c;t[b%c].skip;)b-=R;for(;t[_%c].skip;)_+=R;b%c!==_%c&&(l.push({start:b%c,end:_%c,loop:w,style:D}),h=D,d=_%c)}}for(let b of e){d=a?d:b.start;let _=t[d%c],w;for(p=d+1;p<=b.end;p++){let D=t[p%c];w=ES(i.setContext(ci(r,{type:"segment",p0:_,p1:D,p0DataIndex:(p-1)%c,p1DataIndex:p%c,datasetIndex:o}))),JF(w,h)&&g(d,p-1,b.loop,h),_=D,h=w}d<p-1&&g(d,p-1,b.loop,h)}return l}function ES(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function JF(n,e){if(!e)return!1;let t=[],i=function(r,s){return p_(s)?(t.includes(s)||t.push(s),t.indexOf(s)):s};return JSON.stringify(n,i)!==JSON.stringify(e,i)}var F_=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,i,r){let s=t.listeners[r],o=t.duration;s.forEach(a=>a({chart:e,initial:t.initial,numSteps:o,currentStep:Math.min(i-t.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=u_.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((i,r)=>{if(!i.running||!i.items.length)return;let s=i.items,o=s.length-1,a=!1,c;for(;o>=0;--o)c=s[o],c._active?(c._total>i.duration&&(i.duration=c._total),c.tick(e),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,i,e,"progress")),s.length||(i.running=!1,this._notify(r,i,e,"complete"),i.initial=!1),t+=s.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){let t=this._charts,i=t.get(e);return i||(i={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,i)),i}listen(e,t,i){this._getAnims(e).listeners[t].push(i)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){let t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((i,r)=>Math.max(i,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;let t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){let t=this._charts.get(e);if(!t||!t.items.length)return;let i=t.items,r=i.length-1;for(;r>=0;--r)i[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}},li=new F_,ZS="transparent",ZF={boolean(n,e,t){return t>.5?e:n},color(n,e,t){let i=m_(n||ZS),r=i.valid&&m_(e||ZS);return r&&r.valid?r.mix(i,t).hexString():e},number(n,e,t){return n+(e-n)*t}},U_=class{constructor(e,t,i,r){let s=t[i];r=Zs([e.to,r,s,e.from]);let o=Zs([e.from,s,r]);this._active=!0,this._fn=e.fn||ZF[e.type||typeof o],this._easing=Ws[e.easing]||Ws.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=i,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,i){if(this._active){this._notify(!1);let r=this._target[this._prop],s=i-this._start,o=this._duration-s;this._start=i,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=s,this._loop=!!e.loop,this._to=Zs([e.to,t,r,e.from]),this._from=Zs([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){let t=e-this._start,i=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,c;if(this._active=s!==a&&(o||t<i),!this._active){this._target[r]=a,this._notify(!0);return}if(t<0){this._target[r]=s;return}c=t/i%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(s,a,c)}wait(){let e=this._promises||(this._promises=[]);return new Promise((t,i)=>{e.push({res:t,rej:i})})}_notify(e){let t=e?"res":"rej",i=this._promises||[];for(let r=0;r<i.length;r++)i[r][t]()}},Ih=class{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!ae(e))return;let t=Object.keys(Ue.animation),i=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{let s=e[r];if(!ae(s))return;let o={};for(let a of t)o[a]=s[a];(Pe(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!i.has(a))&&i.set(a,o)})})}_animateOptions(e,t){let i=t.options,r=t2(e,i);if(!r)return[];let s=this._createAnimations(r,i);return i.$shared&&e2(e.options.$animations,i).then(()=>{e.options=i},()=>{}),s}_createAnimations(e,t){let i=this._properties,r=[],s=e.$animations||(e.$animations={}),o=Object.keys(t),a=Date.now(),c;for(c=o.length-1;c>=0;--c){let l=o[c];if(l.charAt(0)==="$")continue;if(l==="options"){r.push(...this._animateOptions(e,t));continue}let h=t[l],d=s[l],p=i.get(l);if(d)if(p&&d.active()){d.update(p,h,a);continue}else d.cancel();if(!p||!p.duration){e[l]=h;continue}s[l]=d=new U_(p,e,l,h),r.push(d)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}let i=this._createAnimations(e,t);if(i.length)return li.add(this._chart,i),!0}};function e2(n,e){let t=[],i=Object.keys(e);for(let r=0;r<i.length;r++){let s=n[i[r]];s&&s.active()&&t.push(s.wait())}return Promise.all(t)}function t2(n,e){if(!e)return;let t=n.options;if(!t){n.options=e;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function ex(n,e){let t=n&&n.options||{},i=t.reverse,r=t.min===void 0?e:0,s=t.max===void 0?e:0;return{start:i?s:r,end:i?r:s}}function n2(n,e,t){if(t===!1)return!1;let i=ex(n,t),r=ex(e,t);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}function i2(n){let e,t,i,r;return ae(n)?(e=n.top,t=n.right,i=n.bottom,r=n.left):e=t=i=r=n,{top:e,right:t,bottom:i,left:r,disabled:n===!1}}function eA(n,e){let t=[],i=n._getSortedDatasetMetas(e),r,s;for(r=0,s=i.length;r<s;++r)t.push(i[r].index);return t}function tx(n,e,t,i={}){let r=n.keys,s=i.mode==="single",o,a,c,l;if(e!==null){for(o=0,a=r.length;o<a;++o){if(c=+r[o],c===t){if(i.all)continue;break}l=n.values[c],Fe(l)&&(s||e===0||pn(e)===pn(l))&&(e+=l)}return e}}function r2(n,e){let{iScale:t,vScale:i}=e,r=t.axis==="x"?"x":"y",s=i.axis==="x"?"x":"y",o=Object.keys(n),a=new Array(o.length),c,l,h;for(c=0,l=o.length;c<l;++c)h=o[c],a[c]={[r]:h,[s]:n[h]};return a}function nx(n,e){let t=n&&n.options.stacked;return t||t===void 0&&e.stack!==void 0}function s2(n,e,t){return`${n.id}.${e.id}.${t.stack||t.type}`}function o2(n){let{min:e,max:t,minDefined:i,maxDefined:r}=n.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function a2(n,e,t){let i=n[e]||(n[e]={});return i[t]||(i[t]={})}function ix(n,e,t,i){for(let r of e.getMatchingVisibleMetas(i).reverse()){let s=n[r.index];if(t&&s>0||!t&&s<0)return r.index}return null}function rx(n,e){let{chart:t,_cachedMeta:i}=n,r=t._stacks||(t._stacks={}),{iScale:s,vScale:o,index:a}=i,c=s.axis,l=o.axis,h=s2(s,o,i),d=e.length,p;for(let g=0;g<d;++g){let b=e[g],{[c]:_,[l]:w}=b,D=b._stacks||(b._stacks={});p=D[l]=a2(r,h,_),p[a]=w,p._top=ix(p,o,!0,i.type),p._bottom=ix(p,o,!1,i.type);let R=p._visualValues||(p._visualValues={});R[a]=w}}function D_(n,e){let t=n.scales;return Object.keys(t).filter(i=>t[i].axis===e).shift()}function c2(n,e){return ci(n,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function l2(n,e,t){return ci(n,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function oc(n,e){let t=n.controller.index,i=n.vScale&&n.vScale.axis;if(i){e=e||n._parsed;for(let r of e){let s=r._stacks;if(!s||s[i]===void 0||s[i][t]===void 0)return;delete s[i][t],s[i]._visualValues!==void 0&&s[i]._visualValues[t]!==void 0&&delete s[i]._visualValues[t]}}}var R_=n=>n==="reset"||n==="none",sx=(n,e)=>e?n:Object.assign({},n),u2=(n,e,t)=>n&&!e.hidden&&e._stacked&&{keys:eA(t,!0),values:null},$i=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,i){this.chart=t,this._ctx=t.ctx,this.index=i,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=nx(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&oc(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,i=this._cachedMeta,r=this.getDataset(),s=(p,g,b,_)=>p==="x"?g:p==="r"?_:b,o=i.xAxisID=te(r.xAxisID,D_(t,"x")),a=i.yAxisID=te(r.yAxisID,D_(t,"y")),c=i.rAxisID=te(r.rAxisID,D_(t,"r")),l=i.indexAxis,h=i.iAxisID=s(l,o,a,c),d=i.vAxisID=s(l,a,o,c);i.xScale=this.getScaleForId(o),i.yScale=this.getScaleForId(a),i.rScale=this.getScaleForId(c),i.iScale=this.getScaleForId(h),i.vScale=this.getScaleForId(d)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let i=this._cachedMeta;return t===i.iScale?i.vScale:i.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&c_(this._data,this),t._stacked&&oc(t)}_dataCheck(){let t=this.getDataset(),i=t.data||(t.data=[]),r=this._data;if(ae(i)){let s=this._cachedMeta;this._data=r2(i,s)}else if(r!==i){if(r){c_(r,this);let s=this._cachedMeta;oc(s),s._parsed=[]}i&&Object.isExtensible(i)&&OS(i,this),this._syncList=[],this._data=i}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let i=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=i._stacked;i._stacked=nx(i.vScale,i),i.stack!==r.stack&&(s=!0,oc(i),i.stack=r.stack),this._resyncElements(t),(s||o!==i._stacked)&&rx(this,i._parsed)}configure(){let t=this.chart.config,i=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),i,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,i){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,c=o.axis,l=t===0&&i===s.length?!0:r._sorted,h=t>0&&r._parsed[t-1],d,p,g;if(this._parsing===!1)r._parsed=s,r._sorted=!0,g=s;else{Pe(s[t])?g=this.parseArrayData(r,s,t,i):ae(s[t])?g=this.parseObjectData(r,s,t,i):g=this.parsePrimitiveData(r,s,t,i);let b=()=>p[c]===null||h&&p[c]<h[c];for(d=0;d<i;++d)r._parsed[d+t]=p=g[d],l&&(b()&&(l=!1),h=p);r._sorted=l}a&&rx(this,g)}parsePrimitiveData(t,i,r,s){let{iScale:o,vScale:a}=t,c=o.axis,l=a.axis,h=o.getLabels(),d=o===a,p=new Array(s),g,b,_;for(g=0,b=s;g<b;++g)_=g+r,p[g]={[c]:d||o.parse(h[_],_),[l]:a.parse(i[_],_)};return p}parseArrayData(t,i,r,s){let{xScale:o,yScale:a}=t,c=new Array(s),l,h,d,p;for(l=0,h=s;l<h;++l)d=l+r,p=i[d],c[l]={x:o.parse(p[0],d),y:a.parse(p[1],d)};return c}parseObjectData(t,i,r,s){let{xScale:o,yScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,h=new Array(s),d,p,g,b;for(d=0,p=s;d<p;++d)g=d+r,b=i[g],h[d]={x:o.parse(ai(b,c),g),y:a.parse(ai(b,l),g)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,i,r){let s=this.chart,o=this._cachedMeta,a=i[t.axis],c={keys:eA(s,!0),values:i._stacks[t.axis]._visualValues};return tx(c,a,o.index,{mode:r})}updateRangeFromParsed(t,i,r,s){let o=r[i.axis],a=o===null?NaN:o,c=s&&r._stacks[i.axis];s&&c&&(s.values=c,a=tx(s,o,this._cachedMeta.index)),t.min=Math.min(t.min,a),t.max=Math.max(t.max,a)}getMinMax(t,i){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&t===r.iScale,a=s.length,c=this._getOtherScale(t),l=u2(i,r,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:d,max:p}=o2(c),g,b;function _(){b=s[g];let w=b[c.axis];return!Fe(b[t.axis])||d>w||p<w}for(g=0;g<a&&!(!_()&&(this.updateRangeFromParsed(h,t,b,l),o));++g);if(o){for(g=a-1;g>=0;--g)if(!_()){this.updateRangeFromParsed(h,t,b,l);break}}return h}getAllParsedValues(t){let i=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=i.length;s<o;++s)a=i[s][t.axis],Fe(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(t){let i=this._cachedMeta,r=i.iScale,s=i.vScale,o=this.getParsed(t);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(t){let i=this._cachedMeta;this.update(t||"default"),i._clip=i2(te(this.options.clip,n2(i.xScale,i.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,i=this.chart,r=this._cachedMeta,s=r.data||[],o=i.chartArea,a=[],c=this._drawStart||0,l=this._drawCount||s.length-c,h=this.options.drawActiveElementsOnTop,d;for(r.dataset&&r.dataset.draw(t,o,c,l),d=c;d<c+l;++d){let p=s[d];p.hidden||(p.active&&h?a.push(p):p.draw(t,o))}for(d=0;d<a.length;++d)a[d].draw(t,o)}getStyle(t,i){let r=i?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,i,r){let s=this.getDataset(),o;if(t>=0&&t<this._cachedMeta.data.length){let a=this._cachedMeta.data[t];o=a.$context||(a.$context=l2(this.getContext(),t,a)),o.parsed=this.getParsed(t),o.raw=s.data[t],o.index=o.dataIndex=t}else o=this.$context||(this.$context=c2(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!i,o.mode=r,o}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,i){return this._resolveElementOptions(this.dataElementType.id,i,t)}_resolveElementOptions(t,i="default",r){let s=i==="active",o=this._cachedDataOpts,a=t+"-"+i,c=o[a],l=this.enableOptionSharing&&Ks(r);if(c)return sx(c,l);let h=this.chart.config,d=h.datasetElementScopeKeys(this._type,t),p=s?[`${t}Hover`,"hover",t,""]:[t,""],g=h.getOptionScopes(this.getDataset(),d),b=Object.keys(Ue.elements[t]),_=()=>this.getContext(r,s,i),w=h.resolveNamedOptions(g,b,_,p);return w.$shared&&(w.$shared=l,o[a]=Object.freeze(sx(w,l))),w}_resolveAnimations(t,i,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${i}`,c=o[a];if(c)return c;let l;if(s.options.animation!==!1){let d=this.chart.config,p=d.datasetAnimationScopeKeys(this._type,i),g=d.getOptionScopes(this.getDataset(),p);l=d.createResolver(g,this.getContext(t,r,i))}let h=new Ih(s,l&&l.animations);return l&&l._cacheable&&(o[a]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,i){return!i||R_(t)||this.chart._animationsDisabled}_getSharedOptions(t,i){let r=this.resolveDataElementOptions(t,i),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(i,o)||o!==s;return this.updateSharedOptions(o,i,r),{sharedOptions:o,includeOptions:a}}updateElement(t,i,r,s){R_(s)?Object.assign(t,r):this._resolveAnimations(i,s).update(t,r)}updateSharedOptions(t,i,r){t&&!R_(i)&&this._resolveAnimations(void 0,i).update(t,r)}_setStyle(t,i,r,s){t.active=s;let o=this.getStyle(i,s);this._resolveAnimations(i,r,s).update(t,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(t,i,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,i,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let i=this._data,r=this._cachedMeta.data;for(let[c,l,h]of this._syncList)this[c](l,h);this._syncList=[];let s=r.length,o=i.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,t):o<s&&this._removeElements(o,s-o)}_insertElements(t,i,r=!0){let s=this._cachedMeta,o=s.data,a=t+i,c,l=h=>{for(h.length+=i,c=h.length-1;c>=a;c--)h[c]=h[c-i]};for(l(o),c=t;c<a;++c)o[c]=new this.dataElementType;this._parsing&&l(s._parsed),this.parse(t,i),r&&this.updateElements(o,t,i,"reset")}updateElements(t,i,r,s){}_removeElements(t,i){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(t,i);r._stacked&&oc(r,s)}r.data.splice(t,i)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[i,r,s]=t;this[i](r,s)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,i){i&&this._sync(["_removeElements",t,i]);let r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function h2(n,e){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(e),i=[];for(let r=0,s=t.length;r<s;r++)i=i.concat(t[r].controller.getAllParsedValues(n));n._cache.$bar=l_(i.sort((r,s)=>r-s))}return n._cache.$bar}function d2(n){let e=n.iScale,t=h2(e,n.type),i=e._length,r,s,o,a,c=()=>{o===32767||o===-32768||(Ks(a)&&(i=Math.min(i,Math.abs(o-a)||i)),a=o)};for(r=0,s=t.length;r<s;++r)o=e.getPixelForValue(t[r]),c();for(a=void 0,r=0,s=e.ticks.length;r<s;++r)o=e.getPixelForTick(r),c();return i}function f2(n,e,t,i){let r=t.barThickness,s,o;return fe(r)?(s=e.min*t.categoryPercentage,o=t.barPercentage):(s=r*i,o=1),{chunk:s/i,ratio:o,start:e.pixels[n]-s/2}}function p2(n,e,t,i){let r=e.pixels,s=r[n],o=n>0?r[n-1]:null,a=n<r.length-1?r[n+1]:null,c=t.categoryPercentage;o===null&&(o=s-(a===null?e.end-e.start:a-s)),a===null&&(a=s+s-o);let l=s-(s-Math.min(o,a))/2*c;return{chunk:Math.abs(a-o)/2*c/i,ratio:t.barPercentage,start:l}}function m2(n,e,t,i){let r=t.parse(n[0],i),s=t.parse(n[1],i),o=Math.min(r,s),a=Math.max(r,s),c=o,l=a;Math.abs(o)>Math.abs(a)&&(c=a,l=o),e[t.axis]=l,e._custom={barStart:c,barEnd:l,start:r,end:s,min:o,max:a}}function tA(n,e,t,i){return Pe(n)?m2(n,e,t,i):e[t.axis]=t.parse(n,i),e}function ox(n,e,t,i){let r=n.iScale,s=n.vScale,o=r.getLabels(),a=r===s,c=[],l,h,d,p;for(l=t,h=t+i;l<h;++l)p=e[l],d={},d[r.axis]=a||r.parse(o[l],l),c.push(tA(p,d,s,l));return c}function P_(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function g2(n,e,t){return n!==0?pn(n):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function y2(n){let e,t,i,r,s;return n.horizontal?(e=n.base>n.x,t="left",i="right"):(e=n.base<n.y,t="bottom",i="top"),e?(r="end",s="start"):(r="start",s="end"),{start:t,end:i,reverse:e,top:r,bottom:s}}function _2(n,e,t,i){let r=e.borderSkipped,s={};if(!r){n.borderSkipped=s;return}if(r===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:c,top:l,bottom:h}=y2(n);r==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===i?r=l:(t._bottom||0)===i?r=h:(s[ax(h,o,a,c)]=!0,r=l)),s[ax(r,o,a,c)]=!0,n.borderSkipped=s}function ax(n,e,t,i){return i?(n=v2(n,e,t),n=cx(n,t,e)):n=cx(n,e,t),n}function v2(n,e,t){return n===e?t:n===t?e:n}function cx(n,e,t){return n==="start"?e:n==="end"?t:n}function w2(n,{inflateAmount:e},t){n.inflateAmount=e==="auto"?t===1?.33:0:e}var b2=(()=>{class n extends $i{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,i,r,s){return ox(t,i,r,s)}parseArrayData(t,i,r,s){return ox(t,i,r,s)}parseObjectData(t,i,r,s){let{iScale:o,vScale:a}=t,{xAxisKey:c="x",yAxisKey:l="y"}=this._parsing,h=o.axis==="x"?c:l,d=a.axis==="x"?c:l,p=[],g,b,_,w;for(g=r,b=r+s;g<b;++g)w=i[g],_={},_[o.axis]=o.parse(ai(w,h),g),p.push(tA(ai(w,d),_,a,g));return p}updateRangeFromParsed(t,i,r,s){super.updateRangeFromParsed(t,i,r,s);let o=r._custom;o&&i===this._cachedMeta.vScale&&(t.min=Math.min(t.min,o.min),t.max=Math.max(t.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let i=this._cachedMeta,{iScale:r,vScale:s}=i,o=this.getParsed(t),a=o._custom,c=P_(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:c}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let i=this._cachedMeta;this.updateElements(i.data,0,i.data.length,t)}updateElements(t,i,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:c}}=this,l=c.getBasePixel(),h=c.isHorizontal(),d=this._getRuler(),{sharedOptions:p,includeOptions:g}=this._getSharedOptions(i,s);for(let b=i;b<i+r;b++){let _=this.getParsed(b),w=o||fe(_[c.axis])?{base:l,head:l}:this._calculateBarValuePixels(b),D=this._calculateBarIndexPixels(b,d),R=(_._stacks||{})[c.axis],k={horizontal:h,base:w.base,enableBorderRadius:!R||P_(_._custom)||a===R._top||a===R._bottom,x:h?w.head:D.center,y:h?D.center:w.head,height:h?D.size:Math.abs(w.size),width:h?Math.abs(w.size):D.size};g&&(k.options=p||this.resolveDataElementOptions(b,t[b].active?"active":s));let V=k.options||t[b].options;_2(k,V,R,a),w2(k,V,d.ratio),this.updateElement(t[b],b,k,s)}}_getStacks(t,i){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(d=>d.controller.options.grouped),o=r.options.stacked,a=[],c=this._cachedMeta.controller.getParsed(i),l=c&&c[r.axis],h=d=>{let p=d._parsed.find(b=>b[r.axis]===l),g=p&&p[d.vScale.axis];if(fe(g)||isNaN(g))return!0};for(let d of s)if(!(i!==void 0&&h(d))&&((o===!1||a.indexOf(d.stack)===-1||o===void 0&&d.stack===void 0)&&a.push(d.stack),d.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,i,r){let s=this._getStacks(t,r),o=i!==void 0?s.indexOf(i):-1;return o===-1?s.length-1:o}_getRuler(){let t=this.options,i=this._cachedMeta,r=i.iScale,s=[],o,a;for(o=0,a=i.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let c=t.barThickness;return{min:c||d2(i),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:c?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:i,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,c=o||0,l=this.getParsed(t),h=l._custom,d=P_(h),p=l[i.axis],g=0,b=r?this.applyStack(i,l,r):p,_,w;b!==p&&(g=b-p,b=p),d&&(p=h.barStart,b=h.barEnd-h.barStart,p!==0&&pn(p)!==pn(h.barEnd)&&(g=0),g+=p);let D=!fe(o)&&!d?o:g,R=i.getPixelForValue(D);if(this.chart.getDataVisibility(t)?_=i.getPixelForValue(g+b):_=R,w=_-R,Math.abs(w)<a){w=g2(w,i,c)*a,p===c&&(R-=w/2);let k=i.getPixelForDecimal(0),V=i.getPixelForDecimal(1),O=Math.min(k,V),N=Math.max(k,V);R=Math.max(Math.min(R,N),O),_=R+w,r&&!d&&(l._stacks[i.axis]._visualValues[s]=i.getValueForPixel(_)-i.getValueForPixel(R))}if(R===i.getPixelForValue(c)){let k=pn(w)*i.getLineWidthForValue(c)/2;R+=k,w-=k}return{size:w,base:R,head:_,center:_+w/2}}_calculateBarIndexPixels(t,i){let r=i.scale,s=this.options,o=s.skipNull,a=te(s.maxBarThickness,1/0),c,l;if(i.grouped){let h=o?this._getStackCount(t):i.stackCount,d=s.barThickness==="flex"?p2(t,i,s,h):f2(t,i,s,h),p=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);c=d.start+d.chunk*p+d.chunk/2,l=Math.min(a,d.chunk*d.ratio)}else c=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(a,i.min*i.ratio);return{base:c-l/2,head:c+l/2,center:c,size:l}}draw(){let t=this._cachedMeta,i=t.vScale,r=t.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[i.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return n})(),I2=(()=>{class n extends $i{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,i,r,s){let o=super.parsePrimitiveData(t,i,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(t,i,r,s){let o=super.parseArrayData(t,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=te(c[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(t,i,r,s){let o=super.parseObjectData(t,i,r,s);for(let a=0;a<o.length;a++){let c=i[r+a];o[a]._custom=te(c&&c.r&&+c.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let t=this._cachedMeta.data,i=0;for(let r=t.length-1;r>=0;--r)i=Math.max(i,t[r].size(this.resolveDataElementOptions(r))/2);return i>0&&i}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y),h=a._custom;return{label:r[t]||"",value:"("+c+", "+l+(h?", "+h:"")+")"}}update(t){let i=this._cachedMeta.data;this.updateElements(i,0,i.length,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c}=this._cachedMeta,{sharedOptions:l,includeOptions:h}=this._getSharedOptions(i,s),d=a.axis,p=c.axis;for(let g=i;g<i+r;g++){let b=t[g],_=!o&&this.getParsed(g),w={},D=w[d]=o?a.getPixelForDecimal(.5):a.getPixelForValue(_[d]),R=w[p]=o?c.getBasePixel():c.getPixelForValue(_[p]);w.skip=isNaN(D)||isNaN(R),h&&(w.options=l||this.resolveDataElementOptions(g,b.active?"active":s),o&&(w.options.radius=0)),this.updateElement(b,g,w,s)}}resolveDataElementOptions(t,i){let r=this.getParsed(t),s=super.resolveDataElementOptions(t,i);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return i!=="active"&&(s.radius=0),s.radius+=te(r&&r._custom,o),s}}return n})();function E2(n,e,t){let i=1,r=1,s=0,o=0;if(e<Me){let a=n,c=a+e,l=Math.cos(a),h=Math.sin(a),d=Math.cos(c),p=Math.sin(c),g=(k,V,O)=>Qs(k,a,c,!0)?1:Math.max(V,V*t,O,O*t),b=(k,V,O)=>Qs(k,a,c,!0)?-1:Math.min(V,V*t,O,O*t),_=g(0,l,d),w=g(We,h,p),D=b(ke,l,d),R=b(ke+We,h,p);i=(_-D)/2,r=(w-R)/2,s=-(_+D)/2,o=-(w+R)/2}return{ratioX:i,ratioY:r,offsetX:s,offsetY:o}}var rv=(()=>{class n extends $i{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}}};constructor(t,i){super(t,i),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,i){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=l=>+r[l];if(ae(r[t])){let{key:l="value"}=this._parsing;o=h=>+ai(r[h],l)}let a,c;for(a=t,c=t+i;a<c;++a)s._parsed[a]=o(a)}}_getRotation(){return Zt(this.options.rotation-90)}_getCircumference(){return Zt(this.options.circumference)}_getRotationExtents(){let t=Me,i=-Me;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();t=Math.min(t,o),i=Math.max(i,o+a)}return{rotation:t,circumference:i-t}}update(t){let i=this.chart,{chartArea:r}=i,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,c=Math.max((Math.min(r.width,r.height)-a)/2,0),l=Math.min(SS(this.options.cutout,c),1),h=this._getRingWeight(this.index),{circumference:d,rotation:p}=this._getRotationExtents(),{ratioX:g,ratioY:b,offsetX:_,offsetY:w}=E2(p,d,l),D=(r.width-a)/g,R=(r.height-a)/b,k=Math.max(Math.min(D,R)/2,0),V=n_(this.options.radius,k),O=Math.max(V*l,0),N=(V-O)/this._getVisibleDatasetWeightTotal();this.offsetX=_*V,this.offsetY=w*V,s.total=this.calculateTotal(),this.outerRadius=V-N*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-N*h,0),this.updateElements(o,0,o.length,t)}_circumference(t,i){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return i&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||s._parsed[t]===null||s.data[t].hidden?0:this.calculateCircumference(s._parsed[t]*o/Me)}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,c=a.chartArea,h=a.options.animation,d=(c.left+c.right)/2,p=(c.top+c.bottom)/2,g=o&&h.animateScale,b=g?0:this.innerRadius,_=g?0:this.outerRadius,{sharedOptions:w,includeOptions:D}=this._getSharedOptions(i,s),R=this._getRotation(),k;for(k=0;k<i;++k)R+=this._circumference(k,o);for(k=i;k<i+r;++k){let V=this._circumference(k,o),O=t[k],N={x:d+this.offsetX,y:p+this.offsetY,startAngle:R,endAngle:R+V,circumference:V,outerRadius:_,innerRadius:b};D&&(N.options=w||this.resolveDataElementOptions(k,O.active?"active":s)),R+=V,this.updateElement(O,k,N,s)}}calculateTotal(){let t=this._cachedMeta,i=t.data,r=0,s;for(s=0;s<i.length;s++){let o=t._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!i[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(t){let i=this._cachedMeta.total;return i>0&&!isNaN(t)?Me*(Math.abs(t)/i):0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Xs(i._parsed[t],r.options.locale);return{label:s[t]||"",value:o}}getMaxBorderWidth(t){let i=0,r=this.chart,s,o,a,c,l;if(!t){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),t=a.data,c=a.controller;break}}if(!t)return 0;for(s=0,o=t.length;s<o;++s)l=c.resolveDataElementOptions(s),l.borderAlign!=="inner"&&(i=Math.max(i,l.borderWidth||0,l.hoverBorderWidth||0));return i}getMaxOffset(t){let i=0;for(let r=0,s=t.length;r<s;++r){let o=this.resolveDataElementOptions(r);i=Math.max(i,o.offset||0,o.hoverOffset||0)}return i}_getRingWeightOffset(t){let i=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(i+=this._getRingWeight(r));return i}_getRingWeight(t){return Math.max(te(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),T2=(()=>{class n extends $i{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let i=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=i,a=this.chart._animationsDisabled,{start:c,count:l}=d_(i,s,a);this._drawStart=c,this._drawCount=l,f_(i)&&(c=0,l=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:h},t),this.updateElements(s,c,l,t)}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:h}=this._cachedMeta,{sharedOptions:d,includeOptions:p}=this._getSharedOptions(i,s),g=a.axis,b=c.axis,{spanGaps:_,segment:w}=this.options,D=Rr(_)?_:Number.POSITIVE_INFINITY,R=this.chart._animationsDisabled||o||s==="none",k=i+r,V=t.length,O=i>0&&this.getParsed(i-1);for(let N=0;N<V;++N){let E=t[N],v=R?E:{};if(N<i||N>=k){v.skip=!0;continue}let I=this.getParsed(N),x=fe(I[b]),A=v[g]=a.getPixelForValue(I[g],N),C=v[b]=o||x?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,I,l):I[b],N);v.skip=isNaN(A)||isNaN(C)||x,v.stop=N>0&&Math.abs(I[g]-O[g])>D,w&&(v.parsed=I,v.raw=h.data[N]),p&&(v.options=d||this.resolveDataElementOptions(N,E.active?"active":s)),R||this.updateElement(E,N,v,s),O=I}}getMaxOverflow(){let t=this._cachedMeta,i=t.dataset,r=i.options&&i.options.borderWidth||0,s=t.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),nA=(()=>{class n extends $i{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let i=t.data;if(i.labels.length&&i.datasets.length){let{labels:{pointStyle:r,color:s}}=t.legend.options;return i.labels.map((o,a)=>{let l=t.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:s,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(a),index:a}})}return[]}},onClick(t,i,r){r.chart.toggleDataVisibility(i.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,i){super(t,i),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let i=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Xs(i._parsed[t].r,r.options.locale);return{label:s[t]||"",value:o}}parseObjectData(t,i,r,s){return I_.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta.data;this._updateRadius(),this.updateElements(i,0,i.length,t)}getMinMax(){let t=this._cachedMeta,i={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<i.min&&(i.min=o),o>i.max&&(i.max=o))}),i}_updateRadius(){let t=this.chart,i=t.chartArea,r=t.options,s=Math.min(i.right-i.left,i.bottom-i.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),c=(o-a)/t.getVisibleDatasetCount();this.outerRadius=o-c*this.index,this.innerRadius=this.outerRadius-c}updateElements(t,i,r,s){let o=s==="reset",a=this.chart,l=a.options.animation,h=this._cachedMeta.rScale,d=h.xCenter,p=h.yCenter,g=h.getIndexAngle(0)-.5*ke,b=g,_,w=360/this.countVisibleElements();for(_=0;_<i;++_)b+=this._computeAngle(_,s,w);for(_=i;_<i+r;_++){let D=t[_],R=b,k=b+this._computeAngle(_,s,w),V=a.getDataVisibility(_)?h.getDistanceFromCenterForValue(this.getParsed(_).r):0;b=k,o&&(l.animateScale&&(V=0),l.animateRotate&&(R=k=g));let O={x:d,y:p,innerRadius:0,outerRadius:V,startAngle:R,endAngle:k,options:this.resolveDataElementOptions(_,D.active?"active":s)};this.updateElement(D,_,O,s)}}countVisibleElements(){let t=this._cachedMeta,i=0;return t.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&i++}),i}_computeAngle(t,i,r){return this.chart.getDataVisibility(t)?Zt(this.resolveDataElementOptions(t,i).angle||r):0}}return n})(),S2=(()=>{class n extends rv{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),x2=(()=>{class n extends $i{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let i=this._cachedMeta.vScale,r=this.getParsed(t);return{label:i.getLabels()[t],value:""+i.getLabelForValue(r[i.axis])}}parseObjectData(t,i,r,s){return I_.bind(this)(t,i,r,s)}update(t){let i=this._cachedMeta,r=i.dataset,s=i.data||[],o=i.iScale.getLabels();if(r.points=s,t!=="resize"){let a=this.resolveDatasetElementOptions(t);this.options.showLine||(a.borderWidth=0);let c={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,c,t)}this.updateElements(s,0,s.length,t)}updateElements(t,i,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let c=i;c<i+r;c++){let l=t[c],h=this.resolveDataElementOptions(c,l.active?"active":s),d=o.getPointPositionForValue(c,this.getParsed(c).r),p=a?o.xCenter:d.x,g=a?o.yCenter:d.y,b={x:p,y:g,angle:d.angle,skip:isNaN(p)||isNaN(g),options:h};this.updateElement(l,c,b,s)}}}return n})(),A2=(()=>{class n extends $i{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let i=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=i,a=this.getParsed(t),c=s.getLabelForValue(a.x),l=o.getLabelForValue(a.y);return{label:r[t]||"",value:"("+c+", "+l+")"}}update(t){let i=this._cachedMeta,{data:r=[]}=i,s=this.chart._animationsDisabled,{start:o,count:a}=d_(i,r,s);if(this._drawStart=o,this._drawCount=a,f_(i)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:c,_dataset:l}=i;c._chart=this.chart,c._datasetIndex=this.index,c._decimated=!!l._decimated,c.points=r;let h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(c,void 0,{animated:!s,options:h},t)}else this.datasetElementType&&(delete i.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,i,r,s){let o=s==="reset",{iScale:a,vScale:c,_stacked:l,_dataset:h}=this._cachedMeta,d=this.resolveDataElementOptions(i,s),p=this.getSharedOptions(d),g=this.includeOptions(s,p),b=a.axis,_=c.axis,{spanGaps:w,segment:D}=this.options,R=Rr(w)?w:Number.POSITIVE_INFINITY,k=this.chart._animationsDisabled||o||s==="none",V=i>0&&this.getParsed(i-1);for(let O=i;O<i+r;++O){let N=t[O],E=this.getParsed(O),v=k?N:{},I=fe(E[_]),x=v[b]=a.getPixelForValue(E[b],O),A=v[_]=o||I?c.getBasePixel():c.getPixelForValue(l?this.applyStack(c,E,l):E[_],O);v.skip=isNaN(x)||isNaN(A)||I,v.stop=O>0&&Math.abs(E[b]-V[b])>R,D&&(v.parsed=E,v.raw=h.data[O]),g&&(v.options=p||this.resolveDataElementOptions(O,N.active?"active":s)),k||this.updateElement(N,O,v,s),V=E}this.updateSharedOptions(p,s,d)}getMaxOverflow(){let t=this._cachedMeta,i=t.data||[];if(!this.options.showLine){let c=0;for(let l=i.length-1;l>=0;--l)c=Math.max(c,i[l].size(this.resolveDataElementOptions(l))/2);return c>0&&c}let r=t.dataset,s=r.options&&r.options.borderWidth||0;if(!i.length)return s;let o=i[0].size(this.resolveDataElementOptions(0)),a=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(s,o,a)/2}}return n})(),C2=Object.freeze({__proto__:null,BarController:b2,BubbleController:I2,DoughnutController:rv,LineController:T2,PieController:S2,PolarAreaController:nA,RadarController:x2,ScatterController:A2});function kr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var B_=class n{static override(e){Object.assign(n.prototype,e)}options;constructor(e){this.options=e||{}}init(){}formats(){return kr()}parse(){return kr()}format(){return kr()}add(){return kr()}diff(){return kr()}startOf(){return kr()}endOf(){return kr()}},sv={_date:B_};function D2(n,e,t,i){let{controller:r,data:s,_sorted:o}=n,a=r._cachedMeta.iScale;if(a&&e===a.axis&&e!=="r"&&o&&s.length){let c=a._reversePixels?PS:On;if(i){if(r._sharedOptions){let l=s[0],h=typeof l.getRange=="function"&&l.getRange(e);if(h){let d=c(s,e,t-h),p=c(s,e,t+h);return{lo:d.lo,hi:p.hi}}}}else return c(s,e,t)}return{lo:0,hi:s.length-1}}function yc(n,e,t,i,r){let s=n.getSortedVisibleDatasetMetas(),o=t[e];for(let a=0,c=s.length;a<c;++a){let{index:l,data:h}=s[a],{lo:d,hi:p}=D2(s[a],e,o,r);for(let g=d;g<=p;++g){let b=h[g];b.skip||i(b,l,g)}}}function R2(n){let e=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(i,r){let s=e?Math.abs(i.x-r.x):0,o=t?Math.abs(i.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function k_(n,e,t,i,r){let s=[];return!r&&!n.isPointInArea(e)||yc(n,t,e,function(a,c,l){!r&&!Nn(a,n.chartArea,0)||a.inRange(e.x,e.y,i)&&s.push({element:a,datasetIndex:c,index:l})},!0),s}function P2(n,e,t,i){let r=[];function s(o,a,c){let{startAngle:l,endAngle:h}=o.getProps(["startAngle","endAngle"],i),{angle:d}=a_(o,{x:e.x,y:e.y});Qs(d,l,h)&&r.push({element:o,datasetIndex:a,index:c})}return yc(n,t,e,s),r}function k2(n,e,t,i,r,s){let o=[],a=R2(t),c=Number.POSITIVE_INFINITY;function l(h,d,p){let g=h.inRange(e.x,e.y,r);if(i&&!g)return;let b=h.getCenterPoint(r);if(!(!!s||n.isPointInArea(b))&&!g)return;let w=a(e,b);w<c?(o=[{element:h,datasetIndex:d,index:p}],c=w):w===c&&o.push({element:h,datasetIndex:d,index:p})}return yc(n,t,e,l),o}function M_(n,e,t,i,r,s){return!s&&!n.isPointInArea(e)?[]:t==="r"&&!i?P2(n,e,t,r):k2(n,e,t,i,r,s)}function lx(n,e,t,i,r){let s=[],o=t==="x"?"inXRange":"inYRange",a=!1;return yc(n,t,e,(c,l,h)=>{c[o]&&c[o](e[t],r)&&(s.push({element:c,datasetIndex:l,index:h}),a=a||c.inRange(e.x,e.y,r))}),i&&!a?[]:s}var M2={evaluateInteractionItems:yc,modes:{index(n,e,t,i){let r=qi(e,n),s=t.axis||"x",o=t.includeInvisible||!1,a=t.intersect?k_(n,r,s,i,o):M_(n,r,s,!1,i,o),c=[];return a.length?(n.getSortedVisibleDatasetMetas().forEach(l=>{let h=a[0].index,d=l.data[h];d&&!d.skip&&c.push({element:d,datasetIndex:l.index,index:h})}),c):[]},dataset(n,e,t,i){let r=qi(e,n),s=t.axis||"xy",o=t.includeInvisible||!1,a=t.intersect?k_(n,r,s,i,o):M_(n,r,s,!1,i,o);if(a.length>0){let c=a[0].datasetIndex,l=n.getDatasetMeta(c).data;a=[];for(let h=0;h<l.length;++h)a.push({element:l[h],datasetIndex:c,index:h})}return a},point(n,e,t,i){let r=qi(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return k_(n,r,s,i,o)},nearest(n,e,t,i){let r=qi(e,n),s=t.axis||"xy",o=t.includeInvisible||!1;return M_(n,r,s,t.intersect,i,o)},x(n,e,t,i){let r=qi(e,n);return lx(n,r,"x",t.intersect,i)},y(n,e,t,i){let r=qi(e,n);return lx(n,r,"y",t.intersect,i)}}},iA=["left","top","right","bottom"];function ac(n,e){return n.filter(t=>t.pos===e)}function ux(n,e){return n.filter(t=>iA.indexOf(t.pos)===-1&&t.box.axis===e)}function cc(n,e){return n.sort((t,i)=>{let r=e?i:t,s=e?t:i;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function O2(n){let e=[],t,i,r,s,o,a;for(t=0,i=(n||[]).length;t<i;++t)r=n[t],{position:s,options:{stack:o,stackWeight:a=1}}=r,e.push({index:t,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return e}function N2(n){let e={};for(let t of n){let{stack:i,pos:r,stackWeight:s}=t;if(!i||!iA.includes(r))continue;let o=e[i]||(e[i]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return e}function V2(n,e){let t=N2(n),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e,s,o,a;for(s=0,o=n.length;s<o;++s){a=n[s];let{fullSize:c}=a.box,l=t[a.stack],h=l&&a.stackWeight/l.weight;a.horizontal?(a.width=h?h*i:c&&e.availableWidth,a.height=r):(a.width=i,a.height=h?h*r:c&&e.availableHeight)}return t}function L2(n){let e=O2(n),t=cc(e.filter(l=>l.box.fullSize),!0),i=cc(ac(e,"left"),!0),r=cc(ac(e,"right")),s=cc(ac(e,"top"),!0),o=cc(ac(e,"bottom")),a=ux(e,"x"),c=ux(e,"y");return{fullSize:t,leftAndTop:i.concat(s),rightAndBottom:r.concat(c).concat(o).concat(a),chartArea:ac(e,"chartArea"),vertical:i.concat(r).concat(c),horizontal:s.concat(o).concat(a)}}function hx(n,e,t,i){return Math.max(n[t],e[t])+Math.max(n[i],e[i])}function rA(n,e){n.top=Math.max(n.top,e.top),n.left=Math.max(n.left,e.left),n.bottom=Math.max(n.bottom,e.bottom),n.right=Math.max(n.right,e.right)}function F2(n,e,t,i){let{pos:r,box:s}=t,o=n.maxPadding;if(!ae(r)){t.size&&(n[r]-=t.size);let d=i[t.stack]||{size:0,count:1};d.size=Math.max(d.size,t.horizontal?s.height:s.width),t.size=d.size/d.count,n[r]+=t.size}s.getPadding&&rA(o,s.getPadding());let a=Math.max(0,e.outerWidth-hx(o,n,"left","right")),c=Math.max(0,e.outerHeight-hx(o,n,"top","bottom")),l=a!==n.w,h=c!==n.h;return n.w=a,n.h=c,t.horizontal?{same:l,other:h}:{same:h,other:l}}function U2(n){let e=n.maxPadding;function t(i){let r=Math.max(e[i]-n[i],0);return n[i]+=r,r}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function B2(n,e){let t=e.maxPadding;function i(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(e[o],t[o])}),s}return i(n?["left","right"]:["top","bottom"])}function hc(n,e,t,i){let r=[],s,o,a,c,l,h;for(s=0,o=n.length,l=0;s<o;++s){a=n[s],c=a.box,c.update(a.width||e.w,a.height||e.h,B2(a.horizontal,e));let{same:d,other:p}=F2(e,t,a,i);l|=d&&r.length,h=h||p,c.fullSize||r.push(a)}return l&&hc(r,e,t,i)||h}function fh(n,e,t,i,r){n.top=t,n.left=e,n.right=e+i,n.bottom=t+r,n.width=i,n.height=r}function dx(n,e,t,i){let r=t.padding,{x:s,y:o}=e;for(let a of n){let c=a.box,l=i[a.stack]||{count:1,placed:0,weight:1},h=a.stackWeight/l.weight||1;if(a.horizontal){let d=e.w*h,p=l.size||c.height;Ks(l.start)&&(o=l.start),c.fullSize?fh(c,r.left,o,t.outerWidth-r.right-r.left,p):fh(c,e.left+l.placed,o,d,p),l.start=o,l.placed+=d,o=c.bottom}else{let d=e.h*h,p=l.size||c.width;Ks(l.start)&&(s=l.start),c.fullSize?fh(c,s,r.top,p,t.outerHeight-r.bottom-r.top):fh(c,s,e.top+l.placed,p,d),l.start=s,l.placed+=d,s=c.right}}e.x=s,e.y=o}var Et={addBox(n,e){n.boxes||(n.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},n.boxes.push(e)},removeBox(n,e){let t=n.boxes?n.boxes.indexOf(e):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(n,e,t,i){if(!n)return;let r=mt(n.options.layout.padding),s=Math.max(e-r.width,0),o=Math.max(t-r.height,0),a=L2(n.boxes),c=a.vertical,l=a.horizontal;be(n.boxes,_=>{typeof _.beforeLayout=="function"&&_.beforeLayout()});let h=c.reduce((_,w)=>w.box.options&&w.box.options.display===!1?_:_+1,0)||1,d=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/h,hBoxMaxHeight:o/2}),p=Object.assign({},r);rA(p,mt(i));let g=Object.assign({maxPadding:p,w:s,h:o,x:r.left,y:r.top},r),b=V2(c.concat(l),d);hc(a.fullSize,g,d,b),hc(c,g,d,b),hc(l,g,d,b)&&hc(c,g,d,b),U2(g),dx(a.leftAndTop,g,d,b),g.x+=g.w,g.y+=g.h,dx(a.rightAndBottom,g,d,b),n.chartArea={left:g.left,top:g.top,right:g.left+g.w,bottom:g.top+g.h,height:g.h,width:g.w},be(a.chartArea,_=>{let w=_.box;Object.assign(w,n.chartArea),w.update(g.w,g.h,{left:0,top:0,right:0,bottom:0})})}},Eh=class{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,i){}removeEventListener(e,t,i){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,i,r){return t=Math.max(0,t||e.width),i=i||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):i)}}isAttached(e){return!0}updateConfig(e){}},j_=class extends Eh{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}},wh="$chartjs",j2={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},fx=n=>n===null||n==="";function z2(n,e){let t=n.style,i=n.getAttribute("height"),r=n.getAttribute("width");if(n[wh]={initial:{height:i,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",fx(r)){let s=T_(n,"width");s!==void 0&&(n.width=s)}if(fx(i))if(n.style.height==="")n.height=n.width/(e||2);else{let s=T_(n,"height");s!==void 0&&(n.height=s)}return n}var sA=KS?{passive:!0}:!1;function q2(n,e,t){n&&n.addEventListener(e,t,sA)}function W2(n,e,t){n&&n.canvas&&n.canvas.removeEventListener(e,t,sA)}function $2(n,e){let t=j2[n.type]||n.type,{x:i,y:r}=qi(n,e);return{type:t,chart:e,native:n,x:i!==void 0?i:null,y:r!==void 0?r:null}}function Th(n,e){for(let t of n)if(t===e||t.contains(e))return!0}function H2(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Th(a.addedNodes,i),o=o&&!Th(a.removedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function G2(n,e,t){let i=n.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||Th(a.removedNodes,i),o=o&&!Th(a.addedNodes,i);o&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}var fc=new Map,px=0;function oA(){let n=window.devicePixelRatio;n!==px&&(px=n,fc.forEach((e,t)=>{t.currentDevicePixelRatio!==n&&e()}))}function K2(n,e){fc.size||window.addEventListener("resize",oA),fc.set(n,e)}function Y2(n){fc.delete(n),fc.size||window.removeEventListener("resize",oA)}function Q2(n,e,t){let i=n.canvas,r=i&&hh(i);if(!r)return;let s=h_((a,c)=>{let l=r.clientWidth;t(a,c),l<r.clientWidth&&t()},window),o=new ResizeObserver(a=>{let c=a[0],l=c.contentRect.width,h=c.contentRect.height;l===0&&h===0||s(l,h)});return o.observe(r),K2(n,s),o}function O_(n,e,t){t&&t.disconnect(),e==="resize"&&Y2(n)}function X2(n,e,t){let i=n.canvas,r=h_(s=>{n.ctx!==null&&t($2(s,n))},n);return q2(i,e,r),r}var z_=class extends Eh{acquireContext(e,t){let i=e&&e.getContext&&e.getContext("2d");return i&&i.canvas===e?(z2(e,t),i):null}releaseContext(e){let t=e.canvas;if(!t[wh])return!1;let i=t[wh].initial;["height","width"].forEach(s=>{let o=i[s];fe(o)?t.removeAttribute(s):t.setAttribute(s,o)});let r=i.style||{};return Object.keys(r).forEach(s=>{t.style[s]=r[s]}),t.width=t.width,delete t[wh],!0}addEventListener(e,t,i){this.removeEventListener(e,t);let r=e.$proxies||(e.$proxies={}),o={attach:H2,detach:G2,resize:Q2}[t]||X2;r[t]=o(e,t,i)}removeEventListener(e,t){let i=e.$proxies||(e.$proxies={}),r=i[t];if(!r)return;({attach:O_,detach:O_,resize:O_}[t]||W2)(e,t,r),i[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,i,r){return GS(e,t,i,r)}isAttached(e){let t=e&&hh(e);return!!(t&&t.isConnected)}};function J2(n){return!uh()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?j_:z_}var mn=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(e){let{x:t,y:i}=this.getProps(["x","y"],e);return{x:t,y:i}}hasValue(){return Rr(this.x)&&Rr(this.y)}getProps(e,t){let i=this.$animations;if(!t||!i)return this;let r={};return e.forEach(s=>{r[s]=i[s]&&i[s].active()?i[s]._to:this[s]}),r}};function Z2(n,e){let t=n.options.ticks,i=eU(n),r=Math.min(t.maxTicksLimit||i,i),s=t.major.enabled?nU(e):[],o=s.length,a=s[0],c=s[o-1],l=[];if(o>r)return iU(e,l,s,o/r),l;let h=tU(s,e,r);if(o>0){let d,p,g=o>1?Math.round((c-a)/(o-1)):null;for(ph(e,l,h,fe(g)?0:a-g,a),d=0,p=o-1;d<p;d++)ph(e,l,h,s[d],s[d+1]);return ph(e,l,h,c,fe(g)?e.length:c+g),l}return ph(e,l,h),l}function eU(n){let e=n.options.offset,t=n._tickSize(),i=n._length/t+(e?0:1),r=n._maxLength/t;return Math.floor(Math.min(i,r))}function tU(n,e,t){let i=rU(n),r=e.length/t;if(!i)return Math.max(r,1);let s=CS(i);for(let o=0,a=s.length-1;o<a;o++){let c=s[o];if(c>r)return c}return Math.max(r,1)}function nU(n){let e=[],t,i;for(t=0,i=n.length;t<i;t++)n[t].major&&e.push(t);return e}function iU(n,e,t,i){let r=0,s=t[0],o;for(i=Math.ceil(i),o=0;o<n.length;o++)o===s&&(e.push(n[o]),r++,s=t[r*i])}function ph(n,e,t,i,r){let s=te(i,0),o=Math.min(te(r,n.length),n.length),a=0,c,l,h;for(t=Math.ceil(t),r&&(c=r-i,t=c/Math.floor(c/t)),h=s;h<0;)a++,h=Math.round(s+a*t);for(l=Math.max(s,0);l<o;l++)l===h&&(e.push(n[l]),a++,h=Math.round(s+a*t))}function rU(n){let e=n.length,t,i;if(e<2)return!1;for(i=n[0],t=1;t<e;++t)if(n[t]-n[t-1]!==i)return!1;return i}var sU=n=>n==="left"?"right":n==="right"?"left":n,mx=(n,e,t)=>e==="top"||e==="left"?n[e]+t:n[e]-t,gx=(n,e)=>Math.min(e||n,n);function yx(n,e){let t=[],i=n.length/e,r=n.length,s=0;for(;s<r;s+=i)t.push(n[Math.floor(s)]);return t}function oU(n,e,t){let i=n.ticks.length,r=Math.min(e,i-1),s=n._startPixel,o=n._endPixel,a=1e-6,c=n.getPixelForTick(r),l;if(!(t&&(i===1?l=Math.max(c-s,o-c):e===0?l=(n.getPixelForTick(1)-c)/2:l=(c-n.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<s-a||c>o+a)))return c}function aU(n,e){be(n,t=>{let i=t.gc,r=i.length/2,s;if(r>e){for(s=0;s<r;++s)delete t.data[i[s]];i.splice(0,r)}})}function lc(n){return n.drawTicks?n.tickLength:0}function _x(n,e){if(!n.display)return 0;let t=Xe(n.font,e),i=mt(n.padding);return(Pe(n.text)?n.text.length:1)*t.lineHeight+i.height}function cU(n,e){return ci(n,{scale:e,type:"scale"})}function lU(n,e,t){return ci(n,{tick:t,index:e,type:"tick"})}function uU(n,e,t){let i=sh(n);return(t&&e!=="right"||!t&&e==="right")&&(i=sU(i)),i}function hU(n,e,t,i){let{top:r,left:s,bottom:o,right:a,chart:c}=n,{chartArea:l,scales:h}=c,d=0,p,g,b,_=o-r,w=a-s;if(n.isHorizontal()){if(g=pt(i,s,a),ae(t)){let D=Object.keys(t)[0],R=t[D];b=h[D].getPixelForValue(R)+_-e}else t==="center"?b=(l.bottom+l.top)/2+_-e:b=mx(n,t,e);p=a-s}else{if(ae(t)){let D=Object.keys(t)[0],R=t[D];g=h[D].getPixelForValue(R)-w+e}else t==="center"?g=(l.left+l.right)/2-w+e:g=mx(n,t,e);b=pt(i,o,r),d=t==="left"?-We:We}return{titleX:g,titleY:b,maxWidth:p,rotation:d}}var Or=class n extends mn{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:i,_suggestedMax:r}=this;return e=Vt(e,Number.POSITIVE_INFINITY),t=Vt(t,Number.NEGATIVE_INFINITY),i=Vt(i,Number.POSITIVE_INFINITY),r=Vt(r,Number.NEGATIVE_INFINITY),{min:Vt(e,i),max:Vt(t,r),minDefined:Fe(e),maxDefined:Fe(t)}}getMinMax(e){let{min:t,max:i,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:t,max:i};let a=this.getMatchingVisibleMetas();for(let c=0,l=a.length;c<l;++c)o=a[c].controller.getMinMax(this,e),r||(t=Math.min(t,o.min)),s||(i=Math.max(i,o.max));return t=s&&t>i?i:t,i=r&&t>i?t:i,{min:Vt(t,Vt(i,t)),max:Vt(i,Vt(t,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ce(this.options.beforeUpdate,[this])}update(e,t,i){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=i=Object.assign({left:0,right:0,top:0,bottom:0},i),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+i.left+i.right:this.height+i.top+i.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=jS(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let c=a<this.ticks.length;this._convertTicksToLabels(c?yx(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=Z2(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,i;this.isHorizontal()?(t=this.left,i=this.right):(t=this.top,i=this.bottom,e=!e),this._startPixel=t,this._endPixel=i,this._reversePixels=e,this._length=i-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ce(this.options.afterUpdate,[this])}beforeSetDimensions(){Ce(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ce(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ce(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ce(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){let t=this.options.ticks,i,r,s;for(i=0,r=e.length;i<r;i++)s=e[i],s.label=Ce(t.callback,[s.value,i,e],this)}afterTickToLabelConversion(){Ce(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ce(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let e=this.options,t=e.ticks,i=gx(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,s=t.maxRotation,o=r,a,c,l;if(!this._isVisible()||!t.display||r>=s||i<=1||!this.isHorizontal()){this.labelRotation=r;return}let h=this._getLabelSizes(),d=h.widest.width,p=h.highest.height,g=Ze(this.chart.width-d,0,this.maxWidth);a=e.offset?this.maxWidth/i:g/(i-1),d+6>a&&(a=g/(i-(e.offset?.5:1)),c=this.maxHeight-lc(e.grid)-t.padding-_x(e.title,this.chart.options.font),l=Math.sqrt(d*d+p*p),o=ih(Math.min(Math.asin(Ze((h.highest.height+6)/a,-1,1)),Math.asin(Ze(c/l,-1,1))-Math.asin(Ze(p/l,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ce(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ce(this.options.beforeFit,[this])}fit(){let e={width:0,height:0},{chart:t,options:{ticks:i,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let c=_x(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=lc(s)+c):(e.height=this.maxHeight,e.width=lc(s)+c),i.display&&this.ticks.length){let{first:l,last:h,widest:d,highest:p}=this._getLabelSizes(),g=i.padding*2,b=Zt(this.labelRotation),_=Math.cos(b),w=Math.sin(b);if(a){let D=i.mirror?0:w*d.width+_*p.height;e.height=Math.min(this.maxHeight,e.height+D+g)}else{let D=i.mirror?0:_*d.width+w*p.height;e.width=Math.min(this.maxWidth,e.width+D+g)}this._calculatePadding(l,h,w,_)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,i,r){let{ticks:{align:s,padding:o},position:a}=this.options,c=this.labelRotation!==0,l=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,d=this.right-this.getPixelForTick(this.ticks.length-1),p=0,g=0;c?l?(p=r*e.width,g=i*t.height):(p=i*e.height,g=r*t.width):s==="start"?g=t.width:s==="end"?p=e.width:s!=="inner"&&(p=e.width/2,g=t.width/2),this.paddingLeft=Math.max((p-h+o)*this.width/(this.width-h),0),this.paddingRight=Math.max((g-d+o)*this.width/(this.width-d),0)}else{let h=t.height/2,d=e.height/2;s==="start"?(h=0,d=e.height):s==="end"&&(h=t.height,d=0),this.paddingTop=h+o,this.paddingBottom=d+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ce(this.options.afterFit,[this])}isHorizontal(){let{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,i;for(t=0,i=e.length;t<i;t++)fe(e[t].label)&&(e.splice(t,1),i--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){let t=this.options.ticks.sampleSize,i=this.ticks;t<i.length&&(i=yx(i,t)),this._labelSizes=e=this._computeLabelSizes(i,i.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,i){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],c=Math.floor(t/gx(t,i)),l=0,h=0,d,p,g,b,_,w,D,R,k,V,O;for(d=0;d<t;d+=c){if(b=e[d].label,_=this._resolveTickFontOptions(d),r.font=w=_.string,D=s[w]=s[w]||{data:{},gc:[]},R=_.lineHeight,k=V=0,!fe(b)&&!Pe(b))k=tc(r,D.data,D.gc,k,b),V=R;else if(Pe(b))for(p=0,g=b.length;p<g;++p)O=b[p],!fe(O)&&!Pe(O)&&(k=tc(r,D.data,D.gc,k,O),V+=R);o.push(k),a.push(V),l=Math.max(k,l),h=Math.max(V,h)}aU(s,t);let N=o.indexOf(l),E=a.indexOf(h),v=I=>({width:o[I]||0,height:a[I]||0});return{first:v(0),last:v(t-1),widest:v(N),highest:v(E),widths:o,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){let t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);let t=this._startPixel+e*this._length;return RS(this._alignToPixels?Bi(this.chart,t,0):t)}getDecimalForPixel(e){let t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){let t=this.ticks||[];if(e>=0&&e<t.length){let i=t[e];return i.$context||(i.$context=lU(this.getContext(),e,i))}return this.$context||(this.$context=cU(this.chart.getContext(),this))}_tickSize(){let e=this.options.ticks,t=Zt(this.labelRotation),i=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),s=this._getLabelSizes(),o=e.autoSkipPadding||0,a=s?s.widest.width+o:0,c=s?s.highest.height+o:0;return this.isHorizontal()?c*i>a*r?a/i:c/r:c*r<a*i?c/i:a/r}_isVisible(){let e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){let t=this.axis,i=this.chart,r=this.options,{grid:s,position:o,border:a}=r,c=s.offset,l=this.isHorizontal(),d=this.ticks.length+(c?1:0),p=lc(s),g=[],b=a.setContext(this.getContext()),_=b.display?b.width:0,w=_/2,D=function(De){return Bi(i,De,_)},R,k,V,O,N,E,v,I,x,A,C,T;if(o==="top")R=D(this.bottom),E=this.bottom-p,I=R-w,A=D(e.top)+w,T=e.bottom;else if(o==="bottom")R=D(this.top),A=e.top,T=D(e.bottom)-w,E=R+w,I=this.top+p;else if(o==="left")R=D(this.right),N=this.right-p,v=R-w,x=D(e.left)+w,C=e.right;else if(o==="right")R=D(this.left),x=e.left,C=D(e.right)-w,N=R+w,v=this.left+p;else if(t==="x"){if(o==="center")R=D((e.top+e.bottom)/2+.5);else if(ae(o)){let De=Object.keys(o)[0],Te=o[De];R=D(this.chart.scales[De].getPixelForValue(Te))}A=e.top,T=e.bottom,E=R+w,I=E+p}else if(t==="y"){if(o==="center")R=D((e.left+e.right)/2);else if(ae(o)){let De=Object.keys(o)[0],Te=o[De];R=D(this.chart.scales[De].getPixelForValue(Te))}N=R-w,v=N-p,x=e.left,C=e.right}let Ve=te(r.ticks.maxTicksLimit,d),he=Math.max(1,Math.ceil(d/Ve));for(k=0;k<d;k+=he){let De=this.getContext(k),Te=s.setContext(De),at=a.setContext(De),Ge=Te.lineWidth,jn=Te.color,Fr=at.dash||[],Tt=at.dashOffset,Be=Te.tickWidth,zn=Te.tickColor,nn=Te.tickBorderDash||[],qn=Te.tickBorderDashOffset;V=oU(this,k,c),V!==void 0&&(O=Bi(i,V,Ge),l?N=v=x=C=O:E=I=A=T=O,g.push({tx1:N,ty1:E,tx2:v,ty2:I,x1:x,y1:A,x2:C,y2:T,width:Ge,color:jn,borderDash:Fr,borderDashOffset:Tt,tickWidth:Be,tickColor:zn,tickBorderDash:nn,tickBorderDashOffset:qn}))}return this._ticksLength=d,this._borderValue=R,g}_computeLabelItems(e){let t=this.axis,i=this.options,{position:r,ticks:s}=i,o=this.isHorizontal(),a=this.ticks,{align:c,crossAlign:l,padding:h,mirror:d}=s,p=lc(i.grid),g=p+h,b=d?-h:g,_=-Zt(this.labelRotation),w=[],D,R,k,V,O,N,E,v,I,x,A,C,T="middle";if(r==="top")N=this.bottom-b,E=this._getXAxisLabelAlignment();else if(r==="bottom")N=this.top+b,E=this._getXAxisLabelAlignment();else if(r==="left"){let he=this._getYAxisLabelAlignment(p);E=he.textAlign,O=he.x}else if(r==="right"){let he=this._getYAxisLabelAlignment(p);E=he.textAlign,O=he.x}else if(t==="x"){if(r==="center")N=(e.top+e.bottom)/2+g;else if(ae(r)){let he=Object.keys(r)[0],De=r[he];N=this.chart.scales[he].getPixelForValue(De)+g}E=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")O=(e.left+e.right)/2-g;else if(ae(r)){let he=Object.keys(r)[0],De=r[he];O=this.chart.scales[he].getPixelForValue(De)}E=this._getYAxisLabelAlignment(p).textAlign}t==="y"&&(c==="start"?T="top":c==="end"&&(T="bottom"));let Ve=this._getLabelSizes();for(D=0,R=a.length;D<R;++D){k=a[D],V=k.label;let he=s.setContext(this.getContext(D));v=this.getPixelForTick(D)+s.labelOffset,I=this._resolveTickFontOptions(D),x=I.lineHeight,A=Pe(V)?V.length:1;let De=A/2,Te=he.color,at=he.textStrokeColor,Ge=he.textStrokeWidth,jn=E;o?(O=v,E==="inner"&&(D===R-1?jn=this.options.reverse?"left":"right":D===0?jn=this.options.reverse?"right":"left":jn="center"),r==="top"?l==="near"||_!==0?C=-A*x+x/2:l==="center"?C=-Ve.highest.height/2-De*x+x:C=-Ve.highest.height+x/2:l==="near"||_!==0?C=x/2:l==="center"?C=Ve.highest.height/2-De*x:C=Ve.highest.height-A*x,d&&(C*=-1),_!==0&&!he.showLabelBackdrop&&(O+=x/2*Math.sin(_))):(N=v,C=(1-A)*x/2);let Fr;if(he.showLabelBackdrop){let Tt=mt(he.backdropPadding),Be=Ve.heights[D],zn=Ve.widths[D],nn=C-Tt.top,qn=0-Tt.left;switch(T){case"middle":nn-=Be/2;break;case"bottom":nn-=Be;break}switch(E){case"center":qn-=zn/2;break;case"right":qn-=zn;break;case"inner":D===R-1?qn-=zn:D>0&&(qn-=zn/2);break}Fr={left:qn,top:nn,width:zn+Tt.width,height:Be+Tt.height,color:he.backdropColor}}w.push({label:V,font:I,textOffset:C,options:{rotation:_,color:Te,strokeColor:at,strokeWidth:Ge,textAlign:jn,textBaseline:T,translation:[O,N],backdrop:Fr}})}return w}_getXAxisLabelAlignment(){let{position:e,ticks:t}=this.options;if(-Zt(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){let{position:t,ticks:{crossAlign:i,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=e+s,c=o.widest.width,l,h;return t==="left"?r?(h=this.right+s,i==="near"?l="left":i==="center"?(l="center",h+=c/2):(l="right",h+=c)):(h=this.right-a,i==="near"?l="right":i==="center"?(l="center",h-=c/2):(l="left",h=this.left)):t==="right"?r?(h=this.left+s,i==="near"?l="right":i==="center"?(l="center",h-=c/2):(l="left",h-=c)):(h=this.left+a,i==="near"?l="left":i==="center"?(l="center",h+=c/2):(l="right",h=this.right)):l="right",{textAlign:l,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){let{ctx:e,options:{backgroundColor:t},left:i,top:r,width:s,height:o}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(i,r,s,o),e.restore())}getLineWidthForValue(e){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let r=this.ticks.findIndex(s=>s.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){let t=this.options.grid,i=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e)),s,o,a=(c,l,h)=>{!h.width||!h.color||(i.save(),i.lineWidth=h.width,i.strokeStyle=h.color,i.setLineDash(h.borderDash||[]),i.lineDashOffset=h.borderDashOffset,i.beginPath(),i.moveTo(c.x,c.y),i.lineTo(l.x,l.y),i.stroke(),i.restore())};if(t.display)for(s=0,o=r.length;s<o;++s){let c=r[s];t.drawOnChartArea&&a({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),t.drawTicks&&a({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){let{chart:e,ctx:t,options:{border:i,grid:r}}=this,s=i.setContext(this.getContext()),o=i.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue,l,h,d,p;this.isHorizontal()?(l=Bi(e,this.left,o)-o/2,h=Bi(e,this.right,a)+a/2,d=p=c):(d=Bi(e,this.top,o)-o/2,p=Bi(e,this.bottom,a)+a/2,l=h=c),t.save(),t.lineWidth=s.width,t.strokeStyle=s.color,t.beginPath(),t.moveTo(l,d),t.lineTo(h,p),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;let i=this.ctx,r=this._computeLabelArea();r&&rc(i,r);let s=this.getLabelItems(e);for(let o of s){let a=o.options,c=o.font,l=o.label,h=o.textOffset;ji(i,l,0,h,c,a)}r&&sc(i)}drawTitle(){let{ctx:e,options:{position:t,title:i,reverse:r}}=this;if(!i.display)return;let s=Xe(i.font),o=mt(i.padding),a=i.align,c=s.lineHeight/2;t==="bottom"||t==="center"||ae(t)?(c+=o.bottom,Pe(i.text)&&(c+=s.lineHeight*(i.text.length-1))):c+=o.top;let{titleX:l,titleY:h,maxWidth:d,rotation:p}=hU(this,c,t,a);ji(e,i.text,0,0,s,{color:i.color,maxWidth:d,rotation:p,textAlign:uU(a,t,r),textBaseline:"middle",translation:[l,h]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){let e=this.options,t=e.ticks&&e.ticks.z||0,i=te(e.grid&&e.grid.z,-1),r=te(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:s=>{this.draw(s)}}]:[{z:i,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(e){let t=this.chart.getSortedVisibleDatasetMetas(),i=this.axis+"AxisID",r=[],s,o;for(s=0,o=t.length;s<o;++s){let a=t[s];a[i]===this.id&&(!e||a.type===e)&&r.push(a)}return r}_resolveTickFontOptions(e){let t=this.options.ticks.setContext(this.getContext(e));return Xe(t.font)}_maxDigits(){let e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}},to=class{constructor(e,t,i){this.type=e,this.scope=t,this.override=i,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){let t=Object.getPrototypeOf(e),i;pU(t)&&(i=this.register(t));let r=this.items,s=e.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+e);return s in r||(r[s]=e,dU(e,o,i),this.override&&Ue.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){let t=this.items,i=e.id,r=this.scope;i in t&&delete t[i],r&&i in Ue[r]&&(delete Ue[r][i],this.override&&delete Ui[i])}};function dU(n,e,t){let i=$s(Object.create(null),[t?Ue.get(t):{},Ue.get(e),n.defaults]);Ue.set(e,i),n.defaultRoutes&&fU(e,n.defaultRoutes),n.descriptors&&Ue.describe(e,n.descriptors)}function fU(n,e){Object.keys(e).forEach(t=>{let i=t.split("."),r=i.pop(),s=[n].concat(i).join("."),o=e[t].split("."),a=o.pop(),c=o.join(".");Ue.route(s,r,c,a)})}function pU(n){return"id"in n&&"defaults"in n}var q_=class{constructor(){this.controllers=new to($i,"datasets",!0),this.elements=new to(mn,"elements"),this.plugins=new to(Object,"plugins"),this.scales=new to(Or,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,i){[...t].forEach(r=>{let s=i||this._getRegistryForType(r);i||s.isForType(r)||s===this.plugins&&r.id?this._exec(e,s,r):be(r,o=>{let a=i||this._getRegistryForType(o);this._exec(e,a,o)})})}_exec(e,t,i){let r=nh(e);Ce(i["before"+r],[],i),t[e](i),Ce(i["after"+r],[],i)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){let i=this._typedRegistries[t];if(i.isForType(e))return i}return this.plugins}_get(e,t,i){let r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+i+".");return r}},Un=new q_,W_=class{constructor(){this._init=[]}notify(e,t,i,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));let s=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(s,e,t,i);return t==="afterDestroy"&&(this._notify(s,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,t,i,r){r=r||{};for(let s of e){let o=s.plugin,a=o[i],c=[t,r,s.options];if(Ce(a,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){fe(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){let i=e&&e.config,r=te(i.options&&i.options.plugins,{}),s=mU(i);return r===!1&&!t?[]:yU(e,s,r,t)}_notifyStateChanges(e){let t=this._oldCache||[],i=this._cache,r=(s,o)=>s.filter(a=>!o.some(c=>a.plugin.id===c.plugin.id));this._notify(r(t,i),e,"stop"),this._notify(r(i,t),e,"start")}};function mU(n){let e={},t=[],i=Object.keys(Un.plugins.items);for(let s=0;s<i.length;s++)t.push(Un.getPlugin(i[s]));let r=n.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];t.indexOf(o)===-1&&(t.push(o),e[o.id]=!0)}return{plugins:t,localIds:e}}function gU(n,e){return!e&&n===!1?null:n===!0?{}:n}function yU(n,{plugins:e,localIds:t},i,r){let s=[],o=n.getContext();for(let a of e){let c=a.id,l=gU(i[c],r);l!==null&&s.push({plugin:a,options:_U(n.config,{plugin:a,local:t[c]},l,o)})}return s}function _U(n,{plugin:e,local:t},i,r){let s=n.pluginScopeKeys(e),o=n.getOptionScopes(i,s);return t&&e.defaults&&o.push(e.defaults),n.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function $_(n,e){let t=Ue.datasets[n]||{};return((e.datasets||{})[n]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function vU(n,e){let t=n;return n==="_index_"?t=e:n==="_value_"&&(t=e==="x"?"y":"x"),t}function wU(n,e){return n===e?"_index_":"_value_"}function vx(n){if(n==="x"||n==="y"||n==="r")return n}function bU(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function H_(n,...e){if(vx(n))return n;for(let t of e){let i=t.axis||bU(t.position)||n.length>1&&vx(n[0].toLowerCase());if(i)return i}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function wx(n,e,t){if(t[e+"AxisID"]===n)return{axis:e}}function IU(n,e){if(e.data&&e.data.datasets){let t=e.data.datasets.filter(i=>i.xAxisID===n||i.yAxisID===n);if(t.length)return wx(n,"x",t[0])||wx(n,"y",t[0])}return{}}function EU(n,e){let t=Ui[n.type]||{scales:{}},i=e.scales||{},r=$_(n.type,e),s=Object.create(null);return Object.keys(i).forEach(o=>{let a=i[o];if(!ae(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let c=H_(o,a,IU(o,n),Ue.scales[a.type]),l=wU(c,r),h=t.scales||{};s[o]=Gs(Object.create(null),[{axis:c},a,h[c],h[l]])}),n.data.datasets.forEach(o=>{let a=o.type||n.type,c=o.indexAxis||$_(a,e),h=(Ui[a]||{}).scales||{};Object.keys(h).forEach(d=>{let p=vU(d,c),g=o[p+"AxisID"]||p;s[g]=s[g]||Object.create(null),Gs(s[g],[{axis:p},i[g],h[d]])})}),Object.keys(s).forEach(o=>{let a=s[o];Gs(a,[Ue.scales[a.type],Ue.scale])}),s}function aA(n){let e=n.options||(n.options={});e.plugins=te(e.plugins,{}),e.scales=EU(n,e)}function cA(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function TU(n){return n=n||{},n.data=cA(n.data),aA(n),n}var bx=new Map,lA=new Set;function mh(n,e){let t=bx.get(n);return t||(t=e(),bx.set(n,t),lA.add(t)),t}var uc=(n,e,t)=>{let i=ai(e,t);i!==void 0&&n.add(i)},G_=class{constructor(e){this._config=TU(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=cA(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){let e=this._config;this.clearCache(),aA(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return mh(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return mh(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return mh(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){let t=e.id,i=this.type;return mh(`${i}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){let i=this._scopeCache,r=i.get(e);return(!r||t)&&(r=new Map,i.set(e,r)),r}getOptionScopes(e,t,i){let{options:r,type:s}=this,o=this._cachedScopes(e,i),a=o.get(t);if(a)return a;let c=new Set;t.forEach(h=>{e&&(c.add(e),h.forEach(d=>uc(c,e,d))),h.forEach(d=>uc(c,r,d)),h.forEach(d=>uc(c,Ui[s]||{},d)),h.forEach(d=>uc(c,Ue,d)),h.forEach(d=>uc(c,oh,d))});let l=Array.from(c);return l.length===0&&l.push(Object.create(null)),lA.has(t)&&o.set(t,l),l}chartOptionScopes(){let{options:e,type:t}=this;return[e,Ui[t]||{},Ue.datasets[t]||{},{type:t},Ue,oh]}resolveNamedOptions(e,t,i,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=Ix(this._resolverCache,e,r),c=o;if(xU(o,t)){s.$shared=!1,i=si(i)?i():i;let l=this.createResolver(e,i,a);c=Dr(o,i,l)}for(let l of t)s[l]=c[l];return s}createResolver(e,t,i=[""],r){let{resolver:s}=Ix(this._resolverCache,e,i);return ae(t)?Dr(s,t,void 0,r):s}};function Ix(n,e,t){let i=n.get(e);i||(i=new Map,n.set(e,i));let r=t.join(),s=i.get(r);return s||(s={resolver:lh(e,t),subPrefixes:t.filter(a=>!a.toLowerCase().includes("hover"))},i.set(r,s)),s}var SU=n=>ae(n)&&Object.getOwnPropertyNames(n).some(e=>si(n[e]));function xU(n,e){let{isScriptable:t,isIndexable:i}=v_(n);for(let r of e){let s=t(r),o=i(r),a=(o||s)&&n[r];if(s&&(si(a)||SU(a))||o&&Pe(a))return!0}return!1}var AU="4.4.4",CU=["top","bottom","left","right","chartArea"];function Ex(n,e){return n==="top"||n==="bottom"||CU.indexOf(n)===-1&&e==="x"}function Tx(n,e){return function(t,i){return t[n]===i[n]?t[e]-i[e]:t[n]-i[n]}}function Sx(n){let e=n.chart,t=e.options.animation;e.notifyPlugins("afterRender"),Ce(t&&t.onComplete,[n],e)}function DU(n){let e=n.chart,t=e.options.animation;Ce(t&&t.onProgress,[n],e)}function uA(n){return uh()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var bh={},xx=n=>{let e=uA(n);return Object.values(bh).filter(t=>t.canvas===e).pop()};function RU(n,e,t){let i=Object.keys(n);for(let r of i){let s=+r;if(s>=e){let o=n[r];delete n[r],(t>0||s>e)&&(n[s+t]=o)}}}function PU(n,e,t,i){return!t||n.type==="mouseout"?null:i?e:n}function gh(n,e,t){return n.options.clip?n[t]:e[t]}function kU(n,e){let{xScale:t,yScale:i}=n;return t&&i?{left:gh(t,e,"left"),right:gh(t,e,"right"),top:gh(i,e,"top"),bottom:gh(i,e,"bottom")}:e}var io=(()=>{class n{static defaults=Ue;static instances=bh;static overrides=Ui;static registry=Un;static version=AU;static getChart=xx;static register(...t){Un.add(...t),Ax()}static unregister(...t){Un.remove(...t),Ax()}constructor(t,i){let r=this.config=new G_(i),s=uA(t),o=xx(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||J2(s)),this.platform.updateConfig(r);let c=this.platform.acquireContext(s,a.aspectRatio),l=c&&c.canvas,h=l&&l.height,d=l&&l.width;if(this.id=TS(),this.ctx=c,this.canvas=l,this.width=d,this.height=h,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new W_,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=NS(p=>this.update(p),a.resizeDelay||0),this._dataChanges=[],bh[this.id]=this,!c||!l){console.error("Failed to create chart: can't acquire context from the given item");return}li.listen(this,"complete",Sx),li.listen(this,"progress",DU),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:i},width:r,height:s,_aspectRatio:o}=this;return fe(t)?i&&o?o:s?r/s:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Un}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():E_(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return g_(this.canvas,this.ctx),this}stop(){return li.stop(this),this}resize(t,i){li.running(this)?this._resizeBeforeDraw={width:t,height:i}:this._resize(t,i)}_resize(t,i){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,t,i,o),c=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,E_(this,c,!0)&&(this.notifyPlugins("resize",{size:a}),Ce(r.onResize,[this,a],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){let i=this.options.scales||{};be(i,(r,s)=>{r.id=s})}buildOrUpdateScales(){let t=this.options,i=t.scales,r=this.scales,s=Object.keys(r).reduce((a,c)=>(a[c]=!1,a),{}),o=[];i&&(o=o.concat(Object.keys(i).map(a=>{let c=i[a],l=H_(a,c),h=l==="r",d=l==="x";return{options:c,dposition:h?"chartArea":d?"bottom":"left",dtype:h?"radialLinear":d?"category":"linear"}}))),be(o,a=>{let c=a.options,l=c.id,h=H_(l,c),d=te(c.type,a.dtype);(c.position===void 0||Ex(c.position,h)!==Ex(a.dposition))&&(c.position=a.dposition),s[l]=!0;let p=null;if(l in r&&r[l].type===d)p=r[l];else{let g=Un.getScale(d);p=new g({id:l,type:d,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(c,t)}),be(s,(a,c)=>{a||delete r[c]}),be(r,a=>{Et.configure(this,a,a.options),Et.addBox(this,a)})}_updateMetasets(){let t=this._metasets,i=this.data.datasets.length,r=t.length;if(t.sort((s,o)=>s.index-o.index),r>i){for(let s=i;s<r;++s)this._destroyDatasetMeta(s);t.splice(i,r-i)}this._sortedMetasets=t.slice(0).sort(Tx("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:i}}=this;t.length>i.length&&delete this._stacks,t.forEach((r,s)=>{i.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let t=[],i=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=i.length;r<s;r++){let o=i[r],a=this.getDatasetMeta(r),c=o.type||this.config.type;if(a.type&&a.type!==c&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=c,a.indexAxis=o.indexAxis||$_(c,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let l=Un.getController(c),{datasetElementType:h,dataElementType:d}=Ue.datasets[c];Object.assign(l,{dataElementType:Un.getElement(d),datasetElementType:h&&Un.getElement(h)}),a.controller=new l(this,r),t.push(a.controller)}}return this._updateMetasets(),t}_resetElements(){be(this.data.datasets,(t,i)=>{this.getDatasetMeta(i).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let i=this.config;i.update();let r=this._options=i.createResolver(i.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let h=0,d=this.data.datasets.length;h<d;h++){let{controller:p}=this.getDatasetMeta(h),g=!s&&o.indexOf(p)===-1;p.buildOrUpdateElements(g),a=Math.max(+p.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||be(o,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Tx("z","_idx"));let{_active:c,_lastEvent:l}=this;l?this._eventHandler(l,!0):c.length&&this._updateHoverStyles(c,c,!0),this.render()}_updateScales(){be(this.scales,t=>{Et.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,i=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!i_(i,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,i=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of i){let a=r==="_removeElements"?-o:o;RU(t,s,a)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let i=this.data.datasets.length,r=o=>new Set(t.filter(a=>a[0]===o).map((a,c)=>c+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<i;o++)if(!i_(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Et.update(this,this.width,this.height,t);let i=this.chartArea,r=i.width<=0||i.height<=0;this._layers=[],be(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let i=0,r=this.data.datasets.length;i<r;++i)this.getDatasetMeta(i).controller.configure();for(let i=0,r=this.data.datasets.length;i<r;++i)this._updateDataset(i,si(t)?t({datasetIndex:i}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,i){let r=this.getDatasetMeta(t),s={meta:r,index:t,mode:i,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(i),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(li.has(this)?this.attached&&!li.running(this)&&li.start(this):(this.draw(),Sx({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let i=this._layers;for(t=0;t<i.length&&i[t].z<=0;++t)i[t].draw(this.chartArea);for(this._drawDatasets();t<i.length;++t)i[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let i=this._sortedMetasets,r=[],s,o;for(s=0,o=i.length;s<o;++s){let a=i[s];(!t||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let i=t.length-1;i>=0;--i)this._drawDataset(t[i]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let i=this.ctx,r=t._clip,s=!r.disabled,o=kU(t,this.chartArea),a={meta:t,index:t.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",a)!==!1&&(s&&rc(i,{left:r.left===!1?0:o.left-r.left,right:r.right===!1?this.width:o.right+r.right,top:r.top===!1?0:o.top-r.top,bottom:r.bottom===!1?this.height:o.bottom+r.bottom}),t.controller.draw(),s&&sc(i),a.cancelable=!1,this.notifyPlugins("afterDatasetDraw",a))}isPointInArea(t){return Nn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,i,r,s){let o=M2.modes[i];return typeof o=="function"?o(this,t,r,s):[]}getDatasetMeta(t){let i=this.data.datasets[t],r=this._metasets,s=r.filter(o=>o&&o._dataset===i).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:i&&i.order||0,index:t,_dataset:i,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=ci(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let i=this.data.datasets[t];if(!i)return!1;let r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!i.hidden}setDatasetVisibility(t,i){let r=this.getDatasetMeta(t);r.hidden=!i}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,i,r){let s=r?"show":"hide",o=this.getDatasetMeta(t),a=o.controller._resolveAnimations(void 0,s);Ks(i)?(o.data[i].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),a.update(o,{visible:r}),this.update(c=>c.datasetIndex===t?s:void 0))}hide(t,i){this._updateVisibility(t,i,!1)}show(t,i){this._updateVisibility(t,i,!0)}_destroyDatasetMeta(t){let i=this._metasets[t];i&&i.controller&&i.controller._destroy(),delete this._metasets[t]}_stop(){let t,i;for(this.stop(),li.remove(this),t=0,i=this.data.datasets.length;t<i;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:i}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),g_(t,i),this.platform.releaseContext(i),this.canvas=null,this.ctx=null),delete bh[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,i=this.platform,r=(o,a)=>{i.addEventListener(this,o,a),t[o]=a},s=(o,a,c)=>{o.offsetX=a,o.offsetY=c,this._eventHandler(o)};be(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,i=this.platform,r=(l,h)=>{i.addEventListener(this,l,h),t[l]=h},s=(l,h)=>{t[l]&&(i.removeEventListener(this,l,h),delete t[l])},o=(l,h)=>{this.canvas&&this.resize(l,h)},a,c=()=>{s("attach",c),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",c)},i.isAttached(this.canvas)?c():a()}unbindEvents(){be(this._listeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._listeners={},be(this._responsiveListeners,(t,i)=>{this.platform.removeEventListener(this,i,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,i,r){let s=r?"set":"remove",o,a,c,l;for(i==="dataset"&&(o=this.getDatasetMeta(t[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),c=0,l=t.length;c<l;++c){a=t[c];let h=a&&this.getDatasetMeta(a.datasetIndex).controller;h&&h[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let i=this._active||[],r=t.map(({datasetIndex:o,index:a})=>{let c=this.getDatasetMeta(o);if(!c)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:c.data[a],index:a}});!nc(r,i)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,i))}notifyPlugins(t,i,r){return this._plugins.notify(this,t,i,r)}isPluginEnabled(t){return this._plugins._cache.filter(i=>i.plugin.id===t).length===1}_updateHoverStyles(t,i,r){let s=this.options.hover,o=(l,h)=>l.filter(d=>!h.some(p=>d.datasetIndex===p.datasetIndex&&d.index===p.index)),a=o(i,t),c=r?t:o(t,i);a.length&&this.updateHoverStyle(a,s.mode,!1),c.length&&s.mode&&this.updateHoverStyle(c,s.mode,!0)}_eventHandler(t,i){let r={event:t,replay:i,cancelable:!0,inChartArea:this.isPointInArea(t)},s=a=>(a.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(t,i,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(t,i,r){let{_active:s=[],options:o}=this,a=i,c=this._getActiveElements(t,s,r,a),l=AS(t),h=PU(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Ce(o.onHover,[t,c,this],this),l&&Ce(o.onClick,[t,c,this],this));let d=!nc(c,s);return(d||i)&&(this._active=c,this._updateHoverStyles(c,s,i)),this._lastEvent=h,d}_getActiveElements(t,i,r,s){if(t.type==="mouseout")return[];if(!r)return i;let o=this.options.hover;return this.getElementsAtEventForMode(t,o.mode,o,s)}}return n})();function Ax(){return be(io.instances,n=>n._plugins.invalidate())}function MU(n,e,t){let{startAngle:i,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:c}=e,l=r/a;n.beginPath(),n.arc(s,o,a,i-l,t+l),c>r?(l=r/c,n.arc(s,o,c,t+l,i-l,!0)):n.arc(s,o,r,t+We,i-We),n.closePath(),n.clip()}function OU(n){return ch(n,["outerStart","outerEnd","innerStart","innerEnd"])}function NU(n,e,t,i){let r=OU(n.options.borderRadius),s=(t-e)/2,o=Math.min(s,i*e/2),a=c=>{let l=(t-Math.min(s,c))*i/2;return Ze(c,0,Math.min(s,l))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:Ze(r.innerStart,0,o),innerEnd:Ze(r.innerEnd,0,o)}}function eo(n,e,t,i){return{x:t+n*Math.cos(e),y:i+n*Math.sin(e)}}function Sh(n,e,t,i,r,s){let{x:o,y:a,startAngle:c,pixelMargin:l,innerRadius:h}=e,d=Math.max(e.outerRadius+i+t-l,0),p=h>0?h+i+t+l:0,g=0,b=r-c;if(i){let he=h>0?h-i:0,De=d>0?d-i:0,Te=(he+De)/2,at=Te!==0?b*Te/(Te+i):b;g=(b-at)/2}let _=Math.max(.001,b*d-t/ke)/d,w=(b-_)/2,D=c+w+g,R=r-w-g,{outerStart:k,outerEnd:V,innerStart:O,innerEnd:N}=NU(e,p,d,R-D),E=d-k,v=d-V,I=D+k/E,x=R-V/v,A=p+O,C=p+N,T=D+O/A,Ve=R-N/C;if(n.beginPath(),s){let he=(I+x)/2;if(n.arc(o,a,d,I,he),n.arc(o,a,d,he,x),V>0){let Ge=eo(v,x,o,a);n.arc(Ge.x,Ge.y,V,x,R+We)}let De=eo(C,R,o,a);if(n.lineTo(De.x,De.y),N>0){let Ge=eo(C,Ve,o,a);n.arc(Ge.x,Ge.y,N,R+We,Ve+Math.PI)}let Te=(R-N/p+(D+O/p))/2;if(n.arc(o,a,p,R-N/p,Te,!0),n.arc(o,a,p,Te,D+O/p,!0),O>0){let Ge=eo(A,T,o,a);n.arc(Ge.x,Ge.y,O,T+Math.PI,D-We)}let at=eo(E,D,o,a);if(n.lineTo(at.x,at.y),k>0){let Ge=eo(E,I,o,a);n.arc(Ge.x,Ge.y,k,D-We,I)}}else{n.moveTo(o,a);let he=Math.cos(I)*d+o,De=Math.sin(I)*d+a;n.lineTo(he,De);let Te=Math.cos(x)*d+o,at=Math.sin(x)*d+a;n.lineTo(Te,at)}n.closePath()}function VU(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a}=e,c=e.endAngle;if(s){Sh(n,e,t,i,c,r);for(let l=0;l<s;++l)n.fill();isNaN(a)||(c=o+(a%Me||Me))}return Sh(n,e,t,i,c,r),n.fill(),c}function LU(n,e,t,i,r){let{fullCircles:s,startAngle:o,circumference:a,options:c}=e,{borderWidth:l,borderJoinStyle:h,borderDash:d,borderDashOffset:p}=c,g=c.borderAlign==="inner";if(!l)return;n.setLineDash(d||[]),n.lineDashOffset=p,g?(n.lineWidth=l*2,n.lineJoin=h||"round"):(n.lineWidth=l,n.lineJoin=h||"bevel");let b=e.endAngle;if(s){Sh(n,e,t,i,b,r);for(let _=0;_<s;++_)n.stroke();isNaN(a)||(b=o+(a%Me||Me))}g&&MU(n,e,b),s||(Sh(n,e,t,i,b,r),n.stroke())}var K_=class extends mn{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,i){let r=this.getProps(["x","y"],i),{angle:s,distance:o}=a_(r,{x:e,y:t}),{startAngle:a,endAngle:c,innerRadius:l,outerRadius:h,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],i),p=(this.options.spacing+this.options.borderWidth)/2,g=te(d,c-a),b=Qs(s,a,c)&&a!==c,_=g>=Me||b,w=Ln(o,l+p,h+p);return _&&w}getCenterPoint(e){let{x:t,y:i,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:c,spacing:l}=this.options,h=(r+s)/2,d=(o+a+l+c)/2;return{x:t+Math.cos(h)*d,y:i+Math.sin(h)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){let{options:t,circumference:i}=this,r=(t.offset||0)/4,s=(t.spacing||0)/2,o=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=i>Me?Math.floor(i/Me):0,i===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);let c=1-Math.sin(Math.min(ke,i||0)),l=r*c;e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,VU(e,this,l,s,o),LU(e,this,l,s,o),e.restore()}};function hA(n,e,t=e){n.lineCap=te(t.borderCapStyle,e.borderCapStyle),n.setLineDash(te(t.borderDash,e.borderDash)),n.lineDashOffset=te(t.borderDashOffset,e.borderDashOffset),n.lineJoin=te(t.borderJoinStyle,e.borderJoinStyle),n.lineWidth=te(t.borderWidth,e.borderWidth),n.strokeStyle=te(t.borderColor,e.borderColor)}function FU(n,e,t){n.lineTo(t.x,t.y)}function UU(n){return n.stepped?US:n.tension||n.cubicInterpolationMode==="monotone"?BS:FU}function dA(n,e,t={}){let i=n.length,{start:r=0,end:s=i-1}=t,{start:o,end:a}=e,c=Math.max(r,o),l=Math.min(s,a),h=r<o&&s<o||r>a&&s>a;return{count:i,start:c,loop:e.loop,ilen:l<c&&!h?i+l-c:l-c}}function BU(n,e,t,i){let{points:r,options:s}=e,{count:o,start:a,loop:c,ilen:l}=dA(r,t,i),h=UU(s),{move:d=!0,reverse:p}=i||{},g,b,_;for(g=0;g<=l;++g)b=r[(a+(p?l-g:g))%o],!b.skip&&(d?(n.moveTo(b.x,b.y),d=!1):h(n,_,b,p,s.stepped),_=b);return c&&(b=r[(a+(p?l:0))%o],h(n,_,b,p,s.stepped)),!!c}function jU(n,e,t,i){let r=e.points,{count:s,start:o,ilen:a}=dA(r,t,i),{move:c=!0,reverse:l}=i||{},h=0,d=0,p,g,b,_,w,D,R=V=>(o+(l?a-V:V))%s,k=()=>{_!==w&&(n.lineTo(h,w),n.lineTo(h,_),n.lineTo(h,D))};for(c&&(g=r[R(0)],n.moveTo(g.x,g.y)),p=0;p<=a;++p){if(g=r[R(p)],g.skip)continue;let V=g.x,O=g.y,N=V|0;N===b?(O<_?_=O:O>w&&(w=O),h=(d*h+V)/++d):(k(),n.lineTo(V,O),b=N,d=0,_=w=O),D=O}k()}function Y_(n){let e=n.options,t=e.borderDash&&e.borderDash.length;return!n._decimated&&!n._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?jU:BU}function zU(n){return n.stepped?YS:n.tension||n.cubicInterpolationMode==="monotone"?QS:Fi}function qU(n,e,t,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,i)&&r.closePath()),hA(n,e.options),n.stroke(r)}function WU(n,e,t,i){let{segments:r,options:s}=e,o=Y_(e);for(let a of r)hA(n,s,a.style),n.beginPath(),o(n,e,a,{start:t,end:t+i-1})&&n.closePath(),n.stroke()}var $U=typeof Path2D=="function";function HU(n,e,t,i){$U&&!e.options.segment?qU(n,e,t,i):WU(n,e,t,i)}var ro=(()=>{class n extends mn{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,i){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;HS(this._points,r,t,s,i),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=JS(this,this.options.segment))}first(){let t=this.segments,i=this.points;return t.length&&i[t[0].start]}last(){let t=this.segments,i=this.points,r=t.length;return r&&i[t[r-1].end]}interpolate(t,i){let r=this.options,s=t[i],o=this.points,a=C_(this,{property:i,start:s,end:s});if(!a.length)return;let c=[],l=zU(r),h,d;for(h=0,d=a.length;h<d;++h){let{start:p,end:g}=a[h],b=o[p],_=o[g];if(b===_){c.push(b);continue}let w=Math.abs((s-b[i])/(_[i]-b[i])),D=l(b,_,w,r.stepped);D[i]=t[i],c.push(D)}return c.length===1?c[0]:c}pathSegment(t,i,r){return Y_(this)(t,this,i,r)}path(t,i,r){let s=this.segments,o=Y_(this),a=this._loop;i=i||0,r=r||this.points.length-i;for(let c of s)a&=o(t,this,c,{start:i,end:i+r-1});return!!a}draw(t,i,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(t.save(),HU(t,this,r,s),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function Cx(n,e,t,i){let r=n.options,{[t]:s}=n.getProps([t],i);return Math.abs(e-s)<r.radius+r.hitRadius}var ov=(()=>{class n extends mn{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,i,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(t-o,2)+Math.pow(i-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(t,i){return Cx(this,t,"x",i)}inYRange(t,i){return Cx(this,t,"y",i)}getCenterPoint(t){let{x:i,y:r}=this.getProps(["x","y"],t);return{x:i,y:r}}size(t){t=t||this.options||{};let i=t.radius||0;i=Math.max(i,i&&t.hoverRadius||0);let r=i&&t.borderWidth||0;return(i+r)*2}draw(t,i){let r=this.options;this.skip||r.radius<.1||!Nn(this,i,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,ah(t,r,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function fA(n,e){let{x:t,y:i,base:r,width:s,height:o}=n.getProps(["x","y","base","width","height"],e),a,c,l,h,d;return n.horizontal?(d=o/2,a=Math.min(t,r),c=Math.max(t,r),l=i-d,h=i+d):(d=s/2,a=t-d,c=t+d,l=Math.min(i,r),h=Math.max(i,r)),{left:a,top:l,right:c,bottom:h}}function Wi(n,e,t,i){return n?0:Ze(e,t,i)}function GU(n,e,t){let i=n.options.borderWidth,r=n.borderSkipped,s=__(i);return{t:Wi(r.top,s.top,0,t),r:Wi(r.right,s.right,0,e),b:Wi(r.bottom,s.bottom,0,t),l:Wi(r.left,s.left,0,e)}}function KU(n,e,t){let{enableBorderRadius:i}=n.getProps(["enableBorderRadius"]),r=n.options.borderRadius,s=zi(r),o=Math.min(e,t),a=n.borderSkipped,c=i||ae(r);return{topLeft:Wi(!c||a.top||a.left,s.topLeft,0,o),topRight:Wi(!c||a.top||a.right,s.topRight,0,o),bottomLeft:Wi(!c||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Wi(!c||a.bottom||a.right,s.bottomRight,0,o)}}function YU(n){let e=fA(n),t=e.right-e.left,i=e.bottom-e.top,r=GU(n,t/2,i/2),s=KU(n,t/2,i/2);return{outer:{x:e.left,y:e.top,w:t,h:i,radius:s},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function N_(n,e,t,i){let r=e===null,s=t===null,a=n&&!(r&&s)&&fA(n,i);return a&&(r||Ln(e,a.left,a.right))&&(s||Ln(t,a.top,a.bottom))}function QU(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function XU(n,e){n.rect(e.x,e.y,e.w,e.h)}function V_(n,e,t={}){let i=n.x!==t.x?-e:0,r=n.y!==t.y?-e:0,s=(n.x+n.w!==t.x+t.w?e:0)-i,o=(n.y+n.h!==t.y+t.h?e:0)-r;return{x:n.x+i,y:n.y+r,w:n.w+s,h:n.h+o,radius:n.radius}}var Q_=class extends mn{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){let{inflateAmount:t,options:{borderColor:i,backgroundColor:r}}=this,{inner:s,outer:o}=YU(this),a=QU(o.radius)?Js:XU;e.save(),(o.w!==s.w||o.h!==s.h)&&(e.beginPath(),a(e,V_(o,t,s)),e.clip(),a(e,V_(s,-t,o)),e.fillStyle=i,e.fill("evenodd")),e.beginPath(),a(e,V_(s,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,i){return N_(this,e,t,i)}inXRange(e,t){return N_(this,e,null,t)}inYRange(e,t){return N_(this,null,e,t)}getCenterPoint(e){let{x:t,y:i,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],e);return{x:s?(t+r)/2:t,y:s?i:(i+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}},JU=Object.freeze({__proto__:null,ArcElement:K_,BarElement:Q_,LineElement:ro,PointElement:ov}),X_=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Dx=X_.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function pA(n){return X_[n%X_.length]}function mA(n){return Dx[n%Dx.length]}function ZU(n,e){return n.borderColor=pA(e),n.backgroundColor=mA(e),++e}function eB(n,e){return n.backgroundColor=n.data.map(()=>pA(e++)),e}function tB(n,e){return n.backgroundColor=n.data.map(()=>mA(e++)),e}function nB(n){let e=0;return(t,i)=>{let r=n.getDatasetMeta(i).controller;r instanceof rv?e=eB(t,e):r instanceof nA?e=tB(t,e):r&&(e=ZU(t,e))}}function Rx(n){let e;for(e in n)if(n[e].borderColor||n[e].backgroundColor)return!0;return!1}function iB(n){return n&&(n.borderColor||n.backgroundColor)}var rB={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,e,t){if(!t.enabled)return;let{data:{datasets:i},options:r}=n.config,{elements:s}=r;if(!t.forceOverride&&(Rx(i)||iB(r)||s&&Rx(s)))return;let o=nB(n);i.forEach(o)}};function sB(n,e,t,i,r){let s=r.samples||i;if(s>=t)return n.slice(e,e+t);let o=[],a=(t-2)/(s-2),c=0,l=e+t-1,h=e,d,p,g,b,_;for(o[c++]=n[h],d=0;d<s-2;d++){let w=0,D=0,R,k=Math.floor((d+1)*a)+1+e,V=Math.min(Math.floor((d+2)*a)+1,t)+e,O=V-k;for(R=k;R<V;R++)w+=n[R].x,D+=n[R].y;w/=O,D/=O;let N=Math.floor(d*a)+1+e,E=Math.min(Math.floor((d+1)*a)+1,t)+e,{x:v,y:I}=n[h];for(g=b=-1,R=N;R<E;R++)b=.5*Math.abs((v-w)*(n[R].y-I)-(v-n[R].x)*(D-I)),b>g&&(g=b,p=n[R],_=R);o[c++]=p,h=_}return o[c++]=n[l],o}function oB(n,e,t,i){let r=0,s=0,o,a,c,l,h,d,p,g,b,_,w=[],D=e+t-1,R=n[e].x,V=n[D].x-R;for(o=e;o<e+t;++o){a=n[o],c=(a.x-R)/V*i,l=a.y;let O=c|0;if(O===h)l<b?(b=l,d=o):l>_&&(_=l,p=o),r=(s*r+a.x)/++s;else{let N=o-1;if(!fe(d)&&!fe(p)){let E=Math.min(d,p),v=Math.max(d,p);E!==g&&E!==N&&w.push(xe(H({},n[E]),{x:r})),v!==g&&v!==N&&w.push(xe(H({},n[v]),{x:r}))}o>0&&N!==g&&w.push(n[N]),w.push(a),h=O,s=0,b=_=l,d=p=g=o}}return w}function gA(n){if(n._decimated){let e=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function Px(n){n.data.datasets.forEach(e=>{gA(e)})}function aB(n,e){let t=e.length,i=0,r,{iScale:s}=n,{min:o,max:a,minDefined:c,maxDefined:l}=s.getUserBounds();return c&&(i=Ze(On(e,s.axis,o).lo,0,t-1)),l?r=Ze(On(e,s.axis,a).hi+1,i,t)-i:r=t-i,{start:i,count:r}}var cB={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,e,t)=>{if(!t.enabled){Px(n);return}let i=n.width;n.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,c=n.getDatasetMeta(s),l=o||r.data;if(Zs([a,n.options.indexAxis])==="y"||!c.controller.supportsDecimation)return;let h=n.scales[c.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:d,count:p}=aB(c,l),g=t.threshold||4*i;if(p<=g){gA(r);return}fe(o)&&(r._data=l,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(_){this._data=_}}));let b;switch(t.algorithm){case"lttb":b=sB(l,d,p,i,t);break;case"min-max":b=oB(l,d,p,i);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=b})},destroy(n){Px(n)}};function lB(n,e,t){let i=n.segments,r=n.points,s=e.points,o=[];for(let a of i){let{start:c,end:l}=a;l=av(c,l,r);let h=J_(t,r[c],r[l],a.loop);if(!e.segments){o.push({source:a,target:h,start:r[c],end:r[l]});continue}let d=C_(e,h);for(let p of d){let g=J_(t,s[p.start],s[p.end],p.loop),b=A_(a,r,g);for(let _ of b)o.push({source:_,target:p,start:{[t]:kx(h,g,"start",Math.max)},end:{[t]:kx(h,g,"end",Math.min)}})}}return o}function J_(n,e,t,i){if(i)return;let r=e[n],s=t[n];return n==="angle"&&(r=Nt(r),s=Nt(s)),{property:n,start:r,end:s}}function uB(n,e){let{x:t=null,y:i=null}=n||{},r=e.points,s=[];return e.segments.forEach(({start:o,end:a})=>{a=av(o,a,r);let c=r[o],l=r[a];i!==null?(s.push({x:c.x,y:i}),s.push({x:l.x,y:i})):t!==null&&(s.push({x:t,y:c.y}),s.push({x:t,y:l.y}))}),s}function av(n,e,t){for(;e>n;e--){let i=t[e];if(!isNaN(i.x)&&!isNaN(i.y))break}return e}function kx(n,e,t,i){return n&&e?i(n[t],e[t]):n?n[t]:e?e[t]:0}function yA(n,e){let t=[],i=!1;return Pe(n)?(i=!0,t=n):t=uB(n,e),t.length?new ro({points:t,options:{tension:0},_loop:i,_fullLoop:i}):null}function Mx(n){return n&&n.fill!==!1}function hB(n,e,t){let r=n[e].fill,s=[e],o;if(!t)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!Fe(r))return r;if(o=n[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function dB(n,e,t){let i=gB(n);if(ae(i))return isNaN(i.value)?!1:i;let r=parseFloat(i);return Fe(r)&&Math.floor(r)===r?fB(i[0],e,r,t):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function fB(n,e,t,i){return(n==="-"||n==="+")&&(t=e+t),t===e||t<0||t>=i?!1:t}function pB(n,e){let t=null;return n==="start"?t=e.bottom:n==="end"?t=e.top:ae(n)?t=e.getPixelForValue(n.value):e.getBasePixel&&(t=e.getBasePixel()),t}function mB(n,e,t){let i;return n==="start"?i=t:n==="end"?i=e.options.reverse?e.min:e.max:ae(n)?i=n.value:i=e.getBaseValue(),i}function gB(n){let e=n.options,t=e.fill,i=te(t&&t.target,t);return i===void 0&&(i=!!e.backgroundColor),i===!1||i===null?!1:i===!0?"origin":i}function yB(n){let{scale:e,index:t,line:i}=n,r=[],s=i.segments,o=i.points,a=_B(e,t);a.push(yA({x:null,y:e.bottom},i));for(let c=0;c<s.length;c++){let l=s[c];for(let h=l.start;h<=l.end;h++)vB(r,o[h],a)}return new ro({points:r,options:{}})}function _B(n,e){let t=[],i=n.getMatchingVisibleMetas("line");for(let r=0;r<i.length;r++){let s=i[r];if(s.index===e)break;s.hidden||t.unshift(s.dataset)}return t}function vB(n,e,t){let i=[];for(let r=0;r<t.length;r++){let s=t[r],{first:o,last:a,point:c}=wB(s,e,"x");if(!(!c||o&&a)){if(o)i.unshift(c);else if(n.push(c),!a)break}}n.push(...i)}function wB(n,e,t){let i=n.interpolate(e,t);if(!i)return{};let r=i[t],s=n.segments,o=n.points,a=!1,c=!1;for(let l=0;l<s.length;l++){let h=s[l],d=o[h.start][t],p=o[h.end][t];if(Ln(r,d,p)){a=r===d,c=r===p;break}}return{first:a,last:c,point:i}}var xh=class{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,i){let{x:r,y:s,radius:o}=this;return t=t||{start:0,end:Me},e.arc(r,s,o,t.end,t.start,!0),!i.bounds}interpolate(e){let{x:t,y:i,radius:r}=this,s=e.angle;return{x:t+Math.cos(s)*r,y:i+Math.sin(s)*r,angle:s}}};function bB(n){let{chart:e,fill:t,line:i}=n;if(Fe(t))return IB(e,t);if(t==="stack")return yB(n);if(t==="shape")return!0;let r=EB(n);return r instanceof xh?r:yA(r,i)}function IB(n,e){let t=n.getDatasetMeta(e);return t&&n.isDatasetVisible(e)?t.dataset:null}function EB(n){return(n.scale||{}).getPointPositionForValue?SB(n):TB(n)}function TB(n){let{scale:e={},fill:t}=n,i=pB(t,e);if(Fe(i)){let r=e.isHorizontal();return{x:r?i:null,y:r?null:i}}return null}function SB(n){let{scale:e,fill:t}=n,i=e.options,r=e.getLabels().length,s=i.reverse?e.max:e.min,o=mB(t,e,s),a=[];if(i.grid.circular){let c=e.getPointPositionForValue(0,s);return new xh({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)a.push(e.getPointPositionForValue(c,o));return a}function L_(n,e,t){let i=bB(e),{line:r,scale:s,axis:o}=e,a=r.options,c=a.fill,l=a.backgroundColor,{above:h=l,below:d=l}=c||{};i&&r.points.length&&(rc(n,t),xB(n,{line:r,target:i,above:h,below:d,area:t,scale:s,axis:o}),sc(n))}function xB(n,e){let{line:t,target:i,above:r,below:s,area:o,scale:a}=e,c=t._loop?"angle":e.axis;n.save(),c==="x"&&s!==r&&(Ox(n,i,o.top),Nx(n,{line:t,target:i,color:r,scale:a,property:c}),n.restore(),n.save(),Ox(n,i,o.bottom)),Nx(n,{line:t,target:i,color:s,scale:a,property:c}),n.restore()}function Ox(n,e,t){let{segments:i,points:r}=e,s=!0,o=!1;n.beginPath();for(let a of i){let{start:c,end:l}=a,h=r[c],d=r[av(c,l,r)];s?(n.moveTo(h.x,h.y),s=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),o=!!e.pathSegment(n,a,{move:o}),o?n.closePath():n.lineTo(d.x,t)}n.lineTo(e.first().x,t),n.closePath(),n.clip()}function Nx(n,e){let{line:t,target:i,property:r,color:s,scale:o}=e,a=lB(t,i,r);for(let{source:c,target:l,start:h,end:d}of a){let{style:{backgroundColor:p=s}={}}=c,g=i!==!0;n.save(),n.fillStyle=p,AB(n,o,g&&J_(r,h,d)),n.beginPath();let b=!!t.pathSegment(n,c),_;if(g){b?n.closePath():Vx(n,i,d,r);let w=!!i.pathSegment(n,l,{move:b,reverse:!0});_=b&&w,_||Vx(n,i,h,r)}n.closePath(),n.fill(_?"evenodd":"nonzero"),n.restore()}}function AB(n,e,t){let{top:i,bottom:r}=e.chart.chartArea,{property:s,start:o,end:a}=t||{};s==="x"&&(n.beginPath(),n.rect(o,i,a-o,r-i),n.clip())}function Vx(n,e,t,i){let r=e.interpolate(t,i);r&&n.lineTo(r.x,r.y)}var CB={id:"filler",afterDatasetsUpdate(n,e,t){let i=(n.data.datasets||[]).length,r=[],s,o,a,c;for(o=0;o<i;++o)s=n.getDatasetMeta(o),a=s.dataset,c=null,a&&a.options&&a instanceof ro&&(c={visible:n.isDatasetVisible(o),index:o,fill:dB(a,o,i),chart:n,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=c,r.push(c);for(o=0;o<i;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=hB(r,o,t.propagate))},beforeDraw(n,e,t){let i=t.drawTime==="beforeDraw",r=n.getSortedVisibleDatasetMetas(),s=n.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),i&&a.fill&&L_(n.ctx,a,s))}},beforeDatasetsDraw(n,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;let i=n.getSortedVisibleDatasetMetas();for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;Mx(s)&&L_(n.ctx,s,n.chartArea)}},beforeDatasetDraw(n,e,t){let i=e.meta.$filler;!Mx(i)||t.drawTime!=="beforeDatasetDraw"||L_(n.ctx,i,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Lx=(n,e)=>{let{boxHeight:t=e,boxWidth:i=e}=n;return n.usePointStyle&&(t=Math.min(t,e),i=n.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:t,itemHeight:Math.max(e,t)}},DB=(n,e)=>n!==null&&e!==null&&n.datasetIndex===e.datasetIndex&&n.index===e.index,Ah=class extends mn{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,i){this.maxWidth=e,this.maxHeight=t,this._margins=i,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let e=this.options.labels||{},t=Ce(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(i=>e.filter(i,this.chart.data))),e.sort&&(t=t.sort((i,r)=>e.sort(i,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}let i=e.labels,r=Xe(i.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:c}=Lx(i,s),l,h;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,h=this._fitRows(o,s,a,c)+10):(h=this.maxHeight,l=this._fitCols(o,r,a,c)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(h,e.maxHeight||this.maxHeight)}_fitRows(e,t,i,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.lineWidths=[0],h=r+a,d=e;s.textAlign="left",s.textBaseline="middle";let p=-1,g=-h;return this.legendItems.forEach((b,_)=>{let w=i+t/2+s.measureText(b.text).width;(_===0||l[l.length-1]+w+2*a>o)&&(d+=h,l[l.length-(_>0?0:1)]=0,g+=h,p++),c[_]={left:0,top:g,row:p,width:w,height:r},l[l.length-1]+=w+a}),d}_fitCols(e,t,i,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,c=this.legendHitBoxes=[],l=this.columnSizes=[],h=o-e,d=a,p=0,g=0,b=0,_=0;return this.legendItems.forEach((w,D)=>{let{itemWidth:R,itemHeight:k}=RB(i,t,s,w,r);D>0&&g+k+2*a>h&&(d+=p+a,l.push({width:p,height:g}),b+=p+a,_++,p=g=0),c[D]={left:b,top:g,col:_,width:R,height:k},p=Math.max(p,R),g+=k+a}),d+=p,l.push({width:p,height:g}),d}adjustHitBoxes(){if(!this.options.display)return;let e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:i,labels:{padding:r},rtl:s}}=this,o=Pr(s,this.left,this.width);if(this.isHorizontal()){let a=0,c=pt(i,this.left+r,this.right-this.lineWidths[a]);for(let l of t)a!==l.row&&(a=l.row,c=pt(i,this.left+r,this.right-this.lineWidths[a])),l.top+=this.top+e+r,l.left=o.leftForLtr(o.x(c),l.width),c+=l.width+r}else{let a=0,c=pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height);for(let l of t)l.col!==a&&(a=l.col,c=pt(i,this.top+e+r,this.bottom-this.columnSizes[a].height)),l.top=c,l.left+=this.left+r,l.left=o.leftForLtr(o.x(l.left),l.width),c+=l.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let e=this.ctx;rc(e,this),this._draw(),sc(e)}}_draw(){let{options:e,columnSizes:t,lineWidths:i,ctx:r}=this,{align:s,labels:o}=e,a=Ue.color,c=Pr(e.rtl,this.left,this.width),l=Xe(o.font),{padding:h}=o,d=l.size,p=d/2,g;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;let{boxWidth:b,boxHeight:_,itemHeight:w}=Lx(o,d),D=function(N,E,v){if(isNaN(b)||b<=0||isNaN(_)||_<0)return;r.save();let I=te(v.lineWidth,1);if(r.fillStyle=te(v.fillStyle,a),r.lineCap=te(v.lineCap,"butt"),r.lineDashOffset=te(v.lineDashOffset,0),r.lineJoin=te(v.lineJoin,"miter"),r.lineWidth=I,r.strokeStyle=te(v.strokeStyle,a),r.setLineDash(te(v.lineDash,[])),o.usePointStyle){let x={radius:_*Math.SQRT2/2,pointStyle:v.pointStyle,rotation:v.rotation,borderWidth:I},A=c.xPlus(N,b/2),C=E+p;y_(r,x,A,C,o.pointStyleWidth&&b)}else{let x=E+Math.max((d-_)/2,0),A=c.leftForLtr(N,b),C=zi(v.borderRadius);r.beginPath(),Object.values(C).some(T=>T!==0)?Js(r,{x:A,y:x,w:b,h:_,radius:C}):r.rect(A,x,b,_),r.fill(),I!==0&&r.stroke()}r.restore()},R=function(N,E,v){ji(r,v.text,N,E+w/2,l,{strikethrough:v.hidden,textAlign:c.textAlign(v.textAlign)})},k=this.isHorizontal(),V=this._computeTitleHeight();k?g={x:pt(s,this.left+h,this.right-i[0]),y:this.top+h+V,line:0}:g={x:this.left+h,y:pt(s,this.top+V+h,this.bottom-t[0].height),line:0},S_(this.ctx,e.textDirection);let O=w+h;this.legendItems.forEach((N,E)=>{r.strokeStyle=N.fontColor,r.fillStyle=N.fontColor;let v=r.measureText(N.text).width,I=c.textAlign(N.textAlign||(N.textAlign=o.textAlign)),x=b+p+v,A=g.x,C=g.y;c.setWidth(this.width),k?E>0&&A+x+h>this.right&&(C=g.y+=O,g.line++,A=g.x=pt(s,this.left+h,this.right-i[g.line])):E>0&&C+O>this.bottom&&(A=g.x=A+t[g.line].width+h,g.line++,C=g.y=pt(s,this.top+V+h,this.bottom-t[g.line].height));let T=c.x(A);if(D(T,C,N),A=VS(I,A+b+p,k?A+x:this.right,e.rtl),R(c.x(A),C,N),k)g.x+=x+h;else if(typeof N.text!="string"){let Ve=l.lineHeight;g.y+=_A(N,Ve)+h}else g.y+=O}),x_(this.ctx,e.textDirection)}drawTitle(){let e=this.options,t=e.title,i=Xe(t.font),r=mt(t.padding);if(!t.display)return;let s=Pr(e.rtl,this.left,this.width),o=this.ctx,a=t.position,c=i.size/2,l=r.top+c,h,d=this.left,p=this.width;if(this.isHorizontal())p=Math.max(...this.lineWidths),h=this.top+l,d=pt(e.align,d,this.right-p);else{let b=this.columnSizes.reduce((_,w)=>Math.max(_,w.height),0);h=l+pt(e.align,this.top,this.bottom-b-e.labels.padding-this._computeTitleHeight())}let g=pt(a,d,d+p);o.textAlign=s.textAlign(sh(a)),o.textBaseline="middle",o.strokeStyle=t.color,o.fillStyle=t.color,o.font=i.string,ji(o,t.text,g,h,i)}_computeTitleHeight(){let e=this.options.title,t=Xe(e.font),i=mt(e.padding);return e.display?t.lineHeight+i.height:0}_getLegendItemAt(e,t){let i,r,s;if(Ln(e,this.left,this.right)&&Ln(t,this.top,this.bottom)){for(s=this.legendHitBoxes,i=0;i<s.length;++i)if(r=s[i],Ln(e,r.left,r.left+r.width)&&Ln(t,r.top,r.top+r.height))return this.legendItems[i]}return null}handleEvent(e){let t=this.options;if(!MB(e.type,t))return;let i=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){let r=this._hoveredItem,s=DB(r,i);r&&!s&&Ce(t.onLeave,[e,r,this],this),this._hoveredItem=i,i&&!s&&Ce(t.onHover,[e,i,this],this)}else i&&Ce(t.onClick,[e,i,this],this)}};function RB(n,e,t,i,r){let s=PB(i,n,e,t),o=kB(r,i,e.lineHeight);return{itemWidth:s,itemHeight:o}}function PB(n,e,t,i){let r=n.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),e+t.size/2+i.measureText(r).width}function kB(n,e,t){let i=n;return typeof e.text!="string"&&(i=_A(e,t)),i}function _A(n,e){let t=n.text?n.text.length:0;return e*t}function MB(n,e){return!!((n==="mousemove"||n==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(n==="click"||n==="mouseup"))}var OB={id:"legend",_element:Ah,start(n,e,t){let i=n.legend=new Ah({ctx:n.ctx,options:t,chart:n});Et.configure(n,i,t),Et.addBox(n,i)},stop(n){Et.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,e,t){let i=n.legend;Et.configure(n,i,t),i.options=t},afterUpdate(n){let e=n.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(n,e){e.replay||n.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,e,t){let i=e.datasetIndex,r=t.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let e=n.data.datasets,{labels:{usePointStyle:t,pointStyle:i,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=n.legend.options;return n._getSortedDatasetMetas().map(c=>{let l=c.controller.getStyle(t?0:void 0),h=mt(l.borderWidth);return{text:e[c.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!c.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:o&&(a||l.borderRadius),datasetIndex:c.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},pc=class extends mn{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){let i=this.options;if(this.left=0,this.top=0,!i.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;let r=Pe(i.text)?i.text.length:1;this._padding=mt(i.padding);let s=r*Xe(i.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){let{top:t,left:i,bottom:r,right:s,options:o}=this,a=o.align,c=0,l,h,d;return this.isHorizontal()?(h=pt(a,i,s),d=t+e,l=s-i):(o.position==="left"?(h=i+e,d=pt(a,r,t),c=ke*-.5):(h=s-e,d=pt(a,t,r),c=ke*.5),l=r-t),{titleX:h,titleY:d,maxWidth:l,rotation:c}}draw(){let e=this.ctx,t=this.options;if(!t.display)return;let i=Xe(t.font),s=i.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:c,rotation:l}=this._drawArgs(s);ji(e,t.text,0,0,i,{color:t.color,maxWidth:c,rotation:l,textAlign:sh(t.align),textBaseline:"middle",translation:[o,a]})}};function NB(n,e){let t=new pc({ctx:n.ctx,options:e,chart:n});Et.configure(n,t,e),Et.addBox(n,t),n.titleBlock=t}var cv={id:"title",_element:pc,start(n,e,t){NB(n,t)},stop(n){let e=n.titleBlock;Et.removeBox(n,e),delete n.titleBlock},beforeUpdate(n,e,t){let i=n.titleBlock;Et.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},yh=new WeakMap,VB={id:"subtitle",start(n,e,t){let i=new pc({ctx:n.ctx,options:t,chart:n});Et.configure(n,i,t),Et.addBox(n,i),yh.set(n,i)},stop(n){Et.removeBox(n,yh.get(n)),yh.delete(n)},beforeUpdate(n,e,t){let i=yh.get(n);Et.configure(n,i,t),i.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},dc={average(n){if(!n.length)return!1;let e,t,i=new Set,r=0,s=0;for(e=0,t=n.length;e<t;++e){let a=n[e].element;if(a&&a.hasValue()){let c=a.tooltipPosition();i.add(c.x),r+=c.y,++s}}return s===0||i.size===0?!1:{x:[...i].reduce((a,c)=>a+c)/i.size,y:r/s}},nearest(n,e){if(!n.length)return!1;let t=e.x,i=e.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=n.length;s<o;++s){let c=n[s].element;if(c&&c.hasValue()){let l=c.getCenterPoint(),h=eh(e,l);h<r&&(r=h,a=c)}}if(a){let c=a.tooltipPosition();t=c.x,i=c.y}return{x:t,y:i}}};function Fn(n,e){return e&&(Pe(e)?Array.prototype.push.apply(n,e):n.push(e)),n}function ui(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function LB(n,e){let{element:t,datasetIndex:i,index:r}=e,s=n.getDatasetMeta(i).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:n,label:o,parsed:s.getParsed(r),raw:n.data.datasets[i].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:i,element:t}}function Fx(n,e){let t=n.chart.ctx,{body:i,footer:r,title:s}=n,{boxWidth:o,boxHeight:a}=e,c=Xe(e.bodyFont),l=Xe(e.titleFont),h=Xe(e.footerFont),d=s.length,p=r.length,g=i.length,b=mt(e.padding),_=b.height,w=0,D=i.reduce((V,O)=>V+O.before.length+O.lines.length+O.after.length,0);if(D+=n.beforeBody.length+n.afterBody.length,d&&(_+=d*l.lineHeight+(d-1)*e.titleSpacing+e.titleMarginBottom),D){let V=e.displayColors?Math.max(a,c.lineHeight):c.lineHeight;_+=g*V+(D-g)*c.lineHeight+(D-1)*e.bodySpacing}p&&(_+=e.footerMarginTop+p*h.lineHeight+(p-1)*e.footerSpacing);let R=0,k=function(V){w=Math.max(w,t.measureText(V).width+R)};return t.save(),t.font=l.string,be(n.title,k),t.font=c.string,be(n.beforeBody.concat(n.afterBody),k),R=e.displayColors?o+2+e.boxPadding:0,be(i,V=>{be(V.before,k),be(V.lines,k),be(V.after,k)}),R=0,t.font=h.string,be(n.footer,k),t.restore(),w+=b.width,{width:w,height:_}}function FB(n,e){let{y:t,height:i}=e;return t<i/2?"top":t>n.height-i/2?"bottom":"center"}function UB(n,e,t,i){let{x:r,width:s}=i,o=t.caretSize+t.caretPadding;if(n==="left"&&r+s+o>e.width||n==="right"&&r-s-o<0)return!0}function BB(n,e,t,i){let{x:r,width:s}=t,{width:o,chartArea:{left:a,right:c}}=n,l="center";return i==="center"?l=r<=(a+c)/2?"left":"right":r<=s/2?l="left":r>=o-s/2&&(l="right"),UB(l,n,e,t)&&(l="center"),l}function Ux(n,e,t){let i=t.yAlign||e.yAlign||FB(n,t);return{xAlign:t.xAlign||e.xAlign||BB(n,e,t,i),yAlign:i}}function jB(n,e){let{x:t,width:i}=n;return e==="right"?t-=i:e==="center"&&(t-=i/2),t}function zB(n,e,t){let{y:i,height:r}=n;return e==="top"?i+=t:e==="bottom"?i-=r+t:i-=r/2,i}function Bx(n,e,t,i){let{caretSize:r,caretPadding:s,cornerRadius:o}=n,{xAlign:a,yAlign:c}=t,l=r+s,{topLeft:h,topRight:d,bottomLeft:p,bottomRight:g}=zi(o),b=jB(e,a),_=zB(e,c,l);return c==="center"?a==="left"?b+=l:a==="right"&&(b-=l):a==="left"?b-=Math.max(h,p)+r:a==="right"&&(b+=Math.max(d,g)+r),{x:Ze(b,0,i.width-e.width),y:Ze(_,0,i.height-e.height)}}function _h(n,e,t){let i=mt(t.padding);return e==="center"?n.x+n.width/2:e==="right"?n.x+n.width-i.right:n.x+i.left}function jx(n){return Fn([],ui(n))}function qB(n,e,t){return ci(n,{tooltip:e,tooltipItems:t,type:"tooltip"})}function zx(n,e){let t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?n.override(t):n}var vA={beforeTitle:Vn,title(n){if(n.length>0){let e=n[0],t=e.chart.data.labels,i=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return t[e.dataIndex]}return""},afterTitle:Vn,beforeBody:Vn,beforeLabel:Vn,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let e=n.dataset.label||"";e&&(e+=": ");let t=n.formattedValue;return fe(t)||(e+=t),e},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:Vn,afterBody:Vn,beforeFooter:Vn,footer:Vn,afterFooter:Vn};function Lt(n,e,t,i){let r=n[e].call(t,i);return typeof r>"u"?vA[e].call(t,i):r}var qx=(()=>{class n extends mn{static positioners=dc;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let i=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&i.options.animation&&r.animations,o=new Ih(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=qB(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,i){let{callbacks:r}=i,s=Lt(r,"beforeTitle",this,t),o=Lt(r,"title",this,t),a=Lt(r,"afterTitle",this,t),c=[];return c=Fn(c,ui(s)),c=Fn(c,ui(o)),c=Fn(c,ui(a)),c}getBeforeBody(t,i){return jx(Lt(i.callbacks,"beforeBody",this,t))}getBody(t,i){let{callbacks:r}=i,s=[];return be(t,o=>{let a={before:[],lines:[],after:[]},c=zx(r,o);Fn(a.before,ui(Lt(c,"beforeLabel",this,o))),Fn(a.lines,Lt(c,"label",this,o)),Fn(a.after,ui(Lt(c,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(t,i){return jx(Lt(i.callbacks,"afterBody",this,t))}getFooter(t,i){let{callbacks:r}=i,s=Lt(r,"beforeFooter",this,t),o=Lt(r,"footer",this,t),a=Lt(r,"afterFooter",this,t),c=[];return c=Fn(c,ui(s)),c=Fn(c,ui(o)),c=Fn(c,ui(a)),c}_createItems(t){let i=this._active,r=this.chart.data,s=[],o=[],a=[],c=[],l,h;for(l=0,h=i.length;l<h;++l)c.push(LB(this.chart,i[l]));return t.filter&&(c=c.filter((d,p,g)=>t.filter(d,p,g,r))),t.itemSort&&(c=c.sort((d,p)=>t.itemSort(d,p,r))),be(c,d=>{let p=zx(t.callbacks,d);s.push(Lt(p,"labelColor",this,d)),o.push(Lt(p,"labelPointStyle",this,d)),a.push(Lt(p,"labelTextColor",this,d))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=c,c}update(t,i){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let c=dc[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let l=this._size=Fx(this,r),h=Object.assign({},c,l),d=Ux(this.chart,r,h),p=Bx(r,h,d,this.chart);this.xAlign=d.xAlign,this.yAlign=d.yAlign,o={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:c.x,caretY:c.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:i})}drawCaret(t,i,r,s){let o=this.getCaretPosition(t,r,s);i.lineTo(o.x1,o.y1),i.lineTo(o.x2,o.y2),i.lineTo(o.x3,o.y3)}getCaretPosition(t,i,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:c}=r,{topLeft:l,topRight:h,bottomLeft:d,bottomRight:p}=zi(c),{x:g,y:b}=t,{width:_,height:w}=i,D,R,k,V,O,N;return o==="center"?(O=b+w/2,s==="left"?(D=g,R=D-a,V=O+a,N=O-a):(D=g+_,R=D+a,V=O-a,N=O+a),k=D):(s==="left"?R=g+Math.max(l,d)+a:s==="right"?R=g+_-Math.max(h,p)-a:R=this.caretX,o==="top"?(V=b,O=V-a,D=R-a,k=R+a):(V=b+w,O=V+a,D=R+a,k=R-a),N=V),{x1:D,x2:R,x3:k,y1:V,y2:O,y3:N}}drawTitle(t,i,r){let s=this.title,o=s.length,a,c,l;if(o){let h=Pr(r.rtl,this.x,this.width);for(t.x=_h(this,r.titleAlign,r),i.textAlign=h.textAlign(r.titleAlign),i.textBaseline="middle",a=Xe(r.titleFont),c=r.titleSpacing,i.fillStyle=r.titleColor,i.font=a.string,l=0;l<o;++l)i.fillText(s[l],h.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+c,l+1===o&&(t.y+=r.titleMarginBottom-c)}}_drawColorBox(t,i,r,s,o){let a=this.labelColors[r],c=this.labelPointStyles[r],{boxHeight:l,boxWidth:h}=o,d=Xe(o.bodyFont),p=_h(this,"left",o),g=s.x(p),b=l<d.lineHeight?(d.lineHeight-l)/2:0,_=i.y+b;if(o.usePointStyle){let w={radius:Math.min(h,l)/2,pointStyle:c.pointStyle,rotation:c.rotation,borderWidth:1},D=s.leftForLtr(g,h)+h/2,R=_+l/2;t.strokeStyle=o.multiKeyBackground,t.fillStyle=o.multiKeyBackground,ah(t,w,D,R),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,ah(t,w,D,R)}else{t.lineWidth=ae(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;let w=s.leftForLtr(g,h),D=s.leftForLtr(s.xPlus(g,1),h-2),R=zi(a.borderRadius);Object.values(R).some(k=>k!==0)?(t.beginPath(),t.fillStyle=o.multiKeyBackground,Js(t,{x:w,y:_,w:h,h:l,radius:R}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Js(t,{x:D,y:_+1,w:h-2,h:l-2,radius:R}),t.fill()):(t.fillStyle=o.multiKeyBackground,t.fillRect(w,_,h,l),t.strokeRect(w,_,h,l),t.fillStyle=a.backgroundColor,t.fillRect(D,_+1,h-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,i,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:c,boxHeight:l,boxWidth:h,boxPadding:d}=r,p=Xe(r.bodyFont),g=p.lineHeight,b=0,_=Pr(r.rtl,this.x,this.width),w=function(I){i.fillText(I,_.x(t.x+b),t.y+g/2),t.y+=g+o},D=_.textAlign(a),R,k,V,O,N,E,v;for(i.textAlign=a,i.textBaseline="middle",i.font=p.string,t.x=_h(this,D,r),i.fillStyle=r.bodyColor,be(this.beforeBody,w),b=c&&D!=="right"?a==="center"?h/2+d:h+2+d:0,O=0,E=s.length;O<E;++O){for(R=s[O],k=this.labelTextColors[O],i.fillStyle=k,be(R.before,w),V=R.lines,c&&V.length&&(this._drawColorBox(i,t,O,_,r),g=Math.max(p.lineHeight,l)),N=0,v=V.length;N<v;++N)w(V[N]),g=p.lineHeight;be(R.after,w)}b=0,g=p.lineHeight,be(this.afterBody,w),t.y-=o}drawFooter(t,i,r){let s=this.footer,o=s.length,a,c;if(o){let l=Pr(r.rtl,this.x,this.width);for(t.x=_h(this,r.footerAlign,r),t.y+=r.footerMarginTop,i.textAlign=l.textAlign(r.footerAlign),i.textBaseline="middle",a=Xe(r.footerFont),i.fillStyle=r.footerColor,i.font=a.string,c=0;c<o;++c)i.fillText(s[c],l.x(t.x),t.y+a.lineHeight/2),t.y+=a.lineHeight+r.footerSpacing}}drawBackground(t,i,r,s){let{xAlign:o,yAlign:a}=this,{x:c,y:l}=t,{width:h,height:d}=r,{topLeft:p,topRight:g,bottomLeft:b,bottomRight:_}=zi(s.cornerRadius);i.fillStyle=s.backgroundColor,i.strokeStyle=s.borderColor,i.lineWidth=s.borderWidth,i.beginPath(),i.moveTo(c+p,l),a==="top"&&this.drawCaret(t,i,r,s),i.lineTo(c+h-g,l),i.quadraticCurveTo(c+h,l,c+h,l+g),a==="center"&&o==="right"&&this.drawCaret(t,i,r,s),i.lineTo(c+h,l+d-_),i.quadraticCurveTo(c+h,l+d,c+h-_,l+d),a==="bottom"&&this.drawCaret(t,i,r,s),i.lineTo(c+b,l+d),i.quadraticCurveTo(c,l+d,c,l+d-b),a==="center"&&o==="left"&&this.drawCaret(t,i,r,s),i.lineTo(c,l+p),i.quadraticCurveTo(c,l,c+p,l),i.closePath(),i.fill(),s.borderWidth>0&&i.stroke()}_updateAnimationTarget(t){let i=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=dc[t.position].call(this,this._active,this._eventPosition);if(!a)return;let c=this._size=Fx(this,t),l=Object.assign({},a,this._size),h=Ux(i,t,l),d=Bx(t,l,h,i);(s._to!==d.x||o._to!==d.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=c.width,this.height=c.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,d))}}_willRender(){return!!this.opacity}draw(t){let i=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(i);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=mt(i.padding),c=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;i.enabled&&c&&(t.save(),t.globalAlpha=r,this.drawBackground(o,t,s,i),S_(t,i.textDirection),o.y+=a.top,this.drawTitle(o,t,i),this.drawBody(o,t,i),this.drawFooter(o,t,i),x_(t,i.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,i){let r=this._active,s=t.map(({datasetIndex:c,index:l})=>{let h=this.chart.getDatasetMeta(c);if(!h)throw new Error("Cannot find a dataset at index "+c);return{datasetIndex:c,element:h.data[l],index:l}}),o=!nc(r,s),a=this._positionChanged(s,i);(o||a)&&(this._active=s,this._eventPosition=i,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,i,r=!0){if(i&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(t,o,i,r),c=this._positionChanged(a,t),l=i||!nc(a,o)||c;return l&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,i))),l}_getActiveElements(t,i,r,s){let o=this.options;if(t.type==="mouseout")return[];if(!s)return i.filter(c=>this.chart.data.datasets[c.datasetIndex]&&this.chart.getDatasetMeta(c.datasetIndex).controller.getParsed(c.index)!==void 0);let a=this.chart.getElementsAtEventForMode(t,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(t,i){let{caretX:r,caretY:s,options:o}=this,a=dc[o.position].call(this,t,i);return a!==!1&&(r!==a.x||s!==a.y)}}return n})(),lv={id:"tooltip",_element:qx,positioners:dc,afterInit(n,e,t){t&&(n.tooltip=new qx({chart:n,options:t}))},beforeUpdate(n,e,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,e,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let e=n.tooltip;if(e&&e._willRender()){let t={tooltip:e};if(n.notifyPlugins("beforeTooltipDraw",xe(H({},t),{cancelable:!0}))===!1)return;e.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,e){if(n.tooltip){let t=e.replay;n.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,e)=>e.bodyFont.size,boxWidth:(n,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:vA},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},WB=Object.freeze({__proto__:null,Colors:rB,Decimation:cB,Filler:CB,Legend:OB,SubTitle:VB,Title:cv,Tooltip:lv}),$B=(n,e,t,i)=>(typeof e=="string"?(t=n.push(e)-1,i.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function HB(n,e,t,i){let r=n.indexOf(e);if(r===-1)return $B(n,e,t,i);let s=n.lastIndexOf(e);return r!==s?t:r}var GB=(n,e)=>n===null?null:Ze(Math.round(n),0,e);function Wx(n){let e=this.getLabels();return n>=0&&n<e.length?e[n]:n}var uv=(()=>{class n extends Or{static id="category";static defaults={ticks:{callback:Wx}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let i=this._addedLabels;if(i.length){let r=this.getLabels();for(let{index:s,label:o}of i)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(t)}parse(t,i){if(fe(t))return null;let r=this.getLabels();return i=isFinite(i)&&r[i]===t?i:HB(r,t,te(i,t),this._addedLabels),GB(i,r.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),i||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let t=this.min,i=this.max,r=this.options.offset,s=[],o=this.getLabels();o=t===0&&i===o.length-1?o:o.slice(t,i+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=t;a<=i;a++)s.push({value:a});return s}getLabelForValue(t){return Wx.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let i=this.ticks;return t<0||t>i.length-1?null:this.getPixelForValue(i[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function KB(n,e){let t=[],{bounds:r,step:s,min:o,max:a,precision:c,count:l,maxTicks:h,maxDigits:d,includeBounds:p}=n,g=s||1,b=h-1,{min:_,max:w}=e,D=!fe(o),R=!fe(a),k=!fe(l),V=(w-_)/(d+1),O=r_((w-_)/b/g)*g,N,E,v,I;if(O<1e-14&&!D&&!R)return[{value:_},{value:w}];I=Math.ceil(w/O)-Math.floor(_/O),I>b&&(O=r_(I*O/b/g)*g),fe(c)||(N=Math.pow(10,c),O=Math.ceil(O*N)/N),r==="ticks"?(E=Math.floor(_/O)*O,v=Math.ceil(w/O)*O):(E=_,v=w),D&&R&&s&&DS((a-o)/s,O/1e3)?(I=Math.round(Math.min((a-o)/O,h)),O=(a-o)/I,E=o,v=a):k?(E=D?o:E,v=R?a:v,I=l-1,O=(v-E)/I):(I=(v-E)/O,Ys(I,Math.round(I),O/1e3)?I=Math.round(I):I=Math.ceil(I));let x=Math.max(o_(O),o_(E));N=Math.pow(10,fe(c)?x:c),E=Math.round(E*N)/N,v=Math.round(v*N)/N;let A=0;for(D&&(p&&E!==o?(t.push({value:o}),E<o&&A++,Ys(Math.round((E+A*O)*N)/N,o,$x(o,V,n))&&A++):E<o&&A++);A<I;++A){let C=Math.round((E+A*O)*N)/N;if(R&&C>a)break;t.push({value:C})}return R&&p&&v!==a?t.length&&Ys(t[t.length-1].value,a,$x(a,V,n))?t[t.length-1].value=a:t.push({value:a}):(!R||v===a)&&t.push({value:v}),t}function $x(n,e,{horizontal:t,minRotation:i}){let r=Zt(i),s=(t?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+n).length;return Math.min(e/s,o)}var no=class extends Or{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return fe(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){let{beginAtZero:e}=this.options,{minDefined:t,maxDefined:i}=this.getUserBounds(),{min:r,max:s}=this,o=c=>r=t?r:c,a=c=>s=i?s:c;if(e){let c=pn(r),l=pn(s);c<0&&l<0?a(0):c>0&&l>0&&o(0)}if(r===s){let c=s===0?1:Math.abs(s*.05);a(s+c),e||o(r-c)}this.min=r,this.max=s}getTickLimit(){let e=this.options.ticks,{maxTicksLimit:t,stepSize:i}=e,r;return i?(r=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let e=this.options,t=e.ticks,i=this.getTickLimit();i=Math.max(2,i);let r={maxTicks:i,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},s=this._range||this,o=KB(r,s);return e.bounds==="ticks"&&s_(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let e=this.ticks,t=this.min,i=this.max;if(super.configure(),this.options.offset&&e.length){let r=(i-t)/Math.max(e.length-1,1)/2;t-=r,i+=r}this._startValue=t,this._endValue=i,this._valueRange=i-t}getLabelForValue(e){return Xs(e,this.chart.options.locale,this.options.ticks.format)}},mc=class extends no{static id="linear";static defaults={ticks:{callback:ic.formatters.numeric}};determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Fe(e)?e:0,this.max=Fe(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let e=this.isHorizontal(),t=e?this.width:this.height,i=Zt(this.options.ticks.minRotation),r=(e?Math.sin(i):Math.cos(i))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,s.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}},gc=n=>Math.floor(oi(n)),Mr=(n,e)=>Math.pow(10,gc(n)+e);function Hx(n){return n/Math.pow(10,gc(n))===1}function Gx(n,e,t){let i=Math.pow(10,t),r=Math.floor(n/i);return Math.ceil(e/i)-r}function YB(n,e){let t=e-n,i=gc(t);for(;Gx(n,e,i)>10;)i++;for(;Gx(n,e,i)<10;)i--;return Math.min(i,gc(n))}function QB(n,{min:e,max:t}){e=Vt(n.min,e);let i=[],r=gc(e),s=YB(e,t),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),c=r>s?Math.pow(10,r):0,l=Math.round((e-c)*o)/o,h=Math.floor((e-c)/a/10)*a*10,d=Math.floor((l-h)/Math.pow(10,s)),p=Vt(n.min,Math.round((c+h+d*Math.pow(10,s))*o)/o);for(;p<t;)i.push({value:p,major:Hx(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(s++,d=2,o=s>=0?1:o),p=Math.round((c+h+d*Math.pow(10,s))*o)/o;let g=Vt(n.max,p);return i.push({value:g,major:Hx(g),significand:d}),i}var Z_=class extends Or{static id="logarithmic";static defaults={ticks:{callback:ic.formatters.logarithmic,major:{enabled:!0}}};constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){let i=no.prototype.parse.apply(this,[e,t]);if(i===0){this._zero=!0;return}return Fe(i)&&i>0?i:null}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!0);this.min=Fe(e)?Math.max(0,e):null,this.max=Fe(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Fe(this._userMin)&&(this.min=e===Mr(this.min,0)?Mr(this.min,-1):Mr(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:e,maxDefined:t}=this.getUserBounds(),i=this.min,r=this.max,s=a=>i=e?i:a,o=a=>r=t?r:a;i===r&&(i<=0?(s(1),o(10)):(s(Mr(i,-1)),o(Mr(r,1)))),i<=0&&s(Mr(r,-1)),r<=0&&o(Mr(i,1)),this.min=i,this.max=r}buildTicks(){let e=this.options,t={min:this._userMin,max:this._userMax},i=QB(t,this);return e.bounds==="ticks"&&s_(i,this,"value"),e.reverse?(i.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),i}getLabelForValue(e){return e===void 0?"0":Xs(e,this.chart.options.locale,this.options.ticks.format)}configure(){let e=this.min;super.configure(),this._startValue=oi(e),this._valueRange=oi(this.max)-oi(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(oi(e)-this._startValue)/this._valueRange)}getValueForPixel(e){let t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}};function ev(n){let e=n.ticks;if(e.display&&n.display){let t=mt(e.backdropPadding);return te(e.font&&e.font.size,Ue.font.size)+t.height}return 0}function XB(n,e,t){return t=Pe(t)?t:[t],{w:FS(n,e.string,t),h:t.length*e.lineHeight}}function Kx(n,e,t,i,r){return n===i||n===r?{start:e-t/2,end:e+t/2}:n<i||n>r?{start:e-t,end:e}:{start:e,end:e+t}}function JB(n){let e={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},e),i=[],r=[],s=n._pointLabels.length,o=n.options.pointLabels,a=o.centerPointLabels?ke/s:0;for(let c=0;c<s;c++){let l=o.setContext(n.getPointLabelContext(c));r[c]=l.padding;let h=n.getPointPosition(c,n.drawingArea+r[c],a),d=Xe(l.font),p=XB(n.ctx,d,n._pointLabels[c]);i[c]=p;let g=Nt(n.getIndexAngle(c)+a),b=Math.round(ih(g)),_=Kx(b,h.x,p.w,0,180),w=Kx(b,h.y,p.h,90,270);ZB(t,e,g,_,w)}n.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),n._pointLabelItems=nj(n,i,r)}function ZB(n,e,t,i,r){let s=Math.abs(Math.sin(t)),o=Math.abs(Math.cos(t)),a=0,c=0;i.start<e.l?(a=(e.l-i.start)/s,n.l=Math.min(n.l,e.l-a)):i.end>e.r&&(a=(i.end-e.r)/s,n.r=Math.max(n.r,e.r+a)),r.start<e.t?(c=(e.t-r.start)/o,n.t=Math.min(n.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,n.b=Math.max(n.b,e.b+c))}function ej(n,e,t){let i=n.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=t,c=n.getPointPosition(e,i+r+o,s),l=Math.round(ih(Nt(c.angle+We))),h=sj(c.y,a.h,l),d=ij(l),p=rj(c.x,a.w,d);return{visible:!0,x:c.x,y:h,textAlign:d,left:p,top:h,right:p+a.w,bottom:h+a.h}}function tj(n,e){if(!e)return!0;let{left:t,top:i,right:r,bottom:s}=n;return!(Nn({x:t,y:i},e)||Nn({x:t,y:s},e)||Nn({x:r,y:i},e)||Nn({x:r,y:s},e))}function nj(n,e,t){let i=[],r=n._pointLabels.length,s=n.options,{centerPointLabels:o,display:a}=s.pointLabels,c={extra:ev(s)/2,additionalAngle:o?ke/r:0},l;for(let h=0;h<r;h++){c.padding=t[h],c.size=e[h];let d=ej(n,h,c);i.push(d),a==="auto"&&(d.visible=tj(d,l),d.visible&&(l=d))}return i}function ij(n){return n===0||n===180?"center":n<180?"left":"right"}function rj(n,e,t){return t==="right"?n-=e:t==="center"&&(n-=e/2),n}function sj(n,e,t){return t===90||t===270?n-=e/2:(t>270||t<90)&&(n-=e),n}function oj(n,e,t){let{left:i,top:r,right:s,bottom:o}=t,{backdropColor:a}=e;if(!fe(a)){let c=zi(e.borderRadius),l=mt(e.backdropPadding);n.fillStyle=a;let h=i-l.left,d=r-l.top,p=s-i+l.width,g=o-r+l.height;Object.values(c).some(b=>b!==0)?(n.beginPath(),Js(n,{x:h,y:d,w:p,h:g,radius:c}),n.fill()):n.fillRect(h,d,p,g)}}function aj(n,e){let{ctx:t,options:{pointLabels:i}}=n;for(let r=e-1;r>=0;r--){let s=n._pointLabelItems[r];if(!s.visible)continue;let o=i.setContext(n.getPointLabelContext(r));oj(t,o,s);let a=Xe(o.font),{x:c,y:l,textAlign:h}=s;ji(t,n._pointLabels[r],c,l+a.lineHeight/2,a,{color:o.color,textAlign:h,textBaseline:"middle"})}}function wA(n,e,t,i){let{ctx:r}=n;if(t)r.arc(n.xCenter,n.yCenter,e,0,Me);else{let s=n.getPointPosition(0,e);r.moveTo(s.x,s.y);for(let o=1;o<i;o++)s=n.getPointPosition(o,e),r.lineTo(s.x,s.y)}}function cj(n,e,t,i,r){let s=n.ctx,o=e.circular,{color:a,lineWidth:c}=e;!o&&!i||!a||!c||t<0||(s.save(),s.strokeStyle=a,s.lineWidth=c,s.setLineDash(r.dash),s.lineDashOffset=r.dashOffset,s.beginPath(),wA(n,t,o,i),s.closePath(),s.stroke(),s.restore())}function lj(n,e,t){return ci(n,{label:t,index:e,type:"pointLabel"})}var tv=class extends no{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ic.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let e=this._padding=mt(ev(this.options)/2),t=this.width=this.maxWidth-e.width,i=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+i/2+e.top),this.drawingArea=Math.floor(Math.min(t,i)/2)}determineDataLimits(){let{min:e,max:t}=this.getMinMax(!1);this.min=Fe(e)&&!isNaN(e)?e:0,this.max=Fe(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ev(this.options))}generateTickLabels(e){no.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,i)=>{let r=Ce(this.options.pointLabels.callback,[t,i],this);return r||r===0?r:""}).filter((t,i)=>this.chart.getDataVisibility(i))}fit(){let e=this.options;e.display&&e.pointLabels.display?JB(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,i,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((i-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,i,r))}getIndexAngle(e){let t=Me/(this._pointLabels.length||1),i=this.options.startAngle||0;return Nt(e*t+Zt(i))}getDistanceFromCenterForValue(e){if(fe(e))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(fe(e))return NaN;let t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){let t=this._pointLabels||[];if(e>=0&&e<t.length){let i=t[e];return lj(this.getContext(),e,i)}}getPointPosition(e,t,i=0){let r=this.getIndexAngle(e)-We+i;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){let{left:t,top:i,right:r,bottom:s}=this._pointLabelItems[e];return{left:t,top:i,right:r,bottom:s}}drawBackground(){let{backgroundColor:e,grid:{circular:t}}=this.options;if(e){let i=this.ctx;i.save(),i.beginPath(),wA(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),i.closePath(),i.fillStyle=e,i.fill(),i.restore()}}drawGrid(){let e=this.ctx,t=this.options,{angleLines:i,grid:r,border:s}=t,o=this._pointLabels.length,a,c,l;if(t.pointLabels.display&&aj(this,o),r.display&&this.ticks.forEach((h,d)=>{if(d!==0||d===0&&this.min<0){c=this.getDistanceFromCenterForValue(h.value);let p=this.getContext(d),g=r.setContext(p),b=s.setContext(p);cj(this,g,c,o,b)}}),i.display){for(e.save(),a=o-1;a>=0;a--){let h=i.setContext(this.getPointLabelContext(a)),{color:d,lineWidth:p}=h;!p||!d||(e.lineWidth=p,e.strokeStyle=d,e.setLineDash(h.borderDash),e.lineDashOffset=h.borderDashOffset,c=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){let e=this.ctx,t=this.options,i=t.ticks;if(!i.display)return;let r=this.getIndexAngle(0),s,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((a,c)=>{if(c===0&&this.min>=0&&!t.reverse)return;let l=i.setContext(this.getContext(c)),h=Xe(l.font);if(s=this.getDistanceFromCenterForValue(this.ticks[c].value),l.showLabelBackdrop){e.font=h.string,o=e.measureText(a.label).width,e.fillStyle=l.backdropColor;let d=mt(l.backdropPadding);e.fillRect(-o/2-d.left,-s-h.size/2-d.top,o+d.width,h.size+d.height)}ji(e,a.label,0,-s,h,{color:l.color,strokeColor:l.textStrokeColor,strokeWidth:l.textStrokeWidth})}),e.restore()}drawTitle(){}},Ch={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Ft=Object.keys(Ch);function Yx(n,e){return n-e}function Qx(n,e){if(fe(e))return null;let t=n._adapter,{parser:i,round:r,isoWeekday:s}=n._parseOpts,o=e;return typeof i=="function"&&(o=i(o)),Fe(o)||(o=typeof i=="string"?t.parse(o,i):t.parse(o)),o===null?null:(r&&(o=r==="week"&&(Rr(s)||s===!0)?t.startOf(o,"isoWeek",s):t.startOf(o,r)),+o)}function Xx(n,e,t,i){let r=Ft.length;for(let s=Ft.indexOf(n);s<r-1;++s){let o=Ch[Ft[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((t-e)/(a*o.size))<=i)return Ft[s]}return Ft[r-1]}function uj(n,e,t,i,r){for(let s=Ft.length-1;s>=Ft.indexOf(t);s--){let o=Ft[s];if(Ch[o].common&&n._adapter.diff(r,i,o)>=e-1)return o}return Ft[t?Ft.indexOf(t):0]}function hj(n){for(let e=Ft.indexOf(n)+1,t=Ft.length;e<t;++e)if(Ch[Ft[e]].common)return Ft[e]}function Jx(n,e,t){if(!t)n[e]=!0;else if(t.length){let{lo:i,hi:r}=rh(t,e),s=t[i]>=e?t[i]:t[r];n[s]=!0}}function dj(n,e,t,i){let r=n._adapter,s=+r.startOf(e[0].value,i),o=e[e.length-1].value,a,c;for(a=s;a<=o;a=+r.add(a,1,i))c=t[a],c>=0&&(e[c].major=!0);return e}function Zx(n,e,t){let i=[],r={},s=e.length,o,a;for(o=0;o<s;++o)a=e[o],r[a]=o,i.push({value:a,major:!1});return s===0||!t?i:dj(n,i,r,t)}var nv=(()=>{class n extends Or{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,i={}){let r=t.time||(t.time={}),s=this._adapter=new sv._date(t.adapters.date);s.init(i),Gs(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=i.normalized}parse(t,i){return t===void 0?null:Qx(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,i=this._adapter,r=t.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:c}=this.getUserBounds();function l(h){!a&&!isNaN(h.min)&&(s=Math.min(s,h.min)),!c&&!isNaN(h.max)&&(o=Math.max(o,h.max))}(!a||!c)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),s=Fe(s)&&!isNaN(s)?s:+i.startOf(Date.now(),r),o=Fe(o)&&!isNaN(o)?o:+i.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let t=this.getLabelTimestamps(),i=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(i=t[0],r=t[t.length-1]),{min:i,max:r}}buildTicks(){let t=this.options,i=t.time,r=t.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,c=kS(s,o,a);return this._unit=i.unit||(r.autoSkip?Xx(i.minUnit,this.min,this.max,this._getLabelCapacity(o)):uj(this,c.length,i.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:hj(this._unit),this.initOffsets(s),t.reverse&&c.reverse(),Zx(this,c,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let i=0,r=0,s,o;this.options.offset&&t.length&&(s=this.getDecimalForValue(t[0]),t.length===1?i=1-s:i=(this.getDecimalForValue(t[1])-s)/2,o=this.getDecimalForValue(t[t.length-1]),t.length===1?r=o:r=(o-this.getDecimalForValue(t[t.length-2]))/2);let a=t.length<3?.5:.25;i=Ze(i,0,a),r=Ze(r,0,a),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){let t=this._adapter,i=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||Xx(o.minUnit,i,r,this._getLabelCapacity(i)),c=te(s.ticks.stepSize,1),l=a==="week"?o.isoWeekday:!1,h=Rr(l)||l===!0,d={},p=i,g,b;if(h&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,h?"day":a),t.diff(r,i,a)>1e5*c)throw new Error(i+" and "+r+" are too far apart with stepSize of "+c+" "+a);let _=s.ticks.source==="data"&&this.getDataTimestamps();for(g=p,b=0;g<r;g=+t.add(g,c,a),b++)Jx(d,g,_);return(g===r||s.bounds==="ticks"||b===1)&&Jx(d,g,_),Object.keys(d).sort(Yx).map(w=>+w)}getLabelForValue(t){let i=this._adapter,r=this.options.time;return r.tooltipFormat?i.format(t,r.tooltipFormat):i.format(t,r.displayFormats.datetime)}format(t,i){let s=this.options.time.displayFormats,o=this._unit,a=i||s[o];return this._adapter.format(t,a)}_tickFormatFunction(t,i,r,s){let o=this.options,a=o.ticks.callback;if(a)return Ce(a,[t,i,r],this);let c=o.time.displayFormats,l=this._unit,h=this._majorUnit,d=l&&c[l],p=h&&c[h],g=r[i],b=h&&p&&g&&g.major;return this._adapter.format(t,s||(b?p:d))}generateTickLabels(t){let i,r,s;for(i=0,r=t.length;i<r;++i)s=t[i],s.label=this._tickFormatFunction(s.value,i,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let i=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((i.start+r)*i.factor)}getValueForPixel(t){let i=this._offsets,r=this.getDecimalForPixel(t)/i.factor-i.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){let i=this.options.ticks,r=this.ctx.measureText(t).width,s=Zt(this.isHorizontal()?i.maxRotation:i.minRotation),o=Math.cos(s),a=Math.sin(s),c=this._resolveTickFontOptions(0).size;return{w:r*o+c*a,h:r*a+c*o}}_getLabelCapacity(t){let i=this.options.time,r=i.displayFormats,s=r[i.unit]||r.millisecond,o=this._tickFormatFunction(t,0,Zx(this,[t],this._majorUnit),s),a=this._getLabelSize(o),c=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return c>0?c:1}getDataTimestamps(){let t=this._cache.data||[],i,r;if(t.length)return t;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(i=0,r=s.length;i<r;++i)t=t.concat(s[i].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],i,r;if(t.length)return t;let s=this.getLabels();for(i=0,r=s.length;i<r;++i)t.push(Qx(this,s[i]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return l_(t.sort(Yx))}}return n})();function vh(n,e,t){let i=0,r=n.length-1,s,o,a,c;t?(e>=n[i].pos&&e<=n[r].pos&&({lo:i,hi:r}=On(n,"pos",e)),{pos:s,time:a}=n[i],{pos:o,time:c}=n[r]):(e>=n[i].time&&e<=n[r].time&&({lo:i,hi:r}=On(n,"time",e)),{time:s,pos:a}=n[i],{time:o,pos:c}=n[r]);let l=o-s;return l?a+(c-a)*(e-s)/l:a}var iv=class extends nv{static id="timeseries";static defaults=nv.defaults;constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=vh(t,this.min),this._tableRange=vh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){let{min:t,max:i}=this,r=[],s=[],o,a,c,l,h;for(o=0,a=e.length;o<a;++o)l=e[o],l>=t&&l<=i&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:i,pos:1}];for(o=0,a=r.length;o<a;++o)h=r[o+1],c=r[o-1],l=r[o],Math.round((h+c)/2)!==l&&s.push({time:l,pos:o/(a-1)});return s}_generate(){let e=this.min,t=this.max,i=super.getDataTimestamps();return(!i.includes(e)||!i.length)&&i.splice(0,0,e),(!i.includes(t)||i.length===1)&&i.push(t),i.sort((r,s)=>r-s)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;let t=this.getDataTimestamps(),i=this.getLabelTimestamps();return t.length&&i.length?e=this.normalize(t.concat(i)):e=t.length?t:i,e=this._cache.all=e,e}getDecimalForValue(e){return(vh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){let t=this._offsets,i=this.getDecimalForPixel(e)/t.factor-t.end;return vh(this._table,i*this._tableRange+this._minPos,!0)}},fj=Object.freeze({__proto__:null,CategoryScale:uv,LinearScale:mc,LogarithmicScale:Z_,RadialLinearScale:tv,TimeScale:nv,TimeSeriesScale:iv}),bA=[C2,JU,WB,fj];function F(n){let e=Object.prototype.toString.call(n);return n instanceof Date||typeof n=="object"&&e==="[object Date]"?new n.constructor(+n):typeof n=="number"||e==="[object Number]"||typeof n=="string"||e==="[object String]"?new Date(n):new Date(NaN)}function se(n,e){return n instanceof Date?new n.constructor(e):new Date(e)}function Hi(n,e){let t=F(n);return isNaN(e)?se(n,NaN):(e&&t.setDate(t.getDate()+e),t)}function so(n,e){let t=F(n);if(isNaN(e))return se(n,NaN);if(!e)return t;let i=t.getDate(),r=se(n,t.getTime());r.setMonth(t.getMonth()+e+1,0);let s=r.getDate();return i>=s?r:(t.setFullYear(r.getFullYear(),r.getMonth(),i),t)}function Gi(n,e){let t=+F(n);return se(n,t+e)}var pj=Math.pow(10,8)*24*60*60*1e3,R$=-pj,Dh=6048e5,IA=864e5,hi=6e4,di=36e5,EA=1e3;var mj=3600;var TA=mj*24,P$=TA*7,gj=TA*365.2425,yj=gj/12,k$=yj*3;function SA(n,e){return Gi(n,e*di)}var _j={};function Ut(){return _j}function gt(n,e){let t=Ut(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=F(n),s=r.getDay(),o=(s<i?7:0)+s-i;return r.setDate(r.getDate()-o),r.setHours(0,0,0,0),r}function gn(n){return gt(n,{weekStartsOn:1})}function Rh(n){let e=F(n),t=e.getFullYear(),i=se(n,0);i.setFullYear(t+1,0,4),i.setHours(0,0,0,0);let r=gn(i),s=se(n,0);s.setFullYear(t,0,4),s.setHours(0,0,0,0);let o=gn(s);return e.getTime()>=r.getTime()?t+1:e.getTime()>=o.getTime()?t:t-1}function _c(n){let e=F(n);return e.setHours(0,0,0,0),e}function Nr(n){let e=F(n),t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+n-+t}function Ph(n,e){let t=_c(n),i=_c(e),r=+t-Nr(t),s=+i-Nr(i);return Math.round((r-s)/IA)}function xA(n){let e=Rh(n),t=se(n,0);return t.setFullYear(e,0,4),t.setHours(0,0,0,0),gn(t)}function AA(n,e){return Gi(n,e*hi)}function CA(n,e){let t=e*3;return so(n,t)}function DA(n,e){return Gi(n,e*1e3)}function RA(n,e){let t=e*7;return Hi(n,t)}function PA(n,e){return so(n,e*12)}function Vr(n,e){let t=F(n),i=F(e),r=t.getTime()-i.getTime();return r<0?-1:r>0?1:r}function kA(n){return n instanceof Date||typeof n=="object"&&Object.prototype.toString.call(n)==="[object Date]"}function kh(n){if(!kA(n)&&typeof n!="number")return!1;let e=F(n);return!isNaN(Number(e))}function MA(n,e){let t=F(n),i=F(e),r=t.getFullYear()-i.getFullYear(),s=t.getMonth()-i.getMonth();return r*12+s}function OA(n,e){let t=F(n),i=F(e);return t.getFullYear()-i.getFullYear()}function Mh(n,e){let t=F(n),i=F(e),r=NA(t,i),s=Math.abs(Ph(t,i));t.setDate(t.getDate()-r*s);let o=+(NA(t,i)===-r),a=r*(s-o);return a===0?0:a}function NA(n,e){let t=n.getFullYear()-e.getFullYear()||n.getMonth()-e.getMonth()||n.getDate()-e.getDate()||n.getHours()-e.getHours()||n.getMinutes()-e.getMinutes()||n.getSeconds()-e.getSeconds()||n.getMilliseconds()-e.getMilliseconds();return t<0?-1:t>0?1:t}function Bn(n){return e=>{let i=(n?Math[n]:Math.trunc)(e);return i===0?0:i}}function Ki(n,e){return+F(n)-+F(e)}function VA(n,e,t){let i=Ki(n,e)/di;return Bn(t?.roundingMethod)(i)}function LA(n,e,t){let i=Ki(n,e)/hi;return Bn(t?.roundingMethod)(i)}function Oh(n){let e=F(n);return e.setHours(23,59,59,999),e}function Nh(n){let e=F(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function FA(n){let e=F(n);return+Oh(e)==+Nh(e)}function Vh(n,e){let t=F(n),i=F(e),r=Vr(t,i),s=Math.abs(MA(t,i)),o;if(s<1)o=0;else{t.getMonth()===1&&t.getDate()>27&&t.setDate(30),t.setMonth(t.getMonth()-r*s);let a=Vr(t,i)===-r;FA(F(n))&&s===1&&Vr(n,i)===1&&(a=!1),o=r*(s-Number(a))}return o===0?0:o}function UA(n,e,t){let i=Vh(n,e)/3;return Bn(t?.roundingMethod)(i)}function BA(n,e,t){let i=Ki(n,e)/1e3;return Bn(t?.roundingMethod)(i)}function jA(n,e,t){let i=Mh(n,e)/7;return Bn(t?.roundingMethod)(i)}function zA(n,e){let t=F(n),i=F(e),r=Vr(t,i),s=Math.abs(OA(t,i));t.setFullYear(1584),i.setFullYear(1584);let o=Vr(t,i)===-r,a=r*(s-+o);return a===0?0:a}function qA(n){let e=F(n);return e.setSeconds(0,0),e}function WA(n){let e=F(n),t=e.getMonth(),i=t-t%3;return e.setMonth(i,1),e.setHours(0,0,0,0),e}function $A(n){let e=F(n);return e.setDate(1),e.setHours(0,0,0,0),e}function HA(n){let e=F(n),t=e.getFullYear();return e.setFullYear(t+1,0,0),e.setHours(23,59,59,999),e}function Lh(n){let e=F(n),t=se(n,0);return t.setFullYear(e.getFullYear(),0,1),t.setHours(0,0,0,0),t}function GA(n){let e=F(n);return e.setMinutes(59,59,999),e}function KA(n,e){let t=Ut(),i=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??t.weekStartsOn??t.locale?.options?.weekStartsOn??0,r=F(n),s=r.getDay(),o=(s<i?-7:0)+6-(s-i);return r.setDate(r.getDate()+o),r.setHours(23,59,59,999),r}function YA(n){let e=F(n);return e.setSeconds(59,999),e}function QA(n){let e=F(n),t=e.getMonth(),i=t-t%3+3;return e.setMonth(i,0),e.setHours(23,59,59,999),e}function XA(n){let e=F(n);return e.setMilliseconds(999),e}var vj={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},JA=(n,e,t)=>{let i,r=vj[n];return typeof r=="string"?i=r:e===1?i=r.one:i=r.other.replace("{{count}}",e.toString()),t?.addSuffix?t.comparison&&t.comparison>0?"in "+i:i+" ago":i};function Fh(n){return(e={})=>{let t=e.width?String(e.width):n.defaultWidth;return n.formats[t]||n.formats[n.defaultWidth]}}var wj={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},bj={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ij={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},ZA={date:Fh({formats:wj,defaultWidth:"full"}),time:Fh({formats:bj,defaultWidth:"full"}),dateTime:Fh({formats:Ij,defaultWidth:"full"})};var Ej={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},eC=(n,e,t,i)=>Ej[n];function oo(n){return(e,t)=>{let i=t?.context?String(t.context):"standalone",r;if(i==="formatting"&&n.formattingValues){let o=n.defaultFormattingWidth||n.defaultWidth,a=t?.width?String(t.width):o;r=n.formattingValues[a]||n.formattingValues[o]}else{let o=n.defaultWidth,a=t?.width?String(t.width):n.defaultWidth;r=n.values[a]||n.values[o]}let s=n.argumentCallback?n.argumentCallback(e):e;return r[s]}}var Tj={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Sj={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},xj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Aj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Cj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},Dj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Rj=(n,e)=>{let t=Number(n),i=t%100;if(i>20||i<10)switch(i%10){case 1:return t+"st";case 2:return t+"nd";case 3:return t+"rd"}return t+"th"},tC={ordinalNumber:Rj,era:oo({values:Tj,defaultWidth:"wide"}),quarter:oo({values:Sj,defaultWidth:"wide",argumentCallback:n=>n-1}),month:oo({values:xj,defaultWidth:"wide"}),day:oo({values:Aj,defaultWidth:"wide"}),dayPeriod:oo({values:Cj,defaultWidth:"wide",formattingValues:Dj,defaultFormattingWidth:"wide"})};function ao(n){return(e,t={})=>{let i=t.width,r=i&&n.matchPatterns[i]||n.matchPatterns[n.defaultMatchWidth],s=e.match(r);if(!s)return null;let o=s[0],a=i&&n.parsePatterns[i]||n.parsePatterns[n.defaultParseWidth],c=Array.isArray(a)?kj(a,d=>d.test(o)):Pj(a,d=>d.test(o)),l;l=n.valueCallback?n.valueCallback(c):c,l=t.valueCallback?t.valueCallback(l):l;let h=e.slice(o.length);return{value:l,rest:h}}}function Pj(n,e){for(let t in n)if(Object.prototype.hasOwnProperty.call(n,t)&&e(n[t]))return t}function kj(n,e){for(let t=0;t<n.length;t++)if(e(n[t]))return t}function nC(n){return(e,t={})=>{let i=e.match(n.matchPattern);if(!i)return null;let r=i[0],s=e.match(n.parsePattern);if(!s)return null;let o=n.valueCallback?n.valueCallback(s[0]):s[0];o=t.valueCallback?t.valueCallback(o):o;let a=e.slice(r.length);return{value:o,rest:a}}}var Mj=/^(\d+)(th|st|nd|rd)?/i,Oj=/\d+/i,Nj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Vj={any:[/^b/i,/^(a|c)/i]},Lj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fj={any:[/1/i,/2/i,/3/i,/4/i]},Uj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Bj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},jj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},zj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},qj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Wj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},iC={ordinalNumber:nC({matchPattern:Mj,parsePattern:Oj,valueCallback:n=>parseInt(n,10)}),era:ao({matchPatterns:Nj,defaultMatchWidth:"wide",parsePatterns:Vj,defaultParseWidth:"any"}),quarter:ao({matchPatterns:Lj,defaultMatchWidth:"wide",parsePatterns:Fj,defaultParseWidth:"any",valueCallback:n=>n+1}),month:ao({matchPatterns:Uj,defaultMatchWidth:"wide",parsePatterns:Bj,defaultParseWidth:"any"}),day:ao({matchPatterns:jj,defaultMatchWidth:"wide",parsePatterns:zj,defaultParseWidth:"any"}),dayPeriod:ao({matchPatterns:qj,defaultMatchWidth:"any",parsePatterns:Wj,defaultParseWidth:"any"})};var vc={code:"en-US",formatDistance:JA,formatLong:ZA,formatRelative:eC,localize:tC,match:iC,options:{weekStartsOn:0,firstWeekContainsDate:1}};function rC(n){let e=F(n);return Ph(e,Lh(e))+1}function Uh(n){let e=F(n),t=+gn(e)-+xA(e);return Math.round(t/Dh)+1}function co(n,e){let t=F(n),i=t.getFullYear(),r=Ut(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,o=se(n,0);o.setFullYear(i+1,0,s),o.setHours(0,0,0,0);let a=gt(o,e),c=se(n,0);c.setFullYear(i,0,s),c.setHours(0,0,0,0);let l=gt(c,e);return t.getTime()>=a.getTime()?i+1:t.getTime()>=l.getTime()?i:i-1}function sC(n,e){let t=Ut(),i=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??t.firstWeekContainsDate??t.locale?.options?.firstWeekContainsDate??1,r=co(n,e),s=se(n,0);return s.setFullYear(r,0,i),s.setHours(0,0,0,0),gt(s,e)}function Bh(n,e){let t=F(n),i=+gt(t,e)-+sC(t,e);return Math.round(i/Dh)+1}function ve(n,e){let t=n<0?"-":"",i=Math.abs(n).toString().padStart(e,"0");return t+i}var fi={y(n,e){let t=n.getFullYear(),i=t>0?t:1-t;return ve(e==="yy"?i%100:i,e.length)},M(n,e){let t=n.getMonth();return e==="M"?String(t+1):ve(t+1,2)},d(n,e){return ve(n.getDate(),e.length)},a(n,e){let t=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.toUpperCase();case"aaa":return t;case"aaaaa":return t[0];case"aaaa":default:return t==="am"?"a.m.":"p.m."}},h(n,e){return ve(n.getHours()%12||12,e.length)},H(n,e){return ve(n.getHours(),e.length)},m(n,e){return ve(n.getMinutes(),e.length)},s(n,e){return ve(n.getSeconds(),e.length)},S(n,e){let t=e.length,i=n.getMilliseconds(),r=Math.trunc(i*Math.pow(10,t-3));return ve(r,e.length)}};var lo={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},hv={G:function(n,e,t){let i=n.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return t.era(i,{width:"abbreviated"});case"GGGGG":return t.era(i,{width:"narrow"});case"GGGG":default:return t.era(i,{width:"wide"})}},y:function(n,e,t){if(e==="yo"){let i=n.getFullYear(),r=i>0?i:1-i;return t.ordinalNumber(r,{unit:"year"})}return fi.y(n,e)},Y:function(n,e,t,i){let r=co(n,i),s=r>0?r:1-r;if(e==="YY"){let o=s%100;return ve(o,2)}return e==="Yo"?t.ordinalNumber(s,{unit:"year"}):ve(s,e.length)},R:function(n,e){let t=Rh(n);return ve(t,e.length)},u:function(n,e){let t=n.getFullYear();return ve(t,e.length)},Q:function(n,e,t){let i=Math.ceil((n.getMonth()+1)/3);switch(e){case"Q":return String(i);case"QQ":return ve(i,2);case"Qo":return t.ordinalNumber(i,{unit:"quarter"});case"QQQ":return t.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return t.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,e,t){let i=Math.ceil((n.getMonth()+1)/3);switch(e){case"q":return String(i);case"qq":return ve(i,2);case"qo":return t.ordinalNumber(i,{unit:"quarter"});case"qqq":return t.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return t.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,e,t){let i=n.getMonth();switch(e){case"M":case"MM":return fi.M(n,e);case"Mo":return t.ordinalNumber(i+1,{unit:"month"});case"MMM":return t.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return t.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(i,{width:"wide",context:"formatting"})}},L:function(n,e,t){let i=n.getMonth();switch(e){case"L":return String(i+1);case"LL":return ve(i+1,2);case"Lo":return t.ordinalNumber(i+1,{unit:"month"});case"LLL":return t.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return t.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(i,{width:"wide",context:"standalone"})}},w:function(n,e,t,i){let r=Bh(n,i);return e==="wo"?t.ordinalNumber(r,{unit:"week"}):ve(r,e.length)},I:function(n,e,t){let i=Uh(n);return e==="Io"?t.ordinalNumber(i,{unit:"week"}):ve(i,e.length)},d:function(n,e,t){return e==="do"?t.ordinalNumber(n.getDate(),{unit:"date"}):fi.d(n,e)},D:function(n,e,t){let i=rC(n);return e==="Do"?t.ordinalNumber(i,{unit:"dayOfYear"}):ve(i,e.length)},E:function(n,e,t){let i=n.getDay();switch(e){case"E":case"EE":case"EEE":return t.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return t.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(i,{width:"short",context:"formatting"});case"EEEE":default:return t.day(i,{width:"wide",context:"formatting"})}},e:function(n,e,t,i){let r=n.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return ve(s,2);case"eo":return t.ordinalNumber(s,{unit:"day"});case"eee":return t.day(r,{width:"abbreviated",context:"formatting"});case"eeeee":return t.day(r,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(r,{width:"short",context:"formatting"});case"eeee":default:return t.day(r,{width:"wide",context:"formatting"})}},c:function(n,e,t,i){let r=n.getDay(),s=(r-i.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return ve(s,e.length);case"co":return t.ordinalNumber(s,{unit:"day"});case"ccc":return t.day(r,{width:"abbreviated",context:"standalone"});case"ccccc":return t.day(r,{width:"narrow",context:"standalone"});case"cccccc":return t.day(r,{width:"short",context:"standalone"});case"cccc":default:return t.day(r,{width:"wide",context:"standalone"})}},i:function(n,e,t){let i=n.getDay(),r=i===0?7:i;switch(e){case"i":return String(r);case"ii":return ve(r,e.length);case"io":return t.ordinalNumber(r,{unit:"day"});case"iii":return t.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return t.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return t.day(i,{width:"short",context:"formatting"});case"iiii":default:return t.day(i,{width:"wide",context:"formatting"})}},a:function(n,e,t){let r=n.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"aaa":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},b:function(n,e,t){let i=n.getHours(),r;switch(i===12?r=lo.noon:i===0?r=lo.midnight:r=i/12>=1?"pm":"am",e){case"b":case"bb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"bbb":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},B:function(n,e,t){let i=n.getHours(),r;switch(i>=17?r=lo.evening:i>=12?r=lo.afternoon:i>=4?r=lo.morning:r=lo.night,e){case"B":case"BB":case"BBB":return t.dayPeriod(r,{width:"abbreviated",context:"formatting"});case"BBBBB":return t.dayPeriod(r,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(r,{width:"wide",context:"formatting"})}},h:function(n,e,t){if(e==="ho"){let i=n.getHours()%12;return i===0&&(i=12),t.ordinalNumber(i,{unit:"hour"})}return fi.h(n,e)},H:function(n,e,t){return e==="Ho"?t.ordinalNumber(n.getHours(),{unit:"hour"}):fi.H(n,e)},K:function(n,e,t){let i=n.getHours()%12;return e==="Ko"?t.ordinalNumber(i,{unit:"hour"}):ve(i,e.length)},k:function(n,e,t){let i=n.getHours();return i===0&&(i=24),e==="ko"?t.ordinalNumber(i,{unit:"hour"}):ve(i,e.length)},m:function(n,e,t){return e==="mo"?t.ordinalNumber(n.getMinutes(),{unit:"minute"}):fi.m(n,e)},s:function(n,e,t){return e==="so"?t.ordinalNumber(n.getSeconds(),{unit:"second"}):fi.s(n,e)},S:function(n,e){return fi.S(n,e)},X:function(n,e,t){let i=n.getTimezoneOffset();if(i===0)return"Z";switch(e){case"X":return aC(i);case"XXXX":case"XX":return Lr(i);case"XXXXX":case"XXX":default:return Lr(i,":")}},x:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"x":return aC(i);case"xxxx":case"xx":return Lr(i);case"xxxxx":case"xxx":default:return Lr(i,":")}},O:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+oC(i,":");case"OOOO":default:return"GMT"+Lr(i,":")}},z:function(n,e,t){let i=n.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+oC(i,":");case"zzzz":default:return"GMT"+Lr(i,":")}},t:function(n,e,t){let i=Math.trunc(n.getTime()/1e3);return ve(i,e.length)},T:function(n,e,t){let i=n.getTime();return ve(i,e.length)}};function oC(n,e=""){let t=n>0?"-":"+",i=Math.abs(n),r=Math.trunc(i/60),s=i%60;return s===0?t+String(r):t+String(r)+e+ve(s,2)}function aC(n,e){return n%60===0?(n>0?"-":"+")+ve(Math.abs(n)/60,2):Lr(n,e)}function Lr(n,e=""){let t=n>0?"-":"+",i=Math.abs(n),r=ve(Math.trunc(i/60),2),s=ve(i%60,2);return t+r+e+s}var cC=(n,e)=>{switch(n){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},lC=(n,e)=>{switch(n){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},$j=(n,e)=>{let t=n.match(/(P+)(p+)?/)||[],i=t[1],r=t[2];if(!r)return cC(n,e);let s;switch(i){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",cC(i,e)).replace("{{time}}",lC(r,e))},wc={p:lC,P:$j};var Hj=/^D+$/,Gj=/^Y+$/,Kj=["D","DD","YY","YYYY"];function jh(n){return Hj.test(n)}function zh(n){return Gj.test(n)}function bc(n,e,t){let i=Yj(n,e,t);if(console.warn(i),Kj.includes(n))throw new RangeError(i)}function Yj(n,e,t){let i=n[0]==="Y"?"years":"days of the month";return`Use \`${n.toLowerCase()}\` instead of \`${n}\` (in \`${e}\`) for formatting ${i} to the input \`${t}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}var Qj=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Xj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Jj=/^'([^]*?)'?$/,Zj=/''/g,ez=/[a-zA-Z]/;function uC(n,e,t){let i=Ut(),r=t?.locale??i.locale??vc,s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,o=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,a=F(n);if(!kh(a))throw new RangeError("Invalid time value");let c=e.match(Xj).map(h=>{let d=h[0];if(d==="p"||d==="P"){let p=wc[d];return p(h,r.formatLong)}return h}).join("").match(Qj).map(h=>{if(h==="''")return{isToken:!1,value:"'"};let d=h[0];if(d==="'")return{isToken:!1,value:tz(h)};if(hv[d])return{isToken:!0,value:h};if(d.match(ez))throw new RangeError("Format string contains an unescaped latin alphabet character `"+d+"`");return{isToken:!1,value:h}});r.localize.preprocessor&&(c=r.localize.preprocessor(a,c));let l={firstWeekContainsDate:s,weekStartsOn:o,locale:r};return c.map(h=>{if(!h.isToken)return h.value;let d=h.value;(!t?.useAdditionalWeekYearTokens&&zh(d)||!t?.useAdditionalDayOfYearTokens&&jh(d))&&bc(d,e,String(n));let p=hv[d[0]];return p(a,d,r.localize,l)}).join("")}function tz(n){let e=n.match(Jj);return e?e[1].replace(Zj,"'"):n}function hC(){return Object.assign({},Ut())}function dC(n){let t=F(n).getDay();return t===0&&(t=7),t}function fC(n,e){let t=e instanceof Date?se(e,0):new e(0);return t.setFullYear(n.getFullYear(),n.getMonth(),n.getDate()),t.setHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),t}var nz=10,qh=class{subPriority=0;validate(e,t){return!0}},Wh=class extends qh{constructor(e,t,i,r,s){super(),this.value=e,this.validateValue=t,this.setValue=i,this.priority=r,s&&(this.subPriority=s)}validate(e,t){return this.validateValue(e,this.value,t)}set(e,t,i){return this.setValue(e,t,this.value,i)}},$h=class extends qh{priority=nz;subPriority=-1;set(e,t){return t.timestampIsSet?e:se(e,fC(e,Date))}};var $=class{run(e,t,i,r){let s=this.parse(e,t,i,r);return s?{setter:new Wh(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,t,i){return!0}};var Hh=class extends ${priority=140;parse(e,t,i){switch(t){case"G":case"GG":case"GGG":return i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"});case"GGGGG":return i.era(e,{width:"narrow"});case"GGGG":default:return i.era(e,{width:"wide"})||i.era(e,{width:"abbreviated"})||i.era(e,{width:"narrow"})}}set(e,t,i){return t.era=i,e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["R","u","t","T"]};var pe={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},en={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function Ee(n,e){return n&&{value:e(n.value),rest:n.rest}}function ue(n,e){let t=e.match(n);return t?{value:parseInt(t[0],10),rest:e.slice(t[0].length)}:null}function tn(n,e){let t=e.match(n);if(!t)return null;if(t[0]==="Z")return{value:0,rest:e.slice(1)};let i=t[1]==="+"?1:-1,r=t[2]?parseInt(t[2],10):0,s=t[3]?parseInt(t[3],10):0,o=t[5]?parseInt(t[5],10):0;return{value:i*(r*di+s*hi+o*EA),rest:e.slice(t[0].length)}}function Gh(n){return ue(pe.anyDigitsSigned,n)}function ie(n,e){switch(n){case 1:return ue(pe.singleDigit,e);case 2:return ue(pe.twoDigits,e);case 3:return ue(pe.threeDigits,e);case 4:return ue(pe.fourDigits,e);default:return ue(new RegExp("^\\d{1,"+n+"}"),e)}}function uo(n,e){switch(n){case 1:return ue(pe.singleDigitSigned,e);case 2:return ue(pe.twoDigitsSigned,e);case 3:return ue(pe.threeDigitsSigned,e);case 4:return ue(pe.fourDigitsSigned,e);default:return ue(new RegExp("^-?\\d{1,"+n+"}"),e)}}function ho(n){switch(n){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function Kh(n,e){let t=e>0,i=t?e:1-e,r;if(i<=50)r=n||100;else{let s=i+50,o=Math.trunc(s/100)*100,a=n>=s%100;r=n+o-(a?100:0)}return t?r:1-r}function Yh(n){return n%400===0||n%4===0&&n%100!==0}var Qh=class extends ${priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(e,t,i){let r=s=>({year:s,isTwoDigitYear:t==="yy"});switch(t){case"y":return Ee(ie(4,e),r);case"yo":return Ee(i.ordinalNumber(e,{unit:"year"}),r);default:return Ee(ie(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,i){let r=e.getFullYear();if(i.isTwoDigitYear){let o=Kh(i.year,r);return e.setFullYear(o,0,1),e.setHours(0,0,0,0),e}let s=!("era"in t)||t.era===1?i.year:1-i.year;return e.setFullYear(s,0,1),e.setHours(0,0,0,0),e}};var Xh=class extends ${priority=130;parse(e,t,i){let r=s=>({year:s,isTwoDigitYear:t==="YY"});switch(t){case"Y":return Ee(ie(4,e),r);case"Yo":return Ee(i.ordinalNumber(e,{unit:"year"}),r);default:return Ee(ie(t.length,e),r)}}validate(e,t){return t.isTwoDigitYear||t.year>0}set(e,t,i,r){let s=co(e,r);if(i.isTwoDigitYear){let a=Kh(i.year,s);return e.setFullYear(a,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),gt(e,r)}let o=!("era"in t)||t.era===1?i.year:1-i.year;return e.setFullYear(o,0,r.firstWeekContainsDate),e.setHours(0,0,0,0),gt(e,r)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]};var Jh=class extends ${priority=130;parse(e,t){return t==="R"?uo(4,e):uo(t.length,e)}set(e,t,i){let r=se(e,0);return r.setFullYear(i,0,4),r.setHours(0,0,0,0),gn(r)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]};var Zh=class extends ${priority=130;parse(e,t){return t==="u"?uo(4,e):uo(t.length,e)}set(e,t,i){return e.setFullYear(i,0,1),e.setHours(0,0,0,0),e}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]};var ed=class extends ${priority=120;parse(e,t,i){switch(t){case"Q":case"QQ":return ie(t.length,e);case"Qo":return i.ordinalNumber(e,{unit:"quarter"});case"QQQ":return i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return i.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return i.quarter(e,{width:"wide",context:"formatting"})||i.quarter(e,{width:"abbreviated",context:"formatting"})||i.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=1&&t<=4}set(e,t,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]};var td=class extends ${priority=120;parse(e,t,i){switch(t){case"q":case"qq":return ie(t.length,e);case"qo":return i.ordinalNumber(e,{unit:"quarter"});case"qqq":return i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return i.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return i.quarter(e,{width:"wide",context:"standalone"})||i.quarter(e,{width:"abbreviated",context:"standalone"})||i.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=1&&t<=4}set(e,t,i){return e.setMonth((i-1)*3,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]};var nd=class extends ${incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(e,t,i){let r=s=>s-1;switch(t){case"M":return Ee(ue(pe.month,e),r);case"MM":return Ee(ie(2,e),r);case"Mo":return Ee(i.ordinalNumber(e,{unit:"month"}),r);case"MMM":return i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return i.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return i.month(e,{width:"wide",context:"formatting"})||i.month(e,{width:"abbreviated",context:"formatting"})||i.month(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=11}set(e,t,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}};var id=class extends ${priority=110;parse(e,t,i){let r=s=>s-1;switch(t){case"L":return Ee(ue(pe.month,e),r);case"LL":return Ee(ie(2,e),r);case"Lo":return Ee(i.ordinalNumber(e,{unit:"month"}),r);case"LLL":return i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return i.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return i.month(e,{width:"wide",context:"standalone"})||i.month(e,{width:"abbreviated",context:"standalone"})||i.month(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=11}set(e,t,i){return e.setMonth(i,1),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]};function pC(n,e,t){let i=F(n),r=Bh(i,t)-e;return i.setDate(i.getDate()-r*7),i}var rd=class extends ${priority=100;parse(e,t,i){switch(t){case"w":return ue(pe.week,e);case"wo":return i.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,i,r){return gt(pC(e,i,r),r)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]};function mC(n,e){let t=F(n),i=Uh(t)-e;return t.setDate(t.getDate()-i*7),t}var sd=class extends ${priority=100;parse(e,t,i){switch(t){case"I":return ue(pe.week,e);case"Io":return i.ordinalNumber(e,{unit:"week"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=53}set(e,t,i){return gn(mC(e,i))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]};var iz=[31,28,31,30,31,30,31,31,30,31,30,31],rz=[31,29,31,30,31,30,31,31,30,31,30,31],od=class extends ${priority=90;subPriority=1;parse(e,t,i){switch(t){case"d":return ue(pe.date,e);case"do":return i.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}validate(e,t){let i=e.getFullYear(),r=Yh(i),s=e.getMonth();return r?t>=1&&t<=rz[s]:t>=1&&t<=iz[s]}set(e,t,i){return e.setDate(i),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]};var ad=class extends ${priority=90;subpriority=1;parse(e,t,i){switch(t){case"D":case"DD":return ue(pe.dayOfYear,e);case"Do":return i.ordinalNumber(e,{unit:"date"});default:return ie(t.length,e)}}validate(e,t){let i=e.getFullYear();return Yh(i)?t>=1&&t<=366:t>=1&&t<=365}set(e,t,i){return e.setMonth(0,i),e.setHours(0,0,0,0),e}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]};function fo(n,e,t){let i=Ut(),r=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??i.weekStartsOn??i.locale?.options?.weekStartsOn??0,s=F(n),o=s.getDay(),c=(e%7+7)%7,l=7-r,h=e<0||e>6?e-(o+l)%7:(c+l)%7-(o+l)%7;return Hi(s,h)}var cd=class extends ${priority=90;parse(e,t,i){switch(t){case"E":case"EE":case"EEE":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return i.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,i,r){return e=fo(e,i,r),e.setHours(0,0,0,0),e}incompatibleTokens=["D","i","e","c","t","T"]};var ld=class extends ${priority=90;parse(e,t,i,r){let s=o=>{let a=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+a};switch(t){case"e":case"ee":return Ee(ie(t.length,e),s);case"eo":return Ee(i.ordinalNumber(e,{unit:"day"}),s);case"eee":return i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeeee":return i.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"})}}validate(e,t){return t>=0&&t<=6}set(e,t,i,r){return e=fo(e,i,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]};var ud=class extends ${priority=90;parse(e,t,i,r){let s=o=>{let a=Math.floor((o-1)/7)*7;return(o+r.weekStartsOn+6)%7+a};switch(t){case"c":case"cc":return Ee(ie(t.length,e),s);case"co":return Ee(i.ordinalNumber(e,{unit:"day"}),s);case"ccc":return i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"ccccc":return i.day(e,{width:"narrow",context:"standalone"});case"cccccc":return i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return i.day(e,{width:"wide",context:"standalone"})||i.day(e,{width:"abbreviated",context:"standalone"})||i.day(e,{width:"short",context:"standalone"})||i.day(e,{width:"narrow",context:"standalone"})}}validate(e,t){return t>=0&&t<=6}set(e,t,i,r){return e=fo(e,i,r),e.setHours(0,0,0,0),e}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]};function gC(n,e){let t=F(n),i=dC(t),r=e-i;return Hi(t,r)}var hd=class extends ${priority=90;parse(e,t,i){let r=s=>s===0?7:s;switch(t){case"i":case"ii":return ie(t.length,e);case"io":return i.ordinalNumber(e,{unit:"day"});case"iii":return Ee(i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),r);case"iiiii":return Ee(i.day(e,{width:"narrow",context:"formatting"}),r);case"iiiiii":return Ee(i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),r);case"iiii":default:return Ee(i.day(e,{width:"wide",context:"formatting"})||i.day(e,{width:"abbreviated",context:"formatting"})||i.day(e,{width:"short",context:"formatting"})||i.day(e,{width:"narrow",context:"formatting"}),r)}}validate(e,t){return t>=1&&t<=7}set(e,t,i){return e=gC(e,i),e.setHours(0,0,0,0),e}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]};var dd=class extends ${priority=80;parse(e,t,i){switch(t){case"a":case"aa":case"aaa":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,i){return e.setHours(ho(i),0,0,0),e}incompatibleTokens=["b","B","H","k","t","T"]};var fd=class extends ${priority=80;parse(e,t,i){switch(t){case"b":case"bb":case"bbb":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,i){return e.setHours(ho(i),0,0,0),e}incompatibleTokens=["a","B","H","k","t","T"]};var pd=class extends ${priority=80;parse(e,t,i){switch(t){case"B":case"BB":case"BBB":return i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return i.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return i.dayPeriod(e,{width:"wide",context:"formatting"})||i.dayPeriod(e,{width:"abbreviated",context:"formatting"})||i.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,t,i){return e.setHours(ho(i),0,0,0),e}incompatibleTokens=["a","b","t","T"]};var md=class extends ${priority=70;parse(e,t,i){switch(t){case"h":return ue(pe.hour12h,e);case"ho":return i.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=12}set(e,t,i){let r=e.getHours()>=12;return r&&i<12?e.setHours(i+12,0,0,0):!r&&i===12?e.setHours(0,0,0,0):e.setHours(i,0,0,0),e}incompatibleTokens=["H","K","k","t","T"]};var gd=class extends ${priority=70;parse(e,t,i){switch(t){case"H":return ue(pe.hour23h,e);case"Ho":return i.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=23}set(e,t,i){return e.setHours(i,0,0,0),e}incompatibleTokens=["a","b","h","K","k","t","T"]};var yd=class extends ${priority=70;parse(e,t,i){switch(t){case"K":return ue(pe.hour11h,e);case"Ko":return i.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=11}set(e,t,i){return e.getHours()>=12&&i<12?e.setHours(i+12,0,0,0):e.setHours(i,0,0,0),e}incompatibleTokens=["h","H","k","t","T"]};var _d=class extends ${priority=70;parse(e,t,i){switch(t){case"k":return ue(pe.hour24h,e);case"ko":return i.ordinalNumber(e,{unit:"hour"});default:return ie(t.length,e)}}validate(e,t){return t>=1&&t<=24}set(e,t,i){let r=i<=24?i%24:i;return e.setHours(r,0,0,0),e}incompatibleTokens=["a","b","h","H","K","t","T"]};var vd=class extends ${priority=60;parse(e,t,i){switch(t){case"m":return ue(pe.minute,e);case"mo":return i.ordinalNumber(e,{unit:"minute"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,i){return e.setMinutes(i,0,0),e}incompatibleTokens=["t","T"]};var wd=class extends ${priority=50;parse(e,t,i){switch(t){case"s":return ue(pe.second,e);case"so":return i.ordinalNumber(e,{unit:"second"});default:return ie(t.length,e)}}validate(e,t){return t>=0&&t<=59}set(e,t,i){return e.setSeconds(i,0),e}incompatibleTokens=["t","T"]};var bd=class extends ${priority=30;parse(e,t){let i=r=>Math.trunc(r*Math.pow(10,-t.length+3));return Ee(ie(t.length,e),i)}set(e,t,i){return e.setMilliseconds(i),e}incompatibleTokens=["t","T"]};var Id=class extends ${priority=10;parse(e,t){switch(t){case"X":return tn(en.basicOptionalMinutes,e);case"XX":return tn(en.basic,e);case"XXXX":return tn(en.basicOptionalSeconds,e);case"XXXXX":return tn(en.extendedOptionalSeconds,e);case"XXX":default:return tn(en.extended,e)}}set(e,t,i){return t.timestampIsSet?e:se(e,e.getTime()-Nr(e)-i)}incompatibleTokens=["t","T","x"]};var Ed=class extends ${priority=10;parse(e,t){switch(t){case"x":return tn(en.basicOptionalMinutes,e);case"xx":return tn(en.basic,e);case"xxxx":return tn(en.basicOptionalSeconds,e);case"xxxxx":return tn(en.extendedOptionalSeconds,e);case"xxx":default:return tn(en.extended,e)}}set(e,t,i){return t.timestampIsSet?e:se(e,e.getTime()-Nr(e)-i)}incompatibleTokens=["t","T","X"]};var Td=class extends ${priority=40;parse(e){return Gh(e)}set(e,t,i){return[se(e,i*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"};var Sd=class extends ${priority=20;parse(e){return Gh(e)}set(e,t,i){return[se(e,i),{timestampIsSet:!0}]}incompatibleTokens="*"};var yC={G:new Hh,y:new Qh,Y:new Xh,R:new Jh,u:new Zh,Q:new ed,q:new td,M:new nd,L:new id,w:new rd,I:new sd,d:new od,D:new ad,E:new cd,e:new ld,c:new ud,i:new hd,a:new dd,b:new fd,B:new pd,h:new md,H:new gd,K:new yd,k:new _d,m:new vd,s:new wd,S:new bd,X:new Id,x:new Ed,t:new Td,T:new Sd};var sz=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oz=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,az=/^'([^]*?)'?$/,cz=/''/g,lz=/\S/,uz=/[a-zA-Z]/;function _C(n,e,t,i){let r=hC(),s=i?.locale??r.locale??vc,o=i?.firstWeekContainsDate??i?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,a=i?.weekStartsOn??i?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0;if(e==="")return n===""?F(t):se(t,NaN);let c={firstWeekContainsDate:o,weekStartsOn:a,locale:s},l=[new $h],h=e.match(oz).map(_=>{let w=_[0];if(w in wc){let D=wc[w];return D(_,s.formatLong)}return _}).join("").match(sz),d=[];for(let _ of h){!i?.useAdditionalWeekYearTokens&&zh(_)&&bc(_,e,n),!i?.useAdditionalDayOfYearTokens&&jh(_)&&bc(_,e,n);let w=_[0],D=yC[w];if(D){let{incompatibleTokens:R}=D;if(Array.isArray(R)){let V=d.find(O=>R.includes(O.token)||O.token===w);if(V)throw new RangeError(`The format string mustn't contain \`${V.fullToken}\` and \`${_}\` at the same time`)}else if(D.incompatibleTokens==="*"&&d.length>0)throw new RangeError(`The format string mustn't contain \`${_}\` and any other token at the same time`);d.push({token:w,fullToken:_});let k=D.run(n,_,s.match,c);if(!k)return se(t,NaN);l.push(k.setter),n=k.rest}else{if(w.match(uz))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");if(_==="''"?_="'":w==="'"&&(_=hz(_)),n.indexOf(_)===0)n=n.slice(_.length);else return se(t,NaN)}}if(n.length>0&&lz.test(n))return se(t,NaN);let p=l.map(_=>_.priority).sort((_,w)=>w-_).filter((_,w,D)=>D.indexOf(_)===w).map(_=>l.filter(w=>w.priority===_).sort((w,D)=>D.subPriority-w.subPriority)).map(_=>_[0]),g=F(t);if(isNaN(g.getTime()))return se(t,NaN);let b={};for(let _ of p){if(!_.validate(g,c))return se(t,NaN);let w=_.set(g,b,c);Array.isArray(w)?(g=w[0],Object.assign(b,w[1])):g=w}return se(t,g)}function hz(n){return n.match(az)[1].replace(cz,"'")}function vC(n){let e=F(n);return e.setMinutes(0,0,0),e}function wC(n){let e=F(n);return e.setMilliseconds(0),e}function bC(n,e){let t=e?.additionalDigits??2,i=mz(n),r;if(i.date){let c=gz(i.date,t);r=yz(c.restDateString,c.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);let s=r.getTime(),o=0,a;if(i.time&&(o=_z(i.time),isNaN(o)))return new Date(NaN);if(i.timezone){if(a=vz(i.timezone),isNaN(a))return new Date(NaN)}else{let c=new Date(s+o),l=new Date(0);return l.setFullYear(c.getUTCFullYear(),c.getUTCMonth(),c.getUTCDate()),l.setHours(c.getUTCHours(),c.getUTCMinutes(),c.getUTCSeconds(),c.getUTCMilliseconds()),l}return new Date(s+o+a)}var xd={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},dz=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,fz=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,pz=/^([+-])(\d{2})(?::?(\d{2}))?$/;function mz(n){let e={},t=n.split(xd.dateTimeDelimiter),i;if(t.length>2)return e;if(/:/.test(t[0])?i=t[0]:(e.date=t[0],i=t[1],xd.timeZoneDelimiter.test(e.date)&&(e.date=n.split(xd.timeZoneDelimiter)[0],i=n.substr(e.date.length,n.length))),i){let r=xd.timezone.exec(i);r?(e.time=i.replace(r[1],""),e.timezone=r[1]):e.time=i}return e}function gz(n,e){let t=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+e)+"})|(\\d{2}|[+-]\\d{"+(2+e)+"})$)"),i=n.match(t);if(!i)return{year:NaN,restDateString:""};let r=i[1]?parseInt(i[1]):null,s=i[2]?parseInt(i[2]):null;return{year:s===null?r:s*100,restDateString:n.slice((i[1]||i[2]).length)}}function yz(n,e){if(e===null)return new Date(NaN);let t=n.match(dz);if(!t)return new Date(NaN);let i=!!t[4],r=Ic(t[1]),s=Ic(t[2])-1,o=Ic(t[3]),a=Ic(t[4]),c=Ic(t[5])-1;if(i)return Tz(e,a,c)?wz(e,a,c):new Date(NaN);{let l=new Date(0);return!Iz(e,s,o)||!Ez(e,r)?new Date(NaN):(l.setUTCFullYear(e,s,Math.max(r,o)),l)}}function Ic(n){return n?parseInt(n):1}function _z(n){let e=n.match(fz);if(!e)return NaN;let t=dv(e[1]),i=dv(e[2]),r=dv(e[3]);return Sz(t,i,r)?t*di+i*hi+r*1e3:NaN}function dv(n){return n&&parseFloat(n.replace(",","."))||0}function vz(n){if(n==="Z")return 0;let e=n.match(pz);if(!e)return 0;let t=e[1]==="+"?-1:1,i=parseInt(e[2]),r=e[3]&&parseInt(e[3])||0;return xz(i,r)?t*(i*di+r*hi):NaN}function wz(n,e,t){let i=new Date(0);i.setUTCFullYear(n,0,4);let r=i.getUTCDay()||7,s=(e-1)*7+t+1-r;return i.setUTCDate(i.getUTCDate()+s),i}var bz=[31,null,31,30,31,30,31,31,30,31,30,31];function IC(n){return n%400===0||n%4===0&&n%100!==0}function Iz(n,e,t){return e>=0&&e<=11&&t>=1&&t<=(bz[e]||(IC(n)?29:28))}function Ez(n,e){return e>=1&&e<=(IC(n)?366:365)}function Tz(n,e,t){return e>=1&&e<=53&&t>=0&&t<=6}function Sz(n,e,t){return n===24?e===0&&t===0:t>=0&&t<60&&e>=0&&e<60&&n>=0&&n<25}function xz(n,e){return e>=0&&e<=59}var Az={datetime:"MMM d, yyyy, h:mm:ss aaaa",millisecond:"h:mm:ss.SSS aaaa",second:"h:mm:ss aaaa",minute:"h:mm aaaa",hour:"ha",day:"MMM d",week:"PP",month:"MMM yyyy",quarter:"qqq - yyyy",year:"yyyy"};sv._date.override({_id:"date-fns",formats:function(){return Az},parse:function(n,e){if(n===null||typeof n>"u")return null;let t=typeof n;return t==="number"||n instanceof Date?n=F(n):t==="string"&&(typeof e=="string"?n=_C(n,e,new Date,this.options):n=bC(n,this.options)),kh(n)?n.getTime():null},format:function(n,e){return uC(n,e,this.options)},add:function(n,e,t){switch(t){case"millisecond":return Gi(n,e);case"second":return DA(n,e);case"minute":return AA(n,e);case"hour":return SA(n,e);case"day":return Hi(n,e);case"week":return RA(n,e);case"month":return so(n,e);case"quarter":return CA(n,e);case"year":return PA(n,e);default:return n}},diff:function(n,e,t){switch(t){case"millisecond":return Ki(n,e);case"second":return BA(n,e);case"minute":return LA(n,e);case"hour":return VA(n,e);case"day":return Mh(n,e);case"week":return jA(n,e);case"month":return Vh(n,e);case"quarter":return UA(n,e);case"year":return zA(n,e);default:return 0}},startOf:function(n,e,t){switch(e){case"second":return wC(n);case"minute":return qA(n);case"hour":return vC(n);case"day":return _c(n);case"week":return gt(n);case"isoWeek":return gt(n,{weekStartsOn:+t});case"month":return $A(n);case"quarter":return WA(n);case"year":return Lh(n);default:return n}},endOf:function(n,e){switch(e){case"second":return XA(n);case"minute":return YA(n);case"hour":return GA(n);case"day":return Oh(n);case"week":return KA(n);case"month":return Nh(n);case"quarter":return QA(n);case"year":return HA(n);default:return n}}});io.register(...bA);var po=(n,e)=>n.p0.skip||n.p1.skip?e:void 0,fv={CHART_COLORS:{red:"rgb(255, 99, 132)",orange:"rgb(255, 159, 64)",yellow:"rgb(255, 205, 86)",green:"rgb(75, 192, 192)",blue:"rgb(54, 162, 235)",purple:"rgb(153, 102, 255)",grey:"rgb(231,233,237)"}},Cz=[{label:"\u57FA\u790E\u529F\u7387",data:[],fill:!1,borderColor:fv.CHART_COLORS.orange,tension:.2,segment:{borderColor:n=>po(n,"rgb(255,255,255,0.2)"),borderDash:n=>po(n,[6,6])},spanGaps:!0},{label:"\u52A0\u5DE5\u9762\u529F\u7387",data:[],fill:!0,borderColor:fv.CHART_COLORS.red,tension:.2,segment:{borderColor:n=>po(n,"rgb(255,255,255,0.2)"),borderDash:n=>po(n,[6,6])},spanGaps:!0},{label:"\u6BD4\u4F8B",data:[],fill:!0,yAxisID:"y1",borderColor:fv.CHART_COLORS.green,tension:.2,segment:{borderColor:n=>po(n,"rgb(255,255,255,0.2)"),borderDash:n=>po(n,[6,6])},spanGaps:!0}],EC={type:"line",data:{labels:[],datasets:Cz},options:{animation:!1,responsive:!0,scales:{y:{type:"linear",display:!0,position:"left"},y1:{position:"right",type:"linear",display:!0},x:{type:"time",time:{unit:"day"}}},plugins:{title:{display:!0,text:"\u6BD4\u4F8B(\u85CD\u8272) = \u5DE5\u4F5C\u9762\u529F\u7387(\u7D05\u8272) / \u57FA\u790E\u529F\u7387(\u6A58\u8272)"}}}};var TC=(()=>{let e=class e{set source2(i){this._source2=i,this.labels=i.map(r=>(console.log(new Date(r.atDate??"").getTime()),new Date(r.atDate??"").getTime())),this.source_1=i.map(r=>r.basepower),this.source_2=i.map(r=>r.workpower),this.source_3=i.map(r=>r.workpower==null||r.basepower==null?null:r.workpower/r.basepower),this.update()}get source2(){return this._source2}constructor(){this.chart=void 0,this.labels=[],this.source_1=[],this.source_2=[],this.source_3=[],this._source2=[],io.register(ro,ov,mc,cv,lv,uv)}ngOnInit(){this.initializeChart()}initializeChart(){let i=document.getElementById("myChart");i&&(this.chart=new io(i,EC),this.update())}update(){this.chart&&(this.chart.data.labels=this.labels,this.chart.data.datasets[0].data=this.source_1,this.chart.data.datasets[1].data=this.source_2,this.chart.data.datasets[2].data=this.source_3,this.chart.update())}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=yn({type:e,selectors:[["app-result-chart"]],inputs:{source2:"source2"},standalone:!0,features:[vn],decls:1,vars:0,consts:[["id","myChart"]],template:function(r,s){r&1&&nt(0,"canvas",0)},styles:["#myChart[_ngcontent-%COMP%]{height:50vh;width:100%}"]});let n=e;return n})();var SC=(()=>{let e=class e{constructor(i){this.fire=i}convertData(i){return{id:i.id,basepower:i.data().basepower,workpower:i.data().workpower,workStructure:i.data().workStructure,beamExpander:i.data().beamExpander,lens:i.data().lens,slit:i.data().slit,doe:i.data().doe,wavePlate:i.data().wavePlate,lambda:i.data().lambda,atDate:i.data().atDate,brandKey:i.data().brandKey,brandvalue0_Laser:i.data().brandvalue0_Laser,brandvalue1_rate:i.data().brandvalue1_rate,brandvalue2_atten:i.data().brandvalue2_atten,email:i.data().email,displayname:i.data().displayname}}getAllData(){return S(this,null,function*(){let i=[],r=Ls(Oi(this.fire.get_db(),this.fire.FireBaseKeyName)),s=yield Fs(r);return console.log(s),s.forEach(o=>{i.push(this.convertData(o))}),i.sort((o,a)=>new Date(o.atDate??"").getTime()-new Date(a.atDate??"").getTime()),i})}getSpecData(i){return S(this,null,function*(){let r=[],s=Ls(Oi(this.fire.get_db(),this.fire.FireBaseKeyName),cT(Ct("brandKey","==",i.brandKey),Ct("beamExpander","==",i.beamExpander),Ct("lens","==",i.lens),Ct("slit","==",i.slit),Ct("doe","==",i.doe),Ct("wavePlate","==",i.wavePlate),Ct("lambda","==",i.lambda),Ct("brandvalue0_Laser","==",i.brandvalue0_Laser),Ct("brandvalue1_rate","==",i.brandvalue1_rate),Ct("brandvalue2_atten","==",i.brandvalue2_atten),Ct("workStructure","==",i.workStructure)));return(yield Fs(s)).forEach(a=>{console.log(a),r.push(this.convertData(a))}),r.sort((a,c)=>new Date(a.atDate??"").getTime()-new Date(c.atDate??"").getTime()),r})}getUserData(i){return S(this,null,function*(){let r=[],s=Ls(Oi(this.fire.get_db(),this.fire.FireBaseKeyName),Ct("email","==",i));return(yield Fs(s)).forEach(a=>{r.push(this.convertData(a))}),r.sort((a,c)=>new Date(a.atDate??"").getTime()-new Date(c.atDate??"").getTime()),r})}};e.\u0275fac=function(r){return new(r||e)(Re(zs))},e.\u0275prov=ye({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Rz=()=>({updateOn:"change"});function Pz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function kz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Mz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Oz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Nz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Vz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Lz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Fz(n,e){if(n&1&&(B(0,"option",43),G(1),j()),n&2){let t=e.$implicit;ee("value",t),W(),an(" ",t," ")}}function Uz(n,e){n&1&&(B(0,"div",46),nt(1,"div",47),B(2,"span",48),G(3,"Loading..."),j()())}function Bz(n,e){if(n&1){let t=Lo();nt(0,"app-result-chart",49),B(1,"div",50)(2,"div",51)(3,"button",52),of(),B(4,"svg",53),nt(5,"path",54),j()()(),af(),B(6,"div",55)(7,"button",56),it("click",function(){$e(t);let r=jt(2);return He(r.download_data())}),of(),B(8,"svg",57),nt(9,"path",58)(10,"path",59),j()()()(),af(),B(11,"div")(12,"div",60),nt(13,"app-result-table",61),j()()}if(n&2){let t=jt(2);ee("source2",t.recieve_data),W(13),ee("source",t.recieve_data)}}function jz(n,e){if(n&1&&(B(0,"div"),nt(1,"hr",20),B(2,"div",44),At(3,Uz,4,0,"div",45)(4,Bz,14,2,"ng-template",null,1,Hw),j()()),n&2){let t=zw(5),i=jt();W(3),ee("ngIf",i.is_loading)("ngIfElse",t)}}var q7=(()=>{let e=class e{constructor(i,r){this.recieve_data=[],this.is_TableShow=!1,this.is_loading=!1,this.brands2={},this.keys_brands2=Object.keys(this.brands2),this.lambdas=["1030","515","343","258"],this.workStructureList=["\u76F4\u5BEB","Scanner"],this.beamExpanderList=["x(\u7121)","VRE13","VEX13"],this.slitList=["x(\u7121)"],this.lensList=["F 70 telecentric","F 100 telecentric","F 160 telecentric","F 103 telecentric Ronar-Simith","F 254 telecentric Ronar-Simith","Mitutoyo NIR 5X","Mitutoyo NIR 10X","Mitutoyo NIR 20X","Mitutoyo NIR 50X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 20X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 50X","OLYMPUS IR \u4FEE\u50CF\u5DEE 50X"],this.doeList=["X(\u7121)","\u5E73\u9802","M shape"],this.wavePlateList=["X(\u7121)","\u03BB2","\u03BB/4"],this.fire=i,this.getData=r,this.data=this.fire.getNewPowerData()}ngOnInit(){this.brands2["LC 80W"]=["S1",100,80],this.brands2.EKSPLA=["S2",200,100],this.brands2.Litlit=["S2",100,100],this.brands2["LC 40W"]=["S3",100,80],this.keys_brands2=Object.keys(this.brands2),this.data.brandKey=this.keys_brands2[0],this.data.lambda=this.lambdas[0],this.data.workStructure=this.workStructureList[0],this.data.beamExpander=this.beamExpanderList[0],this.data.slit=this.slitList[0],this.data.lens=this.lensList[0],this.data.doe=this.doeList[0],this.data.wavePlate=this.wavePlateList[0],this.data.atDate=new Date().toISOString().split("T")[0]}data_complete(){return this.data.brandvalue0_Laser=this.brands2[this.data.brandKey][0],this.data.brandvalue1_rate=this.brands2[this.data.brandKey][1],this.data.brandvalue2_atten=this.brands2[this.data.brandKey][2],this.data.email=this.fire.get_loginInfo()?.user?.user.email??null,this.data.displayname=this.fire.get_loginInfo()?.user?.user.displayName??null,this.data.basepower!=null&&this.data.workpower!=null&&this.data.workStructure!=null&&this.data.beamExpander!=null&&this.data.lens!=null&&this.data.slit!=null&&this.data.doe!=null&&this.data.wavePlate!=null&&this.data.lambda!=null&&this.data.atDate!=null&&this.data.brandKey!=null&&this.data.brandvalue0_Laser!=null&&this.data.brandvalue1_rate!=null&&this.data.brandvalue2_atten!=null}onGetDataClose(){this.recieve_data=[],console.log("onClose"),this.is_TableShow=!1}onGetDataStructure(){this.recieve_data=[],this.is_loading=!0,this.data_complete(),console.log(this.data),this.getData.getSpecData(this.data).then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}onGetDataUser(){this.recieve_data=[],this.is_loading=!0,this.data_complete(),console.log(this.data.email),this.getData.getUserData(this.data.email).then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}onGetDataAll(){this.recieve_data=[],this.is_loading=!0,this.getData.getAllData().then(i=>{this.recieve_data=i,console.log(i)}).finally(()=>{this.is_TableShow=!0,this.is_loading=!1})}convertToCSV(i){let r=Object.keys(i[0]).join(","),s=i.map(o=>Object.values(o).join(","));return`${r}
${s.join(`
`)}`}download_data(){let i=this.convertToCSV(this.recieve_data),r="data:text/csv;charset=utf-8,"+encodeURIComponent(i),s=document.createElement("a");s.href=r,s.download="recieve_data.csv",document.body.appendChild(s),s.click(),document.body.removeChild(s)}onSubmit(){console.log(this.data_complete()),console.log("brands2\u7684key:",this.data),this.fire.addData(this.data)}};e.\u0275fac=function(r){return new(r||e)(Ie(zs),Ie(SC))},e.\u0275cmp=yn({type:e,selectors:[["app-inputdata"]],standalone:!0,features:[vn],decls:100,vars:25,consts:[["form","ngForm"],["elseBlock",""],[1,"container"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"text-center"],[1,"blockquote"],[1,"row","g-3"],[1,"col-md-12"],["for","brandKey",1,"form-label"],["id","brandKey","name","brandKey","required","",1,"form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["for","laser",1,"form-label"],["type","text","id","laser","disabled","true",1,"form-control",3,"value"],["for","rate",1,"form-label"],["type","text","id","rate","disabled","true",1,"form-control",3,"value"],["for","attenuator",1,"form-label"],["type","text","id","attenuator","disabled","true",1,"form-control",3,"value"],["for","lambda",1,"form-label"],["id","lambda","name","lambda","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"my-4"],["for","workStructure",1,"form-label"],["id","workStructure","name","workStructure","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","beamExpander",1,"form-label"],["id","beamExpander","name","beamExpander","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","slit",1,"form-label"],["id","slit","name","slit","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","lens",1,"form-label"],["id","lens","name","lens","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","doe",1,"form-label"],["id","doe","name","doe","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","wavePlate",1,"form-label"],["id","wavePlate","name","wavePlate","required","",1,"form-select",3,"ngModelChange","ngModel"],["role","group","aria-label","Small button group",1,"btn-group","btn-group-sm"],["type","button",1,"btn","btn-outline-primary",3,"click"],[4,"ngIf"],["for","basepower",1,"form-label"],["type","number","id","basepower","name","basepower","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","workpower","name","workpower","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["for","atDate",1,"form-label"],["type","date","id","atDate","name","atDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"],[3,"value"],[1,"border","border-primary"],["class","div-loading",4,"ngIf","ngIfElse"],[1,"div-loading"],["role","status",1,"spinner-border",2,"width","3rem","height","3rem"],[1,""],[3,"source2"],[1,"row","align-items-start"],["data-bs-toggle","collapse","data-bs-placement","top","title","\u5C55\u793A/\u6536\u7E2E\u8A73\u7D30\u8868\u683C",1,"col-md-1"],["type","button","aria-label","Close","data-bs-toggle","collapse","data-bs-placement","top","title","\u5C55\u793A/\u6536\u7E2E\u8A73\u7D30\u8868\u683C","data-bs-target","#collapseWidthExample","aria-expanded","false","aria-controls","collapseWidthExample",1,"btn"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-table"],["d","M0 2a2 2 0 0 1 2-2h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2zm15 2h-4v3h4zm0 4h-4v3h4zm0 4h-4v3h3a1 1 0 0 0 1-1zm-5 3v-3H6v3zm-5 0v-3H1v2a1 1 0 0 0 1 1zm-4-4h4V8H1zm0-4h4V4H1zm5-3v3h4V4zm4 4H6v3h4z"],[1,"col-md-1"],["type","button","data-bs-toggle","tooltip","data-bs-placement","top","title","\u8CC7\u6599\u4E0B\u8F09[.csv]",1,"btn",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-download"],["d","M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"],["d","M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"],["id","collapseWidthExample",1,"collapse"],[3,"source"]],template:function(r,s){if(r&1){let o=Lo();B(0,"div",2)(1,"form",3,0),it("ngSubmit",function(){return $e(o),He(s.onSubmit())}),B(3,"figure",4)(4,"blockquote",5)(5,"p"),G(6,"\u96F7\u5C04"),j()()(),B(7,"div",6)(8,"div",7)(9,"label",8),G(10,"\u54C1\u724C"),j(),B(11,"select",9),kt("ngModelChange",function(c){return $e(o),Pt(s.data.brandKey,c)||(s.data.brandKey=c),He(c)}),At(12,Pz,2,2,"option",10),j()(),B(13,"div",11)(14,"label",12),G(15,"\u8A2D\u5099"),j(),nt(16,"input",13),j(),B(17,"div",11)(18,"label",14),G(19,"\u91CD\u8907\u7387(kHz)"),j(),nt(20,"input",15),j(),B(21,"div",11)(22,"label",16),G(23,"attenuator(%)"),j(),nt(24,"input",17),j(),B(25,"div",7)(26,"label",18),G(27,"\u6CE2\u9577(nm)"),j(),B(28,"select",19),kt("ngModelChange",function(c){return $e(o),Pt(s.data.lambda,c)||(s.data.lambda=c),He(c)}),At(29,kz,2,2,"option",10),j()()(),nt(30,"hr",20),B(31,"figure",4)(32,"blockquote",5)(33,"p"),G(34,"\u5149\u8DEF\u67B6\u69CB"),j()()(),B(35,"div",6)(36,"div",7)(37,"label",21),G(38,"\u52A0\u5DE5\u7CFB\u7D71"),j(),B(39,"select",22),kt("ngModelChange",function(c){return $e(o),Pt(s.data.workStructure,c)||(s.data.workStructure=c),He(c)}),At(40,Mz,2,2,"option",10),j()(),B(41,"div",7)(42,"label",23),G(43,"\u64F4\u675F\u93E1"),j(),B(44,"select",24),kt("ngModelChange",function(c){return $e(o),Pt(s.data.beamExpander,c)||(s.data.beamExpander=c),He(c)}),At(45,Oz,2,2,"option",10),j()(),B(46,"div",7)(47,"label",25),G(48,"\u72F9\u7E2B"),j(),B(49,"select",26),kt("ngModelChange",function(c){return $e(o),Pt(s.data.slit,c)||(s.data.slit=c),He(c)}),At(50,Nz,2,2,"option",10),j()(),B(51,"div",7)(52,"label",27),G(53,"\u93E1\u982D"),j(),B(54,"select",28),kt("ngModelChange",function(c){return $e(o),Pt(s.data.lens,c)||(s.data.lens=c),He(c)}),At(55,Vz,2,2,"option",10),j()(),B(56,"div",7)(57,"label",29),G(58,"DOE"),j(),B(59,"select",30),kt("ngModelChange",function(c){return $e(o),Pt(s.data.doe,c)||(s.data.doe=c),He(c)}),At(60,Lz,2,2,"option",10),j()(),B(61,"div",7)(62,"label",31),G(63,"DOE"),j(),B(64,"select",32),kt("ngModelChange",function(c){return $e(o),Pt(s.data.wavePlate,c)||(s.data.wavePlate=c),He(c)}),At(65,Fz,2,2,"option",10),j()()(),nt(66,"hr",20),B(67,"div",6)(68,"div",33)(69,"button",34),it("click",function(){return $e(o),He(s.onGetDataClose())}),G(70," \u95DC\u9589 "),j(),B(71,"button",34),it("click",function(){return $e(o),He(s.onGetDataStructure())}),G(72," \u4F9D\u67B6\u69CB "),j(),B(73,"button",34),it("click",function(){return $e(o),He(s.onGetDataUser())}),G(74," \u4F9D\u672C\u4EBA "),j(),B(75,"button",34),it("click",function(){return $e(o),He(s.onGetDataAll())}),G(76," \u5168\u90E8 "),j()()(),At(77,jz,6,2,"div",35),nt(78,"hr",20),B(79,"figure",4)(80,"blockquote",5)(81,"p"),G(82,"\u91CF\u6E2C\u7D00\u9304"),j()()(),B(83,"div",6)(84,"div",7)(85,"label",36),G(86,"\u57FA\u983B\u5149\u96F7\u5C04\u529F\u7387(w)"),j(),B(87,"input",37),kt("ngModelChange",function(c){return $e(o),Pt(s.data.basepower,c)||(s.data.basepower=c),He(c)}),j()(),B(88,"div",7)(89,"label",36),G(90,"\u52A0\u5DE5\u9762\u529F\u7387(w)"),j(),B(91,"input",38),kt("ngModelChange",function(c){return $e(o),Pt(s.data.workpower,c)||(s.data.workpower=c),He(c)}),j()(),B(92,"div",39)(93,"label",40),G(94,"\u65E5\u671F"),j(),B(95,"input",41),kt("ngModelChange",function(c){return $e(o),Pt(s.data.atDate,c)||(s.data.atDate=c),He(c)}),j()()(),nt(96,"hr",20),B(97,"div",6)(98,"button",42),G(99," \u78BA\u8A8D\u9001\u51FA "),j()()()()}r&2&&(W(11),Rt("ngModel",s.data.brandKey),ee("ngModelOptions",qw(24,Rz)),W(),ee("ngForOf",s.keys_brands2),W(4),ee("value",s.brands2[s.data.brandKey][0]),W(4),ee("value",s.brands2[s.data.brandKey][1]),W(4),ee("value",s.brands2[s.data.brandKey][2]),W(4),Rt("ngModel",s.data.lambda),W(),ee("ngForOf",s.lambdas),W(10),Rt("ngModel",s.data.workStructure),W(),ee("ngForOf",s.workStructureList),W(4),Rt("ngModel",s.data.beamExpander),W(),ee("ngForOf",s.beamExpanderList),W(4),Rt("ngModel",s.data.slit),W(),ee("ngForOf",s.slitList),W(4),Rt("ngModel",s.data.lens),W(),ee("ngForOf",s.lensList),W(4),Rt("ngModel",s.data.doe),W(),ee("ngForOf",s.doeList),W(4),Rt("ngModel",s.data.wavePlate),W(),ee("ngForOf",s.wavePlateList),W(12),ee("ngIf",s.is_TableShow),W(10),Rt("ngModel",s.data.basepower),W(4),Rt("ngModel",s.data.workpower),W(4),Rt("ngModel",s.data.atDate))},dependencies:[Tl,Il,_0,w0,hs,Ip,El,vl,wl,Ep,fa,da,Uo,$c,Hc,oS,TC],styles:[".div-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:flex-start;top:50%;left:50%}.custom-tooltip[_ngcontent-%COMP%]{--bs-tooltip-bg: var(--bd-violet-bg);--bs-tooltip-color: var(--bs-white)}"]});let n=e;return n})();export{Hz as a,ab as b,mq as c,CD as d,rR as e,Xq as f,zs as g,l$ as h,q7 as i};
