import{$ as Hr,$a as Mo,A as Tn,Aa as Mp,Ab as rt,B as Hn,Ba as Op,Bb as Fi,C as bl,Ca as Vp,Cb as Xp,D as vl,Da as Fp,Db as Zp,E as Dt,Ea as Lp,Eb as _e,F as Tp,Fa as Up,Fb as Fo,G as Ap,Ga as ut,Gb as eg,H as Kn,Ha as jp,Hb as tg,I as An,Ia as Jr,Ib as Lo,J as _l,Ja as Z,Jb as an,K as Cp,Ka as q,Kb as ng,L as Sp,La as Xr,Lb as ig,M as Rp,Ma as Bp,Mb as Rl,N as xo,Na as No,Nb as rg,O as Po,Oa as Mi,P as xt,Pa as zp,Q as xi,Qa as Ie,R as we,Ra as qp,S as he,Sa as dt,T as Cn,Ta as Sn,U as H,Ua as $p,V as Ce,Va as Gp,W as Dp,Wa as Wp,X as ae,Xa as Ge,Y as yl,Ya as on,Z as U,Za as ue,_ as V,_a as Pt,a as N,aa as ve,ab as j,b as be,ba as nt,bb as L,ca as Se,cb as Re,d as In,da as ge,db as Hp,e as b,ea as Kr,eb as wt,f as Gr,fa as xp,fb as El,g as wp,ga as Qr,gb as Oi,h as fl,ha as Qn,hb as Rn,i as ml,ia as Pi,ib as Kp,j as pl,ja as ct,jb as Tl,k as vt,ka as lt,kb as ee,l as et,la as sn,lb as It,m as En,ma as wl,mb as Et,n as So,na as Il,nb as Tt,o as tt,oa as Yn,ob as At,p as B,pa as Ve,pb as Lt,q as Wn,qa as yt,qb as it,r as Ip,ra as Pp,rb as Qp,s as Ep,sa as ko,sb as Al,t as Q,ta as kp,tb as Oo,u as Wr,ua as Jn,ub as Vo,v as _t,va as Xn,vb as Yp,w as Ro,wa as Yr,wb as Cl,x as gl,xa as ki,xb as Sl,y as Do,ya as Ni,yb as Vi,z as rn,za as Np,zb as Jp}from"./chunk-U7WUZEJ2.js";var xl=class{};var Li=class n{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(t=>{let i=t.indexOf(":");if(i>0){let r=t.slice(0,i),s=r.toLowerCase(),o=t.slice(i+1).trim();this.maybeSetNormalizedName(r,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,i)=>{this.setHeaderEntries(i,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,i])=>{this.setHeaderEntries(t,i)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof n?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){let t=new n;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof n?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){let t=e.name.toLowerCase();switch(e.op){case"a":case"s":let i=e.value;if(typeof i=="string"&&(i=[i]),i.length===0)return;this.maybeSetNormalizedName(e.name,t);let r=(e.op==="a"?this.headers.get(t):void 0)||[];r.push(...i),this.headers.set(t,r);break;case"d":let s=e.value;if(!s)this.headers.delete(t),this.normalizedNames.delete(t);else{let o=this.headers.get(t);if(!o)return;o=o.filter(c=>s.indexOf(c)===-1),o.length===0?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,o)}break}}setHeaderEntries(e,t){let i=(Array.isArray(t)?t:[t]).map(s=>s.toString()),r=e.toLowerCase();this.headers.set(r,i),this.maybeSetNormalizedName(e,r)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}};var Pl=class{encodeKey(e){return sg(e)}encodeValue(e){return sg(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function x0(n,e){let t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(r=>{let s=r.indexOf("="),[o,c]=s==-1?[e.decodeKey(r),""]:[e.decodeKey(r.slice(0,s)),e.decodeValue(r.slice(s+1))],l=t.get(o)||[];l.push(c),t.set(o,l)}),t}var P0=/%(\d[a-f0-9])/gi,k0={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function sg(n){return encodeURIComponent(n).replace(P0,(e,t)=>k0[t]??e)}function Uo(n){return`${n}`}var Dn=class n{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Pl,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=x0(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{let i=e.fromObject[t],r=Array.isArray(i)?i.map(Uo):[Uo(i)];this.map.set(t,r)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){let t=[];return Object.keys(e).forEach(i=>{let r=e[i];Array.isArray(r)?r.forEach(s=>{t.push({param:i,value:s,op:"a"})}):t.push({param:i,value:r,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let t=this.encoder.encodeKey(e);return this.map.get(e).map(i=>t+"="+this.encoder.encodeValue(i)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let t=new n({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let t=(e.op==="a"?this.map.get(e.param):void 0)||[];t.push(Uo(e.value)),this.map.set(e.param,t);break;case"d":if(e.value!==void 0){let i=this.map.get(e.param)||[],r=i.indexOf(Uo(e.value));r!==-1&&i.splice(r,1),i.length>0?this.map.set(e.param,i):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};var kl=class{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}};function N0(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function og(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function ag(n){return typeof Blob<"u"&&n instanceof Blob}function cg(n){return typeof FormData<"u"&&n instanceof FormData}function M0(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}var Zr=class n{constructor(e,t,i,r){this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase();let s;if(N0(this.method)||r?(this.body=i!==void 0?i:null,s=r):s=i,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Li,this.context??=new kl,!this.params)this.params=new Dn,this.urlWithParams=t;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=t;else{let c=t.indexOf("?"),l=c===-1?"?":c<t.length-1?"&":"";this.urlWithParams=t+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||og(this.body)||ag(this.body)||cg(this.body)||M0(this.body)?this.body:this.body instanceof Dn?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||cg(this.body)?null:ag(this.body)?this.body.type||null:og(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Dn?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(e={}){let t=e.method||this.method,i=e.url||this.url,r=e.responseType||this.responseType,s=e.transferCache??this.transferCache,o=e.body!==void 0?e.body:this.body,c=e.withCredentials??this.withCredentials,l=e.reportProgress??this.reportProgress,d=e.headers||this.headers,f=e.params||this.params,p=e.context??this.context;return e.setHeaders!==void 0&&(d=Object.keys(e.setHeaders).reduce((y,S)=>y.set(S,e.setHeaders[S]),d)),e.setParams&&(f=Object.keys(e.setParams).reduce((y,S)=>y.set(S,e.setParams[S]),f)),new n(t,i,o,{params:f,headers:d,context:p,reportProgress:l,responseType:r,withCredentials:c,transferCache:s})}},lg=function(n){return n[n.Sent=0]="Sent",n[n.UploadProgress=1]="UploadProgress",n[n.ResponseHeader=2]="ResponseHeader",n[n.DownloadProgress=3]="DownloadProgress",n[n.Response=4]="Response",n[n.User=5]="User",n}(lg||{}),Nl=class{constructor(e,t=ug.Ok,i="OK"){this.headers=e.headers||new Li,this.status=e.status!==void 0?e.status:t,this.statusText=e.statusText||i,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}};var Ml=class n extends Nl{constructor(e={}){super(e),this.type=lg.Response,this.body=e.body!==void 0?e.body:null}clone(e={}){return new n({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}};var ug=function(n){return n[n.Continue=100]="Continue",n[n.SwitchingProtocols=101]="SwitchingProtocols",n[n.Processing=102]="Processing",n[n.EarlyHints=103]="EarlyHints",n[n.Ok=200]="Ok",n[n.Created=201]="Created",n[n.Accepted=202]="Accepted",n[n.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",n[n.NoContent=204]="NoContent",n[n.ResetContent=205]="ResetContent",n[n.PartialContent=206]="PartialContent",n[n.MultiStatus=207]="MultiStatus",n[n.AlreadyReported=208]="AlreadyReported",n[n.ImUsed=226]="ImUsed",n[n.MultipleChoices=300]="MultipleChoices",n[n.MovedPermanently=301]="MovedPermanently",n[n.Found=302]="Found",n[n.SeeOther=303]="SeeOther",n[n.NotModified=304]="NotModified",n[n.UseProxy=305]="UseProxy",n[n.Unused=306]="Unused",n[n.TemporaryRedirect=307]="TemporaryRedirect",n[n.PermanentRedirect=308]="PermanentRedirect",n[n.BadRequest=400]="BadRequest",n[n.Unauthorized=401]="Unauthorized",n[n.PaymentRequired=402]="PaymentRequired",n[n.Forbidden=403]="Forbidden",n[n.NotFound=404]="NotFound",n[n.MethodNotAllowed=405]="MethodNotAllowed",n[n.NotAcceptable=406]="NotAcceptable",n[n.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",n[n.RequestTimeout=408]="RequestTimeout",n[n.Conflict=409]="Conflict",n[n.Gone=410]="Gone",n[n.LengthRequired=411]="LengthRequired",n[n.PreconditionFailed=412]="PreconditionFailed",n[n.PayloadTooLarge=413]="PayloadTooLarge",n[n.UriTooLong=414]="UriTooLong",n[n.UnsupportedMediaType=415]="UnsupportedMediaType",n[n.RangeNotSatisfiable=416]="RangeNotSatisfiable",n[n.ExpectationFailed=417]="ExpectationFailed",n[n.ImATeapot=418]="ImATeapot",n[n.MisdirectedRequest=421]="MisdirectedRequest",n[n.UnprocessableEntity=422]="UnprocessableEntity",n[n.Locked=423]="Locked",n[n.FailedDependency=424]="FailedDependency",n[n.TooEarly=425]="TooEarly",n[n.UpgradeRequired=426]="UpgradeRequired",n[n.PreconditionRequired=428]="PreconditionRequired",n[n.TooManyRequests=429]="TooManyRequests",n[n.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",n[n.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",n[n.InternalServerError=500]="InternalServerError",n[n.NotImplemented=501]="NotImplemented",n[n.BadGateway=502]="BadGateway",n[n.ServiceUnavailable=503]="ServiceUnavailable",n[n.GatewayTimeout=504]="GatewayTimeout",n[n.HttpVersionNotSupported=505]="HttpVersionNotSupported",n[n.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",n[n.InsufficientStorage=507]="InsufficientStorage",n[n.LoopDetected=508]="LoopDetected",n[n.NotExtended=510]="NotExtended",n[n.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",n}(ug||{});function Dl(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials,transferCache:n.transferCache}}var dg=(()=>{let e=class e{constructor(i){this.handler=i}request(i,r,s={}){let o;if(i instanceof Zr)o=i;else{let d;s.headers instanceof Li?d=s.headers:d=new Li(s.headers);let f;s.params&&(s.params instanceof Dn?f=s.params:f=new Dn({fromObject:s.params})),o=new Zr(i,r,s.body!==void 0?s.body:null,{headers:d,context:s.context,params:f,reportProgress:s.reportProgress,responseType:s.responseType||"json",withCredentials:s.withCredentials,transferCache:s.transferCache})}let c=B(o).pipe(Hn(d=>this.handler.handle(d)));if(i instanceof Zr||s.observe==="events")return c;let l=c.pipe(rn(d=>d instanceof Ml));switch(s.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return l.pipe(Q(d=>{if(d.body!==null&&!(d.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return d.body}));case"blob":return l.pipe(Q(d=>{if(d.body!==null&&!(d.body instanceof Blob))throw new Error("Response is not a Blob.");return d.body}));case"text":return l.pipe(Q(d=>{if(d.body!==null&&typeof d.body!="string")throw new Error("Response is not a string.");return d.body}));case"json":default:return l.pipe(Q(d=>d.body))}case"response":return l;default:throw new Error(`Unreachable: unhandled observe type ${s.observe}}`)}}delete(i,r={}){return this.request("DELETE",i,r)}get(i,r={}){return this.request("GET",i,r)}head(i,r={}){return this.request("HEAD",i,r)}jsonp(i,r){return this.request("JSONP",i,{params:new Dn().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(i,r={}){return this.request("OPTIONS",i,r)}patch(i,r,s={}){return this.request("PATCH",i,Dl(s,r))}post(i,r,s={}){return this.request("POST",i,Dl(s,r))}put(i,r,s={}){return this.request("PUT",i,Dl(s,r))}};e.\u0275fac=function(r){return new(r||e)(U(xl))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})();var Fl=class extends Zp{constructor(){super(...arguments),this.supportsDOMEvents=!0}},Ll=class n extends Fl{static makeCurrent(){Xp(new n)}onAndCancel(e,t,i){return e.addEventListener(t,i),()=>{e.removeEventListener(t,i)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return t=t||this.getDefaultDocument(),t.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return t==="window"?window:t==="document"?e:t==="body"?e.body:null}getBaseHref(e){let t=F0();return t==null?null:L0(t)}resetBaseElement(){es=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return eg(document.cookie,e)}},es=null;function F0(){return es=es||document.querySelector("base"),es?es.getAttribute("href"):null}function L0(n){return new URL(n,document.baseURI).pathname}var U0=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})(),Ul=new ae(""),pg=(()=>{let e=class e{constructor(i,r){this._zone=r,this._eventNameToPlugin=new Map,i.forEach(s=>{s.manager=this}),this._plugins=i.slice().reverse()}addEventListener(i,r,s){return this._findPluginFor(r).addEventListener(i,r,s)}getZone(){return this._zone}_findPluginFor(i){let r=this._eventNameToPlugin.get(i);if(r)return r;if(r=this._plugins.find(o=>o.supports(i)),!r)throw new he(5101,!1);return this._eventNameToPlugin.set(i,r),r}};e.\u0275fac=function(r){return new(r||e)(U(Ul),U(Ie))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})(),jo=class{constructor(e){this._doc=e}},Ol="ng-app-id",gg=(()=>{let e=class e{constructor(i,r,s,o={}){this.doc=i,this.appId=r,this.nonce=s,this.platformId=o,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Rl(o),this.resetHostNodes()}addStyles(i){for(let r of i)this.changeUsageCount(r,1)===1&&this.onStyleAdded(r)}removeStyles(i){for(let r of i)this.changeUsageCount(r,-1)<=0&&this.onStyleRemoved(r)}ngOnDestroy(){let i=this.styleNodesInDOM;i&&(i.forEach(r=>r.remove()),i.clear());for(let r of this.getAllStyles())this.onStyleRemoved(r);this.resetHostNodes()}addHost(i){this.hostNodes.add(i);for(let r of this.getAllStyles())this.addStyleToHost(i,r)}removeHost(i){this.hostNodes.delete(i)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(i){for(let r of this.hostNodes)this.addStyleToHost(r,i)}onStyleRemoved(i){let r=this.styleRef;r.get(i)?.elements?.forEach(s=>s.remove()),r.delete(i)}collectServerRenderedStyles(){let i=this.doc.head?.querySelectorAll(`style[${Ol}="${this.appId}"]`);if(i?.length){let r=new Map;return i.forEach(s=>{s.textContent!=null&&r.set(s.textContent,s)}),r}return null}changeUsageCount(i,r){let s=this.styleRef;if(s.has(i)){let o=s.get(i);return o.usage+=r,o.usage}return s.set(i,{usage:r,elements:[]}),r}getStyleElement(i,r){let s=this.styleNodesInDOM,o=s?.get(r);if(o?.parentNode===i)return s.delete(r),o.removeAttribute(Ol),o;{let c=this.doc.createElement("style");return this.nonce&&c.setAttribute("nonce",this.nonce),c.textContent=r,this.platformIsServer&&c.setAttribute(Ol,this.appId),i.appendChild(c),c}}addStyleToHost(i,r){let s=this.getStyleElement(i,r),o=this.styleRef,c=o.get(r)?.elements;c?c.push(s):o.set(r,{elements:[s],usage:1})}resetHostNodes(){let i=this.hostNodes;i.clear(),i.add(this.doc.head)}};e.\u0275fac=function(r){return new(r||e)(U(_e),U(ko),U(Yr,8),U(Jn))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})(),Vl={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},zl=/%COMP%/g,bg="%COMP%",j0=`_nghost-${bg}`,B0=`_ngcontent-${bg}`,z0=!0,q0=new ae("",{providedIn:"root",factory:()=>z0});function $0(n){return B0.replace(zl,n)}function G0(n){return j0.replace(zl,n)}function vg(n,e){return e.map(t=>t.replace(zl,n))}var Bo=(()=>{let e=class e{constructor(i,r,s,o,c,l,d,f=null){this.eventManager=i,this.sharedStylesHost=r,this.appId=s,this.removeStylesOnCompDestroy=o,this.doc=c,this.platformId=l,this.ngZone=d,this.nonce=f,this.rendererByCompId=new Map,this.platformIsServer=Rl(l),this.defaultRenderer=new ts(i,c,d,this.platformIsServer)}createRenderer(i,r){if(!i||!r)return this.defaultRenderer;this.platformIsServer&&r.encapsulation===Hr.ShadowDom&&(r=be(N({},r),{encapsulation:Hr.Emulated}));let s=this.getOrCreateRenderer(i,r);return s instanceof zo?s.applyToHost(i):s instanceof ns&&s.applyStyles(),s}getOrCreateRenderer(i,r){let s=this.rendererByCompId,o=s.get(r.id);if(!o){let c=this.doc,l=this.ngZone,d=this.eventManager,f=this.sharedStylesHost,p=this.removeStylesOnCompDestroy,y=this.platformIsServer;switch(r.encapsulation){case Hr.Emulated:o=new zo(d,f,r,this.appId,p,c,l,y);break;case Hr.ShadowDom:return new jl(d,f,i,r,c,l,this.nonce,y);default:o=new ns(d,f,r,p,c,l,y);break}s.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(r){return new(r||e)(U(pg),U(gg),U(ko),U(q0),U(_e),U(Jn),U(Ie),U(Yr))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})(),ts=class{constructor(e,t,i,r){this.eventManager=e,this.doc=t,this.ngZone=i,this.platformIsServer=r,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,t){return t?this.doc.createElementNS(Vl[t]||t,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,t){(hg(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(hg(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i=typeof e=="string"?this.doc.querySelector(e):e;if(!i)throw new he(-5104,!1);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,r){if(r){t=r+":"+t;let s=Vl[r];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){let r=Vl[i];r?e.removeAttributeNS(r,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,r){r&(Jr.DashCase|Jr.Important)?e.style.setProperty(t,i,r&Jr.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&Jr.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e!=null&&(e[t]=i)}setValue(e,t){e.nodeValue=t}listen(e,t,i){if(typeof e=="string"&&(e=Fi().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${t}`);return this.eventManager.addEventListener(e,t,this.decoratePreventDefault(i))}decoratePreventDefault(e){return t=>{if(t==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(t)):e(t))===!1&&t.preventDefault()}}};function hg(n){return n.tagName==="TEMPLATE"&&n.content!==void 0}var jl=class extends ts{constructor(e,t,i,r,s,o,c,l){super(e,s,o,l),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let d=vg(r.id,r.styles);for(let f of d){let p=document.createElement("style");c&&p.setAttribute("nonce",c),p.textContent=f,this.shadowRoot.appendChild(p)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},ns=class extends ts{constructor(e,t,i,r,s,o,c,l){super(e,s,o,c),this.sharedStylesHost=t,this.removeStylesOnCompDestroy=r,this.styles=l?vg(l,i.styles):i.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},zo=class extends ns{constructor(e,t,i,r,s,o,c,l){let d=r+"-"+i.id;super(e,t,i,s,o,c,l,d),this.contentAttr=$0(d),this.hostAttr=G0(d)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){let i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}},W0=(()=>{let e=class e extends jo{constructor(i){super(i)}supports(i){return!0}addEventListener(i,r,s){return i.addEventListener(r,s,!1),()=>this.removeEventListener(i,r,s)}removeEventListener(i,r,s){return i.removeEventListener(r,s)}};e.\u0275fac=function(r){return new(r||e)(U(_e))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})(),fg=["alt","control","meta","shift"],H0={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},K0={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey},Q0=(()=>{let e=class e extends jo{constructor(i){super(i)}supports(i){return e.parseEventName(i)!=null}addEventListener(i,r,s){let o=e.parseEventName(r),c=e.eventCallback(o.fullKey,s,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Fi().onAndCancel(i,o.domEventName,c))}static parseEventName(i){let r=i.toLowerCase().split("."),s=r.shift();if(r.length===0||!(s==="keydown"||s==="keyup"))return null;let o=e._normalizeKey(r.pop()),c="",l=r.indexOf("code");if(l>-1&&(r.splice(l,1),c="code."),fg.forEach(f=>{let p=r.indexOf(f);p>-1&&(r.splice(p,1),c+=f+".")}),c+=o,r.length!=0||o.length===0)return null;let d={};return d.domEventName=s,d.fullKey=c,d}static matchEventFullKeyCode(i,r){let s=H0[i.key]||i.key,o="";return r.indexOf("code.")>-1&&(s=i.code,o="code."),s==null||!s?!1:(s=s.toLowerCase(),s===" "?s="space":s==="."&&(s="dot"),fg.forEach(c=>{if(c!==s){let l=K0[c];l(i)&&(o+=c+".")}}),o+=s,o===r)}static eventCallback(i,r,s){return o=>{e.matchEventFullKeyCode(o,i)&&s.runGuarded(()=>r(o))}}static _normalizeKey(i){return i==="esc"?"escape":i}};e.\u0275fac=function(r){return new(r||e)(U(_e))},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})();function _g(n,e){return Jp(N({rootComponent:n},Y0(e)))}function Y0(n){return{appProviders:[...tI,...n?.providers??[]],platformProviders:eI}}function J0(){Ll.makeCurrent()}function X0(){return new Yn}function Z0(){return Pp(document),document}var eI=[{provide:Jn,useValue:ng},{provide:kp,useValue:J0,multi:!0},{provide:_e,useFactory:Z0,deps:[]}];var tI=[{provide:xp,useValue:"root"},{provide:Yn,useFactory:X0,deps:[]},{provide:Ul,useClass:W0,multi:!0,deps:[_e,Ie,Jn]},{provide:Ul,useClass:Q0,multi:!0,deps:[_e]},Bo,gg,pg,{provide:No,useExisting:Bo},{provide:rg,useClass:U0,deps:[]},[]];var yg=(()=>{let e=class e{constructor(i){this._doc=i}getTitle(){return this._doc.title}setTitle(i){this._doc.title=i||""}};e.\u0275fac=function(r){return new(r||e)(U(_e))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ql=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:function(r){let s=null;return r?s=new(r||e):s=U(nI),s},providedIn:"root"});let n=e;return n})(),nI=(()=>{let e=class e extends ql{constructor(i){super(),this._doc=i}sanitize(i,r){if(r==null)return null;switch(i){case ut.NONE:return r;case ut.HTML:return Ni(r,"HTML")?ki(r):Up(this._doc,String(r)).toString();case ut.STYLE:return Ni(r,"Style")?ki(r):r;case ut.SCRIPT:if(Ni(r,"Script"))return ki(r);throw new he(5200,!1);case ut.URL:return Ni(r,"URL")?ki(r):Lp(String(r));case ut.RESOURCE_URL:if(Ni(r,"ResourceURL"))return ki(r);throw new he(5201,!1);default:throw new he(5202,!1)}}bypassSecurityTrustHtml(i){return Np(i)}bypassSecurityTrustStyle(i){return Mp(i)}bypassSecurityTrustScript(i){return Op(i)}bypassSecurityTrustUrl(i){return Vp(i)}bypassSecurityTrustResourceUrl(i){return Fp(i)}};e.\u0275fac=function(r){return new(r||e)(U(_e))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var J="primary",bs=Symbol("RouteTitle"),Kl=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function qi(n){return new Kl(n)}function oI(n,e,t){let i=t.path.split("/");if(i.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||i.length<n.length))return null;let r={};for(let s=0;s<i.length;s++){let o=i[s],c=n[s];if(o.startsWith(":"))r[o.substring(1)]=c;else if(o!==c.path)return null}return{consumed:n.slice(0,i.length),posParams:r}}function aI(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ut(n[t],e[t]))return!1;return!0}function Ut(n,e){let t=n?Ql(n):void 0,i=e?Ql(e):void 0;if(!t||!i||t.length!=i.length)return!1;let r;for(let s=0;s<t.length;s++)if(r=t[s],!Sg(n[r],e[r]))return!1;return!0}function Ql(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function Sg(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),i=[...e].sort();return t.every((r,s)=>i[s]===r)}else return n===e}function Rg(n){return n.length>0?n[n.length-1]:null}function kn(n){return Ip(n)?n:Vo(n)?tt(Promise.resolve(n)):B(n)}var cI={exact:xg,subset:Pg},Dg={exact:lI,subset:uI,ignored:()=>!0};function Ig(n,e,t){return cI[t.paths](n.root,e.root,t.matrixParams)&&Dg[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function lI(n,e){return Ut(n,e)}function xg(n,e,t){if(!ei(n.segments,e.segments)||!Go(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let i in e.children)if(!n.children[i]||!xg(n.children[i],e.children[i],t))return!1;return!0}function uI(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Sg(n[t],e[t]))}function Pg(n,e,t){return kg(n,e,e.segments,t)}function kg(n,e,t,i){if(n.segments.length>t.length){let r=n.segments.slice(0,t.length);return!(!ei(r,t)||e.hasChildren()||!Go(r,t,i))}else if(n.segments.length===t.length){if(!ei(n.segments,t)||!Go(n.segments,t,i))return!1;for(let r in e.children)if(!n.children[r]||!Pg(n.children[r],e.children[r],i))return!1;return!0}else{let r=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!ei(n.segments,r)||!Go(n.segments,r,i)||!n.children[J]?!1:kg(n.children[J],e,s,i)}}function Go(n,e,t){return e.every((i,r)=>Dg[t](n[r].parameters,i.parameters))}var xn=class{constructor(e=new ce([],{}),t={},i=null){this.root=e,this.queryParams=t,this.fragment=i}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){return fI.serialize(this)}},ce=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(i=>i.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Wo(this)}},Zn=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=qi(this.parameters),this._parameterMap}toString(){return Mg(this)}};function dI(n,e){return ei(n,e)&&n.every((t,i)=>Ut(t.parameters,e[i].parameters))}function ei(n,e){return n.length!==e.length?!1:n.every((t,i)=>t.path===e[i].path)}function hI(n,e){let t=[];return Object.entries(n.children).forEach(([i,r])=>{i===J&&(t=t.concat(e(r,i)))}),Object.entries(n.children).forEach(([i,r])=>{i!==J&&(t=t.concat(e(r,i)))}),t}var wu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>new Ko,providedIn:"root"});let n=e;return n})(),Ko=class{parse(e){let t=new Jl(e);return new xn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${is(e.root,!0)}`,i=gI(e.queryParams),r=typeof e.fragment=="string"?`#${mI(e.fragment)}`:"";return`${t}${i}${r}`}},fI=new Ko;function Wo(n){return n.segments.map(e=>Mg(e)).join("/")}function is(n,e){if(!n.hasChildren())return Wo(n);if(e){let t=n.children[J]?is(n.children[J],!1):"",i=[];return Object.entries(n.children).forEach(([r,s])=>{r!==J&&i.push(`${r}:${is(s,!1)}`)}),i.length>0?`${t}(${i.join("//")})`:t}else{let t=hI(n,(i,r)=>r===J?[is(n.children[J],!1)]:[`${r}:${is(i,!1)}`]);return Object.keys(n.children).length===1&&n.children[J]!=null?`${Wo(n)}/${t[0]}`:`${Wo(n)}/(${t.join("//")})`}}function Ng(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qo(n){return Ng(n).replace(/%3B/gi,";")}function mI(n){return encodeURI(n)}function Yl(n){return Ng(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Ho(n){return decodeURIComponent(n)}function Eg(n){return Ho(n.replace(/\+/g,"%20"))}function Mg(n){return`${Yl(n.path)}${pI(n.parameters)}`}function pI(n){return Object.entries(n).map(([e,t])=>`;${Yl(e)}=${Yl(t)}`).join("")}function gI(n){let e=Object.entries(n).map(([t,i])=>Array.isArray(i)?i.map(r=>`${qo(t)}=${qo(r)}`).join("&"):`${qo(t)}=${qo(i)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var bI=/^[^\/()?;#]+/;function $l(n){let e=n.match(bI);return e?e[0]:""}var vI=/^[^\/()?;=#]+/;function _I(n){let e=n.match(vI);return e?e[0]:""}var yI=/^[^=?&#]+/;function wI(n){let e=n.match(yI);return e?e[0]:""}var II=/^[^&#]+/;function EI(n){let e=n.match(II);return e?e[0]:""}var Jl=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ce([],{}):new ce([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let i={};return this.peekStartsWith("(")&&(i=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(i[J]=new ce(e,t)),i}parseSegment(){let e=$l(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new he(4009,!1);return this.capture(e),new Zn(Ho(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=_I(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let r=$l(this.remaining);r&&(i=r,this.capture(i))}e[Ho(t)]=Ho(i)}parseQueryParam(e){let t=wI(this.remaining);if(!t)return;this.capture(t);let i="";if(this.consumeOptional("=")){let o=EI(this.remaining);o&&(i=o,this.capture(i))}let r=Eg(t),s=Eg(i);if(e.hasOwnProperty(r)){let o=e[r];Array.isArray(o)||(o=[o],e[r]=o),o.push(s)}else e[r]=s}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let i=$l(this.remaining),r=this.remaining[i.length];if(r!=="/"&&r!==")"&&r!==";")throw new he(4010,!1);let s;i.indexOf(":")>-1?(s=i.slice(0,i.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=J);let o=this.parseChildren();t[s]=Object.keys(o).length===1?o[J]:new ce([],o),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new he(4011,!1)}};function Og(n){return n.segments.length>0?new ce([],{[J]:n}):n}function Vg(n){let e={};for(let[i,r]of Object.entries(n.children)){let s=Vg(r);if(i===J&&s.segments.length===0&&s.hasChildren())for(let[o,c]of Object.entries(s.children))e[o]=c;else(s.segments.length>0||s.hasChildren())&&(e[i]=s)}let t=new ce(n.segments,e);return TI(t)}function TI(n){if(n.numberOfChildren===1&&n.children[J]){let e=n.children[J];return new ce(n.segments.concat(e.segments),e.children)}return n}function $i(n){return n instanceof xn}function AI(n,e,t=null,i=null){let r=Fg(n);return Lg(r,e,t,i)}function Fg(n){let e;function t(s){let o={};for(let l of s.children){let d=t(l);o[l.outlet]=d}let c=new ce(s.url,o);return s===n&&(e=c),c}let i=t(n.root),r=Og(i);return e??r}function Lg(n,e,t,i){let r=n;for(;r.parent;)r=r.parent;if(e.length===0)return Gl(r,r,r,t,i);let s=CI(e);if(s.toRoot())return Gl(r,r,new ce([],{}),t,i);let o=SI(s,r,n),c=o.processChildren?os(o.segmentGroup,o.index,s.commands):jg(o.segmentGroup,o.index,s.commands);return Gl(r,o.segmentGroup,c,t,i)}function Qo(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function ls(n){return typeof n=="object"&&n!=null&&n.outlets}function Gl(n,e,t,i,r){let s={};i&&Object.entries(i).forEach(([l,d])=>{s[l]=Array.isArray(d)?d.map(f=>`${f}`):`${d}`});let o;n===e?o=t:o=Ug(n,e,t);let c=Og(Vg(o));return new xn(c,s,r)}function Ug(n,e,t){let i={};return Object.entries(n.children).forEach(([r,s])=>{s===e?i[r]=t:i[r]=Ug(s,e,t)}),new ce(n.segments,i)}var Yo=class{constructor(e,t,i){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=i,e&&i.length>0&&Qo(i[0]))throw new he(4003,!1);let r=i.find(ls);if(r&&r!==Rg(i))throw new he(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function CI(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Yo(!0,0,n);let e=0,t=!1,i=n.reduce((r,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let c={};return Object.entries(s.outlets).forEach(([l,d])=>{c[l]=typeof d=="string"?d.split("/"):d}),[...r,{outlets:c}]}if(s.segmentPath)return[...r,s.segmentPath]}return typeof s!="string"?[...r,s]:o===0?(s.split("/").forEach((c,l)=>{l==0&&c==="."||(l==0&&c===""?t=!0:c===".."?e++:c!=""&&r.push(c))}),r):[...r,s]},[]);return new Yo(t,e,i)}var Bi=class{constructor(e,t,i){this.segmentGroup=e,this.processChildren=t,this.index=i}};function SI(n,e,t){if(n.isAbsolute)return new Bi(e,!0,0);if(!t)return new Bi(e,!1,NaN);if(t.parent===null)return new Bi(t,!0,0);let i=Qo(n.commands[0])?0:1,r=t.segments.length-1+i;return RI(t,r,n.numberOfDoubleDots)}function RI(n,e,t){let i=n,r=e,s=t;for(;s>r;){if(s-=r,i=i.parent,!i)throw new he(4005,!1);r=i.segments.length}return new Bi(i,!1,r-s)}function DI(n){return ls(n[0])?n[0].outlets:{[J]:n}}function jg(n,e,t){if(n??=new ce([],{}),n.segments.length===0&&n.hasChildren())return os(n,e,t);let i=xI(n,e,t),r=t.slice(i.commandIndex);if(i.match&&i.pathIndex<n.segments.length){let s=new ce(n.segments.slice(0,i.pathIndex),{});return s.children[J]=new ce(n.segments.slice(i.pathIndex),n.children),os(s,0,r)}else return i.match&&r.length===0?new ce(n.segments,{}):i.match&&!n.hasChildren()?Xl(n,e,t):i.match?os(n,0,r):Xl(n,e,t)}function os(n,e,t){if(t.length===0)return new ce(n.segments,{});{let i=DI(t),r={};if(Object.keys(i).some(s=>s!==J)&&n.children[J]&&n.numberOfChildren===1&&n.children[J].segments.length===0){let s=os(n.children[J],e,t);return new ce(n.segments,s.children)}return Object.entries(i).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(r[s]=jg(n.children[s],e,o))}),Object.entries(n.children).forEach(([s,o])=>{i[s]===void 0&&(r[s]=o)}),new ce(n.segments,r)}}function xI(n,e,t){let i=0,r=e,s={match:!1,pathIndex:0,commandIndex:0};for(;r<n.segments.length;){if(i>=t.length)return s;let o=n.segments[r],c=t[i];if(ls(c))break;let l=`${c}`,d=i<t.length-1?t[i+1]:null;if(r>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!Ag(l,d,o))return s;i+=2}else{if(!Ag(l,{},o))return s;i++}r++}return{match:!0,pathIndex:r,commandIndex:i}}function Xl(n,e,t){let i=n.segments.slice(0,e),r=0;for(;r<t.length;){let s=t[r];if(ls(s)){let l=PI(s.outlets);return new ce(i,l)}if(r===0&&Qo(t[0])){let l=n.segments[e];i.push(new Zn(l.path,Tg(t[0]))),r++;continue}let o=ls(s)?s.outlets[J]:`${s}`,c=r<t.length-1?t[r+1]:null;o&&c&&Qo(c)?(i.push(new Zn(o,Tg(c))),r+=2):(i.push(new Zn(o,{})),r++)}return new ce(i,{})}function PI(n){let e={};return Object.entries(n).forEach(([t,i])=>{typeof i=="string"&&(i=[i]),i!==null&&(e[t]=Xl(new ce([],{}),0,i))}),e}function Tg(n){let e={};return Object.entries(n).forEach(([t,i])=>e[t]=`${i}`),e}function Ag(n,e,t){return n==t.path&&Ut(e,t.parameters)}var as="imperative",Fe=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(Fe||{}),Ct=class{constructor(e,t){this.id=e,this.url=t}},us=class extends Ct{constructor(e,t,i="imperative",r=null){super(e,t),this.type=Fe.NavigationStart,this.navigationTrigger=i,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},ti=class extends Ct{constructor(e,t,i){super(e,t),this.urlAfterRedirects=i,this.type=Fe.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},ft=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(ft||{}),Zl=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Zl||{}),Pn=class extends Ct{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Fe.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},ni=class extends Ct{constructor(e,t,i,r){super(e,t),this.reason=i,this.code=r,this.type=Fe.NavigationSkipped}},ds=class extends Ct{constructor(e,t,i,r){super(e,t),this.error=i,this.target=r,this.type=Fe.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Jo=class extends Ct{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Fe.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},eu=class extends Ct{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Fe.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},tu=class extends Ct{constructor(e,t,i,r,s){super(e,t),this.urlAfterRedirects=i,this.state=r,this.shouldActivate=s,this.type=Fe.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},nu=class extends Ct{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Fe.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},iu=class extends Ct{constructor(e,t,i,r){super(e,t),this.urlAfterRedirects=i,this.state=r,this.type=Fe.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ru=class{constructor(e){this.route=e,this.type=Fe.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},su=class{constructor(e){this.route=e,this.type=Fe.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},ou=class{constructor(e){this.snapshot=e,this.type=Fe.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},au=class{constructor(e){this.snapshot=e,this.type=Fe.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},cu=class{constructor(e){this.snapshot=e,this.type=Fe.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},lu=class{constructor(e){this.snapshot=e,this.type=Fe.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var hs=class{},fs=class{constructor(e){this.url=e}};var uu=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new ia,this.attachRef=null}},ia=(()=>{let e=class e{constructor(){this.contexts=new Map}onChildOutletCreated(i,r){let s=this.getOrCreateContext(i);s.outlet=r,this.contexts.set(i,s)}onChildOutletDestroyed(i){let r=this.getContext(i);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let i=this.contexts;return this.contexts=new Map,i}onOutletReAttached(i){this.contexts=i}getOrCreateContext(i){let r=this.getContext(i);return r||(r=new uu,this.contexts.set(i,r)),r}getContext(i){return this.contexts.get(i)||null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Xo=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=du(e,this._root);return t?t.children.map(i=>i.value):[]}firstChild(e){let t=du(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=hu(e,this._root);return t.length<2?[]:t[t.length-2].children.map(r=>r.value).filter(r=>r!==e)}pathFromRoot(e){return hu(e,this._root).map(t=>t.value)}};function du(n,e){if(n===e.value)return e;for(let t of e.children){let i=du(n,t);if(i)return i}return null}function hu(n,e){if(n===e.value)return[e];for(let t of e.children){let i=hu(n,t);if(i.length)return i.unshift(e),i}return[]}var ht=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function ji(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var Zo=class extends Xo{constructor(e,t){super(e),this.snapshot=t,Eu(this,e)}toString(){return this.snapshot.toString()}};function Bg(n){let e=kI(n),t=new et([new Zn("",{})]),i=new et({}),r=new et({}),s=new et({}),o=new et(""),c=new Gi(t,i,s,o,r,J,n,e.root);return c.snapshot=e.root,new Zo(new ht(c,[]),e)}function kI(n){let e={},t={},i={},r="",s=new ms([],e,i,r,t,J,n,null,{});return new ea("",new ht(s,[]))}var Gi=class{constructor(e,t,i,r,s,o,c,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=i,this.fragmentSubject=r,this.dataSubject=s,this.outlet=o,this.component=c,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(Q(d=>d[bs]))??B(void 0),this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Q(e=>qi(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Q(e=>qi(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Iu(n,e,t="emptyOnly"){let i,{routeConfig:r}=n;return e!==null&&(t==="always"||r?.path===""||!e.component&&!e.routeConfig?.loadComponent)?i={params:N(N({},e.params),n.params),data:N(N({},e.data),n.data),resolve:N(N(N(N({},n.data),e.data),r?.data),n._resolvedData)}:i={params:N({},n.params),data:N({},n.data),resolve:N(N({},n.data),n._resolvedData??{})},r&&qg(r)&&(i.resolve[bs]=r.title),i}var ms=class{get title(){return this.data?.[bs]}constructor(e,t,i,r,s,o,c,l,d){this.url=e,this.params=t,this.queryParams=i,this.fragment=r,this.data=s,this.outlet=o,this.component=c,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=qi(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=qi(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(i=>i.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},ea=class extends Xo{constructor(e,t){super(t),this.url=e,Eu(this,t)}toString(){return zg(this._root)}};function Eu(n,e){e.value._routerState=n,e.children.forEach(t=>Eu(n,t))}function zg(n){let e=n.children.length>0?` { ${n.children.map(zg).join(", ")} } `:"";return`${n.value}${e}`}function Wl(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ut(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ut(e.params,t.params)||n.paramsSubject.next(t.params),aI(e.url,t.url)||n.urlSubject.next(t.url),Ut(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function fu(n,e){let t=Ut(n.params,e.params)&&dI(n.url,e.url),i=!n.parent!=!e.parent;return t&&!i&&(!n.parent||fu(n.parent,e.parent))}function qg(n){return typeof n.title=="string"||n.title===null}var Tu=(()=>{let e=class e{constructor(){this.activated=null,this._activatedRoute=null,this.name=J,this.activateEvents=new yt,this.deactivateEvents=new yt,this.attachEvents=new yt,this.detachEvents=new yt,this.parentContexts=V(ia),this.location=V(qp),this.changeDetector=V(Vi),this.environmentInjector=V(Qr),this.inputBinder=V(Au,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(i){if(i.name){let{firstChange:r,previousValue:s}=i.name;if(r)return;this.isTrackedInParentContexts(s)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(s)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(i){return this.parentContexts.getContext(i)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let i=this.parentContexts.getContext(this.name);i?.route&&(i.attachRef?this.attach(i.attachRef,i.route):this.activateWith(i.route,i.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new he(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new he(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new he(4012,!1);this.location.detach();let i=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(i.instance),i}attach(i,r){this.activated=i,this._activatedRoute=r,this.location.insert(i.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(i.instance)}deactivate(){if(this.activated){let i=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(i)}}activateWith(i,r){if(this.isActivated)throw new he(4013,!1);this._activatedRoute=i;let s=this.location,c=i.snapshot.component,l=this.parentContexts.getOrCreateContext(this.name).children,d=new mu(i,l,s.injector);this.activated=s.createComponent(c,{index:s.length,injector:d,environmentInjector:r??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ge({type:e,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Pi]});let n=e;return n})(),mu=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,i){this.route=e,this.childContexts=t,this.parent=i}get(e,t){return e===Gi?this.route:e===ia?this.childContexts:this.parent.get(e,t)}},Au=new ae("");function NI(n,e,t){let i=ps(n,e._root,t?t._root:void 0);return new Zo(i,e)}function ps(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let i=t.value;i._futureSnapshot=e.value;let r=MI(n,e,t);return new ht(i,r)}else{if(n.shouldAttach(e.value)){let s=n.retrieve(e.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=e.value,o.children=e.children.map(c=>ps(n,c)),o}}let i=OI(e.value),r=e.children.map(s=>ps(n,s));return new ht(i,r)}}function MI(n,e,t){return e.children.map(i=>{for(let r of t.children)if(n.shouldReuseRoute(i.value,r.value.snapshot))return ps(n,i,r);return ps(n,i)})}function OI(n){return new Gi(new et(n.url),new et(n.params),new et(n.queryParams),new et(n.fragment),new et(n.data),n.outlet,n.component,n)}var $g="ngNavigationCancelingError";function Gg(n,e){let{redirectTo:t,navigationBehaviorOptions:i}=$i(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,r=Wg(!1,ft.Redirect);return r.url=t,r.navigationBehaviorOptions=i,r}function Wg(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[$g]=!0,t.cancellationCode=e,t}function VI(n){return Hg(n)&&$i(n.url)}function Hg(n){return!!n&&n[$g]}var FI=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=nt({type:e,selectors:[["ng-component"]],standalone:!0,features:[it],decls:1,vars:0,template:function(r,s){r&1&&Re(0,"router-outlet")},dependencies:[Tu],encapsulation:2});let n=e;return n})();function LI(n,e){return n.providers&&!n._injector&&(n._injector=Gp(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Cu(n){let e=n.children&&n.children.map(Cu),t=e?be(N({},n),{children:e}):N({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==J&&(t.component=FI),t}function jt(n){return n.outlet||J}function UI(n,e){let t=n.filter(i=>jt(i)===e);return t.push(...n.filter(i=>jt(i)!==e)),t}function vs(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var jI=(n,e,t,i)=>Q(r=>(new pu(e,r.targetRouterState,r.currentRouterState,t,i).activate(n),r)),pu=class{constructor(e,t,i,r,s){this.routeReuseStrategy=e,this.futureState=t,this.currState=i,this.forwardEvent=r,this.inputBindingEnabled=s}activate(e){let t=this.futureState._root,i=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,i,e),Wl(this.futureState.root),this.activateChildRoutes(t,i,e)}deactivateChildRoutes(e,t,i){let r=ji(t);e.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,r[o],i),delete r[o]}),Object.values(r).forEach(s=>{this.deactivateRouteAndItsChildren(s,i)})}deactivateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(r===s)if(r.component){let o=i.getContext(r.outlet);o&&this.deactivateChildRoutes(e,t,o.children)}else this.deactivateChildRoutes(e,t,i);else s&&this.deactivateRouteAndItsChildren(t,i)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ji(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);if(i&&i.outlet){let o=i.outlet.detach(),c=i.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:o,route:e,contexts:c})}}deactivateRouteAndOutlet(e,t){let i=t.getContext(e.value.outlet),r=i&&e.value.component?i.children:t,s=ji(e);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,r);i&&(i.outlet&&(i.outlet.deactivate(),i.children.onOutletDeactivated()),i.attachRef=null,i.route=null)}activateChildRoutes(e,t,i){let r=ji(t);e.children.forEach(s=>{this.activateRoutes(s,r[s.value.outlet],i),this.forwardEvent(new lu(s.value.snapshot))}),e.children.length&&this.forwardEvent(new au(e.value.snapshot))}activateRoutes(e,t,i){let r=e.value,s=t?t.value:null;if(Wl(r),r===s)if(r.component){let o=i.getOrCreateContext(r.outlet);this.activateChildRoutes(e,t,o.children)}else this.activateChildRoutes(e,t,i);else if(r.component){let o=i.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){let c=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),o.children.onOutletReAttached(c.contexts),o.attachRef=c.componentRef,o.route=c.route.value,o.outlet&&o.outlet.attach(c.componentRef,c.route.value),Wl(c.route.value),this.activateChildRoutes(e,null,o.children)}else{let c=vs(r.snapshot);o.attachRef=null,o.route=r,o.injector=c,o.outlet&&o.outlet.activateWith(r,o.injector),this.activateChildRoutes(e,null,o.children)}}else this.activateChildRoutes(e,null,i)}},ta=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},zi=class{constructor(e,t){this.component=e,this.route=t}};function BI(n,e,t){let i=n._root,r=e?e._root:null;return rs(i,r,t,[i.value])}function zI(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Hi(n,e){let t=Symbol(),i=e.get(n,t);return i===t?typeof n=="function"&&!Dp(n)?n:e.get(n):i}function rs(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=ji(e);return n.children.forEach(o=>{qI(o,s[o.value.outlet],t,i.concat([o.value]),r),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,c])=>cs(c,t.getContext(o),r)),r}function qI(n,e,t,i,r={canDeactivateChecks:[],canActivateChecks:[]}){let s=n.value,o=e?e.value:null,c=t?t.getContext(n.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=$I(o,s,s.routeConfig.runGuardsAndResolvers);l?r.canActivateChecks.push(new ta(i)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?rs(n,e,c?c.children:null,i,r):rs(n,e,t,i,r),l&&c&&c.outlet&&c.outlet.isActivated&&r.canDeactivateChecks.push(new zi(c.outlet.component,o))}else o&&cs(e,c,r),r.canActivateChecks.push(new ta(i)),s.component?rs(n,null,c?c.children:null,i,r):rs(n,null,t,i,r);return r}function $I(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!ei(n.url,e.url);case"pathParamsOrQueryParamsChange":return!ei(n.url,e.url)||!Ut(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fu(n,e)||!Ut(n.queryParams,e.queryParams);case"paramsChange":default:return!fu(n,e)}}function cs(n,e,t){let i=ji(n),r=n.value;Object.entries(i).forEach(([s,o])=>{r.component?e?cs(o,e.children.getContext(s),t):cs(o,null,t):cs(o,e,t)}),r.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new zi(e.outlet.component,r)):t.canDeactivateChecks.push(new zi(null,r)):t.canDeactivateChecks.push(new zi(null,r))}function _s(n){return typeof n=="function"}function GI(n){return typeof n=="boolean"}function WI(n){return n&&_s(n.canLoad)}function HI(n){return n&&_s(n.canActivate)}function KI(n){return n&&_s(n.canActivateChild)}function QI(n){return n&&_s(n.canDeactivate)}function YI(n){return n&&_s(n.canMatch)}function Kg(n){return n instanceof Ep||n?.name==="EmptyError"}var $o=Symbol("INITIAL_VALUE");function Wi(){return xt(n=>Wr(n.map(e=>e.pipe(Dt(1),Po($o)))).pipe(Q(e=>{for(let t of e)if(t!==!0){if(t===$o)return $o;if(t===!1||t instanceof xn)return t}return!0}),rn(e=>e!==$o),Dt(1)))}function JI(n,e){return _t(t=>{let{targetSnapshot:i,currentSnapshot:r,guards:{canActivateChecks:s,canDeactivateChecks:o}}=t;return o.length===0&&s.length===0?B(be(N({},t),{guardsResult:!0})):XI(o,i,r,n).pipe(_t(c=>c&&GI(c)?ZI(i,s,n,e):B(c)),Q(c=>be(N({},t),{guardsResult:c})))})}function XI(n,e,t,i){return tt(n).pipe(_t(r=>rE(r.component,r.route,t,e,i)),An(r=>r!==!0,!0))}function ZI(n,e,t,i){return tt(e).pipe(Hn(r=>Ro(tE(r.route.parent,i),eE(r.route,i),iE(n,r.path,t),nE(n,r.route,t))),An(r=>r!==!0,!0))}function eE(n,e){return n!==null&&e&&e(new cu(n)),B(!0)}function tE(n,e){return n!==null&&e&&e(new ou(n)),B(!0)}function nE(n,e,t){let i=e.routeConfig?e.routeConfig.canActivate:null;if(!i||i.length===0)return B(!0);let r=i.map(s=>gl(()=>{let o=vs(e)??t,c=Hi(s,o),l=HI(c)?c.canActivate(e,n):Qn(o,()=>c(e,n));return kn(l).pipe(An())}));return B(r).pipe(Wi())}function iE(n,e,t){let i=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(o=>zI(o)).filter(o=>o!==null).map(o=>gl(()=>{let c=o.guards.map(l=>{let d=vs(o.node)??t,f=Hi(l,d),p=KI(f)?f.canActivateChild(i,n):Qn(d,()=>f(i,n));return kn(p).pipe(An())});return B(c).pipe(Wi())}));return B(s).pipe(Wi())}function rE(n,e,t,i,r){let s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!s||s.length===0)return B(!0);let o=s.map(c=>{let l=vs(e)??r,d=Hi(c,l),f=QI(d)?d.canDeactivate(n,e,t,i):Qn(l,()=>d(n,e,t,i));return kn(f).pipe(An())});return B(o).pipe(Wi())}function sE(n,e,t,i){let r=e.canLoad;if(r===void 0||r.length===0)return B(!0);let s=r.map(o=>{let c=Hi(o,n),l=WI(c)?c.canLoad(e,t):Qn(n,()=>c(e,t));return kn(l)});return B(s).pipe(Wi(),Qg(i))}function Qg(n){return wp(we(e=>{if($i(e))throw Gg(n,e)}),Q(e=>e===!0))}function oE(n,e,t,i){let r=e.canMatch;if(!r||r.length===0)return B(!0);let s=r.map(o=>{let c=Hi(o,n),l=YI(c)?c.canMatch(e,t):Qn(n,()=>c(e,t));return kn(l)});return B(s).pipe(Wi(),Qg(i))}var gs=class{constructor(e){this.segmentGroup=e||null}},na=class extends Error{constructor(e){super(),this.urlTree=e}};function Ui(n){return Wn(new gs(n))}function aE(n){return Wn(new he(4e3,!1))}function cE(n){return Wn(Wg(!1,ft.GuardRejected))}var gu=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let i=[],r=t.root;for(;;){if(i=i.concat(r.segments),r.numberOfChildren===0)return B(i);if(r.numberOfChildren>1||!r.children[J])return aE(e.redirectTo);r=r.children[J]}}applyRedirectCommands(e,t,i){let r=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,i);if(t.startsWith("/"))throw new na(r);return r}applyRedirectCreateUrlTree(e,t,i,r){let s=this.createSegmentGroup(e,t.root,i,r);return new xn(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let i={};return Object.entries(e).forEach(([r,s])=>{if(typeof s=="string"&&s.startsWith(":")){let c=s.substring(1);i[r]=t[c]}else i[r]=s}),i}createSegmentGroup(e,t,i,r){let s=this.createSegments(e,t.segments,i,r),o={};return Object.entries(t.children).forEach(([c,l])=>{o[c]=this.createSegmentGroup(e,l,i,r)}),new ce(s,o)}createSegments(e,t,i,r){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,r):this.findOrReturn(s,i))}findPosParam(e,t,i){let r=i[t.path.substring(1)];if(!r)throw new he(4001,!1);return r}findOrReturn(e,t){let i=0;for(let r of t){if(r.path===e.path)return t.splice(i),r;i++}return e}},bu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function lE(n,e,t,i,r){let s=Su(n,e,t);return s.matched?(i=LI(e,i),oE(i,e,t,r).pipe(Q(o=>o===!0?s:N({},bu)))):B(s)}function Su(n,e,t){if(e.path==="**")return uE(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?N({},bu):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let r=(e.matcher||oI)(t,n,e);if(!r)return N({},bu);let s={};Object.entries(r.posParams??{}).forEach(([c,l])=>{s[c]=l.path});let o=r.consumed.length>0?N(N({},s),r.consumed[r.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:r.consumed,remainingSegments:t.slice(r.consumed.length),parameters:o,positionalParamSegments:r.posParams??{}}}function uE(n){return{matched:!0,parameters:n.length>0?Rg(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function Cg(n,e,t,i){return t.length>0&&fE(n,t,i)?{segmentGroup:new ce(e,hE(i,new ce(t,n.children))),slicedSegments:[]}:t.length===0&&mE(n,t,i)?{segmentGroup:new ce(n.segments,dE(n,t,i,n.children)),slicedSegments:t}:{segmentGroup:new ce(n.segments,n.children),slicedSegments:t}}function dE(n,e,t,i){let r={};for(let s of t)if(ra(n,e,s)&&!i[jt(s)]){let o=new ce([],{});r[jt(s)]=o}return N(N({},i),r)}function hE(n,e){let t={};t[J]=e;for(let i of n)if(i.path===""&&jt(i)!==J){let r=new ce([],{});t[jt(i)]=r}return t}function fE(n,e,t){return t.some(i=>ra(n,e,i)&&jt(i)!==J)}function mE(n,e,t){return t.some(i=>ra(n,e,i))}function ra(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function pE(n,e,t,i){return jt(n)!==i&&(i===J||!ra(e,t,n))?!1:Su(e,n,t).matched}function gE(n,e,t){return e.length===0&&!n.children[t]}var vu=class{};function bE(n,e,t,i,r,s,o="emptyOnly"){return new _u(n,e,t,i,r,o,s).recognize()}var vE=31,_u=class{constructor(e,t,i,r,s,o,c){this.injector=e,this.configLoader=t,this.rootComponentType=i,this.config=r,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=c,this.applyRedirects=new gu(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new he(4002,`'${e.segmentGroup}'`)}recognize(){let e=Cg(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(Q(t=>{let i=new ms([],Object.freeze({}),Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,{},J,this.rootComponentType,null,{}),r=new ht(i,t),s=new ea("",r),o=AI(i,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(e){return this.processSegmentGroup(this.injector,this.config,e,J).pipe(Tn(i=>{if(i instanceof na)return this.urlTree=i.urlTree,this.match(i.urlTree.root);throw i instanceof gs?this.noMatchError(i):i}))}inheritParamsAndData(e,t){let i=e.value,r=Iu(i,t,this.paramsInheritanceStrategy);i.params=Object.freeze(r.params),i.data=Object.freeze(r.data),e.children.forEach(s=>this.inheritParamsAndData(s,i))}processSegmentGroup(e,t,i,r){return i.segments.length===0&&i.hasChildren()?this.processChildren(e,t,i):this.processSegment(e,t,i,i.segments,r,!0).pipe(Q(s=>s instanceof ht?[s]:[]))}processChildren(e,t,i){let r=[];for(let s of Object.keys(i.children))s==="primary"?r.unshift(s):r.push(s);return tt(r).pipe(Hn(s=>{let o=i.children[s],c=UI(t,s);return this.processSegmentGroup(e,c,o,s)}),Sp((s,o)=>(s.push(...o),s)),vl(null),Cp(),_t(s=>{if(s===null)return Ui(i);let o=Yg(s);return _E(o),B(o)}))}processSegment(e,t,i,r,s,o){return tt(t).pipe(Hn(c=>this.processSegmentAgainstRoute(c._injector??e,t,c,i,r,s,o).pipe(Tn(l=>{if(l instanceof gs)return B(null);throw l}))),An(c=>!!c),Tn(c=>{if(Kg(c))return gE(i,r,s)?B(new vu):Ui(i);throw c}))}processSegmentAgainstRoute(e,t,i,r,s,o,c){return pE(i,r,s,o)?i.redirectTo===void 0?this.matchSegmentAgainstRoute(e,r,i,s,o):this.allowRedirects&&c?this.expandSegmentAgainstRouteUsingRedirect(e,r,t,i,s,o):Ui(r):Ui(r)}expandSegmentAgainstRouteUsingRedirect(e,t,i,r,s,o){let{matched:c,consumedSegments:l,positionalParamSegments:d,remainingSegments:f}=Su(t,r,s);if(!c)return Ui(t);r.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>vE&&(this.allowRedirects=!1));let p=this.applyRedirects.applyRedirectCommands(l,r.redirectTo,d);return this.applyRedirects.lineralizeSegments(r,p).pipe(_t(y=>this.processSegment(e,i,t,y.concat(f),o,!1)))}matchSegmentAgainstRoute(e,t,i,r,s){let o=lE(t,i,r,e,this.urlSerializer);return i.path==="**"&&(t.children={}),o.pipe(xt(c=>c.matched?(e=i._injector??e,this.getChildConfig(e,i,r).pipe(xt(({routes:l})=>{let d=i._loadedInjector??e,{consumedSegments:f,remainingSegments:p,parameters:y}=c,S=new ms(f,y,Object.freeze(N({},this.urlTree.queryParams)),this.urlTree.fragment,wE(i),jt(i),i.component??i._loadedComponent??null,i,IE(i)),{segmentGroup:k,slicedSegments:M}=Cg(t,f,p,l);if(M.length===0&&k.hasChildren())return this.processChildren(d,l,k).pipe(Q(G=>G===null?null:new ht(S,G)));if(l.length===0&&M.length===0)return B(new ht(S,[]));let x=jt(i)===s;return this.processSegment(d,l,k,M,x?J:s,!0).pipe(Q(G=>new ht(S,G instanceof ht?[G]:[])))}))):Ui(t)))}getChildConfig(e,t,i){return t.children?B({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?B({routes:t._loadedRoutes,injector:t._loadedInjector}):sE(e,t,i,this.urlSerializer).pipe(_t(r=>r?this.configLoader.loadChildren(e,t).pipe(we(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):cE(t))):B({routes:[],injector:e})}};function _E(n){n.sort((e,t)=>e.value.outlet===J?-1:t.value.outlet===J?1:e.value.outlet.localeCompare(t.value.outlet))}function yE(n){let e=n.value.routeConfig;return e&&e.path===""}function Yg(n){let e=[],t=new Set;for(let i of n){if(!yE(i)){e.push(i);continue}let r=e.find(s=>i.value.routeConfig===s.value.routeConfig);r!==void 0?(r.children.push(...i.children),t.add(r)):e.push(i)}for(let i of t){let r=Yg(i.children);e.push(new ht(i.value,r))}return e.filter(i=>!t.has(i))}function wE(n){return n.data||{}}function IE(n){return n.resolve||{}}function EE(n,e,t,i,r,s){return _t(o=>bE(n,e,t,i,o.extractedUrl,r,s).pipe(Q(({state:c,tree:l})=>be(N({},o),{targetSnapshot:c,urlAfterRedirects:l}))))}function TE(n,e){return _t(t=>{let{targetSnapshot:i,guards:{canActivateChecks:r}}=t;if(!r.length)return B(t);let s=new Set(r.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let d of Jg(l))o.add(d);let c=0;return tt(o).pipe(Hn(l=>s.has(l)?AE(l,i,n,e):(l.data=Iu(l,l.parent,n).resolve,B(void 0))),we(()=>c++),_l(1),_t(l=>c===o.size?B(t):En))})}function Jg(n){let e=n.children.map(t=>Jg(t)).flat();return[n,...e]}function AE(n,e,t,i){let r=n.routeConfig,s=n._resolve;return r?.title!==void 0&&!qg(r)&&(s[bs]=r.title),CE(s,n,e,i).pipe(Q(o=>(n._resolvedData=o,n.data=Iu(n,n.parent,t).resolve,null)))}function CE(n,e,t,i){let r=Ql(n);if(r.length===0)return B({});let s={};return tt(r).pipe(_t(o=>SE(n[o],e,t,i).pipe(An(),we(c=>{s[o]=c}))),_l(1),Tp(s),Tn(o=>Kg(o)?En:Wn(o)))}function SE(n,e,t,i){let r=vs(e)??i,s=Hi(n,r),o=s.resolve?s.resolve(e,t):Qn(r,()=>s(e,t));return kn(o)}function Hl(n){return xt(e=>{let t=n(e);return t?tt(t).pipe(Q(()=>e)):B(e)})}var Xg=(()=>{let e=class e{buildTitle(i){let r,s=i.root;for(;s!==void 0;)r=this.getResolvedTitleForRoute(s)??r,s=s.children.find(o=>o.outlet===J);return r}getResolvedTitleForRoute(i){return i.data[bs]}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>V(RE),providedIn:"root"});let n=e;return n})(),RE=(()=>{let e=class e extends Xg{constructor(i){super(),this.title=i}updateTitle(i){let r=this.buildTitle(i);r!==void 0&&this.title.setTitle(r)}};e.\u0275fac=function(r){return new(r||e)(U(yg))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),Ru=new ae("",{providedIn:"root",factory:()=>({})}),Du=new ae(""),DE=(()=>{let e=class e{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=V(Sl)}loadComponent(i){if(this.componentLoaders.get(i))return this.componentLoaders.get(i);if(i._loadedComponent)return B(i._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(i);let r=kn(i.loadComponent()).pipe(Q(Zg),we(o=>{this.onLoadEndListener&&this.onLoadEndListener(i),i._loadedComponent=o}),Kn(()=>{this.componentLoaders.delete(i)})),s=new pl(r,()=>new vt).pipe(ml());return this.componentLoaders.set(i,s),s}loadChildren(i,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return B({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=xE(r,this.compiler,i,this.onLoadEndListener).pipe(Kn(()=>{this.childrenLoaders.delete(r)})),c=new pl(o,()=>new vt).pipe(ml());return this.childrenLoaders.set(r,c),c}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function xE(n,e,t,i){return kn(n.loadChildren()).pipe(Q(Zg),_t(r=>r instanceof $p||Array.isArray(r)?B(r):tt(e.compileModuleAsync(r))),Q(r=>{i&&i(n);let s,o,c=!1;return Array.isArray(r)?(o=r,c=!0):(s=r.create(t).injector,o=s.get(Du,[],{optional:!0,self:!0}).flat()),{routes:o.map(Cu),injector:s}}))}function PE(n){return n&&typeof n=="object"&&"default"in n}function Zg(n){return PE(n)?n.default:n}var xu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>V(kE),providedIn:"root"});let n=e;return n})(),kE=(()=>{let e=class e{shouldProcessUrl(i){return!0}extract(i){return i}merge(i,r){return i}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),NE=new ae("");var ME=(()=>{let e=class e{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new vt,this.transitionAbortSubject=new vt,this.configLoader=V(DE),this.environmentInjector=V(Qr),this.urlSerializer=V(wu),this.rootContexts=V(ia),this.location=V(Fo),this.inputBindingEnabled=V(Au,{optional:!0})!==null,this.titleStrategy=V(Xg),this.options=V(Ru,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=V(xu),this.createViewTransition=V(NE,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>B(void 0),this.rootComponentType=null;let i=s=>this.events.next(new ru(s)),r=s=>this.events.next(new su(s));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=i}complete(){this.transitions?.complete()}handleNavigationRequest(i){let r=++this.navigationId;this.transitions?.next(be(N(N({},this.transitions.value),i),{id:r}))}setupNavigations(i,r,s){return this.transitions=new et({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:as,restoredState:null,currentSnapshot:s.snapshot,targetSnapshot:null,currentRouterState:s,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(rn(o=>o.id!==0),Q(o=>be(N({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),xt(o=>{let c=!1,l=!1;return B(o).pipe(xt(d=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",ft.SupersededByNewNavigation),En;this.currentTransition=o,this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?be(N({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let f=!i.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),p=d.extras.onSameUrlNavigation??i.onSameUrlNavigation;if(!f&&p!=="reload"){let y="";return this.events.next(new ni(d.id,this.urlSerializer.serialize(d.rawUrl),y,Zl.IgnoredSameUrlNavigation)),d.resolve(null),En}if(this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return B(d).pipe(xt(y=>{let S=this.transitions?.getValue();return this.events.next(new us(y.id,this.urlSerializer.serialize(y.extractedUrl),y.source,y.restoredState)),S!==this.transitions?.getValue()?En:Promise.resolve(y)}),EE(this.environmentInjector,this.configLoader,this.rootComponentType,i.config,this.urlSerializer,this.paramsInheritanceStrategy),we(y=>{o.targetSnapshot=y.targetSnapshot,o.urlAfterRedirects=y.urlAfterRedirects,this.currentNavigation=be(N({},this.currentNavigation),{finalUrl:y.urlAfterRedirects});let S=new Jo(y.id,this.urlSerializer.serialize(y.extractedUrl),this.urlSerializer.serialize(y.urlAfterRedirects),y.targetSnapshot);this.events.next(S)}));if(f&&this.urlHandlingStrategy.shouldProcessUrl(d.currentRawUrl)){let{id:y,extractedUrl:S,source:k,restoredState:M,extras:x}=d,G=new us(y,this.urlSerializer.serialize(S),k,M);this.events.next(G);let X=Bg(this.rootComponentType).snapshot;return this.currentTransition=o=be(N({},d),{targetSnapshot:X,urlAfterRedirects:S,extras:be(N({},x),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=S,B(o)}else{let y="";return this.events.next(new ni(d.id,this.urlSerializer.serialize(d.extractedUrl),y,Zl.IgnoredByUrlHandlingStrategy)),d.resolve(null),En}}),we(d=>{let f=new eu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}),Q(d=>(this.currentTransition=o=be(N({},d),{guards:BI(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),o)),JI(this.environmentInjector,d=>this.events.next(d)),we(d=>{if(o.guardsResult=d.guardsResult,$i(d.guardsResult))throw Gg(this.urlSerializer,d.guardsResult);let f=new tu(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.events.next(f)}),rn(d=>d.guardsResult?!0:(this.cancelNavigationTransition(d,"",ft.GuardRejected),!1)),Hl(d=>{if(d.guards.canActivateChecks.length)return B(d).pipe(we(f=>{let p=new nu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}),xt(f=>{let p=!1;return B(f).pipe(TE(this.paramsInheritanceStrategy,this.environmentInjector),we({next:()=>p=!0,complete:()=>{p||this.cancelNavigationTransition(f,"",ft.NoDataFromResolver)}}))}),we(f=>{let p=new iu(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}))}),Hl(d=>{let f=p=>{let y=[];p.routeConfig?.loadComponent&&!p.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(p.routeConfig).pipe(we(S=>{p.component=S}),Q(()=>{})));for(let S of p.children)y.push(...f(S));return y};return Wr(f(d.targetSnapshot.root)).pipe(vl(null),Dt(1))}),Hl(()=>this.afterPreactivation()),xt(()=>{let{currentSnapshot:d,targetSnapshot:f}=o,p=this.createViewTransition?.(this.environmentInjector,d.root,f.root);return p?tt(p).pipe(Q(()=>o)):B(o)}),Q(d=>{let f=NI(i.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return this.currentTransition=o=be(N({},d),{targetRouterState:f}),this.currentNavigation.targetRouterState=f,o}),we(()=>{this.events.next(new hs)}),jI(this.rootContexts,i.routeReuseStrategy,d=>this.events.next(d),this.inputBindingEnabled),Dt(1),we({next:d=>{c=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ti(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects))),this.titleStrategy?.updateTitle(d.targetRouterState.snapshot),d.resolve(!0)},complete:()=>{c=!0}}),xi(this.transitionAbortSubject.pipe(we(d=>{throw d}))),Kn(()=>{!c&&!l&&this.cancelNavigationTransition(o,"",ft.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),Tn(d=>{if(l=!0,Hg(d))this.events.next(new Pn(o.id,this.urlSerializer.serialize(o.extractedUrl),d.message,d.cancellationCode)),VI(d)?this.events.next(new fs(d.url)):o.resolve(!1);else{this.events.next(new ds(o.id,this.urlSerializer.serialize(o.extractedUrl),d,o.targetSnapshot??void 0));try{o.resolve(i.errorHandler(d))}catch(f){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(f)}}return En}))}))}cancelNavigationTransition(i,r,s){let o=new Pn(i.id,this.urlSerializer.serialize(i.extractedUrl),r,s);this.events.next(o),i.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function OE(n){return n!==as}var VE=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>V(FE),providedIn:"root"});let n=e;return n})(),yu=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},FE=(()=>{let e=class e extends yu{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),eb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:()=>V(LE),providedIn:"root"});let n=e;return n})(),LE=(()=>{let e=class e extends eb{constructor(){super(...arguments),this.location=V(Fo),this.urlSerializer=V(wu),this.options=V(Ru,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=V(xu),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new xn,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Bg(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(i){return this.location.subscribe(r=>{r.type==="popstate"&&i(r.url,r.state)})}handleRouterEvent(i,r){if(i instanceof us)this.stateMemento=this.createStateMemento();else if(i instanceof ni)this.rawUrlTree=r.initialUrl;else if(i instanceof Jo){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let s=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(s,r)}}else i instanceof hs?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,r))):i instanceof Pn&&(i.code===ft.GuardRejected||i.code===ft.NoDataFromResolver)?this.restoreHistory(r):i instanceof ds?this.restoreHistory(r,!0):i instanceof ti&&(this.lastSuccessfulId=i.id,this.currentPageId=this.browserPageId)}setBrowserUrl(i,r){let s=this.urlSerializer.serialize(i);if(this.location.isCurrentPathEqualTo(s)||r.extras.replaceUrl){let o=this.browserPageId,c=N(N({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(s,"",c)}else{let o=N(N({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(s,"",o)}}restoreHistory(i,r=!1){if(this.canceledNavigationResolution==="computed"){let s=this.browserPageId,o=this.currentPageId-s;o!==0?this.location.historyGo(o):this.currentUrlTree===i.finalUrl&&o===0&&(this.resetState(i),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(i),this.resetUrlToCurrentUrlTree())}resetState(i){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,i.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(i,r){return this.canceledNavigationResolution==="computed"?{navigationId:i,\u0275routerPageId:r}:{navigationId:i}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})(),ss=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(ss||{});function UE(n,e){n.events.pipe(rn(t=>t instanceof ti||t instanceof Pn||t instanceof ds||t instanceof ni),Q(t=>t instanceof ti||t instanceof ni?ss.COMPLETE:(t instanceof Pn?t.code===ft.Redirect||t.code===ft.SupersededByNewNavigation:!1)?ss.REDIRECTING:ss.FAILED),rn(t=>t!==ss.REDIRECTING),Dt(1)).subscribe(()=>{e()})}function jE(n){throw n}var BE={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},zE={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},tb=(()=>{let e=class e{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=V(Oo),this.stateManager=V(eb),this.options=V(Ru,{optional:!0})||{},this.pendingTasks=V(Wp),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=V(ME),this.urlSerializer=V(wu),this.location=V(Fo),this.urlHandlingStrategy=V(xu),this._events=new vt,this.errorHandler=this.options.errorHandler||jE,this.navigated=!1,this.routeReuseStrategy=V(VE),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=V(Du,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!V(Au,{optional:!0}),this.eventsSubscription=new Gr,this.isNgZoneEnabled=V(Ie)instanceof Ie&&Ie.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:i=>{this.console.warn(i)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let i=this.navigationTransitions.events.subscribe(r=>{try{let s=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(s!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pn&&r.code!==ft.Redirect&&r.code!==ft.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof ti)this.navigated=!0;else if(r instanceof fs){let c=this.urlHandlingStrategy.merge(r.url,s.currentRawUrl),l={info:s.extras.info,skipLocationChange:s.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||OE(s.source)};this.scheduleNavigation(c,as,null,l,{resolve:s.resolve,reject:s.reject,promise:s.promise})}}$E(r)&&this._events.next(r)}catch(s){this.navigationTransitions.transitionAbortSubject.next(s)}});this.eventsSubscription.add(i)}resetRootComponentType(i){this.routerState.root.component=i,this.navigationTransitions.rootComponentType=i}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),as,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((i,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(i,"popstate",r)},0)})}navigateToSyncWithBrowser(i,r,s){let o={replaceUrl:!0},c=s?.navigationId?s:null;if(s){let d=N({},s);delete d.navigationId,delete d.\u0275routerPageId,Object.keys(d).length!==0&&(o.state=d)}let l=this.parseUrl(i);this.scheduleNavigation(l,r,c,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(i){this.config=i.map(Cu),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(i,r={}){let{relativeTo:s,queryParams:o,fragment:c,queryParamsHandling:l,preserveFragment:d}=r,f=d?this.currentUrlTree.fragment:c,p=null;switch(l){case"merge":p=N(N({},this.currentUrlTree.queryParams),o);break;case"preserve":p=this.currentUrlTree.queryParams;break;default:p=o||null}p!==null&&(p=this.removeEmptyProps(p));let y;try{let S=s?s.snapshot:this.routerState.snapshot.root;y=Fg(S)}catch{(typeof i[0]!="string"||!i[0].startsWith("/"))&&(i=[]),y=this.currentUrlTree.root}return Lg(y,i,p,f??null)}navigateByUrl(i,r={skipLocationChange:!1}){let s=$i(i)?i:this.parseUrl(i),o=this.urlHandlingStrategy.merge(s,this.rawUrlTree);return this.scheduleNavigation(o,as,null,r)}navigate(i,r={skipLocationChange:!1}){return qE(i),this.navigateByUrl(this.createUrlTree(i,r),r)}serializeUrl(i){return this.urlSerializer.serialize(i)}parseUrl(i){try{return this.urlSerializer.parse(i)}catch{return this.urlSerializer.parse("/")}}isActive(i,r){let s;if(r===!0?s=N({},BE):r===!1?s=N({},zE):s=r,$i(i))return Ig(this.currentUrlTree,i,s);let o=this.parseUrl(i);return Ig(this.currentUrlTree,o,s)}removeEmptyProps(i){return Object.entries(i).reduce((r,[s,o])=>(o!=null&&(r[s]=o),r),{})}scheduleNavigation(i,r,s,o,c){if(this.disposed)return Promise.resolve(!1);let l,d,f;c?(l=c.resolve,d=c.reject,f=c.promise):f=new Promise((y,S)=>{l=y,d=S});let p=this.pendingTasks.add();return UE(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(p))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:s,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:i,extras:o,resolve:l,reject:d,promise:f,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),f.catch(y=>Promise.reject(y))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function qE(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new he(4008,!1)}function $E(n){return!(n instanceof hs)&&!(n instanceof fs)}var GE=new ae("");function nb(n,...e){return Kr([{provide:Du,multi:!0,useValue:n},[],{provide:Gi,useFactory:WE,deps:[tb]},{provide:Yp,multi:!0,useFactory:HE},e.map(t=>t.\u0275providers)])}function WE(n){return n.routerState.root}function HE(){let n=V(Il);return e=>{let t=n.get(Cl);if(e!==t.components[0])return;let i=n.get(tb),r=n.get(KE);n.get(QE)===1&&i.initialNavigation(),n.get(YE,null,yl.Optional)?.setUpPreloading(),n.get(GE,null,yl.Optional)?.init(),i.resetRootComponentType(t.componentTypes[0]),r.closed||(r.next(),r.complete(),r.unsubscribe())}}var KE=new ae("",{factory:()=>new vt}),QE=new ae("",{providedIn:"root",factory:()=>1});var YE=new ae("");var ib=[];var JE="@",XE=(()=>{let e=class e{constructor(i,r,s,o,c){this.doc=i,this.delegate=r,this.zone=s,this.animationType=o,this.moduleImpl=c,this._rendererFactoryPromise=null,this.scheduler=V(Bp,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-5SS6J6OK.js")).catch(r=>{throw new he(5300,!1)}).then(({\u0275createEngine:r,\u0275AnimationRendererFactory:s})=>{this._engine=r(this.animationType,this.doc,this.scheduler);let o=new s(this.delegate,this._engine,this.zone);return this.delegate=o,o})}createRenderer(i,r){let s=this.delegate.createRenderer(i,r);if(s.\u0275type===0)return s;typeof s.throwOnSyntheticProps=="boolean"&&(s.throwOnSyntheticProps=!1);let o=new Pu(s);return r?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(c=>{let l=c.createRenderer(i,r);o.use(l)}).catch(c=>{o.use(s)}),o}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}};e.\u0275fac=function(r){Xr()},e.\u0275prov=H({token:e,factory:e.\u0275fac});let n=e;return n})(),Pu=class{constructor(e){this.delegate=e,this.replay=[],this.\u0275type=1}use(e){if(this.delegate=e,this.replay!==null){for(let t of this.replay)t(e);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}get destroyNode(){return this.delegate.destroyNode}appendChild(e,t){this.delegate.appendChild(e,t)}insertBefore(e,t,i,r){this.delegate.insertBefore(e,t,i,r)}removeChild(e,t,i){this.delegate.removeChild(e,t,i)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){this.shouldReplay(t)&&this.replay.push(r=>r.setProperty(e,t,i)),this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i){return this.shouldReplay(t)&&this.replay.push(r=>r.listen(e,t,i)),this.delegate.listen(e,t,i)}shouldReplay(e){return this.replay!==null&&e.startsWith(JE)}};function rb(n="animations"){return zp("NgAsyncAnimations"),Kr([{provide:No,useFactory:(e,t,i)=>new XE(e,t,i,n),deps:[_e,Bo,Ie]},{provide:Xn,useValue:n==="noop"?"NoopAnimations":"BrowserAnimations"}])}var sb={providers:[nb(ib),rb()]};var Nu;try{Nu=typeof Intl<"u"&&Intl.v8BreakIterator}catch{Nu=!1}var mt=(()=>{let e=class e{constructor(i){this._platformId=i,this.isBrowser=this._platformId?ig(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||Nu)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}};e.\u0275fac=function(r){return new(r||e)(U(Jn))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var ys;function ZE(){if(ys==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>ys=!0}))}finally{ys=ys||!1}return ys}function Ki(n){return ZE()?n:!!n.capture}var ku;function eT(){if(ku==null){let n=typeof document<"u"?document.head:null;ku=!!(n&&(n.createShadowRoot||n.attachShadow))}return ku}function ob(n){if(eT()){let e=n.getRootNode?n.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&e instanceof ShadowRoot)return e}return null}function Nn(n){return n.composedPath?n.composedPath()[0]:n.target}function ab(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Mu(n){return Array.isArray(n)?n:[n]}function ii(n){return n instanceof Ve?n.nativeElement:n}var cb=new Set,ri,tT=(()=>{let e=class e{constructor(i,r){this._platform=i,this._nonce=r,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):iT}matchMedia(i){return(this._platform.WEBKIT||this._platform.BLINK)&&nT(i,this._nonce),this._matchMedia(i)}};e.\u0275fac=function(r){return new(r||e)(U(mt),U(Yr,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function nT(n,e){if(!cb.has(n))try{ri||(ri=document.createElement("style"),e&&ri.setAttribute("nonce",e),ri.setAttribute("type","text/css"),document.head.appendChild(ri)),ri.sheet&&(ri.sheet.insertRule(`@media ${n} {body{ }}`,0),cb.add(n))}catch(t){console.error(t)}}function iT(n){return{matches:n==="all"||n==="",media:n,addListener:()=>{},removeListener:()=>{}}}var ub=(()=>{let e=class e{constructor(i,r){this._mediaMatcher=i,this._zone=r,this._queries=new Map,this._destroySubject=new vt}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(i){return lb(Mu(i)).some(s=>this._registerQuery(s).mql.matches)}observe(i){let s=lb(Mu(i)).map(c=>this._registerQuery(c).observable),o=Wr(s);return o=Ro(o.pipe(Dt(1)),o.pipe(xo(1),bl(0))),o.pipe(Q(c=>{let l={matches:!1,breakpoints:{}};return c.forEach(({matches:d,query:f})=>{l.matches=l.matches||d,l.breakpoints[f]=d}),l}))}_registerQuery(i){if(this._queries.has(i))return this._queries.get(i);let r=this._mediaMatcher.matchMedia(i),o={observable:new fl(c=>{let l=d=>this._zone.run(()=>c.next(d));return r.addListener(l),()=>{r.removeListener(l)}}).pipe(Po(r),Q(({matches:c})=>({query:i,matches:c})),xi(this._destroySubject)),mql:r};return this._queries.set(i,o),o}};e.\u0275fac=function(r){return new(r||e)(U(tT),U(Ie))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function lb(n){return n.map(e=>e.split(",")).reduce((e,t)=>e.concat(t)).map(e=>e.trim())}function Vu(n){return n.buttons===0||n.detail===0}function Fu(n){let e=n.touches&&n.touches[0]||n.changedTouches&&n.changedTouches[0];return!!e&&e.identifier===-1&&(e.radiusX==null||e.radiusX===1)&&(e.radiusY==null||e.radiusY===1)}var rT=new ae("cdk-input-modality-detector-options"),sT={ignoreKeys:[18,17,224,91,16]},fb=650,Qi=Ki({passive:!0,capture:!0}),oT=(()=>{let e=class e{get mostRecentModality(){return this._modality.value}constructor(i,r,s,o){this._platform=i,this._mostRecentTarget=null,this._modality=new et(null),this._lastTouchMs=0,this._onKeydown=c=>{this._options?.ignoreKeys?.some(l=>l===c.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=Nn(c))},this._onMousedown=c=>{Date.now()-this._lastTouchMs<fb||(this._modality.next(Vu(c)?"keyboard":"mouse"),this._mostRecentTarget=Nn(c))},this._onTouchstart=c=>{if(Fu(c)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=Nn(c)},this._options=N(N({},sT),o),this.modalityDetected=this._modality.pipe(xo(1)),this.modalityChanged=this.modalityDetected.pipe(Ap()),i.isBrowser&&r.runOutsideAngular(()=>{s.addEventListener("keydown",this._onKeydown,Qi),s.addEventListener("mousedown",this._onMousedown,Qi),s.addEventListener("touchstart",this._onTouchstart,Qi)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,Qi),document.removeEventListener("mousedown",this._onMousedown,Qi),document.removeEventListener("touchstart",this._onTouchstart,Qi))}};e.\u0275fac=function(r){return new(r||e)(U(mt),U(Ie),U(_e),U(rT,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var aa=function(n){return n[n.IMMEDIATE=0]="IMMEDIATE",n[n.EVENTUAL=1]="EVENTUAL",n}(aa||{}),aT=new ae("cdk-focus-monitor-default-options"),oa=Ki({passive:!0,capture:!0}),mb=(()=>{let e=class e{constructor(i,r,s,o,c){this._ngZone=i,this._platform=r,this._inputModalityDetector=s,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new vt,this._rootNodeFocusAndBlurListener=l=>{let d=Nn(l);for(let f=d;f;f=f.parentElement)l.type==="focus"?this._onFocus(l,f):this._onBlur(l,f)},this._document=o,this._detectionMode=c?.detectionMode||aa.IMMEDIATE}monitor(i,r=!1){let s=ii(i);if(!this._platform.isBrowser||s.nodeType!==1)return B();let o=ob(s)||this._getDocument(),c=this._elementInfo.get(s);if(c)return r&&(c.checkChildren=!0),c.subject;let l={checkChildren:r,subject:new vt,rootNode:o};return this._elementInfo.set(s,l),this._registerGlobalListeners(l),l.subject}stopMonitoring(i){let r=ii(i),s=this._elementInfo.get(r);s&&(s.subject.complete(),this._setClasses(r),this._elementInfo.delete(r),this._removeGlobalListeners(s))}focusVia(i,r,s){let o=ii(i),c=this._getDocument().activeElement;o===c?this._getClosestElementsInfo(o).forEach(([l,d])=>this._originChanged(l,r,d)):(this._setOrigin(r),typeof o.focus=="function"&&o.focus(s))}ngOnDestroy(){this._elementInfo.forEach((i,r)=>this.stopMonitoring(r))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(i){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(i)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:i&&this._isLastInteractionFromInputLabel(i)?"mouse":"program"}_shouldBeAttributedToTouch(i){return this._detectionMode===aa.EVENTUAL||!!i?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(i,r){i.classList.toggle("cdk-focused",!!r),i.classList.toggle("cdk-touch-focused",r==="touch"),i.classList.toggle("cdk-keyboard-focused",r==="keyboard"),i.classList.toggle("cdk-mouse-focused",r==="mouse"),i.classList.toggle("cdk-program-focused",r==="program")}_setOrigin(i,r=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=i,this._originFromTouchInteraction=i==="touch"&&r,this._detectionMode===aa.IMMEDIATE){clearTimeout(this._originTimeoutId);let s=this._originFromTouchInteraction?fb:1;this._originTimeoutId=setTimeout(()=>this._origin=null,s)}})}_onFocus(i,r){let s=this._elementInfo.get(r),o=Nn(i);!s||!s.checkChildren&&r!==o||this._originChanged(r,this._getFocusOrigin(o),s)}_onBlur(i,r){let s=this._elementInfo.get(r);!s||s.checkChildren&&i.relatedTarget instanceof Node&&r.contains(i.relatedTarget)||(this._setClasses(r),this._emitOrigin(s,null))}_emitOrigin(i,r){i.subject.observers.length&&this._ngZone.run(()=>i.subject.next(r))}_registerGlobalListeners(i){if(!this._platform.isBrowser)return;let r=i.rootNode,s=this._rootNodeFocusListenerCount.get(r)||0;s||this._ngZone.runOutsideAngular(()=>{r.addEventListener("focus",this._rootNodeFocusAndBlurListener,oa),r.addEventListener("blur",this._rootNodeFocusAndBlurListener,oa)}),this._rootNodeFocusListenerCount.set(r,s+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(xi(this._stopInputModalityDetector)).subscribe(o=>{this._setOrigin(o,!0)}))}_removeGlobalListeners(i){let r=i.rootNode;if(this._rootNodeFocusListenerCount.has(r)){let s=this._rootNodeFocusListenerCount.get(r);s>1?this._rootNodeFocusListenerCount.set(r,s-1):(r.removeEventListener("focus",this._rootNodeFocusAndBlurListener,oa),r.removeEventListener("blur",this._rootNodeFocusAndBlurListener,oa),this._rootNodeFocusListenerCount.delete(r))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(i,r,s){this._setClasses(i,r),this._emitOrigin(s,r),this._lastFocusOrigin=r}_getClosestElementsInfo(i){let r=[];return this._elementInfo.forEach((s,o)=>{(o===i||s.checkChildren&&o.contains(i))&&r.push([o,s])}),r}_isLastInteractionFromInputLabel(i){let{_mostRecentTarget:r,mostRecentModality:s}=this._inputModalityDetector;if(s!=="mouse"||!r||r===i||i.nodeName!=="INPUT"&&i.nodeName!=="TEXTAREA"||i.disabled)return!1;let o=i.labels;if(o){for(let c=0;c<o.length;c++)if(o[c].contains(r))return!0}return!1}};e.\u0275fac=function(r){return new(r||e)(U(Ie),U(mt),U(oT),U(_e,8),U(aT,8))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var si=function(n){return n[n.NONE=0]="NONE",n[n.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",n[n.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",n}(si||{}),db="cdk-high-contrast-black-on-white",hb="cdk-high-contrast-white-on-black",Ou="cdk-high-contrast-active",pb=(()=>{let e=class e{constructor(i,r){this._platform=i,this._document=r,this._breakpointSubscription=V(ub).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return si.NONE;let i=this._document.createElement("div");i.style.backgroundColor="rgb(1,2,3)",i.style.position="absolute",this._document.body.appendChild(i);let r=this._document.defaultView||window,s=r&&r.getComputedStyle?r.getComputedStyle(i):null,o=(s&&s.backgroundColor||"").replace(/ /g,"");switch(i.remove(),o){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return si.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return si.BLACK_ON_WHITE}return si.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let i=this._document.body.classList;i.remove(Ou,db,hb),this._hasCheckedHighContrastMode=!0;let r=this.getHighContrastMode();r===si.BLACK_ON_WHITE?i.add(Ou,db):r===si.WHITE_ON_BLACK&&i.add(Ou,hb)}}};e.\u0275fac=function(r){return new(r||e)(U(mt),U(_e))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var Lu=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({});let n=e;return n})();function lT(){return!0}var uT=new ae("mat-sanity-checks",{providedIn:"root",factory:lT}),kt=(()=>{let e=class e{constructor(i,r,s){this._sanityChecks=r,this._document=s,this._hasDoneGlobalChecks=!1,i._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(i){return ab()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[i]}};e.\u0275fac=function(r){return new(r||e)(U(pb),U(uT,8),U(_e))},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({imports:[Lu,Lu]});let n=e;return n})();var St=function(n){return n[n.FADING_IN=0]="FADING_IN",n[n.VISIBLE=1]="VISIBLE",n[n.FADING_OUT=2]="FADING_OUT",n[n.HIDDEN=3]="HIDDEN",n}(St||{}),Bu=class{constructor(e,t,i,r=!1){this._renderer=e,this.element=t,this.config=i,this._animationForciblyDisabledThroughCss=r,this.state=St.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},gb=Ki({passive:!0,capture:!0}),zu=class{constructor(){this._events=new Map,this._delegateEventHandler=e=>{let t=Nn(e);t&&this._events.get(e.type)?.forEach((i,r)=>{(r===t||r.contains(t))&&i.forEach(s=>s.handleEvent(e))})}}addHandler(e,t,i,r){let s=this._events.get(t);if(s){let o=s.get(i);o?o.add(r):s.set(i,new Set([r]))}else this._events.set(t,new Map([[i,new Set([r])]])),e.runOutsideAngular(()=>{document.addEventListener(t,this._delegateEventHandler,gb)})}removeHandler(e,t,i){let r=this._events.get(e);if(!r)return;let s=r.get(t);s&&(s.delete(i),s.size===0&&r.delete(t),r.size===0&&(this._events.delete(e),document.removeEventListener(e,this._delegateEventHandler,gb)))}},bb={enterDuration:225,exitDuration:150},dT=800,vb=Ki({passive:!0,capture:!0}),_b=["mousedown","touchstart"],yb=["mouseup","mouseleave","touchend","touchcancel"],ws=class ws{constructor(e,t,i,r){this._target=e,this._ngZone=t,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=ii(i))}fadeInRipple(e,t,i={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=N(N({},bb),i.animation);i.centered&&(e=r.left+r.width/2,t=r.top+r.height/2);let o=i.radius||hT(e,t,r),c=e-r.left,l=t-r.top,d=s.enterDuration,f=document.createElement("div");f.classList.add("mat-ripple-element"),f.style.left=`${c-o}px`,f.style.top=`${l-o}px`,f.style.height=`${o*2}px`,f.style.width=`${o*2}px`,i.color!=null&&(f.style.backgroundColor=i.color),f.style.transitionDuration=`${d}ms`,this._containerElement.appendChild(f);let p=window.getComputedStyle(f),y=p.transitionProperty,S=p.transitionDuration,k=y==="none"||S==="0s"||S==="0s, 0s"||r.width===0&&r.height===0,M=new Bu(this,f,i,k);f.style.transform="scale3d(1, 1, 1)",M.state=St.FADING_IN,i.persistent||(this._mostRecentTransientRipple=M);let x=null;return!k&&(d||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let G=()=>this._finishRippleTransition(M),X=()=>this._destroyRipple(M);f.addEventListener("transitionend",G),f.addEventListener("transitioncancel",X),x={onTransitionEnd:G,onTransitionCancel:X}}),this._activeRipples.set(M,x),(k||!d)&&this._finishRippleTransition(M),M}fadeOutRipple(e){if(e.state===St.FADING_OUT||e.state===St.HIDDEN)return;let t=e.element,i=N(N({},bb),e.config.animation);t.style.transitionDuration=`${i.exitDuration}ms`,t.style.opacity="0",e.state=St.FADING_OUT,(e._animationForciblyDisabledThroughCss||!i.exitDuration)&&this._finishRippleTransition(e)}fadeOutAll(){this._getActiveRipples().forEach(e=>e.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(e=>{e.config.persistent||e.fadeOut()})}setupTriggerEvents(e){let t=ii(e);!this._platform.isBrowser||!t||t===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=t,_b.forEach(i=>{ws._eventManager.addHandler(this._ngZone,i,t,this)}))}handleEvent(e){e.type==="mousedown"?this._onMousedown(e):e.type==="touchstart"?this._onTouchStart(e):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{yb.forEach(t=>{this._triggerElement.addEventListener(t,this,vb)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(e){e.state===St.FADING_IN?this._startFadeOutTransition(e):e.state===St.FADING_OUT&&this._destroyRipple(e)}_startFadeOutTransition(e){let t=e===this._mostRecentTransientRipple,{persistent:i}=e.config;e.state=St.VISIBLE,!i&&(!t||!this._isPointerDown)&&e.fadeOut()}_destroyRipple(e){let t=this._activeRipples.get(e)??null;this._activeRipples.delete(e),this._activeRipples.size||(this._containerRect=null),e===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),e.state=St.HIDDEN,t!==null&&(e.element.removeEventListener("transitionend",t.onTransitionEnd),e.element.removeEventListener("transitioncancel",t.onTransitionCancel)),e.element.remove()}_onMousedown(e){let t=Vu(e),i=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+dT;!this._target.rippleDisabled&&!t&&!i&&(this._isPointerDown=!0,this.fadeInRipple(e.clientX,e.clientY,this._target.rippleConfig))}_onTouchStart(e){if(!this._target.rippleDisabled&&!Fu(e)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let t=e.changedTouches;if(t)for(let i=0;i<t.length;i++)this.fadeInRipple(t[i].clientX,t[i].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(e=>{let t=e.state===St.VISIBLE||e.config.terminateOnPointerUp&&e.state===St.FADING_IN;!e.config.persistent&&t&&e.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let e=this._triggerElement;e&&(_b.forEach(t=>ws._eventManager.removeHandler(t,e,this)),this._pointerUpEventsRegistered&&(yb.forEach(t=>e.removeEventListener(t,this,vb)),this._pointerUpEventsRegistered=!1))}};ws._eventManager=new zu;var qu=ws;function hT(n,e,t){let i=Math.max(Math.abs(n-t.left),Math.abs(n-t.right)),r=Math.max(Math.abs(e-t.top),Math.abs(e-t.bottom));return Math.sqrt(i*i+r*r)}var Tb=new ae("mat-ripple-global-options"),fT=(()=>{let e=class e{get disabled(){return this._disabled}set disabled(i){i&&this.fadeOutAllNonPersistent(),this._disabled=i,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(i){this._trigger=i,this._setupTriggerEventsIfEnabled()}constructor(i,r,s,o,c){this._elementRef=i,this._animationMode=c,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=o||{},this._rippleRenderer=new qu(this,r,i,s)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:N(N(N({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(i,r=0,s){return typeof i=="number"?this._rippleRenderer.fadeInRipple(i,r,N(N({},this.rippleConfig),s)):this._rippleRenderer.fadeInRipple(0,0,N(N({},this.rippleConfig),i))}};e.\u0275fac=function(r){return new(r||e)(q(Ve),q(Ie),q(mt),q(Tb,8),q(Xn,8))},e.\u0275dir=ge({type:e,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(r,s){r&2&&Pt("mat-ripple-unbounded",s.unbounded)},inputs:{color:[ve.None,"matRippleColor","color"],unbounded:[ve.None,"matRippleUnbounded","unbounded"],centered:[ve.None,"matRippleCentered","centered"],radius:[ve.None,"matRippleRadius","radius"],animation:[ve.None,"matRippleAnimation","animation"],disabled:[ve.None,"matRippleDisabled","disabled"],trigger:[ve.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0});let n=e;return n})(),Ab=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({imports:[kt,kt]});let n=e;return n})();var wb={capture:!0},Ib=["focus","click","mouseenter","touchstart"],Uu="mat-ripple-loader-uninitialized",ju="mat-ripple-loader-class-name",Eb="mat-ripple-loader-centered",ca="mat-ripple-loader-disabled",Cb=(()=>{let e=class e{constructor(){this._document=V(_e,{optional:!0}),this._animationMode=V(Xn,{optional:!0}),this._globalRippleOptions=V(Tb,{optional:!0}),this._platform=V(mt),this._ngZone=V(Ie),this._hosts=new Map,this._onInteraction=i=>{if(!(i.target instanceof HTMLElement))return;let s=i.target.closest(`[${Uu}]`);s&&this._createRipple(s)},this._ngZone.runOutsideAngular(()=>{for(let i of Ib)this._document?.addEventListener(i,this._onInteraction,wb)})}ngOnDestroy(){let i=this._hosts.keys();for(let r of i)this.destroyRipple(r);for(let r of Ib)this._document?.removeEventListener(r,this._onInteraction,wb)}configureRipple(i,r){i.setAttribute(Uu,""),(r.className||!i.hasAttribute(ju))&&i.setAttribute(ju,r.className||""),r.centered&&i.setAttribute(Eb,""),r.disabled&&i.setAttribute(ca,"")}getRipple(i){return this._hosts.get(i)||this._createRipple(i)}setDisabled(i,r){let s=this._hosts.get(i);if(s){s.disabled=r;return}r?i.setAttribute(ca,""):i.removeAttribute(ca)}_createRipple(i){if(!this._document)return;let r=this._hosts.get(i);if(r)return r;i.querySelector(".mat-ripple")?.remove();let s=this._document.createElement("span");s.classList.add("mat-ripple",i.getAttribute(ju)),i.append(s);let o=new fT(new Ve(s),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return o._isInitialized=!0,o.trigger=i,o.centered=i.hasAttribute(Eb),o.disabled=i.hasAttribute(ca),this.attachRipple(i,o),o}attachRipple(i,r){i.removeAttribute(Uu),this._hosts.set(i,r)}destroyRipple(i){let r=this._hosts.get(i);r&&(r.ngOnDestroy(),this._hosts.delete(i))}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var mT=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],pT=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var gT=["mat-fab",""];var bT=new ae("MAT_BUTTON_CONFIG");var vT=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],_T=(()=>{let e=class e{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(i){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,i)}get disableRipple(){return this._disableRipple}set disableRipple(i){this._disableRipple=i,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(i){this._disabled=i,this._updateRippleDisabled()}constructor(i,r,s,o){this._elementRef=i,this._platform=r,this._ngZone=s,this._animationMode=o,this._focusMonitor=V(mb),this._rippleLoader=V(Cb),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let c=V(bT,{optional:!0}),l=i.nativeElement,d=l.classList;this.disabledInteractive=c?.disabledInteractive??!1,this._rippleLoader?.configureRipple(l,{className:"mat-mdc-button-ripple"});for(let{attribute:f,mdcClasses:p}of vT)l.hasAttribute(f)&&d.add(...p)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(i="program",r){i?this._focusMonitor.focusVia(this._elementRef.nativeElement,i,r):this._elementRef.nativeElement.focus(r)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}};e.\u0275fac=function(r){Xr()},e.\u0275dir=ge({type:e,inputs:{color:"color",disableRipple:[ve.HasDecoratorInputTransform,"disableRipple","disableRipple",rt],disabled:[ve.HasDecoratorInputTransform,"disabled","disabled",rt],ariaDisabled:[ve.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",rt],disabledInteractive:[ve.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",rt]},features:[Sn]});let n=e;return n})();var yT=new ae("mat-mdc-fab-default-options",{providedIn:"root",factory:Rb});function Rb(){return{color:"accent"}}var Sb=Rb(),Db=(()=>{let e=class e extends _T{constructor(i,r,s,o,c){super(i,r,s,o),this._options=c,this._isFab=!0,this._options=this._options||Sb,this.color=this._options.color||Sb.color}};e.\u0275fac=function(r){return new(r||e)(q(Ve),q(mt),q(Ie),q(Xn,8),q(yT,8))},e.\u0275cmp=nt({type:e,selectors:[["button","mat-fab",""]],hostVars:18,hostBindings:function(r,s){r&2&&(on("disabled",s._getDisabledAttribute())("aria-disabled",s._getAriaDisabled()),Mo(s.color?"mat-"+s.color:""),Pt("mat-mdc-button-disabled",s.disabled)("mat-mdc-button-disabled-interactive",s.disabledInteractive)("_mat-animation-noopable",s._animationMode==="NoopAnimations")("mat-unthemed",!s.color)("mat-mdc-button-base",!0)("mdc-fab--extended",s.extended)("mat-mdc-extended-fab",s.extended))},inputs:{extended:[ve.HasDecoratorInputTransform,"extended","extended",rt]},exportAs:["matButton"],standalone:!0,features:[Sn,dt,it],attrs:gT,ngContentSelectors:pT,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(r,s){r&1&&(Oi(mT),Re(0,"span",0),Rn(1),j(2,"span",1),Rn(3,1),L(),Rn(4,2),Re(5,"span",2)(6,"span",3)),r&2&&Pt("mdc-button__ripple",!s._isFab)("mdc-fab__ripple",s._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-fab{position:relative;display:inline-flex;position:relative;align-items:center;justify-content:center;box-sizing:border-box;width:56px;height:56px;padding:0;border:none;fill:currentColor;text-decoration:none;cursor:pointer;user-select:none;-moz-appearance:none;-webkit-appearance:none;overflow:visible;transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1),opacity 15ms linear 30ms,transform 270ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-fab .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-fab[hidden]{display:none}.mdc-fab::-moz-focus-inner{padding:0;border:0}.mdc-fab .mdc-fab__focus-ring{position:absolute}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring{border-color:CanvasText}}.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-fab.mdc-ripple-upgraded--background-focused .mdc-fab__focus-ring::after,.mdc-fab:not(.mdc-ripple-upgraded):focus .mdc-fab__focus-ring::after{border-color:CanvasText}}.mdc-fab:active,.mdc-fab:focus{outline:none}.mdc-fab:hover{cursor:pointer}.mdc-fab>svg{width:100%}.mdc-fab--mini{width:40px;height:40px}.mdc-fab--extended{border-radius:24px;padding-left:20px;padding-right:20px;width:auto;max-width:100%;height:48px;line-height:normal}.mdc-fab--extended .mdc-fab__ripple{border-radius:24px}.mdc-fab--extended .mdc-fab__icon{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mdc-fab--extended .mdc-fab__icon,.mdc-fab--extended .mdc-fab__icon[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mdc-fab--extended .mdc-fab__label+.mdc-fab__icon,.mdc-fab--extended .mdc-fab__label+.mdc-fab__icon[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}.mdc-fab--touch{margin-top:4px;margin-bottom:4px;margin-right:4px;margin-left:4px}.mdc-fab--touch .mdc-fab__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}.mdc-fab::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-fab::before{border-color:CanvasText}}.mdc-fab__label{justify-content:flex-start;text-overflow:ellipsis;white-space:nowrap;overflow-x:hidden;overflow-y:visible}.mdc-fab__icon{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mdc-fab .mdc-fab__icon{display:inline-flex;align-items:center;justify-content:center}.mdc-fab--exited{transform:scale(0);opacity:0;transition:opacity 15ms linear 150ms,transform 180ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-fab--exited .mdc-fab__icon{transform:scale(0);transition:transform 135ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mat-mdc-fab{background-color:var(--mdc-fab-container-color)}.mat-mdc-fab .mdc-fab__icon{width:var(--mdc-fab-icon-size);height:var(--mdc-fab-icon-size);font-size:var(--mdc-fab-icon-size)}.mat-mdc-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-container-shape)}.mat-mdc-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-container-shape)}.mat-mdc-mini-fab{background-color:var(--mdc-fab-small-container-color)}.mat-mdc-mini-fab .mdc-fab__icon{width:var(--mdc-fab-small-icon-size);height:var(--mdc-fab-small-icon-size);font-size:var(--mdc-fab-small-icon-size)}.mat-mdc-mini-fab:not(.mdc-fab--extended){border-radius:var(--mdc-fab-small-container-shape)}.mat-mdc-mini-fab:not(.mdc-fab--extended) .mdc-fab__ripple{border-radius:var(--mdc-fab-small-container-shape)}.mat-mdc-extended-fab{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mdc-extended-fab-container-height);border-radius:var(--mdc-extended-fab-container-shape);font-family:var(--mdc-extended-fab-label-text-font);font-size:var(--mdc-extended-fab-label-text-size);font-weight:var(--mdc-extended-fab-label-text-weight);letter-spacing:var(--mdc-extended-fab-label-text-tracking)}.mat-mdc-extended-fab .mdc-fab__ripple{border-radius:var(--mdc-extended-fab-container-shape)}.mat-mdc-fab,.mat-mdc-mini-fab{-webkit-tap-highlight-color:rgba(0,0,0,0);flex-shrink:0}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple,.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-fab .mat-mdc-button-ripple,.mat-mdc-mini-fab .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-fab .mdc-button__label,.mat-mdc-mini-fab .mdc-button__label{z-index:1}.mat-mdc-fab .mat-mdc-focus-indicator,.mat-mdc-mini-fab .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-fab:focus .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-fab._mat-animation-noopable,.mat-mdc-mini-fab._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-fab:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-mini-fab:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}.mat-mdc-fab .mat-icon,.mat-mdc-fab .material-icons,.mat-mdc-mini-fab .mat-icon,.mat-mdc-mini-fab .material-icons{transition:transform 180ms 90ms cubic-bezier(0, 0, 0.2, 1);fill:currentColor;will-change:transform}.mat-mdc-fab .mat-mdc-focus-indicator::before,.mat-mdc-mini-fab .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled,.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-fab[disabled],.mat-mdc-fab[disabled]:focus,.mat-mdc-fab.mat-mdc-button-disabled,.mat-mdc-fab.mat-mdc-button-disabled:focus,.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab[disabled]:focus,.mat-mdc-mini-fab.mat-mdc-button-disabled,.mat-mdc-mini-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-fab.mat-mdc-button-disabled-interactive,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-fab{color:var(--mat-fab-foreground-color, inherit);box-shadow:var(--mdc-fab-container-elevation-shadow)}.mat-mdc-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-touch-target-display)}.mat-mdc-fab .mat-ripple-element{background-color:var(--mat-fab-ripple-color)}.mat-mdc-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-state-layer-color)}.mat-mdc-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-disabled-state-layer-color)}.mat-mdc-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-hover-state-layer-opacity)}.mat-mdc-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-focus-state-layer-opacity)}.mat-mdc-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-pressed-state-layer-opacity)}.mat-mdc-fab:hover{box-shadow:var(--mdc-fab-hover-container-elevation-shadow)}.mat-mdc-fab:focus{box-shadow:var(--mdc-fab-focus-container-elevation-shadow)}.mat-mdc-fab:active,.mat-mdc-fab:focus:active{box-shadow:var(--mdc-fab-pressed-container-elevation-shadow)}.mat-mdc-fab[disabled],.mat-mdc-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-disabled-state-foreground-color);background-color:var(--mat-fab-disabled-state-container-color)}.mat-mdc-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-mini-fab{color:var(--mat-fab-small-foreground-color, inherit);box-shadow:var(--mdc-fab-small-container-elevation-shadow)}.mat-mdc-mini-fab .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-fab-small-touch-target-display)}.mat-mdc-mini-fab .mat-ripple-element{background-color:var(--mat-fab-small-ripple-color)}.mat-mdc-mini-fab .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-state-layer-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-fab-small-disabled-state-layer-color)}.mat-mdc-mini-fab:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-hover-state-layer-opacity)}.mat-mdc-mini-fab.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-focus-state-layer-opacity)}.mat-mdc-mini-fab:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-fab-small-pressed-state-layer-opacity)}.mat-mdc-mini-fab:hover{box-shadow:var(--mdc-fab-small-hover-container-elevation-shadow)}.mat-mdc-mini-fab:focus{box-shadow:var(--mdc-fab-small-focus-container-elevation-shadow)}.mat-mdc-mini-fab:active,.mat-mdc-mini-fab:focus:active{box-shadow:var(--mdc-fab-small-pressed-container-elevation-shadow)}.mat-mdc-mini-fab[disabled],.mat-mdc-mini-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mat-fab-small-disabled-state-foreground-color);background-color:var(--mat-fab-small-disabled-state-container-color)}.mat-mdc-mini-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab{box-shadow:var(--mdc-extended-fab-container-elevation-shadow)}.mat-mdc-extended-fab:hover{box-shadow:var(--mdc-extended-fab-hover-container-elevation-shadow)}.mat-mdc-extended-fab:focus{box-shadow:var(--mdc-extended-fab-focus-container-elevation-shadow)}.mat-mdc-extended-fab:active,.mat-mdc-extended-fab:focus:active{box-shadow:var(--mdc-extended-fab-pressed-container-elevation-shadow)}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab.mat-mdc-button-disabled{cursor:default;pointer-events:none}.mat-mdc-extended-fab[disabled],.mat-mdc-extended-fab[disabled]:focus,.mat-mdc-extended-fab.mat-mdc-button-disabled,.mat-mdc-extended-fab.mat-mdc-button-disabled:focus{box-shadow:none}.mat-mdc-extended-fab.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-extended-fab>.mat-icon,.mat-mdc-extended-fab>.material-icons{margin-left:calc(12px - 20px);margin-right:12px}[dir=rtl] .mat-mdc-extended-fab>.mat-icon,[dir=rtl] .mat-mdc-extended-fab>.material-icons,.mat-mdc-extended-fab>.mat-icon[dir=rtl],.mat-mdc-extended-fab>.material-icons[dir=rtl]{margin-left:12px;margin-right:calc(12px - 20px)}.mat-mdc-extended-fab .mat-mdc-button-touch-target{width:100%}.mat-mdc-extended-fab .mdc-button__label+.mat-icon,.mat-mdc-extended-fab .mdc-button__label+.material-icons{margin-left:12px;margin-right:calc(12px - 20px)}[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.mat-icon,[dir=rtl] .mat-mdc-extended-fab .mdc-button__label+.material-icons,.mat-mdc-extended-fab .mdc-button__label+.mat-icon[dir=rtl],.mat-mdc-extended-fab .mdc-button__label+.material-icons[dir=rtl]{margin-left:calc(12px - 20px);margin-right:12px}'],encapsulation:2,changeDetection:0});let n=e;return n})();var xb=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({imports:[kt,Ab,kt]});let n=e;return n})();var kb=function(n){let e=[],t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},IT=function(n){let e=[],t=0,i=0;for(;t<n.length;){let r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){let s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){let s=n[t++],o=n[t++],c=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{let s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},Nb={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){let s=n[r],o=r+1<n.length,c=o?n[r+1]:0,l=r+2<n.length,d=l?n[r+2]:0,f=s>>2,p=(s&3)<<4|c>>4,y=(c&15)<<2|d>>6,S=d&63;l||(S=64,o||(y=64)),i.push(t[f],t[p],t[y],t[S])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(kb(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):IT(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){let s=t[n.charAt(r++)],c=r<n.length?t[n.charAt(r)]:0;++r;let d=r<n.length?t[n.charAt(r)]:64;++r;let p=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||c==null||d==null||p==null)throw new Gu;let y=s<<2|c>>4;if(i.push(y),d!==64){let S=c<<4&240|d>>2;if(i.push(S),p!==64){let k=d<<6&192|p;i.push(k)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},Gu=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},ET=function(n){let e=kb(n);return Nb.encodeByteArray(e,!0)},Is=function(n){return ET(n).replace(/\./g,"")},Hu=function(n){try{return Nb.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function TT(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var AT=()=>TT().__FIREBASE_DEFAULTS__,CT=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},ST=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&Hu(n[1]);return e&&JSON.parse(e)},ua=()=>{try{return AT()||CT()||ST()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},Ku=n=>{var e,t;return(t=(e=ua())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},Mb=n=>{let e=Ku(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},Qu=()=>{var n;return(n=ua())===null||n===void 0?void 0:n.config},Yu=n=>{var e;return(e=ua())===null||e===void 0?void 0:e[`_${n}`]};var la=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}};function Ob(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[Is(JSON.stringify(t)),Is(JSON.stringify(o)),""].join(".")}function Pe(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Pe())}function RT(){var n;let e=(n=ua())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function da(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Fb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Lb(){let n=Pe();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Ub(){return!RT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Es(){try{return typeof indexedDB=="object"}catch{return!1}}function ha(){return new Promise((n,e)=>{try{let t=!0,i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}function jb(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}var DT="FirebaseError",Le=class n extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=DT,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,pt.prototype.create)}},pt=class{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){let i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?xT(s,i):"Error",c=`${this.serviceName}: ${o} (${r}).`;return new Le(r,c,i)}};function xT(n,e){return n.replace(PT,(t,i)=>{let r=e[i];return r!=null?String(r):`<${i}?>`})}var PT=/\{\$([^}]+)}/g;function Bb(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function cn(n,e){if(n===e)return!0;let t=Object.keys(n),i=Object.keys(e);for(let r of t){if(!i.includes(r))return!1;let s=n[r],o=e[r];if(Pb(s)&&Pb(o)){if(!cn(s,o))return!1}else if(s!==o)return!1}for(let r of i)if(!t.includes(r))return!1;return!0}function Pb(n){return n!==null&&typeof n=="object"}function Yi(n){let e=[];for(let[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function zb(n,e){let t=new Wu(n,e);return t.subscribe.bind(t)}var Wu=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");kT(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=$u),r.error===void 0&&(r.error=$u),r.complete===void 0&&(r.complete=$u);let s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function kT(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function $u(){}var NT=1e3,MT=2,OT=4*60*60*1e3,VT=.5;function Ju(n,e=NT,t=MT){let i=e*Math.pow(t,n),r=Math.round(VT*i*(Math.random()-.5)*2);return Math.min(OT,i+r)}function He(n){return n&&n._delegate?n._delegate:n}var Ne=class{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var oi="[DEFAULT]";var Xu=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let i=new la;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{let r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(LT(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(let[t,i]of this.instancesDeferred.entries()){let r=this.normalizeInstanceIdentifier(t);try{let s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return b(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(let[s,o]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(s);i===c&&o.resolve(r)}return r}onInit(e,t){var i;let r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);let o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){let i=this.onInitCallbacks.get(t);if(i)for(let r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:FT(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function FT(n){return n===oi?void 0:n}function LT(n){return n.instantiationMode==="EAGER"}var fa=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Xu(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var UT=[],te=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}(te||{}),jT={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},BT=te.INFO,zT={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},qT=(n,e,...t)=>{if(e<n.logLevel)return;let i=new Date().toISOString(),r=zT[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Bt=class{constructor(e){this.name=e,this._logLevel=BT,this._logHandler=qT,this._userLogHandler=null,UT.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jT[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}};var $T=(n,e)=>e.some(t=>n instanceof t),qb,$b;function GT(){return qb||(qb=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function WT(){return $b||($b=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Gb=new WeakMap,ed=new WeakMap,Wb=new WeakMap,Zu=new WeakMap,nd=new WeakMap;function HT(n){let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(zt(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&Gb.set(t,n)}).catch(()=>{}),nd.set(e,n),e}function KT(n){if(ed.has(n))return;let e=new Promise((t,i)=>{let r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});ed.set(n,e)}var td={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return ed.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Wb.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Hb(n){td=n(td)}function QT(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let i=n.call(ma(this),e,...t);return Wb.set(i,e.sort?e.sort():[e]),zt(i)}:WT().includes(n)?function(...e){return n.apply(ma(this),e),zt(Gb.get(this))}:function(...e){return zt(n.apply(ma(this),e))}}function YT(n){return typeof n=="function"?QT(n):(n instanceof IDBTransaction&&KT(n),$T(n,GT())?new Proxy(n,td):n)}function zt(n){if(n instanceof IDBRequest)return HT(n);if(Zu.has(n))return Zu.get(n);let e=YT(n);return e!==n&&(Zu.set(n,e),nd.set(e,n)),e}var ma=n=>nd.get(n);function pa(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){let o=indexedDB.open(n,e),c=zt(o);return i&&o.addEventListener("upgradeneeded",l=>{i(zt(o.result),l.oldVersion,l.newVersion,zt(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),c.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",d=>r(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}var JT=["get","getKey","getAll","getAllKeys","count"],XT=["put","add","delete","clear"],id=new Map;function Kb(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(id.get(e))return id.get(e);let t=e.replace(/FromIndex$/,""),i=e!==t,r=XT.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||JT.includes(t)))return;let s=function(o,...c){return b(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),d=l.store;return i&&(d=d.index(c.shift())),(yield Promise.all([d[t](...c),r&&l.done]))[0]})};return id.set(e,s),s}Hb(n=>be(N({},n),{get:(e,t,i)=>Kb(e,t)||n.get(e,t,i),has:(e,t)=>!!Kb(e,t)||n.has(e,t)}));var sd=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(ZT(t)){let i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}};function ZT(n){let e=n.getComponent();return e?.type==="VERSION"}var od="@firebase/app",Qb="0.10.8";var ai=new Bt("@firebase/app"),eA="@firebase/app-compat",tA="@firebase/analytics-compat",nA="@firebase/analytics",iA="@firebase/app-check-compat",rA="@firebase/app-check",sA="@firebase/auth",oA="@firebase/auth-compat",aA="@firebase/database",cA="@firebase/database-compat",lA="@firebase/functions",uA="@firebase/functions-compat",dA="@firebase/installations",hA="@firebase/installations-compat",fA="@firebase/messaging",mA="@firebase/messaging-compat",pA="@firebase/performance",gA="@firebase/performance-compat",bA="@firebase/remote-config",vA="@firebase/remote-config-compat",_A="@firebase/storage",yA="@firebase/storage-compat",wA="@firebase/firestore",IA="@firebase/vertexai-preview",EA="@firebase/firestore-compat",TA="firebase",AA="10.12.5";var ad="[DEFAULT]",CA={[od]:"fire-core",[eA]:"fire-core-compat",[nA]:"fire-analytics",[tA]:"fire-analytics-compat",[rA]:"fire-app-check",[iA]:"fire-app-check-compat",[sA]:"fire-auth",[oA]:"fire-auth-compat",[aA]:"fire-rtdb",[cA]:"fire-rtdb-compat",[lA]:"fire-fn",[uA]:"fire-fn-compat",[dA]:"fire-iid",[hA]:"fire-iid-compat",[fA]:"fire-fcm",[mA]:"fire-fcm-compat",[pA]:"fire-perf",[gA]:"fire-perf-compat",[bA]:"fire-rc",[vA]:"fire-rc-compat",[_A]:"fire-gcs",[yA]:"fire-gcs-compat",[wA]:"fire-fst",[EA]:"fire-fst-compat",[IA]:"fire-vertex","fire-js":"fire-js",[TA]:"fire-js-all"};var ga=new Map,SA=new Map,cd=new Map;function Yb(n,e){try{n.container.addComponent(e)}catch(t){ai.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function st(n){let e=n.name;if(cd.has(e))return ai.debug(`There were multiple attempts to register component ${e}.`),!1;cd.set(e,n);for(let t of ga.values())Yb(t,n);for(let t of SA.values())Yb(t,n);return!0}function Nt(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function qt(n){return n.settings!==void 0}var RA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Mn=new pt("app","Firebase",RA);var ld=class{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Ne("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Mn.create("app-deleted",{appName:this._name})}};var On=AA;function hd(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let i=Object.assign({name:ad,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Mn.create("bad-app-name",{appName:String(r)});if(t||(t=Qu()),!t)throw Mn.create("no-options");let s=ga.get(r);if(s){if(cn(t,s.options)&&cn(i,s.config))return s;throw Mn.create("duplicate-app",{appName:r})}let o=new fa(r);for(let l of cd.values())o.addComponent(l);let c=new ld(t,i,o);return ga.set(r,c),c}function ci(n=ad){let e=ga.get(n);if(!e&&n===ad&&Qu())return hd();if(!e)throw Mn.create("no-app",{appName:n});return e}function Ue(n,e,t){var i;let r=(i=CA[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);let s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){let c=[`Unable to register library "${r}" with version "${e}":`];s&&c.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ai.warn(c.join(" "));return}st(new Ne(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var DA="firebase-heartbeat-database",xA=1,Ts="firebase-heartbeat-store",rd=null;function ev(){return rd||(rd=pa(DA,xA,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Ts)}catch(t){console.warn(t)}}}}).catch(n=>{throw Mn.create("idb-open",{originalErrorMessage:n.message})})),rd}function PA(n){return b(this,null,function*(){try{let t=(yield ev()).transaction(Ts),i=yield t.objectStore(Ts).get(tv(n));return yield t.done,i}catch(e){if(e instanceof Le)ai.warn(e.message);else{let t=Mn.create("idb-get",{originalErrorMessage:e?.message});ai.warn(t.message)}}})}function Jb(n,e){return b(this,null,function*(){try{let i=(yield ev()).transaction(Ts,"readwrite");yield i.objectStore(Ts).put(e,tv(n)),yield i.done}catch(t){if(t instanceof Le)ai.warn(t.message);else{let i=Mn.create("idb-set",{originalErrorMessage:t?.message});ai.warn(i.message)}}})}function tv(n){return`${n.name}!${n.options.appId}`}var kA=1024,NA=30*24*60*60*1e3,ud=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new dd(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}triggerHeartbeat(){return b(this,null,function*(){var e,t;let r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Xb();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{let c=new Date(o.date).valueOf();return Date.now()-c<=NA}),this._storage.overwrite(this._heartbeatsCache)})}getHeartbeatsHeader(){return b(this,null,function*(){var e;if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=Xb(),{heartbeatsToSend:i,unsentEntries:r}=MA(this._heartbeatsCache.heartbeats),s=Is(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s})}};function Xb(){return new Date().toISOString().substring(0,10)}function MA(n,e=kA){let t=[],i=n.slice();for(let r of n){let s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Zb(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Zb(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}var dd=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return b(this,null,function*(){return Es()?ha().then(()=>!0).catch(()=>!1):!1})}read(){return b(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield PA(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Jb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return b(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let r=yield this.read();return Jb(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return})}};function Zb(n){return Is(JSON.stringify({version:2,heartbeats:n})).length}function OA(n){st(new Ne("platform-logger",e=>new sd(e),"PRIVATE")),st(new Ne("heartbeat",e=>new ud(e),"PRIVATE")),Ue(od,Qb,n),Ue(od,Qb,"esm2017"),Ue("fire-js","")}OA("");var VA="firebase",FA="10.12.5";Ue(VA,FA,"app");var rv="@firebase/installations",gd="0.6.8";var sv=1e4,ov=`w:${gd}`,av="FIS_v2",LA="https://firebaseinstallations.googleapis.com/v1",UA=60*60*1e3,jA="installations",BA="Installations";var zA={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ui=new pt(jA,BA,zA);function cv(n){return n instanceof Le&&n.code.includes("request-failed")}function lv({projectId:n}){return`${LA}/projects/${n}/installations`}function uv(n){return{token:n.token,requestStatus:2,expiresIn:$A(n.expiresIn),creationTime:Date.now()}}function dv(n,e){return b(this,null,function*(){let i=(yield e.json()).error;return ui.create("request-failed",{requestName:n,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})})}function hv({apiKey:n}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n})}function qA(n,{refreshToken:e}){let t=hv(n);return t.append("Authorization",GA(e)),t}function fv(n){return b(this,null,function*(){let e=yield n();return e.status>=500&&e.status<600?n():e})}function $A(n){return Number(n.replace("s","000"))}function GA(n){return`${av} ${n}`}function WA(i,r){return b(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},{fid:t}){let s=lv(n),o=hv(n),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let l={fid:t,authVersion:av,appId:n.appId,sdkVersion:ov},d={method:"POST",headers:o,body:JSON.stringify(l)},f=yield fv(()=>fetch(s,d));if(f.ok){let p=yield f.json();return{fid:p.fid||t,registrationStatus:2,refreshToken:p.refreshToken,authToken:uv(p.authToken)}}else throw yield dv("Create Installation",f)})}function mv(n){return new Promise(e=>{setTimeout(e,n)})}function HA(n){return btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_")}var KA=/^[cdef][\w-]{21}$/,pd="";function QA(){try{let n=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(n),n[0]=112+n[0]%16;let t=YA(n);return KA.test(t)?t:pd}catch{return pd}}function YA(n){return HA(n).substr(0,22)}function va(n){return`${n.appName}!${n.appId}`}var pv=new Map;function gv(n,e){let t=va(n);bv(t,e),JA(t,e)}function bv(n,e){let t=pv.get(n);if(t)for(let i of t)i(e)}function JA(n,e){let t=XA();t&&t.postMessage({key:n,fid:e}),ZA()}var li=null;function XA(){return!li&&"BroadcastChannel"in self&&(li=new BroadcastChannel("[Firebase] FID Change"),li.onmessage=n=>{bv(n.data.key,n.data.fid)}),li}function ZA(){pv.size===0&&li&&(li.close(),li=null)}var eC="firebase-installations-database",tC=1,di="firebase-installations-store",fd=null;function bd(){return fd||(fd=pa(eC,tC,{upgrade:(n,e)=>{switch(e){case 0:n.createObjectStore(di)}}})),fd}function ba(n,e){return b(this,null,function*(){let t=va(n),r=(yield bd()).transaction(di,"readwrite"),s=r.objectStore(di),o=yield s.get(t);return yield s.put(e,t),yield r.done,(!o||o.fid!==e.fid)&&gv(n,e.fid),e})}function vv(n){return b(this,null,function*(){let e=va(n),i=(yield bd()).transaction(di,"readwrite");yield i.objectStore(di).delete(e),yield i.done})}function _a(n,e){return b(this,null,function*(){let t=va(n),r=(yield bd()).transaction(di,"readwrite"),s=r.objectStore(di),o=yield s.get(t),c=e(o);return c===void 0?yield s.delete(t):yield s.put(c,t),yield r.done,c&&(!o||o.fid!==c.fid)&&gv(n,c.fid),c})}function vd(n){return b(this,null,function*(){let e,t=yield _a(n.appConfig,i=>{let r=nC(i),s=iC(n,r);return e=s.registrationPromise,s.installationEntry});return t.fid===pd?{installationEntry:yield e}:{installationEntry:t,registrationPromise:e}})}function nC(n){let e=n||{fid:QA(),registrationStatus:0};return _v(e)}function iC(n,e){if(e.registrationStatus===0){if(!navigator.onLine){let r=Promise.reject(ui.create("app-offline"));return{installationEntry:e,registrationPromise:r}}let t={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=rC(n,t);return{installationEntry:t,registrationPromise:i}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:sC(n)}:{installationEntry:e}}function rC(n,e){return b(this,null,function*(){try{let t=yield WA(n,e);return ba(n.appConfig,t)}catch(t){throw cv(t)&&t.customData.serverCode===409?yield vv(n.appConfig):yield ba(n.appConfig,{fid:e.fid,registrationStatus:0}),t}})}function sC(n){return b(this,null,function*(){let e=yield nv(n.appConfig);for(;e.registrationStatus===1;)yield mv(100),e=yield nv(n.appConfig);if(e.registrationStatus===0){let{installationEntry:t,registrationPromise:i}=yield vd(n);return i||t}return e})}function nv(n){return _a(n,e=>{if(!e)throw ui.create("installation-not-found");return _v(e)})}function _v(n){return oC(n)?{fid:n.fid,registrationStatus:0}:n}function oC(n){return n.registrationStatus===1&&n.registrationTime+sv<Date.now()}function aC(i,r){return b(this,arguments,function*({appConfig:n,heartbeatServiceProvider:e},t){let s=cC(n,t),o=qA(n,t),c=e.getImmediate({optional:!0});if(c){let p=yield c.getHeartbeatsHeader();p&&o.append("x-firebase-client",p)}let l={installation:{sdkVersion:ov,appId:n.appId}},d={method:"POST",headers:o,body:JSON.stringify(l)},f=yield fv(()=>fetch(s,d));if(f.ok){let p=yield f.json();return uv(p)}else throw yield dv("Generate Auth Token",f)})}function cC(n,{fid:e}){return`${lv(n)}/${e}/authTokens:generate`}function _d(n,e=!1){return b(this,null,function*(){let t,i=yield _a(n.appConfig,s=>{if(!yv(s))throw ui.create("not-registered");let o=s.authToken;if(!e&&dC(o))return s;if(o.requestStatus===1)return t=lC(n,e),s;{if(!navigator.onLine)throw ui.create("app-offline");let c=fC(s);return t=uC(n,c),c}});return t?yield t:i.authToken})}function lC(n,e){return b(this,null,function*(){let t=yield iv(n.appConfig);for(;t.authToken.requestStatus===1;)yield mv(100),t=yield iv(n.appConfig);let i=t.authToken;return i.requestStatus===0?_d(n,e):i})}function iv(n){return _a(n,e=>{if(!yv(e))throw ui.create("not-registered");let t=e.authToken;return mC(t)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}function uC(n,e){return b(this,null,function*(){try{let t=yield aC(n,e),i=Object.assign(Object.assign({},e),{authToken:t});return yield ba(n.appConfig,i),t}catch(t){if(cv(t)&&(t.customData.serverCode===401||t.customData.serverCode===404))yield vv(n.appConfig);else{let i=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});yield ba(n.appConfig,i)}throw t}})}function yv(n){return n!==void 0&&n.registrationStatus===2}function dC(n){return n.requestStatus===2&&!hC(n)}function hC(n){let e=Date.now();return e<n.creationTime||n.creationTime+n.expiresIn<e+UA}function fC(n){let e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},n),{authToken:e})}function mC(n){return n.requestStatus===1&&n.requestTime+sv<Date.now()}function pC(n){return b(this,null,function*(){let e=n,{installationEntry:t,registrationPromise:i}=yield vd(e);return i?i.catch(console.error):_d(e).catch(console.error),t.fid})}function gC(n,e=!1){return b(this,null,function*(){let t=n;return yield bC(t),(yield _d(t,e)).token})}function bC(n){return b(this,null,function*(){let{registrationPromise:e}=yield vd(n);e&&(yield e)})}function vC(n){if(!n||!n.options)throw md("App Configuration");if(!n.name)throw md("App Name");let e=["projectId","apiKey","appId"];for(let t of e)if(!n.options[t])throw md(t);return{appName:n.name,projectId:n.options.projectId,apiKey:n.options.apiKey,appId:n.options.appId}}function md(n){return ui.create("missing-app-config-values",{valueName:n})}var wv="installations",_C="installations-internal",yC=n=>{let e=n.getProvider("app").getImmediate(),t=vC(e),i=Nt(e,"heartbeat");return{app:e,appConfig:t,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},wC=n=>{let e=n.getProvider("app").getImmediate(),t=Nt(e,wv).getImmediate();return{getId:()=>pC(t),getToken:r=>gC(t,r)}};function IC(){st(new Ne(wv,yC,"PUBLIC")),st(new Ne(_C,wC,"PRIVATE"))}IC();Ue(rv,gd);Ue(rv,gd,"esm2017");var ya="analytics",EC="firebase_id",TC="origin",AC=60*1e3,CC="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Cd="https://www.googletagmanager.com/gtag/js";var ot=new Bt("@firebase/analytics");var SC={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},gt=new pt("analytics","Analytics",SC);function RC(n){if(!n.startsWith(Cd)){let e=gt.create("invalid-gtag-resource",{gtagURL:n});return ot.warn(e.message),""}return n}function Rv(n){return Promise.all(n.map(e=>e.catch(t=>t)))}function DC(n,e){let t;return window.trustedTypes&&(t=window.trustedTypes.createPolicy(n,e)),t}function xC(n,e){let t=DC("firebase-js-sdk-policy",{createScriptURL:RC}),i=document.createElement("script"),r=`${Cd}?l=${n}&id=${e}`;i.src=t?t?.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function PC(n){let e=[];return Array.isArray(window[n])?e=window[n]:window[n]=e,e}function kC(n,e,t,i,r,s){return b(this,null,function*(){let o=i[r];try{if(o)yield e[o];else{let l=(yield Rv(t)).find(d=>d.measurementId===r);l&&(yield e[l.appId])}}catch(c){ot.error(c)}n("config",r,s)})}function NC(n,e,t,i,r){return b(this,null,function*(){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);let c=yield Rv(t);for(let l of o){let d=c.find(p=>p.measurementId===l),f=d&&e[d.appId];if(f)s.push(f);else{s=[];break}}}s.length===0&&(s=Object.values(e)),yield Promise.all(s),n("event",i,r||{})}catch(s){ot.error(s)}})}function MC(n,e,t,i){function r(s,...o){return b(this,null,function*(){try{if(s==="event"){let[c,l]=o;yield NC(n,e,t,c,l)}else if(s==="config"){let[c,l]=o;yield kC(n,e,t,i,c,l)}else if(s==="consent"){let[c,l]=o;n("consent",c,l)}else if(s==="get"){let[c,l,d]=o;n("get",c,l,d)}else if(s==="set"){let[c]=o;n("set",c)}else n(s,...o)}catch(c){ot.error(c)}})}return r}function OC(n,e,t,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=MC(s,n,e,t),{gtagCore:s,wrappedGtag:window[r]}}function VC(n){let e=window.document.getElementsByTagName("script");for(let t of Object.values(e))if(t.src&&t.src.includes(Cd)&&t.src.includes(n))return t;return null}var FC=30,LC=1e3,wd=class{constructor(e={},t=LC){this.throttleMetadata=e,this.intervalMillis=t}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,t){this.throttleMetadata[e]=t}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}},Dv=new wd;function UC(n){return new Headers({Accept:"application/json","x-goog-api-key":n})}function jC(n){return b(this,null,function*(){var e;let{appId:t,apiKey:i}=n,r={method:"GET",headers:UC(i)},s=CC.replace("{app-id}",t),o=yield fetch(s,r);if(o.status!==200&&o.status!==304){let c="";try{let l=yield o.json();!((e=l.error)===null||e===void 0)&&e.message&&(c=l.error.message)}catch{}throw gt.create("config-fetch-failed",{httpStatus:o.status,responseMessage:c})}return o.json()})}function BC(i){return b(this,arguments,function*(n,e=Dv,t){let{appId:r,apiKey:s,measurementId:o}=n.options;if(!r)throw gt.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw gt.create("no-api-key")}let c=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new Id;return setTimeout(()=>b(this,null,function*(){l.abort()}),t!==void 0?t:AC),xv({appId:r,apiKey:s,measurementId:o},c,l,e)})}function xv(s,o,c){return b(this,arguments,function*(n,{throttleEndTimeMillis:e,backoffCount:t},i,r=Dv){var l;let{appId:d,measurementId:f}=n;try{yield zC(i,e)}catch(p){if(f)return ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${p?.message}]`),{appId:d,measurementId:f};throw p}try{let p=yield jC(n);return r.deleteThrottleMetadata(d),p}catch(p){let y=p;if(!qC(y)){if(r.deleteThrottleMetadata(d),f)return ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${f} provided in the "measurementId" field in the local Firebase config. [${y?.message}]`),{appId:d,measurementId:f};throw p}let S=Number((l=y?.customData)===null||l===void 0?void 0:l.httpStatus)===503?Ju(t,r.intervalMillis,FC):Ju(t,r.intervalMillis),k={throttleEndTimeMillis:Date.now()+S,backoffCount:t+1};return r.setThrottleMetadata(d,k),ot.debug(`Calling attemptFetch again in ${S} millis`),xv(n,k,i,r)}})}function zC(n,e){return new Promise((t,i)=>{let r=Math.max(e-Date.now(),0),s=setTimeout(t,r);n.addEventListener(()=>{clearTimeout(s),i(gt.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function qC(n){if(!(n instanceof Le)||!n.customData)return!1;let e=Number(n.customData.httpStatus);return e===429||e===500||e===503||e===504}var Id=class{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}};var Ed;function $C(n,e,t,i,r){return b(this,null,function*(){if(r&&r.global){n("event",t,i);return}else{let s=yield e,o=Object.assign(Object.assign({},i),{send_to:s});n("event",t,o)}})}var Td;function GC(n){Td=n}function WC(n){Ed=n}function HC(){return b(this,null,function*(){if(Es())try{yield ha()}catch(n){return ot.warn(gt.create("indexeddb-unavailable",{errorInfo:n?.toString()}).message),!1}else return ot.warn(gt.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0})}function KC(n,e,t,i,r,s,o){return b(this,null,function*(){var c;let l=BC(n);l.then(S=>{t[S.measurementId]=S.appId,n.options.measurementId&&S.measurementId!==n.options.measurementId&&ot.warn(`The measurement ID in the local Firebase config (${n.options.measurementId}) does not match the measurement ID fetched from the server (${S.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(S=>ot.error(S)),e.push(l);let d=HC().then(S=>{if(S)return i.getId()}),[f,p]=yield Promise.all([l,d]);VC(s)||xC(s,f.measurementId),Td&&(r("consent","default",Td),GC(void 0)),r("js",new Date);let y=(c=o?.config)!==null&&c!==void 0?c:{};return y[TC]="firebase",y.update=!0,p!=null&&(y[EC]=p),r("config",f.measurementId,y),Ed&&(r("set",Ed),WC(void 0)),f.measurementId})}var Ad=class{constructor(e){this.app=e}_delete(){return delete As[this.app.options.appId],Promise.resolve()}},As={},Iv=[],Ev={},yd="dataLayer",QC="gtag",Tv,Pv,Av=!1;function YC(){let n=[];if(da()&&n.push("This is a browser extension environment."),jb()||n.push("Cookies are not available."),n.length>0){let e=n.map((i,r)=>`(${r+1}) ${i}`).join(" "),t=gt.create("invalid-analytics-context",{errorInfo:e});ot.warn(t.message)}}function JC(n,e,t){YC();let i=n.options.appId;if(!i)throw gt.create("no-app-id");if(!n.options.apiKey)if(n.options.measurementId)ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${n.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw gt.create("no-api-key");if(As[i]!=null)throw gt.create("already-exists",{id:i});if(!Av){PC(yd);let{wrappedGtag:s,gtagCore:o}=OC(As,Iv,Ev,yd,QC);Pv=s,Tv=o,Av=!0}return As[i]=KC(n,Iv,Ev,e,Tv,yd,t),new Ad(n)}function kv(n=ci()){n=He(n);let e=Nt(n,ya);return e.isInitialized()?e.getImmediate():XC(n)}function XC(n,e={}){let t=Nt(n,ya);if(t.isInitialized()){let r=t.getImmediate();if(cn(e,t.getOptions()))return r;throw gt.create("already-initialized")}return t.initialize({options:e})}function ZC(n,e,t,i){n=He(n),$C(Pv,As[n.app.options.appId],e,t,i).catch(r=>ot.error(r))}var Cv="@firebase/analytics",Sv="0.10.7";function eS(){st(new Ne(ya,(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("installations-internal").getImmediate();return JC(i,r,t)},"PUBLIC")),st(new Ne("analytics-internal",n,"PRIVATE")),Ue(Cv,Sv),Ue(Cv,Sv,"esm2017");function n(e){try{let t=e.getProvider(ya).getImmediate();return{logEvent:(i,r,s)=>ZC(t,i,r,s)}}catch(t){throw gt.create("interop-component-reg-failed",{reason:t})}}}eS();var Nv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Mv={};var Vn,Sd;(function(){var n;function e(I,g){function _(){}_.prototype=g.prototype,I.D=g.prototype,I.prototype=new _,I.prototype.constructor=I,I.C=function(w,E,A){for(var v=Array(arguments.length-2),en=2;en<arguments.length;en++)v[en-2]=arguments[en];return g.prototype[E].apply(w,v)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(I,g,_){_||(_=0);var w=Array(16);if(typeof g=="string")for(var E=0;16>E;++E)w[E]=g.charCodeAt(_++)|g.charCodeAt(_++)<<8|g.charCodeAt(_++)<<16|g.charCodeAt(_++)<<24;else for(E=0;16>E;++E)w[E]=g[_++]|g[_++]<<8|g[_++]<<16|g[_++]<<24;g=I.g[0],_=I.g[1],E=I.g[2];var A=I.g[3],v=g+(A^_&(E^A))+w[0]+3614090360&4294967295;g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+w[1]+3905402710&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+w[2]+606105819&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+w[3]+3250441966&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(A^_&(E^A))+w[4]+4118548399&4294967295,g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+w[5]+1200080426&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+w[6]+2821735955&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+w[7]+4249261313&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(A^_&(E^A))+w[8]+1770035416&4294967295,g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+w[9]+2336552879&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+w[10]+4294925233&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+w[11]+2304563134&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(A^_&(E^A))+w[12]+1804603682&4294967295,g=_+(v<<7&4294967295|v>>>25),v=A+(E^g&(_^E))+w[13]+4254626195&4294967295,A=g+(v<<12&4294967295|v>>>20),v=E+(_^A&(g^_))+w[14]+2792965006&4294967295,E=A+(v<<17&4294967295|v>>>15),v=_+(g^E&(A^g))+w[15]+1236535329&4294967295,_=E+(v<<22&4294967295|v>>>10),v=g+(E^A&(_^E))+w[1]+4129170786&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+w[6]+3225465664&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+w[11]+643717713&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+w[0]+3921069994&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(E^A&(_^E))+w[5]+3593408605&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+w[10]+38016083&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+w[15]+3634488961&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+w[4]+3889429448&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(E^A&(_^E))+w[9]+568446438&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+w[14]+3275163606&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+w[3]+4107603335&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+w[8]+1163531501&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(E^A&(_^E))+w[13]+2850285829&4294967295,g=_+(v<<5&4294967295|v>>>27),v=A+(_^E&(g^_))+w[2]+4243563512&4294967295,A=g+(v<<9&4294967295|v>>>23),v=E+(g^_&(A^g))+w[7]+1735328473&4294967295,E=A+(v<<14&4294967295|v>>>18),v=_+(A^g&(E^A))+w[12]+2368359562&4294967295,_=E+(v<<20&4294967295|v>>>12),v=g+(_^E^A)+w[5]+4294588738&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+w[8]+2272392833&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+w[11]+1839030562&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+w[14]+4259657740&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(_^E^A)+w[1]+2763975236&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+w[4]+1272893353&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+w[7]+4139469664&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+w[10]+3200236656&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(_^E^A)+w[13]+681279174&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+w[0]+3936430074&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+w[3]+3572445317&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+w[6]+76029189&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(_^E^A)+w[9]+3654602809&4294967295,g=_+(v<<4&4294967295|v>>>28),v=A+(g^_^E)+w[12]+3873151461&4294967295,A=g+(v<<11&4294967295|v>>>21),v=E+(A^g^_)+w[15]+530742520&4294967295,E=A+(v<<16&4294967295|v>>>16),v=_+(E^A^g)+w[2]+3299628645&4294967295,_=E+(v<<23&4294967295|v>>>9),v=g+(E^(_|~A))+w[0]+4096336452&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+w[7]+1126891415&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+w[14]+2878612391&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+w[5]+4237533241&4294967295,_=E+(v<<21&4294967295|v>>>11),v=g+(E^(_|~A))+w[12]+1700485571&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+w[3]+2399980690&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+w[10]+4293915773&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+w[1]+2240044497&4294967295,_=E+(v<<21&4294967295|v>>>11),v=g+(E^(_|~A))+w[8]+1873313359&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+w[15]+4264355552&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+w[6]+2734768916&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+w[13]+1309151649&4294967295,_=E+(v<<21&4294967295|v>>>11),v=g+(E^(_|~A))+w[4]+4149444226&4294967295,g=_+(v<<6&4294967295|v>>>26),v=A+(_^(g|~E))+w[11]+3174756917&4294967295,A=g+(v<<10&4294967295|v>>>22),v=E+(g^(A|~_))+w[2]+718787259&4294967295,E=A+(v<<15&4294967295|v>>>17),v=_+(A^(E|~g))+w[9]+3951481745&4294967295,I.g[0]=I.g[0]+g&4294967295,I.g[1]=I.g[1]+(E+(v<<21&4294967295|v>>>11))&4294967295,I.g[2]=I.g[2]+E&4294967295,I.g[3]=I.g[3]+A&4294967295}i.prototype.u=function(I,g){g===void 0&&(g=I.length);for(var _=g-this.blockSize,w=this.B,E=this.h,A=0;A<g;){if(E==0)for(;A<=_;)r(this,I,A),A+=this.blockSize;if(typeof I=="string"){for(;A<g;)if(w[E++]=I.charCodeAt(A++),E==this.blockSize){r(this,w),E=0;break}}else for(;A<g;)if(w[E++]=I[A++],E==this.blockSize){r(this,w),E=0;break}}this.h=E,this.o+=g},i.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var g=1;g<I.length-8;++g)I[g]=0;var _=8*this.o;for(g=I.length-8;g<I.length;++g)I[g]=_&255,_/=256;for(this.u(I),I=Array(16),g=_=0;4>g;++g)for(var w=0;32>w;w+=8)I[_++]=this.g[g]>>>w&255;return I};function s(I,g){var _=c;return Object.prototype.hasOwnProperty.call(_,I)?_[I]:_[I]=g(I)}function o(I,g){this.h=g;for(var _=[],w=!0,E=I.length-1;0<=E;E--){var A=I[E]|0;w&&A==g||(_[E]=A,w=!1)}this.g=_}var c={};function l(I){return-128<=I&&128>I?s(I,function(g){return new o([g|0],0>g?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return x(d(-I));for(var g=[],_=1,w=0;I>=_;w++)g[w]=I/_|0,_*=4294967296;return new o(g,0)}function f(I,g){if(I.length==0)throw Error("number format error: empty string");if(g=g||10,2>g||36<g)throw Error("radix out of range: "+g);if(I.charAt(0)=="-")return x(f(I.substring(1),g));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var _=d(Math.pow(g,8)),w=p,E=0;E<I.length;E+=8){var A=Math.min(8,I.length-E),v=parseInt(I.substring(E,E+A),g);8>A?(A=d(Math.pow(g,A)),w=w.j(A).add(d(v))):(w=w.j(_),w=w.add(d(v)))}return w}var p=l(0),y=l(1),S=l(16777216);n=o.prototype,n.m=function(){if(M(this))return-x(this).m();for(var I=0,g=1,_=0;_<this.g.length;_++){var w=this.i(_);I+=(0<=w?w:4294967296+w)*g,g*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(M(this))return"-"+x(this).toString(I);for(var g=d(Math.pow(I,6)),_=this,w="";;){var E=me(_,g).g;_=G(_,E.j(g));var A=((0<_.g.length?_.g[0]:_.h)>>>0).toString(I);if(_=E,k(_))return A+w;for(;6>A.length;)A="0"+A;w=A+w}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var g=0;g<I.g.length;g++)if(I.g[g]!=0)return!1;return!0}function M(I){return I.h==-1}n.l=function(I){return I=G(this,I),M(I)?-1:k(I)?0:1};function x(I){for(var g=I.g.length,_=[],w=0;w<g;w++)_[w]=~I.g[w];return new o(_,~I.h).add(y)}n.abs=function(){return M(this)?x(this):this},n.add=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0,E=0;E<=g;E++){var A=w+(this.i(E)&65535)+(I.i(E)&65535),v=(A>>>16)+(this.i(E)>>>16)+(I.i(E)>>>16);w=v>>>16,A&=65535,v&=65535,_[E]=v<<16|A}return new o(_,_[_.length-1]&-2147483648?-1:0)};function G(I,g){return I.add(x(g))}n.j=function(I){if(k(this)||k(I))return p;if(M(this))return M(I)?x(this).j(x(I)):x(x(this).j(I));if(M(I))return x(this.j(x(I)));if(0>this.l(S)&&0>I.l(S))return d(this.m()*I.m());for(var g=this.g.length+I.g.length,_=[],w=0;w<2*g;w++)_[w]=0;for(w=0;w<this.g.length;w++)for(var E=0;E<I.g.length;E++){var A=this.i(w)>>>16,v=this.i(w)&65535,en=I.i(E)>>>16,Cr=I.i(E)&65535;_[2*w+2*E]+=v*Cr,X(_,2*w+2*E),_[2*w+2*E+1]+=A*Cr,X(_,2*w+2*E+1),_[2*w+2*E+1]+=v*en,X(_,2*w+2*E+1),_[2*w+2*E+2]+=A*en,X(_,2*w+2*E+2)}for(w=0;w<g;w++)_[w]=_[2*w+1]<<16|_[2*w];for(w=g;w<2*g;w++)_[w]=0;return new o(_,0)};function X(I,g){for(;(I[g]&65535)!=I[g];)I[g+1]+=I[g]>>>16,I[g]&=65535,g++}function ie(I,g){this.g=I,this.h=g}function me(I,g){if(k(g))throw Error("division by zero");if(k(I))return new ie(p,p);if(M(I))return g=me(x(I),g),new ie(x(g.g),x(g.h));if(M(g))return g=me(I,x(g)),new ie(x(g.g),g.h);if(30<I.g.length){if(M(I)||M(g))throw Error("slowDivide_ only works with positive integers.");for(var _=y,w=g;0>=w.l(I);)_=Je(_),w=Je(w);var E=le(_,1),A=le(w,1);for(w=le(w,2),_=le(_,2);!k(w);){var v=A.add(w);0>=v.l(I)&&(E=E.add(_),A=v),w=le(w,1),_=le(_,1)}return g=G(I,E.j(g)),new ie(E,g)}for(E=p;0<=I.l(g);){for(_=Math.max(1,Math.floor(I.m()/g.m())),w=Math.ceil(Math.log(_)/Math.LN2),w=48>=w?1:Math.pow(2,w-48),A=d(_),v=A.j(g);M(v)||0<v.l(I);)_-=w,A=d(_),v=A.j(g);k(A)&&(A=y),E=E.add(A),I=G(I,v)}return new ie(E,I)}n.A=function(I){return me(this,I).h},n.and=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)&I.i(w);return new o(_,this.h&I.h)},n.or=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)|I.i(w);return new o(_,this.h|I.h)},n.xor=function(I){for(var g=Math.max(this.g.length,I.g.length),_=[],w=0;w<g;w++)_[w]=this.i(w)^I.i(w);return new o(_,this.h^I.h)};function Je(I){for(var g=I.g.length+1,_=[],w=0;w<g;w++)_[w]=I.i(w)<<1|I.i(w-1)>>>31;return new o(_,I.h)}function le(I,g){var _=g>>5;g%=32;for(var w=I.g.length-_,E=[],A=0;A<w;A++)E[A]=0<g?I.i(A+_)>>>g|I.i(A+_+1)<<32-g:I.i(A+_);return new o(E,I.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Sd=Mv.Md5=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,Vn=Mv.Integer=o}).apply(typeof Nv<"u"?Nv:typeof self<"u"?self:typeof window<"u"?window:{});var wa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ln={};var Rd,Dd,Ji,xd,Cs,Ia,Pd,kd,Nd;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,u,h){return a==Array.prototype||a==Object.prototype||(a[u]=h.value),a};function t(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof wa=="object"&&wa];for(var u=0;u<a.length;++u){var h=a[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var i=t(this);function r(a,u){if(u)e:{var h=i;a=a.split(".");for(var m=0;m<a.length-1;m++){var T=a[m];if(!(T in h))break e;h=h[T]}a=a[a.length-1],m=h[a],u=u(m),u!=m&&u!=null&&e(h,a,{configurable:!0,writable:!0,value:u})}}function s(a,u){a instanceof String&&(a+="");var h=0,m=!1,T={next:function(){if(!m&&h<a.length){var C=h++;return{value:u(C,a[C]),done:!1}}return m=!0,{done:!0,value:void 0}}};return T[Symbol.iterator]=function(){return T},T}r("Array.prototype.values",function(a){return a||function(){return s(this,function(u,h){return h})}});var o=o||{},c=this||self;function l(a){var u=typeof a;return u=u!="object"?u:a?Array.isArray(a)?"array":u:"null",u=="array"||u=="object"&&typeof a.length=="number"}function d(a){var u=typeof a;return u=="object"&&a!=null||u=="function"}function f(a,u,h){return a.call.apply(a.bind,arguments)}function p(a,u,h){if(!a)throw Error();if(2<arguments.length){var m=Array.prototype.slice.call(arguments,2);return function(){var T=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(T,m),a.apply(u,T)}}return function(){return a.apply(u,arguments)}}function y(a,u,h){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,y.apply(null,arguments)}function S(a,u){var h=Array.prototype.slice.call(arguments,1);return function(){var m=h.slice();return m.push.apply(m,arguments),a.apply(this,m)}}function k(a,u){function h(){}h.prototype=u.prototype,a.aa=u.prototype,a.prototype=new h,a.prototype.constructor=a,a.Qb=function(m,T,C){for(var P=Array(arguments.length-2),de=2;de<arguments.length;de++)P[de-2]=arguments[de];return u.prototype[T].apply(m,P)}}function M(a){let u=a.length;if(0<u){let h=Array(u);for(let m=0;m<u;m++)h[m]=a[m];return h}return[]}function x(a,u){for(let h=1;h<arguments.length;h++){let m=arguments[h];if(l(m)){let T=a.length||0,C=m.length||0;a.length=T+C;for(let P=0;P<C;P++)a[T+P]=m[P]}else a.push(m)}}class G{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function X(a){return/^[\s\xa0]*$/.test(a)}function ie(){var a=c.navigator;return a&&(a=a.userAgent)?a:""}function me(a){return me[" "](a),a}me[" "]=function(){};var Je=ie().indexOf("Gecko")!=-1&&!(ie().toLowerCase().indexOf("webkit")!=-1&&ie().indexOf("Edge")==-1)&&!(ie().indexOf("Trident")!=-1||ie().indexOf("MSIE")!=-1)&&ie().indexOf("Edge")==-1;function le(a,u,h){for(let m in a)u.call(h,a[m],m,a)}function I(a,u){for(let h in a)u.call(void 0,a[h],h,a)}function g(a){let u={};for(let h in a)u[h]=a[h];return u}let _="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function w(a,u){let h,m;for(let T=1;T<arguments.length;T++){m=arguments[T];for(h in m)a[h]=m[h];for(let C=0;C<_.length;C++)h=_[C],Object.prototype.hasOwnProperty.call(m,h)&&(a[h]=m[h])}}function E(a){var u=1;a=a.split(":");let h=[];for(;0<u&&a.length;)h.push(a.shift()),u--;return a.length&&h.push(a.join(":")),h}function A(a){c.setTimeout(()=>{throw a},0)}function v(){var a=zc;let u=null;return a.g&&(u=a.g,a.g=a.g.next,a.g||(a.h=null),u.next=null),u}class en{constructor(){this.h=this.g=null}add(u,h){let m=Cr.get();m.set(u,h),this.h?this.h.next=m:this.g=m,this.h=m}}var Cr=new G(()=>new Yw,a=>a.reset());class Yw{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Sr,Rr=!1,zc=new en,ym=()=>{let a=c.Promise.resolve(void 0);Sr=()=>{a.then(Jw)}};var Jw=()=>{for(var a;a=v();){try{a.h.call(a.g)}catch(h){A(h)}var u=Cr;u.j(a),100>u.h&&(u.h++,a.next=u.g,u.g=a)}Rr=!1};function vn(){this.s=this.s,this.C=this.C}vn.prototype.s=!1,vn.prototype.ma=function(){this.s||(this.s=!0,this.N())},vn.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Be(a,u){this.type=a,this.g=this.target=u,this.defaultPrevented=!1}Be.prototype.h=function(){this.defaultPrevented=!0};var Xw=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var a=!1,u=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};c.addEventListener("test",h,u),c.removeEventListener("test",h,u)}catch{}return a}();function Dr(a,u){if(Be.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var h=this.type=a.type,m=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=u,u=a.relatedTarget){if(Je){e:{try{me(u.nodeName);var T=!0;break e}catch{}T=!1}T||(u=null)}}else h=="mouseover"?u=a.fromElement:h=="mouseout"&&(u=a.toElement);this.relatedTarget=u,m?(this.clientX=m.clientX!==void 0?m.clientX:m.pageX,this.clientY=m.clientY!==void 0?m.clientY:m.pageY,this.screenX=m.screenX||0,this.screenY=m.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Zw[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Dr.aa.h.call(this)}}k(Dr,Be);var Zw={2:"touch",3:"pen",4:"mouse"};Dr.prototype.h=function(){Dr.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var xr="closure_listenable_"+(1e6*Math.random()|0),e0=0;function t0(a,u,h,m,T){this.listener=a,this.proxy=null,this.src=u,this.type=h,this.capture=!!m,this.ha=T,this.key=++e0,this.da=this.fa=!1}function lo(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function uo(a){this.src=a,this.g={},this.h=0}uo.prototype.add=function(a,u,h,m,T){var C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);var P=$c(a,u,m,T);return-1<P?(u=a[P],h||(u.fa=!1)):(u=new t0(u,this.src,C,!!m,T),u.fa=h,a.push(u)),u};function qc(a,u){var h=u.type;if(h in a.g){var m=a.g[h],T=Array.prototype.indexOf.call(m,u,void 0),C;(C=0<=T)&&Array.prototype.splice.call(m,T,1),C&&(lo(u),a.g[h].length==0&&(delete a.g[h],a.h--))}}function $c(a,u,h,m){for(var T=0;T<a.length;++T){var C=a[T];if(!C.da&&C.listener==u&&C.capture==!!h&&C.ha==m)return T}return-1}var Gc="closure_lm_"+(1e6*Math.random()|0),Wc={};function wm(a,u,h,m,T){if(m&&m.once)return Em(a,u,h,m,T);if(Array.isArray(u)){for(var C=0;C<u.length;C++)wm(a,u[C],h,m,T);return null}return h=Yc(h),a&&a[xr]?a.K(u,h,d(m)?!!m.capture:!!m,T):Im(a,u,h,!1,m,T)}function Im(a,u,h,m,T,C){if(!u)throw Error("Invalid event type");var P=d(T)?!!T.capture:!!T,de=Kc(a);if(de||(a[Gc]=de=new uo(a)),h=de.add(u,h,m,P,C),h.proxy)return h;if(m=n0(),h.proxy=m,m.src=a,m.listener=h,a.addEventListener)Xw||(T=P),T===void 0&&(T=!1),a.addEventListener(u.toString(),m,T);else if(a.attachEvent)a.attachEvent(Am(u.toString()),m);else if(a.addListener&&a.removeListener)a.addListener(m);else throw Error("addEventListener and attachEvent are unavailable.");return h}function n0(){function a(h){return u.call(a.src,a.listener,h)}let u=i0;return a}function Em(a,u,h,m,T){if(Array.isArray(u)){for(var C=0;C<u.length;C++)Em(a,u[C],h,m,T);return null}return h=Yc(h),a&&a[xr]?a.L(u,h,d(m)?!!m.capture:!!m,T):Im(a,u,h,!0,m,T)}function Tm(a,u,h,m,T){if(Array.isArray(u))for(var C=0;C<u.length;C++)Tm(a,u[C],h,m,T);else m=d(m)?!!m.capture:!!m,h=Yc(h),a&&a[xr]?(a=a.i,u=String(u).toString(),u in a.g&&(C=a.g[u],h=$c(C,h,m,T),-1<h&&(lo(C[h]),Array.prototype.splice.call(C,h,1),C.length==0&&(delete a.g[u],a.h--)))):a&&(a=Kc(a))&&(u=a.g[u.toString()],a=-1,u&&(a=$c(u,h,m,T)),(h=-1<a?u[a]:null)&&Hc(h))}function Hc(a){if(typeof a!="number"&&a&&!a.da){var u=a.src;if(u&&u[xr])qc(u.i,a);else{var h=a.type,m=a.proxy;u.removeEventListener?u.removeEventListener(h,m,a.capture):u.detachEvent?u.detachEvent(Am(h),m):u.addListener&&u.removeListener&&u.removeListener(m),(h=Kc(u))?(qc(h,a),h.h==0&&(h.src=null,u[Gc]=null)):lo(a)}}}function Am(a){return a in Wc?Wc[a]:Wc[a]="on"+a}function i0(a,u){if(a.da)a=!0;else{u=new Dr(u,this);var h=a.listener,m=a.ha||a.src;a.fa&&Hc(a),a=h.call(m,u)}return a}function Kc(a){return a=a[Gc],a instanceof uo?a:null}var Qc="__closure_events_fn_"+(1e9*Math.random()>>>0);function Yc(a){return typeof a=="function"?a:(a[Qc]||(a[Qc]=function(u){return a.handleEvent(u)}),a[Qc])}function ze(){vn.call(this),this.i=new uo(this),this.M=this,this.F=null}k(ze,vn),ze.prototype[xr]=!0,ze.prototype.removeEventListener=function(a,u,h,m){Tm(this,a,u,h,m)};function Xe(a,u){var h,m=a.F;if(m)for(h=[];m;m=m.F)h.push(m);if(a=a.M,m=u.type||u,typeof u=="string")u=new Be(u,a);else if(u instanceof Be)u.target=u.target||a;else{var T=u;u=new Be(m,a),w(u,T)}if(T=!0,h)for(var C=h.length-1;0<=C;C--){var P=u.g=h[C];T=ho(P,m,!0,u)&&T}if(P=u.g=a,T=ho(P,m,!0,u)&&T,T=ho(P,m,!1,u)&&T,h)for(C=0;C<h.length;C++)P=u.g=h[C],T=ho(P,m,!1,u)&&T}ze.prototype.N=function(){if(ze.aa.N.call(this),this.i){var a=this.i,u;for(u in a.g){for(var h=a.g[u],m=0;m<h.length;m++)lo(h[m]);delete a.g[u],a.h--}}this.F=null},ze.prototype.K=function(a,u,h,m){return this.i.add(String(a),u,!1,h,m)},ze.prototype.L=function(a,u,h,m){return this.i.add(String(a),u,!0,h,m)};function ho(a,u,h,m){if(u=a.i.g[String(u)],!u)return!0;u=u.concat();for(var T=!0,C=0;C<u.length;++C){var P=u[C];if(P&&!P.da&&P.capture==h){var de=P.listener,Oe=P.ha||P.src;P.fa&&qc(a.i,P),T=de.call(Oe,m)!==!1&&T}}return T&&!m.defaultPrevented}function Cm(a,u,h){if(typeof a=="function")h&&(a=y(a,h));else if(a&&typeof a.handleEvent=="function")a=y(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:c.setTimeout(a,u||0)}function Sm(a){a.g=Cm(()=>{a.g=null,a.i&&(a.i=!1,Sm(a))},a.l);let u=a.h;a.h=null,a.m.apply(null,u)}class r0 extends vn{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:Sm(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Pr(a){vn.call(this),this.h=a,this.g={}}k(Pr,vn);var Rm=[];function Dm(a){le(a.g,function(u,h){this.g.hasOwnProperty(h)&&Hc(u)},a),a.g={}}Pr.prototype.N=function(){Pr.aa.N.call(this),Dm(this)},Pr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Jc=c.JSON.stringify,s0=c.JSON.parse,o0=class{stringify(a){return c.JSON.stringify(a,void 0)}parse(a){return c.JSON.parse(a,void 0)}};function Xc(){}Xc.prototype.h=null;function xm(a){return a.h||(a.h=a.i())}function Pm(){}var kr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Zc(){Be.call(this,"d")}k(Zc,Be);function el(){Be.call(this,"c")}k(el,Be);var zn={},km=null;function fo(){return km=km||new ze}zn.La="serverreachability";function Nm(a){Be.call(this,zn.La,a)}k(Nm,Be);function Nr(a){let u=fo();Xe(u,new Nm(u))}zn.STAT_EVENT="statevent";function Mm(a,u){Be.call(this,zn.STAT_EVENT,a),this.stat=u}k(Mm,Be);function Ze(a){let u=fo();Xe(u,new Mm(u,a))}zn.Ma="timingevent";function Om(a,u){Be.call(this,zn.Ma,a),this.size=u}k(Om,Be);function Mr(a,u){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){a()},u)}function Or(){this.g=!0}Or.prototype.xa=function(){this.g=!1};function a0(a,u,h,m,T,C){a.info(function(){if(a.g)if(C)for(var P="",de=C.split("&"),Oe=0;Oe<de.length;Oe++){var se=de[Oe].split("=");if(1<se.length){var qe=se[0];se=se[1];var $e=qe.split("_");P=2<=$e.length&&$e[1]=="type"?P+(qe+"="+se+"&"):P+(qe+"=redacted&")}}else P=null;else P=C;return"XMLHTTP REQ ("+m+") [attempt "+T+"]: "+u+`
`+h+`
`+P})}function c0(a,u,h,m,T,C,P){a.info(function(){return"XMLHTTP RESP ("+m+") [ attempt "+T+"]: "+u+`
`+h+`
`+C+" "+P})}function Ci(a,u,h,m){a.info(function(){return"XMLHTTP TEXT ("+u+"): "+u0(a,h)+(m?" "+m:"")})}function l0(a,u){a.info(function(){return"TIMEOUT: "+u})}Or.prototype.info=function(){};function u0(a,u){if(!a.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(a=0;a<h.length;a++)if(Array.isArray(h[a])){var m=h[a];if(!(2>m.length)){var T=m[1];if(Array.isArray(T)&&!(1>T.length)){var C=T[0];if(C!="noop"&&C!="stop"&&C!="close")for(var P=1;P<T.length;P++)T[P]=""}}}}return Jc(h)}catch{return u}}var mo={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Vm={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},tl;function po(){}k(po,Xc),po.prototype.g=function(){return new XMLHttpRequest},po.prototype.i=function(){return{}},tl=new po;function _n(a,u,h,m){this.j=a,this.i=u,this.l=h,this.R=m||1,this.U=new Pr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Fm}function Fm(){this.i=null,this.g="",this.h=!1}var Lm={},nl={};function il(a,u,h){a.L=1,a.v=_o(tn(u)),a.m=h,a.P=!0,Um(a,null)}function Um(a,u){a.F=Date.now(),go(a),a.A=tn(a.v);var h=a.A,m=a.R;Array.isArray(m)||(m=[String(m)]),Zm(h.i,"t",m),a.C=0,h=a.j.J,a.h=new Fm,a.g=bp(a.j,h?u:null,!a.m),0<a.O&&(a.M=new r0(y(a.Y,a,a.g),a.O)),u=a.U,h=a.g,m=a.ca;var T="readystatechange";Array.isArray(T)||(T&&(Rm[0]=T.toString()),T=Rm);for(var C=0;C<T.length;C++){var P=wm(h,T[C],m||u.handleEvent,!1,u.h||u);if(!P)break;u.g[P.key]=P}u=a.H?g(a.H):{},a.m?(a.u||(a.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,u)):(a.u="GET",a.g.ea(a.A,a.u,null,u)),Nr(),a0(a.i,a.u,a.A,a.l,a.R,a.m)}_n.prototype.ca=function(a){a=a.target;let u=this.M;u&&nn(a)==3?u.j():this.Y(a)},_n.prototype.Y=function(a){try{if(a==this.g)e:{let $e=nn(this.g);var u=this.g.Ba();let Di=this.g.Z();if(!(3>$e)&&($e!=3||this.g&&(this.h.h||this.g.oa()||op(this.g)))){this.J||$e!=4||u==7||(u==8||0>=Di?Nr(3):Nr(2)),rl(this);var h=this.g.Z();this.X=h;t:if(jm(this)){var m=op(this.g);a="";var T=m.length,C=nn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qn(this),Vr(this);var P="";break t}this.h.i=new c.TextDecoder}for(u=0;u<T;u++)this.h.h=!0,a+=this.h.i.decode(m[u],{stream:!(C&&u==T-1)});m.length=0,this.h.g+=a,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,c0(this.i,this.u,this.A,this.l,this.R,$e,h),this.o){if(this.T&&!this.K){t:{if(this.g){var de,Oe=this.g;if((de=Oe.g?Oe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!X(de)){var se=de;break t}}se=null}if(h=se)Ci(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,sl(this,h);else{this.o=!1,this.s=3,Ze(12),qn(this),Vr(this);break e}}if(this.P){h=!0;let Rt;for(;!this.J&&this.C<P.length;)if(Rt=d0(this,P),Rt==nl){$e==4&&(this.s=4,Ze(14),h=!1),Ci(this.i,this.l,null,"[Incomplete Response]");break}else if(Rt==Lm){this.s=4,Ze(15),Ci(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else Ci(this.i,this.l,Rt,null),sl(this,Rt);if(jm(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),$e!=4||P.length!=0||this.h.h||(this.s=1,Ze(16),h=!1),this.o=this.o&&h,!h)Ci(this.i,this.l,P,"[Invalid Chunked Response]"),qn(this),Vr(this);else if(0<P.length&&!this.W){this.W=!0;var qe=this.j;qe.g==this&&qe.ba&&!qe.M&&(qe.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),dl(qe),qe.M=!0,Ze(11))}}else Ci(this.i,this.l,P,null),sl(this,P);$e==4&&qn(this),this.o&&!this.J&&($e==4?fp(this.j,this):(this.o=!1,go(this)))}else R0(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,Ze(12)):(this.s=0,Ze(13)),qn(this),Vr(this)}}}catch{}finally{}};function jm(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function d0(a,u){var h=a.C,m=u.indexOf(`
`,h);return m==-1?nl:(h=Number(u.substring(h,m)),isNaN(h)?Lm:(m+=1,m+h>u.length?nl:(u=u.slice(m,m+h),a.C=m+h,u)))}_n.prototype.cancel=function(){this.J=!0,qn(this)};function go(a){a.S=Date.now()+a.I,Bm(a,a.I)}function Bm(a,u){if(a.B!=null)throw Error("WatchDog timer not null");a.B=Mr(y(a.ba,a),u)}function rl(a){a.B&&(c.clearTimeout(a.B),a.B=null)}_n.prototype.ba=function(){this.B=null;let a=Date.now();0<=a-this.S?(l0(this.i,this.A),this.L!=2&&(Nr(),Ze(17)),qn(this),this.s=2,Vr(this)):Bm(this,this.S-a)};function Vr(a){a.j.G==0||a.J||fp(a.j,a)}function qn(a){rl(a);var u=a.M;u&&typeof u.ma=="function"&&u.ma(),a.M=null,Dm(a.U),a.g&&(u=a.g,a.g=null,u.abort(),u.ma())}function sl(a,u){try{var h=a.j;if(h.G!=0&&(h.g==a||ol(h.h,a))){if(!a.K&&ol(h.h,a)&&h.G==3){try{var m=h.Da.g.parse(u)}catch{m=null}if(Array.isArray(m)&&m.length==3){var T=m;if(T[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<a.F)To(h),Io(h);else break e;ul(h),Ze(18)}}else h.za=T[1],0<h.za-h.T&&37500>T[2]&&h.F&&h.v==0&&!h.C&&(h.C=Mr(y(h.Za,h),6e3));if(1>=$m(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else Gn(h,11)}else if((a.K||h.g==a)&&To(h),!X(u))for(T=h.Da.g.parse(u),u=0;u<T.length;u++){let se=T[u];if(h.T=se[0],se=se[1],h.G==2)if(se[0]=="c"){h.K=se[1],h.ia=se[2];let qe=se[3];qe!=null&&(h.la=qe,h.j.info("VER="+h.la));let $e=se[4];$e!=null&&(h.Aa=$e,h.j.info("SVER="+h.Aa));let Di=se[5];Di!=null&&typeof Di=="number"&&0<Di&&(m=1.5*Di,h.L=m,h.j.info("backChannelRequestTimeoutMs_="+m)),m=h;let Rt=a.g;if(Rt){let Co=Rt.g?Rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Co){var C=m.h;C.g||Co.indexOf("spdy")==-1&&Co.indexOf("quic")==-1&&Co.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(al(C,C.h),C.h=null))}if(m.D){let hl=Rt.g?Rt.g.getResponseHeader("X-HTTP-Session-Id"):null;hl&&(m.ya=hl,pe(m.I,m.D,hl))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-a.F,h.j.info("Handshake RTT: "+h.R+"ms")),m=h;var P=a;if(m.qa=gp(m,m.J?m.ia:null,m.W),P.K){Gm(m.h,P);var de=P,Oe=m.L;Oe&&(de.I=Oe),de.B&&(rl(de),go(de)),m.g=P}else dp(m);0<h.i.length&&Eo(h)}else se[0]!="stop"&&se[0]!="close"||Gn(h,7);else h.G==3&&(se[0]=="stop"||se[0]=="close"?se[0]=="stop"?Gn(h,7):ll(h):se[0]!="noop"&&h.l&&h.l.ta(se),h.v=0)}}Nr(4)}catch{}}var h0=class{constructor(a,u){this.g=a,this.map=u}};function zm(a){this.l=a||10,c.PerformanceNavigationTiming?(a=c.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qm(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function $m(a){return a.h?1:a.g?a.g.size:0}function ol(a,u){return a.h?a.h==u:a.g?a.g.has(u):!1}function al(a,u){a.g?a.g.add(u):a.h=u}function Gm(a,u){a.h&&a.h==u?a.h=null:a.g&&a.g.has(u)&&a.g.delete(u)}zm.prototype.cancel=function(){if(this.i=Wm(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function Wm(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let u=a.i;for(let h of a.g.values())u=u.concat(h.D);return u}return M(a.i)}function f0(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(l(a)){for(var u=[],h=a.length,m=0;m<h;m++)u.push(a[m]);return u}u=[],h=0;for(m in a)u[h++]=a[m];return u}function m0(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(l(a)||typeof a=="string"){var u=[];a=a.length;for(var h=0;h<a;h++)u.push(h);return u}u=[],h=0;for(let m in a)u[h++]=m;return u}}}function Hm(a,u){if(a.forEach&&typeof a.forEach=="function")a.forEach(u,void 0);else if(l(a)||typeof a=="string")Array.prototype.forEach.call(a,u,void 0);else for(var h=m0(a),m=f0(a),T=m.length,C=0;C<T;C++)u.call(void 0,m[C],h&&h[C],a)}var Km=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function p0(a,u){if(a){a=a.split("&");for(var h=0;h<a.length;h++){var m=a[h].indexOf("="),T=null;if(0<=m){var C=a[h].substring(0,m);T=a[h].substring(m+1)}else C=a[h];u(C,T?decodeURIComponent(T.replace(/\+/g," ")):"")}}}function $n(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof $n){this.h=a.h,bo(this,a.j),this.o=a.o,this.g=a.g,vo(this,a.s),this.l=a.l;var u=a.i,h=new Ur;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Qm(this,h),this.m=a.m}else a&&(u=String(a).match(Km))?(this.h=!1,bo(this,u[1]||"",!0),this.o=Fr(u[2]||""),this.g=Fr(u[3]||"",!0),vo(this,u[4]),this.l=Fr(u[5]||"",!0),Qm(this,u[6]||"",!0),this.m=Fr(u[7]||"")):(this.h=!1,this.i=new Ur(null,this.h))}$n.prototype.toString=function(){var a=[],u=this.j;u&&a.push(Lr(u,Ym,!0),":");var h=this.g;return(h||u=="file")&&(a.push("//"),(u=this.o)&&a.push(Lr(u,Ym,!0),"@"),a.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&a.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Lr(h,h.charAt(0)=="/"?v0:b0,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Lr(h,y0)),a.join("")};function tn(a){return new $n(a)}function bo(a,u,h){a.j=h?Fr(u,!0):u,a.j&&(a.j=a.j.replace(/:$/,""))}function vo(a,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);a.s=u}else a.s=null}function Qm(a,u,h){u instanceof Ur?(a.i=u,w0(a.i,a.h)):(h||(u=Lr(u,_0)),a.i=new Ur(u,a.h))}function pe(a,u,h){a.i.set(u,h)}function _o(a){return pe(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function Fr(a,u){return a?u?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Lr(a,u,h){return typeof a=="string"?(a=encodeURI(a).replace(u,g0),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function g0(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Ym=/[#\/\?@]/g,b0=/[#\?:]/g,v0=/[#\?]/g,_0=/[#\?@]/g,y0=/#/g;function Ur(a,u){this.h=this.g=null,this.i=a||null,this.j=!!u}function yn(a){a.g||(a.g=new Map,a.h=0,a.i&&p0(a.i,function(u,h){a.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}n=Ur.prototype,n.add=function(a,u){yn(this),this.i=null,a=Si(this,a);var h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(u),this.h+=1,this};function Jm(a,u){yn(a),u=Si(a,u),a.g.has(u)&&(a.i=null,a.h-=a.g.get(u).length,a.g.delete(u))}function Xm(a,u){return yn(a),u=Si(a,u),a.g.has(u)}n.forEach=function(a,u){yn(this),this.g.forEach(function(h,m){h.forEach(function(T){a.call(u,T,m,this)},this)},this)},n.na=function(){yn(this);let a=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let m=0;m<u.length;m++){let T=a[m];for(let C=0;C<T.length;C++)h.push(u[m])}return h},n.V=function(a){yn(this);let u=[];if(typeof a=="string")Xm(this,a)&&(u=u.concat(this.g.get(Si(this,a))));else{a=Array.from(this.g.values());for(let h=0;h<a.length;h++)u=u.concat(a[h])}return u},n.set=function(a,u){return yn(this),this.i=null,a=Si(this,a),Xm(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[u]),this.h+=1,this},n.get=function(a,u){return a?(a=this.V(a),0<a.length?String(a[0]):u):u};function Zm(a,u,h){Jm(a,u),0<h.length&&(a.i=null,a.g.set(Si(a,u),M(h)),a.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var m=u[h];let C=encodeURIComponent(String(m)),P=this.V(m);for(m=0;m<P.length;m++){var T=C;P[m]!==""&&(T+="="+encodeURIComponent(String(P[m]))),a.push(T)}}return this.i=a.join("&")};function Si(a,u){return u=String(u),a.j&&(u=u.toLowerCase()),u}function w0(a,u){u&&!a.j&&(yn(a),a.i=null,a.g.forEach(function(h,m){var T=m.toLowerCase();m!=T&&(Jm(this,m),Zm(this,T,h))},a)),a.j=u}function I0(a,u){let h=new Or;if(c.Image){let m=new Image;m.onload=S(wn,h,"TestLoadImage: loaded",!0,u,m),m.onerror=S(wn,h,"TestLoadImage: error",!1,u,m),m.onabort=S(wn,h,"TestLoadImage: abort",!1,u,m),m.ontimeout=S(wn,h,"TestLoadImage: timeout",!1,u,m),c.setTimeout(function(){m.ontimeout&&m.ontimeout()},1e4),m.src=a}else u(!1)}function E0(a,u){let h=new Or,m=new AbortController,T=setTimeout(()=>{m.abort(),wn(h,"TestPingServer: timeout",!1,u)},1e4);fetch(a,{signal:m.signal}).then(C=>{clearTimeout(T),C.ok?wn(h,"TestPingServer: ok",!0,u):wn(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(T),wn(h,"TestPingServer: error",!1,u)})}function wn(a,u,h,m,T){try{T&&(T.onload=null,T.onerror=null,T.onabort=null,T.ontimeout=null),m(h)}catch{}}function T0(){this.g=new o0}function A0(a,u,h){let m=h||"";try{Hm(a,function(T,C){let P=T;d(T)&&(P=Jc(T)),u.push(m+C+"="+encodeURIComponent(P))})}catch(T){throw u.push(m+"type="+encodeURIComponent("_badmap")),T}}function jr(a){this.l=a.Ub||null,this.j=a.eb||!1}k(jr,Xc),jr.prototype.g=function(){return new yo(this.l,this.j)},jr.prototype.i=function(a){return function(){return a}}({});function yo(a,u){ze.call(this),this.D=a,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(yo,ze),n=yo.prototype,n.open=function(a,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=u,this.readyState=1,zr(this)},n.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(u.body=a),(this.D||c).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Br(this)),this.readyState=0},n.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,zr(this)),this.g&&(this.readyState=3,zr(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ep(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function ep(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}n.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var u=a.value?a.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!a.done}))&&(this.response=this.responseText+=u)}a.done?Br(this):zr(this),this.readyState==3&&ep(this)}},n.Ra=function(a){this.g&&(this.response=this.responseText=a,Br(this))},n.Qa=function(a){this.g&&(this.response=a,Br(this))},n.ga=function(){this.g&&Br(this)};function Br(a){a.readyState=4,a.l=null,a.j=null,a.v=null,zr(a)}n.setRequestHeader=function(a,u){this.u.append(a,u)},n.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=u.next();return a.join(`\r
`)};function zr(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(yo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function tp(a){let u="";return le(a,function(h,m){u+=m,u+=":",u+=h,u+=`\r
`}),u}function cl(a,u,h){e:{for(m in h){var m=!1;break e}m=!0}m||(h=tp(h),typeof a=="string"?h!=null&&encodeURIComponent(String(h)):pe(a,u,h))}function ye(a){ze.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(ye,ze);var C0=/^https?$/i,S0=["POST","PUT"];n=ye.prototype,n.Ha=function(a){this.J=a},n.ea=function(a,u,h,m){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);u=u?u.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():tl.g(),this.v=this.o?xm(this.o):xm(tl),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(u,String(a),!0),this.B=!1}catch(C){np(this,C);return}if(a=h||"",h=new Map(this.headers),m)if(Object.getPrototypeOf(m)===Object.prototype)for(var T in m)h.set(T,m[T]);else if(typeof m.keys=="function"&&typeof m.get=="function")for(let C of m.keys())h.set(C,m.get(C));else throw Error("Unknown input type for opt_headers: "+String(m));m=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),T=c.FormData&&a instanceof c.FormData,!(0<=Array.prototype.indexOf.call(S0,u,void 0))||m||T||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,P]of h)this.g.setRequestHeader(C,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{sp(this),this.u=!0,this.g.send(a),this.u=!1}catch(C){np(this,C)}};function np(a,u){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=u,a.m=5,ip(a),wo(a)}function ip(a){a.A||(a.A=!0,Xe(a,"complete"),Xe(a,"error"))}n.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,Xe(this,"complete"),Xe(this,"abort"),wo(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),wo(this,!0)),ye.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?rp(this):this.bb())},n.bb=function(){rp(this)};function rp(a){if(a.h&&typeof o<"u"&&(!a.v[1]||nn(a)!=4||a.Z()!=2)){if(a.u&&nn(a)==4)Cm(a.Ea,0,a);else if(Xe(a,"readystatechange"),nn(a)==4){a.h=!1;try{let P=a.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break e;default:u=!1}var h;if(!(h=u)){var m;if(m=P===0){var T=String(a.D).match(Km)[1]||null;!T&&c.self&&c.self.location&&(T=c.self.location.protocol.slice(0,-1)),m=!C0.test(T?T.toLowerCase():"")}h=m}if(h)Xe(a,"complete"),Xe(a,"success");else{a.m=6;try{var C=2<nn(a)?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.Z()+"]",ip(a)}}finally{wo(a)}}}}function wo(a,u){if(a.g){sp(a);let h=a.g,m=a.v[0]?()=>{}:null;a.g=null,a.v=null,u||Xe(a,"ready");try{h.onreadystatechange=m}catch{}}}function sp(a){a.I&&(c.clearTimeout(a.I),a.I=null)}n.isActive=function(){return!!this.g};function nn(a){return a.g?a.g.readyState:0}n.Z=function(){try{return 2<nn(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(a){if(this.g){var u=this.g.responseText;return a&&u.indexOf(a)==0&&(u=u.substring(a.length)),s0(u)}};function op(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function R0(a){let u={};a=(a.g&&2<=nn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let m=0;m<a.length;m++){if(X(a[m]))continue;var h=E(a[m]);let T=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=u[T]||[];u[T]=C,C.push(h)}I(u,function(m){return m.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qr(a,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||u}function ap(a){this.Aa=0,this.i=[],this.j=new Or,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qr("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qr("baseRetryDelayMs",5e3,a),this.cb=qr("retryDelaySeedMs",1e4,a),this.Wa=qr("forwardChannelMaxRetries",2,a),this.wa=qr("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new zm(a&&a.concurrentRequestLimit),this.Da=new T0,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=ap.prototype,n.la=8,n.G=1,n.connect=function(a,u,h,m){Ze(0),this.W=a,this.H=u||{},h&&m!==void 0&&(this.H.OSID=h,this.H.OAID=m),this.F=this.X,this.I=gp(this,null,this.W),Eo(this)};function ll(a){if(cp(a),a.G==3){var u=a.U++,h=tn(a.I);if(pe(h,"SID",a.K),pe(h,"RID",u),pe(h,"TYPE","terminate"),$r(a,h),u=new _n(a,a.j,u),u.L=2,u.v=_o(tn(h)),h=!1,c.navigator&&c.navigator.sendBeacon)try{h=c.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&c.Image&&(new Image().src=u.v,h=!0),h||(u.g=bp(u.j,null),u.g.ea(u.v)),u.F=Date.now(),go(u)}pp(a)}function Io(a){a.g&&(dl(a),a.g.cancel(),a.g=null)}function cp(a){Io(a),a.u&&(c.clearTimeout(a.u),a.u=null),To(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&c.clearTimeout(a.s),a.s=null)}function Eo(a){if(!qm(a.h)&&!a.s){a.s=!0;var u=a.Ga;Sr||ym(),Rr||(Sr(),Rr=!0),zc.add(u,a),a.B=0}}function D0(a,u){return $m(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=u.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=Mr(y(a.Ga,a,u),mp(a,a.B)),a.B++,!0)}n.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;let T=new _n(this,this.j,a),C=this.o;if(this.S&&(C?(C=g(C),w(C,this.S)):C=this.S),this.m!==null||this.O||(T.H=C,C=null),this.P)e:{for(var u=0,h=0;h<this.i.length;h++){t:{var m=this.i[h];if("__data__"in m.map&&(m=m.map.__data__,typeof m=="string")){m=m.length;break t}m=void 0}if(m===void 0)break;if(u+=m,4096<u){u=h;break e}if(u===4096||h===this.i.length-1){u=h+1;break e}}u=1e3}else u=1e3;u=up(this,T,u),h=tn(this.I),pe(h,"RID",a),pe(h,"CVER",22),this.D&&pe(h,"X-HTTP-Session-Id",this.D),$r(this,h),C&&(this.O?u="headers="+encodeURIComponent(String(tp(C)))+"&"+u:this.m&&cl(h,this.m,C)),al(this.h,T),this.Ua&&pe(h,"TYPE","init"),this.P?(pe(h,"$req",u),pe(h,"SID","null"),T.T=!0,il(T,h,null)):il(T,h,u),this.G=2}}else this.G==3&&(a?lp(this,a):this.i.length==0||qm(this.h)||lp(this))};function lp(a,u){var h;u?h=u.l:h=a.U++;let m=tn(a.I);pe(m,"SID",a.K),pe(m,"RID",h),pe(m,"AID",a.T),$r(a,m),a.m&&a.o&&cl(m,a.m,a.o),h=new _n(a,a.j,h,a.B+1),a.m===null&&(h.H=a.o),u&&(a.i=u.D.concat(a.i)),u=up(a,h,1e3),h.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),al(a.h,h),il(h,m,u)}function $r(a,u){a.H&&le(a.H,function(h,m){pe(u,m,h)}),a.l&&Hm({},function(h,m){pe(u,m,h)})}function up(a,u,h){h=Math.min(a.i.length,h);var m=a.l?y(a.l.Na,a.l,a):null;e:{var T=a.i;let C=-1;for(;;){let P=["count="+h];C==-1?0<h?(C=T[0].g,P.push("ofs="+C)):C=0:P.push("ofs="+C);let de=!0;for(let Oe=0;Oe<h;Oe++){let se=T[Oe].g,qe=T[Oe].map;if(se-=C,0>se)C=Math.max(0,T[Oe].g-100),de=!1;else try{A0(qe,P,"req"+se+"_")}catch{m&&m(qe)}}if(de){m=P.join("&");break e}}}return a=a.i.splice(0,h),u.D=a,m}function dp(a){if(!a.g&&!a.u){a.Y=1;var u=a.Fa;Sr||ym(),Rr||(Sr(),Rr=!0),zc.add(u,a),a.v=0}}function ul(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=Mr(y(a.Fa,a),mp(a,a.v)),a.v++,!0)}n.Fa=function(){if(this.u=null,hp(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=Mr(y(this.ab,this),a)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Ze(10),Io(this),hp(this))};function dl(a){a.A!=null&&(c.clearTimeout(a.A),a.A=null)}function hp(a){a.g=new _n(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var u=tn(a.qa);pe(u,"RID","rpc"),pe(u,"SID",a.K),pe(u,"AID",a.T),pe(u,"CI",a.F?"0":"1"),!a.F&&a.ja&&pe(u,"TO",a.ja),pe(u,"TYPE","xmlhttp"),$r(a,u),a.m&&a.o&&cl(u,a.m,a.o),a.L&&(a.g.I=a.L);var h=a.g;a=a.ia,h.L=1,h.v=_o(tn(u)),h.m=null,h.P=!0,Um(h,a)}n.Za=function(){this.C!=null&&(this.C=null,Io(this),ul(this),Ze(19))};function To(a){a.C!=null&&(c.clearTimeout(a.C),a.C=null)}function fp(a,u){var h=null;if(a.g==u){To(a),dl(a),a.g=null;var m=2}else if(ol(a.h,u))h=u.D,Gm(a.h,u),m=1;else return;if(a.G!=0){if(u.o)if(m==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var T=a.B;m=fo(),Xe(m,new Om(m,h)),Eo(a)}else dp(a);else if(T=u.s,T==3||T==0&&0<u.X||!(m==1&&D0(a,u)||m==2&&ul(a)))switch(h&&0<h.length&&(u=a.h,u.i=u.i.concat(h)),T){case 1:Gn(a,5);break;case 4:Gn(a,10);break;case 3:Gn(a,6);break;default:Gn(a,2)}}}function mp(a,u){let h=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(h*=2),h*u}function Gn(a,u){if(a.j.info("Error code "+u),u==2){var h=y(a.fb,a),m=a.Xa;let T=!m;m=new $n(m||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||bo(m,"https"),_o(m),T?I0(m.toString(),h):E0(m.toString(),h)}else Ze(2);a.G=0,a.l&&a.l.sa(u),pp(a),cp(a)}n.fb=function(a){a?(this.j.info("Successfully pinged google.com"),Ze(2)):(this.j.info("Failed to ping google.com"),Ze(1))};function pp(a){if(a.G=0,a.ka=[],a.l){let u=Wm(a.h);(u.length!=0||a.i.length!=0)&&(x(a.ka,u),x(a.ka,a.i),a.h.i.length=0,M(a.i),a.i.length=0),a.l.ra()}}function gp(a,u,h){var m=h instanceof $n?tn(h):new $n(h);if(m.g!="")u&&(m.g=u+"."+m.g),vo(m,m.s);else{var T=c.location;m=T.protocol,u=u?u+"."+T.hostname:T.hostname,T=+T.port;var C=new $n(null);m&&bo(C,m),u&&(C.g=u),T&&vo(C,T),h&&(C.l=h),m=C}return h=a.D,u=a.ya,h&&u&&pe(m,h,u),pe(m,"VER",a.la),$r(a,m),m}function bp(a,u,h){if(u&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=a.Ca&&!a.pa?new ye(new jr({eb:h})):new ye(a.pa),u.Ha(a.J),u}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function vp(){}n=vp.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Ao(){}Ao.prototype.g=function(a,u){return new at(a,u)};function at(a,u){ze.call(this),this.g=new ap(u),this.l=a,this.h=u&&u.messageUrlParams||null,a=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(a?a["X-WebChannel-Content-Type"]=u.messageContentType:a={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(a?a["X-WebChannel-Client-Profile"]=u.va:a={"X-WebChannel-Client-Profile":u.va}),this.g.S=a,(a=u&&u.Sb)&&!X(a)&&(this.g.m=a),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!X(u)&&(this.g.D=u,a=this.h,a!==null&&u in a&&(a=this.h,u in a&&delete a[u])),this.j=new Ri(this)}k(at,ze),at.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},at.prototype.close=function(){ll(this.g)},at.prototype.o=function(a){var u=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.u&&(h={},h.__data__=Jc(a),a=h);u.i.push(new h0(u.Ya++,a)),u.G==3&&Eo(u)},at.prototype.N=function(){this.g.l=null,delete this.j,ll(this.g),delete this.g,at.aa.N.call(this)};function _p(a){Zc.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var u=a.__sm__;if(u){e:{for(let h in u){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,u=u!==null&&a in u?u[a]:void 0),this.data=u}else this.data=a}k(_p,Zc);function yp(){el.call(this),this.status=1}k(yp,el);function Ri(a){this.g=a}k(Ri,vp),Ri.prototype.ua=function(){Xe(this.g,"a")},Ri.prototype.ta=function(a){Xe(this.g,new _p(a))},Ri.prototype.sa=function(a){Xe(this.g,new yp)},Ri.prototype.ra=function(){Xe(this.g,"b")},Ao.prototype.createWebChannel=Ao.prototype.g,at.prototype.send=at.prototype.o,at.prototype.open=at.prototype.m,at.prototype.close=at.prototype.close,Nd=ln.createWebChannelTransport=function(){return new Ao},kd=ln.getStatEventTarget=function(){return fo()},Pd=ln.Event=zn,Ia=ln.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},mo.NO_ERROR=0,mo.TIMEOUT=8,mo.HTTP_ERROR=6,Cs=ln.ErrorCode=mo,Vm.COMPLETE="complete",xd=ln.EventType=Vm,Pm.EventType=kr,kr.OPEN="a",kr.CLOSE="b",kr.ERROR="c",kr.MESSAGE="d",ze.prototype.listen=ze.prototype.K,Ji=ln.WebChannel=Pm,Dd=ln.FetchXmlHttpFactory=jr,ye.prototype.listenOnce=ye.prototype.L,ye.prototype.getLastError=ye.prototype.Ka,ye.prototype.getLastErrorCode=ye.prototype.Ba,ye.prototype.getStatus=ye.prototype.Z,ye.prototype.getResponseJson=ye.prototype.Oa,ye.prototype.getResponseText=ye.prototype.oa,ye.prototype.send=ye.prototype.ea,ye.prototype.setWithCredentials=ye.prototype.Ha,Rd=ln.XhrIo=ye}).apply(typeof wa<"u"?wa:typeof self<"u"?self:typeof window<"u"?window:{});var Ov="@firebase/firestore";var Me=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};Me.UNAUTHENTICATED=new Me(null),Me.GOOGLE_CREDENTIALS=new Me("google-credentials-uid"),Me.FIRST_PARTY=new Me("first-party-uid"),Me.MOCK_USER=new Me("mock-user");var vr="10.12.5";var pi=new Bt("@firebase/firestore");function Ss(){return pi.logLevel}function O(n,...e){if(pi.logLevel<=te.DEBUG){let t=e.map(_f);pi.debug(`Firestore (${vr}): ${n}`,...t)}}function un(n,...e){if(pi.logLevel<=te.ERROR){let t=e.map(_f);pi.error(`Firestore (${vr}): ${n}`,...t)}}function sr(n,...e){if(pi.logLevel<=te.WARN){let t=e.map(_f);pi.warn(`Firestore (${vr}): ${n}`,...t)}}function _f(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function $(n="Unexpected state"){let e=`FIRESTORE (${vr}) INTERNAL ASSERTION FAILED: `+n;throw un(e),new Error(e)}function fe(n,e){n||$()}function K(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},F=class extends Le{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Wt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Sa=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Ld=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Me.UNAUTHENTICATED))}shutdown(){}},Ud=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},jd=class{constructor(e){this.t=e,this.currentUser=Me.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){let i=this.i,r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve(),s=new Wt;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Wt,e.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;e.enqueueRetryable(()=>b(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},c=l=>{O("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(l=>c(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?c(l):(O("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Wt)}},0),o()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(O("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(fe(typeof i.accessToken=="string"),new Sa(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){let e=this.auth&&this.auth.getUid();return fe(e===null||typeof e=="string"),new Me(e)}},Bd=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Me.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},zd=class{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Bd(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Me.FIRST_PARTY))}shutdown(){}invalidateToken(){}},qd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$d=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){let i=s=>{s.error!=null&&O("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.R;return this.R=s.token,O("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};let r=s=>{O("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.A.getImmediate({optional:!0});s?r(s):O("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(fe(typeof t.token=="string"),this.R=t.token,new qd(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}};function tS(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}var Ra=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,i="";for(;i.length<20;){let r=tS(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}};function oe(n,e){return n<e?-1:n>e?1:0}function or(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}var je=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new F(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new F(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new n(t,i)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var Y=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new je(0,0))}static max(){return new n(new je(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Da=class n{constructor(e,t,i){t===void 0?t=0:t>e.length&&$(),i===void 0?i=e.length-t:i>e.length-t&&$(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let i=Math.min(e.length,t.length);for(let r=0;r<i;r++){let s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},Te=class n extends Da{construct(e,t,i){return new n(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let i of e){if(i.indexOf("//")>=0)throw new F(R.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new n(t)}static emptyPath(){return new n([])}},nS=/^[_a-zA-Z][_a-zA-Z0-9]*$/,bt=class n extends Da{construct(e,t,i){return new n(e,t,i)}static isValidIdentifier(e){return nS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],i="",r=0,s=()=>{if(i.length===0)throw new F(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""},o=!1;for(;r<e.length;){let c=e[r];if(c==="\\"){if(r+1===e.length)throw new F(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new F(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else c==="`"?(o=!o,r++):c!=="."||o?(i+=c,r++):(s(),r++)}if(s(),o)throw new F(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var z=class n{constructor(e){this.path=e}static fromPath(e){return new n(Te.fromString(e))}static fromName(e){return new n(Te.fromString(e).popFirst(5))}static empty(){return new n(Te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Te.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new Te(e.slice()))}};var Gd=class{constructor(e,t,i,r){this.indexId=e,this.collectionGroup=t,this.fields=i,this.indexState=r}};Gd.UNKNOWN_ID=-1;function iS(n,e){let t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Y.fromTimestamp(i===1e9?new je(t+1,0):new je(t,i));return new gi(r,z.empty(),e)}function rS(n){return new gi(n.readTime,n.key,-1)}var gi=class n{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new n(Y.min(),z.empty(),-1)}static max(){return new n(Y.max(),z.empty(),-1)}};function sS(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=z.comparator(n.documentKey,e.documentKey),t!==0?t:oe(n.largestBatchId,e.largestBatchId))}var oS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Wd=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function $s(n){return b(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==oS)throw n;O("LocalStore","Unexpectedly lost primary lease")})}var D=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,i)=>{t(e)})}static reject(e){return new n((t,i)=>{i(e)})}static waitFor(e){return new n((t,i)=>{let r=0,s=0,o=!1;e.forEach(c=>{++r,c.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=n.resolve(!1);for(let i of e)t=t.next(r=>r?n.resolve(r):i());return t}static forEach(e,t){let i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new n((i,r)=>{let s=e.length,o=new Array(s),c=0;for(let l=0;l<s;l++){let d=l;t(e[d]).next(f=>{o[d]=f,++c,c===s&&i(o)},f=>r(f))}})}static doWhile(e,t){return new n((i,r)=>{let s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}};function aS(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Gs(n){return n.name==="IndexedDbTransactionError"}var u_=(()=>{class n{constructor(t,i){this.previousValue=t,i&&(i.sequenceNumberHandler=r=>this.ie(r),this.se=r=>i.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function ic(n){return n==null}function Ns(n){return n===0&&1/n==-1/0}function cS(n){return typeof n=="number"&&Number.isInteger(n)&&!Ns(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var lS=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],AO=[...lS,"documentOverlays"],uS=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dS=uS,hS=[...dS,"indexConfiguration","indexState","indexEntries"];var CO=[...hS,"globals"];function Vv(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function _r(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function d_(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Ae=class n{constructor(e,t){this.comparator=e,this.root=t||Ht.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ht.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ht.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){let r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){let e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new tr(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new tr(this.root,e,this.comparator,!1)}getReverseIterator(){return new tr(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new tr(this.root,e,this.comparator,!0)}},tr=class{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Ht=class n{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??n.RED,this.left=r??n.EMPTY,this.right=s??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new n(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this,s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return n.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $();let e=this.left.check();if(e!==this.right.check())throw $();return e+(this.isRed()?0:1)}};Ht.EMPTY=null,Ht.RED=!0,Ht.BLACK=!1;Ht.EMPTY=new class{constructor(){this.size=0}get key(){throw $()}get value(){throw $()}get color(){throw $()}get left(){throw $()}get right(){throw $()}copy(e,t,i,r,s){return this}insert(e,t,i){return new Ht(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Qe=class n{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){let i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){let r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xa(this.data.getIterator())}getIteratorFrom(e){return new xa(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},xa=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var Gt=class n{constructor(e){this.fields=e,e.sort(bt.comparator)}static empty(){return new n([])}unionWith(e){let t=new Qe(bt.comparator);for(let i of this.fields)t=t.add(i);for(let i of e)t=t.add(i);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return or(this.fields,e.fields,(t,i)=>t.isEqual(i))}};var Pa=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Ye=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Pa("Invalid base64 string: "+s):s}}(e);return new n(t)}static fromUint8Array(e){let t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Ye.EMPTY_BYTE_STRING=new Ye("");var fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dn(n){if(fe(!!n),typeof n=="string"){let e=0,t=fS.exec(n);if(fe(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}let i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ee(n.seconds),nanos:Ee(n.nanos)}}function Ee(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ln(n){return typeof n=="string"?Ye.fromBase64String(n):Ye.fromUint8Array(n)}function yf(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function wf(n){let e=n.mapValue.fields.__previous_value__;return yf(e)?wf(e):e}function Ms(n){let e=dn(n.mapValue.fields.__local_write_time__.timestampValue);return new je(e.seconds,e.nanos)}var Hd=class{constructor(e,t,i,r,s,o,c,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=l,this.useFetchStreams=d}},ka=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ea={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function bi(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?yf(n)?4:h_(n)?9007199254740991:10:$()}function Yt(n,e){if(n===e)return!0;let t=bi(n);if(t!==bi(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ms(n).isEqual(Ms(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;let o=dn(r.timestampValue),c=dn(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Ln(r.bytesValue).isEqual(Ln(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ee(r.geoPointValue.latitude)===Ee(s.geoPointValue.latitude)&&Ee(r.geoPointValue.longitude)===Ee(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ee(r.integerValue)===Ee(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){let o=Ee(r.doubleValue),c=Ee(s.doubleValue);return o===c?Ns(o)===Ns(c):isNaN(o)&&isNaN(c)}return!1}(n,e);case 9:return or(n.arrayValue.values||[],e.arrayValue.values||[],Yt);case 10:return function(r,s){let o=r.mapValue.fields||{},c=s.mapValue.fields||{};if(Vv(o)!==Vv(c))return!1;for(let l in o)if(o.hasOwnProperty(l)&&(c[l]===void 0||!Yt(o[l],c[l])))return!1;return!0}(n,e);default:return $()}}function Os(n,e){return(n.values||[]).find(t=>Yt(t,e))!==void 0}function ar(n,e){if(n===e)return 0;let t=bi(n),i=bi(e);if(t!==i)return oe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return oe(n.booleanValue,e.booleanValue);case 2:return function(s,o){let c=Ee(s.integerValue||s.doubleValue),l=Ee(o.integerValue||o.doubleValue);return c<l?-1:c>l?1:c===l?0:isNaN(c)?isNaN(l)?0:-1:1}(n,e);case 3:return Fv(n.timestampValue,e.timestampValue);case 4:return Fv(Ms(n),Ms(e));case 5:return oe(n.stringValue,e.stringValue);case 6:return function(s,o){let c=Ln(s),l=Ln(o);return c.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){let c=s.split("/"),l=o.split("/");for(let d=0;d<c.length&&d<l.length;d++){let f=oe(c[d],l[d]);if(f!==0)return f}return oe(c.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){let c=oe(Ee(s.latitude),Ee(o.latitude));return c!==0?c:oe(Ee(s.longitude),Ee(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(s,o){let c=s.values||[],l=o.values||[];for(let d=0;d<c.length&&d<l.length;++d){let f=ar(c[d],l[d]);if(f)return f}return oe(c.length,l.length)}(n.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Ea.mapValue&&o===Ea.mapValue)return 0;if(s===Ea.mapValue)return 1;if(o===Ea.mapValue)return-1;let c=s.fields||{},l=Object.keys(c),d=o.fields||{},f=Object.keys(d);l.sort(),f.sort();for(let p=0;p<l.length&&p<f.length;++p){let y=oe(l[p],f[p]);if(y!==0)return y;let S=ar(c[l[p]],d[f[p]]);if(S!==0)return S}return oe(l.length,f.length)}(n.mapValue,e.mapValue);default:throw $()}}function Fv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return oe(n,e);let t=dn(n),i=dn(e),r=oe(t.seconds,i.seconds);return r!==0?r:oe(t.nanos,i.nanos)}function cr(n){return Kd(n)}function Kd(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let i=dn(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ln(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return z.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(let s of t.values||[])r?r=!1:i+=",",i+=Kd(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){let i=Object.keys(t.fields||{}).sort(),r="{",s=!0;for(let o of i)s?s=!1:r+=",",r+=`${o}:${Kd(t.fields[o])}`;return r+"}"}(n.mapValue):$()}function Qd(n){return!!n&&"integerValue"in n}function If(n){return!!n&&"arrayValue"in n}function Lv(n){return!!n&&"nullValue"in n}function Uv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Aa(n){return!!n&&"mapValue"in n}function Ds(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return _r(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Ds(i)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Ds(n.arrayValue.values[t]);return e}return Object.assign({},n)}function h_(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var Mt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Aa(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ds(t)}setAll(e){let t=bt.emptyPath(),i={},r=[];e.forEach((o,c)=>{if(!t.isImmediateParentOf(c)){let l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=c.popLast()}o?i[c.lastSegment()]=Ds(o):r.push(c.lastSegment())});let s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){let t=this.field(e.popLast());Aa(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Yt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Aa(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){_r(t,(r,s)=>e[r]=s);for(let r of i)delete e[r]}clone(){return new n(Ds(this.value))}};function f_(n){let e=[];return _r(n.fields,(t,i)=>{let r=new bt([t]);if(Aa(i)){let s=f_(i.mapValue).fields;if(s.length===0)e.push(r);else for(let o of s)e.push(r.child(o))}else e.push(r)}),new Gt(e)}var Vt=class n{constructor(e,t,i,r,s,o,c){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new n(e,0,Y.min(),Y.min(),Y.min(),Mt.empty(),0)}static newFoundDocument(e,t,i,r){return new n(e,1,t,Y.min(),i,r,0)}static newNoDocument(e,t){return new n(e,2,t,Y.min(),Y.min(),Mt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,Y.min(),Y.min(),Mt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var lr=class{constructor(e,t){this.position=e,this.inclusive=t}};function jv(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){let s=e[r],o=n.position[r];if(s.field.isKeyField()?i=z.comparator(z.fromName(o.referenceValue),t.key):i=ar(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function Bv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Yt(n.position[t],e.position[t]))return!1;return!0}var ur=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function mS(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var Na=class{},ke=class n extends Na{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new Jd(e,t,i):t==="array-contains"?new eh(e,i):t==="in"?new th(e,i):t==="not-in"?new nh(e,i):t==="array-contains-any"?new ih(e,i):new n(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new Xd(e,i):new Zd(e,i)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(ar(t,this.value)):t!==null&&bi(this.value)===bi(t)&&this.matchesComparison(ar(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return $()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Jt=class n extends Na{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return m_(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function m_(n){return n.op==="and"}function p_(n){return pS(n)&&m_(n)}function pS(n){for(let e of n.filters)if(e instanceof Jt)return!1;return!0}function Yd(n){if(n instanceof ke)return n.field.canonicalString()+n.op.toString()+cr(n.value);if(p_(n))return n.filters.map(e=>Yd(e)).join(",");{let e=n.filters.map(t=>Yd(t)).join(",");return`${n.op}(${e})`}}function g_(n,e){return n instanceof ke?function(i,r){return r instanceof ke&&i.op===r.op&&i.field.isEqual(r.field)&&Yt(i.value,r.value)}(n,e):n instanceof Jt?function(i,r){return r instanceof Jt&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,c)=>s&&g_(o,r.filters[c]),!0):!1}(n,e):void $()}function b_(n){return n instanceof ke?function(t){return`${t.field.canonicalString()} ${t.op} ${cr(t.value)}`}(n):n instanceof Jt?function(t){return t.op.toString()+" {"+t.getFilters().map(b_).join(" ,")+"}"}(n):"Filter"}var Jd=class extends ke{constructor(e,t,i){super(e,t,i),this.key=z.fromName(i.referenceValue)}matches(e){let t=z.comparator(e.key,this.key);return this.matchesComparison(t)}},Xd=class extends ke{constructor(e,t){super(e,"in",t),this.keys=v_("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Zd=class extends ke{constructor(e,t){super(e,"not-in",t),this.keys=v_("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function v_(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>z.fromName(i.referenceValue))}var eh=class extends ke{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return If(t)&&Os(t.arrayValue,this.value)}},th=class extends ke{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&Os(this.value.arrayValue,t)}},nh=class extends ke{constructor(e,t){super(e,"not-in",t)}matches(e){if(Os(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!Os(this.value.arrayValue,t)}},ih=class extends ke{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!If(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Os(this.value.arrayValue,i))}};var rh=class{constructor(e,t=null,i=[],r=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=c,this.ue=null}};function zv(n,e=null,t=[],i=[],r=null,s=null,o=null){return new rh(n,e,t,i,r,s,o)}function Ef(n){let e=K(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>Yd(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ic(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>cr(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>cr(i)).join(",")),e.ue=t}return e.ue}function Tf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mS(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!g_(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Bv(n.startAt,e.startAt)&&Bv(n.endAt,e.endAt)}function sh(n){return z.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}var dr=class{constructor(e,t=null,i=[],r=[],s=null,o="F",c=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function gS(n,e,t,i,r,s,o,c){return new dr(n,e,t,i,r,s,o,c)}function __(n){return new dr(n)}function qv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function bS(n){return n.collectionGroup!==null}function xs(n){let e=K(n);if(e.ce===null){e.ce=[];let t=new Set;for(let s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());let i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Qe(bt.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new ur(s,i))}),t.has(bt.keyField().canonicalString())||e.ce.push(new ur(bt.keyField(),i))}return e.ce}function Kt(n){let e=K(n);return e.le||(e.le=vS(e,xs(n))),e.le}function vS(n,e){if(n.limitType==="F")return zv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new ur(r.field,s)});let t=n.endAt?new lr(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new lr(n.startAt.position,n.startAt.inclusive):null;return zv(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function oh(n,e,t){return new dr(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function rc(n,e){return Tf(Kt(n),Kt(e))&&n.limitType===e.limitType}function y_(n){return`${Ef(Kt(n))}|lt:${n.limitType}`}function Xi(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>b_(r)).join(", ")}]`),ic(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>cr(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>cr(r)).join(",")),`Target(${i})`}(Kt(n))}; limitType=${n.limitType})`}function sc(n,e){return e.isFoundDocument()&&function(i,r){let s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):z.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(let s of xs(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(let s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,c,l){let d=jv(o,c,l);return o.inclusive?d<=0:d<0}(i.startAt,xs(i),r)||i.endAt&&!function(o,c,l){let d=jv(o,c,l);return o.inclusive?d>=0:d>0}(i.endAt,xs(i),r))}(n,e)}function _S(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function w_(n){return(e,t)=>{let i=!1;for(let r of xs(n)){let s=yS(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function yS(n,e,t){let i=n.field.isKeyField()?z.comparator(e.key,t.key):function(s,o,c){let l=o.data.field(s),d=c.data.field(s);return l!==null&&d!==null?ar(l,d):$()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return $()}}var Un=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(let[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){let i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){_r(this.inner,(t,i)=>{for(let[r,s]of i)e(r,s)})}isEmpty(){return d_(this.inner)}size(){return this.innerSize}};var wS=new Ae(z.comparator);function hn(){return wS}var I_=new Ae(z.comparator);function Rs(...n){let e=I_;for(let t of n)e=e.insert(t.key,t);return e}function E_(n){let e=I_;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function hi(){return Ps()}function T_(){return Ps()}function Ps(){return new Un(n=>n.toString(),(n,e)=>n.isEqual(e))}var IS=new Ae(z.comparator),ES=new Qe(z.comparator);function ne(...n){let e=ES;for(let t of n)e=e.add(t);return e}var TS=new Qe(oe);function AS(){return TS}function A_(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ns(e)?"-0":e}}function C_(n){return{integerValue:""+n}}function CS(n,e){return cS(e)?C_(e):A_(n,e)}var hr=class{constructor(){this._=void 0}};function SS(n,e,t){return n instanceof fr?function(r,s){let o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&yf(s)&&(s=wf(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof vi?R_(n,e):n instanceof _i?D_(n,e):function(r,s){let o=S_(r,s),c=$v(o)+$v(r.Pe);return Qd(o)&&Qd(r.Pe)?C_(c):A_(r.serializer,c)}(n,e)}function RS(n,e,t){return n instanceof vi?R_(n,e):n instanceof _i?D_(n,e):t}function S_(n,e){return n instanceof mr?function(i){return Qd(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}var fr=class extends hr{},vi=class extends hr{constructor(e){super(),this.elements=e}};function R_(n,e){let t=x_(e);for(let i of n.elements)t.some(r=>Yt(r,i))||t.push(i);return{arrayValue:{values:t}}}var _i=class extends hr{constructor(e){super(),this.elements=e}};function D_(n,e){let t=x_(e);for(let i of n.elements)t=t.filter(r=>!Yt(r,i));return{arrayValue:{values:t}}}var mr=class extends hr{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function $v(n){return Ee(n.integerValue||n.doubleValue)}function x_(n){return If(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function DS(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof vi&&r instanceof vi||i instanceof _i&&r instanceof _i?or(i.elements,r.elements,Yt):i instanceof mr&&r instanceof mr?Yt(i.Pe,r.Pe):i instanceof fr&&r instanceof fr}(n.transform,e.transform)}var ah=class{constructor(e,t){this.version=e,this.transformResults=t}},mi=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function Ca(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var pr=class{};function P_(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Ma(n.key,mi.none()):new yi(n.key,n.data,mi.none());{let t=n.data,i=Mt.empty(),r=new Qe(bt.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new fn(n.key,i,new Gt(r.toArray()),mi.none())}}function xS(n,e,t){n instanceof yi?function(r,s,o){let c=r.value.clone(),l=Wv(r.fieldTransforms,s,o.transformResults);c.setAll(l),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(n,e,t):n instanceof fn?function(r,s,o){if(!Ca(r.precondition,s))return void s.convertToUnknownDocument(o.version);let c=Wv(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(k_(r)),l.setAll(c),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function ks(n,e,t,i){return n instanceof yi?function(s,o,c,l){if(!Ca(s.precondition,o))return c;let d=s.value.clone(),f=Hv(s.fieldTransforms,l,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(n,e,t,i):n instanceof fn?function(s,o,c,l){if(!Ca(s.precondition,o))return c;let d=Hv(s.fieldTransforms,l,o),f=o.data;return f.setAll(k_(s)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(s,o,c){return Ca(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(n,e,t)}function PS(n,e){let t=null;for(let i of n.fieldTransforms){let r=e.data.field(i.field),s=S_(i.transform,r||null);s!=null&&(t===null&&(t=Mt.empty()),t.set(i.field,s))}return t||null}function Gv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&or(i,r,(s,o)=>DS(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var yi=class extends pr{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}},fn=class extends pr{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function k_(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let i=n.data.field(t);e.set(t,i)}}),e}function Wv(n,e,t){let i=new Map;fe(n.length===t.length);for(let r=0;r<t.length;r++){let s=n[r],o=s.transform,c=e.data.field(s.field);i.set(s.field,RS(o,c,t[r]))}return i}function Hv(n,e,t){let i=new Map;for(let r of n){let s=r.transform,o=t.data.field(r.field);i.set(r.field,SS(s,o,e))}return i}var Ma=class extends pr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},ch=class extends pr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var lh=class{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){let i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];s.key.isEqual(e.key)&&xS(s,e,i[r])}}applyToLocalView(e,t){for(let i of this.baseMutations)i.key.isEqual(e.key)&&(t=ks(i,e,t,this.localWriteTime));for(let i of this.mutations)i.key.isEqual(e.key)&&(t=ks(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let i=T_();return this.mutations.forEach(r=>{let s=e.get(r.key),o=s.overlayedDocument,c=this.applyToLocalView(o,s.mutatedFields);c=t.has(r.key)?null:c;let l=P_(o,c);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Y.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ne())}isEqual(e){return this.batchId===e.batchId&&or(this.mutations,e.mutations,(t,i)=>Gv(t,i))&&or(this.baseMutations,e.baseMutations,(t,i)=>Gv(t,i))}},uh=class n{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){fe(e.mutations.length===i.length);let r=function(){return IS}(),s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new n(e,t,i,r)}};var dh=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var hh=class{constructor(e,t){this.count=e,this.unchangedNames=t}};var De,re;function kS(n){switch(n){default:return $();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function N_(n){if(n===void 0)return un("GRPC error has no .code"),R.UNKNOWN;switch(n){case De.OK:return R.OK;case De.CANCELLED:return R.CANCELLED;case De.UNKNOWN:return R.UNKNOWN;case De.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case De.INTERNAL:return R.INTERNAL;case De.UNAVAILABLE:return R.UNAVAILABLE;case De.UNAUTHENTICATED:return R.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case De.NOT_FOUND:return R.NOT_FOUND;case De.ALREADY_EXISTS:return R.ALREADY_EXISTS;case De.PERMISSION_DENIED:return R.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case De.ABORTED:return R.ABORTED;case De.OUT_OF_RANGE:return R.OUT_OF_RANGE;case De.UNIMPLEMENTED:return R.UNIMPLEMENTED;case De.DATA_LOSS:return R.DATA_LOSS;default:return $()}}(re=De||(De={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";var Kv=null;function NS(){return new TextEncoder}var MS=new Vn([4294967295,4294967295],0);function Qv(n){let e=NS().encode(n),t=new Sd;return t.update(e),new Uint8Array(t.digest())}function Yv(n){let e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vn([t,i],0),new Vn([r,s],0)]}var fh=class n{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new fi(`Invalid padding: ${t}`);if(i<0)throw new fi(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new fi(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new fi(`Invalid padding when bitmap length is 0: ${t}`);this.Ie=8*e.length-t,this.Te=Vn.fromNumber(this.Ie)}Ee(e,t,i){let r=e.add(t.multiply(Vn.fromNumber(i)));return r.compare(MS)===1&&(r=new Vn([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;let t=Qv(e),[i,r]=Yv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){let r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new n(s,r,t);return i.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;let t=Qv(e),[i,r]=Yv(t);for(let s=0;s<this.hashCount;s++){let o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){let t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}},fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Oa=class n{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){let r=new Map;return r.set(e,Vs.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new n(Y.min(),r,new Ae(oe),hn(),ne())}},Vs=class n{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new n(i,t,ne(),ne(),ne())}};var ir=class{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}},Va=class{constructor(e,t){this.targetId=e,this.me=t}},Fa=class{constructor(e,t,i=Ye.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}},La=class{constructor(){this.fe=0,this.ge=Xv(),this.pe=Ye.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}Ce(){let e=ne(),t=ne(),i=ne();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:$()}}),new Vs(this.pe,this.ye,e,t,i)}ve(){this.we=!1,this.ge=Xv()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,fe(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}},mh=class{constructor(e){this.Le=e,this.Be=new Map,this.ke=hn(),this.qe=Jv(),this.Qe=new Ae(oe)}Ke(e){for(let t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(t,e.Ve):this.Ue(t,e.key,e.Ve);for(let t of e.removedTargetIds)this.Ue(t,e.key,e.Ve)}We(e){this.forEachTarget(e,t=>{let i=this.Ge(t);switch(e.state){case 0:this.ze(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.ve(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.ze(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.ze(t)&&(this.je(t),i.De(e.resumeToken));break;default:$()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.ze(r)&&t(r)})}He(e){let t=e.targetId,i=e.me.count,r=this.Je(t);if(r){let s=r.target;if(sh(s))if(i===0){let o=new z(s.path);this.Ue(t,o,Vt.newNoDocument(o,Y.min()))}else fe(i===1);else{let o=this.Ye(t);if(o!==i){let c=this.Ze(e),l=c?this.Xe(c,e,o):1;if(l!==0){this.je(t);let d=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(t,d)}Kv?.et(function(f,p,y,S,k){var M,x,G,X,ie,me;let Je={localCacheCount:f,existenceFilterCount:p.count,databaseId:y.database,projectId:y.projectId},le=p.unchangedNames;return le&&(Je.bloomFilter={applied:k===0,hashCount:(M=le?.hashCount)!==null&&M!==void 0?M:0,bitmapLength:(X=(G=(x=le?.bits)===null||x===void 0?void 0:x.bitmap)===null||G===void 0?void 0:G.length)!==null&&X!==void 0?X:0,padding:(me=(ie=le?.bits)===null||ie===void 0?void 0:ie.padding)!==null&&me!==void 0?me:0,mightContain:I=>{var g;return(g=S?.mightContain(I))!==null&&g!==void 0&&g}}),Je}(o,e.me,this.Le.tt(),c,l))}}}}Ze(e){let t=e.me.unchangedNames;if(!t||!t.bits)return null;let{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t,o,c;try{o=Ln(i).toUint8Array()}catch(l){if(l instanceof Pa)return sr("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{c=new fh(o,r,s)}catch(l){return sr(l instanceof fi?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return c.Ie===0?null:c}Xe(e,t,i){return t.me.count===i-this.nt(e,t.targetId)?0:2}nt(e,t){let i=this.Le.getRemoteKeysForTarget(t),r=0;return i.forEach(s=>{let o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.Ue(t,s,null),r++)}),r}rt(e){let t=new Map;this.Be.forEach((s,o)=>{let c=this.Je(o);if(c){if(s.current&&sh(c.target)){let l=new z(c.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,Vt.newNoDocument(l,e))}s.be&&(t.set(o,s.Ce()),s.ve())}});let i=ne();this.qe.forEach((s,o)=>{let c=!0;o.forEachWhile(l=>{let d=this.Je(l);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));let r=new Oa(e,t,this.Qe,this.ke,i);return this.ke=hn(),this.qe=Jv(),this.Qe=new Ae(oe),r}$e(e,t){if(!this.ze(e))return;let i=this.it(e,t.key)?2:0;this.Ge(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e))}Ue(e,t,i){if(!this.ze(e))return;let r=this.Ge(e);this.it(e,t)?r.Fe(t,1):r.Me(t),this.qe=this.qe.insert(t,this.st(t).delete(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ye(e){let t=this.Ge(e).Ce();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let t=this.Be.get(e);return t||(t=new La,this.Be.set(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new Qe(oe),this.qe=this.qe.insert(e,t)),t}ze(e){let t=this.Je(e)!==null;return t||O("WatchChangeAggregator","Detected inactive target",e),t}Je(e){let t=this.Be.get(e);return t&&t.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new La),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.Ue(e,t,null)})}it(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}};function Jv(){return new Ae(z.comparator)}function Xv(){return new Ae(z.comparator)}var OS={asc:"ASCENDING",desc:"DESCENDING"},VS={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},FS={and:"AND",or:"OR"},ph=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function gh(n,e){return n.useProto3Json||ic(e)?e:{value:e}}function Ua(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function LS(n,e){return Ua(n,e.toTimestamp())}function Qt(n){return fe(!!n),Y.fromTimestamp(function(t){let i=dn(t);return new je(i.seconds,i.nanos)}(n))}function Af(n,e){return bh(n,e).canonicalString()}function bh(n,e){let t=function(r){return new Te(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function O_(n){let e=Te.fromString(n);return fe(j_(e)),e}function vh(n,e){return Af(n.databaseId,e.path)}function Md(n,e){let t=O_(e);if(t.get(1)!==n.databaseId.projectId)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new F(R.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new z(F_(t))}function V_(n,e){return Af(n.databaseId,e)}function US(n){let e=O_(n);return e.length===4?Te.emptyPath():F_(e)}function _h(n){return new Te(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function F_(n){return fe(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function Zv(n,e,t){return{name:vh(n,e),fields:t.value.mapValue.fields}}function jS(n,e){let t;if("targetChange"in e){e.targetChange;let i=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:$()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(d,f){return d.useProto3Json?(fe(f===void 0||typeof f=="string"),Ye.fromBase64String(f||"")):(fe(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Ye.fromUint8Array(f||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){let f=d.code===void 0?R.UNKNOWN:N_(d.code);return new F(f,d.message||"")}(o);t=new Fa(i,r,s,c||null)}else if("documentChange"in e){e.documentChange;let i=e.documentChange;i.document,i.document.name,i.document.updateTime;let r=Md(n,i.document.name),s=Qt(i.document.updateTime),o=i.document.createTime?Qt(i.document.createTime):Y.min(),c=new Mt({mapValue:{fields:i.document.fields}}),l=Vt.newFoundDocument(r,s,o,c),d=i.targetIds||[],f=i.removedTargetIds||[];t=new ir(d,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;let i=e.documentDelete;i.document;let r=Md(n,i.document),s=i.readTime?Qt(i.readTime):Y.min(),o=Vt.newNoDocument(r,s),c=i.removedTargetIds||[];t=new ir([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;let i=e.documentRemove;i.document;let r=Md(n,i.document),s=i.removedTargetIds||[];t=new ir([],s,r,null)}else{if(!("filter"in e))return $();{e.filter;let i=e.filter;i.targetId;let{count:r=0,unchangedNames:s}=i,o=new hh(r,s),c=i.targetId;t=new Va(c,o)}}return t}function BS(n,e){let t;if(e instanceof yi)t={update:Zv(n,e.key,e.value)};else if(e instanceof Ma)t={delete:vh(n,e.key)};else if(e instanceof fn)t={update:Zv(n,e.key,e.data),updateMask:YS(e.fieldMask)};else{if(!(e instanceof ch))return $();t={verify:vh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){let c=o.transform;if(c instanceof fr)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof vi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof _i)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof mr)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw $()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:LS(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:$()}(n,e.precondition)),t}function zS(n,e){return n&&n.length>0?(fe(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Qt(r.updateTime):Qt(s);return o.isEqual(Y.min())&&(o=Qt(s)),new ah(o,r.transformResults||[])}(t,e))):[]}function qS(n,e){return{documents:[V_(n,e.path)]}}function $S(n,e){let t={structuredQuery:{}},i=e.path,r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=V_(n,r);let s=function(d){if(d.length!==0)return U_(Jt.create(d,"and"))}(e.filters);s&&(t.structuredQuery.where=s);let o=function(d){if(d.length!==0)return d.map(f=>function(y){return{field:Zi(y.field),direction:HS(y.dir)}}(f))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);let c=gh(n,e.limit);return c!==null&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:t,parent:r}}function GS(n){let e=US(n.parent),t=n.structuredQuery,i=t.from?t.from.length:0,r=null;if(i>0){fe(i===1);let f=t.from[0];f.allDescendants?r=f.collectionId:e=e.child(f.collectionId)}let s=[];t.where&&(s=function(p){let y=L_(p);return y instanceof Jt&&p_(y)?y.getFilters():[y]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(y=>function(k){return new ur(er(k.field),function(x){switch(x){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(y))}(t.orderBy));let c=null;t.limit&&(c=function(p){let y;return y=typeof p=="object"?p.value:p,ic(y)?null:y}(t.limit));let l=null;t.startAt&&(l=function(p){let y=!!p.before,S=p.values||[];return new lr(S,y)}(t.startAt));let d=null;return t.endAt&&(d=function(p){let y=!p.before,S=p.values||[];return new lr(S,y)}(t.endAt)),gS(e,r,o,s,c,"F",l,d)}function WS(n,e){let t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function L_(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let i=er(t.unaryFilter.field);return ke.create(i,"==",{doubleValue:NaN});case"IS_NULL":let r=er(t.unaryFilter.field);return ke.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let s=er(t.unaryFilter.field);return ke.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let o=er(t.unaryFilter.field);return ke.create(o,"!=",{nullValue:"NULL_VALUE"});default:return $()}}(n):n.fieldFilter!==void 0?function(t){return ke.create(er(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Jt.create(t.compositeFilter.filters.map(i=>L_(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return $()}}(t.compositeFilter.op))}(n):$()}function HS(n){return OS[n]}function KS(n){return VS[n]}function QS(n){return FS[n]}function Zi(n){return{fieldPath:n.canonicalString()}}function er(n){return bt.fromServerFormat(n.fieldPath)}function U_(n){return n instanceof ke?function(t){if(t.op==="=="){if(Uv(t.value))return{unaryFilter:{field:Zi(t.field),op:"IS_NAN"}};if(Lv(t.value))return{unaryFilter:{field:Zi(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Uv(t.value))return{unaryFilter:{field:Zi(t.field),op:"IS_NOT_NAN"}};if(Lv(t.value))return{unaryFilter:{field:Zi(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zi(t.field),op:KS(t.op),value:t.value}}}(n):n instanceof Jt?function(t){let i=t.getFilters().map(r=>U_(r));return i.length===1?i[0]:{compositeFilter:{op:QS(t.op),filters:i}}}(n):$()}function YS(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function j_(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var Fs=class n{constructor(e,t,i,r,s=Y.min(),o=Y.min(),c=Ye.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=l}withSequenceNumber(e){return new n(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new n(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var yh=class{constructor(e){this.ct=e}};function JS(n){let e=GS({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?oh(e,e.limit,"L"):e}var ja=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(Ee(e.integerValue));else if("doubleValue"in e){let i=Ee(e.doubleValue);isNaN(i)?this.dt(t,13):(this.dt(t,15),Ns(i)?t.At(0):t.At(i))}else if("timestampValue"in e){let i=e.timestampValue;this.dt(t,20),typeof i=="string"&&(i=dn(i)),t.Rt(`${i.seconds||""}`),t.At(i.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Ln(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let i=e.geoPointValue;this.dt(t,45),t.At(i.latitude||0),t.At(i.longitude||0)}else"mapValue"in e?h_(e)?this.dt(t,Number.MAX_SAFE_INTEGER):(this.wt(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.St(e.arrayValue,t),this.ft(t)):$()}Vt(e,t){this.dt(t,25),this.bt(e,t)}bt(e,t){t.Rt(e)}wt(e,t){let i=e.fields||{};this.dt(t,55);for(let r of Object.keys(i))this.Vt(r,t),this.Tt(i[r],t)}St(e,t){let i=e.values||[];this.dt(t,50);for(let r of i)this.Tt(r,t)}yt(e,t){this.dt(t,37),z.fromName(e).path.forEach(i=>{this.dt(t,60),this.bt(i,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};ja.Dt=new ja;var wh=class{constructor(){this.an=new Ih}addToCollectionParentIndex(e,t){return this.an.add(t),D.resolve()}getCollectionParents(e,t){return D.resolve(this.an.getEntries(t))}addFieldIndex(e,t){return D.resolve()}deleteFieldIndex(e,t){return D.resolve()}deleteAllFieldIndexes(e){return D.resolve()}createTargetIndexes(e,t){return D.resolve()}getDocumentsMatchingTarget(e,t){return D.resolve(null)}getIndexType(e,t){return D.resolve(0)}getFieldIndexes(e,t){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,t){return D.resolve(gi.min())}getMinOffsetFromCollectionGroup(e,t){return D.resolve(gi.min())}updateCollectionGroup(e,t,i){return D.resolve()}updateIndexEntries(e,t){return D.resolve()}},Ih=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Qe(Te.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){let t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Qe(Te.comparator)).toArray()}};var RO=new Uint8Array(0);var $t=class n{constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};$t.DEFAULT_COLLECTION_PERCENTILE=10,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$t.DEFAULT=new $t(41943040,$t.DEFAULT_COLLECTION_PERCENTILE,$t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$t.DISABLED=new $t(-1,0,0);var Ls=class n{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static Ln(){return new n(0)}static Bn(){return new n(-1)}};var Eh=class{constructor(){this.changes=new Un(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Vt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let i=this.changes.get(t);return i!==void 0?D.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var Th=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Ah=class{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&ks(i.mutation,r,Gt.empty(),je.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,ne()).next(()=>i))}getLocalViewOfDocuments(e,t,i=ne()){let r=hi();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Rs();return s.forEach((c,l)=>{o=o.insert(c,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){let i=hi();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,ne()))}populateOverlays(e,t,i){let r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,c)=>{t.set(o,c)})})}computeViews(e,t,i,r){let s=hn(),o=Ps(),c=function(){return Ps()}();return t.forEach((l,d)=>{let f=i.get(d.key);r.has(d.key)&&(f===void 0||f.mutation instanceof fn)?s=s.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),ks(f.mutation,d,f.mutation.getFieldMask(),je.now())):o.set(d.key,Gt.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((d,f)=>o.set(d,f)),t.forEach((d,f)=>{var p;return c.set(d,new Th(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,t){let i=Ps(),r=new Ae((o,c)=>o-c),s=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(let c of o)c.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let f=i.get(l)||Gt.empty();f=c.applyToLocalView(d,f),i.set(l,f);let p=(r.get(c.batchId)||ne()).add(l);r=r.insert(c.batchId,p)})}).next(()=>{let o=[],c=r.getReverseIterator();for(;c.hasNext();){let l=c.getNext(),d=l.key,f=l.value,p=T_();f.forEach(y=>{if(!s.has(y)){let S=P_(t.get(y),i.get(y));S!==null&&p.set(y,S),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return D.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return z.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):bS(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):D.resolve(hi()),c=-1,l=s;return o.next(d=>D.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),s.get(f)?D.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{l=l.insert(f,y)}))).next(()=>this.populateOverlays(e,d,s)).next(()=>this.computeViews(e,l,d,ne())).next(f=>({batchId:c,changes:E_(f)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new z(t)).next(i=>{let r=Rs();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){let s=t.collectionGroup,o=Rs();return this.indexManager.getCollectionParents(e,s).next(c=>D.forEach(c,l=>{let d=function(p,y){return new dr(y,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,i,r).next(f=>{f.forEach((p,y)=>{o=o.insert(p,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,d)=>{let f=d.getKey();o.get(f)===null&&(o=o.insert(f,Vt.newInvalidDocument(f)))});let c=Rs();return o.forEach((l,d)=>{let f=s.get(l);f!==void 0&&ks(f.mutation,d,Gt.empty(),je.now()),sc(t,d)&&(c=c.insert(l,d))}),c})}};var Ch=class{constructor(e){this.serializer=e,this.lr=new Map,this.hr=new Map}getBundleMetadata(e,t){return D.resolve(this.lr.get(t))}saveBundleMetadata(e,t){return this.lr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Qt(r.createTime)}}(t)),D.resolve()}getNamedQuery(e,t){return D.resolve(this.hr.get(t))}saveNamedQuery(e,t){return this.hr.set(t.name,function(r){return{name:r.name,query:JS(r.bundledQuery),readTime:Qt(r.readTime)}}(t)),D.resolve()}};var Sh=class{constructor(){this.overlays=new Ae(z.comparator),this.Pr=new Map}getOverlay(e,t){return D.resolve(this.overlays.get(t))}getOverlays(e,t){let i=hi();return D.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.ht(e,t,s)}),D.resolve()}removeOverlaysForBatchId(e,t,i){let r=this.Pr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Pr.delete(i)),D.resolve()}getOverlaysForCollection(e,t,i){let r=hi(),s=t.length+1,o=new z(t.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){let l=c.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return D.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Ae((d,f)=>d-f),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>i){let f=s.get(d.largestBatchId);f===null&&(f=hi(),s=s.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}let c=hi(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=r)););return D.resolve(c)}ht(e,t,i){let r=this.overlays.get(i.key);if(r!==null){let o=this.Pr.get(r.largestBatchId).delete(i.key);this.Pr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new dh(t,i));let s=this.Pr.get(t);s===void 0&&(s=ne(),this.Pr.set(t,s)),this.Pr.set(t,s.add(i.key))}};var Rh=class{constructor(){this.sessionToken=Ye.EMPTY_BYTE_STRING}getSessionToken(e){return D.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,D.resolve()}};var Us=class{constructor(){this.Ir=new Qe(xe.Tr),this.Er=new Qe(xe.dr)}isEmpty(){return this.Ir.isEmpty()}addReference(e,t){let i=new xe(e,t);this.Ir=this.Ir.add(i),this.Er=this.Er.add(i)}Ar(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.Rr(new xe(e,t))}Vr(e,t){e.forEach(i=>this.removeReference(i,t))}mr(e){let t=new z(new Te([])),i=new xe(t,e),r=new xe(t,e+1),s=[];return this.Er.forEachInRange([i,r],o=>{this.Rr(o),s.push(o.key)}),s}gr(){this.Ir.forEach(e=>this.Rr(e))}Rr(e){this.Ir=this.Ir.delete(e),this.Er=this.Er.delete(e)}pr(e){let t=new z(new Te([])),i=new xe(t,e),r=new xe(t,e+1),s=ne();return this.Er.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){let t=new xe(e,0),i=this.Ir.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}},xe=class{constructor(e,t){this.key=e,this.yr=t}static Tr(e,t){return z.comparator(e.key,t.key)||oe(e.yr,t.yr)}static dr(e,t){return oe(e.yr,t.yr)||z.comparator(e.key,t.key)}};var Dh=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.wr=1,this.Sr=new Qe(xe.Tr)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){let s=this.wr;this.wr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new lh(s,t,i,r);this.mutationQueue.push(o);for(let c of r)this.Sr=this.Sr.add(new xe(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,t){return D.resolve(this.br(t))}getNextMutationBatchAfterBatchId(e,t){let i=t+1,r=this.Dr(i),s=r<0?0:r;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.wr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let i=new xe(t,0),r=new xe(t,Number.POSITIVE_INFINITY),s=[];return this.Sr.forEachInRange([i,r],o=>{let c=this.br(o.yr);s.push(c)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Qe(oe);return t.forEach(r=>{let s=new xe(r,0),o=new xe(r,Number.POSITIVE_INFINITY);this.Sr.forEachInRange([s,o],c=>{i=i.add(c.yr)})}),D.resolve(this.Cr(i))}getAllMutationBatchesAffectingQuery(e,t){let i=t.path,r=i.length+1,s=i;z.isDocumentKey(s)||(s=s.child(""));let o=new xe(new z(s),0),c=new Qe(oe);return this.Sr.forEachWhile(l=>{let d=l.key.path;return!!i.isPrefixOf(d)&&(d.length===r&&(c=c.add(l.yr)),!0)},o),D.resolve(this.Cr(c))}Cr(e){let t=[];return e.forEach(i=>{let r=this.br(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){fe(this.vr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Sr;return D.forEach(t.mutations,r=>{let s=new xe(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Sr=i})}xn(e){}containsKey(e,t){let i=new xe(t,0),r=this.Sr.firstAfterOrEqual(i);return D.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}vr(e,t){return this.Dr(e)}Dr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}br(e){let t=this.Dr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var xh=class{constructor(e){this.Fr=e,this.docs=function(){return new Ae(z.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Fr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let i=this.docs.get(t);return D.resolve(i?i.document.mutableCopy():Vt.newInvalidDocument(t))}getEntries(e,t){let i=hn();return t.forEach(r=>{let s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Vt.newInvalidDocument(r))}),D.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=hn(),o=t.path,c=new z(o.child("")),l=this.docs.getIteratorFrom(c);for(;l.hasNext();){let{key:d,value:{document:f}}=l.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||sS(rS(f),i)<=0||(r.has(f.key)||sc(t,f))&&(s=s.insert(f.key,f.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,t,i,r){$()}Mr(e,t){return D.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Ph(this)}getSize(e){return D.resolve(this.size)}},Ph=class extends Eh{constructor(e){super(),this.ur=e}applyChanges(e){let t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.ur.addEntry(e,r)):this.ur.removeEntry(i)}),D.waitFor(t)}getFromCache(e,t){return this.ur.getEntry(e,t)}getAllFromCache(e,t){return this.ur.getEntries(e,t)}};var kh=class{constructor(e){this.persistence=e,this.Or=new Un(t=>Ef(t),Tf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Nr=0,this.Lr=new Us,this.targetCount=0,this.Br=Ls.Ln()}forEachTarget(e,t){return this.Or.forEach((i,r)=>t(r)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Nr)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.Nr&&(this.Nr=t),D.resolve()}Qn(e){this.Or.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.Br=new Ls(t),this.highestTargetId=t),e.sequenceNumber>this.Nr&&(this.Nr=e.sequenceNumber)}addTargetData(e,t){return this.Qn(t),this.targetCount+=1,D.resolve()}updateTargetData(e,t){return this.Qn(t),D.resolve()}removeTargetData(e,t){return this.Or.delete(t.target),this.Lr.mr(t.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,t,i){let r=0,s=[];return this.Or.forEach((o,c)=>{c.sequenceNumber<=t&&i.get(c.targetId)===null&&(this.Or.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),r++)}),D.waitFor(s).next(()=>r)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,t){let i=this.Or.get(t)||null;return D.resolve(i)}addMatchingKeys(e,t,i){return this.Lr.Ar(t,i),D.resolve()}removeMatchingKeys(e,t,i){this.Lr.Vr(t,i);let r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Lr.mr(t),D.resolve()}getMatchingKeysForTargetId(e,t){let i=this.Lr.pr(t);return D.resolve(i)}containsKey(e,t){return D.resolve(this.Lr.containsKey(t))}};var Nh=class{constructor(e,t){this.kr={},this.overlays={},this.qr=new u_(0),this.Qr=!1,this.Qr=!0,this.Kr=new Rh,this.referenceDelegate=e(this),this.$r=new kh(this),this.indexManager=new wh,this.remoteDocumentCache=function(r){return new xh(r)}(i=>this.referenceDelegate.Ur(i)),this.serializer=new yh(t),this.Wr=new Ch(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Qr=!1,Promise.resolve()}get started(){return this.Qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Sh,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.kr[e.toKey()];return i||(i=new Dh(t,this.referenceDelegate),this.kr[e.toKey()]=i),i}getGlobalsCache(){return this.Kr}getTargetCache(){return this.$r}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Wr}runTransaction(e,t,i){O("MemoryPersistence","Starting transaction:",e);let r=new Mh(this.qr.next());return this.referenceDelegate.Gr(),i(r).next(s=>this.referenceDelegate.zr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}jr(e,t){return D.or(Object.values(this.kr).map(i=>()=>i.containsKey(e,t)))}},Mh=class extends Wd{constructor(e){super(),this.currentSequenceNumber=e}},Oh=class n{constructor(e){this.persistence=e,this.Hr=new Us,this.Jr=null}static Yr(e){return new n(e)}get Zr(){if(this.Jr)return this.Jr;throw $()}addReference(e,t,i){return this.Hr.addReference(i,t),this.Zr.delete(i.toString()),D.resolve()}removeReference(e,t,i){return this.Hr.removeReference(i,t),this.Zr.add(i.toString()),D.resolve()}markPotentiallyOrphaned(e,t){return this.Zr.add(t.toString()),D.resolve()}removeTarget(e,t){this.Hr.mr(t.targetId).forEach(r=>this.Zr.add(r.toString()));let i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.Zr.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Gr(){this.Jr=new Set}zr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Zr,i=>{let r=z.fromPath(i);return this.Xr(e,r).next(s=>{s||t.removeEntry(r,Y.min())})}).next(()=>(this.Jr=null,t.apply(e)))}updateLimboDocument(e,t){return this.Xr(e,t).next(i=>{i?this.Zr.delete(t.toString()):this.Zr.add(t.toString())})}Ur(e){return 0}Xr(e,t){return D.or([()=>D.resolve(this.Hr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.jr(e,t)])}};var Vh=class n{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Ki=i,this.$i=r}static Ui(e,t){let i=ne(),r=ne();for(let s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new n(e,t.fromCache,i,r)}};var Fh=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Lh=class{constructor(){this.Wi=!1,this.Gi=!1,this.zi=100,this.ji=function(){return Ub()?8:aS(Pe())>0?6:4}()}initialize(e,t){this.Hi=e,this.indexManager=t,this.Wi=!0}getDocumentsMatchingQuery(e,t,i,r){let s={result:null};return this.Ji(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Yi(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new Fh;return this.Zi(e,t,o).next(c=>{if(s.result=c,this.Gi)return this.Xi(e,t,o,c.size)})}).next(()=>s.result)}Xi(e,t,i,r){return i.documentReadCount<this.zi?(Ss()<=te.DEBUG&&O("QueryEngine","SDK will not create cache indexes for query:",Xi(t),"since it only creates cache indexes for collection contains","more than or equal to",this.zi,"documents"),D.resolve()):(Ss()<=te.DEBUG&&O("QueryEngine","Query:",Xi(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ji*r?(Ss()<=te.DEBUG&&O("QueryEngine","The SDK decides to create cache indexes for query:",Xi(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Kt(t))):D.resolve())}Ji(e,t){if(qv(t))return D.resolve(null);let i=Kt(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=oh(t,null,"F"),i=Kt(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{let o=ne(...s);return this.Hi.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,i).next(l=>{let d=this.es(t,c);return this.ts(t,d,o,l.readTime)?this.Ji(e,oh(t,null,"F")):this.ns(e,d,t,l)}))})))}Yi(e,t,i,r){return qv(t)||r.isEqual(Y.min())?D.resolve(null):this.Hi.getDocuments(e,i).next(s=>{let o=this.es(t,s);return this.ts(t,o,i,r)?D.resolve(null):(Ss()<=te.DEBUG&&O("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Xi(t)),this.ns(e,o,t,iS(r,-1)).next(c=>c))})}es(e,t){let i=new Qe(w_(e));return t.forEach((r,s)=>{sc(e,s)&&(i=i.add(s))}),i}ts(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;let s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Zi(e,t,i){return Ss()<=te.DEBUG&&O("QueryEngine","Using full collection scan to execute query:",Xi(t)),this.Hi.getDocumentsMatchingQuery(e,t,gi.min(),i)}ns(e,t,i,r){return this.Hi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}};var Uh=class{constructor(e,t,i,r){this.persistence=e,this.rs=t,this.serializer=r,this.ss=new Ae(oe),this.os=new Un(s=>Ef(s),Tf),this._s=new Map,this.us=e.getRemoteDocumentCache(),this.$r=e.getTargetCache(),this.Wr=e.getBundleCache(),this.cs(i)}cs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Ah(this.us,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.us.setIndexManager(this.indexManager),this.rs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.ss))}};function XS(n,e,t,i){return new Uh(n,e,t,i)}function B_(n,e){return b(this,null,function*(){let t=K(n);return yield t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.cs(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{let o=[],c=[],l=ne();for(let d of r){o.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}for(let d of s){c.push(d.batchId);for(let f of d.mutations)l=l.add(f.key)}return t.localDocuments.getDocuments(i,l).next(d=>({ls:d,removedBatchIds:o,addedBatchIds:c}))})})})}function ZS(n,e){let t=K(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{let r=e.batch.keys(),s=t.us.newChangeBuffer({trackRemovals:!0});return function(c,l,d,f){let p=d.batch,y=p.keys(),S=D.resolve();return y.forEach(k=>{S=S.next(()=>f.getEntry(l,k)).next(M=>{let x=d.docVersions.get(k);fe(x!==null),M.version.compareTo(x)<0&&(p.applyToRemoteDocument(M,d),M.isValidDocument()&&(M.setReadTime(d.commitVersion),f.addEntry(M)))})}),S.next(()=>c.mutationQueue.removeMutationBatch(l,p))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(c){let l=ne();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(l=l.add(c.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function z_(n){let e=K(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.$r.getLastRemoteSnapshotVersion(t))}function eR(n,e){let t=K(n),i=e.snapshotVersion,r=t.ss;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=t.us.newChangeBuffer({trackRemovals:!0});r=t.ss;let c=[];e.targetChanges.forEach((f,p)=>{let y=r.get(p);if(!y)return;c.push(t.$r.removeMatchingKeys(s,f.removedDocuments,p).next(()=>t.$r.addMatchingKeys(s,f.addedDocuments,p)));let S=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?S=S.withResumeToken(Ye.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(f.resumeToken,i)),r=r.insert(p,S),function(M,x,G){return M.resumeToken.approximateByteSize()===0||x.snapshotVersion.toMicroseconds()-M.snapshotVersion.toMicroseconds()>=3e8?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(y,S,f)&&c.push(t.$r.updateTargetData(s,S))});let l=hn(),d=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(t.persistence.referenceDelegate.updateLimboDocument(s,f))}),c.push(tR(s,o,e.documentUpdates).next(f=>{l=f.hs,d=f.Ps})),!i.isEqual(Y.min())){let f=t.$r.getLastRemoteSnapshotVersion(s).next(p=>t.$r.setTargetsMetadata(s,s.currentSequenceNumber,i));c.push(f)}return D.waitFor(c).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,d)).next(()=>l)}).then(s=>(t.ss=r,s))}function tR(n,e,t){let i=ne(),r=ne();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=hn();return t.forEach((c,l)=>{let d=s.get(c);l.isFoundDocument()!==d.isFoundDocument()&&(r=r.add(c)),l.isNoDocument()&&l.version.isEqual(Y.min())?(e.removeEntry(c,l.readTime),o=o.insert(c,l)):!d.isValidDocument()||l.version.compareTo(d.version)>0||l.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(l),o=o.insert(c,l)):O("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",l.version)}),{hs:o,Ps:r}})}function nR(n,e){let t=K(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function iR(n,e){let t=K(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.$r.getTargetData(i,e).next(s=>s?(r=s,D.resolve(r)):t.$r.allocateTargetId(i).next(o=>(r=new Fs(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.$r.addTargetData(i,r).next(()=>r))))}).then(i=>{let r=t.ss.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.ss=t.ss.insert(i.targetId,i),t.os.set(e,i.targetId)),i})}function jh(n,e,t){return b(this,null,function*(){let i=K(n),r=i.ss.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(!Gs(o))throw o;O("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.ss=i.ss.remove(e),i.os.delete(r.target)})}function e_(n,e,t){let i=K(n),r=Y.min(),s=ne();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,d,f){let p=K(l),y=p.os.get(f);return y!==void 0?D.resolve(p.ss.get(y)):p.$r.getTargetData(d,f)}(i,o,Kt(e)).next(c=>{if(c)return r=c.lastLimboFreeSnapshotVersion,i.$r.getMatchingKeysForTargetId(o,c.targetId).next(l=>{s=l})}).next(()=>i.rs.getDocumentsMatchingQuery(o,e,t?r:Y.min(),t?s:ne())).next(c=>(rR(i,_S(e),c),{documents:c,Is:s})))}function rR(n,e,t){let i=n._s.get(e)||Y.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n._s.set(e,i)}var Ba=class{constructor(){this.activeTargetIds=AS()}Vs(e){this.activeTargetIds=this.activeTargetIds.add(e)}fs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Rs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Bh=class{constructor(){this.io=new Ba,this.so={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e){return this.io.Vs(e),this.so[e]||"not-current"}updateQueryState(e,t,i){this.so[e]=t}removeLocalQueryTarget(e){this.io.fs(e)}isLocalQueryTarget(e){return this.io.activeTargetIds.has(e)}clearQueryState(e){delete this.so[e]}getAllActiveQueryTargets(){return this.io.activeTargetIds}isActiveQueryTarget(e){return this.io.activeTargetIds.has(e)}start(){return this.io=new Ba,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var zh=class{oo(e){}shutdown(){}};var za=class{constructor(){this._o=()=>this.ao(),this.uo=()=>this.co(),this.lo=[],this.ho()}oo(e){this.lo.push(e)}shutdown(){window.removeEventListener("online",this._o),window.removeEventListener("offline",this.uo)}ho(){window.addEventListener("online",this._o),window.addEventListener("offline",this.uo)}ao(){O("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.lo)e(0)}co(){O("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.lo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ta=null;function Od(){return Ta===null?Ta=function(){return 268435456+Math.round(2147483648*Math.random())}():Ta++,"0x"+Ta.toString(16)}var sR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var qh=class{constructor(e){this.Po=e.Po,this.Io=e.Io}To(e){this.Eo=e}Ao(e){this.Ro=e}Vo(e){this.mo=e}onMessage(e){this.fo=e}close(){this.Io()}send(e){this.Po(e)}po(){this.Eo()}yo(){this.Ro()}wo(e){this.mo(e)}So(e){this.fo(e)}};var Ke="WebChannelConnection",$h=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.bo=i+"://"+t.host,this.Do=`projects/${r}/databases/${s}`,this.Co=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}get vo(){return!1}Fo(t,i,r,s,o){let c=Od(),l=this.Mo(t,i.toUriEncodedString());O("RestConnection",`Sending RPC '${t}' ${c}:`,l,r);let d={"google-cloud-resource-prefix":this.Do,"x-goog-request-params":this.Co};return this.xo(d,s,o),this.Oo(t,l,d,r).then(f=>(O("RestConnection",`Received RPC '${t}' ${c}: `,f),f),f=>{throw sr("RestConnection",`RPC '${t}' ${c} failed with error: `,f,"url: ",l,"request:",r),f})}No(t,i,r,s,o,c){return this.Fo(t,i,r,s,o)}xo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+vr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}Mo(t,i){let r=sR[t];return`${this.bo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Oo(e,t,i,r){let s=Od();return new Promise((o,c)=>{let l=new Rd;l.setWithCredentials(!0),l.listenOnce(xd.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Cs.NO_ERROR:let f=l.getResponseJson();O(Ke,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(f)),o(f);break;case Cs.TIMEOUT:O(Ke,`RPC '${e}' ${s} timed out`),c(new F(R.DEADLINE_EXCEEDED,"Request time out"));break;case Cs.HTTP_ERROR:let p=l.getStatus();if(O(Ke,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let S=y?.error;if(S&&S.status&&S.message){let k=function(x){let G=x.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(G)>=0?G:R.UNKNOWN}(S.status);c(new F(k,S.message))}else c(new F(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else c(new F(R.UNAVAILABLE,"Connection failed."));break;default:$()}}finally{O(Ke,`RPC '${e}' ${s} completed.`)}});let d=JSON.stringify(r);O(Ke,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",d,i,15)})}Lo(e,t,i){let r=Od(),s=[this.bo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Nd(),c=kd(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.xmlHttpFactory=new Dd({})),this.xo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;let f=s.join("");O(Ke,`Creating RPC '${e}' stream ${r}: ${f}`,l);let p=o.createWebChannel(f,l),y=!1,S=!1,k=new qh({Po:x=>{S?O(Ke,`Not sending because RPC '${e}' stream ${r} is closed:`,x):(y||(O(Ke,`Opening RPC '${e}' stream ${r} transport.`),p.open(),y=!0),O(Ke,`RPC '${e}' stream ${r} sending:`,x),p.send(x))},Io:()=>p.close()}),M=(x,G,X)=>{x.listen(G,ie=>{try{X(ie)}catch(me){setTimeout(()=>{throw me},0)}})};return M(p,Ji.EventType.OPEN,()=>{S||(O(Ke,`RPC '${e}' stream ${r} transport opened.`),k.po())}),M(p,Ji.EventType.CLOSE,()=>{S||(S=!0,O(Ke,`RPC '${e}' stream ${r} transport closed`),k.wo())}),M(p,Ji.EventType.ERROR,x=>{S||(S=!0,sr(Ke,`RPC '${e}' stream ${r} transport errored:`,x),k.wo(new F(R.UNAVAILABLE,"The operation could not be completed")))}),M(p,Ji.EventType.MESSAGE,x=>{var G;if(!S){let X=x.data[0];fe(!!X);let ie=X,me=ie.error||((G=ie[0])===null||G===void 0?void 0:G.error);if(me){O(Ke,`RPC '${e}' stream ${r} received error:`,me);let Je=me.status,le=function(_){let w=De[_];if(w!==void 0)return N_(w)}(Je),I=me.message;le===void 0&&(le=R.INTERNAL,I="Unknown error status: "+Je+" with message "+me.message),S=!0,k.wo(new F(le,I)),p.close()}else O(Ke,`RPC '${e}' stream ${r} received:`,X),k.So(X)}}),M(c,Pd.STAT_EVENT,x=>{x.stat===Ia.PROXY?O(Ke,`RPC '${e}' stream ${r} detected buffering proxy`):x.stat===Ia.NOPROXY&&O(Ke,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{k.yo()},0),k}};function Vd(){return typeof document<"u"?document:null}function oc(n){return new ph(n,!0)}var qa=class{constructor(e,t,i=1e3,r=1.5,s=6e4){this.ai=e,this.timerId=t,this.Bo=i,this.ko=r,this.qo=s,this.Qo=0,this.Ko=null,this.$o=Date.now(),this.reset()}reset(){this.Qo=0}Uo(){this.Qo=this.qo}Wo(e){this.cancel();let t=Math.floor(this.Qo+this.Go()),i=Math.max(0,Date.now()-this.$o),r=Math.max(0,t-i);r>0&&O("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Qo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Ko=this.ai.enqueueAfterDelay(this.timerId,r,()=>(this.$o=Date.now(),e())),this.Qo*=this.ko,this.Qo<this.Bo&&(this.Qo=this.Bo),this.Qo>this.qo&&(this.Qo=this.qo)}zo(){this.Ko!==null&&(this.Ko.skipDelay(),this.Ko=null)}cancel(){this.Ko!==null&&(this.Ko.cancel(),this.Ko=null)}Go(){return(Math.random()-.5)*this.Qo}};var $a=class{constructor(e,t,i,r,s,o,c,l){this.ai=e,this.jo=i,this.Ho=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=l,this.state=0,this.Jo=0,this.Yo=null,this.Zo=null,this.stream=null,this.Xo=0,this.e_=new qa(e,t)}t_(){return this.state===1||this.state===5||this.n_()}n_(){return this.state===2||this.state===3}start(){this.Xo=0,this.state!==4?this.auth():this.r_()}stop(){return b(this,null,function*(){this.t_()&&(yield this.close(0))})}i_(){this.state=0,this.e_.reset()}s_(){this.n_()&&this.Yo===null&&(this.Yo=this.ai.enqueueAfterDelay(this.jo,6e4,()=>this.o_()))}__(e){this.a_(),this.stream.send(e)}o_(){return b(this,null,function*(){if(this.n_())return this.close(0)})}a_(){this.Yo&&(this.Yo.cancel(),this.Yo=null)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}close(e,t){return b(this,null,function*(){this.a_(),this.u_(),this.e_.cancel(),this.Jo++,e!==4?this.e_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(un(t.toString()),un("Using maximum backoff delay to prevent overloading the backend."),this.e_.Uo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.c_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.Vo(t)})}c_(){}auth(){this.state=1;let e=this.l_(this.Jo),t=this.Jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Jo===t&&this.h_(i,r)},i=>{e(()=>{let r=new F(R.UNKNOWN,"Fetching auth token failed: "+i.message);return this.P_(r)})})}h_(e,t){let i=this.l_(this.Jo);this.stream=this.I_(e,t),this.stream.To(()=>{i(()=>this.listener.To())}),this.stream.Ao(()=>{i(()=>(this.state=2,this.Zo=this.ai.enqueueAfterDelay(this.Ho,1e4,()=>(this.n_()&&(this.state=3),Promise.resolve())),this.listener.Ao()))}),this.stream.Vo(r=>{i(()=>this.P_(r))}),this.stream.onMessage(r=>{i(()=>++this.Xo==1?this.T_(r):this.onNext(r))})}r_(){this.state=5,this.e_.Wo(()=>b(this,null,function*(){this.state=0,this.start()}))}P_(e){return O("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}l_(e){return t=>{this.ai.enqueueAndForget(()=>this.Jo===e?t():(O("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},Gh=class extends $a{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}I_(e,t){return this.connection.Lo("Listen",e,t)}T_(e){return this.onNext(e)}onNext(e){this.e_.reset();let t=jS(this.serializer,e),i=function(s){if(!("targetChange"in s))return Y.min();let o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?Qt(o.readTime):Y.min()}(e);return this.listener.E_(t,i)}d_(e){let t={};t.database=_h(this.serializer),t.addTarget=function(s,o){let c,l=o.target;if(c=sh(l)?{documents:qS(s,l)}:{query:$S(s,l)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=M_(s,o.resumeToken);let d=gh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){c.readTime=Ua(s,o.snapshotVersion.toTimestamp());let d=gh(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);let i=WS(this.serializer,e);i&&(t.labels=i),this.__(t)}A_(e){let t={};t.database=_h(this.serializer),t.removeTarget=e,this.__(t)}},Wh=class extends $a{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get R_(){return this.Xo>0}start(){this.lastStreamToken=void 0,super.start()}c_(){this.R_&&this.V_([])}I_(e,t){return this.connection.Lo("Write",e,t)}T_(e){return fe(!!e.streamToken),this.lastStreamToken=e.streamToken,fe(!e.writeResults||e.writeResults.length===0),this.listener.m_()}onNext(e){fe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.e_.reset();let t=zS(e.writeResults,e.commitTime),i=Qt(e.commitTime);return this.listener.f_(i,t)}g_(){let e={};e.database=_h(this.serializer),this.__(e)}V_(e){let t={streamToken:this.lastStreamToken,writes:e.map(i=>BS(this.serializer,i))};this.__(t)}};var Hh=class extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.p_=!1}y_(){if(this.p_)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}Fo(e,t,i,r){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Fo(e,bh(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new F(R.UNKNOWN,s.toString())})}No(e,t,i,r,s){return this.y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.No(e,bh(t,i),r,o,c,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new F(R.UNKNOWN,o.toString())})}terminate(){this.p_=!0,this.connection.terminate()}},Kh=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.w_=0,this.S_=null,this.b_=!0}D_(){this.w_===0&&(this.C_("Unknown"),this.S_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.S_=null,this.v_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}F_(e){this.state==="Online"?this.C_("Unknown"):(this.w_++,this.w_>=1&&(this.M_(),this.v_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.M_(),this.w_=0,e==="Online"&&(this.b_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}v_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.b_?(un(t),this.b_=!1):O("OnlineStateTracker",t)}M_(){this.S_!==null&&(this.S_.cancel(),this.S_=null)}};var Qh=class{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.x_=[],this.O_=new Map,this.N_=new Set,this.L_=[],this.B_=s,this.B_.oo(o=>{i.enqueueAndForget(()=>b(this,null,function*(){wi(this)&&(O("RemoteStore","Restarting streams for network reachability change."),yield function(l){return b(this,null,function*(){let d=K(l);d.N_.add(4),yield Ws(d),d.k_.set("Unknown"),d.N_.delete(4),yield ac(d)})}(this))}))}),this.k_=new Kh(i,r)}};function ac(n){return b(this,null,function*(){if(wi(n))for(let e of n.L_)yield e(!0)})}function Ws(n){return b(this,null,function*(){for(let e of n.L_)yield e(!1)})}function q_(n,e){let t=K(n);t.O_.has(e.targetId)||(t.O_.set(e.targetId,e),Df(t)?Rf(t):yr(t).n_()&&Sf(t,e))}function Cf(n,e){let t=K(n),i=yr(t);t.O_.delete(e),i.n_()&&$_(t,e),t.O_.size===0&&(i.n_()?i.s_():wi(t)&&t.k_.set("Unknown"))}function Sf(n,e){if(n.q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){let t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}yr(n).d_(e)}function $_(n,e){n.q_.xe(e),yr(n).A_(e)}function Rf(n){n.q_=new mh({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>n.O_.get(e)||null,tt:()=>n.datastore.serializer.databaseId}),yr(n).start(),n.k_.D_()}function Df(n){return wi(n)&&!yr(n).t_()&&n.O_.size>0}function wi(n){return K(n).N_.size===0}function G_(n){n.q_=void 0}function oR(n){return b(this,null,function*(){n.k_.set("Online")})}function aR(n){return b(this,null,function*(){n.O_.forEach((e,t)=>{Sf(n,e)})})}function cR(n,e){return b(this,null,function*(){G_(n),Df(n)?(n.k_.F_(e),Rf(n)):n.k_.set("Unknown")})}function lR(n,e,t){return b(this,null,function*(){if(n.k_.set("Online"),e instanceof Fa&&e.state===2&&e.cause)try{yield function(r,s){return b(this,null,function*(){let o=s.cause;for(let c of s.targetIds)r.O_.has(c)&&(yield r.remoteSyncer.rejectListen(c,o),r.O_.delete(c),r.q_.removeTarget(c))})}(n,e)}catch(i){O("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),yield Ga(n,i)}else if(e instanceof ir?n.q_.Ke(e):e instanceof Va?n.q_.He(e):n.q_.We(e),!t.isEqual(Y.min()))try{let i=yield z_(n.localStore);t.compareTo(i)>=0&&(yield function(s,o){let c=s.q_.rt(o);return c.targetChanges.forEach((l,d)=>{if(l.resumeToken.approximateByteSize()>0){let f=s.O_.get(d);f&&s.O_.set(d,f.withResumeToken(l.resumeToken,o))}}),c.targetMismatches.forEach((l,d)=>{let f=s.O_.get(l);if(!f)return;s.O_.set(l,f.withResumeToken(Ye.EMPTY_BYTE_STRING,f.snapshotVersion)),$_(s,l);let p=new Fs(f.target,l,d,f.sequenceNumber);Sf(s,p)}),s.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(i){O("RemoteStore","Failed to raise snapshot:",i),yield Ga(n,i)}})}function Ga(n,e,t){return b(this,null,function*(){if(!Gs(e))throw e;n.N_.add(1),yield Ws(n),n.k_.set("Offline"),t||(t=()=>z_(n.localStore)),n.asyncQueue.enqueueRetryable(()=>b(this,null,function*(){O("RemoteStore","Retrying IndexedDB access"),yield t(),n.N_.delete(1),yield ac(n)}))})}function W_(n,e){return e().catch(t=>Ga(n,t,e))}function cc(n){return b(this,null,function*(){let e=K(n),t=jn(e),i=e.x_.length>0?e.x_[e.x_.length-1].batchId:-1;for(;uR(e);)try{let r=yield nR(e.localStore,i);if(r===null){e.x_.length===0&&t.s_();break}i=r.batchId,dR(e,r)}catch(r){yield Ga(e,r)}H_(e)&&K_(e)})}function uR(n){return wi(n)&&n.x_.length<10}function dR(n,e){n.x_.push(e);let t=jn(n);t.n_()&&t.R_&&t.V_(e.mutations)}function H_(n){return wi(n)&&!jn(n).t_()&&n.x_.length>0}function K_(n){jn(n).start()}function hR(n){return b(this,null,function*(){jn(n).g_()})}function fR(n){return b(this,null,function*(){let e=jn(n);for(let t of n.x_)e.V_(t.mutations)})}function mR(n,e,t){return b(this,null,function*(){let i=n.x_.shift(),r=uh.from(i,e,t);yield W_(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),yield cc(n)})}function pR(n,e){return b(this,null,function*(){e&&jn(n).R_&&(yield function(i,r){return b(this,null,function*(){if(function(o){return kS(o)&&o!==R.ABORTED}(r.code)){let s=i.x_.shift();jn(i).i_(),yield W_(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),yield cc(i)}})}(n,e)),H_(n)&&K_(n)})}function t_(n,e){return b(this,null,function*(){let t=K(n);t.asyncQueue.verifyOperationInProgress(),O("RemoteStore","RemoteStore received new credentials");let i=wi(t);t.N_.add(3),yield Ws(t),i&&t.k_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.N_.delete(3),yield ac(t)})}function gR(n,e){return b(this,null,function*(){let t=K(n);e?(t.N_.delete(2),yield ac(t)):e||(t.N_.add(2),yield Ws(t),t.k_.set("Unknown"))})}function yr(n){return n.Q_||(n.Q_=function(t,i,r){let s=K(t);return s.y_(),new Gh(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:oR.bind(null,n),Ao:aR.bind(null,n),Vo:cR.bind(null,n),E_:lR.bind(null,n)}),n.L_.push(e=>b(this,null,function*(){e?(n.Q_.i_(),Df(n)?Rf(n):n.k_.set("Unknown")):(yield n.Q_.stop(),G_(n))}))),n.Q_}function jn(n){return n.K_||(n.K_=function(t,i,r){let s=K(t);return s.y_(),new Wh(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{To:()=>Promise.resolve(),Ao:hR.bind(null,n),Vo:pR.bind(null,n),m_:fR.bind(null,n),f_:mR.bind(null,n)}),n.L_.push(e=>b(this,null,function*(){e?(n.K_.i_(),yield cc(n)):(yield n.K_.stop(),n.x_.length>0&&(O("RemoteStore",`Stopping write stream with ${n.x_.length} pending writes`),n.x_=[]))}))),n.K_}var Yh=class n{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Wt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){let o=Date.now()+i,c=new n(e,t,o,r,s);return c.start(i),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new F(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function xf(n,e){if(un("AsyncQueue",`${e}: ${n}`),Gs(n))return new F(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Wa=class n{constructor(e){this.comparator=e?(t,i)=>e(t,i)||z.comparator(t.key,i.key):(t,i)=>z.comparator(t.key,i.key),this.keyedMap=Rs(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new n(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){let t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){let t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){let r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){let i=new n;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}};var Ha=class{constructor(){this.U_=new Ae(z.comparator)}track(e){let t=e.doc.key,i=this.U_.get(t);i?e.type!==0&&i.type===3?this.U_=this.U_.insert(t,e):e.type===3&&i.type!==1?this.U_=this.U_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.U_=this.U_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.U_=this.U_.remove(t):e.type===1&&i.type===2?this.U_=this.U_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.U_=this.U_.insert(t,{type:2,doc:e.doc}):$():this.U_=this.U_.insert(t,e)}W_(){let e=[];return this.U_.inorderTraversal((t,i)=>{e.push(i)}),e}},gr=class n{constructor(e,t,i,r,s,o,c,l,d){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=l,this.hasCachedResults=d}static fromInitialDocuments(e,t,i,r,s){let o=[];return t.forEach(c=>{o.push({type:0,doc:c})}),new n(e,t,Wa.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&rc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}};var Jh=class{constructor(){this.G_=void 0,this.z_=[]}j_(){return this.z_.some(e=>e.H_())}},Xh=class{constructor(){this.queries=n_(),this.onlineState="Unknown",this.J_=new Set}terminate(){(function(t,i){let r=K(t),s=r.queries;r.queries=n_(),s.forEach((o,c)=>{for(let l of c.z_)l.onError(i)})})(this,new F(R.ABORTED,"Firestore shutting down"))}};function n_(){return new Un(n=>y_(n),rc)}function bR(n,e){return b(this,null,function*(){let t=K(n),i=3,r=e.query,s=t.queries.get(r);s?!s.j_()&&e.H_()&&(i=2):(s=new Jh,i=e.H_()?0:1);try{switch(i){case 0:s.G_=yield t.onListen(r,!0);break;case 1:s.G_=yield t.onListen(r,!1);break;case 2:yield t.onFirstRemoteStoreListen(r)}}catch(o){let c=xf(o,`Initialization of query '${Xi(e.query)}' failed`);return void e.onError(c)}t.queries.set(r,s),s.z_.push(e),e.Y_(t.onlineState),s.G_&&e.Z_(s.G_)&&Pf(t)})}function vR(n,e){return b(this,null,function*(){let t=K(n),i=e.query,r=3,s=t.queries.get(i);if(s){let o=s.z_.indexOf(e);o>=0&&(s.z_.splice(o,1),s.z_.length===0?r=e.H_()?0:1:!s.j_()&&e.H_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}})}function _R(n,e){let t=K(n),i=!1;for(let r of e){let s=r.query,o=t.queries.get(s);if(o){for(let c of o.z_)c.Z_(r)&&(i=!0);o.G_=r}}i&&Pf(t)}function yR(n,e,t){let i=K(n),r=i.queries.get(e);if(r)for(let s of r.z_)s.onError(t);i.queries.delete(e)}function Pf(n){n.J_.forEach(e=>{e.next()})}var Zh,i_;(i_=Zh||(Zh={})).X_="default",i_.Cache="cache";var ef=class{constructor(e,t,i){this.query=e,this.ea=t,this.ta=!1,this.na=null,this.onlineState="Unknown",this.options=i||{}}Z_(e){if(!this.options.includeMetadataChanges){let i=[];for(let r of e.docChanges)r.type!==3&&i.push(r);e=new gr(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ta?this.ra(e)&&(this.ea.next(e),t=!0):this.ia(e,this.onlineState)&&(this.sa(e),t=!0),this.na=e,t}onError(e){this.ea.error(e)}Y_(e){this.onlineState=e;let t=!1;return this.na&&!this.ta&&this.ia(this.na,e)&&(this.sa(this.na),t=!0),t}ia(e,t){if(!e.fromCache||!this.H_())return!0;let i=t!=="Offline";return(!this.options.oa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}ra(e){if(e.docChanges.length>0)return!0;let t=this.na&&this.na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}sa(e){e=gr.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ta=!0,this.ea.next(e)}H_(){return this.options.source!==Zh.Cache}};var Ka=class{constructor(e){this.key=e}},Qa=class{constructor(e){this.key=e}},tf=class{constructor(e,t){this.query=e,this.Ia=t,this.Ta=null,this.hasCachedResults=!1,this.current=!1,this.Ea=ne(),this.mutatedKeys=ne(),this.da=w_(e),this.Aa=new Wa(this.da)}get Ra(){return this.Ia}Va(e,t){let i=t?t.ma:new Ha,r=t?t.Aa:this.Aa,s=t?t.mutatedKeys:this.mutatedKeys,o=r,c=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,d=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((f,p)=>{let y=r.get(f),S=sc(this.query,p)?p:null,k=!!y&&this.mutatedKeys.has(y.key),M=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations),x=!1;y&&S?y.data.isEqual(S.data)?k!==M&&(i.track({type:3,doc:S}),x=!0):this.fa(y,S)||(i.track({type:2,doc:S}),x=!0,(l&&this.da(S,l)>0||d&&this.da(S,d)<0)&&(c=!0)):!y&&S?(i.track({type:0,doc:S}),x=!0):y&&!S&&(i.track({type:1,doc:y}),x=!0,(l||d)&&(c=!0)),x&&(S?(o=o.add(S),s=M?s.add(f):s.delete(f)):(o=o.delete(f),s=s.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),s=s.delete(f.key),i.track({type:1,doc:f})}return{Aa:o,ma:i,ts:c,mutatedKeys:s}}fa(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){let s=this.Aa;this.Aa=e.Aa,this.mutatedKeys=e.mutatedKeys;let o=e.ma.W_();o.sort((f,p)=>function(S,k){let M=x=>{switch(x){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $()}};return M(S)-M(k)}(f.type,p.type)||this.da(f.doc,p.doc)),this.ga(i),r=r!=null&&r;let c=t&&!r?this.pa():[],l=this.Ea.size===0&&this.current&&!r?1:0,d=l!==this.Ta;return this.Ta=l,o.length!==0||d?{snapshot:new gr(this.query,e.Aa,s,o,e.mutatedKeys,l===0,d,!1,!!i&&i.resumeToken.approximateByteSize()>0),ya:c}:{ya:c}}Y_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Aa:this.Aa,ma:new Ha,mutatedKeys:this.mutatedKeys,ts:!1},!1)):{ya:[]}}wa(e){return!this.Ia.has(e)&&!!this.Aa.has(e)&&!this.Aa.get(e).hasLocalMutations}ga(e){e&&(e.addedDocuments.forEach(t=>this.Ia=this.Ia.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Ia=this.Ia.delete(t)),this.current=e.current)}pa(){if(!this.current)return[];let e=this.Ea;this.Ea=ne(),this.Aa.forEach(i=>{this.wa(i.key)&&(this.Ea=this.Ea.add(i.key))});let t=[];return e.forEach(i=>{this.Ea.has(i)||t.push(new Qa(i))}),this.Ea.forEach(i=>{e.has(i)||t.push(new Ka(i))}),t}Sa(e){this.Ia=e.Is,this.Ea=ne();let t=this.Va(e.documents);return this.applyChanges(t,!0)}ba(){return gr.fromInitialDocuments(this.query,this.Aa,this.mutatedKeys,this.Ta===0,this.hasCachedResults)}},nf=class{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}},rf=class{constructor(e){this.key=e,this.Da=!1}},sf=class{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ca={},this.va=new Un(c=>y_(c),rc),this.Fa=new Map,this.Ma=new Set,this.xa=new Ae(z.comparator),this.Oa=new Map,this.Na=new Us,this.La={},this.Ba=new Map,this.ka=Ls.Bn(),this.onlineState="Unknown",this.qa=void 0}get isPrimaryClient(){return this.qa===!0}};function wR(n,e,t=!0){return b(this,null,function*(){let i=ey(n),r,s=i.va.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.ba()):r=yield Q_(i,e,t,!0),r})}function IR(n,e){return b(this,null,function*(){let t=ey(n);yield Q_(t,e,!0,!1)})}function Q_(n,e,t,i){return b(this,null,function*(){let r=yield iR(n.localStore,Kt(e)),s=r.targetId,o=t?n.sharedClientState.addLocalQueryTarget(s):"not-current",c;return i&&(c=yield ER(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&q_(n.remoteStore,r),c})}function ER(n,e,t,i,r){return b(this,null,function*(){n.Qa=(p,y,S)=>function(M,x,G,X){return b(this,null,function*(){let ie=x.view.Va(G);ie.ts&&(ie=yield e_(M.localStore,x.query,!1).then(({documents:I})=>x.view.Va(I,ie)));let me=X&&X.targetChanges.get(x.targetId),Je=X&&X.targetMismatches.get(x.targetId)!=null,le=x.view.applyChanges(ie,M.isPrimaryClient,me,Je);return s_(M,x.targetId,le.ya),le.snapshot})}(n,p,y,S);let s=yield e_(n.localStore,e,!0),o=new tf(e,s.Is),c=o.Va(s.documents),l=Vs.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),d=o.applyChanges(c,n.isPrimaryClient,l);s_(n,t,d.ya);let f=new nf(e,t,o);return n.va.set(e,f),n.Fa.has(t)?n.Fa.get(t).push(e):n.Fa.set(t,[e]),d.snapshot})}function TR(n,e,t){return b(this,null,function*(){let i=K(n),r=i.va.get(e),s=i.Fa.get(r.targetId);if(s.length>1)return i.Fa.set(r.targetId,s.filter(o=>!rc(o,e))),void i.va.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||(yield jh(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&Cf(i.remoteStore,r.targetId),of(i,r.targetId)}).catch($s))):(of(i,r.targetId),yield jh(i.localStore,r.targetId,!0))})}function AR(n,e){return b(this,null,function*(){let t=K(n),i=t.va.get(e),r=t.Fa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),Cf(t.remoteStore,i.targetId))})}function CR(n,e,t){return b(this,null,function*(){let i=NR(n);try{let r=yield function(o,c){let l=K(o),d=je.now(),f=c.reduce((S,k)=>S.add(k.key),ne()),p,y;return l.persistence.runTransaction("Locally write mutations","readwrite",S=>{let k=hn(),M=ne();return l.us.getEntries(S,f).next(x=>{k=x,k.forEach((G,X)=>{X.isValidDocument()||(M=M.add(G))})}).next(()=>l.localDocuments.getOverlayedDocuments(S,k)).next(x=>{p=x;let G=[];for(let X of c){let ie=PS(X,p.get(X.key).overlayedDocument);ie!=null&&G.push(new fn(X.key,ie,f_(ie.value.mapValue),mi.exists(!0)))}return l.mutationQueue.addMutationBatch(S,d,G,c)}).next(x=>{y=x;let G=x.applyToLocalDocumentSet(p,M);return l.documentOverlayCache.saveOverlays(S,x.batchId,G)})}).then(()=>({batchId:y.batchId,changes:E_(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,c,l){let d=o.La[o.currentUser.toKey()];d||(d=new Ae(oe)),d=d.insert(c,l),o.La[o.currentUser.toKey()]=d}(i,r.batchId,t),yield Hs(i,r.changes),yield cc(i.remoteStore)}catch(r){let s=xf(r,"Failed to persist write");t.reject(s)}})}function Y_(n,e){return b(this,null,function*(){let t=K(n);try{let i=yield eR(t.localStore,e);e.targetChanges.forEach((r,s)=>{let o=t.Oa.get(s);o&&(fe(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Da=!0:r.modifiedDocuments.size>0?fe(o.Da):r.removedDocuments.size>0&&(fe(o.Da),o.Da=!1))}),yield Hs(t,i,e)}catch(i){yield $s(i)}})}function r_(n,e,t){let i=K(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){let r=[];i.va.forEach((s,o)=>{let c=o.view.Y_(e);c.snapshot&&r.push(c.snapshot)}),function(o,c){let l=K(o);l.onlineState=c;let d=!1;l.queries.forEach((f,p)=>{for(let y of p.z_)y.Y_(c)&&(d=!0)}),d&&Pf(l)}(i.eventManager,e),r.length&&i.Ca.E_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}function SR(n,e,t){return b(this,null,function*(){let i=K(n);i.sharedClientState.updateQueryState(e,"rejected",t);let r=i.Oa.get(e),s=r&&r.key;if(s){let o=new Ae(z.comparator);o=o.insert(s,Vt.newNoDocument(s,Y.min()));let c=ne().add(s),l=new Oa(Y.min(),new Map,new Ae(oe),o,c);yield Y_(i,l),i.xa=i.xa.remove(s),i.Oa.delete(e),kf(i)}else yield jh(i.localStore,e,!1).then(()=>of(i,e,t)).catch($s)})}function RR(n,e){return b(this,null,function*(){let t=K(n),i=e.batch.batchId;try{let r=yield ZS(t.localStore,e);X_(t,i,null),J_(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),yield Hs(t,r)}catch(r){yield $s(r)}})}function DR(n,e,t){return b(this,null,function*(){let i=K(n);try{let r=yield function(o,c){let l=K(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return l.mutationQueue.lookupMutationBatch(d,c).next(p=>(fe(p!==null),f=p.keys(),l.mutationQueue.removeMutationBatch(d,p))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>l.localDocuments.getDocuments(d,f))})}(i.localStore,e);X_(i,e,t),J_(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),yield Hs(i,r)}catch(r){yield $s(r)}})}function J_(n,e){(n.Ba.get(e)||[]).forEach(t=>{t.resolve()}),n.Ba.delete(e)}function X_(n,e,t){let i=K(n),r=i.La[i.currentUser.toKey()];if(r){let s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.La[i.currentUser.toKey()]=r}}function of(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(let i of n.Fa.get(e))n.va.delete(i),t&&n.Ca.Ka(i,t);n.Fa.delete(e),n.isPrimaryClient&&n.Na.mr(e).forEach(i=>{n.Na.containsKey(i)||Z_(n,i)})}function Z_(n,e){n.Ma.delete(e.path.canonicalString());let t=n.xa.get(e);t!==null&&(Cf(n.remoteStore,t),n.xa=n.xa.remove(e),n.Oa.delete(t),kf(n))}function s_(n,e,t){for(let i of t)i instanceof Ka?(n.Na.addReference(i.key,e),xR(n,i)):i instanceof Qa?(O("SyncEngine","Document no longer in limbo: "+i.key),n.Na.removeReference(i.key,e),n.Na.containsKey(i.key)||Z_(n,i.key)):$()}function xR(n,e){let t=e.key,i=t.path.canonicalString();n.xa.get(t)||n.Ma.has(i)||(O("SyncEngine","New document in limbo: "+t),n.Ma.add(i),kf(n))}function kf(n){for(;n.Ma.size>0&&n.xa.size<n.maxConcurrentLimboResolutions;){let e=n.Ma.values().next().value;n.Ma.delete(e);let t=new z(Te.fromString(e)),i=n.ka.next();n.Oa.set(i,new rf(t)),n.xa=n.xa.insert(t,i),q_(n.remoteStore,new Fs(Kt(__(t.path)),i,"TargetPurposeLimboResolution",u_.oe))}}function Hs(n,e,t){return b(this,null,function*(){let i=K(n),r=[],s=[],o=[];i.va.isEmpty()||(i.va.forEach((c,l)=>{o.push(i.Qa(l,e,t).then(d=>{var f;if((d||t)&&i.isPrimaryClient){let p=d?!d.fromCache:(f=t?.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(d){r.push(d);let p=Vh.Ui(l.targetId,d);s.push(p)}}))}),yield Promise.all(o),i.Ca.E_(r),yield function(l,d){return b(this,null,function*(){let f=K(l);try{yield f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>D.forEach(d,y=>D.forEach(y.Ki,S=>f.persistence.referenceDelegate.addReference(p,y.targetId,S)).next(()=>D.forEach(y.$i,S=>f.persistence.referenceDelegate.removeReference(p,y.targetId,S)))))}catch(p){if(!Gs(p))throw p;O("LocalStore","Failed to update sequence numbers: "+p)}for(let p of d){let y=p.targetId;if(!p.fromCache){let S=f.ss.get(y),k=S.snapshotVersion,M=S.withLastLimboFreeSnapshotVersion(k);f.ss=f.ss.insert(y,M)}}})}(i.localStore,s))})}function PR(n,e){return b(this,null,function*(){let t=K(n);if(!t.currentUser.isEqual(e)){O("SyncEngine","User change. New user:",e.toKey());let i=yield B_(t.localStore,e);t.currentUser=e,function(s,o){s.Ba.forEach(c=>{c.forEach(l=>{l.reject(new F(R.CANCELLED,o))})}),s.Ba.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),yield Hs(t,i.ls)}})}function kR(n,e){let t=K(n),i=t.Oa.get(e);if(i&&i.Da)return ne().add(i.key);{let r=ne(),s=t.Fa.get(e);if(!s)return r;for(let o of s){let c=t.va.get(o);r=r.unionWith(c.view.Ra)}return r}}function ey(n){let e=K(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Y_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=kR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=SR.bind(null,e),e.Ca.E_=_R.bind(null,e.eventManager),e.Ca.Ka=yR.bind(null,e.eventManager),e}function NR(n){let e=K(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=RR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=DR.bind(null,e),e}var Ya=class{constructor(){this.synchronizeTabs=!1}initialize(e){return b(this,null,function*(){this.serializer=oc(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return XS(this.persistence,new Lh,e.initialUser,this.serializer)}createPersistence(e){return new Nh(Oh.Yr,this.serializer)}createSharedClientState(e){return new Bh}terminate(){return b(this,null,function*(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}};var af=class{initialize(e,t){return b(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>r_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=PR.bind(null,this.syncEngine),yield gR(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return function(){return new Xh}()}createDatastore(e){let t=oc(e.databaseInfo.databaseId),i=function(s){return new $h(s)}(e.databaseInfo);return function(s,o,c,l){return new Hh(s,o,c,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,c){return new Qh(i,r,s,o,c)}(this.localStore,this.datastore,e.asyncQueue,t=>r_(this.syncEngine,t,0),function(){return za.D()?new za:new zh}())}createSyncEngine(e,t){return function(r,s,o,c,l,d,f){let p=new sf(r,s,o,c,l,d);return f&&(p.qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return b(this,null,function*(){var e,t;yield function(r){return b(this,null,function*(){let s=K(r);O("RemoteStore","RemoteStore shutting down."),s.N_.add(5),yield Ws(s),s.B_.shutdown(),s.k_.set("Unknown")})}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()})}};var cf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Wa(this.observer.next,e)}error(e){this.observer.error?this.Wa(this.observer.error,e):un("Uncaught Error in snapshot listener:",e.toString())}Ga(){this.muted=!0}Wa(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}};var lf=class{constructor(e,t,i,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Me.UNAUTHENTICATED,this.clientId=Ra.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(i,s=>b(this,null,function*(){O("FirestoreClient","Received user=",s.uid),yield this.authCredentialListener(s),this.user=s})),this.appCheckCredentials.start(i,s=>(O("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new F(R.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();let e=new Wt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>b(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let i=xf(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}};function Fd(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),O("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(r=>b(this,null,function*(){i.isEqual(r)||(yield B_(e.localStore,r),i=r)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function o_(n,e){return b(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield OR(n);O("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>t_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>t_(e.remoteStore,r)),n._onlineComponents=e})}function MR(n){return n.name==="FirebaseError"?n.code===R.FAILED_PRECONDITION||n.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||n.code===22||n.code===20||n.code===11}function OR(n){return b(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){O("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Fd(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!MR(t))throw t;sr("Error using user provided cache. Falling back to memory cache: "+t),yield Fd(n,new Ya)}}else O("FirestoreClient","Using default OfflineComponentProvider"),yield Fd(n,new Ya);return n._offlineComponents})}function ty(n){return b(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(O("FirestoreClient","Using user provided OnlineComponentProvider"),yield o_(n,n._uninitializedComponentsProvider._online)):(O("FirestoreClient","Using default OnlineComponentProvider"),yield o_(n,new af))),n._onlineComponents})}function VR(n){return ty(n).then(e=>e.syncEngine)}function FR(n){return b(this,null,function*(){let e=yield ty(n),t=e.eventManager;return t.onListen=wR.bind(null,e.syncEngine),t.onUnlisten=TR.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=IR.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=AR.bind(null,e.syncEngine),t})}function LR(n,e,t={}){let i=new Wt;return n.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return function(s,o,c,l,d){let f=new cf({next:y=>{o.enqueueAndForget(()=>vR(s,p)),y.fromCache&&l.source==="server"?d.reject(new F(R.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(y)},error:y=>d.reject(y)}),p=new ef(c,f,{includeMetadataChanges:!0,oa:!0});return bR(s,p)}(yield FR(n),n.asyncQueue,e,t,i)})),i.promise}function ny(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var a_=new Map;function iy(n,e,t){if(!t)throw new F(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UR(n,e,t,i){if(e===!0&&i===!0)throw new F(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function c_(n){if(!z.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function l_(n){if(z.isDocumentKey(n))throw new F(R.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function Nf(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":$()}function Ja(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new F(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=Nf(n);throw new F(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Xa=class{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new F(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new F(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UR("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ny((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new F(R.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},br=class{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xa({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new F(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new F(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xa(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Ld;switch(i.type){case"firstParty":return new zd(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new F(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let i=a_.get(t);i&&(O("ComponentProvider","Removing Datastore"),a_.delete(t),i.terminate())}(this),Promise.resolve()}};function jR(n,e,t,i={}){var r;let s=(n=Ja(n,br))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&sr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let c,l;if(typeof i.mockUserToken=="string")c=i.mockUserToken,l=Me.MOCK_USER;else{c=Ob(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);let d=i.mockUserToken.sub||i.mockUserToken.user_id;if(!d)throw new F(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Me(d)}n._authCredentials=new Ud(new Sa(c,l))}}var Za=class n{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},Ot=class n{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Fn(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},Fn=class n extends Za{constructor(e,t,i){super(e,t,__(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new Ot(this.firestore,null,new z(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function lc(n,e,...t){if(n=He(n),iy("collection","path",e),n instanceof br){let i=Te.fromString(e,...t);return l_(i),new Fn(n,null,i)}{if(!(n instanceof Ot||n instanceof Fn))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Te.fromString(e,...t));return l_(i),new Fn(n.firestore,null,i)}}function BR(n,e,...t){if(n=He(n),arguments.length===1&&(e=Ra.newId()),iy("doc","path",e),n instanceof br){let i=Te.fromString(e,...t);return c_(i),new Ot(n,null,new z(i))}{if(!(n instanceof Ot||n instanceof Fn))throw new F(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let i=n._path.child(Te.fromString(e,...t));return c_(i),new Ot(n.firestore,n instanceof Fn?n.converter:null,new z(i))}}var uf=class{constructor(){this._u=Promise.resolve(),this.au=[],this.uu=!1,this.cu=[],this.lu=null,this.hu=!1,this.Pu=!1,this.Iu=[],this.e_=new qa(this,"async_queue_retry"),this.Tu=()=>{let t=Vd();t&&O("AsyncQueue","Visibility state changed to "+t.visibilityState),this.e_.zo()};let e=Vd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.Tu)}get isShuttingDown(){return this.uu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Eu(),this.du(e)}enterRestrictedMode(e){if(!this.uu){this.uu=!0,this.Pu=e||!1;let t=Vd();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Tu)}}enqueue(e){if(this.Eu(),this.uu)return new Promise(()=>{});let t=new Wt;return this.du(()=>this.uu&&this.Pu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.au.push(e),this.Au()))}Au(){return b(this,null,function*(){if(this.au.length!==0){try{yield this.au[0](),this.au.shift(),this.e_.reset()}catch(e){if(!Gs(e))throw e;O("AsyncQueue","Operation failed with retryable error: "+e)}this.au.length>0&&this.e_.Wo(()=>this.Au())}})}du(e){let t=this._u.then(()=>(this.hu=!0,e().catch(i=>{this.lu=i,this.hu=!1;let r=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(i);throw un("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.hu=!1,i))));return this._u=t,t}enqueueAfterDelay(e,t,i){this.Eu(),this.Iu.indexOf(e)>-1&&(t=0);let r=Yh.createAndSchedule(this,e,t,i,s=>this.Ru(s));return this.cu.push(r),r}Eu(){this.lu&&$()}verifyOperationInProgress(){}Vu(){return b(this,null,function*(){let e;do e=this._u,yield e;while(e!==this._u)})}mu(e){for(let t of this.cu)if(t.timerId===e)return!0;return!1}fu(e){return this.Vu().then(()=>{this.cu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(let t of this.cu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Vu()})}gu(e){this.Iu.push(e)}Ru(e){let t=this.cu.indexOf(e);this.cu.splice(t,1)}};var js=class extends br{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=function(){return new uf}(),this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||oy(this),this._firestoreClient.terminate()}};function ry(n,e){let t=typeof n=="object"?n:ci(),i=typeof n=="string"?n:e||"(default)",r=Nt(t,"firestore").getImmediate({identifier:i});if(!r._initialized){let s=Mb("firestore");s&&jR(r,...s)}return r}function sy(n){return n._firestoreClient||oy(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function oy(n){var e,t,i;let r=n._freezeSettings(),s=function(c,l,d,f){return new Hd(c,l,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,ny(f.experimentalLongPollingOptions),f.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._firestoreClient=new lf(n._authCredentials,n._appCheckCredentials,n._queue,s),!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:r.localCache.kind,_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider})}var Bs=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(Ye.fromBase64String(e))}catch(t){throw new F(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(Ye.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var zs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new F(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var ec=class{constructor(e){this._methodName=e}};var qs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new F(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new F(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}};var zR=/^__.*__$/,df=class{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new fn(e,this.data,this.fieldMask,t,this.fieldTransforms):new yi(e,this.data,t,this.fieldTransforms)}};function ay(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $()}}var hf=class n{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.pu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get yu(){return this.settings.yu}wu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Su(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.wu({path:i,bu:!1});return r.Du(e),r}Cu(e){var t;let i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.wu({path:i,bu:!1});return r.pu(),r}vu(e){return this.wu({path:void 0,bu:!0})}Fu(e){return tc(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.xu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}pu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Du(this.path.get(e))}Du(e){if(e.length===0)throw this.Fu("Document fields must not be empty");if(ay(this.yu)&&zR.test(e))throw this.Fu('Document fields cannot begin and end with "__"')}},ff=class{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||oc(e)}Ou(e,t,i,r=!1){return new hf({yu:e,methodName:t,xu:i,path:bt.emptyPath(),bu:!1,Mu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function qR(n){let e=n._freezeSettings(),t=oc(n._databaseId);return new ff(n._databaseId,!!e.ignoreUndefinedProperties,t)}function $R(n,e,t,i,r,s={}){let o=n.Ou(s.merge||s.mergeFields?2:0,e,t,r);dy("Data must be an object, but it was:",o,i);let c=ly(i,o),l,d;if(s.merge)l=new Gt(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){let f=[];for(let p of s.mergeFields){let y=GR(e,p,t);if(!o.contains(y))throw new F(R.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);HR(f,y)||f.push(y)}l=new Gt(f),d=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,d=o.fieldTransforms;return new df(new Mt(c),l,d)}function cy(n,e){if(uy(n=He(n)))return dy("Unsupported field value:",e,n),ly(n,e);if(n instanceof ec)return function(i,r){if(!ay(r.yu))throw r.Fu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Fu(`${i._methodName}() is not currently supported inside arrays`);let s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.bu&&e.yu!==4)throw e.Fu("Nested arrays are not supported");return function(i,r){let s=[],o=0;for(let c of i){let l=cy(c,r.vu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=He(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return CS(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let s=je.fromDate(i);return{timestampValue:Ua(r.serializer,s)}}if(i instanceof je){let s=new je(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Ua(r.serializer,s)}}if(i instanceof qs)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Bs)return{bytesValue:M_(r.serializer,i._byteString)};if(i instanceof Ot){let s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Fu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Af(i.firestore._databaseId||r.databaseId,i._key.path)}}throw r.Fu(`Unsupported field value: ${Nf(i)}`)}(n,e)}function ly(n,e){let t={};return d_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):_r(n,(i,r)=>{let s=cy(r,e.Su(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function uy(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof je||n instanceof qs||n instanceof Bs||n instanceof Ot||n instanceof ec)}function dy(n,e,t){if(!uy(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){let i=Nf(t);throw i==="an object"?e.Fu(n+" a custom object"):e.Fu(n+" "+i)}}function GR(n,e,t){if((e=He(e))instanceof zs)return e._internalPath;if(typeof e=="string")return hy(n,e);throw tc("Field path arguments must be of type string or ",n,!1,void 0,t)}var WR=new RegExp("[~\\*/\\[\\]]");function hy(n,e,t){if(e.search(WR)>=0)throw tc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new zs(...e.split("."))._internalPath}catch{throw tc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function tc(n,e,t,i,r){let s=i&&!i.isEmpty(),o=r!==void 0,c=`Function ${e}() called with invalid data`;t&&(c+=" (via `toFirestore()`)"),c+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new F(R.INVALID_ARGUMENT,c+n+l)}function HR(n,e){return n.some(t=>t.isEqual(e))}var nc=class{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ot(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new mf(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let t=this._document.data.field(fy("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}},mf=class extends nc{data(){return super.data()}};function fy(n,e){return typeof e=="string"?hy(n,e):e instanceof zs?e._internalPath:e._delegate._internalPath}function KR(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new F(R.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var pf=class{convertValue(e,t="none"){switch(bi(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ee(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ln(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){let i={};return _r(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertGeoPoint(e){return new qs(Ee(e.latitude),Ee(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":let i=wf(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ms(e));default:return null}}convertTimestamp(e){let t=dn(e);return new je(t.seconds,t.nanos)}convertDocumentKey(e,t){let i=Te.fromString(e);fe(j_(i));let r=new ka(i.get(1),i.get(3)),s=new z(i.popFirst(5));return r.isEqual(t)||un(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}};function QR(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}var nr=class{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},gf=class extends nc{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let t=new rr(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){let i=this._document.data.field(fy("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}},rr=class extends gf{data(e={}){return super.data(e)}},bf=class{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new nr(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){let e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new rr(this._firestore,this._userDataWriter,i.key,i,new nr(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new F(R.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(c=>{let l=new rr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new nr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);return c.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>s||c.type!==3).map(c=>{let l=new rr(r._firestore,r._userDataWriter,c.doc.key,c.doc,new nr(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:YR(c.type),doc:l,oldIndex:d,newIndex:f}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}};function YR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $()}}var vf=class extends pf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bs(e)}convertReference(e){let t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ot(this.firestore,null,t)}};function my(n){n=Ja(n,Za);let e=Ja(n.firestore,js),t=sy(e),i=new vf(e);return KR(n._query),LR(t,n._query).then(r=>new bf(e,i,n,r))}function Mf(n,e){let t=Ja(n.firestore,js),i=BR(n),r=QR(n.converter,e);return JR(t,[$R(qR(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,mi.exists(!1))]).then(()=>i)}function JR(n,e){return function(i,r){let s=new Wt;return i.asyncQueue.enqueueAndForget(()=>b(this,null,function*(){return CR(yield VR(i),r,s)})),s.promise}(sy(n),e)}(function(e,t=!0){(function(r){vr=r})(On),st(new Ne("firestore",(i,{instanceIdentifier:r,options:s})=>{let o=i.getProvider("app").getImmediate(),c=new js(new jd(i.getProvider("auth-internal")),new $d(i.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new F(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,f)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),c._setSettings(s),c},"PUBLIC").setMultipleInstances(!0)),Ue(Ov,"4.6.5",e),Ue(Ov,"4.6.5","esm2017")})();function Dy(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var xy=Dy,Py=new pt("auth","Firebase",Dy());var pc=new Bt("@firebase/auth");function XR(n,...e){pc.logLevel<=te.WARN&&pc.warn(`Auth (${On}): ${n}`,...e)}function dc(n,...e){pc.logLevel<=te.ERROR&&pc.error(`Auth (${On}): ${n}`,...e)}function Zt(n,...e){throw Xf(n,...e)}function Ft(n,...e){return Xf(n,...e)}function Jf(n,e,t){let i=Object.assign(Object.assign({},xy()),{[e]:t});return new pt("auth","Firebase",i).create(e,{appName:n.name})}function Ii(n){return Jf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZR(n,e,t){let i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Zt(n,"argument-error"),Jf(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Xf(n,...e){if(typeof n!="string"){let t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return Py.create(n,...e)}function W(n,e,...t){if(!n)throw Xf(e,...t)}function mn(n){let e="INTERNAL ASSERTION FAILED: "+n;throw dc(e),new Error(e)}function gn(n,e){n||mn(e)}function Ff(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function eD(){return py()==="http:"||py()==="https:"}function py(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function tD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(eD()||da()||"connection"in navigator)?navigator.onLine:!0}function nD(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Ei=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,gn(t>e,"Short delay should be less than long delay!"),this.isMobile=Vb()||Fb()}get(){return tD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Zf(n,e){gn(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var gc=class{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;mn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;mn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;mn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var iD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var rD=new Ei(3e4,6e4);function em(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function Er(s,o,c,l){return b(this,arguments,function*(n,e,t,i,r={}){return ky(n,r,()=>b(this,null,function*(){let d={},f={};i&&(e==="GET"?f=i:d={body:JSON.stringify(i)});let p=Yi(Object.assign({key:n.config.apiKey},f)).slice(1),y=yield n._getAdditionalHeaders();return y["Content-Type"]="application/json",n.languageCode&&(y["X-Firebase-Locale"]=n.languageCode),gc.fetch()(Ny(n,n.config.apiHost,t,p),Object.assign({method:e,headers:y,referrerPolicy:"no-referrer"},d))}))})}function ky(n,e,t){return b(this,null,function*(){n._canInitEmulator=!1;let i=Object.assign(Object.assign({},iD),e);try{let r=new Lf(n),s=yield Promise.race([t(),r.promise]);r.clearNetworkTimeout();let o=yield s.json();if("needConfirmation"in o)throw uc(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{let c=s.ok?o.errorMessage:o.error.message,[l,d]=c.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw uc(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw uc(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw uc(n,"user-disabled",o);let f=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Jf(n,f,d);Zt(n,f)}}catch(r){if(r instanceof Le)throw r;Zt(n,"network-request-failed",{message:String(r)})}})}function sD(s,o,c,l){return b(this,arguments,function*(n,e,t,i,r={}){let d=yield Er(n,e,t,i,r);return"mfaPendingCredential"in d&&Zt(n,"multi-factor-auth-required",{_serverResponse:d}),d})}function Ny(n,e,t,i){let r=`${e}${t}?${i}`;return n.config.emulator?Zf(n.config,r):`${n.config.apiScheme}://${r}`}var Lf=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Ft(this.auth,"network-request-failed")),rD.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function uc(n,e,t){let i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);let r=Ft(n,e,i);return r.customData._tokenResponse=t,r}function oD(n,e){return b(this,null,function*(){return Er(n,"POST","/v1/accounts:delete",e)})}function My(n,e){return b(this,null,function*(){return Er(n,"POST","/v1/accounts:lookup",e)})}function Ks(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Oy(n,e=!1){return b(this,null,function*(){let t=He(n),i=yield t.getIdToken(e),r=tm(i);W(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");let s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Ks(Of(r.auth_time)),issuedAtTime:Ks(Of(r.iat)),expirationTime:Ks(Of(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}})}function Of(n){return Number(n)*1e3}function tm(n){let[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return dc("JWT malformed, contained fewer than 3 sections"),null;try{let r=Hu(t);return r?JSON.parse(r):(dc("Failed to decode base64 JWT payload"),null)}catch(r){return dc("Caught error parsing JWT payload as JSON",r?.toString()),null}}function gy(n){let e=tm(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function Ys(n,e,t=!1){return b(this,null,function*(){if(t)return e;try{return yield e}catch(i){throw i instanceof Le&&aD(i)&&n.auth.currentUser===n&&(yield n.auth.signOut()),i}})}function aD({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var Uf=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;let r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>b(this,null,function*(){yield this.iteration()}),t)}iteration(){return b(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var Js=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ks(this.lastLoginAt),this.creationTime=Ks(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function bc(n){return b(this,null,function*(){var e;let t=n.auth,i=yield n.getIdToken(),r=yield Ys(n,My(t,{idToken:i}));W(r?.users.length,t,"internal-error");let s=r.users[0];n._notifyReloadListener(s);let o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?Fy(s.providerUserInfo):[],c=cD(n.providerData,o),l=n.isAnonymous,d=!(n.email&&s.passwordHash)&&!c?.length,f=l?d:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:c,metadata:new Js(s.createdAt,s.lastLoginAt),isAnonymous:f};Object.assign(n,p)})}function Vy(n){return b(this,null,function*(){let e=He(n);yield bc(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function cD(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function Fy(n){return n.map(e=>{var{providerId:t}=e,i=So(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}function lD(n,e){return b(this,null,function*(){let t=yield ky(n,{},()=>b(this,null,function*(){let i=Yi({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=Ny(n,r,"/v1/token",`key=${s}`),c=yield n._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",gc.fetch()(o,{method:"POST",headers:c,body:i})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function uD(n,e){return b(this,null,function*(){return Er(n,"POST","/v2/accounts:revokeToken",em(n,e))})}var Qs=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):gy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=gy(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return b(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return b(this,null,function*(){let{accessToken:i,refreshToken:r,expiresIn:s}=yield lD(e,t);this.updateTokensAndExpiration(i,r,Number(s))})}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){let{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new n;return i&&(W(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(W(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(W(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return mn("not implemented")}};function Bn(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var Ir=class n{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=So(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Uf(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Js(s.createdAt||void 0,s.lastLoginAt||void 0)}getIdToken(e){return b(this,null,function*(){let t=yield Ys(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Oy(this,e)}reload(){return Vy(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return b(this,null,function*(){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&(yield bc(this)),yield this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)})}delete(){return b(this,null,function*(){if(qt(this.auth.app))return Promise.reject(Ii(this.auth));let e=yield this.getIdToken();return yield Ys(this,oD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,c,l,d,f;let p=(i=t.displayName)!==null&&i!==void 0?i:void 0,y=(r=t.email)!==null&&r!==void 0?r:void 0,S=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,k=(o=t.photoURL)!==null&&o!==void 0?o:void 0,M=(c=t.tenantId)!==null&&c!==void 0?c:void 0,x=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,X=(f=t.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:ie,emailVerified:me,isAnonymous:Je,providerData:le,stsTokenManager:I}=t;W(ie&&I,e,"internal-error");let g=Qs.fromJSON(this.name,I);W(typeof ie=="string",e,"internal-error"),Bn(p,e.name),Bn(y,e.name),W(typeof me=="boolean",e,"internal-error"),W(typeof Je=="boolean",e,"internal-error"),Bn(S,e.name),Bn(k,e.name),Bn(M,e.name),Bn(x,e.name),Bn(G,e.name),Bn(X,e.name);let _=new n({uid:ie,auth:e,email:y,emailVerified:me,displayName:p,isAnonymous:Je,photoURL:k,phoneNumber:S,tenantId:M,stsTokenManager:g,createdAt:G,lastLoginAt:X});return le&&Array.isArray(le)&&(_.providerData=le.map(w=>Object.assign({},w))),x&&(_._redirectEventId=x),_}static _fromIdTokenResponse(e,t,i=!1){return b(this,null,function*(){let r=new Qs;r.updateFromServerResponse(t);let s=new n({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return yield bc(s),s})}static _fromGetAccountInfoResponse(e,t,i){return b(this,null,function*(){let r=t.users[0];W(r.localId!==void 0,"internal-error");let s=r.providerUserInfo!==void 0?Fy(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,c=new Qs;c.updateFromIdToken(i);let l=new n({uid:r.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Js(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,d),l})}};var by=new Map;function pn(n){gn(n instanceof Function,"Expected a class definition");let e=by.get(n);return e?(gn(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,by.set(n,e),e)}var dD=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return b(this,null,function*(){return!0})}_set(t,i){return b(this,null,function*(){this.storage[t]=i})}_get(t){return b(this,null,function*(){let i=this.storage[t];return i===void 0?null:i})}_remove(t){return b(this,null,function*(){delete this.storage[t]})}_addListener(t,i){}_removeListener(t,i){}}return n.type="NONE",n})(),jf=dD;function hc(n,e,t){return`firebase:${n}:${e}:${t}`}var vc=class n{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;let{config:r,name:s}=this.auth;this.fullUserKey=hc(this.userKey,r.apiKey,s),this.fullPersistenceKey=hc("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return b(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?Ir._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return b(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,i="authUser"){return b(this,null,function*(){if(!t.length)return new n(pn(jf),e,i);let r=(yield Promise.all(t.map(d=>b(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),s=r[0]||pn(jf),o=hc(i,e.config.apiKey,e.name),c=null;for(let d of t)try{let f=yield d._get(o);if(f){let p=Ir._fromJSON(e,f);d!==s&&(c=p),s=d;break}}catch{}let l=r.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new n(s,e,i):(s=l[0],c&&(yield s._set(o,c.toJSON())),yield Promise.all(t.map(d=>b(this,null,function*(){if(d!==s)try{yield d._remove(o)}catch{}}))),new n(s,e,i))})}};function vy(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jy(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Ly(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zy(e))return"Blackberry";if(qy(e))return"Webos";if(nm(e))return"Safari";if((e.includes("chrome/")||Uy(e))&&!e.includes("edge/"))return"Chrome";if(By(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function Ly(n=Pe()){return/firefox\//i.test(n)}function nm(n=Pe()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Uy(n=Pe()){return/crios\//i.test(n)}function jy(n=Pe()){return/iemobile/i.test(n)}function By(n=Pe()){return/android/i.test(n)}function zy(n=Pe()){return/blackberry/i.test(n)}function qy(n=Pe()){return/webos/i.test(n)}function Sc(n=Pe()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function hD(n=Pe()){var e;return Sc(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function fD(){return Lb()&&document.documentMode===10}function $y(n=Pe()){return Sc(n)||By(n)||qy(n)||zy(n)||/windows phone/i.test(n)||jy(n)}function mD(){try{return!!(window&&window!==window.top)}catch{return!1}}function Gy(n,e=[]){let t;switch(n){case"Browser":t=vy(Pe());break;case"Worker":t=`${vy(Pe())}-${n}`;break;default:t=n}let i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${On}/${i}`}var Bf=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let i=s=>new Promise((o,c)=>{try{let l=e(s);o(l)}catch(l){c(l)}});i.onAbort=t,this.queue.push(i);let r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}runMiddleware(e){return b(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let i of this.queue)yield i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(let r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}})}};function pD(t){return b(this,arguments,function*(n,e={}){return Er(n,"GET","/v2/passwordPolicy",em(n,e))})}var gD=6,zf=class{constructor(e){var t,i,r,s;let o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:gD,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,c;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(c=l.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),l}validatePasswordLengthOptions(e,t){let i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}};var qf=class{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _c(this),this.idTokenSubscription=new _c(this),this.beforeStateQueue=new Bf(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Py,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=pn(t)),this._initializationPromise=this.queue(()=>b(this,null,function*(){var i,r;if(!this._deleted&&(this.persistenceManager=yield vc.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return b(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return b(this,null,function*(){try{let t=yield My(this,{idToken:e}),i=yield Ir._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return b(this,null,function*(){var t;if(qt(this.app)){let o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}let i=yield this.assertedPersistence.getCurrentUser(),r=i,s=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,c=r?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!o||o===c)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{yield this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)})}tryRedirectSignIn(e){return b(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return b(this,null,function*(){try{yield bc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=nD()}_delete(){return b(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return b(this,null,function*(){if(qt(this.app))return Promise.reject(Ii(this));let t=e?He(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return b(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>b(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return b(this,null,function*(){return qt(this.app)?Promise.reject(Ii(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return qt(this.app)?Promise.reject(Ii(this)):this.queue(()=>b(this,null,function*(){yield this.assertedPersistence.setPersistence(pn(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return b(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return b(this,null,function*(){let e=yield pD(this),t=new zf(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new pt("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let i=this.onAuthStateChanged(()=>{i(),e()},t)}})}revokeAccessToken(e){return b(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),yield uD(this,i)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return b(this,null,function*(){let i=yield this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return b(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&pn(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield vc.create(this,[pn(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return b(this,null,function*(){var t,i;return this._isInitialized&&(yield this.queue(()=>b(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return b(this,null,function*(){if(e===this.currentUser)return this.queue(()=>b(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};let s=typeof t=="function"?t:t.next.bind(t),o=!1,c=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{let l=e.addObserver(t);return()=>{o=!0,l()}}}directlySetCurrentUser(e){return b(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gy(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return b(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let i=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();i&&(t["X-Firebase-Client"]=i);let r=yield this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t})}_getAppCheckToken(){return b(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&XR(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Rc(n){return He(n)}var _c=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=zb(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var im={loadJS(){return b(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function bD(n){im=n}function vD(n){return im.loadJS(n)}function _D(){return im.gapiScript}function Wy(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function Hy(n,e){let t=Nt(n,"auth");if(t.isInitialized()){let r=t.getImmediate(),s=t.getOptions();if(cn(s,e??{}))return r;Zt(r,"already-initialized")}return t.initialize({options:e})}function yD(n,e){let t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(pn);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Ky(n,e,t){let i=Rc(n);W(i._canInitEmulator,i,"emulator-config-failed"),W(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");let r=!!t?.disableWarnings,s=Qy(e),{host:o,port:c}=wD(e),l=c===null?"":`:${c}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),r||ID()}function Qy(n){let e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function wD(n){let e=Qy(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};let i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){let s=r[1];return{host:s,port:_y(i.substr(s.length+1))}}else{let[s,o]=i.split(":");return{host:s,port:_y(o)}}}function _y(n){if(!n)return null;let e=Number(n);return isNaN(e)?null:e}function ID(){function n(){let e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}var Xs=class{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return mn("not implemented")}_getIdTokenResponse(e){return mn("not implemented")}_linkToIdToken(e,t){return mn("not implemented")}_getReauthenticationResolver(e){return mn("not implemented")}};function wr(n,e){return b(this,null,function*(){return sD(n,"POST","/v1/accounts:signInWithIdp",em(n,e))})}var ED="http://localhost",yc=class n extends Xs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){let t=new n(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Zt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){let t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=So(t,["providerId","signInMethod"]);if(!i||!r)return null;let o=new n(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){let t=this.buildRequest();return wr(e,t)}_linkToIdToken(e,t){let i=this.buildRequest();return i.idToken=t,wr(e,i)}_getReauthenticationResolver(e){let t=this.buildRequest();return t.autoCreate=!1,wr(e,t)}buildRequest(){let e={requestUri:ED,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{let t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Yi(t)}return e}};var Zs=class{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}};var wc=class extends Zs{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}};var rm=(()=>{class n extends wc{constructor(){super("google.com"),this.addScope("profile")}static credential(t,i){return yc._fromParams({providerId:n.PROVIDER_ID,signInMethod:n.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:i})}static credentialFromResult(t){return n.credentialFromTaggedObject(t)}static credentialFromError(t){return n.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;let{oauthIdToken:i,oauthAccessToken:r}=t;if(!i&&!r)return null;try{return n.credential(i,r)}catch{return null}}}n.GOOGLE_SIGN_IN_METHOD="google.com",n.PROVIDER_ID="google.com";return n})();var eo=class n{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static _fromIdTokenResponse(e,t,i,r=!1){return b(this,null,function*(){let s=yield Ir._fromIdTokenResponse(e,i,r),o=yy(i);return new n({user:s,providerId:o,_tokenResponse:i,operationType:t})})}static _forOperation(e,t,i){return b(this,null,function*(){yield e._updateTokensIfNecessary(i,!0);let r=yy(i);return new n({user:e,providerId:r,_tokenResponse:i,operationType:t})})}};function yy(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}var $f=class n extends Le{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,n.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new n(e,t,i,r)}};function Yy(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$f._fromErrorAndOperation(n,s,e,i):s})}function TD(n,e,t=!1){return b(this,null,function*(){let i=yield Ys(n,e._linkToIdToken(n.auth,yield n.getIdToken()),t);return eo._forOperation(n,"link",i)})}function AD(n,e,t=!1){return b(this,null,function*(){let{auth:i}=n;if(qt(i.app))return Promise.reject(Ii(i));let r="reauthenticate";try{let s=yield Ys(n,Yy(i,r,e,n),t);W(s.idToken,i,"internal-error");let o=tm(s.idToken);W(o,i,"internal-error");let{sub:c}=o;return W(n.uid===c,i,"user-mismatch"),eo._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Zt(i,"user-mismatch"),s}})}function CD(n,e,t=!1){return b(this,null,function*(){if(qt(n.app))return Promise.reject(Ii(n));let i="signIn",r=yield Yy(n,i,e),s=yield eo._fromIdTokenResponse(n,i,r);return t||(yield n._updateCurrentUser(s.user)),s})}function Jy(n,e,t,i){return He(n).onIdTokenChanged(e,t,i)}function Xy(n,e,t){return He(n).beforeAuthStateChanged(e,t)}var Ic="__sak";var Ec=class{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Ic,"1"),this.storage.removeItem(Ic),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){let t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}};function SD(){let n=Pe();return nm(n)||Sc(n)}var RD=1e3,DD=10,xD=(()=>{class n extends Ec{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,i)=>this.onStorageEvent(t,i),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=SD()&&mD(),this.fallbackToPolling=$y(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(let i of Object.keys(this.listeners)){let r=this.storage.getItem(i),s=this.localCache[i];r!==s&&t(i,s,r)}}onStorageEvent(t,i=!1){if(!t.key){this.forAllChangedKeys((c,l,d)=>{this.notifyListeners(c,d)});return}let r=t.key;if(i?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){let c=this.storage.getItem(r);if(t.newValue!==c)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!i)return}let s=()=>{let c=this.storage.getItem(r);!i&&this.localCache[r]===c||this.notifyListeners(r,c)},o=this.storage.getItem(r);fD()&&o!==t.newValue&&t.newValue!==t.oldValue?setTimeout(s,DD):s()}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i&&JSON.parse(i))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,i,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:i,newValue:r}),!0)})},RD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,i){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}_set(t,i){return b(this,null,function*(){yield In(n.prototype,this,"_set").call(this,t,i),this.localCache[t]=JSON.stringify(i)})}_get(t){return b(this,null,function*(){let i=yield In(n.prototype,this,"_get").call(this,t);return this.localCache[t]=JSON.stringify(i),i})}_remove(t){return b(this,null,function*(){yield In(n.prototype,this,"_remove").call(this,t),delete this.localCache[t]})}}return n.type="LOCAL",n})(),Zy=xD;var PD=(()=>{class n extends Ec{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,i){}_removeListener(t,i){}}return n.type="SESSION",n})(),sm=PD;function kD(n){return Promise.all(n.map(e=>b(this,null,function*(){try{return{fulfilled:!0,value:yield e}}catch(t){return{fulfilled:!1,reason:t}}})))}var ND=(()=>{class n{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){let i=this.receivers.find(s=>s.isListeningto(t));if(i)return i;let r=new n(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}handleEvent(t){return b(this,null,function*(){let i=t,{eventId:r,eventType:s,data:o}=i.data,c=this.handlersMap[s];if(!c?.size)return;i.ports[0].postMessage({status:"ack",eventId:r,eventType:s});let l=Array.from(c).map(f=>b(this,null,function*(){return f(i.origin,o)})),d=yield kD(l);i.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:d})})}_subscribe(t,i){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(i)}_unsubscribe(t,i){this.handlersMap[t]&&i&&this.handlersMap[t].delete(i),(!i||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}n.receivers=[];return n})();function om(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}var Gf=class{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}_send(e,t,i=50){return b(this,null,function*(){let r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((c,l)=>{let d=om("",20);r.port1.start();let f=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){let y=p;if(y.data.eventId===d)switch(y.data.status){case"ack":clearTimeout(f),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(y.data.response);break;default:clearTimeout(f),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})})}};function Xt(){return window}function MD(n){Xt().location.href=n}function ew(){return typeof Xt().WorkerGlobalScope<"u"&&typeof Xt().importScripts=="function"}function OD(){return b(this,null,function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})}function VD(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function FD(){return ew()?self:null}var tw="firebaseLocalStorageDb",LD=1,Tc="firebaseLocalStorage",nw="fbase_key",Ti=class{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}};function Dc(n,e){return n.transaction([Tc],e?"readwrite":"readonly").objectStore(Tc)}function UD(){let n=indexedDB.deleteDatabase(tw);return new Ti(n).toPromise()}function Wf(){let n=indexedDB.open(tw,LD);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{let i=n.result;try{i.createObjectStore(Tc,{keyPath:nw})}catch(r){t(r)}}),n.addEventListener("success",()=>b(this,null,function*(){let i=n.result;i.objectStoreNames.contains(Tc)?e(i):(i.close(),yield UD(),e(yield Wf()))}))})}function wy(n,e,t){return b(this,null,function*(){let i=Dc(n,!0).put({[nw]:e,value:t});return new Ti(i).toPromise()})}function jD(n,e){return b(this,null,function*(){let t=Dc(n,!1).get(e),i=yield new Ti(t).toPromise();return i===void 0?null:i.value})}function Iy(n,e){let t=Dc(n,!0).delete(e);return new Ti(t).toPromise()}var BD=800,zD=3,qD=(()=>{class n{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){return b(this,null,function*(){return this.db?this.db:(this.db=yield Wf(),this.db)})}_withRetries(t){return b(this,null,function*(){let i=0;for(;;)try{let r=yield this._openDb();return yield t(r)}catch(r){if(i++>zD)throw r;this.db&&(this.db.close(),this.db=void 0)}})}initializeServiceWorkerMessaging(){return b(this,null,function*(){return ew()?this.initializeReceiver():this.initializeSender()})}initializeReceiver(){return b(this,null,function*(){this.receiver=ND._getInstance(FD()),this.receiver._subscribe("keyChanged",(t,i)=>b(this,null,function*(){return{keyProcessed:(yield this._poll()).includes(i.key)}})),this.receiver._subscribe("ping",(t,i)=>b(this,null,function*(){return["keyChanged"]}))})}initializeSender(){return b(this,null,function*(){var t,i;if(this.activeServiceWorker=yield OD(),!this.activeServiceWorker)return;this.sender=new Gf(this.activeServiceWorker);let r=yield this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((i=r[0])===null||i===void 0)&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)})}notifyServiceWorker(t){return b(this,null,function*(){if(!(!this.sender||!this.activeServiceWorker||VD()!==this.activeServiceWorker))try{yield this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}})}_isAvailable(){return b(this,null,function*(){try{if(!indexedDB)return!1;let t=yield Wf();return yield wy(t,Ic,"1"),yield Iy(t,Ic),!0}catch{}return!1})}_withPendingWrite(t){return b(this,null,function*(){this.pendingWrites++;try{yield t()}finally{this.pendingWrites--}})}_set(t,i){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(r=>wy(r,t,i)),this.localCache[t]=i,this.notifyServiceWorker(t)}))})}_get(t){return b(this,null,function*(){let i=yield this._withRetries(r=>jD(r,t));return this.localCache[t]=i,i})}_remove(t){return b(this,null,function*(){return this._withPendingWrite(()=>b(this,null,function*(){return yield this._withRetries(i=>Iy(i,t)),delete this.localCache[t],this.notifyServiceWorker(t)}))})}_poll(){return b(this,null,function*(){let t=yield this._withRetries(s=>{let o=Dc(s,!1).getAll();return new Ti(o).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];let i=[],r=new Set;if(t.length!==0)for(let{fbase_key:s,value:o}of t)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),i.push(s));for(let s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),i.push(s));return i})}notifyListeners(t,i){this.localCache[t]=i;let r=this.listeners[t];if(r)for(let s of Array.from(r))s(i)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>b(this,null,function*(){return this._poll()}),BD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,i){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(i)}_removeListener(t,i){this.listeners[t]&&(this.listeners[t].delete(i),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}return n.type="LOCAL",n})(),iw=qD;var zO=Wy("rcb"),qO=new Ei(3e4,6e4);function rw(n,e){return e?pn(e):(W(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}var to=class extends Xs{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return wr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return wr(e,this._buildIdpRequest())}_buildIdpRequest(e){let t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}};function $D(n){return CD(n.auth,new to(n),n.bypassAuthState)}function GD(n){let{auth:e,user:t}=n;return W(t,e,"internal-error"),AD(t,new to(n),n.bypassAuthState)}function WD(n){return b(this,null,function*(){let{auth:e,user:t}=n;return W(t,e,"internal-error"),TD(t,new to(n),n.bypassAuthState)})}var Ac=class{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise((e,t)=>b(this,null,function*(){this.pendingPromise={resolve:e,reject:t};try{this.eventManager=yield this.resolver._initialize(this.auth),yield this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}}))}onAuthEvent(e){return b(this,null,function*(){let{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}let l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(yield this.getIdpTask(c)(l))}catch(d){this.reject(d)}})}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return $D;case"linkViaPopup":case"linkViaRedirect":return WD;case"reauthViaPopup":case"reauthViaRedirect":return GD;default:Zt(this.auth,"internal-error")}}resolve(e){gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){gn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};var HD=new Ei(2e3,1e4);function am(n,e,t){return b(this,null,function*(){if(qt(n.app))return Promise.reject(Ft(n,"operation-not-supported-in-this-environment"));let i=Rc(n);ZR(n,e,Zs);let r=rw(i,t);return new KD(i,"signInViaPopup",e,r).executeNotNull()})}var KD=(()=>{class n extends Ac{constructor(t,i,r,s,o){super(t,i,s,o),this.provider=r,this.authWindow=null,this.pollId=null,n.currentPopupAction&&n.currentPopupAction.cancel(),n.currentPopupAction=this}executeNotNull(){return b(this,null,function*(){let t=yield this.execute();return W(t,this.auth,"internal-error"),t})}onExecution(){return b(this,null,function*(){gn(this.filter.length===1,"Popup operations only handle one event");let t=om();this.authWindow=yield this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(i=>{this.reject(i)}),this.resolver._isIframeWebStorageSupported(this.auth,i=>{i||this.reject(Ft(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()})}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Ft(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,n.currentPopupAction=null}pollUserCancellation(){let t=()=>{var i,r;if(!((r=(i=this.authWindow)===null||i===void 0?void 0:i.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Ft(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,HD.get())};t()}}n.currentPopupAction=null;return n})(),QD="pendingRedirect",fc=new Map,Hf=class n extends Ac{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}execute(){return b(this,null,function*(){let e=fc.get(this.auth._key());if(!e){try{let i=(yield YD(this.resolver,this.auth))?yield In(n.prototype,this,"execute").call(this):null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}fc.set(this.auth._key(),e)}return this.bypassAuthState||fc.set(this.auth._key(),()=>Promise.resolve(null)),e()})}onAuthEvent(e){return b(this,null,function*(){if(e.type==="signInViaRedirect")return In(n.prototype,this,"onAuthEvent").call(this,e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){let t=yield this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,In(n.prototype,this,"onAuthEvent").call(this,e);this.resolve(null)}})}onExecution(){return b(this,null,function*(){})}cleanUp(){}};function YD(n,e){return b(this,null,function*(){let t=ZD(e),i=XD(n);if(!(yield i._isAvailable()))return!1;let r=(yield i._get(t))==="true";return yield i._remove(t),r})}function JD(n,e){fc.set(n._key(),e)}function XD(n){return pn(n._redirectPersistence)}function ZD(n){return hc(QD,n.config.apiKey,n.name)}function ex(n,e,t=!1){return b(this,null,function*(){if(qt(n.app))return Promise.reject(Ii(n));let i=Rc(n),r=rw(i,e),o=yield new Hf(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,yield i._persistUserIfCurrent(o.user),yield i._setRedirectUser(null,e)),o})}var tx=10*60*1e3,Kf=class{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!nx(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!sw(e)){let r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(Ft(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){let i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=tx&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ey(e))}saveEventToCache(e){this.cachedEventUids.add(Ey(e)),this.lastProcessedEventTime=Date.now()}};function Ey(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function sw({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function nx(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return sw(n);default:return!1}}function ix(t){return b(this,arguments,function*(n,e={}){return Er(n,"GET","/v1/projects",e)})}var rx=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,sx=/^https?/;function ox(n){return b(this,null,function*(){if(n.config.emulator)return;let{authorizedDomains:e}=yield ix(n);for(let t of e)try{if(ax(t))return}catch{}Zt(n,"unauthorized-domain")})}function ax(n){let e=Ff(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){let o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!sx.test(t))return!1;if(rx.test(n))return i===n;let r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}var cx=new Ei(3e4,6e4);function Ty(){let n=Xt().___jsl;if(n?.H){for(let e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function lx(n){return new Promise((e,t)=>{var i,r,s;function o(){Ty(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Ty(),t(Ft(n,"network-request-failed"))},timeout:cx.get()})}if(!((r=(i=Xt().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Xt().gapi)===null||s===void 0)&&s.load)o();else{let c=Wy("iframefcb");return Xt()[c]=()=>{gapi.load?o():t(Ft(n,"network-request-failed"))},vD(`${_D()}?onload=${c}`).catch(l=>t(l))}}).catch(e=>{throw mc=null,e})}var mc=null;function ux(n){return mc=mc||lx(n),mc}var dx=new Ei(5e3,15e3),hx="__/auth/iframe",fx="emulator/auth/iframe",mx={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},px=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function gx(n){let e=n.config;W(e.authDomain,n,"auth-domain-config-required");let t=e.emulator?Zf(e,fx):`https://${n.config.authDomain}/${hx}`,i={apiKey:e.apiKey,appName:n.name,v:On},r=px.get(n.config.apiHost);r&&(i.eid=r);let s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Yi(i).slice(1)}`}function bx(n){return b(this,null,function*(){let e=yield ux(n),t=Xt().gapi;return W(t,n,"internal-error"),e.open({where:document.body,url:gx(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:mx,dontclear:!0},i=>new Promise((r,s)=>b(this,null,function*(){yield i.restyle({setHideOnLeave:!1});let o=Ft(n,"network-request-failed"),c=Xt().setTimeout(()=>{s(o)},dx.get());function l(){Xt().clearTimeout(c),r(i)}i.ping(l).then(l,()=>{s(o)})})))})}var vx={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},_x=500,yx=600,wx="_blank",Ix="http://localhost",Cc=class{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function Ex(n,e,t,i=_x,r=yx){let s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString(),c="",l=Object.assign(Object.assign({},vx),{width:i.toString(),height:r.toString(),top:s,left:o}),d=Pe().toLowerCase();t&&(c=Uy(d)?wx:t),Ly(d)&&(e=e||Ix,l.scrollbars="yes");let f=Object.entries(l).reduce((y,[S,k])=>`${y}${S}=${k},`,"");if(hD(d)&&c!=="_self")return Tx(e||"",c),new Cc(null);let p=window.open(e||"",c,f);W(p,n,"popup-blocked");try{p.focus()}catch{}return new Cc(p)}function Tx(n,e){let t=document.createElement("a");t.href=n,t.target=e;let i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}var Ax="__/auth/handler",Cx="emulator/auth/handler",Sx=encodeURIComponent("fac");function Ay(n,e,t,i,r,s){return b(this,null,function*(){W(n.config.authDomain,n,"auth-domain-config-required"),W(n.config.apiKey,n,"invalid-api-key");let o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:On,eventId:r};if(e instanceof Zs){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",Bb(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(let[f,p]of Object.entries(s||{}))o[f]=p}if(e instanceof wc){let f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}n.tenantId&&(o.tid=n.tenantId);let c=o;for(let f of Object.keys(c))c[f]===void 0&&delete c[f];let l=yield n._getAppCheckToken(),d=l?`#${Sx}=${encodeURIComponent(l)}`:"";return`${Rx(n)}?${Yi(c).slice(1)}${d}`})}function Rx({config:n}){return n.emulator?Zf(n,Cx):`https://${n.authDomain}/${Ax}`}var Vf="webStorageSupport",Qf=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=sm,this._completeRedirectFn=ex,this._overrideRedirectResult=JD}_openPopup(e,t,i,r){return b(this,null,function*(){var s;gn((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");let o=yield Ay(e,t,i,Ff(),r);return Ex(e,o,om())})}_openRedirect(e,t,i,r){return b(this,null,function*(){yield this._originValidation(e);let s=yield Ay(e,t,i,Ff(),r);return MD(s),new Promise(()=>{})})}_initialize(e){let t=e._key();if(this.eventManagers[t]){let{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(gn(s,"If manager is not set, promise should be"),s)}let i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}initAndGetManager(e){return b(this,null,function*(){let t=yield bx(e),i=new Kf(e);return t.register("authEvent",r=>(W(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i})}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Vf,{type:Vf},r=>{var s;let o=(s=r?.[0])===null||s===void 0?void 0:s[Vf];o!==void 0&&t(!!o),Zt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){let t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=ox(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return $y()||nm()||Sc()}},ow=Qf;var Cy="@firebase/auth",Sy="1.7.6";var Yf=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return b(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function Dx(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function xx(n){st(new Ne("auth",(e,{options:t})=>{let i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=i.options;W(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});let l={apiKey:o,authDomain:c,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gy(n)},d=new qf(i,r,s,l);return yD(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),st(new Ne("auth-internal",e=>{let t=Rc(e.getProvider("auth").getImmediate());return(i=>new Yf(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ue(Cy,Sy,Dx(n)),Ue(Cy,Sy,"esm2017")}var Px=5*60,kx=Yu("authIdTokenMaxAge")||Px,Ry=null,Nx=n=>e=>b(void 0,null,function*(){let t=e&&(yield e.getIdTokenResult()),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>kx)return;let r=t?.token;Ry!==r&&(Ry=r,yield fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))});function cm(n=ci()){let e=Nt(n,"auth");if(e.isInitialized())return e.getImmediate();let t=Hy(n,{popupRedirectResolver:ow,persistence:[iw,Zy,sm]}),i=Yu("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){let s=new URL(i,location.origin);if(location.origin===s.origin){let o=Nx(s.toString());Xy(t,o,()=>o(t.currentUser)),Jy(t,c=>o(c))}}let r=Ku("auth");return r&&Ky(t,`http://${r}`),t}function Mx(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}bD({loadJS(n){return new Promise((e,t)=>{let i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{let s=Ft("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Mx().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});xx("Browser");var Ox={apiKey:"AIzaSyBuS1gDyDbKr5is5s-hytKtVzEj6C8yFEo",authDomain:"r210-840cd.firebaseapp.com",databaseURL:"https://r210-840cd-default-rtdb.firebaseio.com",projectId:"r210-840cd",storageBucket:"r210-840cd.appspot.com",messagingSenderId:"707797710533",appId:"1:707797710533:web:0e4158a28a89476e40e2ac",measurementId:"G-6HDH51CCC0"},aw=hd(Ox),vV=kv(aw),lm=ry(aw),Vx=new rm,cw=cm();cw.languageCode="it";var Ai=(()=>{let e=class e{add_googleUser(i){this.user=i}constructor(){this.user=null}get_db(){return lm}addData(i){return b(this,null,function*(){try{let r=yield Mf(lc(lm,"power"),{uid:i.uid,expname:i.expname,power50:i.power50,powerA:i.powerA,powerB:i.powerB,displayname:i.displayname});console.log("Document written with ID: ",r.id)}catch(r){console.error("Error adding document: ",r)}})}getData(){return b(this,null,function*(){let i=[];return(yield my(lc(lm,"power"))).forEach(s=>{i.push({id:s.id,power50:s.data().power50,powerA:s.data().powerA,powerB:s.data().powerB,displayname:s.data().displayname,uid:s.data().uid,expname:s.data().expname})}),i})}auth(){return b(this,null,function*(){return am(cw,Vx)})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();var lw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({imports:[kt,an,kt]});let n=e;return n})();var Lx=["*"],xc;function Ux(){if(xc===void 0&&(xc=null,typeof window<"u")){let n=window;n.trustedTypes!==void 0&&(xc=n.trustedTypes.createPolicy("angular#components",{createHTML:e=>e}))}return xc}function io(n){return Ux()?.createHTML(n)||n}function uw(n){return Error(`Unable to find icon with the name "${n}"`)}function jx(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function dw(n){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${n}".`)}function hw(n){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${n}".`)}var bn=class{constructor(e,t,i){this.url=e,this.svgText=t,this.options=i}},Bx=(()=>{let e=class e{constructor(i,r,s,o){this._httpClient=i,this._sanitizer=r,this._errorHandler=o,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=s}addSvgIcon(i,r,s){return this.addSvgIconInNamespace("",i,r,s)}addSvgIconLiteral(i,r,s){return this.addSvgIconLiteralInNamespace("",i,r,s)}addSvgIconInNamespace(i,r,s,o){return this._addSvgIconConfig(i,r,new bn(s,null,o))}addSvgIconResolver(i){return this._resolvers.push(i),this}addSvgIconLiteralInNamespace(i,r,s,o){let c=this._sanitizer.sanitize(ut.HTML,s);if(!c)throw hw(s);let l=io(c);return this._addSvgIconConfig(i,r,new bn("",l,o))}addSvgIconSet(i,r){return this.addSvgIconSetInNamespace("",i,r)}addSvgIconSetLiteral(i,r){return this.addSvgIconSetLiteralInNamespace("",i,r)}addSvgIconSetInNamespace(i,r,s){return this._addSvgIconSetConfig(i,new bn(r,null,s))}addSvgIconSetLiteralInNamespace(i,r,s){let o=this._sanitizer.sanitize(ut.HTML,r);if(!o)throw hw(r);let c=io(o);return this._addSvgIconSetConfig(i,new bn("",c,s))}registerFontClassAlias(i,r=i){return this._fontCssClassesByAlias.set(i,r),this}classNameForFontAlias(i){return this._fontCssClassesByAlias.get(i)||i}setDefaultFontSetClass(...i){return this._defaultFontSetClass=i,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(i){let r=this._sanitizer.sanitize(ut.RESOURCE_URL,i);if(!r)throw dw(i);let s=this._cachedIconsByUrl.get(r);return s?B(Pc(s)):this._loadSvgIconFromConfig(new bn(i,null)).pipe(we(o=>this._cachedIconsByUrl.set(r,o)),Q(o=>Pc(o)))}getNamedSvgIcon(i,r=""){let s=fw(r,i),o=this._svgIconConfigs.get(s);if(o)return this._getSvgFromConfig(o);if(o=this._getIconConfigFromResolvers(r,i),o)return this._svgIconConfigs.set(s,o),this._getSvgFromConfig(o);let c=this._iconSetConfigs.get(r);return c?this._getSvgFromIconSetConfigs(i,c):Wn(uw(s))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(i){return i.svgText?B(Pc(this._svgElementFromConfig(i))):this._loadSvgIconFromConfig(i).pipe(Q(r=>Pc(r)))}_getSvgFromIconSetConfigs(i,r){let s=this._extractIconWithNameFromAnySet(i,r);if(s)return B(s);let o=r.filter(c=>!c.svgText).map(c=>this._loadSvgIconSetFromConfig(c).pipe(Tn(l=>{let f=`Loading icon set URL: ${this._sanitizer.sanitize(ut.RESOURCE_URL,c.url)} failed: ${l.message}`;return this._errorHandler.handleError(new Error(f)),B(null)})));return Do(o).pipe(Q(()=>{let c=this._extractIconWithNameFromAnySet(i,r);if(!c)throw uw(i);return c}))}_extractIconWithNameFromAnySet(i,r){for(let s=r.length-1;s>=0;s--){let o=r[s];if(o.svgText&&o.svgText.toString().indexOf(i)>-1){let c=this._svgElementFromConfig(o),l=this._extractSvgIconFromSet(c,i,o.options);if(l)return l}}return null}_loadSvgIconFromConfig(i){return this._fetchIcon(i).pipe(we(r=>i.svgText=r),Q(()=>this._svgElementFromConfig(i)))}_loadSvgIconSetFromConfig(i){return i.svgText?B(null):this._fetchIcon(i).pipe(we(r=>i.svgText=r))}_extractSvgIconFromSet(i,r,s){let o=i.querySelector(`[id="${r}"]`);if(!o)return null;let c=o.cloneNode(!0);if(c.removeAttribute("id"),c.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(c,s);if(c.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(c),s);let l=this._svgElementFromString(io("<svg></svg>"));return l.appendChild(c),this._setSvgAttributes(l,s)}_svgElementFromString(i){let r=this._document.createElement("DIV");r.innerHTML=i;let s=r.querySelector("svg");if(!s)throw Error("<svg> tag not found");return s}_toSvgElement(i){let r=this._svgElementFromString(io("<svg></svg>")),s=i.attributes;for(let o=0;o<s.length;o++){let{name:c,value:l}=s[o];c!=="id"&&r.setAttribute(c,l)}for(let o=0;o<i.childNodes.length;o++)i.childNodes[o].nodeType===this._document.ELEMENT_NODE&&r.appendChild(i.childNodes[o].cloneNode(!0));return r}_setSvgAttributes(i,r){return i.setAttribute("fit",""),i.setAttribute("height","100%"),i.setAttribute("width","100%"),i.setAttribute("preserveAspectRatio","xMidYMid meet"),i.setAttribute("focusable","false"),r&&r.viewBox&&i.setAttribute("viewBox",r.viewBox),i}_fetchIcon(i){let{url:r,options:s}=i,o=s?.withCredentials??!1;if(!this._httpClient)throw jx();if(r==null)throw Error(`Cannot fetch icon from URL "${r}".`);let c=this._sanitizer.sanitize(ut.RESOURCE_URL,r);if(!c)throw dw(r);let l=this._inProgressUrlFetches.get(c);if(l)return l;let d=this._httpClient.get(c,{responseType:"text",withCredentials:o}).pipe(Q(f=>io(f)),Kn(()=>this._inProgressUrlFetches.delete(c)),Rp());return this._inProgressUrlFetches.set(c,d),d}_addSvgIconConfig(i,r,s){return this._svgIconConfigs.set(fw(i,r),s),this}_addSvgIconSetConfig(i,r){let s=this._iconSetConfigs.get(i);return s?s.push(r):this._iconSetConfigs.set(i,[r]),this}_svgElementFromConfig(i){if(!i.svgElement){let r=this._svgElementFromString(i.svgText);this._setSvgAttributes(r,i.options),i.svgElement=r}return i.svgElement}_getIconConfigFromResolvers(i,r){for(let s=0;s<this._resolvers.length;s++){let o=this._resolvers[s](r,i);if(o)return zx(o)?new bn(o.url,null,o.options):new bn(o,null)}}};e.\u0275fac=function(r){return new(r||e)(U(dg,8),U(ql),U(_e,8),U(Yn))},e.\u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"});let n=e;return n})();function Pc(n){return n.cloneNode(!0)}function fw(n,e){return n+":"+e}function zx(n){return!!(n.url&&n.options)}var qx=new ae("MAT_ICON_DEFAULT_OPTIONS"),$x=new ae("mat-icon-location",{providedIn:"root",factory:Gx});function Gx(){let n=V(_e),e=n?n.location:null;return{getPathname:()=>e?e.pathname+e.search:""}}var mw=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Wx=mw.map(n=>`[${n}]`).join(", "),Hx=/^url\(['"]?#(.*?)['"]?\)$/,pw=(()=>{let e=class e{get color(){return this._color||this._defaultColor}set color(i){this._color=i}get svgIcon(){return this._svgIcon}set svgIcon(i){i!==this._svgIcon&&(i?this._updateSvgIcon(i):this._svgIcon&&this._clearSvgElement(),this._svgIcon=i)}get fontSet(){return this._fontSet}set fontSet(i){let r=this._cleanupFontValue(i);r!==this._fontSet&&(this._fontSet=r,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(i){let r=this._cleanupFontValue(i);r!==this._fontIcon&&(this._fontIcon=r,this._updateFontIconClasses())}constructor(i,r,s,o,c,l){this._elementRef=i,this._iconRegistry=r,this._location=o,this._errorHandler=c,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=Gr.EMPTY,l&&(l.color&&(this.color=this._defaultColor=l.color),l.fontSet&&(this.fontSet=l.fontSet)),s||i.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(i){if(!i)return["",""];let r=i.split(":");switch(r.length){case 1:return["",r[0]];case 2:return r;default:throw Error(`Invalid icon name: "${i}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let i=this._elementsWithExternalReferences;if(i&&i.size){let r=this._location.getPathname();r!==this._previousPath&&(this._previousPath=r,this._prependPathToReferences(r))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(i){this._clearSvgElement();let r=this._location.getPathname();this._previousPath=r,this._cacheChildrenWithExternalReferences(i),this._prependPathToReferences(r),this._elementRef.nativeElement.appendChild(i)}_clearSvgElement(){let i=this._elementRef.nativeElement,r=i.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();r--;){let s=i.childNodes[r];(s.nodeType!==1||s.nodeName.toLowerCase()==="svg")&&s.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let i=this._elementRef.nativeElement,r=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(s=>s.length>0);this._previousFontSetClass.forEach(s=>i.classList.remove(s)),r.forEach(s=>i.classList.add(s)),this._previousFontSetClass=r,this.fontIcon!==this._previousFontIconClass&&!r.includes("mat-ligature-font")&&(this._previousFontIconClass&&i.classList.remove(this._previousFontIconClass),this.fontIcon&&i.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(i){return typeof i=="string"?i.trim().split(" ")[0]:i}_prependPathToReferences(i){let r=this._elementsWithExternalReferences;r&&r.forEach((s,o)=>{s.forEach(c=>{o.setAttribute(c.name,`url('${i}#${c.value}')`)})})}_cacheChildrenWithExternalReferences(i){let r=i.querySelectorAll(Wx),s=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let o=0;o<r.length;o++)mw.forEach(c=>{let l=r[o],d=l.getAttribute(c),f=d?d.match(Hx):null;if(f){let p=s.get(l);p||(p=[],s.set(l,p)),p.push({name:c,value:f[1]})}})}_updateSvgIcon(i){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),i){let[r,s]=this._splitIconName(i);r&&(this._svgNamespace=r),s&&(this._svgName=s),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(s,r).pipe(Dt(1)).subscribe(o=>this._setSvgElement(o),o=>{let c=`Error retrieving icon ${r}:${s}! ${o.message}`;this._errorHandler.handleError(new Error(c))})}}};e.\u0275fac=function(r){return new(r||e)(q(Ve),q(Bx),wl("aria-hidden"),q($x),q(Yn),q(qx,8))},e.\u0275cmp=nt({type:e,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(r,s){r&2&&(on("data-mat-icon-type",s._usingFontIcon()?"font":"svg")("data-mat-icon-name",s._svgName||s.fontIcon)("data-mat-icon-namespace",s._svgNamespace||s.fontSet)("fontIcon",s._usingFontIcon()?s.fontIcon:null),Mo(s.color?"mat-"+s.color:""),Pt("mat-icon-inline",s.inline)("mat-icon-no-color",s.color!=="primary"&&s.color!=="accent"&&s.color!=="warn"))},inputs:{color:"color",inline:[ve.HasDecoratorInputTransform,"inline","inline",rt],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Sn,it],ngContentSelectors:Lx,decls:1,vars:0,template:function(r,s){r&1&&(Oi(),Rn(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0});let n=e;return n})(),gw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({imports:[kt,kt]});let n=e;return n})();function Qx(n,e){n&1&&(j(0,"mat-icon"),ee(1,"person"),L())}function Yx(n,e){if(n&1&&Re(0,"img",3),n&2){let t=El();Kp("src",t.gUser==null?null:t.gUser.photoUrl,jp)}}function Jx(n,e){n&1&&(j(0,"a"),ee(1,"\u767B\u5165"),L())}function Xx(n,e){n&1&&(j(0,"a"),ee(1,"\u767B\u51FA"),L())}var vw=(()=>{let e=class e{constructor(i){this.gUser=null,this.photourl="",this.fire=i}login(){this.gUser==null?this.fire.auth().then(i=>{console.log(i.user.uid),this.gUser={uid:i.user.uid??"",DisplayName:i.user.displayName??"",photoUrl:i.user.photoURL??this.photourl,isAdministrator:!1}}).then(()=>{this.fire.add_googleUser(this.gUser??null)}):(this.gUser=null,this.fire.add_googleUser(this.gUser??null))}isNotEmpty(){return this.gUser!=null}};e.\u0275fac=function(r){return new(r||e)(q(Ai))},e.\u0275cmp=nt({type:e,selectors:[["app-login"]],standalone:!0,features:[it],decls:8,vars:5,consts:[["mat-fab","","extended","",3,"click"],[4,"ngIf"],["class","avatar","alt","login/logout",3,"src",4,"ngIf"],["alt","login/logout",1,"avatar",3,"src"]],template:function(r,s){r&1&&(j(0,"div")(1,"button",0),wt("click",function(){return s.login()}),Ge(2,Qx,2,0,"mat-icon",1),j(3,"div"),Ge(4,Yx,1,1,"img",2),ee(5),Ge(6,Jx,2,0,"a",1)(7,Xx,2,0,"a",1),L()()()),r&2&&(Z(2),ue("ngIf",!s.isNotEmpty()),Z(2),ue("ngIf",s.isNotEmpty()),Z(),It(" ",s.gUser==null?null:s.gUser.DisplayName," "),Z(),ue("ngIf",!s.isNotEmpty()),Z(),ue("ngIf",s.isNotEmpty()))},dependencies:[lw,xb,Db,an,Lo,gw,pw],styles:[".avatar[_ngcontent-%COMP%]{width:30px;height:30px;margin:10px;border-radius:50%;object-fit:cover}"]});let n=e;return n})();var Rw=(()=>{let e=class e{constructor(i,r){this._renderer=i,this._elementRef=r,this.onChange=s=>{},this.onTouched=()=>{}}setProperty(i,r){this._renderer.setProperty(this._elementRef.nativeElement,i,r)}registerOnTouched(i){this.onTouched=i}registerOnChange(i){this.onChange=i}setDisabledState(i){this.setProperty("disabled",i)}};e.\u0275fac=function(r){return new(r||e)(q(Mi),q(Ve))},e.\u0275dir=ge({type:e});let n=e;return n})(),Lc=(()=>{let e=class e extends Rw{};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275dir=ge({type:e,features:[dt]});let n=e;return n})(),co=new ae("");var Zx={provide:co,useExisting:Cn(()=>Uc),multi:!0};function eP(){let n=Fi()?Fi().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}var tP=new ae(""),Uc=(()=>{let e=class e extends Rw{constructor(i,r,s){super(i,r),this._compositionMode=s,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!eP())}writeValue(i){let r=i??"";this.setProperty("value",r)}_handleInput(i){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(i)}_compositionStart(){this._composing=!0}_compositionEnd(i){this._composing=!1,this._compositionMode&&this.onChange(i)}};e.\u0275fac=function(r){return new(r||e)(q(Mi),q(Ve),q(tP,8))},e.\u0275dir=ge({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,s){r&1&&wt("input",function(c){return s._handleInput(c.target.value)})("blur",function(){return s.onTouched()})("compositionstart",function(){return s._compositionStart()})("compositionend",function(c){return s._compositionEnd(c.target.value)})},features:[Lt([Zx]),dt]});let n=e;return n})();function nP(n){return n==null||(typeof n=="string"||Array.isArray(n))&&n.length===0}var dm=new ae(""),Dw=new ae("");function iP(n){return nP(n.value)?{required:!0}:null}function _w(n){return null}function xw(n){return n!=null}function Pw(n){return Vo(n)?tt(n):n}function kw(n){let e={};return n.forEach(t=>{e=t!=null?N(N({},e),t):e}),Object.keys(e).length===0?null:e}function Nw(n,e){return e.map(t=>t(n))}function rP(n){return!n.validate}function Mw(n){return n.map(e=>rP(e)?e:t=>e.validate(t))}function sP(n){if(!n)return null;let e=n.filter(xw);return e.length==0?null:function(t){return kw(Nw(t,e))}}function hm(n){return n!=null?sP(Mw(n)):null}function oP(n){if(!n)return null;let e=n.filter(xw);return e.length==0?null:function(t){let i=Nw(t,e).map(Pw);return Do(i).pipe(Q(kw))}}function fm(n){return n!=null?oP(Mw(n)):null}function yw(n,e){return n===null?[e]:Array.isArray(n)?[...n,e]:[n,e]}function aP(n){return n._rawValidators}function cP(n){return n._rawAsyncValidators}function um(n){return n?Array.isArray(n)?n:[n]:[]}function Nc(n,e){return Array.isArray(n)?n.includes(e):n===e}function ww(n,e){let t=um(e);return um(n).forEach(r=>{Nc(t,r)||t.push(r)}),t}function Iw(n,e){return um(e).filter(t=>!Nc(n,t))}var Mc=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=hm(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=fm(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},Ar=class extends Mc{get formDirective(){return null}get path(){return null}},ao=class extends Mc{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},Oc=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},lP={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},aF=be(N({},lP),{"[class.ng-submitted]":"isSubmitted"}),Ow=(()=>{let e=class e extends Oc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(q(ao,2))},e.\u0275dir=ge({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,s){r&2&&Pt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)},features:[dt]});let n=e;return n})(),Vw=(()=>{let e=class e extends Oc{constructor(i){super(i)}};e.\u0275fac=function(r){return new(r||e)(q(Ar,10))},e.\u0275dir=ge({type:e,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,s){r&2&&Pt("ng-untouched",s.isUntouched)("ng-touched",s.isTouched)("ng-pristine",s.isPristine)("ng-dirty",s.isDirty)("ng-valid",s.isValid)("ng-invalid",s.isInvalid)("ng-pending",s.isPending)("ng-submitted",s.isSubmitted)},features:[dt]});let n=e;return n})();var ro="VALID",kc="INVALID",Tr="PENDING",so="DISABLED";function Fw(n){return(jc(n)?n.validators:n)||null}function uP(n){return Array.isArray(n)?hm(n):n||null}function Lw(n,e){return(jc(e)?e.asyncValidators:n)||null}function dP(n){return Array.isArray(n)?fm(n):n||null}function jc(n){return n!=null&&!Array.isArray(n)&&typeof n=="object"}function hP(n,e,t){let i=n.controls;if(!(e?Object.keys(i):i).length)throw new he(1e3,"");if(!i[t])throw new he(1001,"")}function fP(n,e,t){n._forEachChild((i,r)=>{if(t[r]===void 0)throw new he(1002,"")})}var Vc=class{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===ro}get invalid(){return this.status===kc}get pending(){return this.status==Tr}get disabled(){return this.status===so}get enabled(){return this.status!==so}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(ww(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(ww(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Iw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Iw(e,this._rawAsyncValidators))}hasValidator(e){return Nc(this._rawValidators,e)}hasAsyncValidator(e){return Nc(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Tr,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=so,this.errors=null,this._forEachChild(i=>{i.disable(be(N({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(be(N({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=ro,this._forEachChild(i=>{i.enable(be(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(be(N({},e),{skipPristineCheck:t})),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===ro||this.status===Tr)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?so:ro}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Tr,this._hasOwnPendingAsyncValidator=!0;let t=Pw(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((i,r)=>i&&i._find(r),this)}getError(e,t){let i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new yt,this.statusChanges=new yt}_calculateStatus(){return this._allControlsDisabled()?so:this.errors?kc:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Tr)?Tr:this._anyControlsHaveStatus(kc)?kc:ro}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){jc(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=uP(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=dP(this._rawAsyncValidators)}},Fc=class extends Vc{constructor(e,t,i){super(Fw(t),Lw(i,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,i={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,i={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:i.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){fP(this,!0,e),Object.keys(e).forEach(i=>{hP(this,!0,i),this.controls[i].setValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){e!=null&&(Object.keys(e).forEach(i=>{let r=this.controls[i];r&&r.patchValue(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((i,r)=>{i.reset(e?e[r]:null,{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,i)=>(e[i]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,i)=>i._syncPendingControls()?!0:t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{let i=this.controls[t];i&&e(i,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(let[t,i]of Object.entries(this.controls))if(this.contains(t)&&e(i))return!0;return!1}_reduceValue(){let e={};return this._reduceChildren(e,(t,i,r)=>((i.enabled||this.disabled)&&(t[r]=i.value),t))}_reduceChildren(e,t){let i=e;return this._forEachChild((r,s)=>{i=t(i,r,s)}),i}_allControlsDisabled(){for(let e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}};var mm=new ae("CallSetDisabledState",{providedIn:"root",factory:()=>pm}),pm="always";function mP(n,e){return[...e.path,n]}function Uw(n,e,t=pm){jw(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(n.disabled),gP(n,e),vP(n,e),bP(n,e),pP(n,e)}function Ew(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function pP(n,e){if(e.valueAccessor.setDisabledState){let t=i=>{e.valueAccessor.setDisabledState(i)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}function jw(n,e){let t=aP(n);e.validator!==null?n.setValidators(yw(t,e.validator)):typeof t=="function"&&n.setValidators([t]);let i=cP(n);e.asyncValidator!==null?n.setAsyncValidators(yw(i,e.asyncValidator)):typeof i=="function"&&n.setAsyncValidators([i]);let r=()=>n.updateValueAndValidity();Ew(e._rawValidators,r),Ew(e._rawAsyncValidators,r)}function gP(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,n.updateOn==="change"&&Bw(n,e)})}function bP(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,n.updateOn==="blur"&&n._pendingChange&&Bw(n,e),n.updateOn!=="submit"&&n.markAsTouched()})}function Bw(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function vP(n,e){let t=(i,r)=>{e.valueAccessor.writeValue(i),r&&e.viewToModelUpdate(i)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}function _P(n,e){n==null,jw(n,e)}function yP(n,e){if(!n.hasOwnProperty("model"))return!1;let t=n.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function wP(n){return Object.getPrototypeOf(n.constructor)===Lc}function IP(n,e){n._syncPendingControls(),e.forEach(t=>{let i=t.control;i.updateOn==="submit"&&i._pendingChange&&(t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1)})}function EP(n,e){if(!e)return null;Array.isArray(e);let t,i,r;return e.forEach(s=>{s.constructor===Uc?t=s:wP(s)?i=s:r=s}),r||i||t||null}var TP={provide:Ar,useExisting:Cn(()=>gm)},oo=Promise.resolve(),gm=(()=>{let e=class e extends Ar{constructor(i,r,s){super(),this.callSetDisabledState=s,this.submitted=!1,this._directives=new Set,this.ngSubmit=new yt,this.form=new Fc({},hm(i),fm(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(i){oo.then(()=>{let r=this._findContainer(i.path);i.control=r.registerControl(i.name,i.control),Uw(i.control,i,this.callSetDisabledState),i.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(i)})}getControl(i){return this.form.get(i.path)}removeControl(i){oo.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name),this._directives.delete(i)})}addFormGroup(i){oo.then(()=>{let r=this._findContainer(i.path),s=new Fc({});_P(s,i),r.registerControl(i.name,s),s.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(i){oo.then(()=>{let r=this._findContainer(i.path);r&&r.removeControl(i.name)})}getFormGroup(i){return this.form.get(i.path)}updateModel(i,r){oo.then(()=>{this.form.get(i.path).setValue(r)})}setValue(i){this.control.setValue(i)}onSubmit(i){return this.submitted=!0,IP(this.form,this._directives),this.ngSubmit.emit(i),i?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(i=void 0){this.form.reset(i),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(i){return i.pop(),i.length?this.form.get(i):this.form}};e.\u0275fac=function(r){return new(r||e)(q(dm,10),q(Dw,10),q(mm,8))},e.\u0275dir=ge({type:e,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,s){r&1&&wt("submit",function(c){return s.onSubmit(c)})("reset",function(){return s.onReset()})},inputs:{options:[ve.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[Lt([TP]),dt]});let n=e;return n})();function Tw(n,e){let t=n.indexOf(e);t>-1&&n.splice(t,1)}function Aw(n){return typeof n=="object"&&n!==null&&Object.keys(n).length===2&&"value"in n&&"disabled"in n}var AP=class extends Vc{constructor(e=null,t,i){super(Fw(t),Lw(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),jc(t)&&(t.nonNullable||t.initialValueIsDefault)&&(Aw(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(i=>i(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Tw(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Tw(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){Aw(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var CP={provide:ao,useExisting:Cn(()=>bm)},Cw=Promise.resolve(),bm=(()=>{let e=class e extends ao{constructor(i,r,s,o,c,l){super(),this._changeDetectorRef=c,this.callSetDisabledState=l,this.control=new AP,this._registered=!1,this.name="",this.update=new yt,this._parent=i,this._setValidators(r),this._setAsyncValidators(s),this.valueAccessor=EP(this,o)}ngOnChanges(i){if(this._checkForErrors(),!this._registered||"name"in i){if(this._registered&&(this._checkName(),this.formDirective)){let r=i.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in i&&this._updateDisabled(i),yP(i,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(i){this.viewModel=i,this.update.emit(i)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Uw(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(i){Cw.then(()=>{this.control.setValue(i,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(i){let r=i.isDisabled.currentValue,s=r!==0&&rt(r);Cw.then(()=>{s&&!this.control.disabled?this.control.disable():!s&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(i){return this._parent?mP(i,this._parent):[i]}};e.\u0275fac=function(r){return new(r||e)(q(Ar,9),q(dm,10),q(Dw,10),q(co,10),q(Vi,8),q(mm,8))},e.\u0275dir=ge({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[ve.None,"disabled","isDisabled"],model:[ve.None,"ngModel","model"],options:[ve.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Lt([CP]),dt,Pi]});let n=e;return n})(),zw=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ge({type:e,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]});let n=e;return n})(),SP={provide:co,useExisting:Cn(()=>vm),multi:!0},vm=(()=>{let e=class e extends Lc{writeValue(i){let r=i??"";this.setProperty("value",r)}registerOnChange(i){this.onChange=r=>{i(r==""?null:parseFloat(r))}}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275dir=ge({type:e,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(r,s){r&1&&wt("input",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},features:[Lt([SP]),dt]});let n=e;return n})();var RP={provide:co,useExisting:Cn(()=>Bc),multi:!0};function qw(n,e){return n==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function DP(n){return n.split(":")[0]}var Bc=(()=>{let e=class e extends Lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r=this._getOptionId(i),s=qw(r,i);this.setProperty("value",s)}registerOnChange(i){this.onChange=r=>{this.value=this._getOptionValue(r),i(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r),i))return r;return null}_getOptionValue(i){let r=DP(i);return this._optionMap.has(r)?this._optionMap.get(r):i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275dir=ge({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(r,s){r&1&&wt("change",function(c){return s.onChange(c.target.value)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Lt([RP]),dt]});let n=e;return n})(),$w=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption())}set ngValue(i){this._select!=null&&(this._select._optionMap.set(this.id,i),this._setElementValue(qw(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._setElementValue(i),this._select&&this._select.writeValue(this._select.value)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(q(Ve),q(Mi),q(Bc,9))},e.\u0275dir=ge({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})(),xP={provide:co,useExisting:Cn(()=>Gw),multi:!0};function Sw(n,e){return n==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${n}: ${e}`.slice(0,50))}function PP(n){return n.split(":")[0]}var Gw=(()=>{let e=class e extends Lc{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(i){this._compareWith=i}writeValue(i){this.value=i;let r;if(Array.isArray(i)){let s=i.map(o=>this._getOptionId(o));r=(o,c)=>{o._setSelected(s.indexOf(c.toString())>-1)}}else r=(s,o)=>{s._setSelected(!1)};this._optionMap.forEach(r)}registerOnChange(i){this.onChange=r=>{let s=[],o=r.selectedOptions;if(o!==void 0){let c=o;for(let l=0;l<c.length;l++){let d=c[l],f=this._getOptionValue(d.value);s.push(f)}}else{let c=r.options;for(let l=0;l<c.length;l++){let d=c[l];if(d.selected){let f=this._getOptionValue(d.value);s.push(f)}}}this.value=s,i(s)}}_registerOption(i){let r=(this._idCounter++).toString();return this._optionMap.set(r,i),r}_getOptionId(i){for(let r of this._optionMap.keys())if(this._compareWith(this._optionMap.get(r)._value,i))return r;return null}_getOptionValue(i){let r=PP(i);return this._optionMap.has(r)?this._optionMap.get(r)._value:i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275dir=ge({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(r,s){r&1&&wt("change",function(c){return s.onChange(c.target)})("blur",function(){return s.onTouched()})},inputs:{compareWith:"compareWith"},features:[Lt([xP]),dt]});let n=e;return n})(),Ww=(()=>{let e=class e{constructor(i,r,s){this._element=i,this._renderer=r,this._select=s,this._select&&(this.id=this._select._registerOption(this))}set ngValue(i){this._select!=null&&(this._value=i,this._setElementValue(Sw(this.id,i)),this._select.writeValue(this._select.value))}set value(i){this._select?(this._value=i,this._setElementValue(Sw(this.id,i)),this._select.writeValue(this._select.value)):this._setElementValue(i)}_setElementValue(i){this._renderer.setProperty(this._element.nativeElement,"value",i)}_setSelected(i){this._renderer.setProperty(this._element.nativeElement,"selected",i)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(r){return new(r||e)(q(Ve),q(Mi),q(Gw,9))},e.\u0275dir=ge({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let n=e;return n})();var kP=(()=>{let e=class e{constructor(){this._validator=_w}ngOnChanges(i){if(this.inputName in i){let r=this.normalizeInput(i[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):_w,this._onChange&&this._onChange()}}validate(i){return this._validator(i)}registerOnValidatorChange(i){this._onChange=i}enabled(i){return i!=null}};e.\u0275fac=function(r){return new(r||e)},e.\u0275dir=ge({type:e,features:[Pi]});let n=e;return n})();var NP={provide:dm,useExisting:Cn(()=>_m),multi:!0};var _m=(()=>{let e=class e extends kP{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=rt,this.createValidator=i=>iP}enabled(i){return i}};e.\u0275fac=(()=>{let i;return function(s){return(i||(i=sn(e)))(s||e)}})(),e.\u0275dir=ge({type:e,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,s){r&2&&on("required",s._enabled?"":null)},inputs:{required:"required"},features:[Lt([NP]),dt]});let n=e;return n})();var MP=(()=>{let e=class e{};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({});let n=e;return n})();var Hw=(()=>{let e=class e{static withConfig(i){return{ngModule:e,providers:[{provide:mm,useValue:i.callSetDisabledState??pm}]}}};e.\u0275fac=function(r){return new(r||e)},e.\u0275mod=Se({type:e}),e.\u0275inj=Ce({imports:[MP]});let n=e;return n})();var VP=()=>({updateOn:"change"});function FP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function LP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function UP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function jP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function BP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function zP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function qP(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}function $P(n,e){if(n&1&&(j(0,"option",39),ee(1),L()),n&2){let t=e.$implicit;ue("value",t),Z(),It(" ",t," ")}}var Kw=(()=>{let e=class e{constructor(){this.basepower=0,this.workpower=0,this.workStructure="",this.beamExpander="",this.lens="",this.slit="",this.doe="",this.wavePlate="",this.lambda="",this.atDate=new Date().toISOString().split("T")[0],this.brandKey="",this.brands2={},this.keys_brands2=Object.keys(this.brands2),this.lambdas=["1030","515","343","258"],this.workStructureList=["\u76F4\u5BEB","Scanner"],this.beamExpanderList=["x(\u7121)","VRE13","VEX13"],this.slitList=["x(\u7121)"],this.lensList=["F 70 telecentric","F 100 telecentric","F 160 telecentric","F 103 telecentric Ronar-Simith","F 254 telecentric Ronar-Simith","Mitutoyo NIR 5X","Mitutoyo NIR 10X","Mitutoyo NIR 20X","Mitutoyo NIR 50X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 20X","OLYMPUS LCD \u4FEE\u50CF\u5DEE 50X","OLYMPUS IR \u4FEE\u50CF\u5DEE 50X"],this.doeList=["X(\u7121)","\u5E73\u9802","M shape"],this.wavePlateList=["X(\u7121)","\u03BB2","\u03BB/4"],console.log("asdasdasdad ok"),this.brands2["LC 80W"]=["S1",100,80],this.brands2.EKSPLA=["S2",200,100],this.brands2.Litlit=["S2",100,100],this.brands2["LC 40W"]=["S3",100,80],this.keys_brands2=Object.keys(this.brands2),this.brandKey=this.keys_brands2[0],this.lambda=this.lambdas[0],this.workStructure=this.workStructureList[0],this.beamExpander=this.beamExpanderList[0],this.slit=this.slitList[0],this.lens=this.lensList[0],this.doe=this.doeList[0],this.wavePlate=this.wavePlateList[0]}onSubmit(){console.log("brands2\u7684key:",this.brandKey)}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=nt({type:e,selectors:[["app-inputdata"]],standalone:!0,features:[it],decls:88,vars:24,consts:[["form","ngForm"],[1,"container"],["novalidate","",1,"needs-validation",3,"ngSubmit"],[1,"text-center"],[1,"blockquote"],[1,"row","g-3"],[1,"col-md-12"],["for","brandKey",1,"form-label"],["id","brandKey","name","brandKey","required","",1,"form-select",3,"ngModelChange","ngModel","ngModelOptions"],[3,"value",4,"ngFor","ngForOf"],[1,"col-md-4"],["for","laser",1,"form-label"],["type","text","id","laser","disabled","true",1,"form-control",3,"value"],["for","rate",1,"form-label"],["type","text","id","rate","disabled","true",1,"form-control",3,"value"],["for","attenuator",1,"form-label"],["type","text","id","attenuator","disabled","true",1,"form-control",3,"value"],["for","lambda",1,"form-label"],["id","lambda","name","lambda","required","",1,"form-select",3,"ngModelChange","ngModel"],[1,"my-4"],["for","workStructure",1,"form-label"],["id","workStructure","name","workStructure","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","beamExpander",1,"form-label"],["id","beamExpander","name","beamExpander","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","slit",1,"form-label"],["id","slit","name","slit","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","lens",1,"form-label"],["id","lens","name","lens","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","doe",1,"form-label"],["id","doe","name","doe","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","wavePlate",1,"form-label"],["id","wavePlate","name","wavePlate","required","",1,"form-select",3,"ngModelChange","ngModel"],["for","basepower",1,"form-label"],["type","number","id","basepower","name","basepower","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","number","id","workpower","name","workpower","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-12"],["for","atDate",1,"form-label"],["type","date","id","atDate","name","atDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","submit",1,"w-100","btn","btn-primary","btn-lg"],[3,"value"]],template:function(r,s){if(r&1){let o=Hp();j(0,"div",1)(1,"form",2,0),wt("ngSubmit",function(){return ct(o),lt(s.onSubmit())}),j(3,"figure",3)(4,"blockquote",4)(5,"p"),ee(6,"\u96F7\u5C04"),L()()(),j(7,"div",5)(8,"div",6)(9,"label",7),ee(10,"\u54C1\u724C"),L(),j(11,"select",8),At("ngModelChange",function(l){return ct(o),Tt(s.brandKey,l)||(s.brandKey=l),lt(l)}),Ge(12,FP,2,2,"option",9),L()(),j(13,"div",10)(14,"label",11),ee(15,"\u8A2D\u5099"),L(),Re(16,"input",12),L(),j(17,"div",10)(18,"label",13),ee(19,"\u91CD\u8907\u7387(kHz)"),L(),Re(20,"input",14),L(),j(21,"div",10)(22,"label",15),ee(23,"attenuator(%)"),L(),Re(24,"input",16),L(),j(25,"div",6)(26,"label",17),ee(27,"\u6CE2\u9577(nm)"),L(),j(28,"select",18),At("ngModelChange",function(l){return ct(o),Tt(s.lambda,l)||(s.lambda=l),lt(l)}),Ge(29,LP,2,2,"option",9),L()()(),Re(30,"hr",19),j(31,"figure",3)(32,"blockquote",4)(33,"p"),ee(34,"\u5149\u8DEF\u67B6\u69CB"),L()()(),j(35,"div",5)(36,"div",6)(37,"label",20),ee(38,"\u52A0\u5DE5\u7CFB\u7D71"),L(),j(39,"select",21),At("ngModelChange",function(l){return ct(o),Tt(s.workStructure,l)||(s.workStructure=l),lt(l)}),Ge(40,UP,2,2,"option",9),L()(),j(41,"div",6)(42,"label",22),ee(43,"\u64F4\u675F\u93E1"),L(),j(44,"select",23),At("ngModelChange",function(l){return ct(o),Tt(s.beamExpander,l)||(s.beamExpander=l),lt(l)}),Ge(45,jP,2,2,"option",9),L()(),j(46,"div",6)(47,"label",24),ee(48,"\u72F9\u7E2B"),L(),j(49,"select",25),At("ngModelChange",function(l){return ct(o),Tt(s.slit,l)||(s.slit=l),lt(l)}),Ge(50,BP,2,2,"option",9),L()(),j(51,"div",6)(52,"label",26),ee(53,"\u93E1\u982D"),L(),j(54,"select",27),At("ngModelChange",function(l){return ct(o),Tt(s.lens,l)||(s.lens=l),lt(l)}),Ge(55,zP,2,2,"option",9),L()(),j(56,"div",6)(57,"label",28),ee(58,"DOE"),L(),j(59,"select",29),At("ngModelChange",function(l){return ct(o),Tt(s.doe,l)||(s.doe=l),lt(l)}),Ge(60,qP,2,2,"option",9),L()(),j(61,"div",6)(62,"label",30),ee(63,"DOE"),L(),j(64,"select",31),At("ngModelChange",function(l){return ct(o),Tt(s.wavePlate,l)||(s.wavePlate=l),lt(l)}),Ge(65,$P,2,2,"option",9),L()()(),Re(66,"hr",19),j(67,"figure",3)(68,"blockquote",4)(69,"p"),ee(70,"\u91CF\u6E2C"),L()()(),j(71,"div",5)(72,"div",6)(73,"label",32),ee(74,"\u57FA\u983B\u5149\u96F7\u5C04\u529F\u7387(w)"),L(),j(75,"input",33),At("ngModelChange",function(l){return ct(o),Tt(s.basepower,l)||(s.basepower=l),lt(l)}),L()(),j(76,"div",6)(77,"label",32),ee(78,"\u52A0\u5DE5\u9762\u529F\u7387(w)"),L(),j(79,"input",34),At("ngModelChange",function(l){return ct(o),Tt(s.workpower,l)||(s.workpower=l),lt(l)}),L()(),j(80,"div",35)(81,"label",36),ee(82,"\u65E5\u671F"),L(),j(83,"input",37),At("ngModelChange",function(l){return ct(o),Tt(s.atDate,l)||(s.atDate=l),lt(l)}),L()()(),Re(84,"hr",19),j(85,"div",5)(86,"button",38),ee(87," \u78BA\u8A8D\u9001\u51FA "),L()()()()}r&2&&(Z(11),Et("ngModel",s.brandKey),ue("ngModelOptions",Qp(23,VP)),Z(),ue("ngForOf",s.keys_brands2),Z(4),ue("value",s.brands2[s.brandKey][0]),Z(4),ue("value",s.brands2[s.brandKey][1]),Z(4),ue("value",s.brands2[s.brandKey][2]),Z(4),Et("ngModel",s.lambda),Z(),ue("ngForOf",s.lambdas),Z(10),Et("ngModel",s.workStructure),Z(),ue("ngForOf",s.workStructureList),Z(4),Et("ngModel",s.beamExpander),Z(),ue("ngForOf",s.beamExpanderList),Z(4),Et("ngModel",s.slit),Z(),ue("ngForOf",s.slitList),Z(4),Et("ngModel",s.lens),Z(),ue("ngForOf",s.lensList),Z(4),Et("ngModel",s.doe),Z(),ue("ngForOf",s.doeList),Z(4),Et("ngModel",s.wavePlate),Z(),ue("ngForOf",s.wavePlateList),Z(10),Et("ngModel",s.basepower),Z(4),Et("ngModel",s.workpower),Z(4),Et("ngModel",s.atDate))},dependencies:[Hw,zw,$w,Ww,Uc,vm,Bc,Ow,Vw,_m,bm,gm,an,tg]});let n=e;return n})();function GP(n,e){n&1&&Re(0,"div")}function WP(n,e){n&1&&Re(0,"app-inputdata")}function HP(n,e){n&1&&(j(0,"figure",6)(1,"blockquote",7)(2,"p"),ee(3,"\u8ACB\u767B\u5165"),L()(),j(4,"figcaption",8),ee(5," \u767B\u5165\u60A8\u7684google\u5E33\u865F "),L()())}var Qw=(()=>{let e=class e{get userInfo(){return this.fire.user}constructor(i){this.title="P20240815",this.fire=i}};e.\u0275fac=function(r){return new(r||e)(q(Ai))},e.\u0275cmp=nt({type:e,selectors:[["app-root"]],standalone:!0,features:[it],decls:11,vars:3,consts:[["thenBlock",""],["elseBlock",""],["data-bs-theme","light",1,"navbar","bg-light","border-bottom","border-body"],[1,"container-fluid"],["href","#",1,"navbar-brand"],[4,"ngIf","ngIfThen","ngIfElse"],[1,"text-center"],[1,"blockquote"],[1,"blockquote-footer"]],template:function(r,s){if(r&1&&(j(0,"nav",2)(1,"div",3)(2,"a",4),ee(3,"R210\u529F\u7387\u7D00\u9304"),L(),Re(4,"app-login"),L()(),Ge(5,GP,1,0,"div",5)(6,WP,1,0,"ng-template",null,0,Al)(8,HP,6,0,"ng-template",null,1,Al),Re(10,"router-outlet")),r&2){let o=Tl(7),c=Tl(9);Z(5),ue("ngIf",s.userInfo!=null)("ngIfThen",o)("ngIfElse",c)}},dependencies:[Tu,an,Lo,vw,Kw]});let n=e;return n})();_g(Qw,sb).catch(n=>console.error(n));
